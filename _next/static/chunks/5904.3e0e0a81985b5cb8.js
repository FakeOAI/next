"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5904,2107],{55904:function(e,t,r){r.d(t,{r:function(){return A},wV:function(){return G}});var n,a=r(94521),i=r(41141),s=r(85734),o=r(50684),l=r(83252),c=r(82823),d=r(81412),u=r(16645),m=r(63424),p=r(12586),f=r(90818),h=r(14314),x=r(98506),g=r(93747),v=r(15236),b=r(19841),y=r(61888),k=r.n(y),j=r(40319),w=r.n(j),P=r(92379),N=r(72256),C=r(26123),O=r(25940),_=r(74091),T=r(33481),L=r(69581),D=r(651);function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach(function(t){(0,a.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let E=_.Z.div(n||(n=(0,i.Z)(["group flex h-10 items-center gap-2 rounded-lg px-2 font-semibold hover:bg-token-main-surface-secondary text-sm text-token-text-primary"])));function A(){let{data:e,isLoading:t}=(0,c.Fi)({cutId:"recent",limit:8}),{data:r,isLoading:n}=(0,c.Dq)();return{isLoading:t||n,recent:e,pinned:r}}let R=(0,P.forwardRef)(function(e,t){let{query:r,onSelectGizmo:n,selectedIdx:a}=e,i=(0,x.oc)(),s=(0,P.useRef)([]),{isLoading:l,recent:c,pinned:d}=A();(0,P.useImperativeHandle)(t,()=>({handleEnterOnIndex:e=>{if(!p[e])return e<m.length?m[e].resource:"create"},getResultsLength:()=>m.length+1,scrollToItem:e=>{let t=s.current[e];t&&t.scrollIntoView({behavior:"instant",block:"nearest"})}}));let m=[];if(l)return(0,D.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,D.jsx)(o.Z,{})});c&&m.push(...c.pages.flatMap(e=>e.list.items).map(e=>({resource:e.resource,from:"recent"}))),d&&m.push(...d.items.map(e=>({resource:e,from:"pinned"})));let p=(m=k().uniqBy(m,e=>e.resource.gizmo.id)).map(e=>{var t;return null===(t=e.resource.gizmo.tags)||void 0===t?void 0:t.includes(u.U9.WorkspaceDisabled)});return r&&""!==r&&(m=m.filter(e=>{var t,n;return(e.resource.gizmo.display.name.toLowerCase()+(null===(t=e.resource.gizmo.display.description)||void 0===t?void 0:t.toLowerCase())+(null===(n=e.resource.gizmo.author.display_name)||void 0===n?void 0:n.toLowerCase())).includes(null==r?void 0:r.toLowerCase())})),(0,D.jsxs)("div",{className:"max-h-40 overflow-y-auto",children:[m.map((e,t)=>(0,D.jsx)("div",{ref:e=>{s.current[t]=e},tabIndex:t,onClick:()=>{p[t]||n(e.resource)},children:(0,D.jsx)(S,{gizmoResource:e.resource,from:e.from,showDescription:i,isSelected:a===t,grayedOut:p[t]})},e.resource.gizmo.id)),(0,D.jsx)("div",{ref:e=>{s.current[m.length]=e},tabIndex:m.length,onClick:()=>{n("create")},children:(0,D.jsx)(z,{isSelected:a===m.length})},"create")]})}),z=e=>{let{isSelected:t}=e;return(0,D.jsx)(E,{className:t?"bg-token-main-surface-secondary":"",children:(0,D.jsxs)(w(),{href:"/gpts/editor",target:"_blank",className:"flex flex-row space-x-2",children:[(0,D.jsx)("span",{className:"self-center",children:(0,D.jsx)(T.Vz5,{className:"icon-sm"})}),(0,D.jsx)("span",{children:(0,D.jsx)(N.Z,U({},Z.dropdownCreateLabel))})]})})},I=e=>{let{onClick:t,onClose:r}=e,{0:n,1:a}=(0,P.useState)(null),i=(0,P.useRef)(null),s=(0,P.useRef)(null),{0:o,1:l}=(0,P.useState)(0),c=(0,C.Z)(),d=e=>{g.A.logEvent(v.M.mentionsClickGizmo,{gizmo_id:"create"===e?"create":e.gizmo.id}),"create"!==e&&t(e)};return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("input",{autoFocus:!0,placeholder:c.formatMessage(Z.searchPlaceholder),ref:i,onKeyDown:e=>{var t,a,i,c,u;let m=null!==(t=null===(a=s.current)||void 0===a?void 0:a.getResultsLength())&&void 0!==t?t:0;if("Escape"!==e.key&&("Backspace"!==e.key||n)||(e.preventDefault(),r()),"Enter"===e.key||"Tab"===e.key){e.preventDefault();let t=null===(i=s.current)||void 0===i?void 0:i.handleEnterOnIndex(o);if(!t)return;"create"===t?(window.open("/gpts/editor","_blank"),r()):d(t)}if("ArrowDown"===e.key&&o<m-1){e.preventDefault();let t=o+1;null===(c=s.current)||void 0===c||c.scrollToItem(t),l(t)}if("ArrowUp"===e.key&&o>0){e.preventDefault();let t=o-1;null===(u=s.current)||void 0===u||u.scrollToItem(t),l(t)}},onChange:e=>{a(e.target.value),l(0)},className:"mb-1 w-full border-0 bg-token-main-surface-primary p-2 text-sm focus:outline-none"}),(0,D.jsx)(R,{ref:s,query:n,selectedIdx:o,onSelectGizmo:d})]})};function S(e){var t;let{gizmoResource:r,from:n,showDescription:a,isSelected:i,grayedOut:s}=e,o=!!(null===(t=r.gizmo.tags)||void 0===t?void 0:t.includes(u.U9.FirstParty));return(0,D.jsxs)(E,{className:(0,b.default)(i?"bg-token-main-surface-secondary":"",s&&"opacity-50"),children:[(0,D.jsx)(l.Z,{isFirstParty:o,src:r.gizmo.display.profile_picture_url,className:(0,b.default)("icon-xl h-7 w-7 flex-shrink-0",s&&"grayscale group-hover:grayscale-0")}),(0,D.jsxs)("div",{className:"flex h-fit grow flex-row justify-between space-x-2 overflow-hidden text-ellipsis whitespace-nowrap",children:[(0,D.jsxs)("div",{className:"flex flex-row space-x-2",children:[(0,D.jsx)("span",{className:"shrink-0 truncate",children:r.gizmo.display.name}),a&&(0,D.jsx)("span",{className:"flex-grow truncate text-sm text-token-text-tertiary sm:max-w-xs lg:max-w-md",children:r.gizmo.display.description})]}),(0,D.jsx)("span",{className:"shrink-0 self-center",children:"recent"===n?(0,D.jsx)(T.T39,{className:"icon-sm"}):(0,D.jsx)(T.qQX,{className:"icon-sm"})})]})]})}function G(e){var t;let{gizmoResource:r,onRemove:n}=e,a=!!(null===(t=r.gizmo.tags)||void 0===t?void 0:t.includes(u.U9.FirstParty));return(0,D.jsxs)("div",{className:"flex w-full flex-row items-center rounded-t-2xl bg-token-main-surface-secondary px-2 py-1",children:[(0,D.jsxs)("div",{className:(0,b.default)("group flex h-10 items-center gap-2 rounded-lg px-2 font-semibold"),children:[(0,D.jsx)(l.Z,{isFirstParty:a,src:r.gizmo.display.profile_picture_url,className:"h-6 w-6 flex-shrink-0"}),(0,D.jsxs)("div",{className:"space-x-2 overflow-hidden text-ellipsis text-sm text-token-text-tertiary",children:[(0,D.jsx)(N.Z,U({},Z.talkingTo))," ",(0,D.jsx)("span",{className:"font-semibold text-token-text-secondary",children:r.gizmo.display.name})]})]}),n&&(0,D.jsx)("button",{className:"absolute right-4 text-sm font-bold",onClick:n,children:(0,D.jsx)(d.v7,{className:"icon-md text-token-text-secondary hover:text-token-text-primary"})})]})}let Z=(0,O.vU)({talkingTo:{id:"TaggingDropdown.talkingTo",defaultMessage:"Talking to"},dropdownCreateLabel:{id:"TaggingDropdown.dropdownCreateLabel",defaultMessage:"Create a GPT"},searchPlaceholder:{id:"TaggingDropdown.searchPlaceholder",defaultMessage:"Search recent and pinned GPTs"}});t.ZP=e=>{let{onClick:t,onClose:r}=e,n=(0,p.Ib)(),a=(0,f.p7)(),i=(0,f.b0)(),o=a?!!i:!!n&&(0,h.PX)(n);return((0,m.n)(()=>{g.A.logEvent(v.M.mentionsOpened,{gizmo_selector_disabled:o})}),a&&i)?(0,D.jsx)(L.g,{rateLimitInfo:i}):!a&&n&&(0,h.PX)(n)?(0,D.jsx)(L.W,{rateLimitWithBannerDescription:n,clientThreadId:s.Zq}):(0,D.jsx)("div",{onBlur:e=>{e.currentTarget.contains(e.relatedTarget)||r()},className:"popover rounded-2xl border border-token-border-light bg-token-main-surface-primary p-2 shadow-lg",children:(0,D.jsx)(I,{onClick:t,onClose:r})})}},52825:function(e,t,r){r.d(t,{j:function(){return o}});var n=r(19841),a=r(5443),i=r(33481),s=r(651);let o=e=>{let{onDismiss:t,title:r,content:o,onPrimaryCtaClick:l,primaryCtaText:c,onSecondaryCtaClick:d,secondaryCtaText:u,isElevated:m=!0}=e;return(0,s.jsxs)("div",{className:(0,n.default)("flex w-full items-start gap-4 rounded-2xl border border-token-border-light bg-token-main-surface-primary py-4 pl-5 pr-3 text-sm text-token-text-primary [text-wrap:pretty] dark:border-transparent dark:bg-token-main-surface-secondary md:items-center lg:mx-auto",m&&"shadow-xxs"),children:[(0,s.jsxs)("div",{className:"mt-1.5 flex grow flex-col items-start gap-3.5 md:mt-0 md:flex-row md:items-center md:justify-between",children:[(0,s.jsxs)("div",{className:"flex max-w-md flex-col",children:[r&&(0,s.jsx)("div",{className:(0,n.default)("font-bold text-token-text-primary"),children:r}),(0,s.jsx)("div",{className:(0,n.default)(r?"text-token-text-secondary":""),children:o})]}),(c||u)&&(0,s.jsxs)("div",{className:"flex shrink-0 gap-2 pb-1 md:pb-0",children:[u&&(0,s.jsx)(a.z,{onClick:d,color:"secondary",className:"shrink-0",children:u}),c&&(0,s.jsx)(a.z,{onClick:l,color:"primary",className:"shrink-0",children:c})]})]}),(0,s.jsx)("div",{className:"flex shrink-0 items-center gap-2",children:!!t&&(0,s.jsx)("button",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-transparent hover:bg-token-main-surface-secondary dark:hover:bg-token-main-surface-tertiary",onClick:t,children:(0,s.jsx)(i.tPq,{className:"icon-md"})})})]})}},69581:function(e,t,r){r.d(t,{W:function(){return P},g:function(){return w}});var n=r(94521),a=r(85734),i=r(33112),s=r(26123),o=r(52825),l=r(651);let c=e=>{var t,r,n,a,i,c;let{actions:d,title:u,description:m,onDismiss:p}=e,f=(0,s.Z)(),h=null!=d&&null!==(t=d.primaryAction)&&void 0!==t&&t.text?f.formatMessage(d.primaryAction.text):void 0,x=null!=d&&null!==(r=d.secondaryAction)&&void 0!==r&&r.text?f.formatMessage(d.secondaryAction.text):void 0;return(0,l.jsx)(o.j,{title:u,content:m,onDismiss:p,primaryCtaText:h,onPrimaryCtaClick:null!==(n=null==d||null===(a=d.primaryAction)||void 0===a?void 0:a.onClick)&&void 0!==n?n:void 0,secondaryCtaText:x,onSecondaryCtaClick:null!==(i=null==d||null===(c=d.secondaryAction)||void 0===c?void 0:c.onClick)&&void 0!==i?i:void 0,isElevated:!0})};var d=r(63424),u=r(4702),m=r(12586),p=r(90818),f=r(14314),h=r(93747),x=r(72256),g=r(25940),v=r(23956),b=r(55059);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let j=e=>{let{clientThreadId:t,location:r,primaryAction:n,rateLimitWithBannerDescription:a,title:i,description:s,onDismiss:o}=e,d={primaryAction:n,secondaryAction:function(e){let{location:t,rateLimit:r,hasNoAvailableModels:n,updateModelQueryParam:a}=e;if(!n||!(0,f.Qh)(r))return null;let{limit_details:{next_model_slug:i}}=r;return{text:C.newChatButton,onClick:()=>{a({modelId:i,location:t})}}}({location:r,hasNoAvailableModels:(0,v.y)(t),updateModelQueryParam:(0,b.fm)(!0),rateLimit:a})};return(0,l.jsx)(c,{title:i,description:s,actions:d,onDismiss:o})},w=e=>{var t;let{rateLimitInfo:r,onDismiss:n}=e,{name:s,title:o,call_to_action:d,description:m}=r,f=(0,u.t)(),x=(0,b.fm)(!0),g=(0,p.zd)(),v=null!==(t=null==f?void 0:f.planType)&&void 0!==t?t:"unknown",y=e=>{let t="banner_description";switch(e){case a.Ev.GET_PLUS:{let e=g&&"block_reason"in g?g.block_reason:null;return{text:C.getPlusButton,onClick:()=>{h.A.logRateLimitGetPlusButtonClicked({type:s,location:t,plan_type:v,is_hard_block:!!g,hard_block_reason:null!=e?e:""}),(0,i.MG)("Prompt textarea rate limit banner")}}}case a.Ev.NEW_CHAT:return{text:C.newChatButton,onClick:()=>{x({modelId:"",location:t})}}}},[k,j]=null!=d?d:[],w={primaryAction:y(k),secondaryAction:y(j)};return(0,l.jsx)(c,{onDismiss:n,title:o,description:m,actions:w})},P=e=>{var t;let{clientThreadId:r,rateLimitWithBannerDescription:n,onDismiss:s}=e,o=(0,u.t)(),p=null!==(t=null==o?void 0:o.planType)&&void 0!==t?t:"unknown",g=(0,m.DJ)(r),{call_to_action:v,display_description:b}=n,{type:y,description:w,title:P}=b,O=P,_=w;if(g){let{modelName:e}=g;O=(0,l.jsx)(x.Z,k(k({},C.disabledChatTitle),{},{values:{modelName:e}})),_=function(e){let{reason:t,modelName:r}=e,n=N(t);return(0,l.jsx)(x.Z,k(k({},n),{},{values:{modelName:r,anotherModelName:r}}))}(g)}(0,d.n)(()=>{var e,t;h.A.logRateLimitBannerShown({location:y,type:null!==(e=(0,f.EJ)(n))&&void 0!==e?e:"unknown",plan_type:p,is_hard_block:!!g,hard_block_reason:null!==(t=null==g?void 0:g.reason)&&void 0!==t?t:""})});let T=v?v===a.Pt.GET_PLUS?{text:C.getPlusButton,onClick:()=>{var e,t;h.A.logRateLimitGetPlusButtonClicked({type:null!==(e=(0,f.EJ)(n))&&void 0!==e?e:"unknown",location:y,plan_type:p,is_hard_block:!!g,hard_block_reason:null!==(t=null==g?void 0:g.reason)&&void 0!==t?t:""}),(0,i.MG)("Prompt textarea rate limit banner")}}:void 0:null;return null!=r?(0,l.jsx)(j,{clientThreadId:r,location:y,title:O,description:_,onDismiss:g?void 0:s,primaryAction:T,rateLimitWithBannerDescription:n}):(0,l.jsx)(c,{title:O,description:_,actions:{primaryAction:T},onDismiss:s})},N=e=>{switch(e){case a.Lt.UNSUPPORTED_ATTACHMENT:return C.disabledChatRateLimitUnsupportedFileAttachments;case a.Lt.UNSUPPORTED_AUDIO:return C.disabledChatRateLimitUnsupportedAudio;case a.Lt.UNSUPPORTED_GIZMO:return C.disabledChatRateLimitUnsupportedGPT;case a.Lt.UNSUPPORTED_IMAGE:return C.disabledChatRateLimitUnsupportedImage;case a.Lt.UNSUPPORTED_TOOL_USE:return C.disabledChatRateLimitUnsupportedTool}},C=(0,g.vU)({getPlusButton:{id:"TeyLcp",defaultMessage:"Get Plus"},newChatButton:{id:"7OvnJ5",defaultMessage:"New chat"},disabledChatTitle:{id:"5hqdz5",defaultMessage:"You've reached your {modelName} limit."},disabledChatRateLimitUnsupportedFileAttachments:{id:"hiWvSM",defaultMessage:"You need {anotherModelName} to continue this chat because there's an attachment."},disabledChatRateLimitUnsupportedAudio:{id:"DyLkDP",defaultMessage:"You need {anotherModelName} to continue this chat because it uses audio."},disabledChatRateLimitUnsupportedGPT:{id:"xMeHTR",defaultMessage:"You need {anotherModelName} to continue this chat because this GPT requires it."},disabledChatRateLimitUnsupportedImage:{id:"TSiLMo",defaultMessage:"You need {anotherModelName} to continue this chat because it has images."},disabledChatRateLimitUnsupportedTool:{id:"uxIK+V",defaultMessage:"You need {anotherModelName} to continue this chat because it uses tools."}})},63424:function(e,t,r){r.d(t,{n:function(){return a}});var n=r(92379);let a=e=>{(0,n.useEffect)(e,[])}}}]);
//# sourceMappingURL=5904.3e0e0a81985b5cb8.js.map