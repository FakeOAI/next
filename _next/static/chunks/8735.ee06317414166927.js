"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8735,6614,2289,9042,3489],{87381:function(e,t,n){n.r(t),n.d(t,{__N_SSP:function(){return l},default:function(){return i},sandboxReadyPhrase:function(){return a}});var r=n(92379),s=n(651),l=!0;let a="sandbox-ready";function i(){let{0:e,1:t}=(0,r.useState)(""),n=(0,r.useCallback)(e=>{t(e.data)},[t]);return(0,r.useEffect)(()=>{globalThis?.window?.parent==globalThis?.window&&(location.href="/")},[]),(0,r.useEffect)(()=>{let e=new MessageChannel;return window.parent.postMessage(a,"https://chatgpt.com",[e.port2]),e.port1.onmessage=n,()=>void(e.port1.onmessage=null)},[n]),(0,s.jsx)("iframe",{srcDoc:e,sandbox:"allow-scripts",style:{position:"fixed",top:0,left:0,width:"100vh",height:"100vw",border:0}})}},84513:function(e,t,n){n.d(t,{a:function(){return a}});var r=n(87381),s=n(92379),l=n(651);let a=(0,s.memo)(function(e){let t=(0,s.useRef)(null),{0:n,1:a}=(0,s.useState)(null),i=(0,s.useCallback)(e=>{e.source===t?.current?.contentWindow&&e.data===r.sandboxReadyPhrase&&a(e.ports[0])},[]);return(0,s.useEffect)(()=>(window.addEventListener("message",i),()=>window.removeEventListener("message",i)),[i]),(0,s.useEffect)(()=>{n&&void 0!==e.srcDoc&&n.postMessage(e.srcDoc)},[n,e.srcDoc]),(0,l.jsx)("iframe",{className:e.className,src:"/sandbox",ref:t})})},9033:function(e,t,n){n.d(t,{Kd:function(){return g},v_:function(){return b}});var r=n(59725),s=n(98095),l=n(82164),a=n(15913),i=n(38482),o=n.n(i),c=n(34977),d=n(44425),u=n(26925),f=n(97193),x=n(51837),h=n(651);let m=o()(()=>Promise.all([n.e(8682),n.e(6481)]).then(n.bind(n,9760)).then(e=>e.AvatarButtons),{ssr:!1,loadableGenerated:{webpack:()=>[9760]}}),j=s.Z.Item;function p(){let e=u.ne.useStore();return(0,a.e2)()?(0,h.jsx)(j,{onClick:()=>{e.setState({shouldShowAddToHomePopover:!0})},icon:(0,h.jsx)(l.IAe,{className:"icon-md-heavy text-token-text-primary"}),children:"Add to home screen"}):null}function g(e){let{className:t,iconSize:n,children:r}=e,a=(0,x.L)(),i=(0,c.useRouter)();return(0,h.jsxs)(s.Z.Root,{modal:!1,children:[(0,h.jsx)(v,{className:t,iconSize:n,children:r}),(0,h.jsx)(s.Z.Portal,{children:(0,h.jsxs)(s.Z.Content,{collisionPadding:10,children:[(0,h.jsx)(j,{onClick:()=>f.vm.toggleSettingsModalOpen(),icon:(0,h.jsx)(l.SWE,{className:"icon-md-heavy text-token-text-primary"}),children:"Settings"}),(0,h.jsx)(j,{onClick:()=>window.open(d._A,"_blank"),icon:(0,h.jsx)(l.Jmo,{className:"icon-md-heavy text-token-text-primary"}),children:"About SearchGPT"}),(0,h.jsx)(j,{onClick:()=>window.open("https://chatgpt.com","_blank"),icon:(0,h.jsx)(l.Pfi,{className:"icon-md-heavy text-token-text-primary"}),children:"Open ChatGPT"}),(0,h.jsx)(p,{}),(0,h.jsx)(s.Z.Separator,{}),(0,h.jsx)(j,{onClick:()=>i.push("/auth/logout",void 0,{shallow:!0}),icon:(0,h.jsx)(l.iz5,{className:"icon-md-heavy text-token-text-primary"}),children:"Log out"}),a&&(0,h.jsx)(m,{})]})})]})}function b(e){let{className:t,iconSize:n}=e,r=(0,c.useRouter)();return(0,h.jsxs)(s.Z.Root,{modal:!1,children:[(0,h.jsx)(v,{className:t,iconSize:n}),(0,h.jsx)(s.Z.Portal,{children:(0,h.jsx)(s.Z.Content,{collisionPadding:10,children:(0,h.jsx)(j,{onClick:()=>r.push("/auth/logout",void 0,{shallow:!0}),icon:(0,h.jsx)(l.iz5,{className:"icon-md-heavy text-token-text-primary"}),children:"Log out"})})})]})}function v(e){let{className:t,iconSize:n,children:l}=e;return(0,h.jsx)(s.Z.Trigger,{className:"group border-0 !bg-transparent p-0",children:(0,h.jsx)("div",{className:"rounded-full",children:l??(0,h.jsx)(r.zf,{iconSize:n,className:t})})})}},19042:function(e,t,n){n.r(t),n.d(t,{DebugJsonViewer:function(){return T},DebugModal:function(){return w},DebugModalContents:function(){return _}});var r=n(11550),s=n(39358),l=n(30115),a=n(82164),i=n(24434),o=n(67330),c=n(91111),d=n(97193),u=n(27313),f=n(5132),x=n(30757),h=n(79746),m=n(19841),j=n(38482),p=n.n(j),g=n(92379),b=n(15478),v=n(19229),y=n(651);let k=p()(()=>Promise.all([n.e(3904),n.e(6476)]).then(n.bind(n,16476)).then(e=>e.default),{ssr:!1,loadableGenerated:{webpack:()=>[16476]}});function w(e){let{threadId:t,threadUserId:n}=e;return(0,d.W6)(d.bM.isDebugModalOpen)&&(0,y.jsx)(i.Z,{isOpen:!0,onClose:()=>d.vm.toggleDebugModalOpen(),type:"success",size:"fullscreen",noPadding:!0,rootClassName:"z-50",children:(0,y.jsx)(_,{threadId:t,threadUserId:n,onClose:()=>d.vm.toggleDebugModalOpen()})})}let N=(e,t)=>{let n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=window.URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=e,s.click(),window.URL.revokeObjectURL(r)},O="<|im_start|>",C="<|im_sep|>",S="<|im_end|>";function E(e){let{prompt:t}=e,n=[],r=0;for(;;){let e=t.indexOf(O,r);if(-1===e)break;let s=t.indexOf(C,e);if(-1===s)break;let l=t.indexOf(S,s),a=t.indexOf("<|fim_suffix|>",s);if(-1!==a&&(-1===l||a<l)&&(l=a),-1===l)break;let i=t.substring(e+O.length,s),o=t.substring(s+C.length,l);n.push((0,y.jsxs)("div",{children:[(0,y.jsxs)("span",{className:"font-semibold",children:["[",i,"]"]})," ",o]},e)),r=l+S.length}return n}let P=b.Z.div`mb-[-5px] px-2 pb-1 font-semibold uppercase border-b-2 ${e=>{let{$isSelected:t}=e;return t?"border-black dark:border-white":"border-transparent"}}`;function _(e){let{threadId:t,threadUserId:n,message:s,onClose:i}=e,{sessionUser:d}=(0,c.A)(),{0:h,1:j}=(0,g.useState)(s?"message":"json"),{data:p,isLoading:b,refetch:v}=(0,u.Y)({threadId:t,threadUserId:n,refetchOnMount:"always"}),k=p?.thread;if((0,g.useEffect)(()=>{j(s?"message":k?.turns.length?`turn${k?.turns.length-1}`:"thread")},[k?.turns.length,s]),!b&&!k&&!s)return(0,y.jsxs)(o.bW,{onClickRetry:()=>v(),children:["Failed to load."," "]});if(b)return(0,y.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:"Loading..."});let w=k?.turns,O=k?.turns[k.turns.length-1]?.artifacts__?.model_snapshots?.default_id,C=n&&t?(0,f.t5)(n,t):null;return(0,y.jsx)("div",{className:"flex flex-col gap-2 break-words font-mono text-xs",children:(0,y.jsxs)(x.fC,{orientation:"vertical",value:h,onValueChange:e=>j(e),children:[(0,y.jsxs)(x.aV,{className:"flex items-center justify-center gap-2 px-4 py-1",children:[s&&(0,y.jsx)(x.xz,{value:"message",children:(0,y.jsx)(P,{$isSelected:"message"===h,children:"Message"})},"message"),k&&(0,y.jsx)(x.xz,{value:"thread",children:(0,y.jsx)(P,{$isSelected:"thread"===h,children:"Thread"})},"thread"),w?.map((e,t)=>y.jsxs(g.Fragment,{children:[y.jsx(x.xz,{value:`turn${t}`,children:y.jsxs(P,{$isSelected:h===`turn${t}`,children:["Turn[",t,"]"]})},t),e.artifacts__?.debug_ddtrace_urls?.map(e=>y.jsx(P,{$isSelected:!1,children:y.jsxs("a",{target:"_blank",href:e,className:"text-nowrap",children:["Trace[",t,"] â†—"]})},e))]},t)),(0,y.jsx)("div",{className:"flex-grow"}),O&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(I,{name:"Model",id:O})," ",(0,y.jsx)("span",{className:"text-gray-500 dark:text-white",children:"|"})]}),d&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(I,{name:"User ID",id:d.id})," ",(0,y.jsx)("span",{className:"text-gray-500 dark:text-white",children:"|"})]}),C&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(I,{name:"Permalink",id:C}),(0,y.jsx)("span",{className:"text-gray-500 dark:text-white",children:"|"})]}),k&&(0,y.jsxs)(r.z,{size:"small",color:"secondary",onClick:()=>N("thread.json",k),children:[(0,y.jsx)(a._8t,{className:"icon-sm"})," thread.json"]}),(0,y.jsx)(l.P,{onClick:i})]}),w?.map((e,t)=>y.jsxs(x.VY,{value:`turn${t}`,className:"max-h-[calc(100vh-46px)] w-full overflow-y-scroll scroll-smooth",children:[y.jsxs("div",{className:m.default("flex flex-col gap-1 p-6",e.index%2==0&&"bg-token-main-surface-tertiary"),children:[y.jsx(E,{prompt:e.artifacts__?.debug_info?.main_model_response?.prompt_string??""}),y.jsxs("div",{children:[y.jsx("span",{className:"font-semibold",children:"[assistant]"})," ",e.model_response?.text]})]})," "]},t)),k&&(0,y.jsx)(x.VY,{value:"thread",className:"max-h-[calc(100vh-46px)] w-full overflow-y-scroll scroll-smooth p-6",children:(0,y.jsx)(T,{data:k,collapsed:4})}),s&&(0,y.jsx)(x.VY,{value:"message",className:"max-h-[calc(100vh-46px)] w-full overflow-y-scroll scroll-smooth p-6",children:(0,y.jsx)(T,{data:s,collapsed:4})})]},k?.turns.length??"message")})}function T(e){let{data:t,collapsed:n}=e,{0:r,1:s}=(0,g.useState)(n??!0);return(0,y.jsxs)("div",{className:"flex flex-col items-start gap-1",children:[(0,y.jsx)("button",{onClick:()=>s(!r),className:"flex items-center gap-1",children:r?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(v.rIY,{size:14})," Expand all"]}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(v.NsE,{size:14})," Collapse all"]})}),(0,y.jsx)("div",{className:"w-full",children:(0,y.jsx)(k,{json:t,jsonViewProps:{collapsed:r,shortenTextAfterLength:0}},String(r))})]})}function I(e){let{name:t,id:n}=e,r=(0,g.useCallback)(()=>{(0,h.v)(n)},[n]);return(0,y.jsxs)("div",{className:"flex items-center gap-2 truncate",children:[(0,y.jsxs)("span",{className:"text-nowrap font-semibold",children:[t,":"]}),(0,y.jsx)("span",{title:n,className:"truncate text-gray-500 dark:text-white",children:n}),(0,y.jsx)(s.Z,{onCopy:r})]})}},67330:function(e,t,n){n.d(t,{aE:function(){return d},bW:function(){return c},jj:function(){return o}});var r=n(82363),s=n(92379),l=n(64925),a=n(95204),i=n(651);function o(e){let{children:t}=e;return(0,i.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,i.jsxs)("div",{className:"flex flex-col items-center gap-1 text-sm font-semibold text-token-text-tertiary",children:[(0,i.jsx)(a.Z,{className:"icon-2xl"}),t]})})}function c(e){let{onClickRetry:t,children:n}=e;return(0,i.jsxs)(o,{children:[(0,i.jsxs)("div",{children:["Error."," ",(0,i.jsx)("button",{onClick:t,className:"inline font-semibold text-token-text-primary hover:opacity-70",children:"Try again?"})]}),n]})}function d(e){let{resetError:t,componentStack:n,error:a}=e;return(0,s.useEffect)(()=>{r.U.addError(a)},[a]),(0,i.jsxs)(c,{onClickRetry:t,children:[(0,i.jsx)("div",{className:"fixed left-2 top-2",children:(0,i.jsx)(l.WU,{})}),(0,i.jsx)("div",{className:"fixed right-2 top-2",children:(0,i.jsx)(l.z0,{})}),!1]})}},64925:function(e,t,n){n.d(t,{Au:function(){return D},rm:function(){return Z},WU:function(){return I},z0:function(){return L}});var r=n(25162),s=n(19841),l=n(24098),a=n.n(l),i=n(92379),o=n(15478),c=n(9033),d=n(30853),u=n(91981),f=n(651);let x={[u.kQ.CONNECTING]:"Connecting",[u.kQ.OPEN]:"Open",[u.kQ.CLOSING]:"Closing",[u.kQ.CLOSED]:"Closed",[u.kQ.UNINSTANTIATED]:"Uninstantiated"};function h(e){let{readyState:t,className:n}=e,{0:r,1:l}=(0,i.useState)(!0);return((0,i.useEffect)(()=>{setTimeout(()=>{l(!0)},1e3)},[]),t!==u.kQ.OPEN&&r)?(0,f.jsx)("div",{className:(0,s.default)("flex items-center gap-2 p-3 text-sm",n),children:(0,f.jsx)(d.u,{label:x[t],sideOffset:0,side:"right",children:(0,f.jsx)("div",{className:(0,s.default)("h-2 w-2 rounded-full",(t===u.kQ.CLOSING||t===u.kQ.CONNECTING)&&"bg-yellow-500",(t===u.kQ.CLOSED||t===u.kQ.UNINSTANTIATED)&&"bg-red-500",r?"block":"hidden")})})}):null}var m=n(98601),j=n(71522),p=n(82164),g=n(87387);function b(e){let{label:t,labelSide:n="right",className:r,onClick:l,children:a}=e;return(0,f.jsx)(d.E,{label:t,sideOffset:0,side:n,disabled:!t,children:(0,f.jsx)("button",{onClick:l,className:(0,s.default)("flex items-center justify-center p-1.5 text-token-text-tertiary hover:text-token-text-primary",r),children:a})})}var v=n(26925),y=n(97193),k=n(10798),w=n(65925),N=n.n(w),O=n(99661);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach(function(t){(0,m.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function E(e,t){return Object.keys(e).reduce((n,r)=>(N()(e[r],t[r])||(n[r]=t[r]),n),{})}function P(){let{setTheme:e,resolvedTheme:t}=(0,O.F)(),n=v.ne.useState(v.ne.selectAgentSettingsOverrides),[r]=(0,k.OR)(),l=E(g.sH,n),a=E(k.Ws,r),i=S(S({},l),a),o=Object.keys(i).length>0;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(b,{label:"Debug (Internal)",onClick:()=>y.vm.toggleDebugModalOpen(),children:(0,f.jsx)(p.reV,{className:"icon-sm-heavy"})}),(0,f.jsx)(b,{label:"Theme (Internal)",onClick:()=>{e("dark"===t?"light":"dark")},children:(0,f.jsxs)(j.ZP,{children:["dark"===t&&(0,f.jsx)(p.NWY,{className:"icon-md-heavy"}),"light"===t&&(0,f.jsx)(p.kLh,{className:"icon-md-heavy"})]})}),(0,f.jsx)(b,{label:o?["Config (Internal) - Changes:",Object.keys(i).join(", ")].join("\n"):"Config (Internal)",onClick:()=>y.vm.toggleInternalSettingsModalOpen(),children:(0,f.jsx)(p.KAl,{className:(0,s.default)(o?"icon-lg-heavy":"icon-md-heavy",{"text-red-500":o})})})]})}var _=n(91111),T=n(51837);function I(e){let{hideReadyState:t=!1,onResultsPage:n=!1,children:l}=e,{readyState:i,resetSearch:o}=(0,_.A)(),c=(0,T.L)();return(0,f.jsxs)("div",{className:(0,s.default)("hidden w-20 shrink-0 flex-col items-center justify-between border-r py-6 sm:flex",n?"relative border-token-border-light":"absolute bottom-0 left-0 top-0 border-transparent"),children:[(0,f.jsxs)(a(),{onClick:()=>o(),href:"/search",className:"text-token-text-primary hover:text-token-text-secondary",title:"Go to SearchGPT",children:[(0,f.jsx)(r.nI,{className:"h-8 w-8"}),c&&!t&&(0,f.jsx)(h,{readyState:i})]}),c&&(0,f.jsx)("div",{className:"flex flex-col items-center gap-2",children:(0,f.jsx)(P,{})}),(0,f.jsx)("div",{className:"absolute top-1/2 -translate-y-1/2",children:l})]})}function L(){return(0,f.jsx)("div",{className:"absolute right-5 top-5 hidden sm:block",children:(0,f.jsx)(c.Kd,{className:"h-8 w-8"})})}function D(){return(0,f.jsx)(z,{$side:"left",children:(0,f.jsx)(r.nI,{className:"h-8 w-8"})})}function Z(e){let{className:t}=e;return(0,f.jsx)(z,{$side:"right",className:`${t}`,children:(0,f.jsx)(c.v_,{className:"h-8 w-8"})})}let z=o.Z.div`absolute ${e=>"left"===e.$side?"left-5":"right-5"} bottom-5 top-5 z-10 w-10 flex-col justify-between items-center hidden sm:flex`},44425:function(e,t,n){n.d(t,{_A:function(){return r}});let r="https://openai.com/index/searchgpt-prototype/"},51837:function(e,t,n){n.d(t,{L:function(){return s}});var r=n(45120);function s(){return r.fW("2000076788")?.value}},27313:function(e,t,n){n.d(t,{Y:function(){return i},v:function(){return o}});var r=n(84760),s=n(92379),l=n(81014),a=n(12381);function i(e){let{threadId:t,threadUserId:n,refetchOnMount:s}=e;return(0,r.a)({queryKey:["thread",t,n],queryFn:async()=>{if(!t)return{thread:null,turns:null};let e=await (0,l.K8)({threadId:t,threadUserId:n}),r=e.turns;return{thread:e,turns:r}},enabled:!!t,refetchOnMount:s})}function o(e){let{threadId:t,threadUserId:n}=e,r=i({threadId:t,threadUserId:n}),l=r.data;return(0,s.useEffect)(()=>{t&&a.P3.setThread(t,l?.turns??[])},[t,l]),{query:r.data?.turns[0]?.user_query,refetch:r.refetch,isLoading:r.isLoading,isError:r.isError}}},51942:function(e,t,n){n.d(t,{F:function(){return h}});var r=n(16757),s=n(27742),l=n(74301),a=n(67437),i=n(92745),o=n(79857),c=n(38924),d=n(97834),u=n(52978),f=n(91530),x=n.n(f);function h(e){let t=(0,a.j8)(),n=(0,s.W)(e),f=(0,a.Bv)(e)??t.id,h=(0,l.Z)(e,void 0,x());return async function(t){let s=i.tQ.getThreadCurrentLeafId(e),l=`${s}-nextPrompt`;i.tQ.updateTree(e,e=>{e.addNode(l," ",s,r.uU.User)});let a=performance.now(),x=await (0,d.rS)(),[m,j,p]=await Promise.all([o.ZP.getEnforcementToken(x),u.Z.getEnforcementToken(x),c.Z.getEnforcementToken(x)]);h({model:f,completionType:r.Os.Next,parentNodeId:l,metadata:{eventSource:"mouse"},completionMetadata:{conversationMode:n},chatReq:x,arkoseToken:m??null,turnstileToken:j??null,proofToken:p??null,preflightTime:performance.now()-a,appendMessages:t})}}},96614:function(e,t,n){n.d(t,{Sz:function(){return u},kr:function(){return d}});var r=n(92379),s=n(22015);n(44675);let l=Symbol(),a=Symbol(),i="undefined"==typeof window||/ServerSideRendering/.test(window.navigator&&window.navigator.userAgent)?r.useEffect:r.useLayoutEffect,o=s.unstable_runWithPriority?e=>{try{(0,s.unstable_runWithPriority)(s.unstable_NormalPriority,e)}catch(t){if("Not implemented."===t.message)e();else throw t}}:e=>e(),c=e=>({value:t,children:n})=>{let s=(0,r.useRef)(t),a=(0,r.useRef)(0),[c,d]=(0,r.useState)(null);c&&(c(t),d(null));let u=(0,r.useRef)();if(!u.current){let e=new Set;u.current={[l]:{v:s,n:a,l:e,u:(t,n)=>{a.current+=1;let r={n:a.current};(null==n?void 0:n.suspense)&&(r.n*=-1,r.p=new Promise(e=>{d(()=>t=>{r.v=t,delete r.p,e(t)})})),e.forEach(e=>e(r)),t()}}}}return i(()=>{s.current=t,a.current+=1,o(()=>{u.current[l].l.forEach(e=>{e({n:a.current,v:t})})})},[t]),(0,r.createElement)(e,{value:u.current},n)};function d(e){let t=(0,r.createContext)({[l]:{v:{current:e},n:{current:-1},l:new Set,u:e=>e()}});return t[a]=t.Provider,t.Provider=c(t.Provider),delete t.Consumer,t}function u(e,t){let{v:{current:n},n:{current:s},l:a}=(0,r.useContext)(e)[l],o=t(n),[c,d]=(0,r.useReducer)((e,r)=>{if(!r)return[n,o];if("p"in r)throw r.p;if(r.n===s)return Object.is(e[1],o)?e:[n,o];try{if("v"in r){if(Object.is(e[0],r.v))return e;let n=t(r.v);if(Object.is(e[1],n))return e;return[r.v,n]}}catch(e){}return[...e]},[n,o]);return Object.is(c[1],o)||d(),i(()=>(a.add(d),()=>{a.delete(d)}),[a]),c[1]}}}]);
//# sourceMappingURL=8735.ee06317414166927.js.map