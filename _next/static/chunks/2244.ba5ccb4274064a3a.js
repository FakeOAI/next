"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2244,2587],{92683:function(e,t,n){n.d(t,{aB:function(){return p},fK:function(){return O},g2:function(){return f}});var r=n(99333),o=n(70663),s=n(59358),c=n(2721),i=n(93951),a=n(86025),u=n(84760),l=n(52455),A=n(18939),g=n.n(A),d=n(92379);let _=new Map;function f(){let{gdriveLinkStatus:e,o365BusinessLinkStatus:t,o365PersonalLinkStatus:n}=(0,o.r)();return h(e,t,n)}function p(){let{gdriveStatus:e,o365Status:t}=(0,o.r)();return h(e,t,t)}let S=[r.PO.GDRIVE,r.PO.O365_PERSONAL,r.PO.O365_BUSINESS];function h(e,t,n){let o=(0,i.t)(),c=o?.getWorkspaceId(),{connectors:a,isLoading:u}=O(S),{data:l,isLoading:A}=(0,s.C)(c),_=!c||l?.beta_settings?.context_connector_gdrive,f=!c||l?.beta_settings?.context_connector_o365_personal,p=!c||l?.beta_settings?.context_connector_o365_business,h=a.get(r.PO.GDRIVE),b=a.get(r.PO.O365_PERSONAL),v=a.get(r.PO.O365_BUSINESS),E=(e,t)=>"true"===e||"ifConnected"===e&&t;return{connectorConfig:(0,d.useMemo)(()=>{let o=E(e,!!h?.access_token),s=!!(b?.access_token??v?.access_token),c=E(t,s),i=E(n,s),a=[o&&h&&_?[r.PO.GDRIVE,h]:null,i&&b&&f?[r.PO.O365_PERSONAL,b]:null,c&&v&&p?[r.PO.O365_BUSINESS,v]:null];return new Map(g()(a))},[h,e,b,v,t,n,_,f,p]),isLoading:u||A}}function O(e){let{0:t,1:n}=(0,d.useState)(_),{isUnauthenticated:r}=(0,a.u)(),{isSuccess:o,data:s,isLoading:c}=(0,u.a)({queryKey:["fetchConnectorData",e],queryFn:b,refetchInterval:18e5,enabled:!r});return(0,d.useEffect)(()=>{o&&n(new Map(s.map(e=>[e.type,e])))},[o,s]),{connectors:t,isLoading:c}}async function b(e){let{queryKey:t}=e,[n,o]=t,s=null;try{s=await c.Z.checkConnectorAPI(o)}catch(e){l.U.addError(Error("Error while retrieving context connector entry",{cause:e}))}return s?s.connectors.map(e=>{if(!e.access_token)return e;if(e.type===r.PO.O365_PERSONAL)e.onedrive_endpoint_hint={type:"personal",baseUrl:"https://onedrive.live.com",parsedUrl:"https://onedrive.live.com/picker"};else if(e.type===r.PO.O365_BUSINESS){let t=e.onedrive_business_metadata?.base_url;if(t){let n=new URL(t);e.onedrive_endpoint_hint={type:"business",baseUrl:t,parsedUrl:`https://${n.hostname}/_layouts/15/FilePicker.aspx`}}}return e}):[]}},70663:function(e,t,n){n.d(t,{r:function(){return c}});var r=n(31498),o=n(88667),s=n(92379);function c(){let e=(0,r.aF)(),t=(0,o.xb)("1967546325").config,n=t.get("gdrivePicker",!1),c=t.get("o365Picker",!1),a=t.get("gdriveLink",!1),u=t.get("o365PersonalLink",!1),l=t.get("o365BusinessLink",!1),A=t.get("gdrivePercentage",0),g=t.get("o365Percentage",0),d=t.get("loadTestPercentage",0),_=t.get("showWorkspaceSettings",!1),f=e?Math.abs(function(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n)|0;return t}(e.id)%100):null;return(0,s.useMemo)(()=>({gdriveStatus:i(n,f,A),o365Status:i(c,f,g),gdriveLinkStatus:i(a,f,A),o365PersonalLinkStatus:i(u,f,g),o365BusinessLinkStatus:i(l,f,g),loadTest:"true"===i(!0,f,d),showWorkspaceSettings:_}),[n,f,A,c,g,a,u,l,d,_])}function i(e,t,n){return e&&null!=t?t<n?"true":"ifConnected":"false"}},42587:function(e,t){t.Z={src:"https://cdn.oaistatic.com/_next/static/media/app-slack-icon.7d570b5c.png",height:257,width:257,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAATlBMVEVMaXE2xO/rtSy4a2bvsSzrtC0stn0vuX3iHVs0x/EotXzrsS0vvIDoH1zjHVc2xO8wy/j4sSnfHVneFVzpFVH4vCQdtXwq0P/uCVDqHV6OwuyxAAAAGnRSTlMAh7AFyYaIw8XKoObd4IjjopWDl6lvb21szwb5FgMAAAAJcEhZcwAAFxEAABcRAcom8z8AAABASURBVHicHctHEoAwDACxDSm20+n8/6UM6C7AZhY+zkn1YGM4qUmYZveVUubo/TlDWNGtaSxlAd80xn/pvgR4AUb+AfXmos3TAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8}}}]);
//# sourceMappingURL=2244.ba5ccb4274064a3a.js.map