"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1378],{63995:function(e,t,n){n.d(t,{$:function(){return b},Z:function(){return y}});var r,l,i,a=n(25927),o=n(58554),s=n(89270),c=n(497),u=n(70079),d=n(9063),f=n(84692),p=n(21389),h=n(50527),m=n(53238),x=n(51378),g=n(35250);function y(e){let{children:t,className:n,language:r,content:l}=e,i=(0,u.useCallback)(()=>{(0,c.v)(l)},[l]),a=(0,d.Z)(),{isWithinDataAnalysisToolMessage:o}=(0,u.useContext)(x.cm);return(0,g.jsx)(b,{title:r,headerDecoration:(0,g.jsxs)("div",{className:"flex items-center",children:[o&&(0,g.jsx)(v,{}),(0,g.jsx)(h.Z,{buttonText:a.formatMessage({id:"zIa6ZQ",defaultMessage:"Copy code"}),onCopy:i})]}),codeClassName:n,children:t})}function v(){let e=(0,s.Gt)(),{data:t=!1}=(0,s.R1)(o.sh.ShowExpandedCodeView),n=(0,d.Z)();return(0,g.jsxs)("div",{className:"mr-2 flex items-center gap-2 border-r border-token-border-medium pr-2",children:[(0,g.jsx)("label",{htmlFor:"ada-always-show",children:(0,g.jsx)(f.Z,{defaultMessage:"Always show details",id:"message.tools.codeInterpreter.alwaysShowAnalysis"})}),(0,g.jsx)(m.Z,{id:"ada-always-show",size:"small",onChange:t=>{e.mutate({setting:o.sh.ShowExpandedCodeView,value:t})},enabled:t,label:t?n.formatMessage({defaultMessage:"Toggle to always expand detail view for code analysis on",id:"message.tools.codeInterpreter.alwaysShowAnalysis.enabled"}):n.formatMessage({defaultMessage:"Toggle to always expand detail view for code analysis off",id:"message.tools.codeInterpreter.alwaysShowAnalysis.disabled"})})]})}function b(e){let{children:t,title:n,headerDecoration:r,shouldWrapCode:l=!1,className:i,codeContainerClassName:a,codeClassName:o}=e;return(0,g.jsxs)(j,{className:i,children:[(null!=n||null!=r)&&(0,g.jsxs)(w,{children:[n&&(0,g.jsx)("span",{children:n}),r]}),(0,g.jsx)(k,{className:a,children:(0,g.jsx)(O,{$shouldWrap:l,className:o,children:t})})]})}let j=p.Z.div(r||(r=(0,a.Z)(["dark bg-gray-950 rounded-md border-[0.5px] border-token-border-medium"]))),w=p.Z.div(l||(l=(0,a.Z)(["flex items-center relative text-token-text-secondary bg-token-main-surface-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md"]))),k=function(e){let{children:t,className:n}=e;return(0,g.jsx)("div",{className:"overflow-y-auto p-4 text-left ".concat(n),dir:"ltr",children:t})},O=p.Z.code(i||(i=(0,a.Z)(["",""])),e=>e.$shouldWrap?"!whitespace-pre-wrap":"!whitespace-pre")},50527:function(e,t,n){n.d(t,{Z:function(){return g}});var r,l=n(25927),i=n(72438),a=n(11397),o=n(70079),s=n(68498),c=n(84692),u=n(21389),d=n(7709),f=n(46),p=n(35250);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let x=(0,s.vU)({copy:{id:"CopyButton.copy",defaultMessage:"Copy"},copied:{id:"CopyButton.copied",defaultMessage:"Copied!"}});function g(e){let{buttonText:t,shouldChangeText:n=!0,iconClassName:r="icon-sm",onCopy:l,className:i}=e,{0:s,1:u}=(0,o.useState)(!1),h=(0,d.Z)(),g=(0,o.useCallback)(e=>{e.stopPropagation(),l(),u(!0),setTimeout(()=>{h()&&u(!1)},2e3)},[h,l]),v=t;return n&&s?v=(0,p.jsx)(c.Z,m({},x.copied)):!0===t&&(v=(0,p.jsx)(c.Z,m({},x.copy))),(0,p.jsxs)(p.Fragment,{children:[!s&&(0,p.jsx)(f.u,{label:(0,p.jsx)(c.Z,{id:"CopyButton.copyTooltip",defaultMessage:"Copy"}),sideOffset:0,children:(0,p.jsxs)(y,{onClick:g,className:i,children:[(0,p.jsx)(a.ES,{className:r}),v]})}),s&&(0,p.jsxs)(y,{className:i,children:[(0,p.jsx)(a.oS,{className:r}),v]})]})}let y=u.Z.button(r||(r=(0,l.Z)(["flex gap-1 items-center"])))},90505:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(86705),l=n(70079),i=n(35250);function a(e){let{url:t,size:n=16,minSize:l,className:a}=e,c=function(e,t){let n;try{n=new URL(e)}catch(e){return r.U.addError(e),null}return"https://www.google.com/s2/favicons?domain=".concat(n.origin,"&sz=").concat(t)}(t,n);return null==c?null:null!=l?(0,i.jsx)(o,{faviconUrl:c,size:n,minSize:l,className:a}):(0,i.jsx)(s,{faviconUrl:c,size:n,className:a})}function o(e){let{faviconUrl:t,size:n,minSize:r,className:a}=e,{0:o,1:c}=(0,l.useState)();return((0,l.useEffect)(()=>{c(void 0);let e=new Image;e.onload=()=>{c(Math.min(e.width,e.height))},e.src=t},[t]),null==o||o<r)?null:(0,i.jsx)(s,{faviconUrl:t,size:n,className:a})}function s(e){let{faviconUrl:t,size:n,className:r}=e;return(0,i.jsx)("img",{src:t,alt:"Favicon",width:n,height:n,className:r})}},58054:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(72438),l=n(57798),i=n(21418),a=n(88366),o=n(70079),s=n(63995),c=n(35250);let u=["inline","node","className","children"];function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function p(e){let{inline:t,node:n,className:r,children:d}=e,p=(0,l.Z)(e,u),h=(0,o.useContext)(i.h7);if(t){if(null!=h){let e=(0,a.B)(n),t=(0,i.jM)(e),{displayedCitations:r}=h;if(t>=0&&t<r.length)return(0,c.jsx)(i.s8,{index:t,displayInfo:r[t],displayType:h.displayType})}return(0,c.jsx)("code",f(f({className:r},p),{},{children:d}))}{var m;let e=null==r||null===(m=r.split(" ").filter(e=>e.startsWith("language-")))||void 0===m?void 0:m[0],t=e?e.split("-")[1]:"";return(0,c.jsx)(s.Z,{language:t,className:r,content:(0,a.B)(n),children:d})}}},31043:function(e,t,n){n.d(t,{O6:function(){return k},ZP:function(){return O},c7:function(){return C}});var r=n(72438),l=n(57798),i=n(3395),a=n(71727),o=n(69677),s=n(20824),c=n(83117),u=n(82473),d=n(61236),f=n(70079),p=n(9063),h=n(84692),m=n(68498),x=n(59311),g=n(46),y=n(65733),v=n(35250);let b=["messageId","clientThreadId","href"];function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let k="sandbox:";function O(e){let{messageId:t,clientThreadId:n,href:r}=e,h=(0,l.Z)(e,b),m=null!==(0,f.useContext)(s.gB),j=(0,u.NL)(),{0:O,1:C}=(0,f.useState)(!1),P=r.substring(k.length),E=o.tQ.getServerThreadId(n),N=(0,p.Z)(),T=(0,f.useCallback)(e=>{let t=document.createElement("a");t.href=e,t.click(),C(!1)},[]),Z=function(e,t,n,r,l,o){let s=(0,i.VF)();return(0,d.a)({queryKey:S(t,r),queryFn:()=>a.Z.downloadFromInterpreter(t,n,r).then(e=>((null==e?void 0:e.status)==="success"&&o(e.download_url),e)).catch(e=>{let t=s("default_download_link_error",{fileName:r});throw e instanceof c.vq&&null!=e.code&&(t=s(e.code)),null==l||l(t),e}),enabled:!!(e&&t&&n&&r)})}(O&&!m,t,E,P,(0,f.useCallback)(e=>{C(!1),y.m.danger(e)},[]),T).data,_=(0,f.useCallback)(async e=>{void 0!==n&&(e.preventDefault(),(void 0===Z||(null==Z?void 0:Z.status)==="error")&&j.invalidateQueries({queryKey:S(t,P)}),(null==Z?void 0:Z.status)=="success"&&null!=Z&&Z.download_url?T(Z.download_url):C(!0))},[n,Z,j,t,P,T]);return(0,v.jsx)(g.u,{closeOnOutsideClick:!1,delayDuration:0,label:(0,v.jsxs)("span",{className:"flex items-center gap-1",children:[O?N.formatMessage(q.startingDownload):N.formatMessage(q.downloadFile),O&&(0,v.jsx)(x.Z,{})]}),side:"top",sideOffset:4,children:(0,v.jsx)("a",w(w({},h),{},{className:"cursor-pointer",onClick:e=>!O&&_(e)}))})}function C(e){return(0,v.jsx)(g.u,{closeOnOutsideClick:!1,delayDuration:0,label:(0,v.jsx)("span",{className:"flex items-center gap-1",children:(0,v.jsx)(h.Z,w({},q.downloadUnavailable))}),side:"top",sideOffset:4,children:(0,v.jsx)("span",w(w({},e),{},{className:"font-semibold text-token-text-secondary underline"}))})}function S(e,t){return["downloadSandboxLink",e,t]}let q=(0,m.vU)({downloadFile:{id:"SandboxDownload.downloadFile",defaultMessage:"Download file"},startingDownload:{id:"SandboxDownload.startingDownload",defaultMessage:"Starting download"},downloadUnavailable:{id:"SandboxDownload.downloadUnavailable",defaultMessage:"File download not supported in a shared chat"}})},81685:function(e,t,n){n.d(t,{ff:function(){return T},Yu:function(){return N},Hf:function(){return E},H:function(){return P}});var r=n(61110),l=n(55975),i=n(46050),a=n(29874),o=n(8449),s=n(15472);let c={tokenize:function(e,t,n){let r=this,c=this.events[this.events.length-1],d=c&&c[1].type===s.V.linePrefix?c[2].sliceSerialize(c[1],!0).length:0,f=[];return function(t){return l.q.backslash,e.enter("mathFlow"),e.enter("mathFlowFence"),e.enter("mathFlowFenceSequence"),function t(r){return r===l.q.backslash||r===l.q.leftSquareBracket&&f[0]===l.q.backslash?(e.consume(r),f.push(r),t):(e.exit("mathFlowFenceSequence"),f.length<2?n(r):(0,i.f)(e,p,s.V.whitespace)(r))}(t)};function p(t){return t===l.q.eof||(0,a.Ch)(t)?h(t):(e.enter("mathFlowFenceMeta"),e.enter(s.V.chunkString,{contentType:o._.contentTypeString}),function t(r){return r===l.q.eof||(0,a.Ch)(r)?(e.exit(s.V.chunkString),e.exit("mathFlowFenceMeta"),h(r)):r===l.q.rightSquareBracket?n(r):(e.consume(r),t)}(t))}function h(n){return e.exit("mathFlowFence"),r.interrupt?t(n):function t(n){return n===l.q.eof?m(n):(0,a.Ch)(n)?e.attempt(u,e.attempt({tokenize:x,partial:!0},m,d?(0,i.f)(e,t,s.V.linePrefix,d+1):t),m)(n):(e.enter("mathFlowValue"),function n(r){return r===l.q.eof||(0,a.Ch)(r)?(e.exit("mathFlowValue"),t(r)):(e.consume(r),n)}(n))}(n)}function m(n){return e.exit("mathFlow"),t(n)}function x(e,t,n){let r=[];return(0,i.f)(e,function(t){return e.enter("mathFlowFence"),e.enter("mathFlowFenceSequence"),function t(a){return a===l.q.backslash&&0===r.length||a===l.q.rightSquareBracket&&r[0]===l.q.backslash?(e.consume(a),r.push(a),t):r<f?n(a):(e.exit("mathFlowFenceSequence"),(0,i.f)(e,c,s.V.whitespace)(a))}(t)},s.V.linePrefix,o._.tabSize);function c(r){return r===l.q.eof||(0,a.Ch)(r)?(e.exit("mathFlowFence"),t(r)):n(r)}}},concrete:!0},u={tokenize:function(e,t,n){let r=this;return function(t){return e.enter(s.V.lineEnding),e.consume(t),e.exit(s.V.lineEnding),l};function l(e){return r.parser.lazy[r.now().line]?n(e):t(e)}},partial:!0},d={tokenize:function(e,t,n){let r=this,c=r.events[r.events.length-1],u=c&&c[1].type===s.V.linePrefix?c[2].sliceSerialize(c[1],!0).length:0,d=0;return function(t){return l.q.dollarSign,e.enter("mathFlow"),e.enter("mathFlowFence"),e.enter("mathFlowFenceSequence"),function t(r){return r===l.q.dollarSign?(e.consume(r),d++,t):(e.exit("mathFlowFenceSequence"),d<2?n(r):(0,i.f)(e,p,s.V.whitespace)(r))}(t)};function p(t){return t===l.q.eof||(0,a.Ch)(t)?h(t):(e.enter("mathFlowFenceMeta"),e.enter(s.V.chunkString,{contentType:o._.contentTypeString}),function t(r){return r===l.q.eof||(0,a.Ch)(r)?(e.exit(s.V.chunkString),e.exit("mathFlowFenceMeta"),h(r)):r===l.q.dollarSign?n(r):(e.consume(r),t)}(t))}function h(n){return e.exit("mathFlowFence"),r.interrupt?t(n):function t(n){return n===l.q.eof?m(n):(0,a.Ch)(n)?e.attempt(f,e.attempt({tokenize:x,partial:!0},m,u?(0,i.f)(e,t,s.V.linePrefix,u+1):t),m)(n):(e.enter("mathFlowValue"),function n(r){return r===l.q.eof||(0,a.Ch)(r)?(e.exit("mathFlowValue"),t(r)):(e.consume(r),n)}(n))}(n)}function m(n){return e.exit("mathFlow"),t(n)}function x(e,t,n){let r=0;return(0,i.f)(e,function(t){return e.enter("mathFlowFence"),e.enter("mathFlowFenceSequence"),function t(a){return a===l.q.dollarSign?(e.consume(a),r++,t):r<d?n(a):(e.exit("mathFlowFenceSequence"),(0,i.f)(e,c,s.V.whitespace)(a))}(t)},s.V.linePrefix,o._.tabSize);function c(r){return r===l.q.eof||(0,a.Ch)(r)?(e.exit("mathFlowFence"),t(r)):n(r)}}},concrete:!0},f={tokenize:function(e,t,n){let r=this;return function(t){return(0,a.Ch)(t),e.enter(s.V.lineEnding),e.consume(t),e.exit(s.V.lineEnding),l};function l(e){return r.parser.lazy[r.now().line]?n(e):t(e)}},partial:!0};function p(e){let t,n,r=e.length-4,l=3;if((e[3][1].type===s.V.lineEnding||"space"===e[l][1].type)&&(e[r][1].type===s.V.lineEnding||"space"===e[r][1].type)){for(t=l;++t<r;)if("mathTextData"===e[t][1].type){e[r][1].type="mathTextPadding",e[l][1].type="mathTextPadding",l+=2,r-=2;break}}for(t=l-1,r++;++t<=r;)void 0===n?t!==r&&e[t][1].type!==s.V.lineEnding&&(n=t):(t===r||e[t][1].type===s.V.lineEnding)&&(e[n][1].type="mathTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e}function h(e){return e!==l.q.backslash||this.events[this.events.length-1][1].type===s.V.characterEscape}function m(e){let t,n,r=e.length-4,l=3;if((e[3][1].type===s.V.lineEnding||"space"===e[l][1].type)&&(e[r][1].type===s.V.lineEnding||"space"===e[r][1].type)){for(t=l;++t<r;)if("mathTextData"===e[t][1].type){e[r][1].type="mathTextPadding",e[l][1].type="mathTextPadding",l+=2,r-=2;break}}for(t=l-1,r++;++t<=r;)void 0===n?t!==r&&e[t][1].type!==s.V.lineEnding&&(n=t):(t===r||e[t][1].type===s.V.lineEnding)&&(e[n][1].type="mathTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e}function x(e){return e!==l.q.dollarSign||this.events[this.events.length-1][1].type===s.V.characterEscape}function g(e){let t,n,r=e.length-4,l=3;if((e[3][1].type===s.V.lineEnding||"space"===e[l][1].type)&&(e[r][1].type===s.V.lineEnding||"space"===e[r][1].type)){for(t=l;++t<r;)if("mathTextData"===e[t][1].type){e[r][1].type="mathTextPadding",e[l][1].type="mathTextPadding",l+=2,r-=2;break}}for(t=l-1,r++;++t<=r;)void 0===n?t!==r&&e[t][1].type!==s.V.lineEnding&&(n=t):(t===r||e[t][1].type===s.V.lineEnding)&&(e[n][1].type="mathTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e}function y(e){return e!==l.q.backslash||this.events[this.events.length-1][1].type===s.V.characterEscape}var v=n(67726),b=n(63395),j=n(93362),w=n(45369),k=n(42426),O=n(67728),C=n(65028),S=n(58054),q=n(31043);let P=e=>e.startsWith(q.O6)?e:(0,b.A)(e),E=[C.Z,[function(){let e=this.data();function t(t,n){(e[t]?e[t]:e[t]=[]).push(n)}t("micromarkExtensions",{flow:{[l.q.dollarSign]:d,[l.q.backslash]:c},text:{[l.q.dollarSign]:{tokenize:function(e,t,n){let r,i,o=0;return function(t){return e.enter("mathText"),e.enter("mathTextSequence"),function t(r){return r===l.q.dollarSign?(e.consume(r),o++,t):o<2?n(r):(e.exit("mathTextSequence"),c(r))}(t)};function c(d){return d===l.q.eof?n(d):d===l.q.dollarSign?(i=e.enter("mathTextSequence"),r=0,function n(a){return a===l.q.dollarSign?(e.consume(a),r++,n):r===o?(e.exit("mathTextSequence"),e.exit("mathText"),t(a)):(i.type="mathTextData",u(a))}(d)):d===l.q.space?(e.enter("space"),e.consume(d),e.exit("space"),c):(0,a.Ch)(d)?(e.enter(s.V.lineEnding),e.consume(d),e.exit(s.V.lineEnding),c):(e.enter("mathTextData"),u(d))}function u(t){return t===l.q.eof||t===l.q.space||t===l.q.dollarSign||(0,a.Ch)(t)?(e.exit("mathTextData"),c(t)):(e.consume(t),u)}},resolve:m,previous:x},[l.q.backslash]:[{tokenize:function(e,t,n){let r;let i=[],o=[],c=this;return function(t){return l.q.backslash,h.call(c,c.previous)&&c.previous,e.enter("mathText"),e.enter("mathTextSequence"),function t(r){return(i.join(","),r===l.q.backslash&&0===i.length||r===l.q.leftParenthesis&&1===i.length)?(e.consume(r),i.push(r),t):i.length<2?n(r):(e.exit("mathTextSequence"),u(r))}(t)};function u(c){return c===l.q.eof?n(c):c===l.q.backslash?(r=e.enter("mathTextSequence"),o=[],function n(a){return(i.join(","),a===l.q.backslash&&0===o.length||a===l.q.rightParenthesis&&1===o.length)?(e.consume(a),o.push(a),n):o.length===i.length?(e.exit("mathTextSequence"),e.exit("mathText"),t(a)):(r.type="mathTextData",d(a))}(c)):c===l.q.space?(e.enter("space"),e.consume(c),e.exit("space"),u):(0,a.Ch)(c)?(e.enter(s.V.lineEnding),e.consume(c),e.exit(s.V.lineEnding),u):(e.enter("mathTextData"),d(c))}function d(t){return t===l.q.eof||t===l.q.space||t===l.q.backslash||(0,a.Ch)(t)?(e.exit("mathTextData"),u(t)):(e.consume(t),d)}},resolve:p,previous:h},{tokenize:function(e,t,n){let r;let i=[],o=[],c=this;return function(t){return l.q.backslash,y.call(c,c.previous)&&c.previous,e.enter("mathText"),e.enter("mathTextSequence"),function t(r){return(i.join(","),r===l.q.backslash&&0===i.length||r===l.q.leftSquareBracket&&1===i.length)?(e.consume(r),i.push(r),t):i.length<2?n(r):(e.exit("mathTextSequence"),u(r))}(t)};function u(c){return c===l.q.eof?n(c):c===l.q.backslash?(r=e.enter("mathTextSequence"),o=[],function n(a){return(i.join(","),a===l.q.backslash&&0===o.length||a===l.q.rightSquareBracket&&1===o.length)?(e.consume(a),o.push(a),n):o.length===i.length?(e.exit("mathTextSequence"),e.exit("mathText"),t(a)):(r.type="mathTextData",d(a))}(c)):c===l.q.space?(e.enter("space"),e.consume(c),e.exit("space"),u):(0,a.Ch)(c)?(e.enter(s.V.lineEnding),e.consume(c),e.exit(s.V.lineEnding),u):(e.enter("mathTextData"),d(c))}function d(t){return t===l.q.eof||t===l.q.space||t===l.q.backslash||(0,a.Ch)(t)?(e.exit("mathTextData"),u(t)):(e.consume(t),d)}},resolve:g,previous:y}]}}),t("fromMarkdownExtensions",(0,r.N)()),t("toMarkdownExtensions",(0,r.O)())},{singleDollarTextMath:!1}],O.ZP],N=[[j.Z,{languages:{mathematica:v.Z},detect:!0,subset:["arduino","bash","c","cpp","csharp","css","diff","go","graphql","java","javascript","json","kotlin","latex","less","lua","makefile","makefile","markdown","matlab","mathematica","nginx","objectivec","perl","pgsql","php-template","php","plaintext","python-repl","python","r","ruby","rust","scss","shell","sql","swift","typescript","vbnet","wasm","xml","yaml"],ignoreMissing:!0,aliases:{mathematica:"wolfram"}}],w.Z,[k.Z,{newlines:!0}]],T={code:S.Z}},63869:function(e,t,n){n.d(t,{Z:function(){return D}});var r=n(72438),l=n(57798),i=n(69677),a=n(20824),o=n(99897),s=n(53265),c=n(52866),u=n(19841),d=n(77743),f=n(70079),p=n(47567),h=n(71727),m=n(84989),x=n(61236),g=n(61888),y=n(47635),v=n(40392),b=n(31043),j=n(81685),w=n(35250);let k=["node","onClick","clientThreadId","messageId","href"],O=["src","clientThreadId"],C=["node"],S=["node"];function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let E={},N={};function T(e,t){return function(e,t){var n;let r=(0,i.qN)(n=>null!=e&&null!=t&&i.iN.isThreadUrlSafe(e,t,n)),{data:{safe:l}={}}=(n=r?void 0:t,(0,x.a)({queryKey:["safe-url",{serverThreadId:e,url:n}],queryFn:()=>{var t;return function(e){if(null!=m.B&&null!=e&&e.startsWith(m.B))return!0;try{let t=y.get(new URL(null!=e?e:"").hostname);if("openai.com"===t)return!0;return!1}catch{return!1}}(n)||null!==(t=i.tQ.getThreadSafeUrls(e))&&void 0!==t&&t.includes(n)?{safe:!0}:h.Z.getConversationSafeUrls(e,n,(0,v.YK)())},enabled:null!=e&&null!=n}));return r||l?t:void 0}(e,function(e,t){let{0:n,1:r}=(0,f.useState)(void 0),{0:l}=(0,f.useState)(()=>(0,g.debounce)(e=>{r(e)},500));return(0,f.useEffect)(()=>{l(e)},[l,e]),n===e?e:void 0}(t,0))}function Z(e){var t;let{node:n,onClick:r,clientThreadId:a,messageId:o,href:u}=e,d=(0,l.Z)(e,k),f=r,p=null===(t=n.properties)||void 0===t?void 0:t.href,h=T((0,i.XK)(a),u);return null!=o&&"string"==typeof p&&p.includes("/bing/redirect")&&(E[o]||(s.A.logEvent(c.M.browsingShowBingLink,{id:o,content:p}),E[o]=!0),f=e=>{N[o]||(s.A.logEvent(c.M.browsingClickBingLink,{id:o,content:p}),N[o]=!0),null==r||r(e)}),(0,w.jsx)("a",P(P({onClick:f},d),{},{href:h,rel:"noreferrer"}))}function _(e){let{src:t,clientThreadId:n}=e,r=(0,l.Z)(e,O),a=T((0,i.XK)(n),t);return null==a?(0,w.jsx)("div",{}):(0,w.jsx)("img",P(P({},r),{},{src:a}))}function D(e){let{size:t="medium",children:n,className:r,clientThreadId:i,messageId:s,interpolateCitations:c=!1}=e,{resolvedTheme:h}=(0,d.F)(),m=null!==(0,f.useContext)(a.gB),x=(0,f.useMemo)(()=>P(P({},j.ff),{},{a:e=>{var t;let{node:n}=e,r=(0,l.Z)(e,C),a=null===(t=n.properties)||void 0===t?void 0:t.href;return"string"==typeof a&&a.startsWith(b.O6)?m?(0,w.jsx)(b.c7,P({},r)):null!=i&&null!=s?(0,w.jsx)(b.ZP,P(P({},r),{},{clientThreadId:i,messageId:s,href:a})):null:(0,w.jsx)(Z,P(P({},e),{},{clientThreadId:i,messageId:s,interpolateCitations:c}))},img:e=>{var t;let{node:n}=e,r=(0,l.Z)(e,S),a=null===(t=n.properties)||void 0===t?void 0:t.src;return"string"==typeof a&&(a.startsWith(b.O6)||a.startsWith("attachment:"))?null:(0,w.jsx)(_,P(P({},r),{},{clientThreadId:i}))}}),[i,c,m,s]);return(0,w.jsx)(o.S,{name:"formatted_text_error",fallback:()=>(0,w.jsx)(w.Fragment,{children:n}),children:(0,w.jsx)(p.D,{rehypePlugins:j.Yu,remarkPlugins:j.Hf,linkTarget:"_new",className:(0,u.default)(r,"markdown prose w-full break-words dark:prose-invert","dark"===h?"dark":"light","small"===t&&"prose-xs"),transformLinkUri:j.H,components:x,children:n})})}},51378:function(e,t,n){n.d(t,{O1:function(){return w},XX:function(){return m},Xt:function(){return g},cm:function(){return h},i$:function(){return b},xB:function(){return x}});var r=n(61145),l=n(3395),i=n(63869),a=n(86705),o=n(24115),s=n(19841),c=n(77743),u=n(70079),d=n(9063),f=n(14652),p=n(35250);let h=(0,u.createContext)({isWithinDataAnalysisToolMessage:!1});function m(e){let{message:t}=e,{resolvedTheme:n}=(0,c.F)(),r=(0,o.sB)("chatgpt-simple-browse-tool-indicator").value;return(0,p.jsx)(h.Provider,{value:{isWithinDataAnalysisToolMessage:r},children:(0,p.jsx)(i.Z,{className:(0,s.default)("markdown prose w-full break-words dark:prose-invert","dark"===n?"dark":"light"),children:x(t)})})}function x(e){function t(e,t){return"```".concat(t,"\n").concat(e,"\n```")}if("code"===e.content.content_type)return t(e.content.text,"python");if("python"===e.recipient){if("text"!==e.content.content_type)throw Error("Unexpected content type for code message");let n=e.content.parts;if(1!==n.length||"string"!=typeof n[0])throw Error("Unexpected parts for code message");return t(n[0],"python")}throw Error("Unexpected code message format")}function g(e){var t;let{message:n}=e,l=(0,d.Z)();if(n.content.content_type!==r.PX.ExecutionOutput)return null;let i=null===(t=n.metadata)||void 0===t?void 0:t.aggregate_result;if(!i)return a.U.addError("Corrupt code execution result message"),null;let o=i.messages.filter(j),s=o.length>0,c=null!=i.final_expression_output,u=null!=i.in_kernel_exception;return(0,p.jsxs)(p.Fragment,{children:[s&&(0,p.jsx)(y,{label:"STDOUT/STDERR",output:o.map((e,t)=>(0,p.jsx)("span",{className:"stderr"===e.stream_name?"text-red-500":"",children:e.text},"".concat(t)))}),c&&(0,p.jsx)(y,{label:l.formatMessage({id:"codeInterpreterMessage.resultLabel",defaultMessage:"Result"}),output:i.final_expression_output}),u&&(0,p.jsx)(v,{traceback:i.in_kernel_exception.traceback.join("")})]})}function y(e){let{label:t,output:n}=e;return(0,p.jsxs)("div",{className:"bg-gray-700 p-4 text-xs",children:[(0,p.jsx)("div",{className:"mb-1 text-gray-400",children:t}),(0,p.jsx)("div",{className:"prose flex flex-col-reverse text-white",children:(0,p.jsx)("pre",{className:"shrink-0",children:n})})]})}function v(e){let{traceback:t}=e;return(0,p.jsx)("div",{className:"overflow-auto border-t border-gray-500 text-white",children:(0,p.jsx)("div",{className:"border-l-4 border-red-500 p-2 text-xs",children:(0,p.jsx)("div",{className:"scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-700 flex max-h-64 flex-col-reverse",children:(0,p.jsx)("pre",{className:"shrink-0",children:t})})})})}function b(e){var t;let{message:n}=e;if(n.content.content_type!==r.PX.ExecutionOutput)return null;let l=null===(t=n.metadata)||void 0===t?void 0:t.aggregate_result;return l?(0,p.jsx)(p.Fragment,{children:l.messages.filter(w).map((e,t)=>(0,p.jsx)(f.Z,{jupyterMessage:e},t))}):(a.U.addError("Corrupt code execution result message"),null)}function j(e){return"stream"===e.message_type}function w(e){return"image"===e.message_type||"image_url"in e&&(0,l.$H)(e.image_url+"")}},14652:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(72438),l=n(3395),i=n(71727),a=n(20824),o=n(61236),s=n(70079),c=n(37659),u=n(9063),d=n(84692),f=n(68498),p=n(35250);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){let{jupyterMessage:t}=e,n=null!==(0,s.useContext)(a.gB),i=(0,u.Z)();if(n)return(0,p.jsxs)("div",{className:"my-1 flex h-52 w-full max-w-xs flex-col items-center justify-center gap-2 rounded-md border-black/5 bg-gray-100 p-7 text-center text-token-text-tertiary dark:border-white/10",children:[(0,p.jsx)(c.LFN,{className:"icon-lg"}),(0,p.jsx)(d.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},y.imageNotSupported))]});if(null!=t.image_payload)return(0,p.jsx)("img",{className:"my-1",src:"data:image/png;base64,".concat(t.image_payload),alt:i.formatMessage(y.altText)});if(null!=t.image_url){let e=(0,l.Iy)(t.image_url);return(0,p.jsx)(g,{fileId:e})}return null}let x=Math.log(151)/Math.log(1.5);function g(e){let{fileId:t}=e,n=(0,u.Z)(),{data:r}=(0,o.a)({queryKey:["getFileDownloadLink",t],queryFn:()=>i.Z.getFileDownloadLink(t),refetchInterval:e=>{var t;let n=e.state.dataUpdateCount;return(null===(t=e.state.data)||void 0===t?void 0:t.status)!=="success"&&!(n>x)&&"error"!==e.state.status&&100*Math.pow(1.5,n)}}),l=(null==r?void 0:r.status)==="success"?r.download_url:null;return l?(0,p.jsx)("img",{src:l,className:"my-1 max-h-full max-w-full",alt:n.formatMessage(y.altText)}):null}let y=(0,f.vU)({imageNotSupported:{id:"CodeExecutionOutputImage.imageNotSupported",defaultMessage:"Image output is not supported in a shared chat"},altText:{id:"CodeExecutionOutputImage.altText",defaultMessage:"Output image"}})},21418:function(e,t,n){n.d(t,{QU:function(){return z},Zn:function(){return A},h7:function(){return U},s8:function(){return K},jM:function(){return R},vC:function(){return B},gP:function(){return ei},HY:function(){return X}});var r,l,i=n(72438),a=n(74922),o=n(35250);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function u(e){return(0,o.jsxs)(a.A0,c(c({width:"19",height:"15",viewBox:"0 0 19 15",fill:"none"},e),{},{children:[(0,o.jsx)("path",{d:"M4.42 0.75H2.8625H2.75C1.64543 0.75 0.75 1.64543 0.75 2.75V11.65C0.75 12.7546 1.64543 13.65 2.75 13.65H2.8625C2.8625 13.65 2.8625 13.65 2.8625 13.65C2.8625 13.65 4.00751 13.65 4.42 13.65M13.98 13.65H15.5375H15.65C16.7546 13.65 17.65 12.7546 17.65 11.65V2.75C17.65 1.64543 16.7546 0.75 15.65 0.75H15.5375H13.98",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.16045 7.41534C5.32257 7.228 4.69638 6.47988 4.69638 5.58551C4.69638 4.54998 5.53584 3.71051 6.57136 3.71051C7.60689 3.71051 8.44635 4.54998 8.44635 5.58551C8.44635 5.8965 8.37064 6.1898 8.23664 6.448C8.22998 6.48984 8.21889 6.53136 8.20311 6.57208L6.77017 10.2702C6.63182 10.6272 6.18568 10.7873 5.7737 10.6276C5.36172 10.468 5.13991 10.0491 5.27826 9.69206L6.16045 7.41534ZM11.4177 7.41534C10.5798 7.228 9.95362 6.47988 9.95362 5.58551C9.95362 4.54998 10.7931 3.71051 11.8286 3.71051C12.8641 3.71051 13.7036 4.54998 13.7036 5.58551C13.7036 5.8965 13.6279 6.1898 13.4939 6.448C13.4872 6.48984 13.4761 6.53136 13.4604 6.57208L12.0274 10.2702C11.8891 10.6272 11.4429 10.7873 11.0309 10.6276C10.619 10.468 10.3971 10.0491 10.5355 9.69206L11.4177 7.41534Z",fill:"currentColor"})]}))}function d(e){return(0,o.jsxs)(a.A0,c(c({width:"19",height:"15",viewBox:"0 0 19 15",fill:"none"},e),{},{children:[(0,o.jsx)("path",{d:"M4.42 0.75H2.8625H2.75C1.64543 0.75 0.75 1.64543 0.75 2.75V11.65C0.75 12.7546 1.64543 13.65 2.75 13.65H2.8625C2.8625 13.65 2.8625 13.65 2.8625 13.65C2.8625 13.65 4.00751 13.65 4.42 13.65M13.98 13.65H15.5375H15.65C16.7546 13.65 17.65 12.7546 17.65 11.65V2.75C17.65 1.64543 16.7546 0.75 15.65 0.75H15.5375H13.98",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,o.jsx)("path",{d:"M5.55283 4.21963C5.25993 3.92674 4.78506 3.92674 4.49217 4.21963C4.19927 4.51252 4.19927 4.9874 4.49217 5.28029L6.36184 7.14996L4.49217 9.01963C4.19927 9.31252 4.19927 9.7874 4.49217 10.0803C4.78506 10.3732 5.25993 10.3732 5.55283 10.0803L7.95283 7.68029C8.24572 7.3874 8.24572 6.91252 7.95283 6.61963L5.55283 4.21963Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"0.2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,o.jsx)("path",{d:"M9.77753 8.75003C9.3357 8.75003 8.97753 9.10821 8.97753 9.55003C8.97753 9.99186 9.3357 10.35 9.77753 10.35H13.2775C13.7194 10.35 14.0775 9.99186 14.0775 9.55003C14.0775 9.10821 13.7194 8.75003 13.2775 8.75003H9.77753Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"0.1"})]}))}var f=n(83054),p=n(9063),h=n(68498),m=n(51378);function x(e){let{codeMessage:t,codeExecutionOutputMessage:n,onDismiss:r}=e,l=(0,p.Z)();return(0,o.jsx)(f.ZP.Root,{isOpen:!0,onClose:r,children:(0,o.jsx)(f.ZP.Overlay,{children:(0,o.jsxs)(f.ZP.Content,{className:"flex max-h-[75vh] max-w-lg flex-col overflow-hidden",children:[(0,o.jsx)(f.ZP.Header,{title:l.formatMessage(g.title),type:"success",closeButton:(0,o.jsx)(f.ZP.CloseButton,{onClose:r})}),(0,o.jsxs)("div",{className:"flex flex-1 flex-col overflow-auto bg-black",children:[(0,o.jsx)("div",{children:(0,o.jsx)(m.XX,{message:t})}),(0,o.jsx)("div",{children:(0,o.jsx)(m.Xt,{message:n})})]})]})})})}let g=(0,h.vU)({title:{id:"CodeExecutionOutputModal.title",defaultMessage:"Analysis"}});var y=n(69677),v=n(18839),b=n(17376),j=n(53265),w=n(52866),k=n(24115),O=n(19841),C=n(61888),S=n(90323),q=n.n(S),P=n(70079),E=n(37659),N=n(84692),T=n(61145),Z=n(90505),_=n(46),D=n(3395),F=n(321),M=n(92575),V=n(63329);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}let L=q()(()=>Promise.all([n.e(8682),n.e(7165)]).then(n.bind(n,22569)),{ssr:!1,loadableGenerated:{webpack:()=>[22569]}}),A=((r={})[r.Standard=0]="Standard",r[r.CodeExecution=1]="CodeExecution",r[r.Snc=2]="Snc",r),z=((l={}).default="default",l.expandLink="expand-link",l.expandAll="expand-all",l),U=(0,P.createContext)(void 0),H="&#8203;";function B(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=[];if(t.length>0){let n=t.filter(t=>t.end_ix<=e.length),l=(0,V.J)(e);for(let e=n.length-1;e>=0;e--){let t=n[e],{citation_format_type:i,start_ix:a,end_ix:o,metadata:s,invalid_reason:c}=t;if("tether_markdown"===i){if(s&&"file"!==s.type){let e=l.slice(a,o).join("").replace(/\[(.*?)\]\((\d+)\)/g,"[$1](".concat(s.url,")"));l=l.slice(0,a).concat((0,V.J)(e),l.slice(o))}}else{let i={type:A.Standard};s?i.metadata=s:null!=c&&(i.invalid_reason=c);let u=!1;if(e>0){let r=n[e-1];null!=r.metadata&&null!=s&&er(r.metadata)===er(s)&&0===l.slice(r.end_ix,t.start_ix).join("").trim().length&&(l=l.slice(0,r.end_ix).concat(l.slice(t.end_ix)),u=!0)}if(!u){let e=r.length;l=l.slice(0,a).concat(W(e),l.slice(o)),r.push(i)}}}e=l.join("")}if(null!=n){let t=n.find(e=>(0,M.rH)(e)===M.Cs.CodeInterpreter),l=n.find(e=>(0,M.rH)(e)===M.Cs.CodeInterpreterTool);if(null!=t&&null!=l){let n=r.length;e=e+" "+W(n),r.push({type:A.CodeExecution,codeMessage:t,codeExecutionOutputMessage:l})}}return{text:e,displayedCitations:r}}function W(e){return"".concat(H,"``【oaicite:").concat(e,"】``").concat(H)}function R(e){let t=e.match(/【oaicite:(\d+)】/);if(t)try{return parseInt(t[1],10)}catch(e){}return -1}function X(){let{value:e}=(0,k.sB)("chatgpt-contextual-answers-rollout"),t=(0,k.xb)("chatgpt-gizmo-enable-citations");return e?t.config.get("gizmo_ids",[],G):[]}function G(e){return Array.isArray(e)&&e.every(e=>"string"==typeof e)}function K(e){let{index:t,displayInfo:n,displayType:r}=e;switch(n.type){case A.Standard:return(0,o.jsx)(Q,{index:t,displayInfo:n,displayType:r});case A.CodeExecution:return(0,o.jsx)(et,{displayInfo:n});case A.Snc:return(0,o.jsx)(L,{displayInfo:n})}}function $(e){return(0,C.pickBy)(e,C.isString)}function Q(e){var t,n,r,l;let i,a;let{index:s,displayInfo:c,displayType:d}=e,f=(0,D.O6)(),p=(0,P.useContext)(U),h=(0,y.XK)(null!==(t=null==p?void 0:p.clientThreadId)&&void 0!==t?t:T.Zq),m=(0,y.WA)(null!==(n=null==p?void 0:p.clientThreadId)&&void 0!==n?n:T.Zq),x=X(),g=null==p||null===(r=p.message.metadata)||void 0===r?void 0:r.gizmo_id,b=!!g&&x.includes(g),{onCitationHovered:C,onCitationClicked:S}=null!=p?p:{},q=ei(b,c.metadata),E=(null==q?void 0:q.type)==="file",N=!E&&null!=p&&!p.isActivelyStreaming,Z=N?{conversation_id:null==h?void 0:h.toString(),model_slug:null==p||null===(l=p.message.metadata)||void 0===l?void 0:l.model_slug,message_id:null==p?void 0:p.message.id,url:null==q?void 0:q.url,citation_number:s,display_type:d}:null;(0,P.useEffect)(()=>{null!=Z&&(j.A.logEvent(w.M.browsingDisplayCitation,Z),k.m9.logEvent("chatgpt_browsing_display_citation",null,$(Z)))},[N]);let F=(null==m?void 0:m.kind)===T.OL.GizmoInteraction||(null==m?void 0:m.kind)==T.OL.GizmoTest||(null==m?void 0:m.kind)==T.OL.GizmoMagicCreate;return E&&(F&&!b||d===z.expandAll)||null==q&&(F||d===z.expandAll)||E&&null==q&&k.m9.getExperimentValue({experimentName:"retrieval_search_model",key:k.Hy.TREATMENT,defaultValue:"ba"})?null:d===z.expandAll&&null!=q?(0,o.jsx)(J,{citationMetadata:q}):(d===z.expandLink&&q&&"webpage"===q.type?(i=Y(q.url,null==p?void 0:p.attributions),a=!0):(i=(0,o.jsx)(u,{className:"-mt-0.5 ml-0.5 inline-block text-token-link hover:text-token-link-hover"}),a=!1),(0,o.jsx)(_.u,{label:(0,o.jsx)(en,{citationMetadata:q,invalidReason:c.invalid_reason,onClick:()=>{null!=Z&&(j.A.logEvent(w.M.browsingClickCitation,Z),k.m9.logEvent("chatgpt_browsing_click_citation",null,$(Z))),q&&(null==S||S(q))}}),onOpenChange:e=>{e&&(null!=Z&&(j.A.logEvent(w.M.browsingHoverCitation,Z),k.m9.logEvent("chatgpt_browsing_hover_citation",null,$(Z))),q&&(null==C||C(q)))},side:"top",sideOffset:4,withArrow:!1,delayDuration:150,interactive:!0,wide:!0,children:E?(0,o.jsx)("button",{onClick:()=>f(q.id,q.name),className:"px-0.5 text-green-600",children:i}):(0,o.jsxs)(o.Fragment,{children:[a&&(0,o.jsx)("span",{className:"text-token-text-secondary",children:" ("}),(0,o.jsx)("a",{href:(0,v.k)(null==q?void 0:q.url),target:"_blank",rel:"noreferrer",className:(0,O.default)("text-green-600 !no-underline",!a&&"px-0.5"),onClick:()=>{null!=Z&&(j.A.logEvent(w.M.browsingClickCitation,Z),k.m9.logEvent("chatgpt_browsing_click_citation",null,$(Z)))},children:i}),a&&(0,o.jsx)("span",{className:"text-token-text-secondary",children:")"})]})}))}function Y(e,t){var n;return null!==(n=null==t?void 0:t.get(e))&&void 0!==n?n:(0,F.p)(e)}function J(e){let{citationMetadata:t}=e,n=(0,P.useContext)(U);if("file"===t.type)return null;let r=Y(t.url,null==n?void 0:n.attributions);return(0,o.jsxs)(ee,{citationMetadata:t,className:"inline-block font-normal no-underline",children:[(0,o.jsx)("span",{className:"text-token-text-primary",children:"("}),(0,o.jsx)("span",{className:"text-token-link underline-offset-2 hover:underline",children:r}),(0,o.jsx)("span",{className:"text-token-text-primary",children:")"})]})}function ee(e){let{citationMetadata:t,children:n,sideOffset:r,className:l}=e,i=(0,P.useContext)(U);if("file"===t.type)return null;let a=Y(t.url,null==i?void 0:i.attributions),{onCitationHovered:s,onCitationClicked:c}=null!=i?i:{};return(0,o.jsxs)(b.fC,{delayDuration:150,onOpenChange:e=>{e&&(null==s||s(t))},children:[(0,o.jsx)(b.xz,{asChild:!0,children:(0,o.jsx)("a",{href:t.url,onClick:()=>null==c?void 0:c(t),target:"_blank",rel:"noreferrer",className:l,children:n})}),(0,o.jsx)(b.h_,{children:(0,o.jsx)(b.VY,{side:"bottom",sideOffset:r,children:(0,o.jsx)("a",{href:t.url,target:"_blank",rel:"noreferrer",children:(0,o.jsxs)("div",{className:"max-w-xs rounded-lg border border-token-border-light bg-token-main-surface-secondary p-1 shadow-sm",children:[(0,o.jsxs)("div",{className:(0,O.default)("flex items-center gap-2 text-xs text-token-text-secondary",null==t.title&&null==t.text?"mb-1 px-3 pt-2":"mb-0.5 px-2 pt-0.5"),children:[(0,o.jsx)(Z.Z,{url:t.url,size:32,className:"icon-sm rounded"}),a]}),t.title&&(0,o.jsx)("div",{className:"mb-2 line-clamp-2 px-3 text-sm font-medium",children:t.title}),t.text&&(0,o.jsx)("div",{className:"rounded-md border border-token-border-light bg-token-main-surface-secondary p-1",children:(0,o.jsx)("div",{className:"m-2 line-clamp-5 text-sm",children:t.text})})]})})})})]})}function et(e){let{displayInfo:t}=e,{0:n,1:r}=(0,P.useState)(!1),l=(0,p.Z)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(_.u,{label:l.formatMessage(el.viewAnalysis),side:"top",sideOffset:4,withArrow:!1,delayDuration:150,children:(0,o.jsx)("button",{onClick:()=>r(!0),children:(0,o.jsx)(d,{className:"-mt-0.5 ml-0.5 inline-block text-token-link hover:text-token-link-hover"})})}),n&&(0,o.jsx)(x,{codeMessage:t.codeMessage,codeExecutionOutputMessage:t.codeExecutionOutputMessage,onDismiss:()=>r(!1)})]})}function en(e){let{citationMetadata:t,invalidReason:n,onClick:r}=e,l=(0,D.O6)(),a=(null==t?void 0:t.type)==="file",s=t?(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("div",{className:"flex shrink-0 items-center justify-center",children:a?(0,o.jsx)(E.NOg,{}):(0,o.jsx)(Z.Z,{url:t.url,className:"my-0"})}),(0,o.jsx)("div",{className:"max-w-xs truncate",children:a?t.name:t.title}),(0,o.jsx)("div",{className:"shrink-0",children:(0,o.jsx)(E.AlO,{className:"icon-xs"})})]}):(0,o.jsx)("div",{className:"text-red-500",children:null!=n?n:(0,o.jsx)(N.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},el.invalid))});return a?(0,o.jsx)("button",{onClick:()=>{l(t.id,t.name),null==r||r()},className:"text-xs",children:s}):(0,o.jsx)("a",{href:(0,v.k)(null==t?void 0:t.url),target:"_blank",rel:"noreferrer",className:"text-xs !no-underline",onClick:r,children:s})}function er(e){return"file"===e.type?e.id:e.url}let el=(0,h.vU)({invalid:{id:"citations.invalid",defaultMessage:"Invalid citation"},viewAnalysis:{id:"citations.viewAnalysis",defaultMessage:"View analysis"}});function ei(e,t){let n;if(!t||!e||"file"!==t.type)return t;let r=t.name.split("\xa4");if(3!==r.length)return t;let[l,i,a]=r,o=a,s=a.lastIndexOf(".");-1!==s&&(o=a.slice(0,s));let c="Google Drive";if("gdrive"===l)n="https://drive.google.com/file/d/".concat(i,"/view"),c="Google Drive";else if("gdoc"===l)n="https://docs.google.com/document/d/".concat(i),c="Google Docs";else{if("notion"!==l)return t;n="https://www.notion.so/openai/".concat(i),c="Notion"}return{type:"webpage",url:n,title:o,text:c}}},18839:function(e,t,n){n.d(t,{k:function(){return l}});let r=["https:","mailto:","tel:"],l=e=>{let t;if(void 0!==e){try{t=new URL(e,window.location.origin)}catch(e){return}if(!r.includes(t.protocol))return;return t.href}}},321:function(e,t,n){n.d(t,{p:function(){return r}});function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"short";try{let n=new URL(e).hostname.replace("www.","");if("hostname"===t)return n;return n.replace(/\.[^.]*$/,"")}catch(t){return e}}},63329:function(e,t,n){n.d(t,{J:function(){return r}});function r(e){try{let t=new Intl.Segmenter("en-US",{granularity:"grapheme"}).segment(e),n=[];for(let e of t)n.push(e.segment);return n}catch{return e.split("")}}}}]);
//# sourceMappingURL=1378-d85f83d5a2b50be9.js.map