"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3658],{81531:function(e,t,n){var r=n(93647),o=n(9519),i=n(48198),s=n(651);t.Z=e=>{let{label:t,value:n,onCopied:a}=e,l=()=>{(0,r.v)(n),a()};return(0,s.jsxs)("div",{className:"flex flex-col space-y-2",children:[void 0!==t&&(0,s.jsx)("label",{className:"font-semibold",children:t}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{onClick:l,className:"w-full cursor-pointer break-all rounded-lg bg-token-main-surface-tertiary px-4 py-2 font-mono text-sm text-token-text-primary",children:n}),(0,s.jsx)(o.z,{color:"ghost",onClick:l,icon:i.TIy})]})]})}},27486:function(e,t,n){n.d(t,{V:function(){return ep},Z:function(){return em}});var r,o,i=n(15316),s=n(97410),a=n(50590),l=n(42420),c=n(71325),d=n(19841),u=n(95638),f=n(26430),m=n(12654),h=n(44043),p=n(82187),g=n(69262),y=n(157),v=n(21389),b=n(88600),x=n(75179),j=n.n(x),k=n(92379),w=n(68306),M=n(75172),O=n(62984),T=n(15478),C=n(1718),N=n(9519),P=n(96314),D=n(72988),S=n(71278),Z=n(94867),E=n(73333),I=n(91821),L=n(48636),A=n(26693),B=n(53642),R=n(99140),_=n(66943),z=n(90681),q=n(47453),F=n.n(q),K=n(32307),G=n.n(K),U=n(20951),V=n(651);function Q(e){let{text:t}=e,n=(0,U.Z)(),{0:r,1:o}=(0,k.useState)(!0),{0:i,1:s}=(0,k.useState)(0),a=(0,k.useMemo)(()=>Array.from(t),[t]),l=(0,k.useMemo)(()=>new H().humanTypingDelaysQuertyDistance(a),[a]);return(0,k.useEffect)(()=>{t&&r&&(o(!0),l.forEach((e,t)=>{setTimeout(()=>{n()&&(s(t),t===l.length-1&&o(!1))},e)}))},[l,n,r,t]),(0,V.jsx)(V.Fragment,{children:a.slice(0,i+1).join("")})}class H{qwertyDistance(e,t){var n,r;let o={q:[0,0],w:[1,0],e:[2,0],r:[3,0],t:[4,0],y:[5,0],u:[6,0],i:[7,0],o:[8,0],p:[9,0],a:[0,1],s:[1,1],d:[2,1],f:[3,1],g:[4,1],h:[5,1],j:[6,1],k:[7,1],l:[8,1],z:[0,2],x:[1,2],c:[2,2],v:[3,2],b:[4,2],n:[5,2],m:[6,2]},[i,s]=null!==(n=o[e.toLowerCase()])&&void 0!==n?n:[0,0],[a,l]=null!==(r=o[t.toLowerCase()])&&void 0!==r?r:[0,0];return Math.abs(i-a)+Math.abs(s-l)}humanTypingDelaysQuertyDistance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,r=0,o=[];for(let i=0;i<e.length;++i){let s;if(i>0){let r=this.qwertyDistance(e[i-1],e[i]);s=0===r?this.getRandomInt(t,Math.floor(n/2)):1===r?this.getRandomInt(t,Math.floor(2*n/3)):this.getRandomInt(t,n)}else s=this.getRandomInt(t,n);o.push(s+r),r+=s}return o}getRandomInt(e,t){return Math.floor(Math.random()*(t-e+1))+e}}var W=n(67459),Y=n(33543),X=n(80197),J=n(48198),$=n(31161),ee=n(65205),et=n(98262);let en=F()(()=>Promise.all([n.e(1612),n.e(1148),n.e(6316),n.e(1726),n.e(2940),n.e(9294)]).then(n.bind(n,92716)).then(e=>e.GizmoConversationOptionsDropdown),{loadableGenerated:{webpack:()=>[92716]}});function er(e){let{conversation:t,conversationTitle:n,onOpenChange:r}=e,o=(0,M.Z)(),{isUnauthenticated:i}=(0,E.u)(),{eligible:s,markAsViewed:a}=(0,ee.qg)(ee.pm.ArchiveConversationOnboarding),c=(0,Z.ff)(t.id),{0:d,1:u}=(0,k.useState)(!1),f=(0,l.NL)();return((0,k.useEffect)(()=>(0,I.LW)(L.n,{deleteChat:e=>{let{serverThreadId:n}=e;n===t.id&&u(!0)},archiveChat:async e=>{let{serverThreadId:n}=e;n===t.id&&(await D.Z.patchConversation(t.id,{is_archived:!0}),(0,et.aM)(f),z.m9.logEvent("chatgpt_conversation_archived"),R.A.logEvent(_.M.conversationArchived),s&&($.m.info(o.formatMessage({defaultMessage:"You can view archived chats in Settings",id:"HistoryGizmoItem.archiveChatOnboarding"}),{duration:10,hasCloseButton:!0}),a()),c&&G().push("/",void 0,{shallow:!0}))}}),[f,s,t.id,o,c,a]),i)?null:(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(X.u,{label:o.formatMessage({id:"tJPHEQ",defaultMessage:"Options"}),sideOffset:4,side:"top",children:(0,V.jsx)(en,{clientThreadId:t.id,onOpenChange:r,children:(0,V.jsx)("button",{className:"flex items-center justify-center text-token-text-secondary transition hover:text-token-text-primary radix-state-open:text-token-text-secondary",children:(0,V.jsx)(J.nWS,{className:"icon-md"})})})}),d&&(0,V.jsx)(ep,{title:n,handleDelete:()=>{D.Z.patchConversation(t.id,{is_visible:!1}).then(()=>{(0,et.aM)(f),z.m9.logEvent("chatgpt_conversation_deleted"),R.A.logEvent(_.M.conversationDeleted)}),c&&G().push("/",void 0,{shallow:!0})},onClose:()=>{u(!1)}})]})}function eo(e){let{conversation:t,onClose:n}=e,{0:r,1:o}=(0,k.useState)(t.title),i=(0,l.NL)();function s(){r!==t.title&&(Z.tQ.setTitle(t.id,r,Z._L.User),R.A.logEvent(_.M.renameThread,{threadId:t.id,content:r}),D.Z.patchConversation(t.id,{title:r}).then(()=>{(0,et.aM)(i)}))}return(0,V.jsx)("input",{type:"text",value:r,onChange:e=>{o(e.target.value)},onKeyDown:e=>{switch(e.key){case"Escape":n();break;case"Enter":s(),n()}},onBlur:()=>{s(),n()},autoFocus:!0,className:"w-full border border-token-border-light bg-transparent p-0 text-sm"})}function ei(e){var t;let{conversation:n,isActive:r,elementRef:o,isPrimaryBackgroundColor:i}=e,s=(0,M.Z)(),{0:a,1:l}=(0,k.useState)(!1),{0:c,1:u}=(0,k.useState)(!1),f=S.p.useState(S.p.selectConversationStatus)(n.id),m=S.p.useStore();(0,k.useEffect)(()=>{if(2===f&&r){let e=setTimeout(()=>{m.setConversationStatus(n.id,null),D.Z.clearConversationStatus(n.id)},500);return()=>clearTimeout(e)}},[f,r,n.id,m]),(0,k.useEffect)(()=>(0,I.LW)(L.n,{editTitle:e=>{let{serverThreadId:t}=e;(t?t===n.id:r)&&l(!0)}}),[n.id,r]);let h=s.formatMessage({id:"mpXAeu",defaultMessage:"New chat"}),{resolvedTitle:p,isTypingEffect:g}=function(e,t,n){let{title:r,titleSource:o}=(0,Z.XL)(e),{0:i,1:s}=(0,k.useState)(!1),a=null!=r?r:t,l=(0,k.useRef)(a);return(0,k.useEffect)(()=>(n&&o===Z._L.Generated&&a!==l.current&&s(!0),()=>{l.current=a}),[n,a,o]),{isTypingEffect:i,resolvedTitle:a}}(n.id,n.title,r),y=(0,A.w$)(),v=g&&r&&y,{data:b}=(0,P.b9)(null!==(t=n.conversation_template_id)&&void 0!==t?t:void 0);return(0,V.jsxs)("div",{className:(0,d.default)("group relative rounded-lg active:opacity-90",r?"bg-token-sidebar-surface-secondary":"hover:bg-token-sidebar-surface-secondary",c&&!r&&"bg-token-sidebar-surface-secondary"),children:[(0,V.jsx)("a",{href:(0,B.ZV)(n.id,b),onClick:e=>{if(!e.metaKey&&!e.ctrlKey&&(e.preventDefault(),!r)){var t;t=n.id,Y.hx.abortAllRequests(),R.A.logEvent(_.M.loadThread,{threadId:t}),G().push((0,B.ZV)(t,b),void 0,{shallow:!0})}},onDoubleClick:()=>{l(!0)},ref:o,className:"flex items-center gap-2 p-2",children:(0,V.jsxs)("div",{className:"relative grow overflow-hidden whitespace-nowrap",dir:"auto",children:[v?(0,V.jsx)(Q,{text:p||h}):p||h,(0,V.jsx)("div",{className:(0,d.default)("absolute bottom-0 top-0 to-transparent ltr:right-0 ltr:bg-gradient-to-l rtl:left-0 rtl:bg-gradient-to-r",!!i&&(r?"from-token-sidebar-surface-secondary":!r&&c?"from-token-sidebar-surface-secondary":"from-token-main-surface-primary"),!i&&(r?"from-token-sidebar-surface-secondary":!r&&c?"from-token-sidebar-surface-secondary":"from-token-sidebar-surface-primary"),{"from-token-main-surface-primary can-hover:group-hover:from-token-sidebar-surface-secondary":i&&!r&&!c,"from-token-sidebar-surface-primary can-hover:group-hover:from-token-sidebar-surface-secondary":!i&&!r&&!c,"w-10 from-60%":r||c,"w-8 from-0% can-hover:group-hover:w-10 can-hover:group-hover:from-60%":!r&&!c})})]})}),a?(0,V.jsx)("div",{className:"absolute bottom-0 left-[7px] right-2 top-0 flex items-center bg-token-sidebar-surface-secondary",children:(0,V.jsx)(eo,{conversation:n,onClose:()=>{l(!1)}})}):r||1!==f?r||2!==f?(0,V.jsx)("div",{className:(0,d.default)("absolute bottom-0 top-0 items-center gap-1.5 pr-2 ltr:right-0 rtl:left-0",r||c?"flex":"hidden can-hover:group-hover:flex"),children:(0,V.jsx)(er,{conversation:n,conversationTitle:null!=p?p:n.title,onOpenChange:e=>{u(e),e&&R.A.logEvent(_.M.conversationHistoryItemOpenMenu,{conversationId:n.id})}})}):(0,V.jsx)("div",{className:"absolute bottom-0 top-0 flex items-center gap-1.5 pr-2 ltr:right-0 rtl:left-0",children:(0,V.jsx)("div",{className:"h-2 w-2 rounded-full bg-blue-selection"})}):(0,V.jsx)("div",{className:"absolute bottom-0 top-0 flex items-center gap-1.5 pr-2 ltr:right-0 rtl:left-0",children:(0,V.jsx)(W.O,{size:18})})]})}var es=n(35998),ea=n(6242),el=n(32863);function ec(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ed(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ec(Object(n),!0).forEach(function(t){(0,s.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ec(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let eu=(0,w.vU)({historyBucketToday:{id:"history.bucket.today",defaultMessage:"Today"},historyBucketYesterday:{id:"history.bucket.yesterday",defaultMessage:"Yesterday"},historyBucketLastSeven:{id:"history.bucket.lastSeven",defaultMessage:"Previous 7 Days"},historyBucketLastThirty:{id:"history.bucket.lastThirty",defaultMessage:"Previous 30 Days"},unableToLoadHistory:{id:"history.unableToLoad",defaultMessage:"Unable to load history"},retryButton:{id:"history.retryButton",defaultMessage:"Retry"},showMoreButton:{id:"history.showMoreButton",defaultMessage:"Show more"},deleteModalTitle:{id:"history.deleteModalTitle",defaultMessage:"Delete chat?"},deleteModalBody:{id:"history.deleteModalBody",defaultMessage:"This will delete {title}."},deleteModalConfirm:{id:"history.deleteModalConfirm",defaultMessage:"Delete"},deleteModalCancel:{id:"history.deleteModalCancel",defaultMessage:"Cancel"}}),ef={initial:e=>{let{isNew:t}=e;return t?{opacity:0,height:0,overflow:"hidden"}:{}},animate:()=>({opacity:1,height:"auto"}),exit:()=>({opacity:0,height:0})};var em=k.memo(function(e){let{activeId:t,isPrimaryBackgroundColor:n,isInPopover:r}=e,o=(0,l.NL)(),i=(0,M.Z)(),{0:s,1:a}=(0,k.useState)(!1),{0:x,1:j}=(0,k.useState)(0),w=(0,C.Z)(),{conversations:T,hasNextPage:P,fetchNextPage:D,isLoading:S,isFetchingNextPage:Z,isError:E}=(0,et.MO)(),I=(0,k.useRef)(null),L=(0,k.useCallback)(e=>{var t;S||null==e||(null===(t=I.current)||void 0===t||t.disconnect(),I.current=new IntersectionObserver(e=>{e[0].isIntersecting&&P&&D()}),I.current.observe(e))},[S,P,D]);(0,k.useEffect)(()=>()=>{var e;null===(e=I.current)||void 0===e||e.disconnect()},[]);let A=function(e){let t=(0,k.useRef)(),n=(0,k.useRef)();return((0,k.useEffect)(()=>{t.current=n.current,n.current=e},[e]),e===n.current)?t.current:n.current}(T);(0,k.useEffect)(()=>{w(()=>{j(x+1)},(0,f.Z)((0,m.Z)(),Date.now())+1e3)},[x,w]);let B=0===T.length;(0,k.useEffect)(()=>{if(!B){var e;null===(e=(0,c.Ef)({namespace:c.dG.ChatPageLoad}))||void 0===e||e.logTiming("render_history_items")}},[B]);let R=(0,k.useMemo)(()=>T.reduce((e,t)=>{var n,r;let o=new Date(null!==(n=null!==(r=t.update_time)&&void 0!==r?r:t.create_time)&&void 0!==n?n:0),s=(0,u.Z)(new Date,o);if(0===s)e.recent.today.items.push(t);else if(s<=1)e.recent.yesterday.items.push(t);else if(s<=7)e.recent.lastSeven.items.push(t);else if(s<=30)e.recent.lastThirty.items.push(t);else if((0,g.Z)(o)){let n=(0,p.Z)(o),r=(0,h.Z)(o),s="".concat(n,"-").concat(r);e.dynamicMonths[s]?e.dynamicMonths[s].items.push(t):e.dynamicMonths[s]={label:i.formatDate(o,{month:"long"}),items:[t]}}else{let n=(0,p.Z)(o),r="".concat(n,"-");e.dynamicYears[r]?e.dynamicYears[r].items.push(t):e.dynamicYears[r]={label:i.formatDate(o,{year:"numeric"}),items:[t]}}return e},{recent:{today:{label:(0,V.jsx)(O.Z,ed({},eu.historyBucketToday)),items:[]},yesterday:{label:(0,V.jsx)(O.Z,ed({},eu.historyBucketYesterday)),items:[]},lastSeven:{label:(0,V.jsx)(O.Z,ed({},eu.historyBucketLastSeven)),items:[]},lastThirty:{label:(0,V.jsx)(O.Z,ed({},eu.historyBucketLastThirty)),items:[]}},dynamicMonths:{},dynamicYears:{}}),[x,T]);return(0,V.jsxs)(eh,{$centered:S||E||B,children:[B&&S&&(0,V.jsx)(es.Z,{className:"m-auto"}),B&&E&&(0,V.jsxs)("div",{className:"p-3 text-center italic text-token-text-tertiary",children:[(0,V.jsx)(O.Z,ed({},eu.unableToLoadHistory)),!s&&(0,V.jsx)("div",{className:"mt-1",children:(0,V.jsx)(N.z,{as:"button",color:"primary",size:"small",className:"m-auto mt-2",onClick:()=>{a(!0),(0,et.aM)(o)},children:(0,V.jsx)(O.Z,ed({},eu.retryButton))})})]}),!S&&!B&&(0,V.jsx)("div",{children:(0,V.jsx)(y.S,{id:r?"history-popover":"history-sidebar",children:(0,V.jsx)(v.M,{initial:!1,children:[R.recent,R.dynamicMonths,R.dynamicYears].flatMap((e,r)=>(0,V.jsx)(k.Fragment,{children:Object.entries(e).map((e,o)=>{let[i,{items:s,label:a}]=e;if("today"!==i&&!s.length)return null;let l=!!s.find(e=>{var t;return T.length>0&&e.id===(null===(t=T[0])||void 0===t?void 0:t.id)});return s.length>0&&(0,V.jsxs)(b.E.div,{className:(0,d.default)(n&&"first:mt-0","relative mt-5 first:mt-0 last:mb-5 empty:mt-0 empty:hidden"),layout:"position",initial:{height:0,opacity:1,position:"relative"},animate:{height:"auto",opacity:1,transition:{duration:.2,ease:"easeIn"}},children:[(0,V.jsx)(b.E.div,{className:"sticky top-0 z-20 bg-token-sidebar-surface-primary",layout:"position",children:(0,V.jsx)("span",{className:"flex h-9 items-center",children:(0,V.jsx)(eg,{children:a})})},"title-".concat(i)),(0,V.jsx)("ol",{children:s.map((e,r)=>{var o;let s=t===e.id,a=null==A?void 0:A.find(t=>{let{id:n}=t;return n===e.id}),c=P&&(null===(o=T[T.length-5-1])||void 0===o?void 0:o.id)===e.id?L:void 0;return(0,V.jsx)(b.E.li,{className:(0,d.default)("relative",l&&0===r?"z-[15]":""),layout:"position",custom:{isNew:!a},variants:ef,initial:"initial",animate:"animate",exit:"exit",children:(0,V.jsx)(ei,{isPrimaryBackgroundColor:n,conversation:e,isActive:s,elementRef:c})},"history-item-".concat(e.id,"-").concat(i))})})]},"".concat(i,"-").concat(r,"-").concat(o))})},"category-".concat(r)))})})}),Z&&(0,V.jsx)("div",{className:"m-4 mb-5 flex justify-center",children:(0,V.jsx)(es.Z,{})})]})});let eh=T.Z.div(r||(r=(0,i.Z)(["flex flex-col gap-2 pb-2 text-token-text-primary text-sm mt-5\n",""])),e=>{let{$centered:t}=e;return t&&"h-full justify-center items-center empty:hidden"});function ep(e){let{title:t,handleDelete:n,onClose:r}=e,o=(0,M.Z)(),i=(0,a.ll)();return(0,V.jsxs)(el.Z,{isOpen:!0,onClose:r,type:"success",title:o.formatMessage(eu.deleteModalTitle),primaryButton:(0,V.jsx)(ea.Z.Button,{title:o.formatMessage(eu.deleteModalConfirm),color:"danger",onClick:()=>{n(),r()}}),secondaryButton:(0,V.jsx)(ea.Z.Button,{title:o.formatMessage(eu.deleteModalCancel),color:"secondary",onClick:r}),children:[(0,V.jsx)(O.Z,ed(ed({},eu.deleteModalBody),{},{values:{title:(0,V.jsx)("strong",{children:t})}})),i&&(0,V.jsx)("div",{className:"mt-2 text-sm text-token-text-tertiary",children:(0,V.jsx)(O.Z,{id:"history.deleteModalMemoryDisclaimer",defaultMessage:"To clear any memories from this chat, visit your <link>settings</link>.",values:{link:e=>(0,V.jsx)(j(),{href:"#settings/Personalization",shallow:!0,className:"underline",children:e})}})})]})}let eg=T.Z.h3(o||(o=(0,i.Z)(["pb-2 pt-3 px-2 text-xs font-semibold text-ellipsis overflow-hidden break-all text-token-text-secondary"])))},75335:function(e,t,n){n.d(t,{Z:function(){return T}});var r,o=n(97410),i=n(34608),s=n(9519),a=n(81531),l=n(11121),c=n(6242),d=n(47797),u=n(48198),f=n(32863),m=n(31161),h=n(72988),p=n(42420),g=n(56032),y=n(92379),v=n(75172),b=n(62984),x=n(68306),j=n(13271),k=n(651);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var O=((r=O||{})[r.INITIAL=0]="INITIAL",r[r.PENDING=1]="PENDING",r[r.FINAL=2]="FINAL",r);function T(e){let{workspaceId:t,isOpen:n,onClose:r,currentDomain:o,domains:s=[],showUnverifiedDomains:l=!1,onVerifyDomain:d}=e,u=(0,v.Z)(),{mutateAsync:x,isPending:j}=function(e){let t=(0,p.NL)();return(0,g.D)({mutationFn:t=>{let{hostname:n}=t;return h.Z.addDomainToWorkspace(e,n)},onSuccess:()=>{t.invalidateQueries({queryKey:["workspace/identity",e]}),t.invalidateQueries({queryKey:["builderProfile"]})},onError:e=>{m.m.danger(e.message)}})}(t),{mutateAsync:w,isPending:T}=function(e){let t=(0,p.NL)();return(0,g.D)({mutationFn:t=>{let{domainId:n}=t;return h.Z.checkDomainForWorkspace(e,n)},onSuccess:()=>{t.invalidateQueries({queryKey:["workspace/identity",e]}),t.invalidateQueries({queryKey:["builderProfile"]})},onError:e=>{m.m.danger(e.message)}})}(t),{0:C,1:D}=(0,y.useState)(null!=o?o:void 0),{0:S,1:Z}=(0,y.useState)(null==o?void 0:o.hostname),{0:E,1:I}=(0,y.useState)((null==o?void 0:o.status)===void 0?O.INITIAL:(null==o?void 0:o.status)===i.pT.PENDING?O.PENDING:O.FINAL),L=()=>{o||(D(void 0),I(O.INITIAL))},A=async()=>{if(void 0===S)return;let e=s.find(e=>e.hostname===S&&e.status===i.pT.PENDING);if(e)D(e),I(O.PENDING);else{let e=await x({hostname:S});"id"in e&&D(e),I(O.PENDING)}},B=(0,k.jsx)(c.Z.Button,{title:u.formatMessage(P.check),color:"primary",disabled:(null==C?void 0:C.id)===void 0||T,onClick:async()=>{if(null!=C&&C.id){let e=await w({domainId:C.id});"error"in e&&m.m.danger(u.formatMessage(P.domainCheckError,{message:e.error.message})),"id"in e&&(d&&d(e),e.status===i.pT.VERIFIED&&I(O.FINAL))}}}),R=(0,k.jsx)(c.Z.Button,{title:u.formatMessage(P.submit),color:"primary",disabled:void 0===S||j,onClick:A}),_=(0,k.jsx)(c.Z.Button,{title:u.formatMessage(P.done),color:"primary",onClick:()=>{L(),r()}});return(0,k.jsxs)(f.Z,{isOpen:n,onClose:()=>{L(),r()},type:"success",className:"text-token-text-secondary",title:u.formatMessage(E===O.INITIAL?P.newTitle:P.editTitle),primaryButton:E===O.INITIAL?R:E===O.PENDING?B:_,secondaryButton:(0,k.jsx)(c.Z.Button,{title:u.formatMessage(P.cancel),color:"secondary",onClick:()=>{L(),r()}}),children:[E===O.INITIAL&&(0,k.jsx)(N,{hostname:S,onSetHostname:Z,onSubmit:A,unverifiedDomains:l?s:[],onVerifyDomain:e=>{I(O.PENDING),D(e)},workspaceId:t}),E===O.PENDING&&(0,k.jsxs)("div",{className:"flex flex-col gap-3",children:[u.formatMessage(P.verificationTokenMessage,{hostname:null==C?void 0:C.hostname}),(null==C?void 0:C.dns_verification_token_string)&&(0,k.jsx)(a.Z,{value:C.dns_verification_token_string,onCopied:()=>{m.m.success(u.formatMessage(P.copiedTXTRecordToClipboard),{duration:3})}}),(0,k.jsx)(b.Z,M({},P.verificationTokenFooter))]}),E===O.FINAL&&(0,k.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,k.jsx)(b.Z,M(M({},P.successfulVerification),{},{values:{hostname:null==C?void 0:C.hostname}})),(null==C?void 0:C.dns_verification_token_string)&&(0,k.jsx)(a.Z,{value:C.dns_verification_token_string,onCopied:()=>{m.m.success(u.formatMessage(P.copiedTXTRecordToClipboard),{duration:3})}})]})]})}function C(e){let{unverifiedDomains:t,onVerifyDomain:n,workspaceId:r}=e,{mutateAsync:o}=(0,j.Bd)(r);return(0,k.jsxs)(d.Z.Root,{fixed:!0,size:"compact",className:"mb-6 border-b border-token-border-light",children:[(0,k.jsxs)(d.Z.Header,{children:[(0,k.jsx)(d.Z.HeaderCell,{children:(0,k.jsx)(b.Z,M({},P.unverifiedDomainsTableHeader))}),(0,k.jsx)(d.Z.HeaderCell,{textAlign:"right"})]}),t.map(e=>(0,k.jsxs)(d.Z.Row,{children:[(0,k.jsx)(d.Z.Cell,{children:e.hostname}),(0,k.jsx)(d.Z.Cell,{textAlign:"right",children:(0,k.jsxs)("div",{className:"flex gap-2",children:[(0,k.jsx)(s.z,{color:"secondary",size:"small",onClick:()=>n(e),children:(0,k.jsx)(b.Z,M({},P.verifyDomainButton))}),(0,k.jsx)(s.z,{color:"secondary",size:"small",onClick:()=>o({domainId:e.id}),icon:u.XHJ})]})})]},e.id))]})}function N(e){let{hostname:t,onSetHostname:n,onSubmit:r,unverifiedDomains:o,onVerifyDomain:i,workspaceId:s}=e,a=(0,v.Z)();return(0,k.jsxs)(k.Fragment,{children:[o&&o.length>0&&(0,k.jsx)(C,{workspaceId:s,unverifiedDomains:o,onVerifyDomain:i}),(0,k.jsx)("form",{onSubmit:e=>{e.preventDefault(),r()},children:(0,k.jsxs)("div",{className:"mb-4",children:[(0,k.jsx)("label",{className:"mb-2 flex items-center text-sm font-semibold",children:(0,k.jsx)(b.Z,M({},P.domainInput))}),(0,k.jsx)(l.Z,{name:"hostname",placeholder:a.formatMessage(P.placeholder),value:null!=t?t:"",onChange:e=>{n(e.target.value)}})]})})]})}let P=(0,x.vU)({newTitle:{id:"domainModal.newTitle.0",defaultMessage:"Verify a new domain"},editTitle:{id:"domainModal.editTitle",defaultMessage:"Manage Domain"},submit:{id:"domainModal.submit",defaultMessage:"Submit"},check:{id:"domainModal.check",defaultMessage:"Check"},done:{id:"domainModal.done",defaultMessage:"Done"},cancel:{id:"domainModal.cancel",defaultMessage:"Cancel"},domainInput:{id:"domainModal.domainInput.0",defaultMessage:"Add a new domain"},placeholder:{id:"domainModal.placeholder",defaultMessage:"openai.com"},domainCheckError:{id:"domainModal.domainCheckError",defaultMessage:"Your domain could not be verified: {message}"},verificationTokenMessage:{id:"domainModal.verificationTokenMessage",defaultMessage:"To verify ownership of {hostname}, navigate to your DNS provider and add a TXT record with this value:"},verificationTokenFooter:{id:"domainModal.verificationTokenFooter",defaultMessage:"Then, check the record to complete the verification."},successfulVerification:{id:"domainModal.successfulVerification.0",defaultMessage:'Your domain, "{hostname}" has been successfully verified'},copiedTXTRecordToClipboard:{id:"domainModal.copiedTXTRecordToClipboard",defaultMessage:"Copied DNS TXT record to clipboard"},verifyDomainButton:{id:"domainModal.verifyDomainButton",defaultMessage:"Verify"},unverifiedDomainsTableHeader:{id:"domainModal.unverifiedDomainsTableHeader",defaultMessage:"Your unverified domains"}})},13271:function(e,t,n){n.d(t,{Bd:function(){return y},DD:function(){return x},Fc:function(){return b},Ji:function(){return g},OR:function(){return j},Wv:function(){return p},f_:function(){return h},sd:function(){return w},z0:function(){return k}});var r,o=n(15316),i=n(34608),s=n(31161),a=n(72988),l=n(25968),c=n(84760),d=n(56032),u=n(42420),f=n(75172),m=n(68306);function h(e,t){return(0,c.a)({queryKey:["workspace/identity",e],queryFn:async()=>{if(void 0!==e)return await a.Z.getWorkspaceIdentitySettings(e)},enabled:t})}function p(){let e=(0,l.ec)(l.F_.workspaceId),{data:t}=h(null!=e?e:void 0,null!=e);return(null==t?void 0:t.domains)&&(null==t?void 0:t.domains.filter(e=>"verified"==e.status))}function g(e){let t=(0,f.Z)();return(0,d.D)({mutationFn:n=>{let{shouldAutoProvision:r}=n;return a.Z.setWorkspaceShouldAutoProvision(e,r).then(e=>{let n=r?M.autoProvisionEnabledToast:M.autoProvisionDisabledToast;return s.m.success(t.formatMessage(n),{duration:3}),e}).catch(e=>{throw s.m.danger(e.message),e})}})}function y(e){let t=(0,u.NL)();return(0,d.D)({mutationFn:t=>{let{domainId:n}=t;return a.Z.removeDomainFromWorkspace(e,n)},onSuccess:()=>{t.refetchQueries({queryKey:["workspace/identity",e]}),t.refetchQueries({queryKey:["builderProfile"]})}})}function v(e){let t=e;return t.startsWith("-----BEGIN")||(t="-----BEGIN CERTIFICATE-----\n".concat(t)),t.endsWith("CERTIFICATE-----")||(t="".concat(t,"\n-----END CERTIFICATE-----")),t}function b(e){let t=(0,u.NL)();return(0,d.D)({mutationFn:t=>{let{signInEndpoint:n,cert:r}=t;return a.Z.createSAMLConnection(e,n,v(r))},onSuccess:()=>{t.refetchQueries({queryKey:["workspace/identity",e]})}})}function x(e){let t=(0,u.NL)();return(0,d.D)({mutationFn:t=>{let{connectionId:n,signInEndpoint:r,cert:o,active:i,enforcedClients:s}=t;return a.Z.updateSAMLConnection(e,n,{signInEndpoint:r,cert:void 0!==o?v(o):void 0,active:i,enforcedClients:s})},onSuccess:()=>{t.refetchQueries({queryKey:["workspace/identity",e]})}})}function j(e){let t=(0,u.NL)();return(0,d.D)({mutationFn:t=>{let{connectionId:n}=t;return a.Z.deleteSAMLConnection(e,n)},onSuccess:()=>{t.refetchQueries({queryKey:["workspace/identity",e]})}})}let k=n(15478).Z.div(r||(r=(0,o.Z)(["text-md mb-4 text-token-text-secondary"]))),w={[i.pT.VERIFIED]:(0,m.Em)({id:"i7FkyS",defaultMessage:"Verified"}),[i.pT.PENDING]:(0,m.Em)({id:"THBv/l",defaultMessage:"Pending"}),[i.pT.EXPIRED]:(0,m.Em)({id:"+sjWGK",defaultMessage:"Expired"})},M=(0,m.vU)({autoProvisionEnabledToast:{id:"workspaceIdentity.autoProvisionEnabledToast",defaultMessage:"Auto provisioning enabled for this workspace"},autoProvisionDisabledToast:{id:"workspaceIdentity.autoProvisionDisabledToast",defaultMessage:"Auto provisioning disabled for this workspace"}})},33543:function(e,t,n){n.d(t,{B$:function(){return u},Yk:function(){return d},hx:function(){return f}});var r=n(97410),o=n(68029),i=n(68810);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let l=(0,o.M)(()=>({activeRequests:{}})),c=e=>(0,i.oR)(l,e);function d(e){return c(t=>null!=t.activeRequests[e])}function u(){return c(e=>Object.keys(e.activeRequests).length>0)}let f={addRequest(e,t){l.setState(n=>({activeRequests:a(a({},n.activeRequests),{},{[e]:{id:e,abortController:t}})}))},removeRequest(e){l.setState(t=>{let n=a({},t.activeRequests);return delete n[e],{activeRequests:n}})},clear(){l.setState({activeRequests:{}})},abortRequest(e){let{activeRequests:t}=l.getState();return null!=t[e]&&(t[e].abortController.abort(),f.removeRequest(e),!0)},abortRequests(e){let{activeRequests:t}=l.getState(),n=a({},t);for(let t of e)null!=n[t]&&(n[t].abortController.abort(),delete n[t]);l.setState({activeRequests:n})},abortAllRequests(){let{activeRequests:e}=l.getState();Object.values(e).forEach(e=>{e.abortController.abort()}),f.clear()}}},85213:function(e,t,n){n.d(t,{Z:function(){return h}});var r,o=n(15316),i=n(12925),s=n(10449);n(7569);var a=n(90681),l=n(92379),c=n(62984),d=n(15478),u=n(48198),f=n(651);let m=d.Z.div(r||(r=(0,o.Z)(["text-sm text-token-text-tertiary"])));function h(e){let t,n,{gizmo:r,builderName:o,builderUrl:s,className:l,socials:d,hideLink:h=!1}=e,{value:g}=(0,a.sB)("2256850471");r&&"gizmo"in r?(t=r.gizmo.author.display_name,n=r.gizmo.author.link_to):(t=o,n=s),(""===t||null==t)&&(t="community builder");let y=null==d?void 0:d.filter(e=>e.verified),v=(0,f.jsxs)("div",{className:"w-48 space-y-4 text-sm",children:[n&&(0,f.jsxs)("div",{className:"flex w-full flex-row items-center justify-between",children:[(0,f.jsxs)("div",{className:"flex flex-row items-center space-x-2 text-token-text-primary",children:[(0,f.jsx)(u.n9J,{className:"icon-md"}),(0,f.jsx)("span",{children:(0,f.jsx)(c.Z,{id:"gizmo.author.websiteLabel",defaultMessage:"Website"})})]}),(0,f.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:n,className:"text-token-text-tertiary  hover:cursor-pointer",children:(0,f.jsx)(u.Pfi,{className:"icon-sm"})})]}),g&&(null==y?void 0:y.map((e,t)=>e.verified?(0,f.jsx)(i.lD,{socialData:e},t):null)),(0,f.jsxs)("div",{className:"text-xs text-token-text-tertiary",children:[(n||y&&y.length>0)&&(0,f.jsx)("hr",{className:"my-2 border-token-border-light"}),(0,f.jsx)(c.Z,{id:"gizmo.author.cannotViewLabel",defaultMessage:"The builder of this GPT cannot view your conversations."})]})]});return(0,f.jsxs)("div",{className:"flex flex-row items-center space-x-1",children:[(0,f.jsx)(m,{className:l,children:(0,f.jsx)(c.Z,{id:"gizmo.author.byLabel",defaultMessage:"By {displayName}",values:{displayName:t}})}),!h&&(0,f.jsx)(p,{socials:d,website:n,children:v})]})}function p(e){let{website:t,socials:n,children:r}=e,{0:o,1:i}=(0,l.useState)(!1),a=[];t&&a.push((0,f.jsx)(u.n9J,{className:"icon-xs text-token-text-secondary"})),n&&n.forEach(e=>{e.verified&&("twitter"===e.type?a.push((0,f.jsx)(u.suT,{className:"icon-xs text-token-text-secondary"})):"linkedin"===e.type?a.push((0,f.jsx)(u.O9,{className:"icon-xs text-token-text-secondary"})):"github"===e.type&&a.push((0,f.jsx)(u.C2$,{className:"icon-xs text-token-text-secondary"})))});let c=a.length-2;return a=a.slice(0,2),c>0&&a.push((0,f.jsxs)("span",{className:"text-xs font-semibold text-token-text-secondary",children:["+",c]},"overflow")),(0,f.jsx)(s.fC,{open:o,onOpenChange:i,children:(0,f.jsxs)("div",{onPointerLeave:()=>i(!1),children:[(0,f.jsx)(s.xz,{asChild:!0,children:(0,f.jsx)("div",{onPointerEnter:()=>i(!0),children:a.length>0?(0,f.jsx)("div",{className:"flex items-center gap-1 rounded-xl bg-token-main-surface-secondary px-2 py-1",children:a}):(0,f.jsx)(u.tBG,{className:"icon-xs text-token-text-secondary"})})}),(0,f.jsx)(s.VY,{side:"top",sideOffset:8,align:"center",className:"z-10 rounded-lg bg-token-main-surface-primary p-4 drop-shadow-md",children:r})]})})}},25311:function(e,t,n){n.d(t,{M:function(){return c},Z:function(){return l}});var r=n(13300),o=n(48198),i=n(96314),s=n(18114),a=n(651);function l(e){let{isFirstParty:t,src:n,alt:i,className:s}=e;return(0,a.jsx)("div",{className:s,children:null!=n?(0,a.jsx)("div",{className:"gizmo-shadow-stroke overflow-hidden rounded-full",children:(0,a.jsx)("img",{src:n,className:"h-full w-full bg-token-main-surface-secondary",alt:null!=i?i:"GPT",width:80,height:80})}):(0,a.jsx)("div",{className:"gizmo-shadow-stroke relative flex h-full items-center justify-center rounded-full bg-token-main-surface-primary text-token-text-primary",children:t?(0,a.jsx)(r.nI,{className:"h-2/3 w-2/3"}):(0,a.jsx)(o.uy2,{className:"h-2/3 w-2/3 text-gray-400"})})})}function c(e){var t,n;let{gizmoId:r,className:o}=e,{data:c}=(0,i.b9)(r);return(0,a.jsx)(l,{src:null==c?void 0:c.gizmo.display.profile_picture_url,isFirstParty:null!==(t=null==c||null===(n=c.gizmo.tags)||void 0===n?void 0:n.includes(s.U9.FirstParty))&&void 0!==t&&t,className:o})}},12925:function(e,t,n){n.d(t,{lD:function(){return M},s6:function(){return O},tw:function(){return w}});var r=n(97410),o=n(75335),i=n(13271),s=n(9519),a=n(48609),l=n(48198),c=n(1755),d=n(32989),u=n(35998),f=n(44575),m=n(54089),h=n(42420),p=n(56032),g=n(19841),y=n(92379),v=n(62984),b=n(68306),x=n(651);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function w(e){var t,n;let{selectedDomain:r,verifiedDomains:s,domains:c,onChangeDomain:d}=e,{0:u,1:h}=(0,y.useState)(!1),p=s.length>0,g=null===(t=(0,f.t)())||void 0===t?void 0:t.id,b=null===(n=(0,f.t)())||void 0===n?void 0:n.isEnterpriseOrEdu(),{mutateAsync:j}=(0,i.Bd)(g);return(0,x.jsxs)("div",{className:"font-normal",children:[(0,x.jsxs)(a.Z.Root,{children:[(0,x.jsx)(m.xz,{children:(0,x.jsxs)("span",{className:"flex items-center gap-2 py-2",children:[null!=r?r:(0,x.jsx)(v.Z,k({},T.selectADomain)),(0,x.jsx)(l.T2M,{className:"icon-md"})]})}),(0,x.jsx)(a.Z.Portal,{children:(0,x.jsxs)(a.Z.Content,{children:[(0,x.jsx)(a.Z.RadioGroup,{value:r,onValueChange:e=>{e!==r&&d(e)},children:s.map(e=>{let{id:t,hostname:n}=e;return(0,x.jsx)(a.Z.RadioItem,{value:n,children:(0,x.jsxs)("div",{className:"flex flex-row",children:[(0,x.jsx)("span",{children:n}),(0,x.jsx)("span",{onClick:()=>{j({domainId:t}),d("")},children:(0,x.jsx)(l.XHJ,{className:"icon-sm fixed right-4"})})]})},t)})}),p&&(0,x.jsx)(a.Z.Separator,{}),(0,x.jsx)(a.Z.Item,{onClick:()=>{h(!0)},icon:l.Vz5,children:(0,x.jsx)(v.Z,k({},T.addDomain))})]})})]}),g&&!b&&(0,x.jsx)(o.Z,{domains:c,isOpen:u,onClose:()=>h(!1),workspaceId:g,showUnverifiedDomains:!0,onVerifyDomain:e=>{d(e.hostname)}})]})}function M(e){let{socialData:t}=e,{type:n,display_name:r,verified_data:o}=t,i="twitter"===n?l.suT:"linkedin"===n?l.O9:"github"===n?l.C2$:null;return i?(0,x.jsxs)("div",{className:"flex w-full flex-row items-center justify-between",children:[(0,x.jsxs)("div",{className:"flex flex-row items-center space-x-2 text-token-text-primary",children:[i({className:"icon-md"}),(0,x.jsx)("span",{children:r})]}),(null==o?void 0:o.link_to)&&(0,x.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:o.link_to,className:"text-sm text-token-text-tertiary  hover:cursor-pointer",children:(0,x.jsx)(l.Pfi,{className:"icon-sm"})})]}):null}function O(e){let{socialData:t,icon:n}=e,{id:r,type:o,display_name:i,verified:a,verified_data:f}=t,{0:m,1:b}=(0,y.useState)(!1),j=function(){let e=(0,h.NL)();return(0,p.D)({mutationFn:e=>{let{verifierType:t}=e;return c.U.unverifySocialAuth(t)},onSuccess:()=>{e.refetchQueries({queryKey:["builderProfile"]})}})}();return(0,x.jsxs)("div",{className:"flex flex-row items-center justify-between space-y-1",children:[(0,x.jsxs)("div",{className:(0,g.default)("flex items-center space-x-2"),children:[(0,x.jsx)(n,{className:"icon-sm"}),(0,x.jsx)("span",{children:i}),a&&(null==f?void 0:f.username)&&(0,x.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:f.link_to,className:"text-sm text-token-text-tertiary hover:cursor-pointer",children:null==f?void 0:f.username})]}),a?(0,x.jsx)("div",{className:"py-1 font-semibold hover:cursor-pointer",onClick:()=>{j.mutate({verifierType:o})},children:j.isPending?(0,x.jsx)(u.Z,{}):(0,x.jsx)(l.tPq,{className:"icon-sm text-token-text-tertiary"})}):(0,x.jsx)(s.z,{size:"small",color:"secondary",loading:m,onClick:async()=>{b(!0),await (0,d.Up)({id:r},"#settings/BuilderProfile"),b(!1)},children:(0,x.jsx)(v.Z,k({},T.verify))})]})}let T=(0,b.vU)({verify:{defaultMessage:"Add",id:"GizmoSocialRow.add"},addDomain:{id:"GizmoSocialRow.addDomain",defaultMessage:"Verify new domain"},selectADomain:{id:"GizmoSocialRow.selectADomain",defaultMessage:"Select a domain"}})},32989:function(e,t,n){n.d(t,{Up:function(){return i},doConnectorOauthRedirect:function(){return s},wP:function(){return l},wW:function(){return a}});var r=n(88628),o=n(72988);async function i(e,t){let n="".concat("https://chat.openai.com","/aip/").concat(e.id,"/oauth/callback"),r=await o.Z.pluginOauthRedirect(e.id,n,t);window.location.href=r.redirect_uri}async function s(e,t,n,r){let i=await o.Z.connectorOauthRedirect(e.id,n,t,r);window.location.href=i.redirect_uri}function a(e){switch(e){case r.NA.Link:return"link_paste_popover";case r.NA.Picker:return"file_upload_menu"}}async function l(e){await o.Z.deleteUserConnectedApp(e),window.location.reload()}},98262:function(e,t,n){n.d(t,{MO:function(){return m},aM:function(){return h},wT:function(){return f}});var r=n(97410),o=n(44575),i=n(71278),s=n(19856),a=n(92379),l=n(72988),c=n(85029);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let f="conversationHistory";function m(){var e;let t=(0,o.hz)(),n=null!==(e=null==t?void 0:t.includes(c.Ud))&&void 0!==e&&e,r=(0,o.t)(),d=!n&&!!(null!=r&&r.data),{data:m,fetchNextPage:h,hasNextPage:p,isInitialLoading:g,isFetchingNextPage:y,isError:v}=(0,s.N)({queryKey:[f],queryFn:e=>{let{pageParam:t}=e;return l.Z.getConversations({offset:t,limit:28})},initialPageParam:0,getNextPageParam:e=>{let t=e.offset+e.limit;return t<e.total?t:void 0},enabled:d}),b=(0,a.useMemo)(()=>{var e;return null!==(e=null==m?void 0:m.pages.flatMap(e=>e.items))&&void 0!==e?e:[]},[m]),{setStatusMap:x,getState:j}=i.p.useStore();return(0,a.useEffect)(()=>{if(b.length){let{statusMap:e}=j();x(u(u({},b.reduce((e,t)=>(e[t.id]=t.async_status,e),{})),e))}},[b,x,j]),{data:m,conversations:b,fetchNextPage:h,hasNextPage:p,isLoading:g,isFetchingNextPage:y,isError:d&&v}}function h(e){e.invalidateQueries({queryKey:[f]})}},71278:function(e,t,n){n.d(t,{p:function(){return l}});var r=n(97410),o=n(34608),i=n(14210);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}class l extends(0,i.R)()(()=>({statusMap:{}})){constructor(){super(...arguments),(0,r.Z)(this,"setStatusMap",e=>{this.setState({statusMap:e})}),(0,r.Z)(this,"setConversationStatus",(e,t)=>{this.setState(n=>({statusMap:a(a({},n.statusMap),{},{[e]:t})}))})}}(0,r.Z)(l,"selectStatusMap",e=>e),(0,r.Z)(l,"selectConversationStatus",e=>t=>e.statusMap[t]),(0,r.Z)(l,"hasUnreadConversations",e=>Object.values(e.statusMap).some(e=>e===o.w2.FINISHED))},52214:function(e,t,n){n.d(t,{V:function(){return s}});var r=n(97410),o=n(36560),i=n.n(o);class s{constructor(){(0,r.Z)(this,"emitter",new(i())),this.emitter.setMaxListeners(1e3)}on(e,t){this.emitter.on(e,t)}off(e,t){this.emitter.off(e,t)}publish(e){this.emitter.emit(e.kind,e),this.emitter.emit("anyEvent",e)}}},50590:function(e,t,n){n.d(t,{ll:function(){return l},tW:function(){return c},tv:function(){return u},u1:function(){return d}});var r=n(34608),o=n(43063),i=n(44575),s=n(85029),a=n(90681);function l(){var e,t;return null!==(e=null===(t=(0,i.hz)())||void 0===t?void 0:t.includes(s.L0.Sunshine))&&void 0!==e&&e}function c(){let{data:e}=(0,o.R1)(r.sh.Sunshine),t=l();return!!e&&t}function d(){var e;let t=c(),n=null!==(e=(0,a.sB)("1611573287").value)&&void 0!==e&&e;return t&&n}function u(){var e,t;return null!==(e=null===(t=(0,i.hz)())||void 0===t?void 0:t.includes(s.L0.MemoryGA))&&void 0!==e&&e}},48636:function(e,t,n){n.d(t,{n:function(){return D},A3:function(){return N},yx:function(){return I},JS:function(){return E}});var r,o=n(97410),i=n(15858),s=n(40894),a=n(99140),l=n(66943),c=n(93647),d=n(7569),u=n(91530),f=n.n(u),m=n(92379),h=n(68306),p=n(88628),g=n(31161),y=n(94867),v=n(81743),b=n(52214),x=n(95290),j=n(45248);let k=m.useLayoutEffect;function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}let M=/```.*?\n([\s\S]+?)\n?```[^`]*$/gms;var O=((r=O||{}).Core="Core",r.Chat="Chat",r.Settings="Settings",r);let T=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({Mod:"mod",Comma:","},i.s),C={[T.Mod]:/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)?"⌘":"Ctrl",[T.Comma]:",",[T.Enter]:"⏎",[T.Escape]:"Esc",[T.ArrowUp]:"↑",[T.ArrowDown]:"↓",[T.ArrowLeft]:"←",[T.ArrowRight]:"→",[T.Backspace]:"⌫",[T.Delete]:"⌦",[T.Tab]:"⇥",[T.Control]:"Ctrl",[T.Shift]:"Shift"},N=e=>e.map(e=>{var t;return null!==(t=C[e])&&void 0!==t?t:e}),P=(0,h.vU)({newChat:{id:"keyboardActions.newChat",defaultMessage:"Open new chat"},focusPromptTextarea:{id:"keyboardActions.focusPromptTextarea",defaultMessage:"Focus chat input"},copyLastCodeBlock:{id:"keyboardActions.copyLastCodeBlock",defaultMessage:"Copy last code block"},copyLastResponse:{id:"keyboardActions.copyLastResponse",defaultMessage:"Copy last response"},toggleCustomInstructions:{id:"keyboardActions.toggleCustomInstructions",defaultMessage:"Set custom instructions"},navigationToggle:{id:"keyboardActions.navigationToggle",defaultMessage:"Toggle sidebar"},deleteChat:{id:"keyboardActions.deleteChat",defaultMessage:"Delete chat"},archiveChat:{id:"keyboardActions.archiveChat",defaultMessage:"Archive chat"},toggleKeyboardActions:{id:"keyboardActions.toggleKeyboardActions",defaultMessage:"Show shortcuts"}}),D=new b.V,S=e=>{let{resetThreadAction:t,clientThreadId:n}=e;return[{key:"newChat",action:t||f(),actionMessageDescriptor:P.newChat,group:O.Core,keyboardBinding:[T.Mod,T.Shift,"o"],altKeyboardBindings:[[T.Mod,"k"]]},{key:"focusPromptTextarea",action:s.go,actionMessageDescriptor:P.focusPromptTextarea,group:O.Chat,keyboardBinding:[T.Shift,T.Escape]},{key:"copyLastCodeBlock",action:()=>{if(null!=n){let e=y.tQ.getThreadCurrentLeafId(n),t=y.tQ.getThreadConversationTurns(n,e);for(let e=t.length-1;e>=0;e--){let{messages:n}=t[e],r=[...n.reduce((e,t)=>null==t.err&&t.message.author.role===p.uU.Assistant&&"all"===t.message.recipient?e+(e?"\n\n":"")+(0,x.RR)(t.message):e,"").matchAll(M)],o=r.length?r[r.length-1][1]:null;if(null!=o){(0,c.v)(o).then(()=>{g.m.success("Copied code block to clipboard")});break}}}},actionMessageDescriptor:P.copyLastCodeBlock,group:O.Chat,keyboardBinding:[T.Mod,T.Shift,";"],altKeyboardBindings:[[T.Mod,T.Shift,":"]]},{key:"copyLastResponse",action:()=>{null!=n&&y.tQ.copyLastMessageToClipboard(n,"keyboard").then(()=>{g.m.success("Last response copied to clipboard")})},actionMessageDescriptor:P.copyLastResponse,group:O.Chat,keyboardBinding:[T.Mod,T.Shift,"c"]},{key:"toggleCustomInstructions",action:()=>v.vm.toggleModal(v.B.UserContext),actionMessageDescriptor:P.toggleCustomInstructions,group:O.Settings,keyboardBinding:[T.Mod,T.Shift,"i"]},{key:"navigationToggle",action:()=>v.vm.toggleDesktopNavCollapsed(),actionMessageDescriptor:P.navigationToggle,group:O.Core,keyboardBinding:[T.Mod,T.Shift,"s"]},{key:"deleteChat",action:()=>{if(n){let e=y.tQ.getServerThreadId(n);e&&D.publish({kind:"deleteChat",serverThreadId:e})}},actionMessageDescriptor:P.deleteChat,group:O.Chat,keyboardBinding:[T.Mod,T.Shift,T.Backspace],altKeyboardBindings:[[T.Mod,T.Shift,T.Delete]]},{key:"toggleKeyboardActions",action:()=>v.vm.toggleModal(v.B.KeyboardActions),actionMessageDescriptor:P.toggleKeyboardActions,group:O.Settings,keyboardBinding:[T.Mod,"/"]}]},Z=e=>(function(e,t,n){let r=e.map(e=>{let{keyboardBinding:t}=e,n=t.join("+");if(e.altKeyboardBindings){n=[n];let t=e.altKeyboardBindings.map(e=>e.join("+"));n=n.concat(t)}return(0,j.ZP)(n,{byKey:!0})});k(()=>{if((null==n?void 0:n.enabled)===!1)return;let o=n=>{if(!n.repeat)for(let o=0;o<r.length;o++)r[o](n)&&(void 0===e[o].enabled||e[o].enabled)&&(n.preventDefault(),t(e[o]),e[o].action())},i=e=>{void 0!==e.key&&o(e)},s=document;return s.addEventListener("keydown",i),()=>{s.removeEventListener("keydown",i)}},[e,n])})(e,e=>{a.A.logEvent(l.M.keyboardShortcut,{keyboardActionKey:e.key}),d.U.addAction("chatgpt_keyboard_shortcut",{keyboardActionKey:e.key})},{enabled:!0}),E=function(){let{resetThreadAction:e,clientThreadId:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,m.useMemo)(()=>S({resetThreadAction:e,clientThreadId:t}).filter(e=>{let{enabled:t=!0}=e;return t}),[t,e])},I=e=>{let{resetThreadAction:t,clientThreadId:n}=e;Z(E({resetThreadAction:t,clientThreadId:n}))}},1718:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(92379);function o(){let e=(0,r.useRef)([]),t=(0,r.useRef)((t,n)=>{let r=setTimeout(t,n);return e.current.push(r),r});return(0,r.useEffect)(()=>{let t=e.current;return()=>{t.forEach(e=>{clearTimeout(e)})}},[]),t.current}},71325:function(e,t,n){n.d(t,{Ef:function(){return h},UG:function(){return p},dG:function(){return c},gb:function(){return g},mK:function(){return m}});var r,o=n(97410),i=n(45244),s=n(7569),a=n(92379);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}let c=((r={}).SonicHome="sonic.web.home",r.SonicServer="sonic.ssr.search",r.ChatPageLoad="chatgpt.web.pageLoad",r.CompletionRequest="chatgpt.web.completionRequest",r.ProofOfWork="chatgpt.web.proofOfWork",r);class d{constructor(e,t){var n,r;(0,o.Z)(this,"expectedTimingLogTimeouts",{}),(0,o.Z)(this,"startMs",-1),(0,o.Z)(this,"lastLogMs",-1),(0,o.Z)(this,"loggedTimings",new Set),(0,o.Z)(this,"timingBlocks",{}),(0,o.Z)(this,"debug",!1),this.namespace=e,this.expectedTimingLogs=null!==(n=null==t?void 0:t.expectedTimingLogs)&&void 0!==n?n:[],this.debug=null!==(r=null==t?void 0:t.debug)&&void 0!==r&&r,this.reset()}reset(){for(let e of(this.startMs=this.lastLogMs=performance.now(),this.timingBlocks={},this.loggedTimings=new Set,Object.values(this.expectedTimingLogTimeouts)))clearTimeout(e);for(let e of(this.expectedTimingLogTimeouts={},this.expectedTimingLogs)){let t=setTimeout(()=>{var t;s.U.addAction("".concat(this.namespace,".").concat(e.name,".timed_out"),null!==(t=e.initializationInfo)&&void 0!==t?t:{})},e.expectedInMs);this.expectedTimingLogTimeouts[e.name]=t,this.debug&&console.debug("[DatadogProfiler] Expecting ".concat(this.namespace,".").concat(e.name," to be logged within ").concat(e.expectedInMs,"ms"))}}logTiming(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fromLastLog:!1};if(this.loggedTimings.has(e)){console.warn("[DatadogProfiler] Timing ".concat(this.namespace,".").concat(e," already logged"));return}let n=performance.now()-(t.fromLastLog?this.lastLogMs:this.startMs);s.U.addAction("".concat(this.namespace,".").concat(e),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({durationMs:n},t.context)),this.lastLogMs=performance.now(),this.loggedTimings.add(e),e in this.expectedTimingLogTimeouts&&(clearTimeout(this.expectedTimingLogTimeouts[e]),delete this.expectedTimingLogTimeouts[e]),this.debug&&console.debug("[DatadogProfiler] ".concat(this.namespace,".").concat(e,": ").concat(n,"ms"))}startBlock(e){this.timingBlocks[e]=performance.now()}endBlock(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{throwError:!0},n=this.timingBlocks[e];if(void 0===n&&t.throwError)throw Error("Block ".concat(e," not started"));let r=performance.now()-n;s.U.addAction("".concat(this.namespace,".").concat(e),{durationMs:r}),delete this.timingBlocks[e]}}let u={},f="__global__";function m(e){let{namespace:t,key:n=f,opts:r}=e;void 0===u[t]&&(u[t]={});let o=(0,i.S)(u[t]);return void 0!==o[n]&&s.U.addError("Profiler already exists for namespace ".concat(t," and key ").concat(n)),o[n]=new d(t,r),o[n]}function h(e){let{namespace:t,key:n=f}=e;if(void 0!==u[t])return(0,i.S)(u[t])[n]}function p(e){let{namespace:t,key:n=f}=e;if(void 0!==u[t]){let e=(0,i.S)(u[t]);delete e[n]}}function g(e){let{namespace:t,key:n=f,opts:r}=e,{0:o}=(0,a.useState)(()=>m({namespace:t,key:n,opts:r}));return o}}}]);
//# sourceMappingURL=3658-3d550d94f8804d49.js.map