"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1502],{95204:function(e,t,n){var r,s=n(92379);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}t.Z=e=>s.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 34 34"},e),r||(r=s.createElement("g",{id:"icon / robot-sad"},s.createElement("path",{id:"Rectangle 49961",stroke:"currentColor",strokeWidth:2.833,d:"M4.959 9.917a2.833 2.833 0 0 1 2.833-2.834h18.417a2.833 2.833 0 0 1 2.833 2.834V21.25a5.667 5.667 0 0 1-5.667 5.667h-12.75A5.667 5.667 0 0 1 4.96 21.25z"}),s.createElement("circle",{id:"Ellipse 32520",cx:12.041,cy:14.167,r:2.125,fill:"currentColor"}),s.createElement("circle",{id:"Ellipse 32521",cx:21.959,cy:14.167,r:2.125,fill:"currentColor"}),s.createElement("path",{id:"Vector 2380",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.833,d:"M17 7.083V4.25"}),s.createElement("path",{id:"Vector 2381",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.833,d:"M4.958 14.167c-.782 0-1.416.634-1.416 1.416V17c0 .782.634 1.417 1.416 1.417v0"}),s.createElement("path",{id:"Vector 2382",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.833,d:"M29.042 14.167c.782 0 1.416.634 1.416 1.416V17c0 .782-.634 1.417-1.416 1.417v0"}),s.createElement("path",{id:"Vector 2386",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.833,d:"M19.834 21.158c-1.964-.822-3.703-.822-5.667 0"}))))},9033:function(e,t,n){n.d(t,{Kd:function(){return j},v_:function(){return b}});var r=n(59725),s=n(98095),l=n(28146),o=n(15913),a=n(38482),i=n.n(a),c=n(34977),u=n(44425),d=n(26925),f=n(97193),h=n(51837),p=n(651);let x=i()(()=>Promise.all([n.e(8682),n.e(6481)]).then(n.bind(n,9760)).then(e=>e.AvatarButtons),{ssr:!1,loadableGenerated:{webpack:()=>[9760]}}),m=s.Z.Item;function g(){let e=d.ne.useStore();return(0,o.e2)()?(0,p.jsx)(m,{onClick:()=>{e.setState({shouldShowAddToHomePopover:!0})},icon:(0,p.jsx)(l.IAe,{className:"icon-md-heavy text-token-text-primary"}),children:"Add to home screen"}):null}function j(e){let{className:t,iconSize:n,children:r}=e,o=(0,h.L)(),a=(0,c.useRouter)();return(0,p.jsxs)(s.Z.Root,{modal:!1,children:[(0,p.jsx)(O,{className:t,iconSize:n,children:r}),(0,p.jsx)(s.Z.Portal,{children:(0,p.jsxs)(s.Z.Content,{collisionPadding:10,children:[(0,p.jsx)(m,{onClick:()=>f.vm.toggleSettingsModalOpen(),icon:(0,p.jsx)(l.SWE,{className:"icon-md-heavy text-token-text-primary"}),children:"Settings"}),(0,p.jsx)(m,{onClick:()=>window.open(u._A,"_blank"),icon:(0,p.jsx)(l.Jmo,{className:"icon-md-heavy text-token-text-primary"}),children:"About SearchGPT"}),(0,p.jsx)(m,{onClick:()=>window.open("https://chatgpt.com","_blank"),icon:(0,p.jsx)(l.Pfi,{className:"icon-md-heavy text-token-text-primary"}),children:"Open ChatGPT"}),(0,p.jsx)(g,{}),(0,p.jsx)(s.Z.Separator,{}),(0,p.jsx)(m,{onClick:()=>a.push("/auth/logout",void 0,{shallow:!0}),icon:(0,p.jsx)(l.iz5,{className:"icon-md-heavy text-token-text-primary"}),children:"Log out"}),o&&(0,p.jsx)(x,{})]})})]})}function b(e){let{className:t,iconSize:n}=e,r=(0,c.useRouter)();return(0,p.jsxs)(s.Z.Root,{modal:!1,children:[(0,p.jsx)(O,{className:t,iconSize:n}),(0,p.jsx)(s.Z.Portal,{children:(0,p.jsx)(s.Z.Content,{collisionPadding:10,children:(0,p.jsx)(m,{onClick:()=>r.push("/auth/logout",void 0,{shallow:!0}),icon:(0,p.jsx)(l.iz5,{className:"icon-md-heavy text-token-text-primary"}),children:"Log out"})})})]})}function O(e){let{className:t,iconSize:n,children:l}=e;return(0,p.jsx)(s.Z.Trigger,{className:"group border-0 !bg-transparent p-0",children:(0,p.jsx)("div",{className:"rounded-full",children:l??(0,p.jsx)(r.zf,{iconSize:n,className:t})})})}},19042:function(e,t,n){n.r(t),n.d(t,{DebugModal:function(){return k},DebugModalContents:function(){return C}});var r=n(11550),s=n(39358),l=n(30115),o=n(28146),a=n(24434),i=n(67330),c=n(91111),u=n(97193),d=n(27313),f=n(5132),h=n(30757),p=n(79746),x=n(19841),m=n(38482),g=n.n(m),j=n(92379),b=n(15478),O=n(19229),v=n(651);let y=g()(()=>Promise.all([n.e(3904),n.e(6476)]).then(n.bind(n,16476)).then(e=>e.default),{ssr:!1,loadableGenerated:{webpack:()=>[16476]}});function k(e){let{threadId:t,threadUserId:n}=e;return(0,u.W6)(u.bM.isDebugModalOpen)&&(0,v.jsx)(a.Z,{isOpen:!0,onClose:()=>u.vm.toggleDebugModalOpen(),type:"success",size:"fullscreen",noPadding:!0,rootClassName:"z-50",children:(0,v.jsx)(C,{threadId:t,threadUserId:n,onClose:()=>u.vm.toggleDebugModalOpen()})})}let N=(e,t)=>{let n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=window.URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=e,s.click(),window.URL.revokeObjectURL(r)},w="<|im_start|>",S="<|im_sep|>",M="<|im_end|>";function P(e){let{prompt:t}=e,n=[],r=0;for(;;){let e=t.indexOf(w,r);if(-1===e)break;let s=t.indexOf(S,e);if(-1===s)break;let l=t.indexOf(M,s),o=t.indexOf("<|fim_suffix|>",s);if(-1!==o&&(-1===l||o<l)&&(l=o),-1===l)break;let a=t.substring(e+w.length,s),i=t.substring(s+S.length,l);n.push((0,v.jsxs)("div",{children:[(0,v.jsxs)("span",{className:"font-semibold",children:["[",a,"]"]})," ",i]},e)),r=l+M.length}return n}let _=b.Z.div`mb-[-5px] px-2 pb-1 font-semibold uppercase border-b-2 ${e=>{let{$isSelected:t}=e;return t?"border-black dark:border-white":"border-transparent"}}`;function C(e){let{threadId:t,threadUserId:n,message:s,onClose:a}=e,{sessionUser:u}=(0,c.A)(),{0:p,1:m}=(0,j.useState)(s?"message":"json"),{data:g,isLoading:b,refetch:O}=(0,d.Y)({threadId:t,threadUserId:n,refetchOnMount:"always"}),y=g?.thread;if((0,j.useEffect)(()=>{m(s?"message":y?.turns.length?`turn${y?.turns.length-1}`:"thread")},[y?.turns.length,s]),!b&&!y&&!s)return(0,v.jsxs)(i.bW,{onClickRetry:()=>O(),children:["Failed to load."," "]});if(b)return(0,v.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:"Loading..."});let k=y?.turns,w=y?.turns[y.turns.length-1]?.artifacts__?.model_snapshots?.default_id,S=n&&t?(0,f.t5)(n,t):null;return(0,v.jsx)("div",{className:"flex flex-col gap-2 break-words font-mono text-xs",children:(0,v.jsxs)(h.fC,{orientation:"vertical",value:p,onValueChange:e=>m(e),children:[(0,v.jsxs)(h.aV,{className:"flex items-center justify-center gap-2 px-4 py-1",children:[s&&(0,v.jsx)(h.xz,{value:"message",children:(0,v.jsx)(_,{$isSelected:"message"===p,children:"Message"})},"message"),y&&(0,v.jsx)(h.xz,{value:"thread",children:(0,v.jsx)(_,{$isSelected:"thread"===p,children:"Thread"})},"thread"),k?.map((e,t)=>v.jsxs(j.Fragment,{children:[v.jsx(h.xz,{value:`turn${t}`,children:v.jsxs(_,{$isSelected:p===`turn${t}`,children:["Turn[",t,"]"]})},t),e.artifacts__?.debug_ddtrace_urls?.map(e=>v.jsx(_,{$isSelected:!1,children:v.jsxs("a",{target:"_blank",href:e,className:"text-nowrap",children:["Trace[",t,"] â†—"]})},e))]},t)),(0,v.jsx)("div",{className:"flex-grow"}),w&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(T,{name:"Model",id:w})," ",(0,v.jsx)("span",{className:"text-gray-500 dark:text-white",children:"|"})]}),u&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(T,{name:"User ID",id:u.id})," ",(0,v.jsx)("span",{className:"text-gray-500 dark:text-white",children:"|"})]}),S&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(T,{name:"Permalink",id:S}),(0,v.jsx)("span",{className:"text-gray-500 dark:text-white",children:"|"})]}),y&&(0,v.jsxs)(r.z,{size:"small",color:"secondary",onClick:()=>N("thread.json",y),children:[(0,v.jsx)(o._8t,{className:"icon-sm"})," thread.json"]}),(0,v.jsx)(l.P,{onClick:a})]}),k?.map((e,t)=>v.jsxs(h.VY,{value:`turn${t}`,className:"max-h-[calc(100vh-46px)] w-full overflow-y-scroll scroll-smooth",children:[v.jsxs("div",{className:x.default("flex flex-col gap-1 p-6",e.index%2==0&&"bg-token-main-surface-tertiary"),children:[v.jsx(P,{prompt:e.artifacts__?.debug_info?.main_model_response?.prompt_string??""}),v.jsxs("div",{children:[v.jsx("span",{className:"font-semibold",children:"[assistant]"})," ",e.model_response?.text]})]})," "]},t)),y&&(0,v.jsx)(h.VY,{value:"thread",className:"max-h-[calc(100vh-46px)] w-full overflow-y-scroll scroll-smooth p-6",children:(0,v.jsx)(E,{data:y,collapsed:4})}),s&&(0,v.jsx)(h.VY,{value:"message",className:"max-h-[calc(100vh-46px)] w-full overflow-y-scroll scroll-smooth p-6",children:(0,v.jsx)(E,{data:s,collapsed:4})})]},y?.turns.length??"message")})}function E(e){let{data:t,collapsed:n}=e,{0:r,1:s}=(0,j.useState)(n??!0);return(0,v.jsxs)("div",{className:"flex flex-col items-start gap-1",children:[(0,v.jsx)("button",{onClick:()=>s(!r),className:"flex items-center gap-1",children:r?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(O.rIY,{size:14})," Expand all"]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(O.NsE,{size:14})," Collapse all"]})}),(0,v.jsx)("div",{className:"w-full",children:(0,v.jsx)(y,{json:t,jsonViewProps:{collapsed:r,shortenTextAfterLength:0}},String(r))})]})}function T(e){let{name:t,id:n}=e,r=(0,j.useCallback)(()=>{(0,p.v)(n)},[n]);return(0,v.jsxs)("div",{className:"flex items-center gap-2 truncate",children:[(0,v.jsxs)("span",{className:"text-nowrap font-semibold",children:[t,":"]}),(0,v.jsx)("span",{title:n,className:"truncate text-gray-500 dark:text-white",children:n}),(0,v.jsx)(s.Z,{onCopy:r})]})}},67330:function(e,t,n){n.d(t,{aE:function(){return u},bW:function(){return c},jj:function(){return i}});var r=n(82363),s=n(92379),l=n(64925),o=n(95204),a=n(651);function i(e){let{children:t}=e;return(0,a.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-1 text-sm font-semibold text-token-text-tertiary",children:[(0,a.jsx)(o.Z,{className:"icon-2xl"}),t]})})}function c(e){let{onClickRetry:t,children:n}=e;return(0,a.jsxs)(i,{children:[(0,a.jsxs)("div",{children:["Error."," ",(0,a.jsx)("button",{onClick:t,className:"inline font-semibold text-token-text-primary hover:opacity-70",children:"Try again?"})]}),n]})}function u(e){let{resetError:t,componentStack:n,error:o}=e;return(0,s.useEffect)(()=>{r.U.addError(o)},[o]),(0,a.jsxs)(c,{onClickRetry:t,children:[(0,a.jsx)("div",{className:"fixed left-2 top-2",children:(0,a.jsx)(l.WU,{})}),(0,a.jsx)("div",{className:"fixed right-2 top-2",children:(0,a.jsx)(l.z0,{})}),!1]})}},64925:function(e,t,n){n.d(t,{Au:function(){return D},rm:function(){return L},WU:function(){return T},z0:function(){return I}});var r=n(25162),s=n(19841),l=n(24098),o=n.n(l),a=n(92379),i=n(15478),c=n(9033),u=n(30853),d=n(91981),f=n(651);let h={[d.kQ.CONNECTING]:"Connecting",[d.kQ.OPEN]:"Open",[d.kQ.CLOSING]:"Closing",[d.kQ.CLOSED]:"Closed",[d.kQ.UNINSTANTIATED]:"Uninstantiated"};function p(e){let{readyState:t,className:n}=e,{0:r,1:l}=(0,a.useState)(!0);return((0,a.useEffect)(()=>{setTimeout(()=>{l(!0)},1e3)},[]),t!==d.kQ.OPEN&&r)?(0,f.jsx)("div",{className:(0,s.default)("flex items-center gap-2 p-3 text-sm",n),children:(0,f.jsx)(u.u,{label:h[t],sideOffset:0,side:"right",children:(0,f.jsx)("div",{className:(0,s.default)("h-2 w-2 rounded-full",(t===d.kQ.CLOSING||t===d.kQ.CONNECTING)&&"bg-yellow-500",(t===d.kQ.CLOSED||t===d.kQ.UNINSTANTIATED)&&"bg-red-500",r?"block":"hidden")})})}):null}var x=n(98601),m=n(71522),g=n(28146),j=n(87387);function b(e){let{label:t,labelSide:n="right",className:r,onClick:l,children:o}=e;return(0,f.jsx)(u.E,{label:t,sideOffset:0,side:n,disabled:!t,children:(0,f.jsx)("button",{onClick:l,className:(0,s.default)("flex items-center justify-center p-1.5 text-token-text-tertiary hover:text-token-text-primary",r),children:o})})}var O=n(26925),v=n(97193),y=n(10798),k=n(65925),N=n.n(k),w=n(99661);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach(function(t){(0,x.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function P(e,t){return Object.keys(e).reduce((n,r)=>(N()(e[r],t[r])||(n[r]=t[r]),n),{})}function _(){let{setTheme:e,resolvedTheme:t}=(0,w.F)(),n=O.ne.useState(O.ne.selectAgentSettingsOverrides),[r]=(0,y.OR)(),l=P(j.sH,n),o=P(y.Ws,r),a=M(M({},l),o),i=Object.keys(a).length>0;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(b,{label:"Debug (Internal)",onClick:()=>v.vm.toggleDebugModalOpen(),children:(0,f.jsx)(g.reV,{className:"icon-sm-heavy"})}),(0,f.jsx)(b,{label:"Theme (Internal)",onClick:()=>{e("dark"===t?"light":"dark")},children:(0,f.jsxs)(m.ZP,{children:["dark"===t&&(0,f.jsx)(g.NWY,{className:"icon-md-heavy"}),"light"===t&&(0,f.jsx)(g.kLh,{className:"icon-md-heavy"})]})}),(0,f.jsx)(b,{label:i?["Config (Internal) - Changes:",Object.keys(a).join(", ")].join("\n"):"Config (Internal)",onClick:()=>v.vm.toggleInternalSettingsModalOpen(),children:(0,f.jsx)(g.KAl,{className:(0,s.default)(i?"icon-lg-heavy":"icon-md-heavy",{"text-red-500":i})})})]})}var C=n(91111),E=n(51837);function T(e){let{hideReadyState:t=!1,onResultsPage:n=!1,children:l}=e,{readyState:a,resetSearch:i}=(0,C.A)(),c=(0,E.L)();return(0,f.jsxs)("div",{className:(0,s.default)("hidden w-20 shrink-0 flex-col items-center justify-between border-r py-6 sm:flex",n?"relative border-token-border-light":"absolute bottom-0 left-0 top-0 border-transparent"),children:[(0,f.jsxs)(o(),{onClick:()=>i(),href:"/search",className:"text-token-text-primary hover:text-token-text-secondary",title:"Go to SearchGPT",children:[(0,f.jsx)(r.nI,{className:"h-8 w-8"}),c&&!t&&(0,f.jsx)(p,{readyState:a})]}),c&&(0,f.jsx)("div",{className:"flex flex-col items-center gap-2",children:(0,f.jsx)(_,{})}),(0,f.jsx)("div",{className:"absolute top-1/2 -translate-y-1/2",children:l})]})}function I(){return(0,f.jsx)("div",{className:"absolute right-5 top-5 hidden sm:block",children:(0,f.jsx)(c.Kd,{className:"h-8 w-8"})})}function D(){return(0,f.jsx)(W,{$side:"left",children:(0,f.jsx)(r.nI,{className:"h-8 w-8"})})}function L(e){let{className:t}=e;return(0,f.jsx)(W,{$side:"right",className:`${t}`,children:(0,f.jsx)(c.v_,{className:"h-8 w-8"})})}let W=i.Z.div`absolute ${e=>"left"===e.$side?"left-5":"right-5"} bottom-5 top-5 z-10 w-10 flex-col justify-between items-center hidden sm:flex`},91111:function(e,t,n){n.d(t,{A:function(){return i},c:function(){return a}});var r=n(91530),s=n.n(r),l=n(92379),o=n(91981);let a=(0,l.createContext)({waitingForNewTurn:!1,sessionUser:null,userMetadata:{cf_connecting_ip:null,ip_city:null,time_zone:null,user_country:null,user_locale:null,user_region:null,user_region_code:null,latitude:null,longitude:null,locationAccuracy:null},submitFollowup:()=>Promise.resolve(),submitSearch:()=>Promise.resolve(),retrySearch:()=>Promise.resolve(),resetSearch:s(),prefetch:s(),readyState:o.kQ.UNINSTANTIATED}),i=()=>(0,l.useContext)(a)},44425:function(e,t,n){n.d(t,{_A:function(){return r}});let r="https://openai.com/index/searchgpt-prototype/"},94206:function(e,t,n){n.d(t,{O$:function(){return r},jF:function(){return l},v3:function(){return s}});class r extends Error{constructor(e){super(e),this.name="WebsocketConnectError"}}class s extends Error{constructor(e){super(e),this.name="TurnError"}}class l extends Error{constructor(e){super(e),this.name="TurnDeltaMessageError"}}},97193:function(e,t,n){n.d(t,{KP:function(){return c},W6:function(){return d},bM:function(){return f},vm:function(){return h},y6:function(){return i}});var r,s,l=n(98601),o=n(68810);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}let i=((r={}).Turn="turn",r.ImagesTab="images_tab",r),c=((s={})[s.FromLeft=-1]="FromLeft",s[s.FromRight=1]="FromRight",s),u={isInternalSettingsModalOpen:!1,isSettingsModalOpen:!1,isDebugModalOpen:!1,isUsageNuxModalOpen:!1,isWelcomePageOpen:!1,focusedImage:void 0},d=(0,o.Ue)()(()=>(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){(0,l.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e})({},u)),f={isInternalSettingsModalOpen:e=>e.isInternalSettingsModalOpen,isSettingsModalOpen:e=>e.isSettingsModalOpen,isDebugModalOpen:e=>e.isDebugModalOpen,isUsageNuxModalOpen:e=>e.isUsageNuxModalOpen,isWelcomePageOpen:e=>e.isWelcomePageOpen,getFocusedImage:e=>e.focusedImage,isModalOpen:e=>f.isInternalSettingsModalOpen(e)||f.isSettingsModalOpen(e)||f.isDebugModalOpen(e)||f.isUsageNuxModalOpen(e)||f.isWelcomePageOpen(e)||null!=f.getFocusedImage(e)},h={toggleInternalSettingsModalOpen(){d.setState(e=>({isInternalSettingsModalOpen:!e.isInternalSettingsModalOpen}))},setInternalSettingsModalOpen(e){d.setState({isInternalSettingsModalOpen:e})},toggleSettingsModalOpen(){d.setState(e=>({isSettingsModalOpen:!e.isSettingsModalOpen}))},setSettingsModalOpen(e){d.setState({isSettingsModalOpen:e})},toggleDebugModalOpen(){d.setState(e=>({isDebugModalOpen:!e.isDebugModalOpen}))},setDebugModalOpen(e){d.setState({isDebugModalOpen:e})},setFocusedImage(e){d.setState({focusedImage:e})},setUsageNuxModalOpen(e){d.setState({isUsageNuxModalOpen:e})},setWelcomePageOpen(e){d.setState({isWelcomePageOpen:e})}}},12381:function(e,t,n){n.d(t,{HV:function(){return g},LW:function(){return y},P3:function(){return k},m0:function(){return m},nn:function(){return b}});var r=n(98601),s=n(95267),l=n(15539),o=n(94206),a=n(82363),i=n(18939),c=n.n(i),u=n(89678),d=n.n(u),f=n(68810),h=n(69767);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function m(e){return b(t=>t.thread?.turns.map(t=>e.reduce((e,n)=>(e[n]=t[n],e),{}))??[],(e,t)=>{if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!(0,l.X)(e[n],t[n]))return!1;return!0})}function g(){return b(e=>c()(e.thread?.turns.flatMap(e=>e.model_response?.citations)),l.X)}let j={thread:null,error:void 0},b=(0,f.Ue)((0,s.n)(()=>x({},j))),O=d()(()=>{a.U.addError(new o.v3("got updateTurn with no current thread"))},1e3),v=d()(e=>{a.U.addError(new o.v3("turn not found"),{turnIndex:e})},1e3),y={threadId:e=>e.thread?.id??null,turns:e=>e.thread?.turns??[],turnCitations:e=>t=>t.thread?.turns[e].model_response?.citations??[],hasResponse:e=>(0,h.VP)(e.thread?.turns[0]),firstTurn:e=>null!=e.thread?e.thread.turns[0]:void 0,lastTurn:e=>null!=e.thread?e.thread.turns[e.thread.turns.length-1]:void 0,numTurns:e=>e.thread?.turns.length??0,isLastTurnStreaming:e=>{let t=null!=e.thread?e.thread.turns[e.thread.turns.length-1]:void 0;return null!=t&&(0,h.A7)(t)},hasModelResponseText:e=>{let t=e.thread?.turns[0];return t?.model_response?.text!=null},hasFirstTurnError:e=>{let t=e.thread?.turns[0];return!!t&&(0,h.jo)(t)},hasTurnError:e=>e.thread?.turns.some(h.jo)??!1,threadError:e=>e.error,__deprecated_sportsWidget:e=>{let t=e.thread?.turns[0];return t?.sports_widget??null}},k={appendTurn(e,t,n){b.setState(r=>{r.thread?.id!==e&&(n?.(e),r.thread={id:e,turns:[]}),r.thread.turns.push(t)})},updateTurn(e,t){b.setState(n=>{let r=n.thread;if(!r){O();return}let s=r.turns[e];if(!s){v(e);return}t(s)})},clearThread(){b.setState(()=>x({},j))},setError(e){b.setState(t=>{t.error=e})},setThread(e,t){b.setState(n=>{n.thread={id:e,turns:t}})}}},69767:function(e,t,n){function r(e){return!!e&&e.model_response?.text!=null&&e.model_response.text.length>0}function s(e){return"fatal_system_error"===e.execution_status}function l(e){return"in_progress"===e.execution_status||null===e.execution_status}n.d(t,{A7:function(){return l},VP:function(){return r},jo:function(){return s}})},51837:function(e,t,n){n.d(t,{L:function(){return s}});var r=n(45120);function s(){return r.fW("2000076788")?.value}},27313:function(e,t,n){n.d(t,{Y:function(){return a},v:function(){return i}});var r=n(84760),s=n(92379),l=n(81014),o=n(12381);function a(e){let{threadId:t,threadUserId:n,refetchOnMount:s}=e;return(0,r.a)({queryKey:["thread",t,n],queryFn:async()=>{if(!t)return{thread:null,turns:null};let e=await (0,l.K8)({threadId:t,threadUserId:n}),r=e.turns;return{thread:e,turns:r}},enabled:!!t,refetchOnMount:s})}function i(e){let{threadId:t,threadUserId:n}=e,r=a({threadId:t,threadUserId:n}),l=r.data;return(0,s.useEffect)(()=>{t&&o.P3.setThread(t,l?.turns??[])},[t,l]),{query:r.data?.turns[0]?.user_query,refetch:r.refetch,isLoading:r.isLoading,isError:r.isError}}},78571:function(e,t,n){n.d(t,{_:function(){return o}});var r=n(37088),s=n(92379),l=n(52125);let o=(0,s.forwardRef)((e,t)=>(0,s.createElement)(l.WV.label,(0,r.Z)({},e,{ref:t,onMouseDown:t=>{var n;null===(n=e.onMouseDown)||void 0===n||n.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault()}})))},15539:function(e,t,n){n.d(t,{X:function(){return r}});function r(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(let[n,r]of e)if(!Object.is(r,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}let n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}}}]);
//# sourceMappingURL=1502.6892e9620b1e43e0.js.map