"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9782],{9033:function(e,t,n){n.d(t,{Kd:function(){return j},v_:function(){return b}});var s=n(59725),r=n(98095),l=n(11433),a=n(15913),i=n(38482),o=n.n(i),c=n(34977),d=n(44425),u=n(26925),x=n(97193),h=n(51837),f=n(651);let m=o()(()=>Promise.all([n.e(8682),n.e(6481)]).then(n.bind(n,9760)).then(e=>e.AvatarButtons),{ssr:!1,loadableGenerated:{webpack:()=>[9760]}}),p=r.Z.Item;function g(){let e=u.ne.useStore();return(0,a.e2)()?(0,f.jsx)(p,{onClick:()=>{e.setState({shouldShowAddToHomePopover:!0})},icon:(0,f.jsx)(l.IAe,{className:"icon-md-heavy text-token-text-primary"}),children:"Add to home screen"}):null}function j(e){let{className:t,iconSize:n,children:s}=e,a=(0,h.L)(),i=(0,c.useRouter)();return(0,f.jsxs)(r.Z.Root,{modal:!1,children:[(0,f.jsx)(O,{className:t,iconSize:n,children:s}),(0,f.jsx)(r.Z.Portal,{children:(0,f.jsxs)(r.Z.Content,{collisionPadding:10,children:[(0,f.jsx)(p,{onClick:()=>x.vm.toggleSettingsModalOpen(),icon:(0,f.jsx)(l.SWE,{className:"icon-md-heavy text-token-text-primary"}),children:"Settings"}),(0,f.jsx)(p,{onClick:()=>window.open(d._A,"_blank"),icon:(0,f.jsx)(l.Jmo,{className:"icon-md-heavy text-token-text-primary"}),children:"About SearchGPT"}),(0,f.jsx)(p,{onClick:()=>window.open("https://chatgpt.com","_blank"),icon:(0,f.jsx)(l.Pfi,{className:"icon-md-heavy text-token-text-primary"}),children:"Open ChatGPT"}),(0,f.jsx)(g,{}),(0,f.jsx)(r.Z.Separator,{}),(0,f.jsx)(p,{onClick:()=>i.push("/auth/logout",void 0,{shallow:!0}),icon:(0,f.jsx)(l.iz5,{className:"icon-md-heavy text-token-text-primary"}),children:"Log out"}),a&&(0,f.jsx)(m,{})]})})]})}function b(e){let{className:t,iconSize:n}=e,s=(0,c.useRouter)();return(0,f.jsxs)(r.Z.Root,{modal:!1,children:[(0,f.jsx)(O,{className:t,iconSize:n}),(0,f.jsx)(r.Z.Portal,{children:(0,f.jsx)(r.Z.Content,{collisionPadding:10,children:(0,f.jsx)(p,{onClick:()=>s.push("/auth/logout",void 0,{shallow:!0}),icon:(0,f.jsx)(l.iz5,{className:"icon-md-heavy text-token-text-primary"}),children:"Log out"})})})]})}function O(e){let{className:t,iconSize:n,children:l}=e;return(0,f.jsx)(r.Z.Trigger,{className:"group border-0 !bg-transparent p-0",children:(0,f.jsx)("div",{className:"rounded-full",children:l??(0,f.jsx)(s.zf,{iconSize:n,className:t})})})}},19042:function(e,t,n){n.r(t),n.d(t,{DebugJsonViewer:function(){return D},DebugModal:function(){return N},DebugModalContents:function(){return _}});var s=n(11550),r=n(39358),l=n(30115),a=n(11433),i=n(24434),o=n(67330),c=n(91111),d=n(97193),u=n(27313),x=n(5132),h=n(30757),f=n(79746),m=n(19841),p=n(38482),g=n.n(p),j=n(92379),b=n(15478),O=n(19229),v=n(651);let y=g()(()=>Promise.all([n.e(3904),n.e(6476)]).then(n.bind(n,16476)),{ssr:!1,loadableGenerated:{webpack:()=>[16476]}});function N(e){let{threadId:t,threadUserId:n}=e;return(0,d.W6)(d.bM.isDebugModalOpen)&&(0,v.jsx)(i.Z,{isOpen:!0,onClose:()=>d.vm.toggleDebugModalOpen(),type:"success",size:"fullscreen",noPadding:!0,rootClassName:"z-50",children:(0,v.jsx)(_,{threadId:t,threadUserId:n,onClose:()=>d.vm.toggleDebugModalOpen()})})}let k=(e,t)=>{let n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),s=window.URL.createObjectURL(n),r=document.createElement("a");r.href=s,r.download=e,r.click(),window.URL.revokeObjectURL(s)},w="<|im_start|>",S="<|im_sep|>",M="<|im_end|>";function C(e){let{prompt:t}=e,n=[],s=0;for(;;){let e=t.indexOf(w,s);if(-1===e)break;let r=t.indexOf(S,e);if(-1===r)break;let l=t.indexOf(M,r),a=t.indexOf("<|fim_suffix|>",r);if(-1!==a&&(-1===l||a<l)&&(l=a),-1===l)break;let i=t.substring(e+w.length,r),o=t.substring(r+S.length,l);n.push((0,v.jsxs)("div",{children:[(0,v.jsxs)("span",{className:"font-semibold",children:["[",i,"]"]})," ",o]},e)),s=l+M.length}return n}let P=b.Z.div`mb-[-5px] px-2 pb-1 font-semibold uppercase border-b-2 ${e=>{let{$isSelected:t}=e;return t?"border-black dark:border-white":"border-transparent"}}`;function _(e){let{threadId:t,threadUserId:n,message:r,onClose:i}=e,{sessionUser:d}=(0,c.A)(),{0:f,1:p}=(0,j.useState)(r?"message":"json"),{data:g,isLoading:b,refetch:O}=(0,u.Y)({threadId:t,threadUserId:n,refetchOnMount:"always"}),y=g?.thread;if((0,j.useEffect)(()=>{p(r?"message":y?.turns.length?`turn${y?.turns.length-1}`:"thread")},[y?.turns.length,r]),!b&&!y&&!r)return(0,v.jsxs)(o.bW,{onClickRetry:()=>O(),children:["Failed to load."," "]});if(b)return(0,v.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:"Loading..."});let N=y?.turns,w=y?.turns[y.turns.length-1]?.artifacts__?.model_snapshots?.default_id,S=n&&t?(0,x.t5)(n,t):null;return(0,v.jsx)("div",{className:"flex flex-col gap-2 break-words font-mono text-xs",children:(0,v.jsxs)(h.fC,{orientation:"vertical",value:f,onValueChange:e=>p(e),children:[(0,v.jsxs)(h.aV,{className:"flex items-center justify-center gap-2 px-4 py-1",children:[r&&(0,v.jsx)(h.xz,{value:"message",children:(0,v.jsx)(P,{$isSelected:"message"===f,children:"Message"})},"message"),y&&(0,v.jsx)(h.xz,{value:"thread",children:(0,v.jsx)(P,{$isSelected:"thread"===f,children:"Thread"})},"thread"),N?.map((e,t)=>v.jsxs(j.Fragment,{children:[v.jsx(h.xz,{value:`turn${t}`,children:v.jsxs(P,{$isSelected:f===`turn${t}`,children:["Turn[",t,"]"]})},t),e.artifacts__?.debug_ddtrace_urls?.map(e=>v.jsx(P,{$isSelected:!1,children:v.jsxs("a",{target:"_blank",href:e,className:"text-nowrap",children:["Trace[",t,"] â†—"]})},e))]},t)),(0,v.jsx)("div",{className:"flex-grow"}),w&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(I,{name:"Model",id:w})," ",(0,v.jsx)("span",{className:"text-gray-500 dark:text-white",children:"|"})]}),d&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(I,{name:"User ID",id:d.id})," ",(0,v.jsx)("span",{className:"text-gray-500 dark:text-white",children:"|"})]}),S&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(I,{name:"Permalink",id:S}),(0,v.jsx)("span",{className:"text-gray-500 dark:text-white",children:"|"})]}),y&&(0,v.jsxs)(s.z,{size:"small",color:"secondary",onClick:()=>k("thread.json",y),children:[(0,v.jsx)(a._8t,{className:"icon-sm"})," thread.json"]}),(0,v.jsx)(l.P,{onClick:i})]}),N?.map((e,t)=>v.jsxs(h.VY,{value:`turn${t}`,className:"max-h-[calc(100vh-46px)] w-full overflow-y-scroll scroll-smooth",children:[v.jsxs("div",{className:m.default("flex flex-col gap-1 p-6",e.index%2==0&&"bg-token-main-surface-tertiary"),children:[v.jsx(C,{prompt:e.artifacts__?.debug_info?.main_model_response?.prompt_string??""}),v.jsxs("div",{children:[v.jsx("span",{className:"font-semibold",children:"[assistant]"})," ",e.model_response?.text]})]})," "]},t)),y&&(0,v.jsx)(h.VY,{value:"thread",className:"max-h-[calc(100vh-46px)] w-full overflow-y-scroll scroll-smooth p-6",children:(0,v.jsx)(D,{data:y,collapsed:4})}),r&&(0,v.jsx)(h.VY,{value:"message",className:"max-h-[calc(100vh-46px)] w-full overflow-y-scroll scroll-smooth p-6",children:(0,v.jsx)(D,{data:r,collapsed:4})})]},y?.turns.length??"message")})}function D(e){let{data:t,collapsed:n}=e,{0:s,1:r}=(0,j.useState)(n??!0);return(0,v.jsxs)("div",{className:"flex flex-col items-start gap-1",children:[(0,v.jsx)("button",{onClick:()=>r(!s),className:"flex items-center gap-1",children:s?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(O.rIY,{size:14})," Expand all"]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(O.NsE,{size:14})," Collapse all"]})}),(0,v.jsx)("div",{className:"w-full",children:(0,v.jsx)(y,{json:t,jsonViewProps:{collapsed:s,shortenTextAfterLength:0}},String(s))})]})}function I(e){let{name:t,id:n}=e,s=(0,j.useCallback)(()=>{(0,f.v)(n)},[n]);return(0,v.jsxs)("div",{className:"flex items-center gap-2 truncate",children:[(0,v.jsxs)("span",{className:"text-nowrap font-semibold",children:[t,":"]}),(0,v.jsx)("span",{title:n,className:"truncate text-gray-500 dark:text-white",children:n}),(0,v.jsx)(r.Z,{onCopy:s})]})}},67330:function(e,t,n){n.d(t,{aE:function(){return d},bW:function(){return c},jj:function(){return o}});var s=n(82363),r=n(92379),l=n(64925),a=n(95204),i=n(651);function o(e){let{children:t}=e;return(0,i.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,i.jsxs)("div",{className:"flex flex-col items-center gap-1 text-sm font-semibold text-token-text-tertiary",children:[(0,i.jsx)(a.Z,{className:"icon-2xl"}),t]})})}function c(e){let{onClickRetry:t,children:n}=e;return(0,i.jsxs)(o,{children:[(0,i.jsxs)("div",{children:["Error."," ",(0,i.jsx)("button",{onClick:t,className:"inline font-semibold text-token-text-primary hover:opacity-70",children:"Try again?"})]}),n]})}function d(e){let{resetError:t,componentStack:n,error:a}=e;return(0,r.useEffect)(()=>{s.U.addError(a)},[a]),(0,i.jsxs)(c,{onClickRetry:t,children:[(0,i.jsx)("div",{className:"fixed left-2 top-2",children:(0,i.jsx)(l.WU,{})}),(0,i.jsx)("div",{className:"fixed right-2 top-2",children:(0,i.jsx)(l.z0,{})}),!1]})}},64925:function(e,t,n){n.d(t,{Au:function(){return T},rm:function(){return A},WU:function(){return I},z0:function(){return E}});var s=n(25162),r=n(19841),l=n(24098),a=n.n(l),i=n(92379),o=n(15478),c=n(9033),d=n(30853),u=n(91981),x=n(651);let h={[u.kQ.CONNECTING]:"Connecting",[u.kQ.OPEN]:"Open",[u.kQ.CLOSING]:"Closing",[u.kQ.CLOSED]:"Closed",[u.kQ.UNINSTANTIATED]:"Uninstantiated"};function f(e){let{readyState:t,className:n}=e,{0:s,1:l}=(0,i.useState)(!0);return((0,i.useEffect)(()=>{setTimeout(()=>{l(!0)},1e3)},[]),t!==u.kQ.OPEN&&s)?(0,x.jsx)("div",{className:(0,r.default)("flex items-center gap-2 p-3 text-sm",n),children:(0,x.jsx)(d.u,{label:h[t],sideOffset:0,side:"right",children:(0,x.jsx)("div",{className:(0,r.default)("h-2 w-2 rounded-full",(t===u.kQ.CLOSING||t===u.kQ.CONNECTING)&&"bg-yellow-500",(t===u.kQ.CLOSED||t===u.kQ.UNINSTANTIATED)&&"bg-red-500",s?"block":"hidden")})})}):null}var m=n(98601),p=n(71522),g=n(11433),j=n(87387);function b(e){let{label:t,labelSide:n="right",className:s,onClick:l,children:a}=e;return(0,x.jsx)(d.E,{label:t,sideOffset:0,side:n,disabled:!t,children:(0,x.jsx)("button",{onClick:l,className:(0,r.default)("flex items-center justify-center p-1.5 text-token-text-tertiary hover:text-token-text-primary",s),children:a})})}var O=n(26925),v=n(97193),y=n(10798),N=n(65925),k=n.n(N),w=n(99661);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach(function(t){(0,m.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function C(e,t){return Object.keys(e).reduce((n,s)=>(k()(e[s],t[s])||(n[s]=t[s]),n),{})}function P(){let{setTheme:e,resolvedTheme:t}=(0,w.F)(),n=O.ne.useState(O.ne.selectAgentSettingsOverrides),[s]=(0,y.OR)(),l=C(j.sH,n),a=C(y.Ws,s),i=M(M({},l),a),o=Object.keys(i).length>0;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(b,{label:"Debug (Internal)",onClick:()=>v.vm.toggleDebugModalOpen(),children:(0,x.jsx)(g.reV,{className:"icon-sm-heavy"})}),(0,x.jsx)(b,{label:"Theme (Internal)",onClick:()=>{e("dark"===t?"light":"dark")},children:(0,x.jsxs)(p.ZP,{children:["dark"===t&&(0,x.jsx)(g.NWY,{className:"icon-md-heavy"}),"light"===t&&(0,x.jsx)(g.kLh,{className:"icon-md-heavy"})]})}),(0,x.jsx)(b,{label:o?["Config (Internal) - Changes:",Object.keys(i).join(", ")].join("\n"):"Config (Internal)",onClick:()=>v.vm.toggleInternalSettingsModalOpen(),children:(0,x.jsx)(g.KAl,{className:(0,r.default)(o?"icon-lg-heavy":"icon-md-heavy",{"text-red-500":o})})})]})}var _=n(91111),D=n(51837);function I(e){let{hideReadyState:t=!1,onResultsPage:n=!1,children:l}=e,{readyState:i,resetSearch:o}=(0,_.A)(),c=(0,D.L)();return(0,x.jsxs)("div",{className:(0,r.default)("hidden w-20 shrink-0 flex-col items-center justify-between border-r py-6 sm:flex",n?"relative border-token-border-light":"absolute bottom-0 left-0 top-0 border-transparent"),children:[(0,x.jsxs)(a(),{onClick:()=>o(),href:"/search",className:"text-token-text-primary hover:text-token-text-secondary",title:"Go to SearchGPT",children:[(0,x.jsx)(s.nI,{className:"h-8 w-8"}),c&&!t&&(0,x.jsx)(f,{readyState:i})]}),c&&(0,x.jsx)("div",{className:"flex flex-col items-center gap-2",children:(0,x.jsx)(P,{})}),(0,x.jsx)("div",{className:"absolute top-1/2 -translate-y-1/2",children:l})]})}function E(){return(0,x.jsx)("div",{className:"absolute right-5 top-5 hidden sm:block",children:(0,x.jsx)(c.Kd,{className:"h-8 w-8"})})}function T(){return(0,x.jsx)(U,{$side:"left",children:(0,x.jsx)(s.nI,{className:"h-8 w-8"})})}function A(e){let{className:t}=e;return(0,x.jsx)(U,{$side:"right",className:`${t}`,children:(0,x.jsx)(c.v_,{className:"h-8 w-8"})})}let U=o.Z.div`absolute ${e=>"left"===e.$side?"left-5":"right-5"} bottom-5 top-5 z-10 w-10 flex-col justify-between items-center hidden sm:flex`},91111:function(e,t,n){n.d(t,{A:function(){return o},c:function(){return i}});var s=n(91530),r=n.n(s),l=n(92379),a=n(91981);let i=(0,l.createContext)({waitingForNewTurn:!1,sessionUser:null,userMetadata:{cf_connecting_ip:null,ip_city:null,time_zone:null,user_country:null,user_locale:null,user_region:null,user_region_code:null,latitude:null,longitude:null,locationAccuracy:null},submitFollowup:()=>Promise.resolve(),submitSearch:()=>Promise.resolve(),retrySearch:()=>Promise.resolve(),resetSearch:r(),prefetch:r(),readyState:a.kQ.UNINSTANTIATED}),o=()=>(0,l.useContext)(i)},44425:function(e,t,n){n.d(t,{_A:function(){return s}});let s="https://openai.com/index/searchgpt-prototype/"},97193:function(e,t,n){n.d(t,{W6:function(){return i},bM:function(){return o},vm:function(){return c}});var s=n(98601),r=n(68810);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}let a={isInternalSettingsModalOpen:!1,isSettingsModalOpen:!1,isDebugModalOpen:!1,isUsageNuxModalOpen:!1,isWelcomePageOpen:!1},i=(0,r.Ue)()(()=>(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){(0,s.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e})({},a)),o={isInternalSettingsModalOpen:e=>e.isInternalSettingsModalOpen,isSettingsModalOpen:e=>e.isSettingsModalOpen,isDebugModalOpen:e=>e.isDebugModalOpen,isUsageNuxModalOpen:e=>e.isUsageNuxModalOpen,isWelcomePageOpen:e=>e.isWelcomePageOpen,isModalOpen:e=>o.isInternalSettingsModalOpen(e)||o.isSettingsModalOpen(e)||o.isDebugModalOpen(e)||o.isUsageNuxModalOpen(e)||o.isWelcomePageOpen(e)},c={toggleInternalSettingsModalOpen(){i.setState(e=>({isInternalSettingsModalOpen:!e.isInternalSettingsModalOpen}))},setInternalSettingsModalOpen(e){i.setState({isInternalSettingsModalOpen:e})},toggleSettingsModalOpen(){i.setState(e=>({isSettingsModalOpen:!e.isSettingsModalOpen}))},setSettingsModalOpen(e){i.setState({isSettingsModalOpen:e})},toggleDebugModalOpen(){i.setState(e=>({isDebugModalOpen:!e.isDebugModalOpen}))},setDebugModalOpen(e){i.setState({isDebugModalOpen:e})},setUsageNuxModalOpen(e){i.setState({isUsageNuxModalOpen:e})},setWelcomePageOpen(e){i.setState({isWelcomePageOpen:e})}}},51837:function(e,t,n){n.d(t,{L:function(){return r}});var s=n(45120);function r(){return s.fW("2000076788")?.value}},27313:function(e,t,n){n.d(t,{Y:function(){return i},v:function(){return o}});var s=n(84760),r=n(92379),l=n(81014),a=n(12381);function i(e){let{threadId:t,threadUserId:n,refetchOnMount:r}=e;return(0,s.a)({queryKey:["thread",t,n],queryFn:async()=>{if(!t)return{thread:null,turns:null};let e=await (0,l.K8)({threadId:t,threadUserId:n}),s=e.turns;return{thread:e,turns:s}},enabled:!!t,refetchOnMount:r})}function o(e){let{threadId:t,threadUserId:n}=e,s=i({threadId:t,threadUserId:n}),l=s.data;return(0,r.useEffect)(()=>{t&&a.P3.setThread(t,l?.turns??[])},[t,l]),{query:s.data?.turns[0]?.user_query,refetch:s.refetch,isLoading:s.isLoading,isError:s.isError}}},78571:function(e,t,n){n.d(t,{_:function(){return a}});var s=n(37088),r=n(92379),l=n(52125);let a=(0,r.forwardRef)((e,t)=>(0,r.createElement)(l.WV.label,(0,s.Z)({},e,{ref:t,onMouseDown:t=>{var n;null===(n=e.onMouseDown)||void 0===n||n.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault()}})))}}]);
//# sourceMappingURL=9782.2b4f49ca81293b95.js.map