"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6013],{7937:function(e,t,r){function n(e){return null!=e}r.d(t,{BB:function(){return d},He:function(){return c},PO:function(){return l},Ry:function(){return g},Um:function(){return i},WU:function(){return h},aS:function(){return u},lm:function(){return n},r3:function(){return o},sw:function(){return p}});let o=(e,t)=>e.includes(t),a=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(null==e)return r;let n=Array.isArray(e)?e:[e];return t?n.map(t):n},l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return r=>a(r,e,t)},s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return"object"!=typeof e||null==e||Array.isArray(e)?t:e},i=(e,t)=>{let r=s(e),n={};for(let e in t)n[e]=t[e](null==r?void 0:r[e]);return n},u=e=>t=>i(t,e),d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"object"==typeof e||null==e?t:String(e)},c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if("object"==typeof e||null==e)return t;let r=Number(e);return isNaN(r)?t:r},p=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("boolean"==typeof e)return e;if("number"==typeof e){if(0===e)return!1;if(1===e)return!0}if("string"==typeof e){let t=e.toLowerCase();if("false"===t)return!1;if("true"===t)return!0}return t},h=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t[0];return o(t,e)?e:r},g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e[0];return r=>h(r,e,t)}},16779:function(e,t,r){r.d(t,{Z:function(){return i}});var n=r(77420),o=r(19841),a=r(92379),l=r(77748),s=r(651);function i(e){let{onChange:t,enabled:r,label:i,disabled:u,withLockIcon:d=!1,lockIconOverride:c=null,size:p="normal",id:h}=e,g=(0,a.useCallback)(()=>{t(!r)},[r,t]);return(0,s.jsx)(n.fC,{id:h,checked:r,disabled:u,onCheckedChange:g,"aria-label":i,className:(0,o.default)("focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-token-text-secondary focus-visible:ring-offset-2 focus-visible:radix-state-checked:ring-black focus-visible:dark:ring-token-main-surface-primary focus-visible:dark:radix-state-checked:ring-green-600",u?"cursor-not-allowed opacity-50":"cursor-pointer","bg-gray-200 radix-state-checked:bg-black dark:border dark:border-token-border-medium dark:bg-transparent","relative shrink-0 rounded-full dark:radix-state-checked:border-green-600 dark:radix-state-checked:bg-green-600","normal"===p?"h-[20px] w-[32px]":"h-[19px] w-[30px]"),children:(0,s.jsx)(n.bU,{className:(0,o.default)("flex items-center justify-center rounded-full","transition-transform duration-100 will-change-transform ltr:translate-x-0.5 rtl:-translate-x-0.5","bg-white","normal"===p?"h-[16px] w-[16px] ltr:radix-state-checked:translate-x-[14px] rtl:radix-state-checked:translate-x-[-14px]":"h-[15px] w-[15px] ltr:radix-state-checked:translate-x-[13px] rtl:radix-state-checked:translate-x-[-13px]"),children:d?c||(0,s.jsx)(l.oVl,{className:"icon-xs dark:text-black"}):null})})}},59578:function(e,t,r){r.d(t,{wm:function(){return K},Xu:function(){return z}});var n=r(98601),o=r(55963),a=r(93951),l=r(41987),s=r(10481),i=r(22433),u=r(10449),d=r(42420),c=r(56032),p=r(84760),h=r(99976),g=r(61619),m=r(88667),f=r(19841),v=r(21389),b=r(88600),x=r(65925),T=r.n(x),y=r(92379),C=r(75172),M=r(62984),j=r(68306),w=r(2721),O=r(31438),S=r(15913),I=r(97537),k=r(16779),_=r(60682),P=r(91530),N=r.n(P),D=r(59144),E=r(24434),L=r(651);function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let R=_.pm.FirstTimeUsingUserContext;var Z=e=>{let{onClose:t}=e,r=(0,C.Z)(),{markAsViewed:n}=(0,_.qg)(R),o=(0,y.useCallback)(()=>{n(),t()},[n,t]);return(0,L.jsxs)(E.Z,{isOpen:!0,onClose:N(),size:"custom",className:"max-w-xl",type:"success",title:r.formatMessage(F.title),primaryButton:(0,L.jsx)(D.Z.Button,{onClick:o,title:r.formatMessage(F.ok),color:"primary"}),children:[(0,L.jsxs)("div",{className:"mb-6 flex flex-col gap-3",children:[(0,L.jsx)("p",{children:(0,L.jsx)(M.Z,U({},F.body1))}),(0,L.jsx)("p",{children:(0,L.jsx)(M.Z,U({},F.body2))})]}),(0,L.jsx)("div",{className:"flex flex-col gap-3 text-sm text-token-text-tertiary",children:(0,L.jsx)("p",{children:(0,L.jsx)(M.Z,U(U({},F.legal1),{},{values:{article:e=>(0,L.jsx)("a",{href:s.i,target:"_blank",className:"underline",rel:"noopener noreferrer",children:e})}}))})})]})};let F=(0,j.vU)({title:{id:"UserContextFirstTimeModal.title",defaultMessage:"Introducing Custom Instructions"},body1:{id:"UserContextFirstTimeModal.body1",defaultMessage:"Customize your interactions with ChatGPT by providing specific details and guidelines for your chats."},body2:{id:"UserContextFirstTimeModal.body2",defaultMessage:"Whenever you edit your custom instructions, they'll take effect in all new chats you create. Existing chats won't be updated."},legal1:{id:"UserContextFirstTimeModal.legal1",defaultMessage:"Your instructions will be used to make our models better unless you've opted out and may be shared with any plugins you've enabled. Visit our <article>Help Center</article> to learn more."},ok:{id:"UserContextFirstTimeModal.ok",defaultMessage:"OK"}});var B=r(30853),G=r(77748),H=r(24740);function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function z(e){let t=(0,C.Z)();return(0,p.a)({queryKey:["userContext"],queryFn:()=>w.Z.getUserSystemMessage().catch(e=>{throw H.m.danger(t.formatMessage({id:"userContextModal.getCustomInstructionsError",defaultMessage:"Failed to get your settings"})),e}),enabled:e,select:e=>{var t,r,n,o;return{aboutUserMessage:null!==(t=null==e?void 0:e.about_user_message)&&void 0!==t?t:"",aboutModelMessage:null!==(r=null==e?void 0:e.about_model_message)&&void 0!==r?r:"",disabledTools:null!==(n=null==e?void 0:e.disabled_tools)&&void 0!==n?n:[],enabled:null===(o=null==e?void 0:e.enabled)||void 0===o||o}}})}let V={aboutUserMessage:void 0,aboutModelMessage:void 0,disabledTools:void 0,enabled:void 0};function K(e){var t,r,n;let{isModalOpen:o}=e,l=(0,C.Z)(),i=function(){let{eligible:e}=(0,_.qg)(R);return e}(),{0:u,1:p}=(0,y.useState)(!1),{isLoading:f,data:v}=z(o),{aboutUserMessage:b="",aboutModelMessage:x="",disabledTools:j=[],enabled:S}=null!=v?v:{},{0:P,1:N}=(0,y.useState)(V),{aboutUserMessage:A,aboutModelMessage:U,disabledTools:F,enabled:B}=P,G=null!=B?B:!!S,{0:W,1:K}=(0,y.useState)(null),et=(0,y.useCallback)(()=>{O.vm.closeModal(O.B.UserContext),N(V),K(null)},[]),{isPending:en,mutate:eo}=function(e){let{onSuccess:t,onError:r}=e,n=(0,d.NL)();return(0,c.D)({mutationFn:e=>{let{userContext:t}=e;return w.Z.createOrUpdateUserSystemMessage(t)},onSettled:(e,t)=>{let r=["userContext"];null===e||t?n.invalidateQueries({queryKey:r}):n.setQueryData(r,e)},onSuccess:t,onError:r})}({onSuccess:()=>{et()},onError:e=>{var t,r,n;return(null===(t=e.response)||void 0===t?void 0:t.reason)==="content_policy"&&null!==(r=e.response)&&void 0!==r&&r.field?K(null===(n=e.response)||void 0===n?void 0:n.field):H.m.danger(l.formatMessage({id:"userContextModal.saveError",defaultMessage:"Failed to update settings"})),e}}),{0:ea,1:el}=(0,y.useState)(!1),es=(0,a.t)(),ei=null===(t=null==es?void 0:es.isFree())||void 0===t||t,eu=J(null!=A?A:"")||J(null!=U?U:""),ed=void 0!==U&&U!==x||void 0!==A&&A!==b||void 0!==F&&!T()(F,j)||void 0!==B&&B!==S,ec=(0,y.useCallback)(()=>{ed?el(!0):et()},[et,ed]),ep=(0,y.useCallback)(async()=>{en||(K(null),eo({userContext:{aboutUserMessage:null!=A?A:"",aboutModelMessage:null!=U?U:"",disabledTools:null!=F?F:[],enabled:!!B}}))},[en,U,A,F,B,eo]),eh=(0,y.useCallback)(()=>{if(eu){var e,t,r,n;let o=J(null!=A?A:""),a=J(null!=U?U:"");o&&(m.m9.logEvent("chatgpt_user_context_modal__message_past_limit",void 0,{type:"about_user_message",limit:Y.toString(),character_length:null!==(e=null==A?void 0:A.length.toString())&&void 0!==e?e:""}),h.A.logEvent(g.M.userContextModelMessagePastLimit,{type:"about_user_message",limit:Y.toString(),character_length:null!==(t=null==A?void 0:A.length.toString())&&void 0!==t?t:""})),a&&(m.m9.logEvent("chatgpt_user_context_modal__message_past_limit",void 0,{type:"about_model_message",limit:Y.toString(),character_length:null!==(r=null==U?void 0:U.length.toString())&&void 0!==r?r:""}),h.A.logEvent(g.M.userContextModelMessagePastLimit,{type:"about_model_message",limit:Y.toString(),character_length:null!==(n=null==U?void 0:U.length.toString())&&void 0!==n?n:""})),H.m.danger(l.formatMessage(er.messageLimitError,{limit:Y}),{duration:4,hasCloseButton:!0});return}ep()},[l,eu,U,A,ep]);if(o&&i&&!u)return(0,L.jsx)(Z,{onClose:()=>{p(!0)}});if(o&&ea){let e=()=>{el(!1)};return(0,L.jsx)(E.Z,{isOpen:!0,onClose:e,type:"success",title:l.formatMessage(er.confirmCloseTitle),primaryButton:(0,L.jsx)(D.Z.Button,{title:l.formatMessage(er.confirmCloseOk),color:"danger",onClick:()=>{et(),e()}}),secondaryButton:(0,L.jsx)(D.Z.Button,{title:l.formatMessage(er.confirmCloseCancel),color:"secondary",onClick:e}),children:(0,L.jsx)("div",{className:"text-sm",children:(0,L.jsx)(M.Z,q({},er.confirmCloseBody))})},"confirm-close")}return(0,L.jsxs)(E.Z,{isOpen:o,onClose:ec,type:"success",size:"custom",className:"max-w-lg xl:max-w-xl",title:(0,L.jsx)(M.Z,q({},er.profileTitle)),children:[f?(0,L.jsx)("div",{className:"flex h-14 items-center justify-center",children:(0,L.jsx)(I.Z,{})}):(0,L.jsxs)("div",{className:"max-h-[60vh] overflow-y-auto md:max-h-[calc(100vh-300px)]",children:[(0,L.jsxs)("div",{className:"flex items-center gap-1",children:[(0,L.jsx)("div",{className:"text-sm font-semibold",children:(0,L.jsx)(M.Z,q({},er.customInstructionsTitle))}),(0,L.jsx)($,{label:(0,L.jsx)(M.Z,q(q({},er.customInstructionsTooltip),{},{values:{article:e=>(0,L.jsx)("a",{href:s.i,target:"_blank",className:"underline",rel:"noreferrer",children:e})}}))})]}),(0,L.jsx)("p",{className:"text-muted pb-3 pt-2 text-sm text-token-text-primary",children:(0,L.jsx)(M.Z,q({},er.aboutYouHelpText))}),(0,L.jsx)(Q,{className:"mb-3",onSubmit:eh,disabled:!G,tip:(0,L.jsx)(X,{children:(0,L.jsxs)("ul",{className:"list-disc pl-5",children:[(0,L.jsx)("li",{children:(0,L.jsx)(M.Z,q({},er.aboutUserTip1))}),(0,L.jsx)("li",{children:(0,L.jsx)(M.Z,q({},er.aboutUserTip2))}),(0,L.jsx)("li",{children:(0,L.jsx)(M.Z,q({},er.aboutUserTip3))}),(0,L.jsx)("li",{children:(0,L.jsx)(M.Z,q({},er.aboutUserTip4))}),(0,L.jsx)("li",{children:(0,L.jsx)(M.Z,q({},er.aboutUserTip5))})]})}),hasModError:"about_user_message"===W,value:null!=A?A:b,onChange:e=>N(t=>{var r,n,o;return{aboutModelMessage:null!==(r=t.aboutModelMessage)&&void 0!==r?r:x,aboutUserMessage:e.target.value,enabled:null!==(n=t.enabled)&&void 0!==n?n:G,disabledTools:null!==(o=t.disabledTools)&&void 0!==o?o:j}})}),(0,L.jsx)("p",{className:"text-muted py-3 text-sm text-token-text-primary",children:(0,L.jsx)(M.Z,q({},er.modelHelpText))}),(0,L.jsx)(Q,{onSubmit:eh,disabled:!G,tip:(0,L.jsx)(X,{children:(0,L.jsxs)("ul",{className:"list-disc pl-5",children:[(0,L.jsx)("li",{children:(0,L.jsx)(M.Z,q({},er.modelTip1))}),(0,L.jsx)("li",{children:(0,L.jsx)(M.Z,q({},er.modelTip2))}),(0,L.jsx)("li",{children:(0,L.jsx)(M.Z,q({},er.modelTip3))}),(0,L.jsx)("li",{children:(0,L.jsx)(M.Z,q({},er.modelTip4))})]})}),hasModError:"about_model_message"===W,value:null!=U?U:x,onChange:e=>N(t=>{var r,n,o;return{aboutUserMessage:null!==(r=t.aboutUserMessage)&&void 0!==r?r:b,aboutModelMessage:e.target.value,enabled:null!==(n=t.enabled)&&void 0!==n?n:G,disabledTools:null!==(o=t.disabledTools)&&void 0!==o?o:j}})}),!ei&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("div",{className:"my-6 h-px bg-token-border-light"}),(0,L.jsx)(ee,{disabledTools:null!==(r=null!==(n=P.disabledTools)&&void 0!==n?n:j)&&void 0!==r?r:[],onDisabledToolsChanged:e=>N(t=>{var r,n,o;return{aboutUserMessage:null!==(r=t.aboutUserMessage)&&void 0!==r?r:b,aboutModelMessage:null!==(n=t.aboutModelMessage)&&void 0!==n?n:x,enabled:null!==(o=t.enabled)&&void 0!==o?o:G,disabledTools:e}})})]})]}),(0,L.jsx)("div",{className:"mt-4 md:mt-5",children:(0,L.jsxs)("div",{className:"flex flex-grow flex-col items-stretch justify-between gap-0 sm:flex-row sm:items-center sm:gap-3",children:[(0,L.jsxs)("label",{className:"mt-5 flex cursor-pointer flex-row justify-between gap-2 sm:mt-4",children:[(0,L.jsx)("div",{className:"self-center text-sm text-token-text-primary",children:(0,L.jsx)(M.Z,q({},er.chatPreferencesEnable))}),(0,L.jsx)(k.Z,{enabled:G,onChange:e=>{N(t=>{var r,n,o;return{aboutUserMessage:null!==(r=t.aboutUserMessage)&&void 0!==r?r:b,aboutModelMessage:null!==(n=t.aboutModelMessage)&&void 0!==n?n:x,enabled:e,disabledTools:null!==(o=t.disabledTools)&&void 0!==o?o:j}})},label:G?l.formatMessage(er.disableToggleLabel):l.formatMessage(er.enableToggleLabel)})]}),(0,L.jsx)(D.Z.Actions,{secondaryButton:(0,L.jsx)(D.Z.Button,{onClick:ec,children:(0,L.jsx)(M.Z,q({},er.cancel))}),primaryButton:(0,L.jsx)(D.Z.Button,{loading:en,onClick:eh,color:"primary",visuallyDisabled:eu,disabled:!ed,children:(0,L.jsx)(M.Z,q({},er.save))})})]})})]},"user-context")}let X=e=>{let{children:t}=e;return(0,L.jsx)("div",{className:"whitespace-pre-line",children:t})},Y=1500,J=e=>e.length>Y,Q=e=>{let{disabled:t,onChange:r,onSubmit:n,placeholder:o,value:a,tip:l,hasModError:s,className:i}=e,d=(0,C.Z)(),c=(0,y.useRef)(null),p=(0,S.x_)(),h=(0,S.aj)(),g=!p,{0:m,1:x}=(0,y.useState)(!1),{0:T,1:j}=(0,y.useState)(g),w=!g&&m&&!T,O=g&&!T,I=J(a);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(E.Z,{isOpen:O,type:"success",size:"custom",className:"max-w-lg",title:d.formatMessage(er.tipsHeader),showCloseButton:!0,onClose:()=>{j(!0)},children:l}),(0,L.jsxs)(u.fC,{open:w,children:[(0,L.jsxs)("div",{className:i,children:[(0,L.jsx)(u.xz,{asChild:!0,children:(0,L.jsx)("textarea",{ref:c,className:(0,f.default)("w-full resize-none rounded bg-token-main-surface-primary p-4 placeholder:text-gray-300",{"border-orange-400 focus:border-orange-400":s,"border-red-500 focus:border-red-500":I&&!s,"focus-token-border-heavy border-token-border-light":!I&&!s,"opacity-30":t}),disabled:t,placeholder:o,onKeyDown:e=>{t||"Enter"!==e.key||!e.metaKey||e.shiftKey||e.nativeEvent.isComposing||(e.preventDefault(),n())},rows:p&&!h?6:5,value:a,onChange:r,onBlur:()=>{x(!1)},onFocus:()=>{x(!0)}})}),(0,L.jsx)("div",{className:(0,f.default)("flex items-center justify-between px-1 text-xs tabular-nums",I?"text-red-600":"text-token-text-tertiary"),children:s?(0,L.jsx)("div",{className:"visible mt-2 text-left text-xs text-orange-400",children:(0,L.jsx)(M.Z,q(q({},er.modApiVoilation),{},{values:{policyLink:e=>(0,L.jsx)("a",{href:"https://platform.openai.com/docs/usage-policies/content-policy",className:"underline",target:"_blank",rel:"noreferrer",children:e}),feedbackLink:e=>(0,L.jsx)("a",{href:"https://forms.gle/3gyAMj5r5rTEcgbs5",className:"underline",target:"_blank",rel:"noreferrer",children:e})}}))}):(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("div",{children:"".concat(a.length,"/").concat(Y)}),(0,L.jsx)("button",{className:"flex items-center gap-1",onClick:()=>{var e;null===(e=c.current)||void 0===e||e.focus(),j(!T)},tabIndex:-1,children:(0,L.jsx)(v.M,{initial:!1,children:m&&(0,L.jsx)(b.E.div,{className:"flex items-center gap-1",initial:{opacity:0},animate:{opacity:1,transition:{duration:.2,ease:"easeIn"}},exit:{opacity:0,transition:{duration:.2,ease:"easeIn"}},children:T?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(M.Z,q({},er.showTips)),(0,L.jsx)(G.tEF,{className:"icon-xs"})]}):(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(M.Z,q({},er.hideTips)),(0,L.jsx)(G.Xl7,{className:"icon-xs"})]})},"show-hide")})})]})})]}),(0,L.jsx)(u.h_,{children:(0,L.jsx)(u.VY,{side:"right",align:"start",sideOffset:12,className:"popover relative max-w-[220px] animate-slideLeftAndFade select-none rounded-xl border border-token-border-light bg-token-main-surface-primary p-4 text-sm text-token-text-primary shadow-[0px_4px_14px_rgba(0,0,0,0.06)] xl:max-w-xs",onOpenAutoFocus:e=>{e.preventDefault()},onCloseAutoFocus:e=>{e.preventDefault()},children:(0,L.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,L.jsx)("strong",{children:(0,L.jsx)(M.Z,q({},er.tipsHeader))}),l]})})})]})]})};function $(e){let{label:t,side:r="bottom"}=e;return(0,L.jsx)(B.u,{sideOffset:4,interactive:!0,label:(0,L.jsx)("div",{children:t}),side:r,children:(0,L.jsx)(G.szr,{className:"h-4 w-4 text-token-text-tertiary"})})}function ee(e){var t;let{disabledTools:r,onDisabledToolsChanged:n}=e;(0,y.useEffect)(()=>{h.A.logEvent(g.M.userContextGpt4CapabilitiesShown)},[]);let o=(0,a.t)(),s=null!==(t=null==o?void 0:o.isEnterprisey())&&void 0!==t&&t,u=!(0,a.FJ)(l.L0.BrowsingAvailable)&&s,d=e=>{n(r.includes(e)?r.filter(t=>t!==e):[...r,e])};return(0,L.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,L.jsxs)("div",{className:"flex items-center gap-1",children:[(0,L.jsx)("div",{className:"text-sm font-semibold",children:(0,L.jsx)(M.Z,{id:"userContextModal.gpt4CapabilitiesTitle",defaultMessage:"GPT-4 Capabilities"})}),(0,L.jsx)($,{label:(0,L.jsx)(M.Z,{id:"userContextModal.tools.capabilitiesInfo.1",defaultMessage:"Choose which tools can be used with GPT-4"}),side:"top"})]}),(0,L.jsxs)("div",{className:"mt-2 flex flex-col gap-3 md:flex-row",children:[(0,L.jsx)(et,{title:(0,L.jsx)(M.Z,{id:"userContextModal.tools.browse",defaultMessage:"Browsing"}),tooltipLabel:u?(0,L.jsx)(M.Z,{id:"5SuA2c",defaultMessage:"Browsing is disabled by your organization"}):(0,L.jsx)(M.Z,{id:"userContexModal.tools.browserTooltip",defaultMessage:"Browse the internet to find answers"}),tool:i.X.BROWSER,onClick:d,Icon:G.n9J,checked:!r.includes(i.X.BROWSER)&&!u,disabled:u}),(0,L.jsx)(et,{title:(0,L.jsx)(M.Z,{id:"userContextModal.tools.dalle",defaultMessage:"DALL\xb7E"}),tooltipLabel:(0,L.jsx)(M.Z,{id:"userContextModal.tools.dalleTooltip",defaultMessage:"Generate images using DALL\xb7E"}),tool:i.X.DALLE,onClick:d,Icon:G.q$4,checked:!r.includes(i.X.DALLE)}),(0,L.jsx)(et,{title:(0,L.jsx)(M.Z,{id:"userContextModal.tools.codeInterpreter.1",defaultMessage:"Code"}),tooltipLabel:(0,L.jsx)(M.Z,{id:"userContextModal.tools.codeInterpreterTooltip",defaultMessage:"Execute code using Code Interpreter"}),tool:i.X.PYTHON,onClick:d,Icon:G.FxN,checked:!r.includes(i.X.PYTHON)})]})]})}function et(e){let{tool:t,title:r,tooltipLabel:n,Icon:a,onClick:l,checked:s,disabled:i}=e;return(0,L.jsx)(B.u,{className:"block flex-1",label:n,side:"top",sideOffset:4,children:(0,L.jsxs)("button",{className:(0,f.default)("flex w-full items-center justify-between rounded border border-token-border-medium p-2",{"cursor-not-allowed text-token-text-quaternary":i}),onClick:()=>l(t),disabled:i,children:[(0,L.jsxs)("div",{className:"flex items-center gap-2",children:[(0,L.jsx)(a,{className:"h-4 w-4 text-token-text-tertiary"}),(0,L.jsx)("div",{className:"text-sm font-semibold",children:r})]}),(0,L.jsx)(o.Z,{id:t,checked:s&&!i,disabled:i})]})})}let er=(0,j.vU)({tipsHeader:{id:"userContextModal.tipsHeader",defaultMessage:"Thought starters"},aboutUserTip1:{id:"userContextModal.aboutUserTip1",defaultMessage:"Where are you based?"},aboutUserTip2:{id:"userContextModal.aboutUserTip2",defaultMessage:"What do you do for work?"},aboutUserTip3:{id:"userContextModal.aboutUserTip3",defaultMessage:"What are your hobbies and interests?"},aboutUserTip4:{id:"userContextModal.aboutUserTip4",defaultMessage:"What subjects can you talk about for hours?"},aboutUserTip5:{id:"userContextModal.aboutUserTip5",defaultMessage:"What are some goals you have?"},modelTip1:{id:"userContextModal.modelTip1",defaultMessage:"How formal or casual should ChatGPT be?"},modelTip2:{id:"userContextModal.modelTip2",defaultMessage:"How long or short should responses generally be?"},modelTip3:{id:"userContextModal.modelTip3",defaultMessage:"How do you want to be addressed?"},modelTip4:{id:"userContextModal.modelTip4",defaultMessage:"Should ChatGPT have opinions on topics or remain neutral?"},save:{id:"userContextModal.save",defaultMessage:"Save"},chatPreferencesEnable:{id:"userContextModal.chatPreferencesEnable",defaultMessage:"Enable for new chats"},enableToggleLabel:{id:"userContextModal.enableToggleLabel",defaultMessage:"Enable chat preferences"},disableToggleLabel:{id:"userContextModal.disableToggleLabel",defaultMessage:"Disable chat preferences"},cancel:{id:"userContextModal.cancel",defaultMessage:"Cancel"},aboutYouHelpText:{id:"userContextModal.aboutYouHelpText",defaultMessage:"What would you like ChatGPT to know about you to provide better responses?"},modelHelpText:{id:"userContextModal.modelHelpText",defaultMessage:"How would you like ChatGPT to respond?"},profileTitle:{id:"userContextModal.title.1",defaultMessage:"Customize ChatGPT"},customInstructionsTitle:{id:"userContextModal.customInstructionsTitle",defaultMessage:"Custom Instructions"},customInstructionsTooltip:{id:"userContextModal.customInstructionsTooltip",defaultMessage:"<article>Learn more</article> about Custom instructions and how they’re used to help ChatGPT provide better responses."},messageLimitError:{id:"userContextModal.messageLimitError",defaultMessage:"Please limit your responses to {limit} characters or less."},showTips:{id:"userContextModal.showTips",defaultMessage:"Show tips"},hideTips:{id:"userContextModal.hideTips",defaultMessage:"Hide tips"},confirmCloseTitle:{id:"userContextModal.confirmCloseTitle",defaultMessage:"You have unsaved changes."},confirmCloseBody:{id:"userContextModal.confirmCloseBody",defaultMessage:"Are you sure you want to exit? Any changes you made will be permanently lost."},confirmCloseCancel:{id:"userContextModal.confirmCloseCancel",defaultMessage:"Back"},confirmCloseOk:{id:"userContextModal.confirmCloseOk",defaultMessage:"Exit"},modApiVoilation:{id:"userContextModal.modApiVoilation",defaultMessage:"This content may violate our <policyLink>content policy</policyLink>. If you believe this to be in error, please <feedbackLink>submit your feedback</feedbackLink> — your input will aid our research in this area."},browser:{id:"userContexModal.tools.browserTooltip",defaultMessage:"Browse the internet to find answers"},dalle:{id:"userContexModal.tools.dalleTooltip",defaultMessage:"Generate images using DALL\xb7E"},python:{id:"userContexModal.tools.codeInterpreterTooltip",defaultMessage:"Execute code using Code Interpreter"}})},55963:function(e,t,r){r.d(t,{Z:function(){return a}});var n=r(19841),o=r(651);function a(e){let{id:t,label:r,checked:a,onChange:l,disabled:s,className:i,labelClassName:u,readOnly:d,labelSide:c="right"}=e,p=r&&(0,o.jsx)("label",{className:(0,n.default)("form-check-label text-token-text-primary",u),htmlFor:t,children:r});return(0,o.jsxs)("div",{className:"form-check flex items-center gap-2",children:["left"===c&&p,(0,o.jsx)("input",{className:(0,n.default)("form-check-input float-left h-4 w-4 appearance-none rounded-sm border border-gray-300 bg-white bg-contain bg-center bg-no-repeat align-top transition duration-200 checked:border-blue-600 checked:bg-blue-600 focus:outline-none",s?"cursor-not-allowed":"cursor-pointer",i),type:"checkbox",disabled:s,onChange:l,checked:a,readOnly:d,id:t}),"right"===c&&p]})}},30853:function(e,t,r){r.d(t,{E:function(){return h},u:function(){return g}});var n,o=r(2346),a=r(98601),l=r(52088),s=r(59594),i=r(19841);r(92379);var u=r(15478),d=r(651);let c=["disabled"];function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}let h=e=>{let{disabled:t}=e,r=(0,l.Z)(e,c);return t?(0,d.jsx)(d.Fragment,{children:r.children}):(0,d.jsx)(g,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach(function(t){(0,a.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},r))},g=e=>{let t,r,{label:n,contentClassName:o,customPaddingClassName:a,theme:l="default",cornerRadius:u="lg",side:c="bottom",sideOffset:p=14,align:h="center",alignOffset:g=0,withArrow:f=!0,wide:v=!1,size:b="small",interactive:x=!1,usePortal:T=!0,className:y,children:C,delayDuration:M=300,closeOnOutsideClick:j=!0,open:w,onOpenChange:O}=e;if(!n)return(0,d.jsx)("span",{className:y,children:C});switch(l){case"blue":t="",r="bg-blue-selection";break;case"white":t="",r="bg-white";break;case"default":t="border-white/10 dark:border",r="bg-gray-950"}let S=(0,d.jsxs)(s.VY,{collisionPadding:8,onPointerDownOutside:j?void 0:e=>e.preventDefault(),side:c,sideOffset:p,alignOffset:g,align:h,className:(0,i.default)("relative shadow-xs transition-opacity",a||"px-3 py-2","rounded-".concat(u),t,r,v?"max-w-sm":"max-w-xs",o),children:[(0,d.jsx)("span",{className:(0,i.default)("flex items-center whitespace-pre-wrap text-center font-semibold normal-case text-gray-100",{"text-xs":"xsmall"===b,"text-sm":"small"===b}),children:n}),f&&(0,d.jsx)(s.Eh,{asChild:!0,children:(0,d.jsx)(m,{className:r})})]});return(0,d.jsxs)(s.fC,{delayDuration:M,disableHoverableContent:!x,open:w,onOpenChange:O,children:[(0,d.jsx)(s.xz,{asChild:!0,children:(0,d.jsx)("span",{className:y,children:C})}),T?(0,d.jsx)(s.h_,{children:S}):S]})},m=u.Z.div(n||(n=(0,o.Z)(["relative top-[-4px] h-2 w-2 rotate-45 transform shadow-xs dark:border-r dark:border-b border-white/10"])))},6530:function(e,t,r){r.d(t,{Bw:function(){return a},CR:function(){return l},rm:function(){return o}});var n=r(34977);function o(){return function(e){let t=a(e);if(t)return l(t)}((0,n.useRouter)().asPath)}function a(e){let t=new URL("http://example.com".concat(e)).pathname.match(/(?:\/gizmo)?\/g\/([^/]+)/);if(t)return t[1]}function l(e){let t=e.split("-");return t.length>1&&"g"===t[0]?"g-".concat(t[1]):t[0]}},56290:function(e,t,r){r.d(t,{$w:function(){return l},Lm:function(){return s},Qq:function(){return a},Vh:function(){return o},xz:function(){return i}});var n=r(16757);function o(e){return e.map(e=>"string"==typeof e?e:"").join("")}function a(e){return e.map(e=>"text"===e.type?e.text:"").join("\n")}function l(e,t){let r=[],o=0;for(let a=0;a<e.length;a++){let l=e[a];if("string"==typeof l){if(null!=t&&t<o+l.length){r.push({type:"text",text:l.slice(0,t-o)});break}r.push({type:"text",text:l}),o+=l.length}else if(l.content_type===n.wW.ImageAssetPointer){let e=a>0?r[a-1]:null;(null==e?void 0:e.type)==="images"?e.imageAssets.push(l):r.push({type:"images",imageAssets:[l]})}else l.content_type===n.wW.AudioTranscription&&r.push({type:"transcription",text:l.text})}return r}function s(e){let{isUserTurn:t,parts:r}=e;if(!t)return l(r);let o={text:[],images:[]};for(let e=0;e<r.length;e++){let t=r[e];"string"==typeof t?t.trim().length>0&&o.text.push({type:"text",text:t}):t.content_type===n.wW.AudioTranscription?o.text.push({type:"transcription",text:t.text}):t.content_type===n.wW.ImageAssetPointer&&o.images.push(t)}let a=[];return o.images.length>0&&a.unshift({type:"images",imageAssets:o.images}),a.push(...o.text.map(e=>({type:e.type,text:e.text}))),a}function i(e){let t=e&&new Date(e),r=t&&new Date(t);return r?"after ".concat(r.getHours()%12||12,":").concat(10>r.getMinutes()?"0":"").concat(r.getMinutes()," ").concat(r.getHours()>=12?"PM":"AM"):"later"}},3945:function(e,t,r){function n(e){return{id:e.slug,maxTokens:e.max_tokens,title:e.title,description:e.description,tags:e.tags,enabledTools:e.enabled_tools,product_features:e.product_features}}r.d(t,{H:function(){return n},g:function(){return o}});let o="gpt-4o-mini"},60682:function(e,t,r){r.d(t,{hO:function(){return h},pm:function(){return c},qg:function(){return p}});var n,o=r(98601),a=r(58025),l=r(2721),s=r(42420),i=r(56032);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){(0,o.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let c=((n={}).LocaleBanner="oai/apps/hasSeenLocaleBanner",n.HasSeenPluginDisclaimer="oai/apps/hasSeenPluginsDisclaimer",n.FirstTimeUsingUserContext="oai/apps/hasUserContextFirstTime/2023-06-29",n.Onboarding="oai/apps/hasSeenOnboarding",n.TeamOwnerOnboarding="oai/apps/hasSeenTeamOwnerOnboarding",n.MemoryOnboarding="oai/apps/hasSeenMemoryOnboarding",n.TemporaryChatOnboarding="oai/apps/hasSeenTemporaryChatOnboarding",n.ArchiveConversationOnboarding="oai/apps/hasSeenArchiveConversationOnboarding",n.ExploreGPTs="oai/apps/hasSeenExploreGPTs2",n.ExploreGPTsNewNux="oai/apps/hasSeenExploreGPTsNewNux",n.MentionGPTs="oai/apps/hasSeenMentionGPTs",n.ModelTunerDisclaimer="oai/apps/hasSeenModelTunerDisclaimer",n.DalleEditingOnboarding="oai/apps/hasSeenDalleEditingOnboarding",n.ModelSwitcherAutoDowngrade="oai/apps/hasSeenModelSwitcherAutoDowngrade",n.SonicSidebar="oai/apps/hasDismissedSonicSidebar",n.ContextConnectors="oai/apps/hasSeenContextConnectorTooltip",n.AG8PqS2q="oai/apps/hasDismissedAG8PqS2q",n.SidekickLauncherOnboarding="oai/apps/hasSeenSidekickLauncherOnboarding",n.UseSidekick="oai/apps/hasDismissedUseSidekick",n.hasSeenSncUsageNux="oai/apps/hasSeenSncUsageNux",n.hasSeenSncWelcomeNux="oai/apps/hasSeenSncWelcomeNux",n.hasSeenSncSidebarTooltip="oai/apps/hasSeenSncSidebarTooltip",n.hasSeenSncSourcesTooltip="oai/apps/hasSeenSncSourcesTooltip",n);function p(e){let{data:t=[],isLoading:r}=(0,a.vl)(e=>e.eligible_announcements),n=h();return{eligible:t.includes(e),markAsViewed:()=>n.mutate({key:e}),isLoading:r}}function h(){let e=(0,s.NL)();return(0,i.D)({mutationFn:e=>{let{key:t}=e;return l.Z.announcementViewed(t)},onMutate:async t=>{let{key:r}=t;e.setQueryData(["userSettings"],e=>d(d({},e),{},{eligible_announcements:e.eligible_announcements.filter(e=>e!==r)}))},onSuccess:()=>{e.invalidateQueries({queryKey:["userSettings"]})}})}},69438:function(e,t,r){r.d(t,{BT:function(){return s},Y8:function(){return i},Zp:function(){return d},c0:function(){return u},uU:function(){return l}});var n=r(92379),o=r(68810),a=r(73177);let l="model_cap_exceeded";function s(){let e=i(e=>e.isoDate),t=Date.now(),r=e&&new Date(e).getTime(),o=e&&r&&r<=t;return((0,n.useEffect)(()=>{o&&d()},[o]),o)?null:e?"gpt-4":null}(0,o.Ue)(()=>({serverThreadIds:new Set}));let i=(0,o.Ue)()((0,a.tJ)(()=>({isoDate:""}),{name:"oai/apps/capExpiresAt"}));function u(e){i.setState({isoDate:e})}function d(){i.setState({isoDate:""})}},73468:function(e,t,r){r.d(t,{dN:function(){return k},nP:function(){return _},ft:function(){return P},ZP:function(){return U},q_:function(){return N},f3:function(){return E},i0:function(){return L}});var n,o,a,l=r(98601),s=r(16757),i=r(7937),u=r(59358),d=r(93951),c=r(14015),p=r.n(c),h=r(92379),g=r(25162),m=r(69438),f=r(86025),v=r(31498),b=r(84760),x=r(75172),T=r(68306),y=r(2721),C=r(56290);let M={textarea:"","model-switcher":""},j=(0,T.vU)({shortLimitMinutes:{id:"modelCapMessaging.shortLimitMinutes",defaultMessage:"Limit {numerator, plural, =0 {# message} one {# message} other {# messages}} / {denominator, plural, =0 {# minute} one {# minute} other {# minutes}}"},shortLimitHours:{id:"modelCapMessaging.shortLimitHours",defaultMessage:"Limit {numerator, plural, =0 {# message} one {# message} other {# messages}} / {denominator, plural, =0 {# hour} one {# hour} other {# hours}}"},shortLimitDays:{id:"modelCapMessaging.shortLimitDays",defaultMessage:"Limit {numerator, plural, =0 {# message} one {# message} other {# messages}} / {denominator, plural, =0 {# day} one {# day} other {# days}}"}});var w=r(67437),O=r(651);function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach(function(t){(0,l.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let k=((n={}).BROWSING="browsing_model",n.CODE_INTERPRETER="code_interpreter_model",n.DALLE="dalle_model",n),_=((o={}).ALPHA="alpha",o.EXPERIMENTS="experiments",o.MAINLINE="mainline",o),P=((a={}).GPT4o="AG8PqS2q",a.AUTO="auto",a),N=e=>{let{categoryId:t}=e;return t===P.AUTO},D={[k.BROWSING]:{name:(0,O.jsxs)("span",{children:["Browse with ",(0,O.jsx)(g.jE,{className:"icon-sm mt-[-3px] inline-block"})," Bing"]})},[k.CODE_INTERPRETER]:{name:"Advanced Data Analysis"},[k.DALLE]:{name:"DALL\xb7E 3"}};function E(e){let t=function(e){for(let t of U())if(t.options.length>0&&t.options.find(t=>t.value===e))return t.categoryId;return null}(null!=e?e:void 0);return(0,i.r3)([_.ALPHA,_.EXPERIMENTS,_.MAINLINE],t)?"bg-orange-500 text-white":"bg-token-main-surface-primary text-token-text-primary"}function L(e,t){let{data:r}=(0,w.Y7)(),n=null==r?void 0:r.categories.some(r=>r[t]===e);return null!=n&&n}let A=e=>p()(e,e=>{let{id:t}=e;return t.split(":").slice(0,1).join(":")});function U(){var e;let{data:t}=(0,w.Y7)(),r=(0,m.BT)(),n=(0,d.t)(),o=(0,u.w)(null==n?void 0:n.getWorkspaceId()),a=null!==(e=null==n?void 0:n.isEnterprise())&&void 0!==e&&e,{modelSwitcherDisclaimer:l}=function(){let e=(0,m.Y8)(e=>e.isoDate),t=(0,C.xz)(e),r=(0,x.Z)(),n=(0,v.ec)(v.F_.isEnterprisePlan),{isUnauthenticated:o,isLoading:a}=(0,f.u)(),{data:l}=(0,b.a)({queryKey:["modelMessageCap",o],queryFn:()=>y.Z.getModelMessageCap(o),enabled:!a});return(0,h.useMemo)(()=>{var e,o,a;let s=null!==(e=null==l?void 0:l.message_cap)&&void 0!==e?e:0,i=null!==(o=null==l?void 0:l.message_cap_window)&&void 0!==o?o:1,{text:u,type:d,value:c}=function(e){if(e<60)return{type:"minute",value:e,text:e<2?"minute":"".concat(e," minutes")};let t=Math.floor(e/60);if(t<24)return{type:"hour",value:t,text:t<2?"hour":"".concat(t," hours")};let r=Math.floor(t/24);return r<7?{type:"day",value:r,text:r<2?"day":"".concat(r," days")}:{type:"minute",value:e,text:e<2?"minute":"".concat(e," minutes")}}(i),p=null!==(a=null==l?void 0:l.message_disclaimer)&&void 0!==a?a:M;if(!u||n)return{textareaDisclaimer:p.textarea,modelSwitcherDisclaimer:p["model-switcher"],modelSwitcherLimitShort:""};if(!l||!i||!s)return{textareaDisclaimer:M.textarea,modelSwitcherDisclaimer:M["model-switcher"],modelSwitcherLimitShort:""};let h=r.formatMessage(j.shortLimitMinutes,{numerator:s,denominator:c});switch(d){case"hour":h=r.formatMessage(j.shortLimitHours,{numerator:s,denominator:c});break;case"day":h=r.formatMessage(j.shortLimitDays,{numerator:s,denominator:c})}return{textareaDisclaimer:p.textarea.replaceAll("%FORMATTED_TIME%",t).replaceAll("%NUMERATOR%","".concat(s)).replaceAll("%DENOMINATOR%",u),modelSwitcherDisclaimer:p["model-switcher"].replaceAll("%FORMATTED_TIME%",t).replaceAll("%NUMERATOR%","".concat(s)).replaceAll("%DENOMINATOR%",u),modelSwitcherLimitShort:h}},[l,t,r,n])}(),i=(0,w.iu)();return(0,h.useMemo)(()=>{let e=[];if(!t)return e;let{categories:n,groups:u,modelsMap:d}=t;for(let s of n){let{defaultModel:n,categoryId:u,label:d}=s;if(i.has(n)){let c=r===n,p=t.modelsMap[n],h=c?[]:function(e,t,r,n,o){let a=[],l=null==e?void 0:e.browsing;if((o&&l||!o)&&null!=t[k.BROWSING]&&r.has(t[k.BROWSING])){let e=D[k.BROWSING];a.push(R(n[t[k.BROWSING]],{name:e.name}))}if(null!=t[k.CODE_INTERPRETER]&&r.has(t[k.CODE_INTERPRETER])){let e=D[k.CODE_INTERPRETER];a.push(R(n[t[k.CODE_INTERPRETER]],{name:e.name}))}if(null!=t[k.DALLE]&&r.has(t[k.DALLE])){let e=D[k.DALLE];a.push(R(n[t[k.DALLE]],{name:e.name}))}return a}(o.data,s,i,t.modelsMap,a);e.push({categoryId:u,value:n,name:d,description:c?l:p.description,options:[R(p,{name:"Default"}),...h]})}}for(let t of u){let{group:r,label:n,modelIds:o}=t,a=o[0],l=o.map(e=>d[e]).filter(e=>{let{tags:t}=e;return!t.includes(s.S.HIDDEN)});if(r===_.EXPERIMENTS){let t=Object.entries(A(l)).map(e=>{let[t,r]=e,n=t.split(":").slice(-1)[0];return{key:t,value:n,name:n,options:r.map(e=>{let{title:t}=e;return R(I(I({},e),{},{title:t.replace(n,"")}))})}});e.push({categoryId:r,value:a,name:n,options:t})}else e.push({categoryId:r,value:a,name:n,options:l.map(e=>R(e))})}return e},[t,i,r,o.data,a,l])}function R(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return I({value:e.id,name:e.title},t)}},67437:function(e,t,r){r.d(t,{B9:function(){return D},Bv:function(){return A},Hb:function(){return _},L4:function(){return T},OX:function(){return k},Tg:function(){return I},WK:function(){return R},Xy:function(){return U},Y7:function(){return S},fm:function(){return E},iu:function(){return P},j8:function(){return Z},kH:function(){return C},mx:function(){return y},vJ:function(){return L}});var n=r(98601),o=r(52088),a=r(93951),l=r(49166),s=r(84760),i=r(99976),u=r(34977),d=r(92379),c=r(16757),p=r(2721),h=r(92745),g=r(30478),m=r(3945),f=r(73468);let v=["default_model","tagline","color","human_category_name","category","human_category_short_name","human_category_shorter_name","subscription_level","short_explainer"];function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let T="text-davinci-002-render-sha",y="gpt-4",C="gpt-4o",M=(0,m.H)({slug:m.g,max_tokens:4097,title:"Default",description:"",tags:[c.S.GPT_3_5],product_features:{}}),j=e=>{let{default_model:t,tagline:r,color:n,human_category_name:a,category:l,human_category_short_name:s,human_category_shorter_name:i,subscription_level:u,short_explainer:d}=e;return x({color:n,tagline:r,defaultModel:t,label:a,shortLabel:s,description:d,shorterLabel:null!=i?i:s,subscriptionLevel:u,categoryId:l},(0,o.Z)(e,v))},w=e=>{let{icon:t,icon_filled_src:r,icon_outline_src:n}=e;return{iconName:t,iconFilledSrc:r,iconOutlineSrc:n}},O=e=>{let{group:t,human_group_name:r,human_group_short_name:n,model_ids:o}=e;return{group:t,label:r,shortLabel:n,modelIds:o}};function S(){let e=(0,g.V_)();return(0,s.a)((0,l.C)({retry:5,queryKey:["models",{isHistoryDisabled:e}],queryFn:async()=>await p.Z.getModels(e).then(e=>{var t;let{models:r,internal_groups:n,categories:o}=e,a=r.map(m.H);return{categories:o.concat().reverse().map(j),groups:null!==(t=null==n?void 0:n.map(O))&&void 0!==t?t:[],modelsList:a,modelsMap:Object.fromEntries(a.map(e=>[e.id,e]))}})}))}function I(){return(0,s.a)((0,l.C)({retry:5,queryKey:["modelIcons"],queryFn:async()=>await p.Z.getModelIcons().then(e=>Object.fromEntries(Object.entries(e).map(e=>{let[t,r]=e;return[t,w(r)]})))}))}function k(){let{isRegen:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{isLoading:t,data:{categories:r=[],groups:n=[]}={}}=S();return{isLoading:t,categories:(0,d.useMemo)(()=>e?r.filter(e=>!1!==e.is_regenerate_category):r.filter(e=>!e.is_regenerate_category),[r,e]),groups:null!=n?n:[]}}function _(){let{categories:e}=k();return!!e.find(e=>{let{categoryId:t}=e;return t===f.ft.GPT4o})}function P(){let{data:e}=S();return(0,d.useMemo)(()=>new Set(e?Object.keys(e.modelsMap):[m.g]),[e])}let N={[m.g]:M};function D(){var e;let{data:t}=S();return null!==(e=null==t?void 0:t.modelsMap)&&void 0!==e?e:N}function E(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,u.useRouter)(),{query:r}=t;return(0,d.useCallback)(n=>{let{location:o,modelId:a}=n,l={model:encodeURIComponent(a)},s=t.route.includes("/g/");if(e||s)i.A.logNewChatButtonClicked({location:o}),t.push({pathname:"/",query:l},void 0,{shallow:!0});else{let e=x(x({},r),l);i.A.logNewChatButtonClicked({location:o}),t.replace({pathname:t.basePath,query:e},void 0,{shallow:!0})}},[e,r,t])}function L(){var e;let{data:{categories:t=[]}={}}=S(),{doesUserHaveAnyAccountsWithPlusFeatures:r}=(0,a.al)();if(r)return null;let n=t.find(f.q_);return null!==(e=null==n?void 0:n.defaultModel)&&void 0!==e?e:null}function A(e){return(0,h.y8)(e)}function U(e){let t=A(e),r=D();return(0,d.useMemo)(()=>{var e;return null==t?M:null!==(e=r[t])&&void 0!==e?e:M},[t,r])}function R(e){var t;return decodeURIComponent(null!==(t=e.model)&&void 0!==t?t:"")||null}function Z(){var e,t,r,n;let o;let{data:l}=S(),{doesUserHaveAnyAccountsWithPlusFeatures:s}=(0,a.al)(),i=(0,a.t)();return e=!!s,t=!!(null!=i&&i.isEnterprise()),o=c.S.GPT_3_5,t?o=c.S.GPT_4:e&&(o=c.S.GPT_4o),null!==(r=null!==(n=null==l?void 0:l.modelsList.find(e=>e.tags.includes(o)))&&void 0!==n?n:null==l?void 0:l.modelsList[0])&&void 0!==r?r:M}},92745:function(e,t,r){r.d(t,{Ao:function(){return ef},Fe:function(){return es},GD:function(){return X},GK:function(){return ey},Hk:function(){return $},JI:function(){return K},Kt:function(){return q},Lp:function(){return I},OX:function(){return O},Rz:function(){return eu},U0:function(){return V},UL:function(){return G},Um:function(){return Z},Uy:function(){return er},WA:function(){return H},Wb:function(){return eM},XK:function(){return B},XL:function(){return et},Yk:function(){return Q},Zz:function(){return k},_L:function(){return N},aS:function(){return eg},dz:function(){return el},eV:function(){return W},eY:function(){return eh},ff:function(){return ev},h9:function(){return eT},iN:function(){return U},je:function(){return en},lA:function(){return ea},lz:function(){return ex},nd:function(){return J},nh:function(){return eo},o0:function(){return eb},oq:function(){return z},qA:function(){return ee},qN:function(){return E},r7:function(){return em},tQ:function(){return R},u9:function(){return ei},uj:function(){return Y},xn:function(){return eC},y8:function(){return F},yt:function(){return ed}});var n,o=r(16757);r(59578);var a=r(6530),l=r(3945),s=r(2721),i=r(89153),u=r(22433);r(46900);var d=r(98541),c=r(76868),p=r(79746),h=r(82363),g=r(13859),m=r.n(g),f=r(2428),v=r.n(f),b=r(65925),x=r.n(b),T=r(34977),y=r(92379),C=r(92054),M=r(68810),j=r(95267),w=r(1552);function O(){return"".concat(o.Uo).concat((0,C.Z)())}let S=0;function I(){return S++}function k(e){return e.startsWith(o.Uo)}let _=()=>new d.Cv,P=()=>Object.freeze({lastModelUsed:null,createTime:new Date}),N=((n={}).NewChat="NewChat",n.Server="Server",n.User="User",n.Generated="Generated",n.Unknown="Unknown",n),D={},E=(0,M.Ue)((0,j.n)(()=>({threads:{},clientNewThreadIdToServerIdMapping:{},threadRetainCounts:{}}))),L=E.getState,A=E.setState,U={resolveThreadId:function(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L();return null!==(t=r.clientNewThreadIdToServerIdMapping[e])&&void 0!==t?t:e},getThread:function(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L(),n=U.resolveThreadId(e,r);return null!==(t=r.threads[n])&&void 0!==t?t:null},hasThread:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L(),r=U.resolveThreadId(e,t);return null!=t.threads[r]},isLoading:function(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L(),n=U.resolveThreadId(e,r);return null===(t=r.threads[n])||void 0===t?void 0:t.isLoading},getConversationMode:function(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L(),n=U.resolveThreadId(e,r);return null===(t=r.threads[n])||void 0===t?void 0:t.mode},getThreadModelId:function(e){var t,r;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L();return null!==(t=null===(r=U.getThread(e,n))||void 0===r?void 0:r.modelId)&&void 0!==t?t:null},getGizmoId(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L(),r=t.threads[U.resolveThreadId(e,t)];if((null==r?void 0:r.mode.kind)===o.OL.GizmoInteraction||(null==r?void 0:r.mode.kind)===o.OL.GizmoTest)return r.mode.gizmo_id},getThreadTitleSource(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L(),r=U.resolveThreadId(e,t),n=t.threads[r];return null!=n?n.titleSource:N.Unknown},getThreadCreateTime(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L(),n=U.resolveThreadId(e,r);return null===(t=r.threads[n])||void 0===t||null===(t=t.initialThreadData)||void 0===t?void 0:t.createTime},getCurrentNode(e){var t,r;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L(),o=U.resolveThreadId(e,n),a=null!==(t=null===(r=n.threads[o])||void 0===r?void 0:r.currentLeafId)&&void 0!==t?t:"root";return R.getTree(e).getNodeByIdOrMessageId(a)},isThreadUrlSafe(e,t){var r,n;let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:L(),a=U.resolveThreadId(e,o);return null!==(r=null===(n=o.threads[a])||void 0===n?void 0:n.safeUrls.includes(t))&&void 0!==r&&r},getRatingPrompt(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L(),n=U.resolveThreadId(e,r);return null===(t=r.threads[n])||void 0===t?void 0:t.promptGptRating}},R={initThread:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=R.resolveThreadId(e);if(null==L().threads[n]){let e=(0,c.PH)();A(o=>{o.threads[n]={initialThreadData:e,mode:t,modelId:r,tree:new d.Cv(d.Cv.createTree()),title:null,titleSource:N.NewChat,currentLeafId:"root",conversationTurns:[],safeUrls:[],isLoading:!k(n),docsReferencedByURL:{},conversationOrigin:null}})}},setThreadModelId:(e,t)=>{let r=R.resolveThreadId(e);A(e=>{let n=e.threads[r];null!=n&&(n.modelId=t)})},updateConversationMode:(e,t)=>{let r=R.resolveThreadId(e);A(e=>{let n=e.threads[r];null!=n&&(n.mode=t)})},getServerThreadId:e=>k(e)?L().clientNewThreadIdToServerIdMapping[e]:e,setServerIdForNewThread:(e,t)=>{void 0===L().clientNewThreadIdToServerIdMapping[e]&&A(r=>{r.threads[t]=r.threads[e],delete r.threads[e],r.clientNewThreadIdToServerIdMapping[e]=t})},initThreadFromServerData:function(e,t){var r,n,a,s,i;let u=arguments.length>2&&void 0!==arguments[2]&&arguments[2],p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,h=arguments.length>4&&void 0!==arguments[4]&&arguments[4],g=R.resolveThreadId(e);if(!h&&(null==L().threads[g]&&!u||(null===(i=L().threads[g])||void 0===i?void 0:i.isLoading)===!1))return;let m=(0,c._J)(t),f=null!==(r=m.mapping)&&void 0!==r?r:d.Cv.createTree(),v={lastModelUsed:function e(t,r,n){var o;if(n)return n;let a=t[r];return null!=a&&null!==(o=a.message)&&void 0!==o&&null!==(o=o.metadata)&&void 0!==o&&o.model_slug?a.message.metadata.model_slug:null!=a&&a.parentId?e(t,a.parentId):null}(m.mapping,m.initialCurrentLeafId,t.default_model_slug),createTime:"create_time"in t?new Date(1e3*t.create_time):void 0,isArchived:null!==(n=t.is_archived)&&void 0!==n&&n},b=new d.Cv(f),x=null!==(a=null!==(s=m.initialCurrentLeafId)&&void 0!==s?s:m.rootId)&&void 0!==a?a:"root",T="has_user_editable_context"in t?{hasUserEditableContextFlag:t.has_user_editable_context,authorName:t.author_name,model:"model"in t&&null!=t.model?(0,l.H)(t.model):void 0}:void 0;A(e=>{var r,n,a,l;let s=e.threads[g];e.threads[g]={modelId:null!==(r=null==s?void 0:s.modelId)&&void 0!==r?r:null,initialThreadData:v,mode:null!=t.gizmo_id?{kind:o.OL.GizmoInteraction,gizmo_id:t.gizmo_id}:{kind:o.OL.PrimaryAssistant,plugin_ids:t.plugin_ids},sharedConversationMetadata:T,title:null!==(n=t.title)&&void 0!==n?n:null,titleSource:N.Server,tree:b,currentLeafId:x,isLoading:!1,continuingFromSharedConversationId:p,safeUrls:null!==(a=t.safe_urls)&&void 0!==a?a:[],conversationTurns:[],docsReferencedByURL:{},conversationOrigin:null!==(l=t.conversation_origin)&&void 0!==l?l:null}}),R.recomputeConversationTurnsForCurrentLeafId(g,[])},updateInitialThreadDataForNewThread:(e,t)=>{let r=R.resolveThreadId(e);A(e=>{let n=e.threads[r];null!=n&&(n.initialThreadData.lastModelUsed=t)})},getThreadCurrentLeafId:e=>{var t,r;let n=R.resolveThreadId(e);return null!==(t=null===(r=L().threads[n])||void 0===r?void 0:r.currentLeafId)&&void 0!==t?t:"root"},getThreadSafeUrls:e=>{var t;let r=R.resolveThreadId(e);return null===(t=L().threads[r])||void 0===t?void 0:t.safeUrls},addThreadSafeUrl:(e,t)=>{let r=R.resolveThreadId(e);r&&A(e=>{let n=e.threads[r];null!=n&&n.safeUrls.push(t)})},setThreadCurrentLeafId:(e,t)=>{let r=R.resolveThreadId(e);null!=L().threads[r]&&A(e=>{let n=e.threads[r];if(null==n)return;n.currentLeafId=t;let o=R.computeThreadConversationTurns(r,n.currentLeafId,n.conversationTurns);n.conversationTurns=o})},setTitle:(e,t,r)=>{let n=R.resolveThreadId(e);A(e=>{let o=e.threads[n];o&&(o.title=t,o.titleSource=r)})},getTitle:e=>{var t,r;let n=U.resolveThreadId(e);return null!==(t=null===(r=L().threads[n])||void 0===r?void 0:r.title)&&void 0!==t?t:void 0},getTitleAndSource:e=>({title:R.getTitle(e),titleSource:U.getThreadTitleSource(e)}),getConversationOrigin:e=>{var t,r;let n=U.resolveThreadId(e);return null!==(t=null===(r=L().threads[n])||void 0===r?void 0:r.conversationOrigin)&&void 0!==t?t:null},setConversationOrigin:(e,t)=>{let r=R.resolveThreadId(e);A(e=>{let n=e.threads[r];n&&(n.conversationOrigin=t)})},deleteNodesByFilter:(e,t)=>{let r=R.getThreadCurrentLeafId(e);R.updateTree(e,n=>{n.deleteNodesByFilter(t).includes(r)&&R.setThreadCurrentLeafId(e,"root")})},updateTree:(e,t)=>{var r,n;let o=R.resolveThreadId(e);if(!(null!=L().threads[o])){console.warn("Thread does not exist, cannot update tree: ",o);return}t(R.getTree(e));let a=null!==(r=null===(n=L().threads[o])||void 0===n?void 0:n.conversationTurns)&&void 0!==r?r:[];R.recomputeConversationTurnsForCurrentLeafId(o,a)},getTree:e=>{var t,r;let n=R.resolveThreadId(e);return null!==(t=null===(r=L().threads[n])||void 0===r?void 0:r.tree)&&void 0!==t?t:_()},resolveThreadId:e=>U.resolveThreadId(e),recomputeConversationTurnsForCurrentLeafId:(e,t)=>{let r=R.resolveThreadId(e);A(e=>{let n=e.threads[r];if(null==n)return;let o=R.computeThreadConversationTurns(r,n.currentLeafId,t);n.conversationTurns=o})},computeThreadConversationTurns:(e,t,r)=>{let n=R.resolveThreadId(e);return R.getTree(n).getConversationTurns(t).map((e,t)=>{let n=null==r?void 0:r[t];return x()(n,e)?n:e})},getThreadConversationTurns:(e,t,r)=>{var n,o,a;let l=R.resolveThreadId(e),s=L().threads[l];if(null==s)return[];let i=s.tree,u=i.messageIdToNodeId(null!==(n=null==s?void 0:s.currentLeafId)&&void 0!==n?n:"root"),d=null!=t?i.messageIdToNodeId(t):null;return null!=d&&d!==u?R.computeThreadConversationTurns(l,d,null!=r?r:[]):null!==(o=null===(a=L().threads[l])||void 0===a?void 0:a.conversationTurns)&&void 0!==o?o:[]},removeContinuingFromSharedConversationId:e=>{let t=R.resolveThreadId(e);A(e=>{let r=e.threads[t];(null==r?void 0:r.continuingFromSharedConversationId)!=null&&delete r.continuingFromSharedConversationId})},updateReferencedDocState:(e,t,r)=>{let n=R.resolveThreadId(e);A(e=>{let o=e.threads[n];o&&(o.docsReferencedByURL[t]=r)})},copyLastMessageToClipboard:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mouse",r=R.getThreadCurrentLeafId(e),n=R.getThreadConversationTurns(e,r);return R.copyMessageToClipboard(e,n.length-1,t)},copyMessageToClipboard:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mouse",n=R.getThreadCurrentLeafId(e),a=R.getThreadConversationTurns(e,n)[t];if(!a)return Promise.reject();let{messages:l}=a,i=l.reduce((e,t)=>t.err||t.message.author.role!==o.uU.Assistant||"all"!==t.message.recipient?e:e+(e?"\n\n":"")+(0,u.RR)(t.message),"");return(0,p.v)(i).then(()=>{let t=R.getServerThreadId(e);t&&s.Z.submitImplicitMessageFeedback({messageId:l[0].message.id,type:"copy",serverThreadId:t,selectedText:i,source:r})})},deleteThread:e=>{A(t=>{delete t.threads[e],delete t.clientNewThreadIdToServerIdMapping[e]})},retainThread:e=>{A(t=>{var r;t.threadRetainCounts[e]=(null!==(r=t.threadRetainCounts[e])&&void 0!==r?r:0)+1}),clearTimeout(D[e])},releaseThread:e=>{null!=L().threads[e]&&(A(t=>{var r;t.threadRetainCounts[e]=Math.max((null!==(r=t.threadRetainCounts[e])&&void 0!==r?r:0)-1,0)}),L().threadRetainCounts[e]>0||(clearTimeout(D[e]),D[e]=setTimeout(()=>{null==L().threads[e]||L().threadRetainCounts[e]>0||R.deleteThread(e)},3e4)))},setPromptGptRating:(e,t)=>{let r=R.resolveThreadId(e);A(e=>{let n=e.threads[r];null!=n&&(null==t?n.promptGptRating=void 0:n.promptGptRating={gizmoId:t})})}};async function Z(e,t){let r=await s.Z.getConversation(e);return h.U.addTiming("chatgpt.web.chatPage.loadExistingConversation"),R.initThreadFromServerData(e,r,t,void 0,t),r}let F=e=>{let t=E(t=>U.getThreadModelId(e,t));return null!=t?t:l.g},B=e=>E(t=>null==e?void 0:k(e)?t.clientNewThreadIdToServerIdMapping[e]:e),G=e=>E(t=>{var r,n;let o=R.resolveThreadId(e);return null!==(r=null===(n=t.threads[o])||void 0===n?void 0:n.initialThreadData)&&void 0!==r?r:P()}),H=(e,t)=>E(r=>{let n=U.getConversationMode(e,r);return t&&((null==n?void 0:n.kind)===o.OL.GizmoInteraction||(null==n?void 0:n.kind)===o.OL.PrimaryAssistant)?{gizmo_id:t,kind:o.OL.GizmoInteraction}:n}),W=e=>{let t=(0,a.rm)();return E(r=>null==r.threads[U.resolveThreadId(e,r)]?t:U.getGizmoId(e,r))},q=e=>E(t=>{var r,n;let o=R.resolveThreadId(e);return null!==(r=null===(n=t.threads[o])||void 0===n?void 0:n.isLoading)&&void 0!==r&&r}),z=e=>E(()=>R.getThreadCurrentLeafId(e)),V=(e,t)=>{let r=(0,y.useRef)([]);return E(()=>{var n;let o=R.getThreadConversationTurns(e,t,r.current);return r.current=o,null!==(n=null==o?void 0:o.length)&&void 0!==n?n:0})},K=(e,t)=>{let r=(0,y.useRef)([]);return E(()=>{let n=R.getThreadConversationTurns(e,t,r.current);return r.current=n,n})},X=(e,t,r)=>{let n=(0,y.useRef)([]);return E(()=>{let o=R.getThreadConversationTurns(e,r,n.current);return n.current=o,t>=0&&t<o.length?o[t]:null})},Y=(e,t)=>{let r=(0,y.useRef)([]);return E(()=>{let n=R.getThreadConversationTurns(e,t,r.current);return r.current=n,n.length>0?n[n.length-1]:null})},J=(e,t)=>{let r=(0,y.useRef)([]);return E(()=>{let n=R.getThreadConversationTurns(e,t,r.current);r.current=n;let a=0;for(let e=n.length-1;e>=0;e--){let t=n[e];if(t.messages.some(e=>{var t;return null===(t=e.message.metadata)||void 0===t?void 0:t.is_indepth_feedback}))return!0;if(t.messages.some(e=>e.message.author.role===o.uU.Assistant)&&a++,a>=3)break}return!1})},Q=(e,t)=>E(()=>{let r=R.resolveThreadId(e);return R.getTree(r).getBranchFromLeaf(t).some(e=>e.message.author.role===o.uU.User)}),$=e=>{let t=z(e);return(0,y.useMemo)(()=>{var r,n;let o=R.getThreadConversationTurns(e,t,[]),a=null!==(r=null==o?void 0:o.length)&&void 0!==r?r:0,l=null!==(n=null==o?void 0:o[a-1])&&void 0!==n?n:null;return 0===a?t:d.Cv.getRequestIdFromConversationTurn(l)},[t,e])},ee=e=>E(()=>R.getTitle(e)),et=e=>(0,w.s)(E,()=>R.getTitleAndSource(e),x()),er=e=>E(()=>{var t;let r=R.resolveThreadId(e);return null===(t=L().threads[r])||void 0===t?void 0:t.continuingFromSharedConversationId}),en=e=>E(()=>{var t;let r=R.resolveThreadId(e);return null===(t=L().threads[r])||void 0===t||null===(t=t.sharedConversationMetadata)||void 0===t?void 0:t.authorName}),eo=(e,t)=>E(()=>{let r=R.getTree(e).getNodeByIdOrMessageId(t);if(null==r)throw Error("useThreadTreeNode: cannot get tree node for ".concat(t," in thread ").concat(e));return r}),ea=(e,t)=>E(()=>{var r,n;return null!==(r=null===(n=R.getTree(e))||void 0===n?void 0:n.getHasErrorFromNode(t))&&void 0!==r&&r}),el=(e,t)=>E(()=>{var r,n;return null!==(r=null===(n=R.getTree(e))||void 0===n?void 0:n.isMessageIncomplete(t))&&void 0!==r&&r}),es=(e,t)=>E(()=>{let r=R.getTree(e);return null==r?[]:r.getBranchFromLeaf(t).filter(e=>e.message.author.role!==o.uU.Root)}),ei=(e,t)=>es(e,t).map(e=>e.message),eu=(e,t)=>E(()=>{let r=R.getTree(e);return null==r?null:r.getLeafFromNode(t)}),ed=(e,t)=>E(()=>{let r=R.getTree(e);return null!=r&&t.map(e=>r.getLeafFromNode(e)).some(e=>r.getHasErrorFromNode(e.id))}),ec=e=>{var t,r,n,o,a;let l=R.getTree(e).getUserContext();if(null==l)return null;let{message:s}=l,i=null!==(t=null===(r=s.metadata)||void 0===r?void 0:r.shared_conversation_id)&&void 0!==t?t:null;if((null===(n=s.metadata)||void 0===n?void 0:n.user_context_message_data)!=null){let{about_user_message:e,about_model_message:t}=s.metadata.user_context_message_data;return{aboutUserMessage:null!==(o=null==e?void 0:e.trim())&&void 0!==o?o:"",aboutModelMessage:null!==(a=null==t?void 0:t.trim())&&void 0!==a?a:"",fallback:null,shareId:i}}return{aboutUserMessage:null,aboutModelMessage:null,fallback:(0,u.RR)(s),shareId:i}},ep=e=>E(t=>{var r;let n=R.resolveThreadId(e);return null===(r=t.threads[n])||void 0===r||null===(r=r.sharedConversationMetadata)||void 0===r?void 0:r.hasUserEditableContextFlag}),eh=e=>!!R.getTree(e).findNode(e=>"model_editable_context"===e.message.content.content_type),eg=e=>{let t=ep(e);return null!=ec(e)||!!t},em=e=>E(()=>{var t;let r=R.resolveThreadId(e);return(null===(t=L().threads[r])||void 0===t?void 0:t.continuingFromSharedConversationId)!=null}),ef=e=>E(()=>"root"===R.getThreadCurrentLeafId(e)),ev=e=>{let t=(0,T.useRouter)(),r=B(e);return!!r&&(!!t.query.convId&&t.query.convId===r||!!v()(t.query.default)&&"c"===t.query.default[0]&&t.query.default[1]===r)},eb=e=>E(()=>{var t;let r=R.resolveThreadId(e);return null===(t=L().threads[r])||void 0===t?void 0:t.promptGptRating}),ex=(e,t)=>E(()=>{let r=R.resolveThreadId(e),n=R.getTree(r).getBranchFromLeaf(t);return m()(n,e=>e.message.author.role===o.uU.System&&"system_content"===e.message.content.content_type)}),eT=()=>null!=(0,y.useContext)(i.gB);function ey(e){let t=R.getTree(e),r=R.getThreadCurrentLeafId(e),n=t.getNodeByIdOrMessageId(r);for(;n;){var o;let e=null===(o=n.message.metadata)||void 0===o?void 0:o.default_model_slug;if(e)return e;if(!n.parentId)return;n=t.getNodeByIdOrMessageId(n.parentId)}}function eC(e){let{clientThreadId:t,role:r}=e;return R.getTree(t).countMessagesByAuthor(r)}function eM(e){let{clientThreadId:t,conversationLeafId:r}=e,n=R.getTree(t);return(0,y.useMemo)(()=>n.getNodeByIdOrMessageId(r).message.end_turn,[r,n])}},31438:function(e,t,r){r.d(t,{B:function(){return h},EV:function(){return T},GK:function(){return C},bM:function(){return b},ss:function(){return M},tN:function(){return v},vm:function(){return x},xH:function(){return y}});var n,o,a,l=r(98601),s=r(99976),i=r(61619),u=r(13249),d=r(92379),c=r(68810);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}let h=((n={}).DownloadMessages="download-messages",n.InviteUsersToWorkspace="invite-users-to-workspace",n.WorkspaceAppearance="workspace-appearance",n.KeyboardActions="keyboard-actions",n.UserContext="user-context",n.WorkspaceSwitcher="workspace-switcher",n.ReadOnlyConversationTemplate="read-only-conversation-template",n.CookieManagement="cookie-management",n.AgeVerificationInterstitial="age-verification-interstitial",n.GPTDetails="gpt-details",n.GPTPrivacySettings="gpt-privacy-settings",n.GPTFeedbackEmail="gpt-support-email",n.GPTReview="gpt-review",n.GPTRemoveThirdParty="gpt-remove-third-party",n.SharedConversationModeration="shared-conversation-moderation",n.ReportConversation="report-conversation",n.BlockingInitialComponent="blocking-initial-component",n.NoAuthNewChat="no-auth-new-chat",n.GlobalMemoryOnboarding="global-memory-onboarding",n),g=u.F.IsNavigationCollapsed,m=u.F.IsHistoryCollapsed,f={isThreadHeaderVisible:!0,isDesktopNavCollapsed:null!==(o=u.m.getItem(g))&&void 0!==o&&o,isVoiceActive:!1,sharingModalThreadId:void 0,leaveWorkspaceData:null,activeSidebar:!1,activeModals:new Set,isLatencyDevToolsVisible:!1,purchaseWorkspaceData:null,isShowingDvdPlayer:!1,isHistoryCollapsed:null===(a=u.m.getItem(m))||void 0===a||a},v=(0,c.Ue)()(()=>(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach(function(t){(0,l.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e})({},f)),b={isThreadHeaderVisible:e=>e.isThreadHeaderVisible,isLatencyDevtoolsVisible:e=>e.isLatencyDevToolsVisible},x={toggleHistoryCollapsed:()=>{v.setState(e=>{let t=!e.isHistoryCollapsed;return u.m.setItem(m,t),s.A.logToggleShowRecents({isOnlyShowingRecents:t}),{isHistoryCollapsed:t}})},toggleDesktopNavCollapsed:()=>{v.setState(e=>{let t=!e.isDesktopNavCollapsed;return u.m.setItem(g,t),s.A.logToggleDesktopNavCollapsed({isDesktopNavCollapsed:t}),{isDesktopNavCollapsed:t}})},closeSidebar:()=>{u.m.setItem(g,!0),s.A.logToggleDesktopNavCollapsed({isDesktopNavCollapsed:!0}),v.setState({isDesktopNavCollapsed:!0})},closeSidebarWithoutSavingPreference:()=>{v.setState({isDesktopNavCollapsed:!0})},openSidebar:()=>{u.m.setItem(g,!1),s.A.logToggleDesktopNavCollapsed({isDesktopNavCollapsed:!1}),v.setState({isDesktopNavCollapsed:!1})},hideThreadHeader:()=>{v.setState({isThreadHeaderVisible:!1})},showThreadHeader:()=>{v.setState({isThreadHeaderVisible:!0})},openSharingModal(e,t){v.setState({sharingModalThreadId:e}),s.A.logEvent(i.M.shareConversationOpenModal,{location:t})},closeSharingModal(){v.setState({sharingModalThreadId:void 0})},setLeaveWorkspaceData(e){v.setState({leaveWorkspaceData:e})},setPurchaseWorkspaceData(e){v.setState({purchaseWorkspaceData:e})},setActiveSidebar(e){v.setState({activeSidebar:e})},toggleActiveSidebar(e){v.setState(t=>({activeSidebar:t.activeSidebar!==e&&e}))},closeActiveSidebar(){v.setState(()=>({activeSidebar:!1}))},toggleModal(e){v.setState(t=>{let r=new Set(t.activeModals);return r.has(e)?r.delete(e):r.add(e),{activeModals:r}})},openModal(e){v.setState(t=>{let r=new Set(t.activeModals);return r.add(e),{activeModals:r}})},closeModal(e){v.setState(t=>{let r=new Set(t.activeModals);return r.delete(e),{activeModals:r}})},hideLatencyDevTools:()=>{v.setState({isLatencyDevToolsVisible:!1})},showLatencyDevTools:()=>{v.setState({isLatencyDevToolsVisible:!0})},showDvdPlayer:()=>{v.setState({isShowingDvdPlayer:!0})},hideDvdPlayer:()=>{v.setState({isShowingDvdPlayer:!1})}};function T(e){return v(t=>t.activeModals.has(e))}function y(){return v(e=>e.isDesktopNavCollapsed)}function C(){return v(e=>e.isShowingDvdPlayer)}function M(){let{0:e,1:t}=(0,d.useState)(!1),r=v(e=>e.activeModals);return(0,d.useEffect)(()=>{t(e=>e||r.has(h.BlockingInitialComponent))},[r]),e}},31498:function(e,t,r){r.d(t,{F_:function(){return f},aF:function(){return h},e2:function(){return b},ec:function(){return m},m0:function(){return v}});var n=r(98601),o=r(49166),a=r(84760),l=r(99333),s=r(2721),i=r(93951);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}async function c(){let e=await s.Z.getMe();return{id:e.id,email:e.email,name:e.name,picture:e.picture,created:e.created}}let p=(0,o.C)({queryKey:["user"],queryFn:c,staleTime:1/0});function h(){return(0,a.a)(p).data}let g={currentWorkspace:null,subscriptionStatus:null,workspaces:[]};function m(e){var t;let r=null!==(t=(0,a.a)(d(d({},(0,i.KP)()),{},{select:e=>{var t,r;let n=(0,i.EI)(e);return{currentWorkspace:null!==(t=null==n?void 0:n.data)&&void 0!==t?t:null,subscriptionStatus:null!==(r=null==n?void 0:n.data.subscriptionStatus)&&void 0!==r?r:null,workspaces:e.accountItems.map(e=>e.data)}}})).data)&&void 0!==t?t:g;return e?e(r):r}let f={hasMultipleWorkspaces:e=>{let{workspaces:t}=e;return t.length>1},isPersonalWorkspace:e=>{let{currentWorkspace:t}=e;return(null==t?void 0:t.structure)===l.CZ.PERSONAL},isBusinessWorkspace:e=>{let{currentWorkspace:t}=e;return null!=t?t.structure===l.CZ.WORKSPACE:void 0},isEnterprisePlan:e=>{let{subscriptionStatus:t}=e;return(null==t?void 0:t.planType)===l.D8.ENTERPRISE},isEduPlan:e=>{let{subscriptionStatus:t}=e;return(null==t?void 0:t.planType)===l.D8.EDU},isEnterpriseyPlan:e=>{let{subscriptionStatus:t}=e;return(null==t?void 0:t.planType)===l.D8.ENTERPRISE||(null==t?void 0:t.planType)===l.D8.EDU},isTeamPlan:e=>{let{subscriptionStatus:t}=e;return(null==t?void 0:t.planType)===l.D8.TEAM},isAdmin:e=>{let{currentWorkspace:t}=e;return null!=t&&t.role===l.r3.ADMIN},isOwner:e=>{let{currentWorkspace:t}=e;return null!=t&&t.role===l.r3.OWNER},workspaceId:e=>{let{currentWorkspace:t}=e;return null!=t?t.id:null},businessWorkspace:e=>{let{currentWorkspace:t}=e;return(null==t?void 0:t.structure)===l.CZ.WORKSPACE?t:void 0},businessWorkspaceId:e=>{let{currentWorkspace:t}=e;return(null==t?void 0:t.structure)===l.CZ.WORKSPACE?t.id:void 0},hasPaidSubscription:e=>{let{subscriptionStatus:t}=e;return null!=t&&t.hasPaidSubscription},wasPaidCustomer:e=>{let{subscriptionStatus:t}=e;return null!=t&&t.wasPaidCustomer},hasCustomerObject:e=>{let{subscriptionStatus:t}=e;return null!=t&&t.hasCustomerObject},hasUnclaimedFreeTrial:e=>{var t;let{currentWorkspace:r}=e;return null==r||null===(t=r.promoData)||void 0===t?void 0:t.has_claimed_free_trial},lastActiveSubscription:e=>{let{subscriptionStatus:t}=e;return null!=t?t.lastActiveSubscription:null},workspaces:e=>{let{workspaces:t}=e;return t},accountUserId:e=>{let{currentWorkspace:t}=e;return null==t?void 0:t.accountUserId}};function v(){let e=(0,i.t)();if(null!=e)return e.hasPlusFeatures()}function b(){var e;return null===(e=(0,i.t)())||void 0===e?void 0:e.data.subscriptionStatus.lastActiveSubscription}},10481:function(e,t,r){r.d(t,{i:function(){return n},l:function(){return o}});let n="https://help.openai.com/en/articles/8096356-custom-instructions-for-chatgpt",o="https://help.openai.com/en/articles/7967234-enabling-multi-factor-authentication-mfa-with-openai#h_488a963a1e"},79746:function(e,t,r){r.d(t,{v:function(){return a}});var n=r(24740);function o(){n.m.danger("Failed to copy to clipboard.",{duration:4,hasCloseButton:!0})}function a(e){return new Promise((t,r)=>{var n;if(!(null!==(n=navigator)&&void 0!==n&&n.clipboard)){o(),r();return}try{navigator.clipboard.writeText(e).then(()=>t("success"),()=>{o(),r()})}catch(e){o(),r()}})}}}]);
//# sourceMappingURL=6013-b37b6722c3838676.js.map