"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2707],{22707:function(e,t,r){r.d(t,{r:function(){return E},wV:function(){return A}});var n,s=r(72438),l=r(25927),i=r(59311),o=r(78751),a=r(71909),c=r(11397),u=r(94643),d=r(45236),m=r(87712),f=r(87806),p=r(83924),x=r(53265),g=r(52866),h=r(19841),v=r(61888),y=r.n(v),j=r(78374),w=r.n(j),k=r(70079),b=r(37659),N=r(84692),O=r(9063),P=r(68498),C=r(21389),D=r(34240),_=r(35250);function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach(function(t){(0,s.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let z=C.Z.div(n||(n=(0,l.Z)(["group flex h-10 items-center gap-2 rounded-lg px-2 font-medium hover:bg-token-main-surface-secondary text-sm text-token-text-primary"])));function E(){let{data:e,isLoading:t}=(0,a.Fi)({cutId:"recent",limit:8}),{data:r,isLoading:n}=(0,a.Dq)();return{isLoading:t||n,recent:e,pinned:r}}let I=(0,k.forwardRef)(function(e,t){let{query:r,onSelectGizmo:n,selectedIdx:s}=e,l=(0,p.oc)(),o=(0,k.useRef)([]),{isLoading:a,recent:c,pinned:d}=E();(0,k.useImperativeHandle)(t,()=>({handleEnterOnIndex:e=>{if(!f[e])return e<m.length?m[e].resource:"create"},getResultsLength:()=>m.length+1,scrollToItem:e=>{let t=o.current[e];t&&t.scrollIntoView({behavior:"instant",block:"nearest"})}}));let m=[];if(a)return(0,_.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,_.jsx)(i.Z,{})});c&&m.push(...c.pages.flatMap(e=>e.list.items).map(e=>({resource:e.resource,from:"recent"}))),d&&m.push(...d.items.map(e=>({resource:e,from:"pinned"})));let f=(m=y().uniqBy(m,e=>e.resource.gizmo.id)).map(e=>{var t;return null===(t=e.resource.gizmo.tags)||void 0===t?void 0:t.includes(u.U9.WorkspaceDisabled)});return r&&""!==r&&(m=m.filter(e=>{var t,n;return(e.resource.gizmo.display.name.toLowerCase()+(null===(t=e.resource.gizmo.display.description)||void 0===t?void 0:t.toLowerCase())+(null===(n=e.resource.gizmo.author.display_name)||void 0===n?void 0:n.toLowerCase())).includes(null==r?void 0:r.toLowerCase())})),(0,_.jsxs)("div",{className:"max-h-40 overflow-y-auto",children:[m.map((e,t)=>(0,_.jsx)("div",{ref:e=>o.current[t]=e,tabIndex:t,onClick:()=>{f[t]||n(e.resource)},children:(0,_.jsx)(Z,{gizmoResource:e.resource,from:e.from,showDescription:l,isSelected:s===t,grayedOut:f[t]})},e.resource.gizmo.id)),(0,_.jsx)("div",{ref:e=>o.current[m.length]=e,tabIndex:m.length,onClick:()=>{n("create")},children:(0,_.jsx)(M,{isSelected:s===m.length})},"create")]})}),M=e=>{let{isSelected:t}=e;return(0,_.jsx)(z,{className:t?"bg-token-main-surface-secondary":"",children:(0,_.jsxs)(w(),{href:"/gpts/editor",target:"_blank",className:"flex flex-row space-x-2",children:[(0,_.jsx)("span",{className:"self-center",children:(0,_.jsx)(b.OvN,{className:"icon-sm"})}),(0,_.jsx)("span",{children:(0,_.jsx)(N.Z,T({},S.dropdownCreateLabel))})]})})},B=e=>{let{gizmoFeatureRateLimit:t}=e;return(0,_.jsx)("div",{className:"flex items-center px-2 py-1 text-token-text-primary [text-wrap:pretty]",children:(0,_.jsx)(D.c,{rateLimitWithBannerDescription:t})})},R=e=>{let{onClick:t,onClose:r}=e,{0:n,1:s}=(0,k.useState)(null),l=(0,k.useRef)(null),i=(0,k.useRef)(null),{0:o,1:a}=(0,k.useState)(0),c=(0,O.Z)(),u=e=>{x.A.logEvent(g.M.mentionsClickGizmo,{gizmo_id:"create"===e?"create":e.gizmo.id}),"create"!==e&&t(e)};return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("input",{autoFocus:!0,placeholder:c.formatMessage(S.searchPlaceholder),ref:l,onKeyDown:e=>{var t,s,l,c,d;let m=null!==(t=null===(s=i.current)||void 0===s?void 0:s.getResultsLength())&&void 0!==t?t:0;if("Escape"!==e.key&&("Backspace"!==e.key||n)||(e.preventDefault(),r()),"Enter"===e.key||"Tab"===e.key){e.preventDefault();let t=null===(l=i.current)||void 0===l?void 0:l.handleEnterOnIndex(o);if(!t)return;"create"===t?(window.open("/gpts/editor","_blank"),r()):u(t)}if("ArrowDown"===e.key&&o<m-1){e.preventDefault();let t=o+1;null===(c=i.current)||void 0===c||c.scrollToItem(t),a(t)}if("ArrowUp"===e.key&&o>0){e.preventDefault();let t=o-1;null===(d=i.current)||void 0===d||d.scrollToItem(t),a(t)}},onChange:e=>{s(e.target.value),a(0)},className:"mb-1 w-full border-0 bg-token-main-surface-primary p-2 text-sm focus:outline-none"}),(0,_.jsx)(I,{ref:i,query:n,selectedIdx:o,onSelectGizmo:u})]})};function Z(e){var t;let{gizmoResource:r,from:n,showDescription:s,isSelected:l,grayedOut:i}=e,a=!!(null===(t=r.gizmo.tags)||void 0===t?void 0:t.includes(u.U9.FirstParty));return(0,_.jsxs)(z,{className:(0,h.default)(l?"bg-token-main-surface-secondary":"",i&&"opacity-50"),children:[(0,_.jsx)(o.Z,{isFirstParty:a,src:r.gizmo.display.profile_picture_url,className:(0,h.default)("icon-xl h-7 w-7 flex-shrink-0",i&&"grayscale group-hover:grayscale-0")}),(0,_.jsxs)("div",{className:"flex h-fit grow flex-row justify-between space-x-2 overflow-hidden text-ellipsis whitespace-nowrap",children:[(0,_.jsxs)("div",{className:"flex flex-row space-x-2",children:[(0,_.jsx)("span",{className:"shrink-0 truncate",children:r.gizmo.display.name}),s&&(0,_.jsx)("span",{className:"flex-grow truncate text-sm font-light text-token-text-tertiary sm:max-w-xs lg:max-w-md",children:r.gizmo.display.description})]}),(0,_.jsx)("span",{className:"shrink-0 self-center",children:"recent"===n?(0,_.jsx)(b.TCC,{className:"icon-sm"}):(0,_.jsx)(c.pI,{className:"icon-sm"})})]})]})}function A(e){var t;let{gizmoResource:r,onRemove:n}=e,s=!!(null===(t=r.gizmo.tags)||void 0===t?void 0:t.includes(u.U9.FirstParty));return(0,_.jsxs)("div",{className:"flex w-full flex-row items-center rounded-t-2xl bg-token-main-surface-secondary px-2 py-1",children:[(0,_.jsxs)("div",{className:(0,h.default)("group flex h-10 items-center gap-2 rounded-lg px-2 font-medium"),children:[(0,_.jsx)(o.Z,{isFirstParty:s,src:r.gizmo.display.profile_picture_url,className:"h-6 w-6 flex-shrink-0"}),(0,_.jsxs)("div",{className:"space-x-2 overflow-hidden text-ellipsis text-sm font-light text-token-text-tertiary",children:[(0,_.jsx)(N.Z,T({},S.talkingTo))," ",(0,_.jsx)("span",{className:"font-medium text-token-text-secondary",children:r.gizmo.display.name})]})]}),n&&(0,_.jsx)("button",{className:"absolute right-4 text-sm font-bold",onClick:n,children:(0,_.jsx)(c.v7,{className:"icon-md text-token-text-secondary hover:text-token-text-primary"})})]})}let S=(0,P.vU)({talkingTo:{id:"TaggingDropdown.talkingTo",defaultMessage:"Talking to"},dropdownCreateLabel:{id:"TaggingDropdown.dropdownCreateLabel",defaultMessage:"Create a GPT"},searchPlaceholder:{id:"TaggingDropdown.searchPlaceholder",defaultMessage:"Search recent and pinned GPTs"}});t.ZP=e=>{let{onClick:t,onClose:r}=e,n=(0,m.Ib)(),s=!!n&&(0,f.PX)(n);return(0,d.n)(()=>{x.A.logEvent(g.M.mentionsOpened,{gizmo_selector_disabled:s})}),(0,_.jsx)("div",{onBlur:e=>{e.currentTarget.contains(e.relatedTarget)||r()},className:"popover rounded-2xl border border-token-border-light bg-token-main-surface-primary p-2 shadow-lg",children:s?(0,_.jsx)(B,{gizmoFeatureRateLimit:n}):(0,_.jsx)(R,{onClick:t,onClose:r})})}},10431:function(e,t,r){r.d(t,{C:function(){return l}});var n=r(19841),s=r(35250);function l(e){let{children:t,className:r}=e;return(0,s.jsx)("div",{className:(0,n.default)("w-full rounded-2xl bg-token-main-surface-secondary px-5 py-3 text-token-text-primary [text-wrap:pretty] lg:mx-auto",r),children:t})}},34240:function(e,t,r){r.d(t,{W:function(){return N},c:function(){return b}});var n=r(61145),s=r(53221),l=r(72438),i=r(63081),o=r(73171),a=r(19841),c=r(84692),u=r(35250);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach(function(t){(0,l.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let f=e=>{let{actions:t,text:r,onDismiss:n}=e;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"flex-grow text-sm",children:r}),(0,u.jsx)(p,{actions:t,className:"ml-4 shrink-0"}),n?(0,u.jsx)(i.z,{className:"ml-3 shrink-0 cursor-pointer p-0 text-token-text-tertiary",color:"none",onClick:n,children:(0,u.jsx)(o.tPq,{className:"icon-md"})}):null]})};function p(e){let{actions:t={},className:r}=e,{primaryAction:n,secondaryAction:s}=t;if(!n&&!s)return null;let l=n&&(0,u.jsx)(i.z,{onClick:n.onClick,size:"small",color:s?"dark":"neutral",children:(0,u.jsx)(c.Z,m({},n.text))}),o=s&&(0,u.jsx)(i.z,{onClick:s.onClick,size:"small",color:"neutral",children:(0,u.jsx)(c.Z,m({},s.text))});return(0,u.jsxs)("div",{className:(0,a.default)("flex gap-2",r),children:[l,o]})}var x=r(45236),g=r(87806),h=r(53265),v=r(68498),y=r(10431),j=r(84022),w=r(41947);let k=e=>{let{clientThreadId:t,location:r,primaryAction:n,rateLimitWithBannerDescription:s,description:l,onDismiss:i}=e,o={primaryAction:n,secondaryAction:function(e){let{location:t,rateLimit:r,hasNoAvailableModels:n,updateModelQueryParam:s}=e;if(!n||!(0,g.Qh)(r))return null;let{limit_details:{next_model_slug:l}}=r;return{text:O.newChatButton,onClick:()=>{s({modelId:l,location:t})}}}({location:r,hasNoAvailableModels:(0,j.y)(t),updateModelQueryParam:(0,w.fm)(!0),rateLimit:s})};return(0,u.jsx)(f,{text:l,actions:o,onDismiss:i})},b=e=>{let{clientThreadId:t,rateLimitWithBannerDescription:r,onDismiss:l}=e,{call_to_action:i,display_description:o}=r,{type:a,description:c}=o;(0,x.n)(()=>{var e;h.A.logRateLimitBannerShown({location:a,type:null!==(e=(0,g.EJ)(r))&&void 0!==e?e:"unknown"})});let d=i?i===n.Pt.GET_PLUS?{text:O.getPlusButton,onClick:()=>{var e;h.A.logRateLimitGetPlusButtonClicked({type:null!==(e=(0,g.EJ)(r))&&void 0!==e?e:"unknown",location:a}),(0,s.MG)()}}:void 0:null;return null!=t?(0,u.jsx)(k,{clientThreadId:t,location:a,description:c,onDismiss:l,primaryAction:d,rateLimitWithBannerDescription:r}):(0,u.jsx)(f,{text:c,actions:{primaryAction:d},onDismiss:l})},N=e=>{let{clientThreadId:t,rateLimitWithBannerDescription:r,onDismiss:n}=e;return(0,u.jsx)(y.C,{className:"flex items-center",children:(0,u.jsx)(b,{clientThreadId:t,rateLimitWithBannerDescription:r,onDismiss:n})})},O=(0,v.vU)({getPlusButton:{id:"TeyLcp",defaultMessage:"Get Plus"},newChatButton:{id:"7OvnJ5",defaultMessage:"New chat"}})},36638:function(e,t,r){r.d(t,{N:function(){return a}});var n=r(1423),s=r(57680),l=r(70079),i=r(83869),o=r(88342);let a=e=>{let{clientThreadId:t,categories:r}=e,a=(0,o.ZP)(),c=(0,s.g)(),u=(0,i.V)({clientThreadId:t});return(0,l.useMemo)(()=>{let e=[],t=[];if(!a.length)return{isLoadingModels:!0,availableModels:e,deniedModels:t};if(!c&&!(null!=r&&r.length))return{availableModels:e,deniedModels:t};for(let l of a){var s;let{value:i,categoryId:a}=l;if(!c&&r&&!(0,n.r)(r,a)||c&&(0,o.B$)(a))continue;let d=null!==(s=u[i])&&void 0!==s?s:{},{conversation:m=[],regenerate:f=[]}=d;m.length||f.length?t.push({model:l,denials:d}):e.push(l)}return{availableModels:e,deniedModels:t}},[a,r,c,u])}},84022:function(e,t,r){r.d(t,{y:function(){return i}});var n=r(36638),s=r(88342),l=r(41947);let i=e=>{let{isLoading:t}=(0,l.Y7)(),{availableModels:r}=(0,n.N)({clientThreadId:e,categories:s.ok});return!t&&!r.length}},83869:function(e,t,r){r.d(t,{V:function(){return i}});var n=r(61145),s=r(87712),l=r(69677);function i(e){var t,r;let{clientThreadId:i}=e,o=l.tQ.getThreadCurrentLeafId(i),a=null!==(t=null===(r=l.tQ.getTree(i).getMessage(o).metadata)||void 0===r?void 0:r.model_switcher_deny)&&void 0!==t?t:[],c={};return a.forEach(e=>{var t,r;let{slug:n,context:s,reason:l,description:i}=e,o=null!==(t=c[n])&&void 0!==t?t:{},a=null!==(r=o[s])&&void 0!==r?r:[];a.push({reason:l,description:i}),o[s]=a,c[n]=o}),(0,s.dt)().forEach(e=>{let t=e.limit_details.model_slug,r=e.resets_after;[n.UB.CONVERSATION,n.UB.REGENERATE].forEach(e=>{var s,l;let i=null!==(s=c[t])&&void 0!==s?s:{},o=null!==(l=i[e])&&void 0!==l?l:[],a={reason:n.Ls.RATE_LIMIT,resetsAfter:r};o.push(a),i[e]=o,c[t]=i})}),c}},45236:function(e,t,r){r.d(t,{n:function(){return s}});var n=r(70079);let s=e=>{(0,n.useEffect)(e,[])}}}]);
//# sourceMappingURL=2707-1da21b3ef23ab991.js.map