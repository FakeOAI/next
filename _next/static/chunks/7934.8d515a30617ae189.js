"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7934],{7934:function(e,n,t){t.r(n),t.d(n,{default:function(){return b}});var a,s=t(94521),r=t(85734),i=t(48580),l=t(26123),o=t(25940),u=t(33423),c=t(96294),d=t(44512),g=t(58086),p=t(72427),m=t(651);function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(Object(t),!0).forEach(function(n){(0,s.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var v=((a=v||{}).Planning="planning",a.Running="running",a.Done="done",a.Stopped="stopped",a);function b(e){let n,{messages:t}=e,a=(0,i.sB)("chatgpt-simple-browse-tool-indicator").value,s=(0,l.Z)(),[o,f]=t,b=function(e,n){var t,a,s;let i;let l=null!==(t=null==n||null===(a=n.message.metadata)||void 0===a||null===(a=a.parallel_browse)||void 0===a?void 0:a.frontend_info.sub_agent_infos)&&void 0!==t?t:null===(s=e.message.metadata)||void 0===s||null===(s=s.parallel_browse)||void 0===s?void 0:s.frontend_info.sub_agent_infos,o=0,u=0;null!=l&&(o=(i=Object.values(Object.values(l).reduce((e,n)=>{let t=n.task_index;return null==e[t]&&(e[t]=[]),e[t].push(n),e},{})).map(e=>h(h({},e[0]),{},{status:function(e){let n=e.map(e=>e.status);for(let e of[r.RF.Starting,r.RF.Running,r.RF.Done,r.RF.Error,r.RF.Timeout,r.RF.Cancelled])if(n.some(n=>n===e))return e;return r.RF.Starting}(e)})).sort((e,n)=>e.task_index-n.task_index)).length,u=i.filter(j).length);let c=v.Planning;return(0,p.We)(e.message)?c=v.Stopped:null!=n&&(c=u===o?v.Done:v.Running),{status:c,subAgentInfos:i,numTotalSubAgents:o,numCompletedSubAgents:u}}(o,f),w=u.X.Running,k=x.creatingPlan;switch(b.status){case v.Running:b.numTotalSubAgents>0&&b.numCompletedSubAgents/b.numTotalSubAgents>=.75?k=x.almostDone:(k=x.running,n={numTasks:b.numTotalSubAgents});break;case v.Done:w=u.X.Finished,k=void 0;break;case v.Stopped:w=u.X.Stopped,k=x.cancelled;case v.Planning:}let y=k?s.formatMessage(k,n):null;return a?(0,m.jsx)(d.D,{highlightedCommand:y,status:w,showWorkUserSetting:!1}):(0,m.jsx)(u.Z,{conversationMessages:t,icon:c.Ts,status:w,text:y,estimatedToolDurationMs:g.kA,animationLoopDurationMs:3500})}function j(e){return e.status===r.RF.Done||e.status===r.RF.Timeout||e.status===r.RF.Error||e.status===r.RF.Cancelled}let x=(0,o.vU)({creatingPlan:{id:"parallelBrowsingMessage.creatingPlanV2",defaultMessage:"Making a research plan"},running:{id:"parallelBrowsingMessage.running_2",defaultMessage:"Visiting {numTasks, plural, one {# site} other {# sites}}"},almostDone:{id:"parallelBrowsingMessage.almostDone",defaultMessage:"Almost done"},cancelled:{id:"parallelBrowsingMessage.cancelledV2",defaultMessage:"Stopped doing research"},done:{id:"parallelBrowsingMessage.done",defaultMessage:"Finished research"}})},44512:function(e,n,t){t.d(n,{D:function(){return p}});var a,s=t(41141),r=t(33481),i=t(19841),l=t(7290),o=t(58164),u=t(92379),c=t(74091),d=t(33423),g=t(651);function p(e){let{highlightedCommand:n,status:t,children:a,showWorkUserSetting:s=!1,hideOnlyIfNotInteractedWith:c=!1}=e,p=null!=a,{0:f}=(0,u.useState)(s),{0:h,1:v}=(0,u.useState)(s),{0:b,1:j}=(0,u.useState)(!1);return t!==d.X.Finished&&t!==d.X.Error||!c||f||b?p?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(m,{$canShowWork:!0,children:(0,g.jsx)(l.M,{children:(0,g.jsx)(o.E.button,{onClick:()=>{v(e=>!e),j(!0)},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:(0,i.default)(t===d.X.Running&&"loading-shimmer","group absolute left-0 top-0 mr-1.5 h-[26px] overflow-hidden juice:h-8"),children:(0,g.jsxs)("div",{className:"flex items-center justify-start gap-1",children:[(0,g.jsx)("span",{children:n}),h?(0,g.jsx)(r.r0F,{className:"icon-md group-hover:visible md:invisible"}):(0,g.jsx)(r.Tg4,{className:"icon-md group-hover:visible md:invisible"})]})},null==n?void 0:n.toString())})}),(0,g.jsx)(l.M,{children:h&&a&&(0,g.jsx)(o.E.div,{initial:"collapsed",animate:"reveal",exit:"collapsed",variants:{collapsed:{translateY:-20,opacity:0,height:0},reveal:{translateY:0,opacity:1,height:"auto"}},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:a})})]}):(0,g.jsx)(m,{$canShowWork:!1,children:n}):null}let m=c.Z.p(a||(a=(0,s.Z)(["juice:first:mt-0 my-1.5 relative h-[26px] juice:h-8\n",""])),e=>{let{$canShowWork:n}=e;return n?"text-token-text-secondary hover:text-token-text-primary":"text-token-text-secondary"})}}]);
//# sourceMappingURL=7934.8d515a30617ae189.js.map