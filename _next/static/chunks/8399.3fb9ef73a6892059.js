(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8399],{34598:function(e,t,r){var n=r(85036);e.exports=function(e,t){return!!(null==e?0:e.length)&&n(e,t,0)>-1}},60510:function(e){e.exports=function(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}},85036:function(e,t,r){var n=r(83663),i=r(18826),a=r(31154);e.exports=function(e,t,r){return t==t?a(e,t,r):n(e,i,r)}},18826:function(e){e.exports=function(e){return e!=e}},18296:function(e,t,r){var n=r(25561),i=r(34598),a=r(60510),o=r(8529),s=r(33295),l=r(33005);e.exports=function(e,t,r){var u=-1,c=i,d=e.length,f=!0,g=[],m=g;if(r)f=!1,c=a;else if(d>=200){var h=t?null:s(e);if(h)return l(h);f=!1,c=o,m=new n}else m=t?[]:g;e:for(;++u<d;){var v=e[u],x=t?t(v):v;if(v=r||0!==v?v:0,f&&x==x){for(var p=m.length;p--;)if(m[p]===x)continue e;t&&m.push(x),g.push(v)}else c(m,x,r)||(m!==g&&m.push(x),g.push(v))}return g}},33295:function(e,t,r){var n=r(353),i=r(91530),a=r(33005),o=n&&1/a(new n([,-0]))[1]==1/0?function(e){return new n(e)}:i;e.exports=o},31154:function(e){e.exports=function(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return -1}},96594:function(e,t,r){var n=r(61757),i=r(18296);e.exports=function(e,t){return e&&e.length?i(e,n(t,2)):[]}},98303:function(e,t,r){"use strict";r.d(t,{C:function(){return i}});var n=r(93951);function i(e){let t=(0,n.hz)();return!n.t()?.isWorkspaceAccount()||(t?.includes(e)??!1)}},20053:function(e,t,r){"use strict";r.d(t,{H:function(){return k}});var n=r(98601),i=r(11550),a=r(66587),o=r(24434),s=r(99555),l=r(24740),u=r(31438),c=r(31498),d=r(84760),f=r(99976),g=r(61619),m=r(19841),h=r(92379),v=r(49764),x=r(75325),p=r(47584),w=r(30853),b=r(11433),y=r(39004),M=r(10080),j=r(651);function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let k=e=>{let{rating:t,onRating:r,className:n}=e,{0:i,1:a}=(0,h.useState)(),o=(0,v.Z)();return(0,j.jsx)("div",{className:(0,m.default)("flex flex-row",n),children:[1,2,3,4,5].map(e=>{let n=(0,j.jsx)(b.e0l,{className:(0,m.default)("icon-2xl cursor-pointer",(i??t??0)>=e?function(e,t){let r=e??t??0;return(0,m.default)(null!=e&&e!=t&&"opacity-50 dark:opacity-60",r>4?"text-brand-purple":r>3?"text-green-500":r>2?"text-yellow-500":r>1?"text-orange-500":"text-red-500")}(i,t):"text-token-main-surface-tertiary")}),s=function(e){switch(e){case 1:return P.hoverRating1;case 2:return P.hoverRating2;case 3:return P.hoverRating3;case 4:return P.hoverRating4;case 5:return P.hoverRating5}}(i??0),l=s&&o.formatMessage(s);return(0,j.jsx)("div",{onClick:()=>{r(e)},onMouseEnter:()=>{a(e)},onMouseLeave:()=>{a(void 0)},className:"p-1",children:s?(0,j.jsx)(w.u,{label:l,side:"top",sideOffset:4,children:n}):n},e)})})},O=e=>{var t;let{gizmo:r}=e,n=(0,c.aF)(),p=()=>u.vm.closeModal(u.B.GPTReview),b=(0,v.Z)(),{0:R,1:O}=(0,h.useState)(""),{0:G,1:N}=(0,h.useState)(!1),C=(t=r.gizmo.id,(0,d.a)({queryFn:async()=>s.U.getUserReview(t),queryKey:["gizmo","review",{gizmoId:t}],enabled:null!=t})),S=(0,y.K7)(r.gizmo.id),{0:E,1:Z}=(0,h.useState)(),T=E===C.data?.rating;(0,h.useEffect)(()=>{null!=C.data&&null==E&&Z(C.data.rating)},[C.data,E]),(0,h.useEffect)(()=>{f.A.logEvent(g.M.showRatingModal,{gizmo_id:r.gizmo.id})},[r.gizmo.id]);let _=null!=C.data,F=!r.gizmo.tags?.includes(M.U9.FirstParty)&&r.gizmo.author.will_receive_support_emails;return(0,j.jsx)(o.Z,{type:"success",title:(0,j.jsxs)("div",{children:[(0,j.jsx)(x.Z,z({},P.title)),(0,j.jsxs)("div",{className:"align-end mt-2 flex text-sm font-normal",children:[_?(0,j.jsx)(x.Z,z({},P.subtitleChange)):(0,j.jsx)(x.Z,z({},P.subtitle)),(0,j.jsx)(w.u,{label:b.formatMessage(P.subtitleTooltip),className:"ml-1 flex cursor-pointer items-center pl-1",sideOffset:0,children:(0,j.jsx)("div",{className:"icon-xs flex items-center justify-center rounded-full border border-token-text-tertiary text-[8px] font-bold text-token-text-tertiary",children:"i"})})]})]}),isOpen:!0,onClose:p,size:"custom",showCloseButton:!0,className:"max-w-xl overflow-y-auto",hideSeparator:!0,children:(0,j.jsxs)("div",{className:"flex flex-grow flex-col space-y-8",children:[(0,j.jsx)(k,{rating:E,onRating:Z,className:"mx-auto flex flex-row items-center"}),F&&(0,j.jsxs)("div",{children:[(0,j.jsx)(a.Z,{className:"mb-1 w-full resize-none overflow-y-auto rounded-md bg-transparent focus:border-gray-200 focus:ring-gray-200 dark:focus:border-white dark:focus:ring-white",placeholder:b.formatMessage(P.messagePlaceholder),value:R,rows:1,onChange:e=>O(e.target.value)}),(0,j.jsxs)("div",{className:(0,m.default)("flex flex-row items-center space-x-2 self-start",R.length>0?"text-token-text-primary":"text-token-text-tertiary"),children:[(0,j.jsx)("input",{type:"checkbox",className:"rounded",checked:G,onChange:e=>N(e.target.checked)}),n&&(0,j.jsx)("span",{className:"text-sm",children:(0,j.jsx)(x.Z,z(z({},P.includeFrom),{},{values:{email:(0,j.jsx)("strong",{children:n.email})}}))})]})]}),(0,j.jsx)(i.z,{color:"primary",disabled:T,onClick:async()=>{if(null==E){l.m.warning("Please select a rating");return}f.A.logEvent(g.M.submitRatingModal,{gizmo_id:r.gizmo.id,rating:E}),await S.mutateAsync({rating:E,message:R.length>0?R:void 0,includeFrom:R.length>0?G:void 0}),l.m.success(b.formatMessage(P.successToast),{duration:3}),p()},children:(0,j.jsx)(x.Z,z({},P.submit))})]})})},P=(0,p.vU)({title:{id:"GizmoReviewModal.title",defaultMessage:"Leave Feedback"},subtitle:{id:"GizmoReviewModal.subtitle",defaultMessage:"How would you rate this GPT?"},subtitleChange:{id:"GizmoReviewModal.subtitleChange",defaultMessage:"Would you like to change your rating?"},subtitleTooltip:{id:"GizmoReviewModal.subtitleTooltip",defaultMessage:"Stars will be public and anonymous"},messagePlaceholder:{id:"GizmoReviewModal.messagePlaceholder",defaultMessage:"Add an optional private email to the creator"},submit:{id:"GizmoReviewModal.submit",defaultMessage:"Submit"},successToast:{id:"GizmoReviewModal.successToast",defaultMessage:"Review sent"},includeFrom:{id:"GizmoReviewModal.includeFrom",defaultMessage:"Include my email address {email}"},hoverRating1:{id:"GizmoReviewModal.hoverRating1",defaultMessage:"Bad"},hoverRating2:{id:"GizmoReviewModal.hoverRating2",defaultMessage:"Okay"},hoverRating3:{id:"GizmoReviewModal.hoverRating3",defaultMessage:"Good"},hoverRating4:{id:"GizmoReviewModal.hoverRating4",defaultMessage:"Great!"},hoverRating5:{id:"GizmoReviewModal.hoverRating5",defaultMessage:"Excellent!"}});t.Z=e=>{let{gizmo:t}=e;return(0,u.EV)(u.B.GPTReview)?(0,j.jsx)(O,{gizmo:t}):null}},85302:function(e,t,r){"use strict";function n(e){try{let t=new Intl.Segmenter("en-US",{granularity:"grapheme"}).segment(e),r=[];for(let e of t)r.push(e.segment);return r}catch{return e.split("")}}function i(e){let t=[];for(let r=0;r<e.length;r++){let n=e.codePointAt(r);void 0!==n&&(t.push(n),n>65535&&r++)}return t}function a(e){return String.fromCodePoint(...e)}r.d(t,{Jx:function(){return n},dP:function(){return a},km:function(){return i}})}}]);
//# sourceMappingURL=8399.3fb9ef73a6892059.js.map