(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3776],{34598:function(e,t,r){var n=r(85036);e.exports=function(e,t){return!!(null==e?0:e.length)&&n(e,t,0)>-1}},60510:function(e){e.exports=function(e,t,r){for(var n=-1,s=null==e?0:e.length;++n<s;)if(r(t,e[n]))return!0;return!1}},85036:function(e,t,r){var n=r(83663),s=r(18826),o=r(31154);e.exports=function(e,t,r){return t==t?o(e,t,r):n(e,s,r)}},18826:function(e){e.exports=function(e){return e!=e}},18296:function(e,t,r){var n=r(25561),s=r(34598),o=r(60510),a=r(8529),i=r(33295),c=r(33005);e.exports=function(e,t,r){var l=-1,u=s,d=e.length,f=!0,p=[],m=p;if(r)f=!1,u=o;else if(d>=200){var g=t?null:i(e);if(g)return c(g);f=!1,u=a,m=new n}else m=t?[]:p;e:for(;++l<d;){var x=e[l],h=t?t(x):x;if(x=r||0!==x?x:0,f&&h==h){for(var y=m.length;y--;)if(m[y]===h)continue e;t&&m.push(h),p.push(x)}else u(m,h,r)||(m!==p&&m.push(h),p.push(x))}return p}},33295:function(e,t,r){var n=r(353),s=r(91530),o=r(33005),a=n&&1/o(new n([,-0]))[1]==1/0?function(e){return new n(e)}:s;e.exports=a},31154:function(e){e.exports=function(e,t,r){for(var n=r-1,s=e.length;++n<s;)if(e[n]===t)return n;return -1}},96594:function(e,t,r){var n=r(61757),s=r(18296);e.exports=function(e,t){return e&&e.length?s(e,n(t,2)):[]}},93776:function(e,t,r){"use strict";r.d(t,{r:function(){return D},wV:function(){return I}});var n=r(98601),s=r(16757),o=r(97537),a=r(12128),i=r(39004),c=r(10080),l=r(73392),u=r(9026),d=r(15913),f=r(99976),p=r(61619),m=r(19841),g=r(96594),x=r.n(g),h=r(24098),y=r.n(h),b=r(92379),w=r(75325),j=r(49764),v=r(47584),k=r(15478),O=r(11433),P=r(58224),C=r(651);function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let T=k.Z.div`group flex h-10 items-center gap-2 rounded-lg px-2 hover:bg-token-main-surface-secondary text-sm text-token-text-primary`;function D(){let{data:e,isLoading:t}=(0,i.Fi)({cutId:"recent",limit:8}),{data:r,isLoading:n}=(0,i.Dq)();return{isLoading:t||n,recent:e,pinned:r}}let z=(0,b.forwardRef)(function(e,t){let{query:r,onSelectGizmo:n,selectedIdx:s}=e,a=(0,d.oc)(),i=(0,b.useRef)([]),{isLoading:l,recent:u,pinned:f}=D();(0,b.useImperativeHandle)(t,()=>({handleEnterOnIndex:e=>{if(!m[e])return e<p.length?p[e].resource:"create"},getResultsLength:()=>p.length+1,scrollToItem:e=>{let t=i.current[e];t&&t.scrollIntoView({behavior:"instant",block:"nearest"})}}));let p=[];if(l)return(0,C.jsx)("div",{className:"absolute right-4 top-0 flex h-full items-center justify-center",children:(0,C.jsx)(o.Z,{})});u&&p.push(...u.pages.flatMap(e=>e.list.items).map(e=>({resource:e.resource,from:"recent"}))),f&&p.push(...f.items.map(e=>({resource:e,from:"pinned"})));let m=(p=x()(p,e=>e.resource.gizmo.id)).map(e=>e.resource.gizmo.tags?.includes(c.U9.WorkspaceDisabled));return r&&""!==r&&(p=p.filter(e=>(e.resource.gizmo.display.name.toLowerCase()+e.resource.gizmo.display.description?.toLowerCase()+e.resource.gizmo.author.display_name?.toLowerCase()).includes(r?.toLowerCase()))),(0,C.jsxs)("div",{className:"max-h-40 overflow-y-auto",children:[p.map((e,t)=>(0,C.jsx)("div",{ref:e=>{i.current[t]=e},tabIndex:t,onClick:()=>{m[t]||n(e.resource)},children:(0,C.jsx)(E,{gizmoResource:e.resource,from:e.from,showDescription:a,isSelected:s===t,grayedOut:m[t]})},e.resource.gizmo.id)),(0,C.jsx)("div",{ref:e=>{i.current[p.length]=e},tabIndex:p.length,onClick:()=>{n("create")},children:(0,C.jsx)(L,{isSelected:s===p.length})},"create")]})}),L=e=>{let{isSelected:t}=e;return(0,C.jsx)(T,{className:t?"bg-token-main-surface-secondary":"",children:(0,C.jsxs)(y(),{href:"/gpts/editor",target:"_blank",className:"flex flex-row space-x-2 font-semibold",children:[(0,C.jsx)("span",{className:"self-center",children:(0,C.jsx)(O.Vz5,{className:"icon-sm"})}),(0,C.jsx)("span",{children:(0,C.jsx)(w.Z,_({},S.dropdownCreateLabel))})]})})},A=e=>{let{onClick:t,onClose:r}=e,{0:n,1:s}=(0,b.useState)(null),o=(0,b.useRef)(null),a=(0,b.useRef)(null),{0:i,1:c}=(0,b.useState)(0),l=(0,j.Z)(),u=e=>{f.A.logEvent(p.M.mentionsClickGizmo,{gizmo_id:"create"===e?"create":e.gizmo.id}),"create"!==e&&t(e)};return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("input",{autoFocus:!0,placeholder:l.formatMessage(S.searchPlaceholder),ref:o,onKeyDown:e=>{let t=a.current?.getResultsLength()??0;if("Escape"!==e.key&&("Backspace"!==e.key||n)||(e.preventDefault(),r()),"Enter"===e.key||"Tab"===e.key){e.preventDefault();let t=a.current?.handleEnterOnIndex(i);if(!t)return;"create"===t?(window.open("/gpts/editor","_blank"),r()):u(t)}if("ArrowDown"===e.key&&i<t-1){e.preventDefault();let t=i+1;a.current?.scrollToItem(t),c(t)}if("ArrowUp"===e.key&&i>0){e.preventDefault();let t=i-1;a.current?.scrollToItem(t),c(t)}},onChange:e=>{s(e.target.value),c(0)},className:"w-full border-0 bg-token-main-surface-primary p-2 text-sm focus:outline-none"}),(0,C.jsx)(z,{ref:a,query:n,selectedIdx:i,onSelectGizmo:u})]})};function E(e){let{gizmoResource:t,from:r,showDescription:n,isSelected:s,grayedOut:o}=e,i=!!t.gizmo.tags?.includes(c.U9.FirstParty);return(0,C.jsxs)(T,{className:(0,m.default)(s?"bg-token-main-surface-secondary":"",o&&"opacity-50"),children:[(0,C.jsx)(a.Z,{isFirstParty:i,src:t.gizmo.display.profile_picture_url,className:(0,m.default)("icon-xl h-7 w-7 flex-shrink-0",o&&"grayscale group-hover:grayscale-0")}),(0,C.jsxs)("div",{className:"flex h-fit grow flex-row justify-between space-x-2 overflow-hidden text-ellipsis whitespace-nowrap",children:[(0,C.jsxs)("div",{className:"flex flex-row space-x-2",children:[(0,C.jsx)("span",{className:"shrink-0 truncate font-semibold",children:t.gizmo.display.name}),n&&(0,C.jsx)("span",{className:"flex-grow truncate text-sm text-token-text-tertiary sm:max-w-xs lg:max-w-md",children:t.gizmo.display.description})]}),(0,C.jsx)("span",{className:"shrink-0 self-center",children:"recent"===r?(0,C.jsx)(O.T39,{className:"icon-sm"}):(0,C.jsx)(O.qQX,{className:"icon-sm"})})]})]})}function I(e){let{gizmoResource:t,onRemove:r}=e,n=!!t.gizmo.tags?.includes(c.U9.FirstParty);return(0,C.jsxs)("div",{className:"flex w-full flex-row items-center rounded-t-2xl bg-token-main-surface-secondary px-2 py-1",children:[(0,C.jsxs)("div",{className:(0,m.default)("group flex h-10 items-center gap-2 rounded-lg px-2 font-semibold"),children:[(0,C.jsx)(a.Z,{isFirstParty:n,src:t.gizmo.display.profile_picture_url,className:"h-6 w-6 flex-shrink-0"}),(0,C.jsxs)("div",{className:"space-x-2 overflow-hidden text-ellipsis text-sm text-token-text-tertiary",children:[(0,C.jsx)(w.Z,_({},S.talkingTo))," ",(0,C.jsx)("span",{className:"font-semibold text-token-text-secondary",children:t.gizmo.display.name})]})]}),r&&(0,C.jsx)("button",{className:"absolute right-4 text-sm font-bold",onClick:r,children:(0,C.jsx)(O.tPq,{className:"icon-md text-token-text-secondary hover:text-token-text-primary"})})]})}let S=(0,v.vU)({talkingTo:{id:"TaggingDropdown.talkingTo",defaultMessage:"Talking to"},dropdownCreateLabel:{id:"TaggingDropdown.dropdownCreateLabel",defaultMessage:"Create a GPT"},searchPlaceholder:{id:"TaggingDropdown.searchPlaceholder",defaultMessage:"Search recent and pinned GPTs"}});t.ZP=e=>{let{onClick:t,onClose:r}=e,n=(0,u.b0)(),o=!!n;return((0,l.n)(()=>{f.A.logEvent(p.M.mentionsOpened,{gizmo_selector_disabled:o})}),o)?(0,C.jsx)(P.W,{clientThreadId:s.Zq,rateLimitInfo:n}):(0,C.jsx)("div",{onBlur:e=>{e.currentTarget.contains(e.relatedTarget)||r()},className:"popover rounded-2xl border border-token-border-light bg-token-main-surface-primary p-2 shadow-lg",children:(0,C.jsx)(A,{onClick:t,onClose:r})})}},94293:function(e,t,r){"use strict";r.d(t,{b:function(){return a}});var n=r(49764),s=r(69338),o=r(651);let a=e=>{let{actions:t,title:r,description:a,onDismiss:i}=e,c=(0,n.Z)(),l=t?.primaryAction?.text?c.formatMessage(t.primaryAction.text):void 0,u=t?.secondaryAction?.text?c.formatMessage(t.secondaryAction.text):void 0;return(0,o.jsx)(s.j,{title:r,content:a,onDismiss:i,primaryCtaText:l,onPrimaryCtaClick:t?.primaryAction?.onClick??void 0,secondaryCtaText:u,onSecondaryCtaClick:t?.secondaryAction?.onClick??void 0,isElevated:!0})}},58224:function(e,t,r){"use strict";r.d(t,{W:function(){return k}});var n=r(98601),s=r(16757),o=r(71829),a=r(94293),i=r(73392),c=r(93951),l=r(9026),u=r(92745),d=r(66290),f=r(99976),p=r(47584),m=r(67437),g=r(651);let x=e=>{let{clientThreadId:t,rateLimitInfo:r,onDismiss:n}=e,{name:p,title:x,call_to_action:y,description:b}=r,w=(0,c.t)(),j=(0,m.fm)(!0),v=(0,l.zd)(),k=(0,u.Ao)(t),O=w?.planType??"unknown",P=v&&"block_reason"in v?v.block_reason:null,C="banner_description",N={type:p||"unknown",location:C,plan_type:O,is_new_conversation:k,is_hard_block:!!v,hard_block_reason:P??""},_=(0,d.Z)(),T=e=>{switch(e){case s.Pt.GET_PLUS:return{text:h.getPlusButton,onClick:()=>{f.A.logRateLimitGetPlusButtonClicked(N),(0,o.MG)(_,"Prompt textarea rate limit banner")}};case s.Pt.NEW_CHAT:return{text:h.newChatButton,onClick:()=>{j({modelId:"",location:C})}}}};(0,i.n)(()=>{f.A.logRateLimitBannerShown(N)});let[D,z]=y??[],L={primaryAction:T(D),secondaryAction:T(z)};return(0,g.jsx)(a.b,{onDismiss:n,title:x,description:b,actions:L})},h=(0,p.vU)({getPlusButton:{id:"TeyLcp",defaultMessage:"Get Plus"},newChatButton:{id:"7OvnJ5",defaultMessage:"New chat"}});var y=r(88667),b=r(38482);function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let v=r.n(b)()(()=>r.e(8682).then(r.bind(r,80062)).then(e=>e.PromptTextareaRateLimitBannerNew),{loadableGenerated:{webpack:()=>[80062]}}),k=e=>{let{value:t}=(0,y.sB)("1028682714");return t?(0,g.jsx)(v,j({},e)):(0,g.jsx)(x,j({},e))}},73392:function(e,t,r){"use strict";r.d(t,{n:function(){return s}});var n=r(92379);let s=e=>{(0,n.useEffect)(e,[])}}}]);
//# sourceMappingURL=3776.069bd4e3d04a7348.js.map