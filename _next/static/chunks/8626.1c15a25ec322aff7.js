"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8626,1502],{95204:function(e,t,r){var n,s=r(92379);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}t.Z=e=>s.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 34 34"},e),n||(n=s.createElement("g",{id:"icon / robot-sad"},s.createElement("path",{id:"Rectangle 49961",stroke:"currentColor",strokeWidth:2.833,d:"M4.959 9.917a2.833 2.833 0 0 1 2.833-2.834h18.417a2.833 2.833 0 0 1 2.833 2.834V21.25a5.667 5.667 0 0 1-5.667 5.667h-12.75A5.667 5.667 0 0 1 4.96 21.25z"}),s.createElement("circle",{id:"Ellipse 32520",cx:12.041,cy:14.167,r:2.125,fill:"currentColor"}),s.createElement("circle",{id:"Ellipse 32521",cx:21.959,cy:14.167,r:2.125,fill:"currentColor"}),s.createElement("path",{id:"Vector 2380",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.833,d:"M17 7.083V4.25"}),s.createElement("path",{id:"Vector 2381",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.833,d:"M4.958 14.167c-.782 0-1.416.634-1.416 1.416V17c0 .782.634 1.417 1.416 1.417v0"}),s.createElement("path",{id:"Vector 2382",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.833,d:"M29.042 14.167c.782 0 1.416.634 1.416 1.416V17c0 .782-.634 1.417-1.416 1.417v0"}),s.createElement("path",{id:"Vector 2386",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.833,d:"M19.834 21.158c-1.964-.822-3.703-.822-5.667 0"}))))},19042:function(e,t,r){r.r(t),r.d(t,{DebugJsonViewer:function(){return O},DebugModal:function(){return y},DebugModalContents:function(){return V}});var n=r(11550),s=r(39358),l=r(30115),a=r(11433),i=r(24434),o=r(67330),c=r(91111),d=r(97193),u=r(27313),h=r(5132),x=r(30757),f=r(79746),m=r(19841),p=r(38482),j=r.n(p),g=r(92379),b=r(15478),v=r(19229),k=r(651);let w=j()(()=>Promise.all([r.e(3904),r.e(6476)]).then(r.bind(r,16476)),{ssr:!1,loadableGenerated:{webpack:()=>[16476]}});function y(e){let{threadId:t,threadUserId:r}=e;return(0,d.W6)(d.bM.isDebugModalOpen)&&(0,k.jsx)(i.Z,{isOpen:!0,onClose:()=>d.vm.toggleDebugModalOpen(),type:"success",size:"fullscreen",noPadding:!0,rootClassName:"z-50",children:(0,k.jsx)(V,{threadId:t,threadUserId:r,onClose:()=>d.vm.toggleDebugModalOpen()})})}let _=(e,t)=>{let r=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),n=window.URL.createObjectURL(r),s=document.createElement("a");s.href=n,s.download=e,s.click(),window.URL.revokeObjectURL(n)},N="<|im_start|>",C="<|im_sep|>",E="<|im_end|>";function L(e){let{prompt:t}=e,r=[],n=0;for(;;){let e=t.indexOf(N,n);if(-1===e)break;let s=t.indexOf(C,e);if(-1===s)break;let l=t.indexOf(E,s),a=t.indexOf("<|fim_suffix|>",s);if(-1!==a&&(-1===l||a<l)&&(l=a),-1===l)break;let i=t.substring(e+N.length,s),o=t.substring(s+C.length,l);r.push((0,k.jsxs)("div",{children:[(0,k.jsxs)("span",{className:"font-semibold",children:["[",i,"]"]})," ",o]},e)),n=l+E.length}return r}let M=b.Z.div`mb-[-5px] px-2 pb-1 font-semibold uppercase border-b-2 ${e=>{let{$isSelected:t}=e;return t?"border-black dark:border-white":"border-transparent"}}`;function V(e){let{threadId:t,threadUserId:r,message:s,onClose:i}=e,{sessionUser:d}=(0,c.A)(),{0:f,1:p}=(0,g.useState)(s?"message":"json"),{data:j,isLoading:b,refetch:v}=(0,u.Y)({threadId:t,threadUserId:r,refetchOnMount:"always"}),w=j?.thread;if((0,g.useEffect)(()=>{p(s?"message":w?.turns.length?`turn${w?.turns.length-1}`:"thread")},[w?.turns.length,s]),!b&&!w&&!s)return(0,k.jsxs)(o.bW,{onClickRetry:()=>v(),children:["Failed to load."," "]});if(b)return(0,k.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:"Loading..."});let y=w?.turns,N=w?.turns[w.turns.length-1]?.artifacts__?.model_snapshots?.default_id,C=r&&t?(0,h.t5)(r,t):null;return(0,k.jsx)("div",{className:"flex flex-col gap-2 break-words font-mono text-xs",children:(0,k.jsxs)(x.fC,{orientation:"vertical",value:f,onValueChange:e=>p(e),children:[(0,k.jsxs)(x.aV,{className:"flex items-center justify-center gap-2 px-4 py-1",children:[s&&(0,k.jsx)(x.xz,{value:"message",children:(0,k.jsx)(M,{$isSelected:"message"===f,children:"Message"})},"message"),w&&(0,k.jsx)(x.xz,{value:"thread",children:(0,k.jsx)(M,{$isSelected:"thread"===f,children:"Thread"})},"thread"),y?.map((e,t)=>k.jsxs(g.Fragment,{children:[k.jsx(x.xz,{value:`turn${t}`,children:k.jsxs(M,{$isSelected:f===`turn${t}`,children:["Turn[",t,"]"]})},t),e.artifacts__?.debug_ddtrace_urls?.map(e=>k.jsx(M,{$isSelected:!1,children:k.jsxs("a",{target:"_blank",href:e,className:"text-nowrap",children:["Trace[",t,"] â†—"]})},e))]},t)),(0,k.jsx)("div",{className:"flex-grow"}),N&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(z,{name:"Model",id:N})," ",(0,k.jsx)("span",{className:"text-gray-500 dark:text-white",children:"|"})]}),d&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(z,{name:"User ID",id:d.id})," ",(0,k.jsx)("span",{className:"text-gray-500 dark:text-white",children:"|"})]}),C&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(z,{name:"Permalink",id:C}),(0,k.jsx)("span",{className:"text-gray-500 dark:text-white",children:"|"})]}),w&&(0,k.jsxs)(n.z,{size:"small",color:"secondary",onClick:()=>_("thread.json",w),children:[(0,k.jsx)(a._8t,{className:"icon-sm"})," thread.json"]}),(0,k.jsx)(l.P,{onClick:i})]}),y?.map((e,t)=>k.jsxs(x.VY,{value:`turn${t}`,className:"max-h-[calc(100vh-46px)] w-full overflow-y-scroll scroll-smooth",children:[k.jsxs("div",{className:m.default("flex flex-col gap-1 p-6",e.index%2==0&&"bg-token-main-surface-tertiary"),children:[k.jsx(L,{prompt:e.artifacts__?.debug_info?.main_model_response?.prompt_string??""}),k.jsxs("div",{children:[k.jsx("span",{className:"font-semibold",children:"[assistant]"})," ",e.model_response?.text]})]})," "]},t)),w&&(0,k.jsx)(x.VY,{value:"thread",className:"max-h-[calc(100vh-46px)] w-full overflow-y-scroll scroll-smooth p-6",children:(0,k.jsx)(O,{data:w,collapsed:4})}),s&&(0,k.jsx)(x.VY,{value:"message",className:"max-h-[calc(100vh-46px)] w-full overflow-y-scroll scroll-smooth p-6",children:(0,k.jsx)(O,{data:s,collapsed:4})})]},w?.turns.length??"message")})}function O(e){let{data:t,collapsed:r}=e,{0:n,1:s}=(0,g.useState)(r??!0);return(0,k.jsxs)("div",{className:"flex flex-col items-start gap-1",children:[(0,k.jsx)("button",{onClick:()=>s(!n),className:"flex items-center gap-1",children:n?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(v.rIY,{size:14})," Expand all"]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(v.NsE,{size:14})," Collapse all"]})}),(0,k.jsx)("div",{className:"w-full",children:(0,k.jsx)(w,{json:t,jsonViewProps:{collapsed:n,shortenTextAfterLength:0}},String(n))})]})}function z(e){let{name:t,id:r}=e,n=(0,g.useCallback)(()=>{(0,f.v)(r)},[r]);return(0,k.jsxs)("div",{className:"flex items-center gap-2 truncate",children:[(0,k.jsxs)("span",{className:"text-nowrap font-semibold",children:[t,":"]}),(0,k.jsx)("span",{title:r,className:"truncate text-gray-500 dark:text-white",children:r}),(0,k.jsx)(s.Z,{onCopy:n})]})}},27313:function(e,t,r){r.d(t,{Y:function(){return i},v:function(){return o}});var n=r(84760),s=r(92379),l=r(81014),a=r(12381);function i(e){let{threadId:t,threadUserId:r,refetchOnMount:s}=e;return(0,n.a)({queryKey:["thread",t,r],queryFn:async()=>{if(!t)return{thread:null,turns:null};let e=await (0,l.K8)({threadId:t,threadUserId:r}),n=e.turns;return{thread:e,turns:n}},enabled:!!t,refetchOnMount:s})}function o(e){let{threadId:t,threadUserId:r}=e,n=i({threadId:t,threadUserId:r}),l=n.data;return(0,s.useEffect)(()=>{t&&a.P3.setThread(t,l?.turns??[])},[t,l]),{query:n.data?.turns[0]?.user_query,refetch:n.refetch,isLoading:n.isLoading,isError:n.isError}}},78571:function(e,t,r){r.d(t,{_:function(){return a}});var n=r(37088),s=r(92379),l=r(52125);let a=(0,s.forwardRef)((e,t)=>(0,s.createElement)(l.WV.label,(0,n.Z)({},e,{ref:t,onMouseDown:t=>{var r;null===(r=e.onMouseDown)||void 0===r||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault()}})))}}]);
//# sourceMappingURL=8626.1c15a25ec322aff7.js.map