"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2745],{16779:function(e,t,r){r.d(t,{Z:function(){return i}});var n=r(77420),o=r(19841),a=r(92379),s=r(28146),l=r(651);function i(e){let{onChange:t,enabled:r,label:i,disabled:d,withLockIcon:u=!1,lockIconOverride:c=null,size:g="normal",id:h}=e,v=(0,a.useCallback)(()=>{t(!r)},[r,t]);return(0,l.jsx)(n.fC,{id:h,checked:r,disabled:d,onCheckedChange:v,"aria-label":i,className:(0,o.default)("focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-token-text-secondary focus-visible:ring-offset-2 focus-visible:radix-state-checked:ring-black focus-visible:dark:ring-token-main-surface-primary focus-visible:dark:radix-state-checked:ring-green-600",d?"cursor-not-allowed opacity-50":"cursor-pointer","bg-gray-200 radix-state-checked:bg-black dark:border dark:border-token-border-medium dark:bg-transparent","relative shrink-0 rounded-full dark:radix-state-checked:border-green-600 dark:radix-state-checked:bg-green-600","normal"===g?"h-[20px] w-[32px]":"h-[19px] w-[30px]"),children:(0,l.jsx)(n.bU,{className:(0,o.default)("flex items-center justify-center rounded-full","transition-transform duration-100 will-change-transform ltr:translate-x-0.5 rtl:-translate-x-0.5","bg-white","normal"===g?"h-[16px] w-[16px] ltr:radix-state-checked:translate-x-[14px] rtl:radix-state-checked:translate-x-[-14px]":"h-[15px] w-[15px] ltr:radix-state-checked:translate-x-[13px] rtl:radix-state-checked:translate-x-[-13px]"),children:u?c||(0,l.jsx)(s.oVl,{className:"icon-xs dark:text-black"}):null})})}},59578:function(e,t,r){r.d(t,{wm:function(){return X},Xu:function(){return W}});var n=r(98601),o=r(55963),a=r(93951),s=r(41987),l=r(10481),i=r(22433),d=r(10449),u=r(42420),c=r(56032),g=r(84760),h=r(99976),v=r(61619),p=r(88667),m=r(19841),f=r(21389),b=r(88600),x=r(65925),T=r.n(x),C=r(92379),y=r(75172),M=r(62984),j=r(68306),S=r(2721),k=r(31438),w=r(15913),I=r(97537),O=r(16779),N=r(60682),_=r(91530),L=r.n(_),P=r(59144),U=r(24434),D=r(651);function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let A=N.pm.FirstTimeUsingUserContext;var F=e=>{let{onClose:t}=e,r=(0,y.Z)(),{markAsViewed:n}=(0,N.qg)(A),o=(0,C.useCallback)(()=>{n(),t()},[n,t]);return(0,D.jsxs)(U.Z,{isOpen:!0,onClose:L(),size:"custom",className:"max-w-xl",type:"success",title:r.formatMessage(B.title),primaryButton:(0,D.jsx)(P.Z.Button,{onClick:o,title:r.formatMessage(B.ok),color:"primary"}),children:[(0,D.jsxs)("div",{className:"mb-6 flex flex-col gap-3",children:[(0,D.jsx)("p",{children:(0,D.jsx)(M.Z,E({},B.body1))}),(0,D.jsx)("p",{children:(0,D.jsx)(M.Z,E({},B.body2))})]}),(0,D.jsx)("div",{className:"flex flex-col gap-3 text-sm text-token-text-tertiary",children:(0,D.jsx)("p",{children:(0,D.jsx)(M.Z,E(E({},B.legal1),{},{values:{article:e=>(0,D.jsx)("a",{href:l.i,target:"_blank",className:"underline",rel:"noopener noreferrer",children:e})}}))})})]})};let B=(0,j.vU)({title:{id:"UserContextFirstTimeModal.title",defaultMessage:"Introducing Custom Instructions"},body1:{id:"UserContextFirstTimeModal.body1",defaultMessage:"Customize your interactions with ChatGPT by providing specific details and guidelines for your chats."},body2:{id:"UserContextFirstTimeModal.body2",defaultMessage:"Whenever you edit your custom instructions, they'll take effect in all new chats you create. Existing chats won't be updated."},legal1:{id:"UserContextFirstTimeModal.legal1",defaultMessage:"Your instructions will be used to make our models better unless you've opted out and may be shared with any plugins you've enabled. Visit our <article>Help Center</article> to learn more."},ok:{id:"UserContextFirstTimeModal.ok",defaultMessage:"OK"}});var R=r(30853),G=r(28146),H=r(24740);function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function W(e){let t=(0,y.Z)();return(0,g.a)({queryKey:["userContext"],queryFn:()=>S.Z.getUserSystemMessage().catch(e=>{throw H.m.danger(t.formatMessage({id:"userContextModal.getCustomInstructionsError",defaultMessage:"Failed to get your settings"})),e}),enabled:e,select:e=>{var t,r,n,o;return{aboutUserMessage:null!==(t=null==e?void 0:e.about_user_message)&&void 0!==t?t:"",aboutModelMessage:null!==(r=null==e?void 0:e.about_model_message)&&void 0!==r?r:"",disabledTools:null!==(n=null==e?void 0:e.disabled_tools)&&void 0!==n?n:[],enabled:null===(o=null==e?void 0:e.enabled)||void 0===o||o}}})}let V={aboutUserMessage:void 0,aboutModelMessage:void 0,disabledTools:void 0,enabled:void 0};function X(e){var t,r,n;let{isModalOpen:o}=e,s=(0,y.Z)(),i=function(){let{eligible:e}=(0,N.qg)(A);return e}(),{0:d,1:g}=(0,C.useState)(!1),{isLoading:m,data:f}=W(o),{aboutUserMessage:b="",aboutModelMessage:x="",disabledTools:j=[],enabled:w}=null!=f?f:{},{0:_,1:L}=(0,C.useState)(V),{aboutUserMessage:Z,aboutModelMessage:E,disabledTools:B,enabled:R}=_,G=null!=R?R:!!w,{0:z,1:X}=(0,C.useState)(null),et=(0,C.useCallback)(()=>{k.vm.closeModal(k.B.UserContext),L(V),X(null)},[]),{isPending:en,mutate:eo}=function(e){let{onSuccess:t,onError:r}=e,n=(0,u.NL)();return(0,c.D)({mutationFn:e=>{let{userContext:t}=e;return S.Z.createOrUpdateUserSystemMessage(t)},onSettled:(e,t)=>{let r=["userContext"];null===e||t?n.invalidateQueries({queryKey:r}):n.setQueryData(r,e)},onSuccess:t,onError:r})}({onSuccess:()=>{et()},onError:e=>{var t,r,n;return(null===(t=e.response)||void 0===t?void 0:t.reason)==="content_policy"&&null!==(r=e.response)&&void 0!==r&&r.field?X(null===(n=e.response)||void 0===n?void 0:n.field):H.m.danger(s.formatMessage({id:"userContextModal.saveError",defaultMessage:"Failed to update settings"})),e}}),{0:ea,1:es}=(0,C.useState)(!1),el=(0,a.t)(),ei=null===(t=null==el?void 0:el.isFree())||void 0===t||t,ed=Q(null!=Z?Z:"")||Q(null!=E?E:""),eu=void 0!==E&&E!==x||void 0!==Z&&Z!==b||void 0!==B&&!T()(B,j)||void 0!==R&&R!==w,ec=(0,C.useCallback)(()=>{eu?es(!0):et()},[et,eu]),eg=(0,C.useCallback)(async()=>{en||(X(null),eo({userContext:{aboutUserMessage:null!=Z?Z:"",aboutModelMessage:null!=E?E:"",disabledTools:null!=B?B:[],enabled:!!R}}))},[en,E,Z,B,R,eo]),eh=(0,C.useCallback)(()=>{if(ed){var e,t,r,n;let o=Q(null!=Z?Z:""),a=Q(null!=E?E:"");o&&(p.m9.logEvent("chatgpt_user_context_modal__message_past_limit",void 0,{type:"about_user_message",limit:K.toString(),character_length:null!==(e=null==Z?void 0:Z.length.toString())&&void 0!==e?e:""}),h.A.logEvent(v.M.userContextModelMessagePastLimit,{type:"about_user_message",limit:K.toString(),character_length:null!==(t=null==Z?void 0:Z.length.toString())&&void 0!==t?t:""})),a&&(p.m9.logEvent("chatgpt_user_context_modal__message_past_limit",void 0,{type:"about_model_message",limit:K.toString(),character_length:null!==(r=null==E?void 0:E.length.toString())&&void 0!==r?r:""}),h.A.logEvent(v.M.userContextModelMessagePastLimit,{type:"about_model_message",limit:K.toString(),character_length:null!==(n=null==E?void 0:E.length.toString())&&void 0!==n?n:""})),H.m.danger(s.formatMessage(er.messageLimitError,{limit:K}),{duration:4,hasCloseButton:!0});return}eg()},[s,ed,E,Z,eg]);if(o&&i&&!d)return(0,D.jsx)(F,{onClose:()=>{g(!0)}});if(o&&ea){let e=()=>{es(!1)};return(0,D.jsx)(U.Z,{isOpen:!0,onClose:e,type:"success",title:s.formatMessage(er.confirmCloseTitle),primaryButton:(0,D.jsx)(P.Z.Button,{title:s.formatMessage(er.confirmCloseOk),color:"danger",onClick:()=>{et(),e()}}),secondaryButton:(0,D.jsx)(P.Z.Button,{title:s.formatMessage(er.confirmCloseCancel),color:"secondary",onClick:e}),children:(0,D.jsx)("div",{className:"text-sm",children:(0,D.jsx)(M.Z,q({},er.confirmCloseBody))})},"confirm-close")}return(0,D.jsxs)(U.Z,{isOpen:o,onClose:ec,type:"success",size:"custom",className:"max-w-lg xl:max-w-xl",title:(0,D.jsx)(M.Z,q({},er.profileTitle)),children:[m?(0,D.jsx)("div",{className:"flex h-14 items-center justify-center",children:(0,D.jsx)(I.Z,{})}):(0,D.jsxs)("div",{className:"max-h-[60vh] overflow-y-auto md:max-h-[calc(100vh-300px)]",children:[(0,D.jsxs)("div",{className:"flex items-center gap-1",children:[(0,D.jsx)("div",{className:"text-sm font-semibold",children:(0,D.jsx)(M.Z,q({},er.customInstructionsTitle))}),(0,D.jsx)($,{label:(0,D.jsx)(M.Z,q(q({},er.customInstructionsTooltip),{},{values:{article:e=>(0,D.jsx)("a",{href:l.i,target:"_blank",className:"underline",rel:"noreferrer",children:e})}}))})]}),(0,D.jsx)("p",{className:"text-muted pb-3 pt-2 text-sm text-token-text-primary",children:(0,D.jsx)(M.Z,q({},er.aboutYouHelpText))}),(0,D.jsx)(J,{className:"mb-3",onSubmit:eh,disabled:!G,tip:(0,D.jsx)(Y,{children:(0,D.jsxs)("ul",{className:"list-disc pl-5",children:[(0,D.jsx)("li",{children:(0,D.jsx)(M.Z,q({},er.aboutUserTip1))}),(0,D.jsx)("li",{children:(0,D.jsx)(M.Z,q({},er.aboutUserTip2))}),(0,D.jsx)("li",{children:(0,D.jsx)(M.Z,q({},er.aboutUserTip3))}),(0,D.jsx)("li",{children:(0,D.jsx)(M.Z,q({},er.aboutUserTip4))}),(0,D.jsx)("li",{children:(0,D.jsx)(M.Z,q({},er.aboutUserTip5))})]})}),hasModError:"about_user_message"===z,value:null!=Z?Z:b,onChange:e=>L(t=>{var r,n,o;return{aboutModelMessage:null!==(r=t.aboutModelMessage)&&void 0!==r?r:x,aboutUserMessage:e.target.value,enabled:null!==(n=t.enabled)&&void 0!==n?n:G,disabledTools:null!==(o=t.disabledTools)&&void 0!==o?o:j}})}),(0,D.jsx)("p",{className:"text-muted py-3 text-sm text-token-text-primary",children:(0,D.jsx)(M.Z,q({},er.modelHelpText))}),(0,D.jsx)(J,{onSubmit:eh,disabled:!G,tip:(0,D.jsx)(Y,{children:(0,D.jsxs)("ul",{className:"list-disc pl-5",children:[(0,D.jsx)("li",{children:(0,D.jsx)(M.Z,q({},er.modelTip1))}),(0,D.jsx)("li",{children:(0,D.jsx)(M.Z,q({},er.modelTip2))}),(0,D.jsx)("li",{children:(0,D.jsx)(M.Z,q({},er.modelTip3))}),(0,D.jsx)("li",{children:(0,D.jsx)(M.Z,q({},er.modelTip4))})]})}),hasModError:"about_model_message"===z,value:null!=E?E:x,onChange:e=>L(t=>{var r,n,o;return{aboutUserMessage:null!==(r=t.aboutUserMessage)&&void 0!==r?r:b,aboutModelMessage:e.target.value,enabled:null!==(n=t.enabled)&&void 0!==n?n:G,disabledTools:null!==(o=t.disabledTools)&&void 0!==o?o:j}})}),!ei&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("div",{className:"my-6 h-px bg-token-border-light"}),(0,D.jsx)(ee,{disabledTools:null!==(r=null!==(n=_.disabledTools)&&void 0!==n?n:j)&&void 0!==r?r:[],onDisabledToolsChanged:e=>L(t=>{var r,n,o;return{aboutUserMessage:null!==(r=t.aboutUserMessage)&&void 0!==r?r:b,aboutModelMessage:null!==(n=t.aboutModelMessage)&&void 0!==n?n:x,enabled:null!==(o=t.enabled)&&void 0!==o?o:G,disabledTools:e}})})]})]}),(0,D.jsx)("div",{className:"mt-4 md:mt-5",children:(0,D.jsxs)("div",{className:"flex flex-grow flex-col items-stretch justify-between gap-0 sm:flex-row sm:items-center sm:gap-3",children:[(0,D.jsxs)("label",{className:"mt-5 flex cursor-pointer flex-row justify-between gap-2 sm:mt-4",children:[(0,D.jsx)("div",{className:"self-center text-sm text-token-text-primary",children:(0,D.jsx)(M.Z,q({},er.chatPreferencesEnable))}),(0,D.jsx)(O.Z,{enabled:G,onChange:e=>{L(t=>{var r,n,o;return{aboutUserMessage:null!==(r=t.aboutUserMessage)&&void 0!==r?r:b,aboutModelMessage:null!==(n=t.aboutModelMessage)&&void 0!==n?n:x,enabled:e,disabledTools:null!==(o=t.disabledTools)&&void 0!==o?o:j}})},label:G?s.formatMessage(er.disableToggleLabel):s.formatMessage(er.enableToggleLabel)})]}),(0,D.jsx)(P.Z.Actions,{secondaryButton:(0,D.jsx)(P.Z.Button,{onClick:ec,children:(0,D.jsx)(M.Z,q({},er.cancel))}),primaryButton:(0,D.jsx)(P.Z.Button,{loading:en,onClick:eh,color:"primary",visuallyDisabled:ed,disabled:!eu,children:(0,D.jsx)(M.Z,q({},er.save))})})]})})]},"user-context")}let Y=e=>{let{children:t}=e;return(0,D.jsx)("div",{className:"whitespace-pre-line",children:t})},K=1500,Q=e=>e.length>K,J=e=>{let{disabled:t,onChange:r,onSubmit:n,placeholder:o,value:a,tip:s,hasModError:l,className:i}=e,u=(0,y.Z)(),c=(0,C.useRef)(null),g=(0,w.x_)(),h=(0,w.aj)(),v=!g,{0:p,1:x}=(0,C.useState)(!1),{0:T,1:j}=(0,C.useState)(v),S=!v&&p&&!T,k=v&&!T,I=Q(a);return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(U.Z,{isOpen:k,type:"success",size:"custom",className:"max-w-lg",title:u.formatMessage(er.tipsHeader),showCloseButton:!0,onClose:()=>{j(!0)},children:s}),(0,D.jsxs)(d.fC,{open:S,children:[(0,D.jsxs)("div",{className:i,children:[(0,D.jsx)(d.xz,{asChild:!0,children:(0,D.jsx)("textarea",{ref:c,className:(0,m.default)("w-full resize-none rounded bg-token-main-surface-primary p-4 placeholder:text-gray-300",{"border-orange-400 focus:border-orange-400":l,"border-red-500 focus:border-red-500":I&&!l,"focus-token-border-heavy border-token-border-light":!I&&!l,"opacity-30":t}),disabled:t,placeholder:o,onKeyDown:e=>{t||"Enter"!==e.key||!e.metaKey||e.shiftKey||e.nativeEvent.isComposing||(e.preventDefault(),n())},rows:g&&!h?6:5,value:a,onChange:r,onBlur:()=>{x(!1)},onFocus:()=>{x(!0)}})}),(0,D.jsx)("div",{className:(0,m.default)("flex items-center justify-between px-1 text-xs tabular-nums",I?"text-red-600":"text-token-text-tertiary"),children:l?(0,D.jsx)("div",{className:"visible mt-2 text-left text-xs text-orange-400",children:(0,D.jsx)(M.Z,q(q({},er.modApiVoilation),{},{values:{policyLink:e=>(0,D.jsx)("a",{href:"https://platform.openai.com/docs/usage-policies/content-policy",className:"underline",target:"_blank",rel:"noreferrer",children:e}),feedbackLink:e=>(0,D.jsx)("a",{href:"https://forms.gle/3gyAMj5r5rTEcgbs5",className:"underline",target:"_blank",rel:"noreferrer",children:e})}}))}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("div",{children:"".concat(a.length,"/").concat(K)}),(0,D.jsx)("button",{className:"flex items-center gap-1",onClick:()=>{var e;null===(e=c.current)||void 0===e||e.focus(),j(!T)},tabIndex:-1,children:(0,D.jsx)(f.M,{initial:!1,children:p&&(0,D.jsx)(b.E.div,{className:"flex items-center gap-1",initial:{opacity:0},animate:{opacity:1,transition:{duration:.2,ease:"easeIn"}},exit:{opacity:0,transition:{duration:.2,ease:"easeIn"}},children:T?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(M.Z,q({},er.showTips)),(0,D.jsx)(G.tEF,{className:"icon-xs"})]}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(M.Z,q({},er.hideTips)),(0,D.jsx)(G.Xl7,{className:"icon-xs"})]})},"show-hide")})})]})})]}),(0,D.jsx)(d.h_,{children:(0,D.jsx)(d.VY,{side:"right",align:"start",sideOffset:12,className:"popover relative max-w-[220px] animate-slideLeftAndFade select-none rounded-xl border border-token-border-light bg-token-main-surface-primary p-4 text-sm text-token-text-primary shadow-[0px_4px_14px_rgba(0,0,0,0.06)] xl:max-w-xs",onOpenAutoFocus:e=>{e.preventDefault()},onCloseAutoFocus:e=>{e.preventDefault()},children:(0,D.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,D.jsx)("strong",{children:(0,D.jsx)(M.Z,q({},er.tipsHeader))}),s]})})})]})]})};function $(e){let{label:t,side:r="bottom"}=e;return(0,D.jsx)(R.u,{sideOffset:4,interactive:!0,label:(0,D.jsx)("div",{children:t}),side:r,children:(0,D.jsx)(G.szr,{className:"h-4 w-4 text-token-text-tertiary"})})}function ee(e){var t;let{disabledTools:r,onDisabledToolsChanged:n}=e;(0,C.useEffect)(()=>{h.A.logEvent(v.M.userContextGpt4CapabilitiesShown)},[]);let o=(0,a.t)(),l=null!==(t=null==o?void 0:o.isEnterprisey())&&void 0!==t&&t,d=!(0,a.FJ)(s.L0.BrowsingAvailable)&&l,u=e=>{n(r.includes(e)?r.filter(t=>t!==e):[...r,e])};return(0,D.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,D.jsxs)("div",{className:"flex items-center gap-1",children:[(0,D.jsx)("div",{className:"text-sm font-semibold",children:(0,D.jsx)(M.Z,{id:"userContextModal.gpt4CapabilitiesTitle",defaultMessage:"GPT-4 Capabilities"})}),(0,D.jsx)($,{label:(0,D.jsx)(M.Z,{id:"userContextModal.tools.capabilitiesInfo.1",defaultMessage:"Choose which tools can be used with GPT-4"}),side:"top"})]}),(0,D.jsxs)("div",{className:"mt-2 flex flex-col gap-3 md:flex-row",children:[(0,D.jsx)(et,{title:(0,D.jsx)(M.Z,{id:"userContextModal.tools.browse",defaultMessage:"Browsing"}),tooltipLabel:d?(0,D.jsx)(M.Z,{id:"5SuA2c",defaultMessage:"Browsing is disabled by your organization"}):(0,D.jsx)(M.Z,{id:"userContexModal.tools.browserTooltip",defaultMessage:"Browse the internet to find answers"}),tool:i.X.BROWSER,onClick:u,Icon:G.n9J,checked:!r.includes(i.X.BROWSER)&&!d,disabled:d}),(0,D.jsx)(et,{title:(0,D.jsx)(M.Z,{id:"userContextModal.tools.dalle",defaultMessage:"DALL\xb7E"}),tooltipLabel:(0,D.jsx)(M.Z,{id:"userContextModal.tools.dalleTooltip",defaultMessage:"Generate images using DALL\xb7E"}),tool:i.X.DALLE,onClick:u,Icon:G.q$4,checked:!r.includes(i.X.DALLE)}),(0,D.jsx)(et,{title:(0,D.jsx)(M.Z,{id:"userContextModal.tools.codeInterpreter.1",defaultMessage:"Code"}),tooltipLabel:(0,D.jsx)(M.Z,{id:"userContextModal.tools.codeInterpreterTooltip",defaultMessage:"Execute code using Code Interpreter"}),tool:i.X.PYTHON,onClick:u,Icon:G.FxN,checked:!r.includes(i.X.PYTHON)})]})]})}function et(e){let{tool:t,title:r,tooltipLabel:n,Icon:a,onClick:s,checked:l,disabled:i}=e;return(0,D.jsx)(R.u,{className:"block flex-1",label:n,side:"top",sideOffset:4,children:(0,D.jsxs)("button",{className:(0,m.default)("flex w-full items-center justify-between rounded border border-token-border-medium p-2",{"cursor-not-allowed text-token-text-quaternary":i}),onClick:()=>s(t),disabled:i,children:[(0,D.jsxs)("div",{className:"flex items-center gap-2",children:[(0,D.jsx)(a,{className:"h-4 w-4 text-token-text-tertiary"}),(0,D.jsx)("div",{className:"text-sm font-semibold",children:r})]}),(0,D.jsx)(o.Z,{id:t,checked:l&&!i,disabled:i})]})})}let er=(0,j.vU)({tipsHeader:{id:"userContextModal.tipsHeader",defaultMessage:"Thought starters"},aboutUserTip1:{id:"userContextModal.aboutUserTip1",defaultMessage:"Where are you based?"},aboutUserTip2:{id:"userContextModal.aboutUserTip2",defaultMessage:"What do you do for work?"},aboutUserTip3:{id:"userContextModal.aboutUserTip3",defaultMessage:"What are your hobbies and interests?"},aboutUserTip4:{id:"userContextModal.aboutUserTip4",defaultMessage:"What subjects can you talk about for hours?"},aboutUserTip5:{id:"userContextModal.aboutUserTip5",defaultMessage:"What are some goals you have?"},modelTip1:{id:"userContextModal.modelTip1",defaultMessage:"How formal or casual should ChatGPT be?"},modelTip2:{id:"userContextModal.modelTip2",defaultMessage:"How long or short should responses generally be?"},modelTip3:{id:"userContextModal.modelTip3",defaultMessage:"How do you want to be addressed?"},modelTip4:{id:"userContextModal.modelTip4",defaultMessage:"Should ChatGPT have opinions on topics or remain neutral?"},save:{id:"userContextModal.save",defaultMessage:"Save"},chatPreferencesEnable:{id:"userContextModal.chatPreferencesEnable",defaultMessage:"Enable for new chats"},enableToggleLabel:{id:"userContextModal.enableToggleLabel",defaultMessage:"Enable chat preferences"},disableToggleLabel:{id:"userContextModal.disableToggleLabel",defaultMessage:"Disable chat preferences"},cancel:{id:"userContextModal.cancel",defaultMessage:"Cancel"},aboutYouHelpText:{id:"userContextModal.aboutYouHelpText",defaultMessage:"What would you like ChatGPT to know about you to provide better responses?"},modelHelpText:{id:"userContextModal.modelHelpText",defaultMessage:"How would you like ChatGPT to respond?"},profileTitle:{id:"userContextModal.title.1",defaultMessage:"Customize ChatGPT"},customInstructionsTitle:{id:"userContextModal.customInstructionsTitle",defaultMessage:"Custom Instructions"},customInstructionsTooltip:{id:"userContextModal.customInstructionsTooltip",defaultMessage:"<article>Learn more</article> about Custom instructions and how they’re used to help ChatGPT provide better responses."},messageLimitError:{id:"userContextModal.messageLimitError",defaultMessage:"Please limit your responses to {limit} characters or less."},showTips:{id:"userContextModal.showTips",defaultMessage:"Show tips"},hideTips:{id:"userContextModal.hideTips",defaultMessage:"Hide tips"},confirmCloseTitle:{id:"userContextModal.confirmCloseTitle",defaultMessage:"You have unsaved changes."},confirmCloseBody:{id:"userContextModal.confirmCloseBody",defaultMessage:"Are you sure you want to exit? Any changes you made will be permanently lost."},confirmCloseCancel:{id:"userContextModal.confirmCloseCancel",defaultMessage:"Back"},confirmCloseOk:{id:"userContextModal.confirmCloseOk",defaultMessage:"Exit"},modApiVoilation:{id:"userContextModal.modApiVoilation",defaultMessage:"This content may violate our <policyLink>content policy</policyLink>. If you believe this to be in error, please <feedbackLink>submit your feedback</feedbackLink> — your input will aid our research in this area."},browser:{id:"userContexModal.tools.browserTooltip",defaultMessage:"Browse the internet to find answers"},dalle:{id:"userContexModal.tools.dalleTooltip",defaultMessage:"Generate images using DALL\xb7E"},python:{id:"userContexModal.tools.codeInterpreterTooltip",defaultMessage:"Execute code using Code Interpreter"}})},55963:function(e,t,r){r.d(t,{Z:function(){return a}});var n=r(19841),o=r(651);function a(e){let{id:t,label:r,checked:a,onChange:s,disabled:l,className:i,labelClassName:d,readOnly:u,labelSide:c="right"}=e,g=r&&(0,o.jsx)("label",{className:(0,n.default)("form-check-label text-token-text-primary",d),htmlFor:t,children:r});return(0,o.jsxs)("div",{className:"form-check flex items-center gap-2",children:["left"===c&&g,(0,o.jsx)("input",{className:(0,n.default)("form-check-input float-left h-4 w-4 appearance-none rounded-sm border border-gray-300 bg-white bg-contain bg-center bg-no-repeat align-top transition duration-200 checked:border-blue-600 checked:bg-blue-600 focus:outline-none",l?"cursor-not-allowed":"cursor-pointer",i),type:"checkbox",disabled:l,onChange:s,checked:a,readOnly:u,id:t}),"right"===c&&g]})}},30853:function(e,t,r){r.d(t,{E:function(){return v},u:function(){return p}});var n,o,a=r(2346),s=r(98601),l=r(52088),i=r(59594),d=r(19841);r(92379);var u=r(15478),c=r(651);let g=["disabled"];function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}let v=e=>{let{disabled:t}=e,r=(0,l.Z)(e,g);return t?(0,c.jsx)(c.Fragment,{children:r.children}):(0,c.jsx)(p,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach(function(t){(0,s.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},r))},p=e=>{let t,r,{label:n,contentClassName:o,customPaddingClassName:a,theme:s="default",cornerRadius:l="lg",side:u="bottom",sideOffset:g=10,align:h="center",alignOffset:v=0,withArrow:p=!0,wide:b=!1,size:x="small",interactive:T=!1,usePortal:C=!0,className:y,children:M,delayDuration:j=300,closeOnOutsideClick:S=!0,open:k,onOpenChange:w,isLeftArrow:I=!1}=e;if(!n)return(0,c.jsx)("span",{className:y,children:M});switch(s){case"blue":t="",r="bg-blue-selection";break;case"white":t="",r="bg-white";break;case"default":t="border-white/10 dark:border",r="bg-gray-950"}let O=(0,c.jsxs)(i.VY,{collisionPadding:8,onPointerDownOutside:S?void 0:e=>e.preventDefault(),side:u,sideOffset:g,alignOffset:v,align:h,className:(0,d.default)("relative z-50 shadow-xs transition-opacity",a||"px-3 py-2","rounded-".concat(l),t,r,b?"max-w-sm":"max-w-xs",o),children:[(0,c.jsx)("span",{className:(0,d.default)("flex items-center whitespace-pre-wrap text-center font-semibold normal-case text-gray-100",{"text-xs":"xsmall"===x,"text-sm":"small"===x}),children:n}),p&&(0,c.jsx)(i.Eh,{asChild:!0,children:I?(0,c.jsx)(f,{className:r}):(0,c.jsx)(m,{className:r})})]});return(0,c.jsxs)(i.fC,{delayDuration:j,disableHoverableContent:!T,open:k,onOpenChange:w,children:[(0,c.jsx)(i.xz,{asChild:!0,children:(0,c.jsx)("span",{className:y,children:M})}),C?(0,c.jsx)(i.h_,{children:O}):O]})},m=u.Z.div(n||(n=(0,a.Z)(["relative top-[-4px] h-2 w-2 rotate-45 transform shadow-xs dark:border-r dark:border-b border-white/10"]))),f=u.Z.div(o||(o=(0,a.Z)(["relative top-[-4px] right-[-135px] h-2 w-2 rotate-45 transform shadow-xs dark:border-r dark:border-b border-white/10"])))},6530:function(e,t,r){r.d(t,{Bw:function(){return a},CR:function(){return s},rm:function(){return o}});var n=r(34977);function o(){return function(e){let t=a(e);if(t)return s(t)}((0,n.useRouter)().asPath)}function a(e){let t=new URL("http://example.com".concat(e)).pathname.match(/(?:\/gizmo)?\/g\/([^/]+)/);if(t)return t[1]}function s(e){let t=e.split("-");return t.length>1&&"g"===t[0]?"g-".concat(t[1]):t[0]}},3945:function(e,t,r){var n;function o(e){return{id:e.slug,maxTokens:e.max_tokens,title:e.title,description:e.description,tags:e.tags,enabledTools:e.enabled_tools,product_features:e.product_features}}r.d(t,{H6:function(){return o},ft:function(){return s},ge:function(){return a},q_:function(){return l}});let a="gpt-4o-mini",s=((n={}).GPT4o="AG8PqS2q",n.AUTO="auto",n),l=e=>{let{categoryId:t}=e;return t===s.AUTO}},60682:function(e,t,r){r.d(t,{hO:function(){return h},pm:function(){return c},qg:function(){return g}});var n,o=r(98601),a=r(58025),s=r(2721),l=r(42420),i=r(56032);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach(function(t){(0,o.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let c=((n={}).LocaleBanner="oai/apps/hasSeenLocaleBanner",n.HasSeenPluginDisclaimer="oai/apps/hasSeenPluginsDisclaimer",n.FirstTimeUsingUserContext="oai/apps/hasUserContextFirstTime/2023-06-29",n.Onboarding="oai/apps/hasSeenOnboarding",n.TeamOwnerOnboarding="oai/apps/hasSeenTeamOwnerOnboarding",n.MemoryOnboarding="oai/apps/hasSeenMemoryOnboarding",n.TemporaryChatOnboarding="oai/apps/hasSeenTemporaryChatOnboarding",n.ArchiveConversationOnboarding="oai/apps/hasSeenArchiveConversationOnboarding",n.ExploreGPTs="oai/apps/hasSeenExploreGPTs2",n.ExploreGPTsNewNux="oai/apps/hasSeenExploreGPTsNewNux",n.MentionGPTs="oai/apps/hasSeenMentionGPTs",n.ModelTunerDisclaimer="oai/apps/hasSeenModelTunerDisclaimer",n.DalleEditingOnboarding="oai/apps/hasSeenDalleEditingOnboarding",n.ModelSwitcherAutoDowngrade="oai/apps/hasSeenModelSwitcherAutoDowngrade",n.SonicSidebar="oai/apps/hasDismissedSonicSidebar",n.ContextConnectors="oai/apps/hasSeenContextConnectorTooltip",n.AG8PqS2q="oai/apps/hasDismissedAG8PqS2q",n.SidekickLauncherOnboarding="oai/apps/hasSeenSidekickLauncherOnboarding",n.UseSidekick="oai/apps/hasDismissedUseSidekick",n.hasSeenSncUsageNux="oai/apps/hasSeenSncUsageNux",n.hasSeenSncWelcomeNux="oai/apps/hasSeenSncWelcomeNux",n.hasSeenSncSidebarTooltip="oai/apps/hasSeenSncSidebarTooltip",n.hasSeenSncSourcesTooltip="oai/apps/hasSeenSncSourcesTooltip",n);function g(e){let{data:t=[],isLoading:r}=(0,a.vl)(e=>e.eligible_announcements),n=h();return{eligible:t.includes(e),markAsViewed:()=>n.mutate({key:e}),isLoading:r}}function h(){let e=(0,l.NL)();return(0,i.D)({mutationFn:e=>{let{key:t}=e;return s.Z.announcementViewed(t)},onMutate:async t=>{let{key:r}=t;e.setQueryData(["userSettings"],e=>u(u({},e),{},{eligible_announcements:e.eligible_announcements.filter(e=>e!==r)}))},onSuccess:()=>{e.invalidateQueries({queryKey:["userSettings"]})}})}},92745:function(e,t,r){r.d(t,{Ao:function(){return em},Fe:function(){return el},GD:function(){return Y},GK:function(){return eC},Hk:function(){return $},JI:function(){return X},Kt:function(){return q},Lp:function(){return I},OX:function(){return k},Rz:function(){return ed},U0:function(){return V},UL:function(){return G},Um:function(){return F},Uy:function(){return er},WA:function(){return H},Wb:function(){return eM},XK:function(){return R},XL:function(){return et},Yk:function(){return J},Zz:function(){return O},_L:function(){return L},aS:function(){return ev},dz:function(){return es},eV:function(){return z},eY:function(){return eh},ff:function(){return ef},h9:function(){return eT},iN:function(){return E},je:function(){return en},lA:function(){return ea},lz:function(){return ex},nd:function(){return Q},nh:function(){return eo},o0:function(){return eb},oq:function(){return W},qA:function(){return ee},qN:function(){return U},r7:function(){return ep},tQ:function(){return A},u9:function(){return ei},uj:function(){return K},xn:function(){return ey},y8:function(){return B},yt:function(){return eu}});var n,o=r(16757);r(59578);var a=r(6530),s=r(3945),l=r(2721),i=r(89153),d=r(22433);r(46900);var u=r(98541),c=r(76868),g=r(79746),h=r(82363),v=r(13859),p=r.n(v),m=r(2428),f=r.n(m),b=r(65925),x=r.n(b),T=r(34977),C=r(92379),y=r(92054),M=r(68810),j=r(95267),S=r(1552);function k(){return"".concat(o.Uo).concat((0,y.Z)())}let w=0;function I(){return w++}function O(e){return e.startsWith(o.Uo)}let N=()=>new u.Cv,_=()=>Object.freeze({lastModelUsed:null,createTime:new Date}),L=((n={}).NewChat="NewChat",n.Server="Server",n.User="User",n.Generated="Generated",n.Unknown="Unknown",n),P={},U=(0,M.Ue)((0,j.n)(()=>({threads:{},clientNewThreadIdToServerIdMapping:{},threadRetainCounts:{}}))),D=U.getState,Z=U.setState,E={resolveThreadId:function(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D();return null!==(t=r.clientNewThreadIdToServerIdMapping[e])&&void 0!==t?t:e},getThread:function(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D(),n=E.resolveThreadId(e,r);return null!==(t=r.threads[n])&&void 0!==t?t:null},hasThread:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D(),r=E.resolveThreadId(e,t);return null!=t.threads[r]},isLoading:function(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D(),n=E.resolveThreadId(e,r);return null===(t=r.threads[n])||void 0===t?void 0:t.isLoading},getConversationMode:function(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D(),n=E.resolveThreadId(e,r);return null===(t=r.threads[n])||void 0===t?void 0:t.mode},getThreadModelId:function(e){var t,r;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D();return null!==(t=null===(r=E.getThread(e,n))||void 0===r?void 0:r.modelId)&&void 0!==t?t:null},getGizmoId(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D(),r=t.threads[E.resolveThreadId(e,t)];if((null==r?void 0:r.mode.kind)===o.OL.GizmoInteraction||(null==r?void 0:r.mode.kind)===o.OL.GizmoTest)return r.mode.gizmo_id},getThreadTitleSource(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D(),r=E.resolveThreadId(e,t),n=t.threads[r];return null!=n?n.titleSource:L.Unknown},getThreadCreateTime(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D(),n=E.resolveThreadId(e,r);return null===(t=r.threads[n])||void 0===t||null===(t=t.initialThreadData)||void 0===t?void 0:t.createTime},getCurrentNode(e){var t,r;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D(),o=E.resolveThreadId(e,n),a=null!==(t=null===(r=n.threads[o])||void 0===r?void 0:r.currentLeafId)&&void 0!==t?t:"root";return A.getTree(e).getNodeByIdOrMessageId(a)},isThreadUrlSafe(e,t){var r,n;let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:D(),a=E.resolveThreadId(e,o);return null!==(r=null===(n=o.threads[a])||void 0===n?void 0:n.safeUrls.includes(t))&&void 0!==r&&r},getRatingPrompt(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D(),n=E.resolveThreadId(e,r);return null===(t=r.threads[n])||void 0===t?void 0:t.promptGptRating}},A={initThread:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=A.resolveThreadId(e);if(null==D().threads[n]){let e=(0,c.PH)();Z(o=>{o.threads[n]={initialThreadData:e,mode:t,modelId:r,tree:new u.Cv(u.Cv.createTree()),title:null,titleSource:L.NewChat,currentLeafId:"root",conversationTurns:[],safeUrls:[],isLoading:!O(n),docsReferencedByURL:{},conversationOrigin:null}})}},setThreadModelId:(e,t)=>{let r=A.resolveThreadId(e);Z(e=>{let n=e.threads[r];null!=n&&(n.modelId=t)})},updateConversationMode:(e,t)=>{let r=A.resolveThreadId(e);Z(e=>{let n=e.threads[r];null!=n&&(n.mode=t)})},getServerThreadId:e=>O(e)?D().clientNewThreadIdToServerIdMapping[e]:e,setServerIdForNewThread:(e,t)=>{void 0===D().clientNewThreadIdToServerIdMapping[e]&&Z(r=>{r.threads[t]=r.threads[e],delete r.threads[e],r.clientNewThreadIdToServerIdMapping[e]=t})},initThreadFromServerData:function(e,t){var r,n,a,l,i;let d=arguments.length>2&&void 0!==arguments[2]&&arguments[2],g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,h=arguments.length>4&&void 0!==arguments[4]&&arguments[4],v=A.resolveThreadId(e);if(!h&&(null==D().threads[v]&&!d||(null===(i=D().threads[v])||void 0===i?void 0:i.isLoading)===!1))return;let p=(0,c._J)(t),m=null!==(r=p.mapping)&&void 0!==r?r:u.Cv.createTree(),f={lastModelUsed:function e(t,r,n){var o;if(n)return n;let a=t[r];return null!=a&&null!==(o=a.message)&&void 0!==o&&null!==(o=o.metadata)&&void 0!==o&&o.model_slug?a.message.metadata.model_slug:null!=a&&a.parentId?e(t,a.parentId):null}(p.mapping,p.initialCurrentLeafId,t.default_model_slug),createTime:"create_time"in t?new Date(1e3*t.create_time):void 0,isArchived:null!==(n=t.is_archived)&&void 0!==n&&n},b=new u.Cv(m),x=null!==(a=null!==(l=p.initialCurrentLeafId)&&void 0!==l?l:p.rootId)&&void 0!==a?a:"root",T="has_user_editable_context"in t?{hasUserEditableContextFlag:t.has_user_editable_context,authorName:t.author_name,model:"model"in t&&null!=t.model?(0,s.H6)(t.model):void 0}:void 0;Z(e=>{var r,n,a,s;let l=e.threads[v];e.threads[v]={modelId:null!==(r=null==l?void 0:l.modelId)&&void 0!==r?r:null,initialThreadData:f,mode:null!=t.gizmo_id?{kind:o.OL.GizmoInteraction,gizmo_id:t.gizmo_id}:{kind:o.OL.PrimaryAssistant,plugin_ids:t.plugin_ids},sharedConversationMetadata:T,title:null!==(n=t.title)&&void 0!==n?n:null,titleSource:L.Server,tree:b,currentLeafId:x,isLoading:!1,continuingFromSharedConversationId:g,safeUrls:null!==(a=t.safe_urls)&&void 0!==a?a:[],conversationTurns:[],docsReferencedByURL:{},conversationOrigin:null!==(s=t.conversation_origin)&&void 0!==s?s:null}}),A.recomputeConversationTurnsForCurrentLeafId(v,[])},updateInitialThreadDataForNewThread:(e,t)=>{let r=A.resolveThreadId(e);Z(e=>{let n=e.threads[r];null!=n&&(n.initialThreadData.lastModelUsed=t)})},getThreadCurrentLeafId:e=>{var t,r;let n=A.resolveThreadId(e);return null!==(t=null===(r=D().threads[n])||void 0===r?void 0:r.currentLeafId)&&void 0!==t?t:"root"},getThreadSafeUrls:e=>{var t;let r=A.resolveThreadId(e);return null===(t=D().threads[r])||void 0===t?void 0:t.safeUrls},addThreadSafeUrl:(e,t)=>{let r=A.resolveThreadId(e);r&&Z(e=>{let n=e.threads[r];null!=n&&n.safeUrls.push(t)})},setThreadCurrentLeafId:(e,t)=>{let r=A.resolveThreadId(e);null!=D().threads[r]&&Z(e=>{let n=e.threads[r];if(null==n)return;n.currentLeafId=t;let o=A.computeThreadConversationTurns(r,n.currentLeafId,n.conversationTurns);n.conversationTurns=o})},setTitle:(e,t,r)=>{let n=A.resolveThreadId(e);Z(e=>{let o=e.threads[n];o&&(o.title=t,o.titleSource=r)})},getTitle:e=>{var t,r;let n=E.resolveThreadId(e);return null!==(t=null===(r=D().threads[n])||void 0===r?void 0:r.title)&&void 0!==t?t:void 0},getTitleAndSource:e=>({title:A.getTitle(e),titleSource:E.getThreadTitleSource(e)}),getConversationOrigin:e=>{var t,r;let n=E.resolveThreadId(e);return null!==(t=null===(r=D().threads[n])||void 0===r?void 0:r.conversationOrigin)&&void 0!==t?t:null},setConversationOrigin:(e,t)=>{let r=A.resolveThreadId(e);Z(e=>{let n=e.threads[r];n&&(n.conversationOrigin=t)})},deleteNodesByFilter:(e,t)=>{let r=A.getThreadCurrentLeafId(e);A.updateTree(e,n=>{n.deleteNodesByFilter(t).includes(r)&&A.setThreadCurrentLeafId(e,"root")})},updateTree:(e,t)=>{var r,n;let o=A.resolveThreadId(e);if(!(null!=D().threads[o])){console.warn("Thread does not exist, cannot update tree: ",o);return}t(A.getTree(e));let a=null!==(r=null===(n=D().threads[o])||void 0===n?void 0:n.conversationTurns)&&void 0!==r?r:[];A.recomputeConversationTurnsForCurrentLeafId(o,a)},getTree:e=>{var t,r;let n=A.resolveThreadId(e);return null!==(t=null===(r=D().threads[n])||void 0===r?void 0:r.tree)&&void 0!==t?t:N()},resolveThreadId:e=>E.resolveThreadId(e),recomputeConversationTurnsForCurrentLeafId:(e,t)=>{let r=A.resolveThreadId(e);Z(e=>{let n=e.threads[r];if(null==n)return;let o=A.computeThreadConversationTurns(r,n.currentLeafId,t);n.conversationTurns=o})},computeThreadConversationTurns:(e,t,r)=>{let n=A.resolveThreadId(e);return A.getTree(n).getConversationTurns(t).map((e,t)=>{let n=null==r?void 0:r[t];return x()(n,e)?n:e})},getThreadConversationTurns:(e,t,r)=>{var n,o,a;let s=A.resolveThreadId(e),l=D().threads[s];if(null==l)return[];let i=l.tree,d=i.messageIdToNodeId(null!==(n=null==l?void 0:l.currentLeafId)&&void 0!==n?n:"root"),u=null!=t?i.messageIdToNodeId(t):null;return null!=u&&u!==d?A.computeThreadConversationTurns(s,u,null!=r?r:[]):null!==(o=null===(a=D().threads[s])||void 0===a?void 0:a.conversationTurns)&&void 0!==o?o:[]},removeContinuingFromSharedConversationId:e=>{let t=A.resolveThreadId(e);Z(e=>{let r=e.threads[t];(null==r?void 0:r.continuingFromSharedConversationId)!=null&&delete r.continuingFromSharedConversationId})},updateReferencedDocState:(e,t,r)=>{let n=A.resolveThreadId(e);Z(e=>{let o=e.threads[n];o&&(o.docsReferencedByURL[t]=r)})},copyLastMessageToClipboard:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mouse",r=A.getThreadCurrentLeafId(e),n=A.getThreadConversationTurns(e,r);return A.copyMessageToClipboard(e,n.length-1,t)},copyMessageToClipboard:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mouse",n=A.getThreadCurrentLeafId(e),a=A.getThreadConversationTurns(e,n)[t];if(!a)return Promise.reject();let{messages:s}=a,i=s.reduce((e,t)=>t.err||t.message.author.role!==o.uU.Assistant||"all"!==t.message.recipient?e:e+(e?"\n\n":"")+(0,d.RR)(t.message),"");return(0,g.v)(i).then(()=>{let t=A.getServerThreadId(e);t&&l.Z.submitImplicitMessageFeedback({messageId:s[0].message.id,type:"copy",serverThreadId:t,selectedText:i,source:r})})},deleteThread:e=>{Z(t=>{delete t.threads[e],delete t.clientNewThreadIdToServerIdMapping[e]})},retainThread:e=>{Z(t=>{var r;t.threadRetainCounts[e]=(null!==(r=t.threadRetainCounts[e])&&void 0!==r?r:0)+1}),clearTimeout(P[e])},releaseThread:e=>{null!=D().threads[e]&&(Z(t=>{var r;t.threadRetainCounts[e]=Math.max((null!==(r=t.threadRetainCounts[e])&&void 0!==r?r:0)-1,0)}),D().threadRetainCounts[e]>0||(clearTimeout(P[e]),P[e]=setTimeout(()=>{null==D().threads[e]||D().threadRetainCounts[e]>0||A.deleteThread(e)},3e4)))},setPromptGptRating:(e,t)=>{let r=A.resolveThreadId(e);Z(e=>{let n=e.threads[r];null!=n&&(null==t?n.promptGptRating=void 0:n.promptGptRating={gizmoId:t})})}};async function F(e,t){let r=await l.Z.getConversation(e);return h.U.addTiming("chatgpt.web.chatPage.loadExistingConversation"),A.initThreadFromServerData(e,r,t,void 0,t),r}let B=e=>{let t=U(t=>E.getThreadModelId(e,t));return null!=t?t:s.ge},R=e=>U(t=>null==e?void 0:O(e)?t.clientNewThreadIdToServerIdMapping[e]:e),G=e=>U(t=>{var r,n;let o=A.resolveThreadId(e);return null!==(r=null===(n=t.threads[o])||void 0===n?void 0:n.initialThreadData)&&void 0!==r?r:_()}),H=(e,t)=>U(r=>{let n=E.getConversationMode(e,r);return t&&((null==n?void 0:n.kind)===o.OL.GizmoInteraction||(null==n?void 0:n.kind)===o.OL.PrimaryAssistant)?{gizmo_id:t,kind:o.OL.GizmoInteraction}:n}),z=e=>{let t=(0,a.rm)();return U(r=>null==r.threads[E.resolveThreadId(e,r)]?t:E.getGizmoId(e,r))},q=e=>U(t=>{var r,n;let o=A.resolveThreadId(e);return null!==(r=null===(n=t.threads[o])||void 0===n?void 0:n.isLoading)&&void 0!==r&&r}),W=e=>U(()=>A.getThreadCurrentLeafId(e)),V=(e,t)=>{let r=(0,C.useRef)([]);return U(()=>{var n;let o=A.getThreadConversationTurns(e,t,r.current);return r.current=o,null!==(n=null==o?void 0:o.length)&&void 0!==n?n:0})},X=(e,t)=>{let r=(0,C.useRef)([]);return U(()=>{let n=A.getThreadConversationTurns(e,t,r.current);return r.current=n,n})},Y=(e,t,r)=>{let n=(0,C.useRef)([]);return U(()=>{let o=A.getThreadConversationTurns(e,r,n.current);return n.current=o,t>=0&&t<o.length?o[t]:null})},K=(e,t)=>{let r=(0,C.useRef)([]);return U(()=>{let n=A.getThreadConversationTurns(e,t,r.current);return r.current=n,n.length>0?n[n.length-1]:null})},Q=(e,t)=>{let r=(0,C.useRef)([]);return U(()=>{let n=A.getThreadConversationTurns(e,t,r.current);r.current=n;let a=0;for(let e=n.length-1;e>=0;e--){let t=n[e];if(t.messages.some(e=>{var t;return null===(t=e.message.metadata)||void 0===t?void 0:t.is_indepth_feedback}))return!0;if(t.messages.some(e=>e.message.author.role===o.uU.Assistant)&&a++,a>=3)break}return!1})},J=(e,t)=>U(()=>{let r=A.resolveThreadId(e);return A.getTree(r).getBranchFromLeaf(t).some(e=>e.message.author.role===o.uU.User)}),$=e=>{let t=W(e);return(0,C.useMemo)(()=>{var r,n;let o=A.getThreadConversationTurns(e,t,[]),a=null!==(r=null==o?void 0:o.length)&&void 0!==r?r:0,s=null!==(n=null==o?void 0:o[a-1])&&void 0!==n?n:null;return 0===a?t:u.Cv.getRequestIdFromConversationTurn(s)},[t,e])},ee=e=>U(()=>A.getTitle(e)),et=e=>(0,S.s)(U,()=>A.getTitleAndSource(e),x()),er=e=>U(()=>{var t;let r=A.resolveThreadId(e);return null===(t=D().threads[r])||void 0===t?void 0:t.continuingFromSharedConversationId}),en=e=>U(()=>{var t;let r=A.resolveThreadId(e);return null===(t=D().threads[r])||void 0===t||null===(t=t.sharedConversationMetadata)||void 0===t?void 0:t.authorName}),eo=(e,t)=>U(()=>{let r=A.getTree(e).getNodeByIdOrMessageId(t);if(null==r)throw Error("useThreadTreeNode: cannot get tree node for ".concat(t," in thread ").concat(e));return r}),ea=(e,t)=>U(()=>{var r,n;return null!==(r=null===(n=A.getTree(e))||void 0===n?void 0:n.getHasErrorFromNode(t))&&void 0!==r&&r}),es=(e,t)=>U(()=>{var r,n;return null!==(r=null===(n=A.getTree(e))||void 0===n?void 0:n.isMessageIncomplete(t))&&void 0!==r&&r}),el=(e,t)=>U(()=>{let r=A.getTree(e);return null==r?[]:r.getBranchFromLeaf(t).filter(e=>e.message.author.role!==o.uU.Root)}),ei=(e,t)=>el(e,t).map(e=>e.message),ed=(e,t)=>U(()=>{let r=A.getTree(e);return null==r?null:r.getLeafFromNode(t)}),eu=(e,t)=>U(()=>{let r=A.getTree(e);return null!=r&&t.map(e=>r.getLeafFromNode(e)).some(e=>r.getHasErrorFromNode(e.id))}),ec=e=>{var t,r,n,o,a;let s=A.getTree(e).getUserContext();if(null==s)return null;let{message:l}=s,i=null!==(t=null===(r=l.metadata)||void 0===r?void 0:r.shared_conversation_id)&&void 0!==t?t:null;if((null===(n=l.metadata)||void 0===n?void 0:n.user_context_message_data)!=null){let{about_user_message:e,about_model_message:t}=l.metadata.user_context_message_data;return{aboutUserMessage:null!==(o=null==e?void 0:e.trim())&&void 0!==o?o:"",aboutModelMessage:null!==(a=null==t?void 0:t.trim())&&void 0!==a?a:"",fallback:null,shareId:i}}return{aboutUserMessage:null,aboutModelMessage:null,fallback:(0,d.RR)(l),shareId:i}},eg=e=>U(t=>{var r;let n=A.resolveThreadId(e);return null===(r=t.threads[n])||void 0===r||null===(r=r.sharedConversationMetadata)||void 0===r?void 0:r.hasUserEditableContextFlag}),eh=e=>!!A.getTree(e).findNode(e=>"model_editable_context"===e.message.content.content_type),ev=e=>{let t=eg(e);return null!=ec(e)||!!t},ep=e=>U(()=>{var t;let r=A.resolveThreadId(e);return(null===(t=D().threads[r])||void 0===t?void 0:t.continuingFromSharedConversationId)!=null}),em=e=>U(()=>"root"===A.getThreadCurrentLeafId(e)),ef=e=>{let t=(0,T.useRouter)(),r=R(e);return!!r&&(!!t.query.convId&&t.query.convId===r||!!f()(t.query.default)&&"c"===t.query.default[0]&&t.query.default[1]===r)},eb=e=>U(()=>{var t;let r=A.resolveThreadId(e);return null===(t=D().threads[r])||void 0===t?void 0:t.promptGptRating}),ex=(e,t)=>U(()=>{let r=A.resolveThreadId(e),n=A.getTree(r).getBranchFromLeaf(t);return p()(n,e=>e.message.author.role===o.uU.System&&"system_content"===e.message.content.content_type)}),eT=()=>null!=(0,C.useContext)(i.gB);function eC(e){let t=A.getTree(e),r=A.getThreadCurrentLeafId(e),n=t.getNodeByIdOrMessageId(r);for(;n;){var o;let e=null===(o=n.message.metadata)||void 0===o?void 0:o.default_model_slug;if(e)return e;if(!n.parentId)return;n=t.getNodeByIdOrMessageId(n.parentId)}}function ey(e){let{clientThreadId:t,role:r}=e;return A.getTree(t).countMessagesByAuthor(r)}function eM(e){let{clientThreadId:t,conversationLeafId:r}=e,n=A.getTree(t);return(0,C.useMemo)(()=>n.getNodeByIdOrMessageId(r).message.end_turn,[r,n])}},31438:function(e,t,r){r.d(t,{B:function(){return h},EV:function(){return T},bM:function(){return b},ss:function(){return y},tN:function(){return f},vm:function(){return x},xH:function(){return C}});var n,o,a,s=r(98601),l=r(99976),i=r(61619),d=r(13249),u=r(92379),c=r(68810);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}let h=((n={}).DownloadMessages="download-messages",n.InviteUsersToWorkspace="invite-users-to-workspace",n.WorkspaceAppearance="workspace-appearance",n.KeyboardActions="keyboard-actions",n.UserContext="user-context",n.WorkspaceSwitcher="workspace-switcher",n.ReadOnlyConversationTemplate="read-only-conversation-template",n.CookieManagement="cookie-management",n.AgeVerificationInterstitial="age-verification-interstitial",n.GPTDetails="gpt-details",n.GPTPrivacySettings="gpt-privacy-settings",n.GPTFeedbackEmail="gpt-support-email",n.GPTReview="gpt-review",n.GPTRemoveThirdParty="gpt-remove-third-party",n.SharedConversationModeration="shared-conversation-moderation",n.ReportConversation="report-conversation",n.BlockingInitialComponent="blocking-initial-component",n.NoAuthNewChat="no-auth-new-chat",n.GlobalMemoryOnboarding="global-memory-onboarding",n.AccountPayment="account-payment",n),v=d.F.IsNavigationCollapsed,p=d.F.IsHistoryCollapsed,m={isThreadHeaderVisible:!0,isDesktopNavCollapsed:null!==(o=d.m.getItem(v))&&void 0!==o&&o,isVoiceActive:!1,sharingModalThreadId:void 0,feedbackModalThreadId:void 0,leaveWorkspaceData:null,activeSidebar:!1,activeStageSidebar:!1,activeModals:new Set,isLatencyDevToolsVisible:!1,purchaseWorkspaceData:null,isHistoryCollapsed:null===(a=d.m.getItem(p))||void 0===a||a},f=(0,c.Ue)()(()=>(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach(function(t){(0,s.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e})({},m)),b={isThreadHeaderVisible:e=>e.isThreadHeaderVisible,isLatencyDevtoolsVisible:e=>e.isLatencyDevToolsVisible},x={toggleHistoryCollapsed:()=>{f.setState(e=>{let t=!e.isHistoryCollapsed;return d.m.setItem(p,t),l.A.logToggleShowRecents({isOnlyShowingRecents:t}),{isHistoryCollapsed:t}})},toggleNavSidebar:()=>{f.getState().activeStageSidebar?x.togglePopoverNavSidebar():x.toggleDesktopNavCollapsed()},togglePopoverNavSidebar:()=>{x.toggleActiveSidebar("popover-nav")},toggleDesktopNavCollapsed:()=>{f.setState(e=>{let t=!e.isDesktopNavCollapsed;return d.m.setItem(v,t),l.A.logToggleDesktopNavCollapsed({isDesktopNavCollapsed:t}),{isDesktopNavCollapsed:t}})},closeSidebar:()=>{d.m.setItem(v,!0),l.A.logToggleDesktopNavCollapsed({isDesktopNavCollapsed:!0}),f.setState({isDesktopNavCollapsed:!0})},closeSidebarWithoutSavingPreference:()=>{f.setState({isDesktopNavCollapsed:!0})},openSidebar:()=>{d.m.setItem(v,!1),l.A.logToggleDesktopNavCollapsed({isDesktopNavCollapsed:!1}),f.setState({isDesktopNavCollapsed:!1})},hideThreadHeader:()=>{f.setState({isThreadHeaderVisible:!1})},showThreadHeader:()=>{f.setState({isThreadHeaderVisible:!0})},openSharingModal(e,t){f.setState({sharingModalThreadId:e}),l.A.logEvent(i.M.shareConversationOpenModal,{location:t})},closeSharingModal(){f.setState({sharingModalThreadId:void 0})},openFeedbackModal(e){f.setState({feedbackModalThreadId:e})},closeFeedbackModal(){f.setState({feedbackModalThreadId:void 0})},setLeaveWorkspaceData(e){f.setState({leaveWorkspaceData:e})},setPurchaseWorkspaceData(e){f.setState({purchaseWorkspaceData:e})},setActiveSidebar(e){f.setState({activeSidebar:e})},toggleActiveSidebar(e){f.setState(t=>({activeSidebar:t.activeSidebar!==e&&e}))},closeActiveSidebar(){f.setState(()=>({activeSidebar:!1}))},setActiveStageSidebar(e){f.setState({activeStageSidebar:e})},toggleModal(e){f.setState(t=>{let r=new Set(t.activeModals);return r.has(e)?r.delete(e):r.add(e),{activeModals:r}})},openModal(e){f.setState(t=>{let r=new Set(t.activeModals);return r.add(e),{activeModals:r}})},closeModal(e){f.setState(t=>{let r=new Set(t.activeModals);return r.delete(e),{activeModals:r}})},closeAllActiveModals(){f.setState({activeModals:new Set})},hideLatencyDevTools:()=>{f.setState({isLatencyDevToolsVisible:!1})},showLatencyDevTools:()=>{f.setState({isLatencyDevToolsVisible:!0})}};function T(e){return f(t=>t.activeModals.has(e))}function C(){return f(e=>e.isDesktopNavCollapsed)}function y(){let{0:e,1:t}=(0,u.useState)(!1),r=f(e=>e.activeModals);return(0,u.useEffect)(()=>{t(e=>e||r.has(h.BlockingInitialComponent))},[r]),e}},10481:function(e,t,r){r.d(t,{i:function(){return n},l:function(){return o}});let n="https://help.openai.com/en/articles/8096356-custom-instructions-for-chatgpt",o="https://help.openai.com/en/articles/7967234-enabling-multi-factor-authentication-mfa-with-openai#h_488a963a1e"},79746:function(e,t,r){r.d(t,{v:function(){return a}});var n=r(24740);function o(){n.m.danger("Failed to copy to clipboard.",{duration:4,hasCloseButton:!0})}function a(e){return new Promise((t,r)=>{var n;if(!(null!==(n=navigator)&&void 0!==n&&n.clipboard)){o(),r();return}try{navigator.clipboard.writeText(e).then(()=>t("success"),()=>{o(),r()})}catch(e){o(),r()}})}}}]);
//# sourceMappingURL=2745-193d907de34c0df4.js.map