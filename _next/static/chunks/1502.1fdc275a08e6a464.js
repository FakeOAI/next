"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1502],{95204:function(e,t,n){var r,l=n(92379);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}t.Z=e=>l.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 34 34"},e),r||(r=l.createElement("g",{id:"icon / robot-sad"},l.createElement("path",{id:"Rectangle 49961",stroke:"currentColor",strokeWidth:2.833,d:"M4.959 9.917a2.833 2.833 0 0 1 2.833-2.834h18.417a2.833 2.833 0 0 1 2.833 2.834V21.25a5.667 5.667 0 0 1-5.667 5.667h-12.75A5.667 5.667 0 0 1 4.96 21.25z"}),l.createElement("circle",{id:"Ellipse 32520",cx:12.041,cy:14.167,r:2.125,fill:"currentColor"}),l.createElement("circle",{id:"Ellipse 32521",cx:21.959,cy:14.167,r:2.125,fill:"currentColor"}),l.createElement("path",{id:"Vector 2380",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.833,d:"M17 7.083V4.25"}),l.createElement("path",{id:"Vector 2381",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.833,d:"M4.958 14.167c-.782 0-1.416.634-1.416 1.416V17c0 .782.634 1.417 1.416 1.417v0"}),l.createElement("path",{id:"Vector 2382",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.833,d:"M29.042 14.167c.782 0 1.416.634 1.416 1.416V17c0 .782-.634 1.417-1.416 1.417v0"}),l.createElement("path",{id:"Vector 2386",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.833,d:"M19.834 21.158c-1.964-.822-3.703-.822-5.667 0"}))))},9033:function(e,t,n){n.d(t,{Kd:function(){return v},v_:function(){return j}});var r=n(59725),l=n(98095),s=n(28146),o=n(15913),i=n(38482),a=n.n(i),c=n(34977),u=n(44425),d=n(26925),f=n(97193),h=n(51837),p=n(651);let x=a()(()=>Promise.all([n.e(8682),n.e(6481)]).then(n.bind(n,9760)).then(e=>e.AvatarButtons),{ssr:!1,loadableGenerated:{webpack:()=>[9760]}}),m=l.Z.Item;function g(){let e=d.ne.useStore();return(0,o.e2)()?(0,p.jsx)(m,{onClick:()=>{e.setState({shouldShowAddToHomePopover:!0})},icon:(0,p.jsx)(s.IAe,{className:"icon-md-heavy text-token-text-primary"}),children:"Add to home screen"}):null}function v(e){let{className:t,iconSize:n,children:r}=e,o=(0,h.L)(),i=(0,c.useRouter)();return(0,p.jsxs)(l.Z.Root,{modal:!1,children:[(0,p.jsx)(b,{className:t,iconSize:n,children:r}),(0,p.jsx)(l.Z.Portal,{children:(0,p.jsxs)(l.Z.Content,{collisionPadding:10,children:[(0,p.jsx)(m,{onClick:()=>f.vm.toggleSettingsModalOpen(),icon:(0,p.jsx)(s.SWE,{className:"icon-md-heavy text-token-text-primary"}),children:"Settings"}),(0,p.jsx)(m,{onClick:()=>window.open(u._A,"_blank"),icon:(0,p.jsx)(s.Jmo,{className:"icon-md-heavy text-token-text-primary"}),children:"About SearchGPT"}),(0,p.jsx)(m,{onClick:()=>window.open("https://chatgpt.com","_blank"),icon:(0,p.jsx)(s.Pfi,{className:"icon-md-heavy text-token-text-primary"}),children:"Open ChatGPT"}),(0,p.jsx)(g,{}),(0,p.jsx)(l.Z.Separator,{}),(0,p.jsx)(m,{onClick:()=>i.push("/auth/logout",void 0,{shallow:!0}),icon:(0,p.jsx)(s.iz5,{className:"icon-md-heavy text-token-text-primary"}),children:"Log out"}),o&&(0,p.jsx)(x,{})]})})]})}function j(e){let{className:t,iconSize:n}=e,r=(0,c.useRouter)();return(0,p.jsxs)(l.Z.Root,{modal:!1,children:[(0,p.jsx)(b,{className:t,iconSize:n}),(0,p.jsx)(l.Z.Portal,{children:(0,p.jsx)(l.Z.Content,{collisionPadding:10,children:(0,p.jsx)(m,{onClick:()=>r.push("/auth/logout",void 0,{shallow:!0}),icon:(0,p.jsx)(s.iz5,{className:"icon-md-heavy text-token-text-primary"}),children:"Log out"})})})]})}function b(e){let{className:t,iconSize:n,children:s}=e;return(0,p.jsx)(l.Z.Trigger,{className:"group border-0 !bg-transparent p-0",children:(0,p.jsx)("div",{className:"rounded-full",children:null!=s?s:(0,p.jsx)(r.zf,{iconSize:n,className:t})})})}},19042:function(e,t,n){n.r(t),n.d(t,{DebugModal:function(){return w},DebugModalContents:function(){return T}});var r,l=n(2346),s=n(11550),o=n(39358),i=n(30115),a=n(28146),c=n(24434),u=n(67330),d=n(91111),f=n(97193),h=n(27313),p=n(5132),x=n(30757),m=n(79746),g=n(19841),v=n(38482),j=n.n(v),b=n(92379),O=n(15478),y=n(19229),k=n(651);let N=j()(()=>Promise.all([n.e(3904),n.e(6476)]).then(n.bind(n,16476)).then(e=>e.default),{ssr:!1,loadableGenerated:{webpack:()=>[16476]}});function w(e){let{threadId:t,threadUserId:n}=e;return(0,f.W6)(f.bM.isDebugModalOpen)&&(0,k.jsx)(c.Z,{isOpen:!0,onClose:()=>f.vm.toggleDebugModalOpen(),type:"success",size:"fullscreen",noPadding:!0,rootClassName:"z-50",children:(0,k.jsx)(T,{threadId:t,threadUserId:n,onClose:()=>f.vm.toggleDebugModalOpen()})})}let S=(e,t)=>{let n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=window.URL.createObjectURL(n),l=document.createElement("a");l.href=r,l.download=e,l.click(),window.URL.revokeObjectURL(r)},M="<|im_start|>",P="<|im_sep|>",_="<|im_end|>";function C(e){let{prompt:t}=e,n=[],r=0;for(;;){let e=t.indexOf(M,r);if(-1===e)break;let l=t.indexOf(P,e);if(-1===l)break;let s=t.indexOf(_,l),o=t.indexOf("<|fim_suffix|>",l);if(-1!==o&&(-1===s||o<s)&&(s=o),-1===s)break;let i=t.substring(e+M.length,l),a=t.substring(l+P.length,s);n.push((0,k.jsxs)("div",{children:[(0,k.jsxs)("span",{className:"font-semibold",children:["[",i,"]"]})," ",a]},e)),r=s+_.length}return n}let E=O.Z.div(r||(r=(0,l.Z)(["mb-[-5px] px-2 pb-1 font-semibold uppercase border-b-2 ",""])),e=>{let{$isSelected:t}=e;return t?"border-black dark:border-white":"border-transparent"});function T(e){var t,n;let{threadId:r,threadUserId:l,message:o,onClose:c}=e,{sessionUser:f}=(0,d.A)(),{0:m,1:v}=(0,b.useState)(o?"message":"json"),{data:j,isLoading:O,refetch:y}=(0,h.Y)({threadId:r,threadUserId:l,refetchOnMount:"always"}),N=null==j?void 0:j.thread;if((0,b.useEffect)(()=>{v(o?"message":null!=N&&N.turns.length?"turn".concat((null==N?void 0:N.turns.length)-1):"thread")},[null==N?void 0:N.turns.length,o]),!O&&!N&&!o)return(0,k.jsxs)(u.bW,{onClickRetry:()=>y(),children:["Failed to load."," "]});if(O)return(0,k.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:"Loading..."});let w=null==N?void 0:N.turns,M=null==N||null===(t=N.turns[N.turns.length-1])||void 0===t||null===(t=t.artifacts__)||void 0===t||null===(t=t.model_snapshots)||void 0===t?void 0:t.default_id,P=l&&r?(0,p.t5)(l,r):null;return(0,k.jsx)("div",{className:"flex flex-col gap-2 break-words font-mono text-xs",children:(0,k.jsxs)(x.fC,{orientation:"vertical",value:m,onValueChange:e=>v(e),children:[(0,k.jsxs)(x.aV,{className:"flex items-center justify-center gap-2 px-4 py-1",children:[o&&(0,k.jsx)(x.xz,{value:"message",children:(0,k.jsx)(E,{$isSelected:"message"===m,children:"Message"})},"message"),N&&(0,k.jsx)(x.xz,{value:"thread",children:(0,k.jsx)(E,{$isSelected:"thread"===m,children:"Thread"})},"thread"),null==w?void 0:w.map((e,t)=>{var n;return(0,k.jsxs)(b.Fragment,{children:[(0,k.jsx)(x.xz,{value:"turn".concat(t),children:(0,k.jsxs)(E,{$isSelected:m==="turn".concat(t),children:["Turn[",t,"]"]})},t),null===(n=e.artifacts__)||void 0===n||null===(n=n.debug_ddtrace_urls)||void 0===n?void 0:n.map(e=>(0,k.jsx)(E,{$isSelected:!1,children:(0,k.jsxs)("a",{target:"_blank",href:e,className:"text-nowrap",children:["Trace[",t,"] â†—"]})},e))]},t)}),(0,k.jsx)("div",{className:"flex-grow"}),M&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(D,{name:"Model",id:M})," ",(0,k.jsx)("span",{className:"text-gray-500 dark:text-white",children:"|"})]}),f&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(D,{name:"User ID",id:f.id})," ",(0,k.jsx)("span",{className:"text-gray-500 dark:text-white",children:"|"})]}),P&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(D,{name:"Permalink",id:P}),(0,k.jsx)("span",{className:"text-gray-500 dark:text-white",children:"|"})]}),N&&(0,k.jsxs)(s.z,{size:"small",color:"secondary",onClick:()=>S("thread.json",N),children:[(0,k.jsx)(a._8t,{className:"icon-sm"})," thread.json"]}),(0,k.jsx)(i.P,{onClick:c})]}),null==w?void 0:w.map((e,t)=>{var n,r,l;return(0,k.jsxs)(x.VY,{value:"turn".concat(t),className:"max-h-[calc(100vh-46px)] w-full overflow-y-scroll scroll-smooth",children:[(0,k.jsxs)("div",{className:(0,g.default)("flex flex-col gap-1 p-6",e.index%2==0&&"bg-token-main-surface-tertiary"),children:[(0,k.jsx)(C,{prompt:null!==(n=null===(r=e.artifacts__)||void 0===r||null===(r=r.debug_info)||void 0===r||null===(r=r.main_model_response)||void 0===r?void 0:r.prompt_string)&&void 0!==n?n:""}),(0,k.jsxs)("div",{children:[(0,k.jsx)("span",{className:"font-semibold",children:"[assistant]"})," ",null===(l=e.model_response)||void 0===l?void 0:l.text]})]})," "]},t)}),N&&(0,k.jsx)(x.VY,{value:"thread",className:"max-h-[calc(100vh-46px)] w-full overflow-y-scroll scroll-smooth p-6",children:(0,k.jsx)(I,{data:N,collapsed:4})}),o&&(0,k.jsx)(x.VY,{value:"message",className:"max-h-[calc(100vh-46px)] w-full overflow-y-scroll scroll-smooth p-6",children:(0,k.jsx)(I,{data:o,collapsed:4})})]},null!==(n=null==N?void 0:N.turns.length)&&void 0!==n?n:"message")})}function I(e){let{data:t,collapsed:n}=e,{0:r,1:l}=(0,b.useState)(null==n||n);return(0,k.jsxs)("div",{className:"flex flex-col items-start gap-1",children:[(0,k.jsx)("button",{onClick:()=>l(!r),className:"flex items-center gap-1",children:r?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(y.rIY,{size:14})," Expand all"]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(y.NsE,{size:14})," Collapse all"]})}),(0,k.jsx)("div",{className:"w-full",children:(0,k.jsx)(N,{json:t,jsonViewProps:{collapsed:r,shortenTextAfterLength:0}},String(r))})]})}function D(e){let{name:t,id:n}=e,r=(0,b.useCallback)(()=>{(0,m.v)(n)},[n]);return(0,k.jsxs)("div",{className:"flex items-center gap-2 truncate",children:[(0,k.jsxs)("span",{className:"text-nowrap font-semibold",children:[t,":"]}),(0,k.jsx)("span",{title:n,className:"truncate text-gray-500 dark:text-white",children:n}),(0,k.jsx)(o.Z,{onCopy:r})]})}},67330:function(e,t,n){n.d(t,{aE:function(){return u},bW:function(){return c},jj:function(){return a}});var r=n(82363),l=n(92379),s=n(64925),o=n(95204),i=n(651);function a(e){let{children:t}=e;return(0,i.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,i.jsxs)("div",{className:"flex flex-col items-center gap-1 text-sm font-semibold text-token-text-tertiary",children:[(0,i.jsx)(o.Z,{className:"icon-2xl"}),t]})})}function c(e){let{onClickRetry:t,children:n}=e;return(0,i.jsxs)(a,{children:[(0,i.jsxs)("div",{children:["Error."," ",(0,i.jsx)("button",{onClick:t,className:"inline font-semibold text-token-text-primary hover:opacity-70",children:"Try again?"})]}),n]})}function u(e){let{resetError:t,componentStack:n,error:o}=e;return(0,l.useEffect)(()=>{r.U.addError(o)},[o]),(0,i.jsxs)(c,{onClickRetry:t,children:[(0,i.jsx)("div",{className:"fixed left-2 top-2",children:(0,i.jsx)(s.WU,{})}),(0,i.jsx)("div",{className:"fixed right-2 top-2",children:(0,i.jsx)(s.z0,{})}),!1]})}},64925:function(e,t,n){n.d(t,{Au:function(){return W},rm:function(){return z},WU:function(){return D},z0:function(){return L}});var r,l=n(2346),s=n(25162),o=n(19841),i=n(24098),a=n.n(i),c=n(92379),u=n(15478),d=n(9033),f=n(30853),h=n(91981),p=n(651);let x={[h.kQ.CONNECTING]:"Connecting",[h.kQ.OPEN]:"Open",[h.kQ.CLOSING]:"Closing",[h.kQ.CLOSED]:"Closed",[h.kQ.UNINSTANTIATED]:"Uninstantiated"};function m(e){let{readyState:t,className:n}=e,{0:r,1:l}=(0,c.useState)(!0);return((0,c.useEffect)(()=>{setTimeout(()=>{l(!0)},1e3)},[]),t!==h.kQ.OPEN&&r)?(0,p.jsx)("div",{className:(0,o.default)("flex items-center gap-2 p-3 text-sm",n),children:(0,p.jsx)(f.u,{label:x[t],sideOffset:0,side:"right",children:(0,p.jsx)("div",{className:(0,o.default)("h-2 w-2 rounded-full",(t===h.kQ.CLOSING||t===h.kQ.CONNECTING)&&"bg-yellow-500",(t===h.kQ.CLOSED||t===h.kQ.UNINSTANTIATED)&&"bg-red-500",r?"block":"hidden")})})}):null}var g=n(98601),v=n(71522),j=n(28146),b=n(87387);function O(e){let{label:t,labelSide:n="right",className:r,onClick:l,children:s}=e;return(0,p.jsx)(f.E,{label:t,sideOffset:0,side:n,disabled:!t,children:(0,p.jsx)("button",{onClick:l,className:(0,o.default)("flex items-center justify-center p-1.5 text-token-text-tertiary hover:text-token-text-primary",r),children:s})})}var y=n(26925),k=n(97193),N=n(10798),w=n(65925),S=n.n(w),M=n(99661);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach(function(t){(0,g.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function C(e,t){return Object.keys(e).reduce((n,r)=>(S()(e[r],t[r])||(n[r]=t[r]),n),{})}function E(){let{setTheme:e,resolvedTheme:t}=(0,M.F)(),n=y.ne.useState(y.ne.selectAgentSettingsOverrides),[r]=(0,N.OR)(),l=C(b.sH,n),s=C(N.Ws,r),i=_(_({},l),s),a=Object.keys(i).length>0;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(O,{label:"Debug (Internal)",onClick:()=>k.vm.toggleDebugModalOpen(),children:(0,p.jsx)(j.reV,{className:"icon-sm-heavy"})}),(0,p.jsx)(O,{label:"Theme (Internal)",onClick:()=>{e("dark"===t?"light":"dark")},children:(0,p.jsxs)(v.ZP,{children:["dark"===t&&(0,p.jsx)(j.NWY,{className:"icon-md-heavy"}),"light"===t&&(0,p.jsx)(j.kLh,{className:"icon-md-heavy"})]})}),(0,p.jsx)(O,{label:a?["Config (Internal) - Changes:",Object.keys(i).join(", ")].join("\n"):"Config (Internal)",onClick:()=>k.vm.toggleInternalSettingsModalOpen(),children:(0,p.jsx)(j.KAl,{className:(0,o.default)(a?"icon-lg-heavy":"icon-md-heavy",{"text-red-500":a})})})]})}var T=n(91111),I=n(51837);function D(e){let{hideReadyState:t=!1,onResultsPage:n=!1,children:r}=e,{readyState:l,resetSearch:i}=(0,T.A)(),c=(0,I.L)();return(0,p.jsxs)("div",{className:(0,o.default)("hidden w-20 shrink-0 flex-col items-center justify-between border-r py-6 sm:flex",n?"relative border-token-border-light":"absolute bottom-0 left-0 top-0 border-transparent"),children:[(0,p.jsxs)(a(),{onClick:()=>i(),href:"/search",className:"text-token-text-primary hover:text-token-text-secondary",title:"Go to SearchGPT",children:[(0,p.jsx)(s.nI,{className:"h-8 w-8"}),c&&!t&&(0,p.jsx)(m,{readyState:l})]}),c&&(0,p.jsx)("div",{className:"flex flex-col items-center gap-2",children:(0,p.jsx)(E,{})}),(0,p.jsx)("div",{className:"absolute top-1/2 -translate-y-1/2",children:r})]})}function L(){return(0,p.jsx)("div",{className:"absolute right-5 top-5 hidden sm:block",children:(0,p.jsx)(d.Kd,{className:"h-8 w-8"})})}function W(){return(0,p.jsx)(A,{$side:"left",children:(0,p.jsx)(s.nI,{className:"h-8 w-8"})})}function z(e){let{className:t}=e;return(0,p.jsx)(A,{$side:"right",className:"".concat(t),children:(0,p.jsx)(d.v_,{className:"h-8 w-8"})})}let A=u.Z.div(r||(r=(0,l.Z)(["absolute "," bottom-5 top-5 z-10 w-10 flex-col justify-between items-center hidden sm:flex"])),e=>"left"===e.$side?"left-5":"right-5")},91111:function(e,t,n){n.d(t,{A:function(){return a},c:function(){return i}});var r=n(91530),l=n.n(r),s=n(92379),o=n(91981);let i=(0,s.createContext)({waitingForNewTurn:!1,sessionUser:null,userMetadata:{cf_connecting_ip:null,ip_city:null,time_zone:null,user_country:null,user_locale:null,user_region:null,user_region_code:null,latitude:null,longitude:null,locationAccuracy:null},submitFollowup:()=>Promise.resolve(),submitSearch:()=>Promise.resolve(),retrySearch:()=>Promise.resolve(),resetSearch:l(),prefetch:l(),readyState:o.kQ.UNINSTANTIATED}),a=()=>(0,s.useContext)(i)},44425:function(e,t,n){n.d(t,{_A:function(){return r}});let r="https://openai.com/index/searchgpt-prototype/"},94206:function(e,t,n){n.d(t,{O$:function(){return r},jF:function(){return s},v3:function(){return l}});class r extends Error{constructor(e){super(e),this.name="WebsocketConnectError"}}class l extends Error{constructor(e){super(e),this.name="TurnError"}}class s extends Error{constructor(e){super(e),this.name="TurnDeltaMessageError"}}},97193:function(e,t,n){n.d(t,{KP:function(){return c},W6:function(){return d},bM:function(){return f},vm:function(){return h},y6:function(){return a}});var r,l,s=n(98601),o=n(68810);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}let a=((r={}).Turn="turn",r.ImagesTab="images_tab",r),c=((l={})[l.FromLeft=-1]="FromLeft",l[l.FromRight=1]="FromRight",l),u={isInternalSettingsModalOpen:!1,isSettingsModalOpen:!1,isDebugModalOpen:!1,isUsageNuxModalOpen:!1,isWelcomePageOpen:!1,focusedImage:void 0},d=(0,o.Ue)()(()=>(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){(0,s.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e})({},u)),f={isInternalSettingsModalOpen:e=>e.isInternalSettingsModalOpen,isSettingsModalOpen:e=>e.isSettingsModalOpen,isDebugModalOpen:e=>e.isDebugModalOpen,isUsageNuxModalOpen:e=>e.isUsageNuxModalOpen,isWelcomePageOpen:e=>e.isWelcomePageOpen,getFocusedImage:e=>e.focusedImage,isModalOpen:e=>f.isInternalSettingsModalOpen(e)||f.isSettingsModalOpen(e)||f.isDebugModalOpen(e)||f.isUsageNuxModalOpen(e)||f.isWelcomePageOpen(e)||null!=f.getFocusedImage(e)},h={toggleInternalSettingsModalOpen(){d.setState(e=>({isInternalSettingsModalOpen:!e.isInternalSettingsModalOpen}))},setInternalSettingsModalOpen(e){d.setState({isInternalSettingsModalOpen:e})},toggleSettingsModalOpen(){d.setState(e=>({isSettingsModalOpen:!e.isSettingsModalOpen}))},setSettingsModalOpen(e){d.setState({isSettingsModalOpen:e})},toggleDebugModalOpen(){d.setState(e=>({isDebugModalOpen:!e.isDebugModalOpen}))},setDebugModalOpen(e){d.setState({isDebugModalOpen:e})},setFocusedImage(e){d.setState({focusedImage:e})},setUsageNuxModalOpen(e){d.setState({isUsageNuxModalOpen:e})},setWelcomePageOpen(e){d.setState({isWelcomePageOpen:e})}}},12381:function(e,t,n){n.d(t,{HV:function(){return g},LW:function(){return y},P3:function(){return k},m0:function(){return m},nn:function(){return j}});var r=n(98601),l=n(95267),s=n(15539),o=n(94206),i=n(82363),a=n(18939),c=n.n(a),u=n(89678),d=n.n(u),f=n(68810),h=n(69767);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function m(e){return j(t=>{var n,r;return null!==(n=null===(r=t.thread)||void 0===r?void 0:r.turns.map(t=>e.reduce((e,n)=>(e[n]=t[n],e),{})))&&void 0!==n?n:[]},(e,t)=>{if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!(0,s.X)(e[n],t[n]))return!1;return!0})}function g(){return j(e=>{var t;return c()(null===(t=e.thread)||void 0===t?void 0:t.turns.flatMap(e=>{var t;return null===(t=e.model_response)||void 0===t?void 0:t.citations}))},s.X)}let v={thread:null,error:void 0},j=(0,f.Ue)((0,l.n)(()=>x({},v))),b=d()(()=>{i.U.addError(new o.v3("got updateTurn with no current thread"))},1e3),O=d()(e=>{i.U.addError(new o.v3("turn not found"),{turnIndex:e})},1e3),y={threadId:e=>{var t,n;return null!==(t=null===(n=e.thread)||void 0===n?void 0:n.id)&&void 0!==t?t:null},turns:e=>{var t,n;return null!==(t=null===(n=e.thread)||void 0===n?void 0:n.turns)&&void 0!==t?t:[]},turnCitations:e=>t=>{var n,r;return null!==(n=null===(r=t.thread)||void 0===r||null===(r=r.turns[e].model_response)||void 0===r?void 0:r.citations)&&void 0!==n?n:[]},hasResponse:e=>{var t;return(0,h.VP)(null===(t=e.thread)||void 0===t?void 0:t.turns[0])},firstTurn:e=>null!=e.thread?e.thread.turns[0]:void 0,lastTurn:e=>null!=e.thread?e.thread.turns[e.thread.turns.length-1]:void 0,numTurns:e=>{var t,n;return null!==(t=null===(n=e.thread)||void 0===n?void 0:n.turns.length)&&void 0!==t?t:0},isLastTurnStreaming:e=>{let t=null!=e.thread?e.thread.turns[e.thread.turns.length-1]:void 0;return null!=t&&(0,h.A7)(t)},hasModelResponseText:e=>{var t,n;let r=null===(t=e.thread)||void 0===t?void 0:t.turns[0];return(null==r||null===(n=r.model_response)||void 0===n?void 0:n.text)!=null},hasFirstTurnError:e=>{var t;let n=null===(t=e.thread)||void 0===t?void 0:t.turns[0];return!!n&&(0,h.jo)(n)},hasTurnError:e=>{var t,n;return null!==(t=null===(n=e.thread)||void 0===n?void 0:n.turns.some(h.jo))&&void 0!==t&&t},threadError:e=>e.error,__deprecated_sportsWidget:e=>{var t,n;let r=null===(t=e.thread)||void 0===t?void 0:t.turns[0];return null!==(n=null==r?void 0:r.sports_widget)&&void 0!==n?n:null}},k={appendTurn(e,t,n){j.setState(r=>{var l;(null===(l=r.thread)||void 0===l?void 0:l.id)!==e&&(null==n||n(e),r.thread={id:e,turns:[]}),r.thread.turns.push(t)})},updateTurn(e,t){j.setState(n=>{let r=n.thread;if(!r){b();return}let l=r.turns[e];if(!l){O(e);return}t(l)})},clearThread(){j.setState(()=>x({},v))},setError(e){j.setState(t=>{t.error=e})},setThread(e,t){j.setState(n=>{n.thread={id:e,turns:t}})}}},69767:function(e,t,n){function r(e){var t;return!!e&&(null===(t=e.model_response)||void 0===t?void 0:t.text)!=null&&e.model_response.text.length>0}function l(e){return"fatal_system_error"===e.execution_status}function s(e){return"in_progress"===e.execution_status||null===e.execution_status}n.d(t,{A7:function(){return s},VP:function(){return r},jo:function(){return l}})},51837:function(e,t,n){n.d(t,{L:function(){return l}});var r=n(45120);function l(){var e;return null===(e=(0,r.fW)("2000076788"))||void 0===e?void 0:e.value}},27313:function(e,t,n){n.d(t,{Y:function(){return i},v:function(){return a}});var r=n(84760),l=n(92379),s=n(81014),o=n(12381);function i(e){let{threadId:t,threadUserId:n,refetchOnMount:l}=e;return(0,r.a)({queryKey:["thread",t,n],queryFn:async()=>{if(!t)return{thread:null,turns:null};let e=await (0,s.K8)({threadId:t,threadUserId:n}),r=e.turns;return{thread:e,turns:r}},enabled:!!t,refetchOnMount:l})}function a(e){var t;let{threadId:n,threadUserId:r}=e,s=i({threadId:n,threadUserId:r}),a=s.data;return(0,l.useEffect)(()=>{if(n){var e;o.P3.setThread(n,null!==(e=null==a?void 0:a.turns)&&void 0!==e?e:[])}},[n,a]),{query:null===(t=s.data)||void 0===t||null===(t=t.turns[0])||void 0===t?void 0:t.user_query,refetch:s.refetch,isLoading:s.isLoading,isError:s.isError}}},78571:function(e,t,n){n.d(t,{_:function(){return o}});var r=n(37088),l=n(92379),s=n(52125);let o=(0,l.forwardRef)((e,t)=>(0,l.createElement)(s.WV.label,(0,r.Z)({},e,{ref:t,onMouseDown:t=>{var n;null===(n=e.onMouseDown)||void 0===n||n.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault()}})))},15539:function(e,t,n){n.d(t,{X:function(){return r}});function r(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(let[n,r]of e)if(!Object.is(r,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}let n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}}}]);
//# sourceMappingURL=1502.1fdc275a08e6a464.js.map