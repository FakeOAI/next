"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3391],{13391:function(e,t,o){o.d(t,{n:function(){return L},A3:function(){return D},yx:function(){return E},JS:function(){return K}});var n,a=o(98601),r=o(15858),i=o(70879),s=o(99976),c=o(61619),d=o(79746),l=o(52455),g=o(91530),u=o.n(g),p=o(92379),y=o(47584),b=o(16757),h=o(24740),f=o(92745),k=o(31438),C=o(49763),M=o(22433),m=o(45248);let v=p.useLayoutEffect;function A(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)}return o}let w=/```.*?\n([\s\S]+?)\n?```[^`]*$/gms;var S=((n=S||{}).Core="Core",n.Chat="Chat",n.Settings="Settings",n);let B=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?A(Object(o),!0).forEach(function(t){(0,a.Z)(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):A(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}({Mod:"mod",Comma:","},r.s),O={[B.Mod]:/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)?"⌘":"Ctrl",[B.Comma]:",",[B.Enter]:"⏎",[B.Escape]:"Esc",[B.ArrowUp]:"↑",[B.ArrowDown]:"↓",[B.ArrowLeft]:"←",[B.ArrowRight]:"→",[B.Backspace]:"⌫",[B.Delete]:"⌦",[B.Tab]:"⇥",[B.Control]:"Ctrl",[B.Shift]:"Shift"},D=e=>e.map(e=>O[e]??e),P=(0,y.vU)({newChat:{id:"keyboardActions.newChat",defaultMessage:"Open new chat"},focusPromptTextarea:{id:"keyboardActions.focusPromptTextarea",defaultMessage:"Focus chat input"},copyLastCodeBlock:{id:"keyboardActions.copyLastCodeBlock",defaultMessage:"Copy last code block"},copyLastResponse:{id:"keyboardActions.copyLastResponse",defaultMessage:"Copy last response"},toggleCustomInstructions:{id:"keyboardActions.toggleCustomInstructions",defaultMessage:"Set custom instructions"},navigationToggle:{id:"keyboardActions.navigationToggle",defaultMessage:"Toggle sidebar"},deleteChat:{id:"keyboardActions.deleteChat",defaultMessage:"Delete chat"},archiveChat:{id:"keyboardActions.archiveChat",defaultMessage:"Archive chat"},toggleKeyboardActions:{id:"keyboardActions.toggleKeyboardActions",defaultMessage:"Show shortcuts"}}),L=new C.V,T=e=>{let{resetThreadAction:t,clientThreadId:o}=e;return[{key:"newChat",action:t||u(),actionMessageDescriptor:P.newChat,group:S.Core,keyboardBinding:[B.Mod,B.Shift,"o"],altKeyboardBindings:[[B.Mod,"k"]]},{key:"focusPromptTextarea",action:i.go,actionMessageDescriptor:P.focusPromptTextarea,group:S.Chat,keyboardBinding:[B.Shift,B.Escape]},{key:"copyLastCodeBlock",action:()=>{if(null!=o){let e=f.tQ.getThreadCurrentLeafId(o),t=f.tQ.getThreadConversationTurns(o,e);for(let e=t.length-1;e>=0;e--){let{messages:o}=t[e],n=[...o.reduce((e,t)=>null==t.err&&t.message.author.role===b.uU.Assistant&&"all"===t.message.recipient?e+(e?"\n\n":"")+(0,M.RR)(t.message):e,"").matchAll(w)],a=n.length?n[n.length-1][1]:null;if(null!=a){(0,d.v)(a).then(()=>{h.m.success("Copied code block to clipboard")});break}}}},actionMessageDescriptor:P.copyLastCodeBlock,group:S.Chat,keyboardBinding:[B.Mod,B.Shift,";"],altKeyboardBindings:[[B.Mod,B.Shift,":"]]},{key:"copyLastResponse",action:()=>{null!=o&&f.tQ.copyLastMessageToClipboard(o,"keyboard").then(()=>{h.m.success("Last response copied to clipboard")})},actionMessageDescriptor:P.copyLastResponse,group:S.Chat,keyboardBinding:[B.Mod,B.Shift,"c"]},{key:"toggleCustomInstructions",action:()=>k.vm.toggleModal(k.B.UserContext),actionMessageDescriptor:P.toggleCustomInstructions,group:S.Settings,keyboardBinding:[B.Mod,B.Shift,"i"]},{key:"navigationToggle",action:()=>k.vm.toggleNavSidebar(),actionMessageDescriptor:P.navigationToggle,group:S.Core,keyboardBinding:[B.Mod,B.Shift,"s"]},{key:"deleteChat",action:()=>{if(o){let e=f.tQ.getServerThreadId(o);e&&L.publish({kind:"deleteChat",serverThreadId:e})}},actionMessageDescriptor:P.deleteChat,group:S.Chat,keyboardBinding:[B.Mod,B.Shift,B.Backspace],altKeyboardBindings:[[B.Mod,B.Shift,B.Delete]]},{key:"toggleKeyboardActions",action:()=>k.vm.toggleModal(k.B.KeyboardActions),actionMessageDescriptor:P.toggleKeyboardActions,group:S.Settings,keyboardBinding:[B.Mod,"/"]}]},j=e=>(function(e,t,o){let n=e.map(e=>{let{keyboardBinding:t}=e,o=t.join("+");if(e.altKeyboardBindings){o=[o];let t=e.altKeyboardBindings.map(e=>e.join("+"));o=o.concat(t)}return(0,m.ZP)(o,{byKey:!0})});v(()=>{if(o?.enabled===!1)return;let a=o=>{if(!o.repeat)for(let a=0;a<n.length;a++)n[a](o)&&(void 0===e[a].enabled||e[a].enabled)&&(o.preventDefault(),t(e[a]),e[a].action())},r=e=>{void 0!==e.key&&a(e)},i=document;return i.addEventListener("keydown",r),()=>{i.removeEventListener("keydown",r)}},[e,o])})(e,e=>{s.A.logEvent(c.M.keyboardShortcut,{keyboardActionKey:e.key}),l.U.addAction("chatgpt_keyboard_shortcut",{keyboardActionKey:e.key})},{enabled:!0}),K=function(){let{resetThreadAction:e,clientThreadId:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,p.useMemo)(()=>T({resetThreadAction:e,clientThreadId:t}).filter(e=>{let{enabled:t=!0}=e;return t}),[t,e])},E=e=>{let{resetThreadAction:t,clientThreadId:o}=e;j(K({resetThreadAction:t,clientThreadId:o}))}}}]);
//# sourceMappingURL=3391.d1d81ab8a1ffc36d.js.map