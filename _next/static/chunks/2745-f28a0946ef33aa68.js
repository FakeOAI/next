"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2745],{16779:function(e,t,r){r.d(t,{Z:function(){return l}});var n=r(77420),a=r(19841),s=r(92379),o=r(28146),i=r(651);function l(e){let{onChange:t,enabled:r,label:l,disabled:d,withLockIcon:u=!1,lockIconOverride:c=null,size:h="normal",id:g}=e,p=(0,s.useCallback)(()=>{t(!r)},[r,t]);return(0,i.jsx)(n.fC,{id:g,checked:r,disabled:d,onCheckedChange:p,"aria-label":l,className:(0,a.default)("focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-token-text-secondary focus-visible:ring-offset-2 focus-visible:radix-state-checked:ring-black focus-visible:dark:ring-token-main-surface-primary focus-visible:dark:radix-state-checked:ring-green-600",d?"cursor-not-allowed opacity-50":"cursor-pointer","bg-gray-200 radix-state-checked:bg-black dark:border dark:border-token-border-medium dark:bg-transparent","relative shrink-0 rounded-full dark:radix-state-checked:border-green-600 dark:radix-state-checked:bg-green-600","normal"===h?"h-[20px] w-[32px]":"h-[19px] w-[30px]"),children:(0,i.jsx)(n.bU,{className:(0,a.default)("flex items-center justify-center rounded-full","transition-transform duration-100 will-change-transform ltr:translate-x-0.5 rtl:-translate-x-0.5","bg-white","normal"===h?"h-[16px] w-[16px] ltr:radix-state-checked:translate-x-[14px] rtl:radix-state-checked:translate-x-[-14px]":"h-[15px] w-[15px] ltr:radix-state-checked:translate-x-[13px] rtl:radix-state-checked:translate-x-[-13px]"),children:u?c||(0,i.jsx)(o.oVl,{className:"icon-xs dark:text-black"}):null})})}},59578:function(e,t,r){r.d(t,{wm:function(){return V},Xu:function(){return z}});var n=r(98601),a=r(55963),s=r(93951),o=r(41987),i=r(10481),l=r(22433),d=r(10449),u=r(42420),c=r(56032),h=r(84760),g=r(99976),p=r(61619),f=r(88667),m=r(19841),b=r(21389),v=r(88600),x=r(65925),T=r.n(x),y=r(92379),C=r(75172),M=r(62984),j=r(68306),w=r(2721),S=r(31438),_=r(15913),k=r(97537),O=r(16779),I=r(60682),N=r(91530),P=r.n(N),L=r(59144),U=r(24434),D=r(651);function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let F=I.pm.FirstTimeUsingUserContext;var A=e=>{let{onClose:t}=e,r=(0,C.Z)(),{markAsViewed:n}=(0,I.qg)(F),a=(0,y.useCallback)(()=>{n(),t()},[n,t]);return(0,D.jsxs)(U.Z,{isOpen:!0,onClose:P(),size:"custom",className:"max-w-xl",type:"success",title:r.formatMessage(R.title),primaryButton:(0,D.jsx)(L.Z.Button,{onClick:a,title:r.formatMessage(R.ok),color:"primary"}),children:[(0,D.jsxs)("div",{className:"mb-6 flex flex-col gap-3",children:[(0,D.jsx)("p",{children:(0,D.jsx)(M.Z,Z({},R.body1))}),(0,D.jsx)("p",{children:(0,D.jsx)(M.Z,Z({},R.body2))})]}),(0,D.jsx)("div",{className:"flex flex-col gap-3 text-sm text-token-text-tertiary",children:(0,D.jsx)("p",{children:(0,D.jsx)(M.Z,Z(Z({},R.legal1),{},{values:{article:e=>(0,D.jsx)("a",{href:i.i,target:"_blank",className:"underline",rel:"noopener noreferrer",children:e})}}))})})]})};let R=(0,j.vU)({title:{id:"UserContextFirstTimeModal.title",defaultMessage:"Introducing Custom Instructions"},body1:{id:"UserContextFirstTimeModal.body1",defaultMessage:"Customize your interactions with ChatGPT by providing specific details and guidelines for your chats."},body2:{id:"UserContextFirstTimeModal.body2",defaultMessage:"Whenever you edit your custom instructions, they'll take effect in all new chats you create. Existing chats won't be updated."},legal1:{id:"UserContextFirstTimeModal.legal1",defaultMessage:"Your instructions will be used to make our models better unless you've opted out and may be shared with any plugins you've enabled. Visit our <article>Help Center</article> to learn more."},ok:{id:"UserContextFirstTimeModal.ok",defaultMessage:"OK"}});var q=r(30853),B=r(28146),H=r(24740);function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function z(e){let t=(0,C.Z)();return(0,h.a)({queryKey:["userContext"],queryFn:()=>w.Z.getUserSystemMessage().catch(e=>{throw H.m.danger(t.formatMessage({id:"userContextModal.getCustomInstructionsError",defaultMessage:"Failed to get your settings"})),e}),enabled:e,select:e=>({aboutUserMessage:e?.about_user_message??"",aboutModelMessage:e?.about_model_message??"",disabledTools:e?.disabled_tools??[],enabled:e?.enabled??!0})})}let W={aboutUserMessage:void 0,aboutModelMessage:void 0,disabledTools:void 0,enabled:void 0};function V(e){let{isModalOpen:t}=e,r=(0,C.Z)(),n=function(){let{eligible:e}=(0,I.qg)(F);return e}(),{0:a,1:o}=(0,y.useState)(!1),{isLoading:l,data:d}=z(t),{aboutUserMessage:h="",aboutModelMessage:m="",disabledTools:b=[],enabled:v}=d??{},{0:x,1:j}=(0,y.useState)(W),{aboutUserMessage:_,aboutModelMessage:N,disabledTools:P,enabled:E}=x,Z=E??!!v,{0:R,1:q}=(0,y.useState)(null),B=(0,y.useCallback)(()=>{S.vm.closeModal(S.B.UserContext),j(W),q(null)},[]),{isPending:G,mutate:V}=function(e){let{onSuccess:t,onError:r}=e,n=(0,u.NL)();return(0,c.D)({mutationFn:e=>{let{userContext:t}=e;return w.Z.createOrUpdateUserSystemMessage(t)},onSettled:(e,t)=>{let r=["userContext"];null===e||t?n.invalidateQueries({queryKey:r}):n.setQueryData(r,e)},onSuccess:t,onError:r})}({onSuccess:()=>{B()},onError:e=>(e.response?.reason==="content_policy"&&e.response?.field?q(e.response?.field):H.m.danger(r.formatMessage({id:"userContextModal.saveError",defaultMessage:"Failed to update settings"})),e)}),{0:et,1:en}=(0,y.useState)(!1),ea=(0,s.t)(),es=ea?.isFree()??!0,eo=Y(_??"")||Y(N??""),ei=void 0!==N&&N!==m||void 0!==_&&_!==h||void 0!==P&&!T()(P,b)||void 0!==E&&E!==v,el=(0,y.useCallback)(()=>{ei?en(!0):B()},[B,ei]),ed=(0,y.useCallback)(async()=>{G||(q(null),V({userContext:{aboutUserMessage:_??"",aboutModelMessage:N??"",disabledTools:P??[],enabled:!!E}}))},[G,N,_,P,E,V]),eu=(0,y.useCallback)(()=>{if(eo){let e=Y(_??""),t=Y(N??"");e&&(f.m9.logEvent("chatgpt_user_context_modal__message_past_limit",void 0,{type:"about_user_message",limit:K.toString(),character_length:_?.length.toString()??""}),g.A.logEvent(p.M.userContextModelMessagePastLimit,{type:"about_user_message",limit:K.toString(),character_length:_?.length.toString()??""})),t&&(f.m9.logEvent("chatgpt_user_context_modal__message_past_limit",void 0,{type:"about_model_message",limit:K.toString(),character_length:N?.length.toString()??""}),g.A.logEvent(p.M.userContextModelMessagePastLimit,{type:"about_model_message",limit:K.toString(),character_length:N?.length.toString()??""})),H.m.danger(r.formatMessage(er.messageLimitError,{limit:K}),{duration:4,hasCloseButton:!0});return}ed()},[r,eo,N,_,ed]);if(t&&n&&!a)return(0,D.jsx)(A,{onClose:()=>{o(!0)}});if(t&&et){let e=()=>{en(!1)};return(0,D.jsx)(U.Z,{isOpen:!0,onClose:e,type:"success",title:r.formatMessage(er.confirmCloseTitle),primaryButton:(0,D.jsx)(L.Z.Button,{title:r.formatMessage(er.confirmCloseOk),color:"danger",onClick:()=>{B(),e()}}),secondaryButton:(0,D.jsx)(L.Z.Button,{title:r.formatMessage(er.confirmCloseCancel),color:"secondary",onClick:e}),children:(0,D.jsx)("div",{className:"text-sm",children:(0,D.jsx)(M.Z,$({},er.confirmCloseBody))})},"confirm-close")}return(0,D.jsxs)(U.Z,{isOpen:t,onClose:el,type:"success",size:"custom",className:"max-w-lg xl:max-w-xl",title:(0,D.jsx)(M.Z,$({},er.profileTitle)),children:[l?(0,D.jsx)("div",{className:"flex h-14 items-center justify-center",children:(0,D.jsx)(k.Z,{})}):(0,D.jsxs)("div",{className:"max-h-[60vh] overflow-y-auto md:max-h-[calc(100vh-300px)]",children:[(0,D.jsxs)("div",{className:"flex items-center gap-1",children:[(0,D.jsx)("div",{className:"text-sm font-semibold",children:(0,D.jsx)(M.Z,$({},er.customInstructionsTitle))}),(0,D.jsx)(J,{label:(0,D.jsx)(M.Z,$($({},er.customInstructionsTooltip),{},{values:{article:e=>(0,D.jsx)("a",{href:i.i,target:"_blank",className:"underline",rel:"noreferrer",children:e})}}))})]}),(0,D.jsx)("p",{className:"text-muted pb-3 pt-2 text-sm text-token-text-primary",children:(0,D.jsx)(M.Z,$({},er.aboutYouHelpText))}),(0,D.jsx)(Q,{className:"mb-3",onSubmit:eu,disabled:!Z,tip:(0,D.jsx)(X,{children:(0,D.jsxs)("ul",{className:"list-disc pl-5",children:[(0,D.jsx)("li",{children:(0,D.jsx)(M.Z,$({},er.aboutUserTip1))}),(0,D.jsx)("li",{children:(0,D.jsx)(M.Z,$({},er.aboutUserTip2))}),(0,D.jsx)("li",{children:(0,D.jsx)(M.Z,$({},er.aboutUserTip3))}),(0,D.jsx)("li",{children:(0,D.jsx)(M.Z,$({},er.aboutUserTip4))}),(0,D.jsx)("li",{children:(0,D.jsx)(M.Z,$({},er.aboutUserTip5))})]})}),hasModError:"about_user_message"===R,value:_??h,onChange:e=>j(t=>({aboutModelMessage:t.aboutModelMessage??m,aboutUserMessage:e.target.value,enabled:t.enabled??Z,disabledTools:t.disabledTools??b}))}),(0,D.jsx)("p",{className:"text-muted py-3 text-sm text-token-text-primary",children:(0,D.jsx)(M.Z,$({},er.modelHelpText))}),(0,D.jsx)(Q,{onSubmit:eu,disabled:!Z,tip:(0,D.jsx)(X,{children:(0,D.jsxs)("ul",{className:"list-disc pl-5",children:[(0,D.jsx)("li",{children:(0,D.jsx)(M.Z,$({},er.modelTip1))}),(0,D.jsx)("li",{children:(0,D.jsx)(M.Z,$({},er.modelTip2))}),(0,D.jsx)("li",{children:(0,D.jsx)(M.Z,$({},er.modelTip3))}),(0,D.jsx)("li",{children:(0,D.jsx)(M.Z,$({},er.modelTip4))})]})}),hasModError:"about_model_message"===R,value:N??m,onChange:e=>j(t=>({aboutUserMessage:t.aboutUserMessage??h,aboutModelMessage:e.target.value,enabled:t.enabled??Z,disabledTools:t.disabledTools??b}))}),!es&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("div",{className:"my-6 h-px bg-token-border-light"}),(0,D.jsx)(ee,{disabledTools:x.disabledTools??b??[],onDisabledToolsChanged:e=>j(t=>({aboutUserMessage:t.aboutUserMessage??h,aboutModelMessage:t.aboutModelMessage??m,enabled:t.enabled??Z,disabledTools:e}))})]})]}),(0,D.jsx)("div",{className:"mt-4 md:mt-5",children:(0,D.jsxs)("div",{className:"flex flex-grow flex-col items-stretch justify-between gap-0 sm:flex-row sm:items-center sm:gap-3",children:[(0,D.jsxs)("label",{className:"mt-5 flex cursor-pointer flex-row justify-between gap-2 sm:mt-4",children:[(0,D.jsx)("div",{className:"self-center text-sm text-token-text-primary",children:(0,D.jsx)(M.Z,$({},er.chatPreferencesEnable))}),(0,D.jsx)(O.Z,{enabled:Z,onChange:e=>{j(t=>({aboutUserMessage:t.aboutUserMessage??h,aboutModelMessage:t.aboutModelMessage??m,enabled:e,disabledTools:t.disabledTools??b}))},label:Z?r.formatMessage(er.disableToggleLabel):r.formatMessage(er.enableToggleLabel)})]}),(0,D.jsx)(L.Z.Actions,{secondaryButton:(0,D.jsx)(L.Z.Button,{onClick:el,children:(0,D.jsx)(M.Z,$({},er.cancel))}),primaryButton:(0,D.jsx)(L.Z.Button,{loading:G,onClick:eu,color:"primary",visuallyDisabled:eo,disabled:!ei,children:(0,D.jsx)(M.Z,$({},er.save))})})]})})]},"user-context")}let X=e=>{let{children:t}=e;return(0,D.jsx)("div",{className:"whitespace-pre-line",children:t})},K=1500,Y=e=>e.length>K,Q=e=>{let{disabled:t,onChange:r,onSubmit:n,placeholder:a,value:s,tip:o,hasModError:i,className:l}=e,u=(0,C.Z)(),c=(0,y.useRef)(null),h=(0,_.x_)(),g=(0,_.aj)(),p=!h,{0:f,1:x}=(0,y.useState)(!1),{0:T,1:j}=(0,y.useState)(p),w=!p&&f&&!T,S=p&&!T,k=Y(s);return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(U.Z,{isOpen:S,type:"success",size:"custom",className:"max-w-lg",title:u.formatMessage(er.tipsHeader),showCloseButton:!0,onClose:()=>{j(!0)},children:o}),(0,D.jsxs)(d.fC,{open:w,children:[(0,D.jsxs)("div",{className:l,children:[(0,D.jsx)(d.xz,{asChild:!0,children:(0,D.jsx)("textarea",{ref:c,className:(0,m.default)("w-full resize-none rounded bg-token-main-surface-primary p-4 placeholder:text-gray-300",{"border-orange-400 focus:border-orange-400":i,"border-red-500 focus:border-red-500":k&&!i,"focus-token-border-heavy border-token-border-light":!k&&!i,"opacity-30":t}),disabled:t,placeholder:a,onKeyDown:e=>{t||"Enter"!==e.key||!e.metaKey||e.shiftKey||e.nativeEvent.isComposing||(e.preventDefault(),n())},rows:h&&!g?6:5,value:s,onChange:r,onBlur:()=>{x(!1)},onFocus:()=>{x(!0)}})}),(0,D.jsx)("div",{className:(0,m.default)("flex items-center justify-between px-1 text-xs tabular-nums",k?"text-red-600":"text-token-text-tertiary"),children:i?(0,D.jsx)("div",{className:"visible mt-2 text-left text-xs text-orange-400",children:(0,D.jsx)(M.Z,$($({},er.modApiVoilation),{},{values:{policyLink:e=>(0,D.jsx)("a",{href:"https://platform.openai.com/docs/usage-policies/content-policy",className:"underline",target:"_blank",rel:"noreferrer",children:e}),feedbackLink:e=>(0,D.jsx)("a",{href:"https://forms.gle/3gyAMj5r5rTEcgbs5",className:"underline",target:"_blank",rel:"noreferrer",children:e})}}))}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("div",{children:`${s.length}/${K}`}),(0,D.jsx)("button",{className:"flex items-center gap-1",onClick:()=>{c.current?.focus(),j(!T)},tabIndex:-1,children:(0,D.jsx)(b.M,{initial:!1,children:f&&(0,D.jsx)(v.E.div,{className:"flex items-center gap-1",initial:{opacity:0},animate:{opacity:1,transition:{duration:.2,ease:"easeIn"}},exit:{opacity:0,transition:{duration:.2,ease:"easeIn"}},children:T?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(M.Z,$({},er.showTips)),(0,D.jsx)(B.tEF,{className:"icon-xs"})]}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(M.Z,$({},er.hideTips)),(0,D.jsx)(B.Xl7,{className:"icon-xs"})]})},"show-hide")})})]})})]}),(0,D.jsx)(d.h_,{children:(0,D.jsx)(d.VY,{side:"right",align:"start",sideOffset:12,className:"popover relative max-w-[220px] animate-slideLeftAndFade select-none rounded-xl border border-token-border-light bg-token-main-surface-primary p-4 text-sm text-token-text-primary shadow-[0px_4px_14px_rgba(0,0,0,0.06)] xl:max-w-xs",onOpenAutoFocus:e=>{e.preventDefault()},onCloseAutoFocus:e=>{e.preventDefault()},children:(0,D.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,D.jsx)("strong",{children:(0,D.jsx)(M.Z,$({},er.tipsHeader))}),o]})})})]})]})};function J(e){let{label:t,side:r="bottom"}=e;return(0,D.jsx)(q.u,{sideOffset:4,interactive:!0,label:(0,D.jsx)("div",{children:t}),side:r,children:(0,D.jsx)(B.szr,{className:"h-4 w-4 text-token-text-tertiary"})})}function ee(e){let{disabledTools:t,onDisabledToolsChanged:r}=e;(0,y.useEffect)(()=>{g.A.logEvent(p.M.userContextGpt4CapabilitiesShown)},[]);let n=(0,s.t)(),a=n?.isEnterprisey()??!1,i=!(0,s.FJ)(o.L0.BrowsingAvailable)&&a,d=e=>{r(t.includes(e)?t.filter(t=>t!==e):[...t,e])};return(0,D.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,D.jsxs)("div",{className:"flex items-center gap-1",children:[(0,D.jsx)("div",{className:"text-sm font-semibold",children:(0,D.jsx)(M.Z,{id:"userContextModal.gpt4CapabilitiesTitle",defaultMessage:"GPT-4 Capabilities"})}),(0,D.jsx)(J,{label:(0,D.jsx)(M.Z,{id:"userContextModal.tools.capabilitiesInfo.1",defaultMessage:"Choose which tools can be used with GPT-4"}),side:"top"})]}),(0,D.jsxs)("div",{className:"mt-2 flex flex-col gap-3 md:flex-row",children:[(0,D.jsx)(et,{title:(0,D.jsx)(M.Z,{id:"userContextModal.tools.browse",defaultMessage:"Browsing"}),tooltipLabel:i?(0,D.jsx)(M.Z,{id:"5SuA2c",defaultMessage:"Browsing is disabled by your organization"}):(0,D.jsx)(M.Z,{id:"userContexModal.tools.browserTooltip",defaultMessage:"Browse the internet to find answers"}),tool:l.X.BROWSER,onClick:d,Icon:B.n9J,checked:!t.includes(l.X.BROWSER)&&!i,disabled:i}),(0,D.jsx)(et,{title:(0,D.jsx)(M.Z,{id:"userContextModal.tools.dalle",defaultMessage:"DALL\xb7E"}),tooltipLabel:(0,D.jsx)(M.Z,{id:"userContextModal.tools.dalleTooltip",defaultMessage:"Generate images using DALL\xb7E"}),tool:l.X.DALLE,onClick:d,Icon:B.q$4,checked:!t.includes(l.X.DALLE)}),(0,D.jsx)(et,{title:(0,D.jsx)(M.Z,{id:"userContextModal.tools.codeInterpreter.1",defaultMessage:"Code"}),tooltipLabel:(0,D.jsx)(M.Z,{id:"userContextModal.tools.codeInterpreterTooltip",defaultMessage:"Execute code using Code Interpreter"}),tool:l.X.PYTHON,onClick:d,Icon:B.FxN,checked:!t.includes(l.X.PYTHON)})]})]})}function et(e){let{tool:t,title:r,tooltipLabel:n,Icon:s,onClick:o,checked:i,disabled:l}=e;return(0,D.jsx)(q.u,{className:"block flex-1",label:n,side:"top",sideOffset:4,children:(0,D.jsxs)("button",{className:(0,m.default)("flex w-full items-center justify-between rounded border border-token-border-medium p-2",{"cursor-not-allowed text-token-text-quaternary":l}),onClick:()=>o(t),disabled:l,children:[(0,D.jsxs)("div",{className:"flex items-center gap-2",children:[(0,D.jsx)(s,{className:"h-4 w-4 text-token-text-tertiary"}),(0,D.jsx)("div",{className:"text-sm font-semibold",children:r})]}),(0,D.jsx)(a.Z,{id:t,checked:i&&!l,disabled:l})]})})}let er=(0,j.vU)({tipsHeader:{id:"userContextModal.tipsHeader",defaultMessage:"Thought starters"},aboutUserTip1:{id:"userContextModal.aboutUserTip1",defaultMessage:"Where are you based?"},aboutUserTip2:{id:"userContextModal.aboutUserTip2",defaultMessage:"What do you do for work?"},aboutUserTip3:{id:"userContextModal.aboutUserTip3",defaultMessage:"What are your hobbies and interests?"},aboutUserTip4:{id:"userContextModal.aboutUserTip4",defaultMessage:"What subjects can you talk about for hours?"},aboutUserTip5:{id:"userContextModal.aboutUserTip5",defaultMessage:"What are some goals you have?"},modelTip1:{id:"userContextModal.modelTip1",defaultMessage:"How formal or casual should ChatGPT be?"},modelTip2:{id:"userContextModal.modelTip2",defaultMessage:"How long or short should responses generally be?"},modelTip3:{id:"userContextModal.modelTip3",defaultMessage:"How do you want to be addressed?"},modelTip4:{id:"userContextModal.modelTip4",defaultMessage:"Should ChatGPT have opinions on topics or remain neutral?"},save:{id:"userContextModal.save",defaultMessage:"Save"},chatPreferencesEnable:{id:"userContextModal.chatPreferencesEnable",defaultMessage:"Enable for new chats"},enableToggleLabel:{id:"userContextModal.enableToggleLabel",defaultMessage:"Enable chat preferences"},disableToggleLabel:{id:"userContextModal.disableToggleLabel",defaultMessage:"Disable chat preferences"},cancel:{id:"userContextModal.cancel",defaultMessage:"Cancel"},aboutYouHelpText:{id:"userContextModal.aboutYouHelpText",defaultMessage:"What would you like ChatGPT to know about you to provide better responses?"},modelHelpText:{id:"userContextModal.modelHelpText",defaultMessage:"How would you like ChatGPT to respond?"},profileTitle:{id:"userContextModal.title.1",defaultMessage:"Customize ChatGPT"},customInstructionsTitle:{id:"userContextModal.customInstructionsTitle",defaultMessage:"Custom Instructions"},customInstructionsTooltip:{id:"userContextModal.customInstructionsTooltip",defaultMessage:"<article>Learn more</article> about Custom instructions and how they’re used to help ChatGPT provide better responses."},messageLimitError:{id:"userContextModal.messageLimitError",defaultMessage:"Please limit your responses to {limit} characters or less."},showTips:{id:"userContextModal.showTips",defaultMessage:"Show tips"},hideTips:{id:"userContextModal.hideTips",defaultMessage:"Hide tips"},confirmCloseTitle:{id:"userContextModal.confirmCloseTitle",defaultMessage:"You have unsaved changes."},confirmCloseBody:{id:"userContextModal.confirmCloseBody",defaultMessage:"Are you sure you want to exit? Any changes you made will be permanently lost."},confirmCloseCancel:{id:"userContextModal.confirmCloseCancel",defaultMessage:"Back"},confirmCloseOk:{id:"userContextModal.confirmCloseOk",defaultMessage:"Exit"},modApiVoilation:{id:"userContextModal.modApiVoilation",defaultMessage:"This content may violate our <policyLink>content policy</policyLink>. If you believe this to be in error, please <feedbackLink>submit your feedback</feedbackLink> — your input will aid our research in this area."},browser:{id:"userContexModal.tools.browserTooltip",defaultMessage:"Browse the internet to find answers"},dalle:{id:"userContexModal.tools.dalleTooltip",defaultMessage:"Generate images using DALL\xb7E"},python:{id:"userContexModal.tools.codeInterpreterTooltip",defaultMessage:"Execute code using Code Interpreter"}})},55963:function(e,t,r){r.d(t,{Z:function(){return s}});var n=r(19841),a=r(651);function s(e){let{id:t,label:r,checked:s,onChange:o,disabled:i,className:l,labelClassName:d,readOnly:u,labelSide:c="right"}=e,h=r&&(0,a.jsx)("label",{className:(0,n.default)("form-check-label text-token-text-primary",d),htmlFor:t,children:r});return(0,a.jsxs)("div",{className:"form-check flex items-center gap-2",children:["left"===c&&h,(0,a.jsx)("input",{className:(0,n.default)("form-check-input float-left h-4 w-4 appearance-none rounded-sm border border-gray-300 bg-white bg-contain bg-center bg-no-repeat align-top transition duration-200 checked:border-blue-600 checked:bg-blue-600 focus:outline-none",i?"cursor-not-allowed":"cursor-pointer",l),type:"checkbox",disabled:i,onChange:o,checked:s,readOnly:u,id:t}),"right"===c&&h]})}},6530:function(e,t,r){r.d(t,{Bw:function(){return s},CR:function(){return o},rm:function(){return a}});var n=r(34977);function a(){return function(e){let t=s(e);if(t)return o(t)}((0,n.useRouter)().asPath)}function s(e){let t=new URL(`http://example.com${e}`).pathname.match(/(?:\/gizmo)?\/g\/([^/]+)/);if(t)return t[1]}function o(e){let t=e.split("-");return t.length>1&&"g"===t[0]?`g-${t[1]}`:t[0]}},3945:function(e,t,r){var n;function a(e){return{id:e.slug,maxTokens:e.max_tokens,title:e.title,description:e.description,tags:e.tags,enabledTools:e.enabled_tools,product_features:e.product_features}}r.d(t,{H6:function(){return a},ft:function(){return o},ge:function(){return s},q_:function(){return i}});let s="gpt-4o-mini",o=((n={}).GPT4o="AG8PqS2q",n.AUTO="auto",n),i=e=>{let{categoryId:t}=e;return t===o.AUTO}},94206:function(e,t,r){r.d(t,{O$:function(){return n},jF:function(){return s},v3:function(){return a}});class n extends Error{constructor(e){super(e),this.name="WebsocketConnectError"}}class a extends Error{constructor(e){super(e),this.name="TurnError"}}class s extends Error{constructor(e){super(e),this.name="TurnDeltaMessageError"}}},81014:function(e,t,r){r.d(t,{A8:function(){return h},K8:function(){return p},NK:function(){return T},Y5:function(){return y},a2:function(){return v},dN:function(){return c},k4:function(){return f},lw:function(){return g},mH:function(){return m},mO:function(){return u},pV:function(){return b},qE:function(){return C},tF:function(){return j},v5:function(){return M},zq:function(){return x}});var n=r(98601),a=r(16351),s=r(72409),o=r(82363),i=r(23047);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let u=async e=>{let{queryKey:t}=e,[r,n]=t;if(n.length<2)return[];let o=new URLSearchParams({query_fragment:n});return s.c.get(`${a.rq}/suggestions?${o.toString()}`).then(e=>e.suggestions).catch(()=>[])};async function c(e){let{threadId:t,sessionId:r,query:n,agentSettingsOverrides:i,metadata:l}=e,u=g(i),c=t?`${a.rq}/threads/${t}/turns?blocking=false`:`${a.rq}/turns?nonce=${r}`;i.emulated_location&&(l=d(d({},l),i.emulated_location));let h=new PerformanceObserver(e=>{let t=e.getEntriesByName(c,"resource");if(t.length){let e=t[0];if(e.connectEnd){let t=e.connectEnd-e.fetchStart;o.U.addAction("sonic.web.home.new_turn_connection_time",{durationMs:t})}h.disconnect()}});return h.observe({type:"resource"}),s.c.post(c,d(d({},u),{},{turn:{user_query:n},user_metadata:l}))}async function h(){return s.c.delete(`${a.rq}/threads`)}function g(e){return{settings_overrides:{search_results:{search_engines:e.use_labrador?{bing:{}}:{bing:{ranking_model:null,rrf_alpha:1,rrf_input_threshold:0},labrador:null}},model_response:{enable_multimodal:e.show_image_to_model,completion_model:e.completion_model?{model:e.completion_model,clip_model:"@mmapi",direct_connection_urls:[]}:{}}},base_config:e.base_config??i.l.SCALLION,eval_preset:e.eval_preset}}async function p(e){let{threadId:t,threadUserId:r,routePrefix:n}=e,o=a.rq;n&&(o+=n);let i=new URL(`${o}/threads/${t}/with_turns`);return r&&i.searchParams.append("thread_user_id",r),await s.c.get(i.toString())}async function f(e){let t=new FormData;return t.append("feedback",JSON.stringify({thread_id:e.threadId,turn_index:e.turnIndex,rating:e.rating,search_query:e.searchQuery,text:e.text,model_instructions:e.modelInstructions,tags:e.tags,user_email:e.userEmail})),e.screenshot&&t.append("file",new File([e.screenshot],"screenshot.jpeg",{type:"image/jpeg"})),s.c.post(`${a.rq}/feedback/turns`,t)}async function m(e,t){return s.c.post(`${a.rq}/threads/${e}/turns/${t}/images_try_hard`)}async function b(){return s.c.get(`${a.rq}/feedback/turns`)}async function v(e,t){return s.c.get(`${a.rq}/feedback/turns/${e}/${t}`)}async function x(e,t){return s.c.get(`${a.rq}/feedback/links/${e}/${t}`)}async function T(e){let t=new FormData;return e.screenshot&&t.append("file",new File([e.screenshot],"screenshot.jpeg",{type:"image/jpeg"})),t.append("feedback",JSON.stringify({thread_id:e.threadId,url:e.url,title:e.title,snippet:e.snippet,rating:e.rating,search_query:e.searchQuery,text:e.text,tags:e.tags,user_email:e.userEmail})),s.c.post(`${a.rq}/feedback/links`,t)}function y(e){let t=g(e.agentSettingsOverrides);s.c.post(`${a.rq}/prefetch`,d(d({},t),{},{turn:{user_query:e.query},user_metadata:e.metadata}))}function C(){return s.c.get(`${a.rq}/healthcheck`)}function M(){return s.c.post(`${a.rq}/waitlist`)}function j(){return s.c.delete(`${a.rq}/waitlist`)}},12381:function(e,t,r){r.d(t,{HV:function(){return b},LW:function(){return C},P3:function(){return M},m0:function(){return m},nn:function(){return x}});var n=r(98601),a=r(95267),s=r(15539),o=r(94206),i=r(82363),l=r(18939),d=r.n(l),u=r(89678),c=r.n(u),h=r(68810),g=r(69767);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function m(e){return x(t=>t.thread?.turns.map(t=>e.reduce((e,r)=>(e[r]=t[r],e),{}))??[],(e,t)=>{if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!(0,s.X)(e[r],t[r]))return!1;return!0})}function b(){return x(e=>d()(e.thread?.turns.flatMap(e=>e.model_response?.citations)),s.X)}let v={thread:null,error:void 0},x=(0,h.Ue)((0,a.n)(()=>f({},v))),T=c()(()=>{i.U.addError(new o.v3("got updateTurn with no current thread"))},1e3),y=c()(e=>{i.U.addError(new o.v3("turn not found"),{turnIndex:e})},1e3),C={threadId:e=>e.thread?.id??null,turns:e=>e.thread?.turns??[],turnCitations:e=>t=>t.thread?.turns[e].model_response?.citations??[],hasResponse:e=>(0,g.VP)(e.thread?.turns[0]),firstTurn:e=>null!=e.thread?e.thread.turns[0]:void 0,lastTurn:e=>null!=e.thread?e.thread.turns[e.thread.turns.length-1]:void 0,numTurns:e=>e.thread?.turns.length??0,isLastTurnStreaming:e=>{let t=null!=e.thread?e.thread.turns[e.thread.turns.length-1]:void 0;return null!=t&&(0,g.A7)(t)},hasModelResponseText:e=>{let t=e.thread?.turns[0];return t?.model_response?.text!=null},hasFirstTurnError:e=>{let t=e.thread?.turns[0];return!!t&&(0,g.jo)(t)},hasTurnError:e=>e.thread?.turns.some(g.jo)??!1,threadError:e=>e.error,__deprecated_sportsWidget:e=>{let t=e.thread?.turns[0];return t?.sports_widget??null}},M={appendTurn(e,t,r){x.setState(n=>{n.thread?.id!==e&&(r?.(e),n.thread={id:e,turns:[]}),n.thread.turns.push(t)})},updateTurn(e,t){x.setState(r=>{let n=r.thread;if(!n){T();return}let a=n.turns[e];if(!a){y(e);return}t(a)})},clearThread(){x.setState(()=>f({},v))},setError(e){x.setState(t=>{t.error=e})},setThread(e,t){x.setState(r=>{r.thread={id:e,turns:t}})}}},69767:function(e,t,r){function n(e){return!!e&&e.model_response?.text!=null&&e.model_response.text.length>0}function a(e){return"fatal_system_error"===e.execution_status}function s(e){return"in_progress"===e.execution_status||null===e.execution_status}r.d(t,{A7:function(){return s},VP:function(){return n},jo:function(){return a}})},23047:function(e,t,r){var n;r.d(t,{l:function(){return a}});let a=((n={}).SCALLION="scallion",n.SCALLION_RC="scallion-rc",n)},71868:function(e,t,r){r.d(t,{ub:function(){return L},_Q:function(){return S},wU:function(){return _},_F:function(){return P},Fw:function(){return k},i:function(){return j},o:function(){return C},Wz:function(){return N},HQ:function(){return w}});var n=r(98601),a=r(49166),s=r(84760),o=r(88600),i=r(18939),l=r.n(i),d=r(23763),u=r.n(d),c=r(92379),h=r(81014),g=r(12381),p=r(69767),f=r(65925),m=r.n(f);class b{constructor(){(0,n.Z)(this,"queue",[]),(0,n.Z)(this,"attempted",new Set),(0,n.Z)(this,"isProcessing",!1)}enqueue(e){this.queue.push(e),this._processQueue()}async _processQueue(){if(!this.isProcessing){for(this.isProcessing=!0;this.queue.length>0;)try{let e=this.queue.shift();if(!e)continue;await this._preload(e)}catch(e){}this.isProcessing=!1}}_preload(e){return new Promise(t=>{this.attempted.has(e)&&t();let r=new Image;r.onload=()=>{this.attempted.add(e),t()},r.onerror=()=>{this.attempted.add(e),t()},r.src=e})}}let v=new b;var x=r(651);function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function C(){let{imageResults:e}=j();!function(e){let{enabled:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=function(e){let t=(0,c.useRef)(e);return m()(t.current,e)||(t.current=e),t.current}(e);(0,c.useEffect)(()=>{if(!t||"connection"in navigator&&"cellular"===navigator.connection.type)return;let e=setTimeout(()=>{r.forEach(e=>{e&&v.enqueue(e)})},1e3);return()=>{clearTimeout(e)}},[t,r])}([...e.map(e=>I(e))])}let M=u()(function(){return(0,h.mH)(...arguments)},5e3);function j(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,g.m0)(["image_results","image_try_hard_status","execution_status"]),r=(0,g.nn)(g.LW.threadId),n=l()(t.toReversed().flatMap(e=>e.image_results?.entries)).map(e=>y(y({},e),{},{thumbnail_url:e.thumbnail_url.replace(/^http:\/\//,"https://"),content_url:e.content_url.replace(/^http:\/\//,"https://")})),a=(0,g.nn)(g.LW.hasModelResponseText),s=t.some(e=>(0,p.jo)(e)),o=0===n.length&&!a;return null!=r&&e&&!o&&0===n.length&&t[0]?.image_try_hard_status==="not_attempted"&&(M(r,0),o=!0),e&&t[0]?.image_try_hard_status==="in_progress"&&(o=!0),{imageResults:n,isLoading:o,isErrored:0===n.length&&s}}function w(){let e=(0,g.HV)(),t=(0,g.nn)(g.LW.hasTurnError),r=(0,g.nn)(g.LW.hasModelResponseText),n=S(e);return{imageResults:n,isLoading:0===n.length&&!r,isErrored:0===n.length&&t}}function S(e){return l()(e.flatMap(e=>"image_v2"===e.type?e.images:[]))}function _(e){return(0,a.C)({queryKey:["downloadImage",{imageUrl:e}],queryFn:()=>new Promise((t,r)=>{let n=new Image;n.onload=()=>{t({width:n.width,height:n.height})},n.onerror=()=>{r()},n.src=e}),enabled:null!=e})}function k(e){return(0,s.a)(_(e))}let O={width:474,square:!0};function I(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O;if(null==e)return;let r=new URL(e.thumbnail_url);if(-1===r.hostname.indexOf(".bing."))return e.thumbnail_url;let n=Math.min(t.width,e.content_size.width),a=t.height??Math.floor(n*e.content_size.height/e.content_size.width);if(r.searchParams.delete("pid"),t.square){let e=Math.min(n,a);r.searchParams.set("w",e.toString()),r.searchParams.set("h",e.toString())}else r.searchParams.set("w",n.toString()),r.searchParams.set("h",a.toString());return r.searchParams.set("c","7"),r.toString()}function N(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O;return(0,c.useMemo)(()=>I(e,t),[e,t])}let P={type:"spring",stiffness:700,damping:82};function L(e){let{children:t,className:r}=e;return(0,x.jsx)(o.E.div,{animate:{opacity:1},initial:{width:"100%",height:"100%",translateX:0,translateY:0,opacity:0},whileHover:{width:"103%",height:"103%",translateX:"-1.5%",translateY:"-1.5%"},transition:P,className:r,children:t})}},60682:function(e,t,r){r.d(t,{hO:function(){return g},pm:function(){return c},qg:function(){return h}});var n,a=r(98601),s=r(58025),o=r(2721),i=r(42420),l=r(56032);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach(function(t){(0,a.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let c=((n={}).LocaleBanner="oai/apps/hasSeenLocaleBanner",n.HasSeenPluginDisclaimer="oai/apps/hasSeenPluginsDisclaimer",n.FirstTimeUsingUserContext="oai/apps/hasUserContextFirstTime/2023-06-29",n.Onboarding="oai/apps/hasSeenOnboarding",n.TeamOwnerOnboarding="oai/apps/hasSeenTeamOwnerOnboarding",n.MemoryOnboarding="oai/apps/hasSeenMemoryOnboarding",n.TemporaryChatOnboarding="oai/apps/hasSeenTemporaryChatOnboarding",n.ArchiveConversationOnboarding="oai/apps/hasSeenArchiveConversationOnboarding",n.ExploreGPTs="oai/apps/hasSeenExploreGPTs2",n.ExploreGPTsNewNux="oai/apps/hasSeenExploreGPTsNewNux",n.MentionGPTs="oai/apps/hasSeenMentionGPTs",n.ModelTunerDisclaimer="oai/apps/hasSeenModelTunerDisclaimer",n.DalleEditingOnboarding="oai/apps/hasSeenDalleEditingOnboarding",n.ModelSwitcherAutoDowngrade="oai/apps/hasSeenModelSwitcherAutoDowngrade",n.SonicSidebar="oai/apps/hasDismissedSonicSidebar",n.ContextConnectors="oai/apps/hasSeenContextConnectorTooltip",n.AG8PqS2q="oai/apps/hasDismissedAG8PqS2q",n.SidekickLauncherOnboarding="oai/apps/hasSeenSidekickLauncherOnboarding",n.UseSidekick="oai/apps/hasDismissedUseSidekick",n.hasSeenSncUsageNux="oai/apps/hasSeenSncUsageNux",n.hasSeenSncWelcomeNux="oai/apps/hasSeenSncWelcomeNux",n.hasSeenSncSidebarTooltip="oai/apps/hasSeenSncSidebarTooltip",n.hasSeenSncSourcesTooltip="oai/apps/hasSeenSncSourcesTooltip",n);function h(e){let{data:t=[],isLoading:r}=(0,s.vl)(e=>e.eligible_announcements),n=g();return{eligible:t.includes(e),markAsViewed:()=>n.mutate({key:e}),isLoading:r}}function g(){let e=(0,i.NL)();return(0,l.D)({mutationFn:e=>{let{key:t}=e;return o.Z.announcementViewed(t)},onMutate:async t=>{let{key:r}=t;e.setQueryData(["userSettings"],e=>u(u({},e),{},{eligible_announcements:e.eligible_announcements.filter(e=>e!==r)}))},onSuccess:()=>{e.invalidateQueries({queryKey:["userSettings"]})}})}},92745:function(e,t,r){r.d(t,{Ao:function(){return ex},Fe:function(){return eu},GD:function(){return Q},GK:function(){return ej},Hk:function(){return er},JI:function(){return Y},Kt:function(){return V},Lp:function(){return N},OX:function(){return O},Rz:function(){return eh},U0:function(){return K},UL:function(){return $},Um:function(){return B},Uy:function(){return es},WA:function(){return z},Wb:function(){return eS},XK:function(){return G},XL:function(){return ea},Yk:function(){return et},Zz:function(){return P},_L:function(){return D},aS:function(){return eb},dz:function(){return ed},eV:function(){return W},eY:function(){return em},ff:function(){return eT},h9:function(){return eM},iN:function(){return R},je:function(){return eo},lA:function(){return el},lz:function(){return eC},nd:function(){return ee},nh:function(){return ei},o0:function(){return ey},oq:function(){return X},qA:function(){return en},qN:function(){return Z},r7:function(){return ev},tQ:function(){return q},u9:function(){return ec},uj:function(){return J},xC:function(){return e_},xn:function(){return ew},y8:function(){return H},yt:function(){return eg}});var n,a=r(16757);r(59578);var s=r(6530),o=r(3945),i=r(71868),l=r(2721),d=r(89153),u=r(22433);r(46900);var c=r(98541),h=r(76868),g=r(79746),p=r(82363),f=r(18939),m=r.n(f),b=r(13859),v=r.n(b),x=r(2428),T=r.n(x),y=r(65925),C=r.n(y),M=r(34977),j=r(92379),w=r(92054),S=r(68810),_=r(95267),k=r(1552);function O(){return`${a.Uo}${(0,w.Z)()}`}let I=0;function N(){return I++}function P(e){return e.startsWith(a.Uo)}let L=()=>new c.Cv,U=()=>Object.freeze({lastModelUsed:null,createTime:new Date}),D=((n={}).NewChat="NewChat",n.Server="Server",n.User="User",n.Generated="Generated",n.Unknown="Unknown",n),E={},Z=(0,S.Ue)((0,_.n)(()=>({threads:{},clientNewThreadIdToServerIdMapping:{},threadRetainCounts:{}}))),F=Z.getState,A=Z.setState,R={resolveThreadId:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F();return t.clientNewThreadIdToServerIdMapping[e]??e},getThread:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F(),r=R.resolveThreadId(e,t);return t.threads[r]??null},hasThread:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F(),r=R.resolveThreadId(e,t);return null!=t.threads[r]},isLoading:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F(),r=R.resolveThreadId(e,t);return t.threads[r]?.isLoading},getConversationMode:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F(),r=R.resolveThreadId(e,t);return t.threads[r]?.mode},getThreadModelId:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F();return R.getThread(e,t)?.modelId??null},getGizmoId(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F(),r=t.threads[R.resolveThreadId(e,t)];if(r?.mode.kind===a.OL.GizmoInteraction||r?.mode.kind===a.OL.GizmoTest)return r.mode.gizmo_id},getThreadTitleSource(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F(),r=R.resolveThreadId(e,t),n=t.threads[r];return null!=n?n.titleSource:D.Unknown},getThreadCreateTime(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F(),r=R.resolveThreadId(e,t);return t.threads[r]?.initialThreadData?.createTime},getCurrentNode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F(),r=R.resolveThreadId(e,t),n=t.threads[r]?.currentLeafId??"root";return q.getTree(e).getNodeByIdOrMessageId(n)},isThreadUrlSafe(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:F(),n=R.resolveThreadId(e,r);return r.threads[n]?.safeUrls.includes(t)??!1},getRatingPrompt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F(),r=R.resolveThreadId(e,t);return t.threads[r]?.promptGptRating},getTurnContentReferences(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F(),r=arguments.length>2?arguments[2]:void 0,n=R.getThread(e,t)?.conversationTurns[r]?.messages;return n?m()(n.flatMap(e=>e.message?.metadata?.content_references)):[]}},q={initThread:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=q.resolveThreadId(e);if(null==F().threads[n]){let e=(0,h.PH)();A(a=>{a.threads[n]={initialThreadData:e,mode:t,modelId:r,tree:new c.Cv(c.Cv.createTree()),title:null,titleSource:D.NewChat,currentLeafId:"root",conversationTurns:[],safeUrls:[],isLoading:!P(n),docsReferencedByURL:{},conversationOrigin:null}})}},setThreadModelId:(e,t)=>{let r=q.resolveThreadId(e);A(e=>{let n=e.threads[r];null!=n&&(n.modelId=t)})},updateConversationMode:(e,t)=>{let r=q.resolveThreadId(e);A(e=>{let n=e.threads[r];null!=n&&(n.mode=t)})},getServerThreadId:e=>P(e)?F().clientNewThreadIdToServerIdMapping[e]:e,setServerIdForNewThread:(e,t)=>{void 0===F().clientNewThreadIdToServerIdMapping[e]&&A(r=>{r.threads[t]=r.threads[e],delete r.threads[e],r.clientNewThreadIdToServerIdMapping[e]=t})},initThreadFromServerData:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=q.resolveThreadId(e);if(!s&&(null==F().threads[i]&&!r||F().threads[i]?.isLoading===!1))return;let l=(0,h._J)(t),d=l.mapping??c.Cv.createTree(),u={lastModelUsed:function e(t,r,n){if(n)return n;let a=t[r];return a?.message?.metadata?.model_slug?a.message.metadata.model_slug:a?.parentId?e(t,a.parentId):null}(l.mapping,l.initialCurrentLeafId,t.default_model_slug),createTime:"create_time"in t?new Date(1e3*t.create_time):void 0,isArchived:t.is_archived??!1},g=new c.Cv(d),p=l.initialCurrentLeafId??l.rootId??"root",f="has_user_editable_context"in t?{hasUserEditableContextFlag:t.has_user_editable_context,authorName:t.author_name,model:"model"in t&&null!=t.model?(0,o.H6)(t.model):void 0}:void 0;A(e=>{let r=e.threads[i];e.threads[i]={modelId:r?.modelId??null,initialThreadData:u,mode:null!=t.gizmo_id?{kind:a.OL.GizmoInteraction,gizmo_id:t.gizmo_id}:{kind:a.OL.PrimaryAssistant,plugin_ids:t.plugin_ids},sharedConversationMetadata:f,title:t.title??null,titleSource:D.Server,tree:g,currentLeafId:p,isLoading:!1,continuingFromSharedConversationId:n,safeUrls:t.safe_urls??[],conversationTurns:[],docsReferencedByURL:{},conversationOrigin:t.conversation_origin??null}}),q.recomputeConversationTurnsForCurrentLeafId(i,[])},updateInitialThreadDataForNewThread:(e,t)=>{let r=q.resolveThreadId(e);A(e=>{let n=e.threads[r];null!=n&&(n.initialThreadData.lastModelUsed=t)})},getThreadCurrentLeafId:e=>{let t=q.resolveThreadId(e);return F().threads[t]?.currentLeafId??"root"},getThreadSafeUrls:e=>{let t=q.resolveThreadId(e);return F().threads[t]?.safeUrls},addThreadSafeUrl:(e,t)=>{let r=q.resolveThreadId(e);r&&A(e=>{let n=e.threads[r];null!=n&&n.safeUrls.push(t)})},setThreadCurrentLeafId:(e,t)=>{let r=q.resolveThreadId(e);null!=F().threads[r]&&A(e=>{let n=e.threads[r];if(null==n)return;n.currentLeafId=t;let a=q.computeThreadConversationTurns(r,n.currentLeafId,n.conversationTurns);n.conversationTurns=a})},setTitle:(e,t,r)=>{let n=q.resolveThreadId(e);A(e=>{let a=e.threads[n];a&&(a.title=t,a.titleSource=r)})},getTitle:e=>{let t=R.resolveThreadId(e);return F().threads[t]?.title??void 0},getTitleAndSource:e=>({title:q.getTitle(e),titleSource:R.getThreadTitleSource(e)}),getConversationOrigin:e=>{let t=R.resolveThreadId(e);return F().threads[t]?.conversationOrigin??null},setConversationOrigin:(e,t)=>{let r=q.resolveThreadId(e);A(e=>{let n=e.threads[r];n&&(n.conversationOrigin=t)})},deleteNodesByFilter:(e,t)=>{let r=q.getThreadCurrentLeafId(e);q.updateTree(e,n=>{n.deleteNodesByFilter(t).includes(r)&&q.setThreadCurrentLeafId(e,"root")})},updateTree:(e,t)=>{let r=q.resolveThreadId(e);if(!(null!=F().threads[r])){console.warn("Thread does not exist, cannot update tree: ",r);return}t(q.getTree(e));let n=F(),a=n.threads[r]?.conversationTurns??[];q.recomputeConversationTurnsForCurrentLeafId(r,a)},getTree:e=>{let t=q.resolveThreadId(e);return F().threads[t]?.tree??L()},resolveThreadId:e=>R.resolveThreadId(e),recomputeConversationTurnsForCurrentLeafId:(e,t)=>{let r=q.resolveThreadId(e);A(e=>{let n=e.threads[r];if(null==n)return;let a=q.computeThreadConversationTurns(r,n.currentLeafId,t);n.conversationTurns=a})},computeThreadConversationTurns:(e,t,r)=>{let n=q.resolveThreadId(e);return q.getTree(n).getConversationTurns(t).map((e,t)=>{let n=r?.[t];return C()(n,e)?n:e})},getThreadConversationTurns:(e,t,r)=>{let n=q.resolveThreadId(e),a=F().threads[n];if(null==a)return[];let s=a.tree,o=s.messageIdToNodeId(a?.currentLeafId??"root"),i=null!=t?s.messageIdToNodeId(t):null;return null!=i&&i!==o?q.computeThreadConversationTurns(n,i,r??[]):F().threads[n]?.conversationTurns??[]},removeContinuingFromSharedConversationId:e=>{let t=q.resolveThreadId(e);A(e=>{let r=e.threads[t];r?.continuingFromSharedConversationId!=null&&delete r.continuingFromSharedConversationId})},updateReferencedDocState:(e,t,r)=>{let n=q.resolveThreadId(e);A(e=>{let a=e.threads[n];a&&(a.docsReferencedByURL[t]=r)})},copyLastMessageToClipboard:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mouse",r=q.getThreadCurrentLeafId(e),n=q.getThreadConversationTurns(e,r);return q.copyMessageToClipboard(e,n.length-1,t)},copyMessageToClipboard:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mouse",n=q.getThreadCurrentLeafId(e),s=q.getThreadConversationTurns(e,n)[t];if(!s)return Promise.reject();let{messages:o}=s,i=o.reduce((e,t)=>t.err||t.message.author.role!==a.uU.Assistant||"all"!==t.message.recipient?e:e+(e?"\n\n":"")+(0,u.RR)(t.message),"");return(0,g.v)(i).then(()=>{let t=q.getServerThreadId(e);t&&l.Z.submitImplicitMessageFeedback({messageId:o[0].message.id,type:"copy",serverThreadId:t,selectedText:i,source:r})})},deleteThread:e=>{A(t=>{delete t.threads[e],delete t.clientNewThreadIdToServerIdMapping[e]})},retainThread:e=>{A(t=>{t.threadRetainCounts[e]=(t.threadRetainCounts[e]??0)+1}),clearTimeout(E[e])},releaseThread:e=>{null!=F().threads[e]&&(A(t=>{t.threadRetainCounts[e]=Math.max((t.threadRetainCounts[e]??0)-1,0)}),F().threadRetainCounts[e]>0||(clearTimeout(E[e]),E[e]=setTimeout(()=>{null==F().threads[e]||F().threadRetainCounts[e]>0||q.deleteThread(e)},3e4)))},setPromptGptRating:(e,t)=>{let r=q.resolveThreadId(e);A(e=>{let n=e.threads[r];null!=n&&(null==t?n.promptGptRating=void 0:n.promptGptRating={gizmoId:t})})}};async function B(e,t){let r=await l.Z.getConversation(e);return p.U.addTiming("chatgpt.web.chatPage.loadExistingConversation"),q.initThreadFromServerData(e,r,t,void 0,t),r}let H=e=>Z(t=>R.getThreadModelId(e,t))??o.ge,G=e=>Z(t=>null==e?void 0:P(e)?t.clientNewThreadIdToServerIdMapping[e]:e),$=e=>Z(t=>{let r=q.resolveThreadId(e);return t.threads[r]?.initialThreadData??U()}),z=(e,t)=>Z(r=>{let n=R.getConversationMode(e,r);return t&&(n?.kind===a.OL.GizmoInteraction||n?.kind===a.OL.PrimaryAssistant)?{gizmo_id:t,kind:a.OL.GizmoInteraction}:n}),W=e=>{let t=(0,s.rm)();return Z(r=>null==r.threads[R.resolveThreadId(e,r)]?t:R.getGizmoId(e,r))},V=e=>Z(t=>{let r=q.resolveThreadId(e);return t.threads[r]?.isLoading??!1}),X=e=>Z(()=>q.getThreadCurrentLeafId(e)),K=(e,t)=>{let r=(0,j.useRef)([]);return Z(()=>{let n=q.getThreadConversationTurns(e,t,r.current);return r.current=n,n?.length??0})},Y=(e,t)=>{let r=(0,j.useRef)([]);return Z(()=>{let n=q.getThreadConversationTurns(e,t,r.current);return r.current=n,n})},Q=(e,t,r)=>{let n=(0,j.useRef)([]);return Z(()=>{let a=q.getThreadConversationTurns(e,r,n.current);return n.current=a,t>=0&&t<a.length?a[t]:null})},J=(e,t)=>{let r=(0,j.useRef)([]);return Z(()=>{let n=q.getThreadConversationTurns(e,t,r.current);return r.current=n,n.length>0?n[n.length-1]:null})},ee=(e,t)=>{let r=(0,j.useRef)([]);return Z(()=>{let n=q.getThreadConversationTurns(e,t,r.current);r.current=n;let s=0;for(let e=n.length-1;e>=0;e--){let t=n[e];if(t.messages.some(e=>e.message.metadata?.is_indepth_feedback))return!0;if(t.messages.some(e=>e.message.author.role===a.uU.Assistant)&&s++,s>=3)break}return!1})},et=(e,t)=>Z(()=>{let r=q.resolveThreadId(e);return q.getTree(r).getBranchFromLeaf(t).some(e=>e.message.author.role===a.uU.User)}),er=e=>{let t=X(e);return(0,j.useMemo)(()=>{let r=q.getThreadConversationTurns(e,t,[]),n=r?.length??0,a=r?.[n-1]??null;return 0===n?t:c.Cv.getRequestIdFromConversationTurn(a)},[t,e])},en=e=>Z(()=>q.getTitle(e)),ea=e=>(0,k.s)(Z,()=>q.getTitleAndSource(e),C()),es=e=>Z(()=>{let t=q.resolveThreadId(e);return F().threads[t]?.continuingFromSharedConversationId}),eo=e=>Z(()=>{let t=q.resolveThreadId(e);return F().threads[t]?.sharedConversationMetadata?.authorName}),ei=(e,t)=>Z(()=>{let r=q.getTree(e).getNodeByIdOrMessageId(t);if(null==r)throw Error(`useThreadTreeNode: cannot get tree node for ${t} in thread ${e}`);return r}),el=(e,t)=>Z(()=>q.getTree(e)?.getHasErrorFromNode(t)??!1),ed=(e,t)=>Z(()=>q.getTree(e)?.isMessageIncomplete(t)??!1),eu=(e,t)=>Z(()=>{let r=q.getTree(e);return null==r?[]:r.getBranchFromLeaf(t).filter(e=>e.message.author.role!==a.uU.Root)}),ec=(e,t)=>eu(e,t).map(e=>e.message),eh=(e,t)=>Z(()=>{let r=q.getTree(e);return null==r?null:r.getLeafFromNode(t)}),eg=(e,t)=>Z(()=>{let r=q.getTree(e);return null!=r&&t.map(e=>r.getLeafFromNode(e)).some(e=>r.getHasErrorFromNode(e.id))}),ep=e=>{let t=q.getTree(e).getUserContext();if(null==t)return null;let{message:r}=t,n=r.metadata?.shared_conversation_id??null;if(r.metadata?.user_context_message_data!=null){let{about_user_message:e,about_model_message:t}=r.metadata.user_context_message_data;return{aboutUserMessage:e?.trim()??"",aboutModelMessage:t?.trim()??"",fallback:null,shareId:n}}return{aboutUserMessage:null,aboutModelMessage:null,fallback:(0,u.RR)(r),shareId:n}},ef=e=>Z(t=>{let r=q.resolveThreadId(e);return t.threads[r]?.sharedConversationMetadata?.hasUserEditableContextFlag}),em=e=>!!q.getTree(e).findNode(e=>"model_editable_context"===e.message.content.content_type),eb=e=>{let t=ef(e);return null!=ep(e)||!!t},ev=e=>Z(()=>{let t=q.resolveThreadId(e);return F().threads[t]?.continuingFromSharedConversationId!=null}),ex=e=>Z(()=>"root"===q.getThreadCurrentLeafId(e)),eT=e=>{let t=(0,M.useRouter)(),r=G(e);return!!r&&(!!t.query.convId&&t.query.convId===r||!!T()(t.query.default)&&"c"===t.query.default[0]&&t.query.default[1]===r)},ey=e=>Z(()=>{let t=q.resolveThreadId(e);return F().threads[t]?.promptGptRating}),eC=(e,t)=>Z(()=>{let r=q.resolveThreadId(e),n=q.getTree(r).getBranchFromLeaf(t);return v()(n,e=>e.message.author.role===a.uU.System&&"system_content"===e.message.content.content_type)}),eM=()=>null!=(0,j.useContext)(d.gB);function ej(e){let t=q.getTree(e),r=q.getThreadCurrentLeafId(e),n=t.getNodeByIdOrMessageId(r);for(;n;){let e=n.message.metadata?.default_model_slug;if(e)return e;if(!n.parentId)return;n=t.getNodeByIdOrMessageId(n.parentId)}}function ew(e){let{clientThreadId:t,role:r}=e;return q.getTree(t).countMessagesByAuthor(r)}function eS(e){let{clientThreadId:t,conversationLeafId:r}=e,n=q.getTree(t);return(0,j.useMemo)(()=>n.getNodeByIdOrMessageId(r).message.end_turn,[r,n])}function e_(e,t){let r=Z(r=>R.getTurnContentReferences(e,r,t));return(0,i._Q)(r)}},31438:function(e,t,r){r.d(t,{B:function(){return c},EV:function(){return v},bM:function(){return m},ss:function(){return T},tN:function(){return f},vm:function(){return b},xH:function(){return x}});var n,a=r(98601),s=r(99976),o=r(61619),i=r(13249),l=r(92379),d=r(68810);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}let c=((n={}).DownloadMessages="download-messages",n.InviteUsersToWorkspace="invite-users-to-workspace",n.WorkspaceAppearance="workspace-appearance",n.KeyboardActions="keyboard-actions",n.UserContext="user-context",n.WorkspaceSwitcher="workspace-switcher",n.ReadOnlyConversationTemplate="read-only-conversation-template",n.CookieManagement="cookie-management",n.AgeVerificationInterstitial="age-verification-interstitial",n.GPTDetails="gpt-details",n.GPTPrivacySettings="gpt-privacy-settings",n.GPTFeedbackEmail="gpt-support-email",n.GPTReview="gpt-review",n.GPTRemoveThirdParty="gpt-remove-third-party",n.SharedConversationModeration="shared-conversation-moderation",n.ReportConversation="report-conversation",n.BlockingInitialComponent="blocking-initial-component",n.NoAuthNewChat="no-auth-new-chat",n.GlobalMemoryOnboarding="global-memory-onboarding",n.AccountPayment="account-payment",n),h=i.F.IsNavigationCollapsed,g=i.F.IsHistoryCollapsed,p={isThreadHeaderVisible:!0,isDesktopNavCollapsed:i.m.getItem(h)??!1,isVoiceActive:!1,sharingModalThreadId:void 0,feedbackModalThreadId:void 0,leaveWorkspaceData:null,activeSidebar:!1,activeStageSidebar:!1,activeModals:new Set,isLatencyDevToolsVisible:!1,purchaseWorkspaceData:null,isHistoryCollapsed:i.m.getItem(g)??!0,shouldHidePeachIndicator:!1},f=(0,d.Ue)()(()=>(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){(0,a.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e})({},p)),m={isThreadHeaderVisible:e=>e.isThreadHeaderVisible,isLatencyDevtoolsVisible:e=>e.isLatencyDevToolsVisible},b={toggleHistoryCollapsed:()=>{f.setState(e=>{let t=!e.isHistoryCollapsed;return i.m.setItem(g,t),s.A.logToggleShowRecents({isOnlyShowingRecents:t}),{isHistoryCollapsed:t}})},toggleNavSidebar:()=>{f.getState().activeStageSidebar?b.togglePopoverNavSidebar():b.toggleDesktopNavCollapsed()},togglePopoverNavSidebar:()=>{b.toggleActiveSidebar("popover-nav")},closePopoverNavSidebar:()=>{f.setState(e=>"popover-nav"===e.activeSidebar?{activeSidebar:void 0}:{})},toggleDesktopNavCollapsed:()=>{f.setState(e=>{let t=!e.isDesktopNavCollapsed;return i.m.setItem(h,t),s.A.logToggleDesktopNavCollapsed({isDesktopNavCollapsed:t}),{isDesktopNavCollapsed:t}})},closeSidebar:()=>{i.m.setItem(h,!0),s.A.logToggleDesktopNavCollapsed({isDesktopNavCollapsed:!0}),f.setState({isDesktopNavCollapsed:!0})},closeSidebarWithoutSavingPreference:()=>{f.setState({isDesktopNavCollapsed:!0})},openSidebar:()=>{i.m.setItem(h,!1),s.A.logToggleDesktopNavCollapsed({isDesktopNavCollapsed:!1}),f.setState({isDesktopNavCollapsed:!1})},hideThreadHeader:()=>{f.setState({isThreadHeaderVisible:!1})},showThreadHeader:()=>{f.setState({isThreadHeaderVisible:!0})},openSharingModal(e,t){f.setState({sharingModalThreadId:e}),s.A.logEvent(o.M.shareConversationOpenModal,{location:t})},closeSharingModal(){f.setState({sharingModalThreadId:void 0})},openFeedbackModal(e){f.setState({feedbackModalThreadId:e})},closeFeedbackModal(){f.setState({feedbackModalThreadId:void 0})},setLeaveWorkspaceData(e){f.setState({leaveWorkspaceData:e})},setPurchaseWorkspaceData(e){f.setState({purchaseWorkspaceData:e})},setActiveSidebar(e){f.setState({activeSidebar:e})},toggleActiveSidebar(e){f.setState(t=>({activeSidebar:t.activeSidebar!==e&&e}))},closeActiveSidebar(){f.setState(()=>({activeSidebar:!1}))},setActiveStageSidebar(e){f.setState({activeStageSidebar:e})},toggleModal(e){f.setState(t=>{let r=new Set(t.activeModals);return r.has(e)?r.delete(e):r.add(e),{activeModals:r}})},openModal(e){f.setState(t=>{let r=new Set(t.activeModals);return r.add(e),{activeModals:r}})},closeModal(e){f.setState(t=>{let r=new Set(t.activeModals);return r.delete(e),{activeModals:r}})},closeAllActiveModals(){f.setState({activeModals:new Set})},hideLatencyDevTools:()=>{f.setState({isLatencyDevToolsVisible:!1})},showLatencyDevTools:()=>{f.setState({isLatencyDevToolsVisible:!0})},hidePeachIndicator:()=>{f.setState({shouldHidePeachIndicator:!0})}};function v(e){return f(t=>t.activeModals.has(e))}function x(){return f(e=>e.isDesktopNavCollapsed)}function T(){let{0:e,1:t}=(0,l.useState)(!1),r=f(e=>e.activeModals);return(0,l.useEffect)(()=>{t(e=>e||r.has(c.BlockingInitialComponent))},[r]),e}},10481:function(e,t,r){r.d(t,{i:function(){return n},l:function(){return a}});let n="https://help.openai.com/en/articles/8096356-custom-instructions-for-chatgpt",a="https://help.openai.com/en/articles/7967234-enabling-multi-factor-authentication-mfa-with-openai#h_488a963a1e"},79746:function(e,t,r){r.d(t,{v:function(){return s}});var n=r(24740);function a(){n.m.danger("Failed to copy to clipboard.",{duration:4,hasCloseButton:!0})}function s(e){return new Promise((t,r)=>{if(!navigator?.clipboard){a(),r();return}try{navigator.clipboard.writeText(e).then(()=>t("success"),()=>{a(),r()})}catch(e){a(),r()}})}}}]);
//# sourceMappingURL=2745-f28a0946ef33aa68.js.map