"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3629],{4934:function(e,t,n){n.d(t,{x:function(){return C}});var r={}.hasOwnProperty;let o={}.hasOwnProperty;var i=n(94183),l=n(87346),s=n(25035);let a=[function(e,t,n,r){if("code"===t.type&&(0,l.A)(t,r)&&("list"===e.type||e.type===t.type&&(0,l.A)(e,r)))return!1;if("spread"in n&&"boolean"==typeof n.spread){if("paragraph"===e.type&&(e.type===t.type||"definition"===t.type||"heading"===t.type&&(0,s.T)(t,r)))return;return n.spread?1:0}}],c=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],p=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:"\n",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:c},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:"(?:[\r\n]|$)"},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:c},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:"(?:[ 	\r\n*])"},{character:"*",inConstruct:"phrasing",notInConstruct:c},{atBreak:!0,character:"+",after:"(?:[ 	\r\n])"},{atBreak:!0,character:"-",after:"(?:[ 	\r\n-])"},{atBreak:!0,before:"\\d+",character:".",after:"(?:[ 	\r\n]|$)"},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:c},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:c},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:c},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:c},{atBreak:!0,character:"~"}];var u=n(97997);function f(e){return e.label||!e.identifier?e.label||"":(0,u.v)(e.identifier)}function d(e){if(!e._compiled){let t=(e.atBreak?"[\\r\\n][\\t ]*":"")+(e.before?"(?:"+e.before+")":"");e._compiled=RegExp((t?"("+t+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(e.character)?"\\":"")+e.character+(e.after?"(?:"+e.after+")":""),"g")}return e._compiled}let h=/\r?\n|\r/g;function g(e,t){let n;let r=[],o=0,i=0;for(;n=h.exec(e);)l(e.slice(o,n.index)),r.push(n[0]),o=n.index+n[0].length,i++;return l(e.slice(o)),r.join("");function l(e){r.push(t(e,i,!e))}}var m=n(29125);function v(e,t){return e-t}function y(e,t){let n;let r=/\\(?=[!-/:-@[-`{-~])/g,o=[],i=[],l=e+t,s=-1,a=0;for(;n=r.exec(l);)o.push(n.index);for(;++s<o.length;)a!==o[s]&&i.push(e.slice(a,o[s])),i.push("\\"),a=o[s];return i.push(e.slice(a)),i.join("")}function w(e){let t=e||{},n=t.now||{},r=t.lineShift||0,o=n.line||1,i=n.column||1;return{move:function(e){let t=e||"",n=t.split(/\r?\n|\r/g),l=n[n.length-1];return o+=n.length-1,i=1===n.length?i+l.length:1+l.length+r,t},current:function(){return{now:{line:o,column:i},lineShift:r}},shift:function(e){r+=e}}}function C(e,t={}){let n={enter:function(e){return n.stack.push(e),function(){n.stack.pop()}},indentLines:g,associationId:f,containerPhrasing:A,containerFlow:I,createTracker:w,compilePattern:d,safe:M,stack:[],unsafe:[...p],join:[...a],handlers:{...i.p},options:{},indexStack:[],handle:void 0};!function e(t,n){var r,i,l,s;let a,c=-1;if(n.extensions)for(;++c<n.extensions.length;)e(t,n.extensions[c]);for(a in n)if(o.call(n,a))switch(a){case"extensions":break;case"unsafe":case"join":r=t[a],(i=n[a])&&r.push(...i);break;case"handlers":l=t[a],(s=n[a])&&Object.assign(l,s);break;default:t.options[a]=n[a]}return t}(n,t),n.options.tightDefinitions&&n.join.push(x),n.handle=function(e,t){var n=t||{};function o(t){var n=o.invalid,i=o.handlers;if(t&&r.call(t,e)&&(n=r.call(i,t[e])?i[t[e]]:o.unknown),n)return n.apply(this,arguments)}return o.handlers=n.handlers||{},o.invalid=n.invalid,o.unknown=n.unknown,o}("type",{invalid:b,unknown:k,handlers:n.handlers});let l=n.handle(e,void 0,n,{before:"\n",after:"\n",now:{line:1,column:1},lineShift:0});return l&&10!==l.charCodeAt(l.length-1)&&13!==l.charCodeAt(l.length-1)&&(l+="\n"),l}function b(e){throw Error("Cannot handle value `"+e+"`, expected node")}function k(e){throw Error("Cannot handle unknown node `"+e.type+"`")}function x(e,t){if("definition"===e.type&&e.type===t.type)return 0}function A(e,t){return function(e,t,n){let r=t.indexStack,o=e.children||[],i=[],l=-1,s=n.before;r.push(-1);let a=t.createTracker(n);for(;++l<o.length;){let c;let p=o[l];if(r[r.length-1]=l,l+1<o.length){let n=t.handle.handlers[o[l+1].type];n&&n.peek&&(n=n.peek),c=n?n(o[l+1],e,t,{before:"",after:"",...a.current()}).charAt(0):""}else c=n.after;i.length>0&&("\r"===s||"\n"===s)&&"html"===p.type&&(i[i.length-1]=i[i.length-1].replace(/(\r?\n|\r)$/," "),s=" ",(a=t.createTracker(n)).move(i.join(""))),i.push(a.move(t.handle(p,e,t,{...a.current(),before:s,after:c}))),s=i[i.length-1].slice(-1)}return r.pop(),i.join("")}(e,this,t)}function I(e,t){return function(e,t,n){let r=t.indexStack,o=e.children||[],i=t.createTracker(n),l=[],s=-1;for(r.push(-1);++s<o.length;){let n=o[s];r[r.length-1]=s,l.push(i.move(t.handle(n,e,t,{before:"\n",after:"\n",...i.current()}))),"list"!==n.type&&(t.bulletLastUsed=void 0),s<o.length-1&&l.push(i.move(function(e,t,n,r){let o=r.join.length;for(;o--;){let i=r.join[o](e,t,n,r);if(!0===i||1===i)break;if("number"==typeof i)return"\n".repeat(1+i);if(!1===i)return"\n\n<!---->\n\n"}return"\n\n"}(n,o[s+1],e,t)))}return r.pop(),l.join("")}(e,this,t)}function M(e,t){return function(e,t,n){let r=(n.before||"")+(t||"")+(n.after||""),o=[],i=[],l={},s=-1;for(;++s<e.unsafe.length;){let t;let n=e.unsafe[s];if(!(0,m.P)(e.stack,n))continue;let i=e.compilePattern(n);for(;t=i.exec(r);){let e="before"in n||!!n.atBreak,r="after"in n,i=t.index+(e?t[1].length:0);o.includes(i)?(l[i].before&&!e&&(l[i].before=!1),l[i].after&&!r&&(l[i].after=!1)):(o.push(i),l[i]={before:e,after:r})}}o.sort(v);let a=n.before?n.before.length:0,c=r.length-(n.after?n.after.length:0);for(s=-1;++s<o.length;){let e=o[s];!(e<a)&&!(e>=c)&&(!(e+1<c)||o[s+1]!==e+1||!l[e].after||l[e+1].before||l[e+1].after)&&(o[s-1]!==e-1||!l[e].before||l[e-1].before||l[e-1].after)&&(a!==e&&i.push(y(r.slice(a,e),"\\")),a=e,!/[!-/:-@[-`{-~]/.test(r.charAt(e))||n.encode&&n.encode.includes(r.charAt(e))?(i.push("&#x"+r.charCodeAt(e).toString(16).toUpperCase()+";"),a++):i.push("\\"))}return i.push(y(r.slice(a,c),n.after)),i.join("")}(this,e,t)}},12498:function(e,t,n){n.d(t,{QF:function(){return w},YR:function(){return A},uJ:function(){return v},uo:function(){return u},w9:function(){return y},ym:function(){return m}});var r=n(70348),o=n(81171),i=n(60314);let l=(e,t)=>!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function s(e,t,n=!1){for(let r=e;r;r="start"==t?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&1!=r.childCount)break}return!1}function a(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function c(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}function p(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}let u=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let o=n.node(-1),l=n.indexAfter(-1),s=p(o.contentMatchAt(l));if(!s||!o.canReplaceWith(l,l,s))return!1;if(t){let r=n.after(),o=e.tr.replaceWith(r,r,s.createAndFill());o.setSelection(i.Y1.near(o.doc.resolve(r),1)),t(o.scrollIntoView())}return!0};function f(e,t,n){let l,a,c,p=t.nodeBefore,u=t.nodeAfter,f,d;if(p.type.spec.isolating||u.type.spec.isolating)return!1;if(l=t.nodeBefore,a=t.nodeAfter,c=t.index(),l&&a&&l.type.compatibleContent(a.type)&&(!l.content.size&&t.parent.canReplace(c-1,c)?(n&&n(e.tr.delete(t.pos-l.nodeSize,t.pos).scrollIntoView()),!0):!!(t.parent.canReplace(c,c+1)&&(a.isTextblock||(0,r.Mn)(e.doc,t.pos)))&&(n&&n(e.tr.clearIncompatible(t.pos,l.type,l.contentMatchAt(l.childCount)).join(t.pos).scrollIntoView()),!0)))return!0;let h=t.parent.canReplace(t.index(),t.index()+1);if(h&&(f=(d=p.contentMatchAt(p.childCount)).findWrapping(u.type))&&d.matchType(f[0]||u.type).validEnd){if(n){let i=t.pos+u.nodeSize,l=o.HY.empty;for(let e=f.length-1;e>=0;e--)l=o.HY.from(f[e].create(null,l));l=o.HY.from(p.copy(l));let s=e.tr.step(new r.FC(t.pos-1,i,t.pos,i,new o.p2(l,1,0),f.length,!0)),a=i+2*f.length;(0,r.Mn)(s.doc,a)&&s.join(a),n(s.scrollIntoView())}return!0}let g=i.Y1.findFrom(t,1),m=g&&g.$from.blockRange(g.$to),v=m&&(0,r.k9)(m);if(null!=v&&v>=t.depth)return n&&n(e.tr.lift(m,v).scrollIntoView()),!0;if(h&&s(u,"start",!0)&&s(p,"end")){let i=p,l=[];for(;l.push(i),!i.isTextblock;)i=i.lastChild;let s=u,a=1;for(;!s.isTextblock;s=s.firstChild)a++;if(i.canReplace(i.childCount,i.childCount,s.content)){if(n){let i=o.HY.empty;for(let e=l.length-1;e>=0;e--)i=o.HY.from(l[e].copy(i));n(e.tr.step(new r.FC(t.pos-l.length,t.pos+u.nodeSize,t.pos+a,t.pos+u.nodeSize-a,new o.p2(i,l.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function d(e){return function(t,n){let r=t.selection,o=e<0?r.$from:r.$to,l=o.depth;for(;o.node(l).isInline;){if(!l)return!1;l--}return!!o.node(l).isTextblock&&(n&&n(t.tr.setSelection(i.Bs.create(t.doc,e<0?o.start(l):o.end(l)))),!0)}}let h=d(-1),g=d(1);function m(e,t=null){return function(n,o){let{$from:i,$to:l}=n.selection,s=i.blockRange(l),a=s&&(0,r.nd)(s,e,t);return!!a&&(o&&o(n.tr.wrap(s,a).scrollIntoView()),!0)}}function v(e,t=null){return function(n,r){let o=!1;for(let r=0;r<n.selection.ranges.length&&!o;r++){let{$from:{pos:i},$to:{pos:l}}=n.selection.ranges[r];n.doc.nodesBetween(i,l,(r,i)=>{if(o)return!1;if(!(!r.isTextblock||r.hasMarkup(e,t))){if(r.type==e)o=!0;else{let t=n.doc.resolve(i),r=t.index();o=t.parent.canReplaceWith(r,r+1,e)}}})}if(!o)return!1;if(r){let o=n.tr;for(let r=0;r<n.selection.ranges.length;r++){let{$from:{pos:i},$to:{pos:l}}=n.selection.ranges[r];o.setBlockType(i,l,e,t)}r(o.scrollIntoView())}return!0}}function y(e,t=null){return function(n,r){let{empty:o,$cursor:i,ranges:l}=n.selection;if(o&&!i||!function(e,t,n){for(let r=0;r<t.length;r++){let{$from:o,$to:i}=t[r],l=0==o.depth&&e.inlineContent&&e.type.allowsMarkType(n);if(e.nodesBetween(o.pos,i.pos,e=>{if(l)return!1;l=e.inlineContent&&e.type.allowsMarkType(n)}),l)return!0}return!1}(n.doc,l,e))return!1;if(r){if(i)r(e.isInSet(n.storedMarks||i.marks())?n.tr.removeStoredMark(e):n.tr.addStoredMark(e.create(t)));else{let o=!1,i=n.tr;for(let t=0;!o&&t<l.length;t++){let{$from:r,$to:i}=l[t];o=n.doc.rangeHasMark(r.pos,i.pos,e)}for(let n=0;n<l.length;n++){let{$from:r,$to:s}=l[n];if(o)i.removeMark(r.pos,s.pos,e);else{let n=r.pos,o=s.pos,l=r.nodeAfter,a=s.nodeBefore,c=l&&l.isText?/^\s*/.exec(l.text)[0].length:0,p=a&&a.isText?/\s*$/.exec(a.text)[0].length:0;n+c<o&&(n+=c,o-=p),i.addMark(n,o,e.create(t))}}r(i.scrollIntoView())}}return!0}}function w(...e){return function(t,n,r){for(let o=0;o<e.length;o++)if(e[o](t,n,r))return!0;return!1}}let C=w(l,(e,t,n)=>{let l=function(e,t){let{$cursor:n}=e.selection;return n&&(t?t.endOfTextblock("backward",e):!(n.parentOffset>0))?n:null}(e,n);if(!l)return!1;let c=a(l);if(!c){let n=l.blockRange(),o=n&&(0,r.k9)(n);return null!=o&&(t&&t(e.tr.lift(n,o).scrollIntoView()),!0)}let p=c.nodeBefore;if(!p.type.spec.isolating&&f(e,c,t))return!0;if(0==l.parent.content.size&&(s(p,"end")||i.qv.isSelectable(p))){let n=(0,r.dR)(e.doc,l.before(),l.after(),o.p2.empty);if(n&&n.slice.size<n.to-n.from){if(t){let r=e.tr.step(n);r.setSelection(s(p,"end")?i.Y1.findFrom(r.doc.resolve(r.mapping.map(c.pos,-1)),-1):i.qv.create(r.doc,c.pos-p.nodeSize)),t(r.scrollIntoView())}return!0}}return!!p.isAtom&&c.depth==l.depth-1&&(t&&t(e.tr.delete(c.pos-p.nodeSize,c.pos).scrollIntoView()),!0)},(e,t,n)=>{let{$head:r,empty:o}=e.selection,l=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;l=a(r)}let s=l&&l.nodeBefore;return!!(s&&i.qv.isSelectable(s))&&(t&&t(e.tr.setSelection(i.qv.create(e.doc,l.pos-s.nodeSize)).scrollIntoView()),!0)}),b=w(l,(e,t,n)=>{let l=function(e,t){let{$cursor:n}=e.selection;return n&&(t?t.endOfTextblock("forward",e):!(n.parentOffset<n.parent.content.size))?n:null}(e,n);if(!l)return!1;let a=c(l);if(!a)return!1;let p=a.nodeAfter;if(f(e,a,t))return!0;if(0==l.parent.content.size&&(s(p,"start")||i.qv.isSelectable(p))){let n=(0,r.dR)(e.doc,l.before(),l.after(),o.p2.empty);if(n&&n.slice.size<n.to-n.from){if(t){let r=e.tr.step(n);r.setSelection(s(p,"start")?i.Y1.findFrom(r.doc.resolve(r.mapping.map(a.pos)),1):i.qv.create(r.doc,r.mapping.map(a.pos))),t(r.scrollIntoView())}return!0}}return!!p.isAtom&&a.depth==l.depth-1&&(t&&t(e.tr.delete(a.pos,a.pos+p.nodeSize).scrollIntoView()),!0)},(e,t,n)=>{let{$head:r,empty:o}=e.selection,l=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;l=c(r)}let s=l&&l.nodeAfter;return!!(s&&i.qv.isSelectable(s))&&(t&&t(e.tr.setSelection(i.qv.create(e.doc,l.pos)).scrollIntoView()),!0)}),k={Enter:w((e,t)=>{let{$head:n,$anchor:r}=e.selection;return!!(n.parent.type.spec.code&&n.sameParent(r))&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)},(e,t)=>{let n=e.selection,{$from:r,$to:o}=n;if(n instanceof i.C1||r.parent.inlineContent||o.parent.inlineContent)return!1;let l=p(o.parent.contentMatchAt(o.indexAfter()));if(!l||!l.isTextblock)return!1;if(t){let n=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,s=e.tr.insert(n,l.createAndFill());s.setSelection(i.Bs.create(s.doc,n+1)),t(s.scrollIntoView())}return!0},(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if((0,r.Ax)(e.doc,o))return t&&t(e.tr.split(o).scrollIntoView()),!0}let o=n.blockRange(),i=o&&(0,r.k9)(o);return null!=i&&(t&&t(e.tr.lift(o,i).scrollIntoView()),!0)},(e,t)=>{let{$from:n,$to:o}=e.selection;if(e.selection instanceof i.qv&&e.selection.node.isBlock)return!!(n.parentOffset&&(0,r.Ax)(e.doc,n.pos))&&(t&&t(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.parent.isBlock)return!1;if(t){let l=o.parentOffset==o.parent.content.size,s=e.tr;(e.selection instanceof i.Bs||e.selection instanceof i.C1)&&s.deleteSelection();let a=0==n.depth?null:p(n.node(-1).contentMatchAt(n.indexAfter(-1))),c,u=c?[c]:l&&a?[{type:a}]:void 0,f=(0,r.Ax)(s.doc,s.mapping.map(n.pos),1,u);if(!u&&!f&&(0,r.Ax)(s.doc,s.mapping.map(n.pos),1,a?[{type:a}]:void 0)&&(a&&(u=[{type:a}]),f=!0),f&&(s.split(s.mapping.map(n.pos),1,u),!l&&!n.parentOffset&&n.parent.type!=a)){let e=s.mapping.map(n.before()),t=s.doc.resolve(e);a&&n.node(-1).canReplaceWith(t.index(),t.index()+1,a)&&s.setNodeMarkup(s.mapping.map(n.before()),a)}t(s.scrollIntoView())}return!0}),"Mod-Enter":u,Backspace:C,"Mod-Backspace":C,"Shift-Backspace":C,Delete:b,"Mod-Delete":b,"Mod-a":(e,t)=>(t&&t(e.tr.setSelection(new i.C1(e.doc))),!0)},x={"Ctrl-h":k.Backspace,"Alt-Backspace":k["Mod-Backspace"],"Ctrl-d":k.Delete,"Ctrl-Alt-Backspace":k["Mod-Delete"],"Alt-Delete":k["Mod-Delete"],"Alt-d":k["Mod-Delete"],"Ctrl-a":h,"Ctrl-e":g};for(let e in k)x[e]=k[e];let A=("undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&!!os.platform&&"darwin"==os.platform())?x:k},80136:function(e,t,n){n.d(t,{q:function(){return i}});var r=n(60314),o=n(70348);function i(e={}){return new r.Sy({view:t=>new l(t,e)})}class l{constructor(e,t){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=null!==(n=t.width)&&void 0!==n?n:1,this.color=!1===t.color?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(t=>{let n=e=>{this[t](e)};return e.dom.addEventListener(t,n),{name:t,handler:n}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){null!=this.cursorPos&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,null==e?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e,t,n=this.editorView.state.doc.resolve(this.cursorPos),r=!n.parent.inlineContent,o;if(r){let e=n.nodeBefore,t=n.nodeAfter;if(e||t){let n=this.editorView.nodeDOM(this.cursorPos-(e?e.nodeSize:0));if(n){let r=n.getBoundingClientRect(),i=e?r.bottom:r.top;e&&t&&(i=(i+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),o={left:r.left,right:r.right,top:i-this.width/2,bottom:i+this.width/2}}}}if(!o){let e=this.editorView.coordsAtPos(this.cursorPos);o={left:e.left-this.width/2,right:e.left+this.width/2,top:e.top,bottom:e.bottom}}let i=this.editorView.dom.offsetParent;if(!this.element&&(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",r),this.element.classList.toggle("prosemirror-dropcursor-inline",!r),i&&(i!=document.body||"static"!=getComputedStyle(i).position)){let n=i.getBoundingClientRect();e=n.left-i.scrollLeft,t=n.top-i.scrollTop}else e=-pageXOffset,t=-pageYOffset;this.element.style.left=o.left-e+"px",this.element.style.top=o.top-t+"px",this.element.style.width=o.right-o.left+"px",this.element.style.height=o.bottom-o.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),r=n&&n.type.spec.disableDropCursor,i="function"==typeof r?r(this.editorView,t,e):r;if(t&&!i){let e=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let t=(0,o.nj)(this.editorView.state.doc,e,this.editorView.dragging.slice);null!=t&&(e=t)}this.setCursor(e),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){e.target!=this.editorView.dom&&this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}},4684:function(e,t,n){n.d(t,{d:function(){return c}});var r=n(80326),o=n(60314),i=n(81171),l=n(59231);class s extends o.Y1{constructor(e){super(e,e)}map(e,t){let n=e.resolve(t.map(this.head));return s.valid(n)?new s(n):o.Y1.near(n)}content(){return i.p2.empty}eq(e){return e instanceof s&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if("number"!=typeof t.pos)throw RangeError("Invalid input for GapCursor.fromJSON");return new s(e.resolve(t.pos))}getBookmark(){return new a(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!function(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(0==n){if(r.type.spec.isolating)return!0;continue}for(let e=r.child(n-1);;e=e.lastChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}}return!0}(e)||!function(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let e=r.child(n);;e=e.firstChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}}return!0}(e))return!1;let n=t.type.spec.allowGapCursor;if(null!=n)return n;let r=t.contentMatchAt(e.index()).defaultType;return r&&r.isTextblock}static findGapCursorFrom(e,t,n=!1){e:for(;;){if(!n&&s.valid(e))return e;let r=e.pos,i=null;for(let n=e.depth;;n--){let o=e.node(n);if(t>0?e.indexAfter(n)<o.childCount:e.index(n)>0){i=o.child(t>0?e.indexAfter(n):e.index(n)-1);break}if(0==n)return null;r+=t;let l=e.doc.resolve(r);if(s.valid(l))return l}for(;;){let l=t>0?i.firstChild:i.lastChild;if(!l){if(i.isAtom&&!i.isText&&!o.qv.isSelectable(i)){e=e.doc.resolve(r+i.nodeSize*t),n=!1;continue e}break}i=l,r+=t;let a=e.doc.resolve(r);if(s.valid(a))return a}return null}}}s.prototype.visible=!1,s.findFrom=s.findGapCursorFrom,o.Y1.jsonID("gapcursor",s);class a{constructor(e){this.pos=e}map(e){return new a(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return s.valid(t)?new s(t):o.Y1.near(t)}}function c(){return new o.Sy({props:{decorations:h,createSelectionBetween:(e,t,n)=>t.pos==n.pos&&s.valid(n)?new s(n):null,handleClick:f,handleKeyDown:p,handleDOMEvents:{beforeinput:d}}})}let p=(0,r.$)({ArrowLeft:u("horiz",-1),ArrowRight:u("horiz",1),ArrowUp:u("vert",-1),ArrowDown:u("vert",1)});function u(e,t){let n="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,r,i){let l=e.selection,a=t>0?l.$to:l.$from,c=l.empty;if(l instanceof o.Bs){if(!i.endOfTextblock(n)||0==a.depth)return!1;c=!1,a=e.doc.resolve(t>0?a.after():a.before())}let p=s.findGapCursorFrom(a,t,c);return!!p&&(r&&r(e.tr.setSelection(new s(p))),!0)}}function f(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!s.valid(r))return!1;let i=e.posAtCoords({left:n.clientX,top:n.clientY});return!(i&&i.inside>-1&&o.qv.isSelectable(e.state.doc.nodeAt(i.inside)))&&(e.dispatch(e.state.tr.setSelection(new s(r))),!0)}function d(e,t){if("insertCompositionText"!=t.inputType||!(e.state.selection instanceof s))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let l=i.HY.empty;for(let e=r.length-1;e>=0;e--)l=i.HY.from(r[e].createAndFill(null,l));let a=e.state.tr.replace(n.pos,n.pos,new i.p2(l,0,0));return a.setSelection(o.Bs.near(a.doc.resolve(n.pos+1))),e.dispatch(a),!1}function h(e){if(!(e.selection instanceof s))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",l.EH.create(e.doc,[l.p.widget(e.selection.head,t,{key:"gapcursor"})])}},74263:function(e,t,n){n.d(t,{m8:function(){return w}});var r=function(){};r.prototype.append=function(e){return e.length?(e=r.from(e),!this.length&&e||e.length<200&&this.leafAppend(e)||this.length<200&&e.leafPrepend(this)||this.appendInner(e)):this},r.prototype.prepend=function(e){return e.length?r.from(e).append(this):this},r.prototype.appendInner=function(e){return new i(this,e)},r.prototype.slice=function(e,t){return(void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t)?r.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},r.prototype.get=function(e){if(!(e<0)&&!(e>=this.length))return this.getInner(e)},r.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},r.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var r=[];return this.forEach(function(t,n){return r.push(e(t,n))},t,n),r},r.from=function(e){return e instanceof r?e:e&&e.length?new o(e):r.empty};var o=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,r){for(var o=t;o<n;o++)if(!1===e(this.values[o],r+o))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){for(var o=t-1;o>=n;o--)if(!1===e(this.values[o],r+o))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=200)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=200)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(r);r.empty=new o([]);var i=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,r){var o=this.left.length;if(t<o&&!1===this.left.forEachInner(e,t,Math.min(n,o),r)||n>o&&!1===this.right.forEachInner(e,Math.max(t-o,0),Math.min(this.length,n)-o,r+o))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){var o=this.left.length;if(t>o&&!1===this.right.forEachInvertedInner(e,t-o,Math.max(n,o)-o,r+o)||n<o&&!1===this.left.forEachInvertedInner(e,Math.min(t,o),n,r))return!1},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(r),l=n(70348),s=n(60314);class a{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){let n,r,o,i;if(0==this.eventCount)return null;let l=this.items.length;for(;;l--)if(this.items.get(l-1).selection){--l;break}t&&(r=(n=this.remapping(l,this.items.length)).maps.length);let s=e.tr,p=[],u=[];return this.items.forEach((e,t)=>{if(!e.step){n||(r=(n=this.remapping(l,t+1)).maps.length),r--,u.push(e);return}if(n){u.push(new c(e.map));let t=e.step.map(n.slice(r)),o;t&&s.maybeStep(t).doc&&(o=s.mapping.maps[s.mapping.maps.length-1],p.push(new c(o,void 0,void 0,p.length+u.length))),r--,o&&n.appendMap(o,r)}else s.maybeStep(e.step);if(e.selection)return o=n?e.selection.map(n.slice(r)):e.selection,i=new a(this.items.slice(0,l).append(u.reverse().concat(p)),this.eventCount-1),!1},this.items.length,0),{remaining:i,transform:s,selection:o}}addTransform(e,t,n,r){var o,i;let l,s=[],p=this.eventCount,f=this.items,d=!r&&f.length?f.get(f.length-1):null;for(let n=0;n<e.steps.length;n++){let o=e.steps[n].invert(e.docs[n]),i=new c(e.mapping.maps[n],o,t),l;(l=d&&d.merge(i))&&(i=l,n?s.pop():f=f.slice(0,f.length-1)),s.push(i),t&&(p++,t=void 0),r||(d=i)}let h=p-n.depth;return h>u&&(o=f,i=h,o.forEach((e,t)=>{if(e.selection&&0==i--)return l=t,!1}),f=o.slice(l),p-=h),new a(f.append(s),p)}remapping(e,t){let n=new l.vs;return this.items.forEach((t,r)=>{let o=null!=t.mirrorOffset&&r-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:void 0;n.appendMap(t.map,o)},e,t),n}addMaps(e){return 0==this.eventCount?this:new a(this.items.append(e.map(e=>new c(e))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let n=[],r=Math.max(0,this.items.length-t),o=e.mapping,i=e.steps.length,l=this.eventCount;this.items.forEach(e=>{e.selection&&l--},r);let s=t;this.items.forEach(t=>{let r=o.getMirror(--s);if(null==r)return;i=Math.min(i,r);let a=o.maps[r];if(t.step){let i=e.steps[r].invert(e.docs[r]),p=t.selection&&t.selection.map(o.slice(s+1,r));p&&l++,n.push(new c(a,i,p))}else n.push(new c(a))},r);let p=[];for(let e=t;e<i;e++)p.push(new c(o.maps[e]));let u=new a(this.items.slice(0,r).append(p).append(n),l);return u.emptyItemCount()>500&&(u=u.compress(this.items.length-n.length)),u}emptyItemCount(){let e=0;return this.items.forEach(t=>{!t.step&&e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),n=t.maps.length,o=[],i=0;return this.items.forEach((r,l)=>{if(l>=e)o.push(r),r.selection&&i++;else if(r.step){let e=r.step.map(t.slice(n)),l=e&&e.getMap();if(n--,l&&t.appendMap(l,n),e){let s=r.selection&&r.selection.map(t.slice(n));s&&i++;let a=new c(l.invert(),e,s),p,u=o.length-1;(p=o.length&&o[u].merge(a))?o[u]=p:o.push(a)}}else r.map&&n--},this.items.length,0),new a(r.from(o.reverse()),i)}}a.empty=new a(r.empty,0);class c{constructor(e,t,n,r){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=r}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new c(t.getMap().invert(),t,this.selection)}}}class p{constructor(e,t,n,r,o){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=r,this.prevComposition=o}}let u=20;function f(e){let t=[];for(let n=e.length-1;n>=0&&0==t.length;n--)e[n].forEach((e,n,r,o)=>t.push(r,o));return t}function d(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let o=t.map(e[r],1),i=t.map(e[r+1],-1);o<=i&&n.push(o,i)}return n}let h=!1,g=null;function m(e){let t=e.plugins;if(g!=t){h=!1,g=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){h=!0;break}}return h}let v=new s.H$("history"),y=new s.H$("closeHistory");function w(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new s.Sy({key:v,state:{init:()=>new p(a.empty,a.empty,null,0,-1),apply:(t,n,r)=>(function(e,t,n,r){let o=n.getMeta(v),i;if(o)return o.historyState;n.getMeta(y)&&(e=new p(e.done,e.undone,null,0,-1));let l=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(l&&l.getMeta(v))return l.getMeta(v).redo?new p(e.done.addTransform(n,void 0,r,m(t)),e.undone,f(n.mapping.maps),e.prevTime,e.prevComposition):new p(e.done,e.undone.addTransform(n,void 0,r,m(t)),null,e.prevTime,e.prevComposition);if(!1===n.getMeta("addToHistory")||l&&!1===l.getMeta("addToHistory"))return(i=n.getMeta("rebased"))?new p(e.done.rebased(n,i),e.undone.rebased(n,i),d(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new p(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),d(e.prevRanges,n.mapping),e.prevTime,e.prevComposition);{let o=n.getMeta("composition"),i=0==e.prevTime||!l&&e.prevComposition!=o&&(e.prevTime<(n.time||0)-r.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((e,r)=>{for(let o=0;o<t.length;o+=2)e<=t[o+1]&&r>=t[o]&&(n=!0)}),n}(n,e.prevRanges)),s=l?d(e.prevRanges,n.mapping):f(n.mapping.maps);return new p(e.done.addTransform(n,i?t.selection.getBookmark():void 0,r,m(t)),a.empty,s,n.time,null==o?e.prevComposition:o)}})(n,r,t,e)},config:e,props:{handleDOMEvents:{beforeinput(e,t){let n=t.inputType,r="historyUndo"==n?b:"historyRedo"==n?k:null;return!!r&&(t.preventDefault(),r(e.state,e.dispatch))}}}})}function C(e,t){return(n,r)=>{let o=v.getState(n);if(!o||0==(e?o.undone:o.done).eventCount)return!1;if(r){let i=function(e,t,n){let r=m(t),o=v.get(t).spec.config,i=(n?e.undone:e.done).popEvent(t,r);if(!i)return null;let l=i.selection.resolve(i.transform.doc),s=(n?e.done:e.undone).addTransform(i.transform,t.selection.getBookmark(),o,r),a=new p(n?s:i.remaining,n?i.remaining:s,null,0,-1);return i.transform.setSelection(l).setMeta(v,{redo:n,historyState:a})}(o,n,e);i&&r(t?i.scrollIntoView():i)}return!0}}let b=C(!1,!0),k=C(!0,!0);C(!1,!1),C(!0,!1)},71307:function(e,t,n){n.d(t,{Hw:function(){return l},S0:function(){return a},VK:function(){return i},zK:function(){return c}});var r=n(60314),o=n(70348);class i{constructor(e,t,n={}){this.match=e,this.match=e,this.handler="string"==typeof t?function(e,n,r,o){let i=t;if(n[1]){let e=n[0].lastIndexOf(n[1]);i+=n[0].slice(e+n[1].length);let t=(r+=e)-o;t>0&&(i=n[0].slice(e-t,e)+i,r=o)}return e.tr.insertText(i,r,o)}:t,this.undoable=!1!==n.undoable,this.inCode=n.inCode||!1}}function l({rules:e}){let t=new r.Sy({state:{init:()=>null,apply(e,t){return e.getMeta(this)||(e.selectionSet||e.docChanged?null:t)}},props:{handleTextInput:(n,r,o,i)=>s(n,r,o,i,e,t),handleDOMEvents:{compositionend:n=>{setTimeout(()=>{let{$cursor:r}=n.state.selection;r&&s(n,r.pos,r.pos,"",e,t)})}}},isInputRules:!0});return t}function s(e,t,n,r,o,i){if(e.composing)return!1;let l=e.state,s=l.doc.resolve(t),a=s.parent.textBetween(Math.max(0,s.parentOffset-500),s.parentOffset,null,"￼")+r;for(let c=0;c<o.length;c++){let p=o[c];if(s.parent.type.spec.code){if(!p.inCode)continue}else if("only"===p.inCode)continue;let u=p.match.exec(a),f=u&&p.handler(l,u,t-(u[0].length-r.length),n);if(f)return p.undoable&&f.setMeta(i,{transform:f,from:t,to:n,text:r}),e.dispatch(f),!0}return!1}function a(e,t,n=null,r){return new i(e,(e,i,l,s)=>{let a=n instanceof Function?n(i):n,c=e.tr.delete(l,s),p=c.doc.resolve(l).blockRange(),u=p&&(0,o.nd)(p,t,a);if(!u)return null;c.wrap(p,u);let f=c.doc.resolve(l-1).nodeBefore;return f&&f.type==t&&(0,o.Mn)(c.doc,l-1)&&(!r||r(i,f))&&c.join(l-1),c})}function c(e,t,n=null){return new i(e,(e,r,o,i)=>{let l=e.doc.resolve(o),s=n instanceof Function?n(r):n;return l.node(-1).canReplaceWith(l.index(-1),l.indexAfter(-1),t)?e.tr.delete(o,i).setBlockType(o,o,t,s):null})}new i(/--$/,"—"),new i(/\.\.\.$/,"…"),new i(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“"),new i(/"$/,"”"),new i(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘"),new i(/'$/,"’")},80326:function(e,t,n){n.d(t,{$:function(){return a},h:function(){return s}});var r=n(21865),o=n(60314);let i="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function l(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function s(e){return new o.Sy({props:{handleKeyDown:a(e)}})}function a(e){let t=function(e){let t=Object.create(null);for(let n in e)t[function(e){let t,n,r,o,l=e.split(/-(?!$)/),s=l[l.length-1];"Space"==s&&(s=" ");for(let e=0;e<l.length-1;e++){let s=l[e];if(/^(cmd|meta|m)$/i.test(s))o=!0;else if(/^a(lt)?$/i.test(s))t=!0;else if(/^(c|ctrl|control)$/i.test(s))n=!0;else if(/^s(hift)?$/i.test(s))r=!0;else if(/^mod$/i.test(s))i?o=!0:n=!0;else throw Error("Unrecognized modifier name: "+s)}return t&&(s="Alt-"+s),n&&(s="Ctrl-"+s),o&&(s="Meta-"+s),r&&(s="Shift-"+s),s}(n)]=e[n];return t}(e);return function(e,n){let o=(0,r.YG)(n),i,s=t[l(o,n)];if(s&&s(e.state,e.dispatch,e))return!0;if(1==o.length&&" "!=o){if(n.shiftKey){let r=t[l(o,n,!1)];if(r&&r(e.state,e.dispatch,e))return!0}if((n.shiftKey||n.altKey||n.metaKey||o.charCodeAt(0)>127)&&(i=r.ue[n.keyCode])&&i!=o){let r=t[l(i,n)];if(r&&r(e.state,e.dispatch,e))return!0}}return!1}}},87292:function(e,t,n){n.d(t,{IB:function(){return a},KI:function(){return l},bw:function(){return c},s6:function(){return s}});var r=n(70348),o=n(81171),i=n(60314);function l(e,t=null){return function(n,i){let{$from:l,$to:s}=n.selection,a=l.blockRange(s),c=!1,p=a;if(!a)return!1;if(a.depth>=2&&l.node(a.depth-1).type.compatibleContent(e)&&0==a.startIndex){if(0==l.index(a.depth-1))return!1;let e=n.doc.resolve(a.start-2);p=new o.Ts(e,e,a.depth),a.endIndex<a.parent.childCount&&(a=new o.Ts(l,n.doc.resolve(s.end(a.depth)),a.depth)),c=!0}let u=(0,r.nd)(p,e,t,a);return!!u&&(i&&i((function(e,t,n,i,l){let s=o.HY.empty;for(let e=n.length-1;e>=0;e--)s=o.HY.from(n[e].type.create(n[e].attrs,s));e.step(new r.FC(t.start-(i?2:0),t.end,t.start,t.end,new o.p2(s,0,0),n.length,!0));let a=0;for(let e=0;e<n.length;e++)n[e].type==l&&(a=e+1);let c=n.length-a,p=t.start+n.length-(i?2:0),u=t.parent;for(let n=t.startIndex,o=t.endIndex,i=!0;n<o;n++,i=!1)!i&&(0,r.Ax)(e.doc,p,c)&&(e.split(p,c),p+=2*c),p+=u.child(n).nodeSize;return e})(n.tr,a,u,c,e).scrollIntoView()),!0)}}function s(e,t){return function(n,l){let{$from:s,$to:a,node:c}=n.selection;if(c&&c.isBlock||s.depth<2||!s.sameParent(a))return!1;let p=s.node(-1);if(p.type!=e)return!1;if(0==s.parent.content.size&&s.node(-1).childCount==s.indexAfter(-1)){if(3==s.depth||s.node(-3).type!=e||s.index(-2)!=s.node(-2).childCount-1)return!1;if(l){let t=o.HY.empty,r=s.index(-1)?1:s.index(-2)?2:3;for(let e=s.depth-r;e>=s.depth-3;e--)t=o.HY.from(s.node(e).copy(t));let a=s.indexAfter(-1)<s.node(-2).childCount?1:s.indexAfter(-2)<s.node(-3).childCount?2:3;t=t.append(o.HY.from(e.createAndFill()));let c=s.before(s.depth-(r-1)),p=n.tr.replace(c,s.after(-a),new o.p2(t,4-r,0)),u=-1;p.doc.nodesBetween(c,p.doc.content.size,(e,t)=>{if(u>-1)return!1;e.isTextblock&&0==e.content.size&&(u=t+1)}),u>-1&&p.setSelection(i.Y1.near(p.doc.resolve(u))),l(p.scrollIntoView())}return!0}let u=a.pos==s.end()?p.contentMatchAt(0).defaultType:null,f=n.tr.delete(s.pos,a.pos),d=u?[t?{type:e,attrs:t}:null,{type:u}]:void 0;return!!(0,r.Ax)(f.doc,s.pos,2,d)&&(l&&l(f.split(s.pos,2,d).scrollIntoView()),!0)}}function a(e){return function(t,n){let{$from:i,$to:l}=t.selection,s=i.blockRange(l,t=>t.childCount>0&&t.firstChild.type==e);return!!s&&(!n||(i.node(s.depth-1).type==e?function(e,t,n,i){let l=e.tr,s=i.end,a=i.$to.end(i.depth);s<a&&(l.step(new r.FC(s-1,a,s,a,new o.p2(o.HY.from(n.create(null,i.parent.copy())),1,0),1,!0)),i=new o.Ts(l.doc.resolve(i.$from.pos),l.doc.resolve(a),i.depth));let c=(0,r.k9)(i);if(null==c)return!1;l.lift(i,c);let p=l.mapping.map(s,-1)-1;return(0,r.Mn)(l.doc,p)&&l.join(p),t(l.scrollIntoView()),!0}(t,n,e,s):function(e,t,n){let i=e.tr,l=n.parent;for(let e=n.end,t=n.endIndex-1,r=n.startIndex;t>r;t--)e-=l.child(t).nodeSize,i.delete(e-1,e+1);let s=i.doc.resolve(n.start),a=s.nodeAfter;if(i.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let c=0==n.startIndex,p=n.endIndex==l.childCount,u=s.node(-1),f=s.index(-1);if(!u.canReplace(f+(c?0:1),f+1,a.content.append(p?o.HY.empty:o.HY.from(l))))return!1;let d=s.pos,h=d+a.nodeSize;return i.step(new r.FC(d-(c?1:0),h+(p?1:0),d+1,h-1,new o.p2((c?o.HY.empty:o.HY.from(l.copy(o.HY.empty))).append(p?o.HY.empty:o.HY.from(l.copy(o.HY.empty))),c?0:1,p?0:1),c?0:1)),t(i.scrollIntoView()),!0}(t,n,s)))}}function c(e){return function(t,n){let{$from:i,$to:l}=t.selection,s=i.blockRange(l,t=>t.childCount>0&&t.firstChild.type==e);if(!s)return!1;let a=s.startIndex;if(0==a)return!1;let c=s.parent,p=c.child(a-1);if(p.type!=e)return!1;if(n){let i=p.lastChild&&p.lastChild.type==c.type,l=o.HY.from(i?e.create():null),a=new o.p2(o.HY.from(e.create(null,o.HY.from(c.type.create(null,l)))),i?3:1,0),u=s.start,f=s.end;n(t.tr.step(new r.FC(u-(i?3:1),f,u,f,a,1,!0)).scrollIntoView())}return!0}}}}]);
//# sourceMappingURL=3629.f0c4e42bf1385a5b.js.map