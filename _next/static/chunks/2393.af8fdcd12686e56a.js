(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2393],{68039:function(e,t,n){var r=n(790),i=n(65064),s=n(43735),l=n(2428),o=n(71701),a=n(7757),u=n(92403),c=n(56868),d=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(o(e)&&(l(e)||"string"==typeof e||"function"==typeof e.splice||a(e)||c(e)||s(e)))return!e.length;var t=i(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(u(e))return!r(e).length;for(var n in e)if(d.call(e,n))return!1;return!0}},49641:function(e,t,n){"use strict";var r=n(90323),i=n.n(r);n(70079);var s=n(35250);let l=e=>{let{children:t}=e;return(0,s.jsx)(s.Fragment,{children:t})};t.Z=i()(()=>Promise.resolve(l),{ssr:!1})},83143:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r,i=n(25927),s=n(37609),l=n(83737),o=n(61888),a=n(70079),u=n(9063),c=n(84692),d=n(21389),f=n(63081),m=n(88436),v=n(3806),b=n(11397),x=n(35250);function p(e){let{tagOptions:t,onSubmit:n,onMoreClicked:r,onCancel:i,maxInlineTags:d=5,modalOnly:p=!1,modalTitle:g,multiple:y}=e,k=(0,u.Z)(),{0:j,1:w}=(0,a.useState)(p?"modal":"inline"),{0:E,1:C}=(0,a.useState)([]),{0:N,1:M}=(0,a.useState)(void 0),F=(0,a.useCallback)(e=>{n(e),w("submitted"),setTimeout(()=>{w("closed")},1500)},[n]),L=(0,a.useMemo)(()=>(0,o.debounce)(F,500),[F]),Z=e=>{let t=[];return C(t=y?E.includes(e)?E.filter(t=>t!==e):[...E,e]:[e]),t},T=()=>{F({tags:E,textFeedback:N,tagChoices:I,source:"modal"})},I=t.map(e=>e.value),H=function(e){let t={};return e.forEach(e=>{var n;let r=null!==(n=e.group)&&void 0!==n?n:"Default";t[r]||(t[r]=[]),t[r].push(e)}),t}(t),S=Object.keys(H);return(0,x.jsxs)(x.Fragment,{children:[!p&&(0,x.jsx)(s.M,{children:"closed"!==j&&(0,x.jsxs)(l.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"min-h-[96px] w-full",children:["submitted"===j&&(0,x.jsx)(l.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"text-center",children:(0,x.jsx)("div",{className:"inline-flex rounded-lg border border-token-border-light p-4",children:(0,x.jsx)("div",{className:"text-sm",children:(0,x.jsx)(c.Z,{id:"ConversationTurnInlineMessageFeedback.submitted",defaultMessage:"Thanks for your feedback!"})})})}),["inline","modal"].includes(j)&&(0,x.jsxs)("div",{className:"relative mt-2 flex w-full flex-col gap-3 rounded-lg border border-token-border-light p-4",children:[(0,x.jsx)("button",{className:"absolute right-4 top-4 text-sm font-bold",onClick:()=>{w("closed"),L.cancel(),null==i||i()},children:(0,x.jsx)(b.v7,{className:"icon-md text-token-text-secondary hover:text-token-text-primary"})}),(0,x.jsx)("div",{className:"text-sm text-token-text-secondary",children:(0,x.jsx)(c.Z,{id:"ConversationTurnInlineMessageFeedback.inlineTitle",defaultMessage:"Tell us more:"})}),(0,x.jsxs)("div",{className:"flex flex-wrap gap-3",children:[t.slice(0,d).map(e=>(0,x.jsx)(h,{$selected:E.includes(e.value),onClick:()=>{L({tags:Z(e.value),tagChoices:I,source:"inline"})},children:e.label},e.value)),(0,x.jsx)(h,{onClick:()=>{null==r||r(),L.cancel(),w("modal")},children:(0,x.jsx)(c.Z,{id:"ConversationTurnInlineMessageFeedback.moreOptions.1",defaultMessage:"More..."})})]})]})]},"main")}),"modal"===j&&(0,x.jsxs)(v.Z,{type:"success",isOpen:!0,className:"max-w-xl",size:"custom",title:null!=g?g:(0,x.jsx)(c.Z,{id:"ConversationTurnInlineMessageFeedback.modalTitle",defaultMessage:"Provide additional feedback"}),onClose:()=>{C([]),w(p?"closed":"inline"),p&&(null==i||i())},showCloseButton:!0,primaryButton:(0,x.jsx)(f.z,{color:"primary",disabled:0===E.length&&!N,onClick:T,children:(0,x.jsx)(c.Z,{id:"ConversationTurnInlineMessageFeedback.submit",defaultMessage:"Submit"})}),rootClassName:"z-50",children:[(0,x.jsx)("div",{className:"flex flex-col gap-5",children:S.map(e=>(0,x.jsxs)("div",{children:[S.length>1&&(0,x.jsx)("div",{className:"mb-1 text-sm font-medium",children:e}),(0,x.jsx)("div",{className:"flex flex-wrap gap-3",children:H[e].map(e=>(0,x.jsx)(h,{$selected:E.includes(e.value),onClick:()=>Z(e.value),children:e.label},e.value))},e)]},e))}),(0,x.jsx)(m.Z,{name:"feedback",type:"text",className:"mt-6",placeholder:k.formatMessage({id:"ConversationTurnInlineMessageFeedback.feedbackPlaceholder.1",defaultMessage:"(Optional) Feel free to add specific details"}),value:null!=N?N:"",onChange:e=>M(e.target.value),onPressEnter:T})]})]})}let h=d.Z.button(r||(r=(0,i.Z)(["\n  rounded-lg border border-token-border-light px-3 py-1 text-sm text-token-text-secondary hover:text-token-text-primary hover:bg-token-main-surface-secondary\n  ","\n"])),e=>{let{$selected:t}=e;return t&&"!bg-token-text-primary !text-token-main-surface-primary"})},42483:function(e,t,n){"use strict";n.d(t,{R:function(){return s}});let r=["moz","ms","o","webkit"];function i(e){return e?e+"Hidden":"hidden"}function s(e){let t=function(){for(let e=0;e<r.length;e++)if(i(r[e]) in document)return r[e];return null}(),n=(t||"")+"visibilitychange";function s(n){return"boolean"==typeof n?n?e.onVisible():e.onHidden():document[i(t)]?e.onHidden():e.onVisible()}return document.addEventListener(n,s,!1),document.addEventListener("focus",e.onVisible,!1),document.addEventListener("blur",e.onHidden,!1),window.addEventListener("focus",e.onVisible,!1),window.addEventListener("blur",e.onHidden,!1),()=>{document.removeEventListener(n,s,!1),document.removeEventListener("focus",e.onVisible,!1),document.removeEventListener("blur",e.onHidden,!1),window.removeEventListener("focus",e.onVisible,!1),window.removeEventListener("blur",e.onHidden,!1)}}},17165:function(e,t,n){"use strict";n.d(t,{d:function(){return f},u:function(){return m}});var r=n(15530),i=n(53050),s=n(82473),l=n(61236),o=n(98486),a=n(79208),u=n(61888),c=n(84989);let d=(0,u.memoize)(e=>a.Ue({fetcher:async t=>{let n=new Map;for await(let i of r.c.streamedJsonPost("".concat(c.B,"/attributions"),{urls:t}))i.attribution&&n.set(i.url,i.attribution),e.setQueryData(["attribution",{url:i.url}],i.attribution);return(0,u.compact)(t.map(e=>{let t=n.get(e);return t&&{url:e,attribution:t}}))},resolver:a.rp("url"),scheduler:a.ck(100)}));function f(e){let{useBaseUrl:t=!0,enabled:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t?(0,i.FH)(e):e,o=d((0,s.NL)());return(0,l.a)({queryKey:["attribution",{url:r}],queryFn:async()=>(await o.fetch(r)).attribution,enabled:n&&!!e})}function m(e){let{useBaseUrl:t=!0,enabled:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t?e.map(i.FH):e,l=d((0,s.NL)());return(0,o.h)({queries:r.map(e=>({queryKey:["attribution",{url:e}],queryFn:async()=>(await l.fetch(e)).attribution,enabled:r.length>0&&n})),combine:t=>{let n=new Map;for(let r=0;r<t.length;r++){let i=t[r].data;i&&n.set(e[r],i)}return n}})}},75208:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(70079);function i(e,t){let n=(0,r.useRef)(e);(0,r.useEffect)(()=>{n.current=e},[e]),(0,r.useEffect)(()=>{if(null!=t){let e=window.setInterval(function(){n.current()},t);return()=>clearInterval(e)}},[t])}},47573:function(e,t,n){"use strict";n.d(t,{W:function(){return i}});var r=n(70079);function i(e,t,n){(0,r.useInsertionEffect)(()=>e.on(t,n),[e,t,n])}},67482:function(e,t,n){"use strict";n.d(t,{c:function(){return o}});var r=n(70079),i=n(76930),s=n(74516),l=n(85578);function o(e){let t=(0,l.h)(()=>(0,i.BX)(e)),{isStatic:n}=(0,r.useContext)(s._);if(n){let[,n]=(0,r.useState)(e);(0,r.useEffect)(()=>t.on("change",n),[])}return t}},64411:function(e,t,n){"use strict";n.d(t,{q:function(){return c}});var r=n(70079),i=n(38874),s=n(67482),l=n(74516),o=n(5607),a=n(48697),u=n(59788);function c(e,t={}){let{isStatic:n}=(0,r.useContext)(l._),c=(0,r.useRef)(null),d=(0,s.c)((0,i.i)(e)?e.get():e),f=()=>{c.current&&c.current.stop()};return(0,r.useInsertionEffect)(()=>d.attach((e,r)=>{if(n)return r(e);let i=c.current;return i&&0===i.time&&i.sample(u.frameData.delta),f(),c.current=(0,a.y)({keyframes:[d.get(),e],velocity:d.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...t,onUpdate:r}),d.get()},f),[JSON.stringify(t)]),(0,o.L)(()=>{if((0,i.i)(e))return e.on("change",e=>d.set(parseFloat(e)))},[d]),d}}}]);
//# sourceMappingURL=2393.af8fdcd12686e56a.js.map