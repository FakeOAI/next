"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7165],{17165:function(e,t,r){r.d(t,{d:function(){return f},u:function(){return b}});var s=r(15530),i=r(53050),n=r(82473),u=r(61236),a=r(98486),l=r(79208),o=r(61888),h=r(84989);let c=(0,o.memoize)(e=>l.Ue({fetcher:async t=>{let r=new Map;for await(let i of s.c.streamedJsonPost("".concat(h.B,"/attributions"),{urls:t}))i.attribution&&r.set(i.url,i.attribution),e.setQueryData(["attribution",{url:i.url}],i.attribution);return(0,o.compact)(t.map(e=>{let t=r.get(e);return t&&{url:e,attribution:t}}))},resolver:l.rp("url"),scheduler:l.ck(100)}));function f(e){let{useBaseUrl:t=!0,enabled:r=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=t?(0,i.FH)(e):e,a=c((0,n.NL)());return(0,u.a)({queryKey:["attribution",{url:s}],queryFn:async()=>(await a.fetch(s)).attribution,enabled:r&&!!e})}function b(e){let{useBaseUrl:t=!0,enabled:r=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=t?e.map(i.FH):e,u=c((0,n.NL)());return(0,a.h)({queries:s.map(e=>({queryKey:["attribution",{url:e}],queryFn:async()=>(await u.fetch(e)).attribution,enabled:s.length>0&&r})),combine:t=>{let r=new Map;for(let s=0;s<t.length;s++){let i=t[s].data;i&&r.set(e[s],i)}return r}})}},98486:function(e,t,r){r.d(t,{h:function(){return p}});var s=r(70079),i=r(39743),n=r(60083),u=r(74349),a=r(52134);function l(e,t){return e.filter(e=>!t.includes(e))}var o=class extends u.l{#e;#t;#r;#s;#i;#n;constructor(e,t,r){super(),this.#e=e,this.#r=[],this.#s=[],this.#u([]),this.setQueries(t,r)}#u(e){this.#t=e,this.#n=this.#a(e)}onSubscribe(){1===this.listeners.size&&this.#s.forEach(e=>{e.subscribe(t=>{this.#l(e,t)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,this.#s.forEach(e=>{e.destroy()})}setQueries(e,t,r){this.#r=e,this.#i=t,i.V.batch(()=>{let e=this.#s,t=this.#o(this.#r);t.forEach(e=>e.observer.setOptions(e.defaultedQueryOptions,r));let s=t.map(e=>e.observer),i=s.map(e=>e.getCurrentResult()),n=s.some((t,r)=>t!==e[r]);(e.length!==s.length||n)&&(this.#s=s,this.#u(i),this.hasListeners()&&(l(e,s).forEach(e=>{e.destroy()}),l(s,e).forEach(e=>{e.subscribe(t=>{this.#l(e,t)})}),this.#h()))})}getCurrentResult(){return this.#n}getQueries(){return this.#s.map(e=>e.getCurrentQuery())}getObservers(){return this.#s}getOptimisticResult(e){let t=this.#o(e),r=t.map(e=>e.observer.getOptimisticResult(e.defaultedQueryOptions));return[r,e=>this.#a(e??r),()=>t.map((e,t)=>{let s=r[t];return e.defaultedQueryOptions.notifyOnChangeProps?s:e.observer.trackResult(s)})]}#a(e){let t=this.#i?.combine;return t?(0,a.Q$)(this.#n,t(e)):e}#o(e){let t=new Map(this.#s.map(e=>[e.options.queryHash,e])),r=e.map(e=>this.#e.defaultQueryOptions(e)),s=r.flatMap(e=>{let r=t.get(e.queryHash);return null!=r?[{defaultedQueryOptions:e,observer:r}]:[]}),i=new Set(s.map(e=>e.defaultedQueryOptions.queryHash)),u=r.filter(e=>!i.has(e.queryHash)),a=e=>{let t=this.#e.defaultQueryOptions(e);return this.#s.find(e=>e.options.queryHash===t.queryHash)??new n.z(this.#e,t)},l=u.map(e=>({defaultedQueryOptions:e,observer:a(e)}));return s.concat(l).sort((e,t)=>r.indexOf(e.defaultedQueryOptions)-r.indexOf(t.defaultedQueryOptions))}#l(e,t){let r=this.#s.indexOf(e);-1!==r&&(this.#u(function(e,t,r){let s=e.slice(0);return s[t]=r,s}(this.#t,r,t)),this.#h())}#h(){i.V.batch(()=>{this.listeners.forEach(e=>{e(this.#t)})})}},h=r(82473),c=r(76747),f=r(24262),b=r(23217),d=r(57248);function p({queries:e,...t},r){let n=(0,h.NL)(r),u=(0,c.S)(),a=(0,f._)(),l=s.useMemo(()=>e.map(e=>{let t=n.defaultQueryOptions(e);return t._optimisticResults=u?"isRestoring":"optimistic",t}),[e,n,u]);l.forEach(e=>{(0,d.Fb)(e),(0,b.pf)(e,a)}),(0,b.JN)(a);let[p]=s.useState(()=>new o(n,l,t)),[m,v,y]=p.getOptimisticResult(l);s.useSyncExternalStore(s.useCallback(e=>u?()=>void 0:p.subscribe(i.V.batchCalls(e)),[p,u]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),s.useEffect(()=>{p.setQueries(l,t,{listeners:!1})},[l,t,p]);let q=m.some((e,t)=>(0,d.SB)(l[t],e,u))?m.flatMap((e,t)=>{let r=l[t],s=p.getObservers()[t];if(r&&s){if((0,d.SB)(r,e,u))return(0,d.j8)(r,s,a);(0,d.Z$)(e,u)&&(0,d.j8)(r,s,a)}return[]}):[];if(q.length>0)throw Promise.all(q);let g=p.getQueries(),O=m.find((e,t)=>(0,b.KJ)({result:e,errorResetBoundary:a,throwOnError:l[t]?.throwOnError??!1,query:g[t]}));if(O?.error)throw O.error;return v(y())}},79208:function(e,t,r){r.d(t,{Ue:function(){return i},rp:function(){return n},ck:function(){return u}});let s=()=>{let e,t;let r=new Promise((r,s)=>{e=r,t=s});return{resolve:e,reject:t,value:r}},i=(e,t)=>{let r=e.name??`batcher:${Math.random().toString(16).slice(2)})`,i=e.scheduler??u(10),n=globalThis.__BATSHIT_DEVTOOLS__?.for(r),a=t??{seq:0,batch:new Set,currentRequest:s(),timer:void 0,start:null,latest:null};n?.create({seq:a.seq});let l=()=>{a.batch=new Set,a.currentRequest=s(),a.timer=void 0,a.start=null,a.latest=null};return{fetch:t=>{a.start||(a.start=Date.now()),a.latest=Date.now(),a.batch.add(t),clearTimeout(a.timer);let r=i(a.start,a.latest,a.batch.size);n?.queue({seq:a.seq,query:t,batch:[...a.batch],scheduled:r,latest:a.latest,start:a.start});let s=()=>{let t=a.seq,r=e.fetcher([...a.batch]),s=a.currentRequest;return n?.fetch({seq:t,batch:[...a.batch]}),l(),r.then(e=>{n?.data({seq:t,data:e}),s.resolve(e)}).catch(e=>{n?.error({seq:t,error:e}),s.reject(e)}),a.seq++,r};if("immediate"===r){let r=a.currentRequest;return s(),r.value.then(r=>e.resolver(r,t))}return"never"===r?a.currentRequest.value.then(r=>e.resolver(r,t)):(a.timer=setTimeout(s,r),a.currentRequest.value.then(r=>e.resolver(r,t)))}}},n=e=>(t,r)=>t.find(t=>t[e]==r),u=e=>(t,r)=>e-(r-t)}}]);
//# sourceMappingURL=7165.ee58755557ef1a4e.js.map