"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9449],{99449:function(e,t,o){o.r(t),o.d(t,{GizmoContactsMessage:function(){return m}});var n=o(98601),i=o(16757),a=o(39004),r=o(93776),c=o(92745),l=o(92379),s=o(92054),d=o(651);function u(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)}return o}function m(e){var t;let{messages:o,clientThreadId:m,isLastTurnInConversation:p,onRequestCompletion:v}=e,[f,...g]=o,_=(0,c.h9)(),y=null===(t=g.find(e=>{var t;return(null===(t=e.message.metadata)||void 0===t||null===(t=t.jit_plugin_data)||void 0===t||null===(t=t.from_server)||void 0===t?void 0:t.type)==="confirm_action"}))||void 0===t||null===(t=t.message.metadata)||void 0===t||null===(t=t.jit_plugin_data)||void 0===t?void 0:t.from_server,b=(null==y?void 0:y.body.actions[0].type)==="contact_gizmo"?null==y?void 0:y.body.actions[0].contact_gizmo.gizmo_id:void 0,{data:O}=(0,a.b9)(b),j=p&&g[g.length-1];return(0,l.useEffect)(()=>{var e,t;if(_||!j||(null===(e=j.message.metadata)||void 0===e||null===(e=e.jit_plugin_data)||void 0===e||null===(e=e.from_server)||void 0===e?void 0:e.type)!=="confirm_action")return;let a=null===(t=j.message.metadata)||void 0===t||null===(t=t.jit_plugin_data)||void 0===t?void 0:t.from_server;if((null==a?void 0:a.type)==="confirm_action"){let e=a.body.actions.find(e=>"contact_gizmo"===e.type);e&&"contact_gizmo"===e.type&&function(e){let{actionData:t,allMessages:o,assistantMessage:n,clientThreadId:a,onRequestCompletion:r}=e,l={id:(0,s.Z)(),author:{role:i.uU.Tool,name:n.message.recipient},content:{content_type:i.PX.Text,parts:[""]},recipient:"all",metadata:{jit_plugin_data:{from_client:t}}};c.tQ.updateTree(a,e=>{e.addNode(l.id,l,o[o.length-1].message.id,i.uU.Tool,{completionSampleFinishTime:Date.now()})}),c.tQ.setThreadCurrentLeafId(a,l.id),r({type:i.Os.Next,promptId:l.id,eventMetadata:{eventSource:"mouse"},cancelActiveRequests:!1,completionMetadata:{conversationMode:{kind:i.OL.PrimaryAssistant}}})}({allMessages:o,assistantMessage:f,clientThreadId:m,onRequestCompletion:v,actionData:function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?u(Object(o),!0).forEach(function(t){(0,n.Z)(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):u(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}({type:"contact_gizmo"},e.contact_gizmo)})}},[_,j,v,o,f,m]),(0,d.jsx)("div",{className:"my-2 flex flex-col",children:O&&(0,d.jsx)(r.wV,{gizmoResource:O})})}}}]);
//# sourceMappingURL=9449.d947bdbc8da0f1f8.js.map