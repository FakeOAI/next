"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9113],{38838:function(e,t,n){n.d(t,{Dz:function(){return a},Rp:function(){return u},Yf:function(){return c}});var r=n(19841),i=n(77748),o=n(651);function c(e){let{className:t}=e;return(0,o.jsx)(i.ob9,{className:(0,r.default)(t,"rtl:-scale-x-100")})}function a(e){let{className:t}=e;return(0,o.jsx)(i.Y1T,{className:(0,r.default)(t,"rtl:-scale-x-100")})}function u(e){let{className:t}=e;return(0,o.jsx)(i.Y4O,{className:(0,r.default)(t,"rtl:-scale-x-100")})}},39004:function(e,t,n){n.d(t,{AG:function(){return w},D2:function(){return D},DC:function(){return E},DS:function(){return C},Dq:function(){return B},EF:function(){return k},F0:function(){return j},Fi:function(){return U},HW:function(){return z},K7:function(){return V},K9:function(){return N},M0:function(){return M},N_:function(){return T},Sg:function(){return P},UQ:function(){return H},Vw:function(){return L},WL:function(){return x},Wd:function(){return F},Wz:function(){return G},YR:function(){return Z},Z1:function(){return J},ZJ:function(){return Q},b9:function(){return R},i6:function(){return O},kX:function(){return b},kb:function(){return W},m_:function(){return S},pJ:function(){return I},un:function(){return _},uy:function(){return h},z5:function(){return q}});var r=n(98601),i=n(16757),o=n(10080),c=n(24740),a=n(84760),u=n(19856),s=n(49166),l=n(42420),g=n(56032),f=n(85567),y=n(42906),p=n(99555),m=n(45334);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let z="GPT Builder";function h(e){if(e)return"ChatGPT - ".concat(e)}function b(e){var t,n;return null!==(t=null!==(n=e.gizmo.short_url)&&void 0!==n?n:e.gizmo.id)&&void 0!==t?t:"-"}function _(e){return"/g/".concat(e)}function w(e){return"".concat("https://chatgpt.com").concat(_(e))}function S(e){return _(b(e))}function k(e,t){let n=new URLSearchParams;return null!=t&&n.set(y.l,t),(0,f.I)(new URL("".concat(S(e),"?").concat(n),"https://chatgpt.com"))}function O(e){return"/g/".concat(b(e))}function P(e){return(0,m.S9)(e)&&0===e.gizmo.live_version||(0,m.WQ)(e)&&0===e.liveVersion}function q(e,t){return(0,a.a)({queryKey:["gizmos","discovery",{locale:e,isAnon:t}],queryFn:async()=>p.U.getGizmoDiscovery(e,t)})}function U(e){let{cutId:t,locale:n,limit:r,cursor:i,enabled:o=!0}=e;return(0,u.N)({queryKey:["gizmos","discovery",{cutId:t,locale:n,limit:r}],queryFn:async e=>{let{pageParam:i}=e;return p.U.getGizmoDiscoveryCut(t,{locale:n,cursor:i,limit:r})},initialPageParam:i,getNextPageParam:e=>{var t;return null!==(t=e.list.cursor)&&void 0!==t?t:void 0},enabled:o})}function B(){return(0,a.a)({queryKey:["gizmos","pinned"],queryFn:async()=>p.U.getGizmoPinned()})}function K(){return(0,s.C)({queryKey:["gizmos","bootstrap"],queryFn:async()=>p.U.getGizmoBootstrap().then(e=>({gizmos:e.gizmos.map(e=>({resource:e.resource,flair:e.flair}))}))})}function G(){return(0,a.a)(K())}function A(e,t){let n=e.filter(e=>e.resource.gizmo.id!==t.resource.gizmo.id),r=n.findIndex(e=>e.flair.kind===o.JK.Recent);return -1===r&&(r=n.length),n.splice(r,0,t),n}let D={handleGizmoInteracted(e,t){let n=e.getQueryData(L(e,t).queryKey);null!=n&&e.setQueryData(K().queryKey,e=>{if(null==e)return e;let r=e.gizmos.find(e=>e.resource.gizmo.id===t);return(null==r?void 0:r.flair.kind)===o.JK.FirstParty||(null==r?void 0:r.flair.kind)===o.JK.SidebarKeep?e:{gizmos:A(e.gizmos,{resource:n,flair:{kind:o.JK.Recent}})}})},handleGizmoSidebarKeep(e,t){let n=e.getQueryData(L(e,t).queryKey);null!=n&&e.setQueryData(K().queryKey,e=>null==e?e:{gizmos:A(e.gizmos,{resource:n,flair:{kind:o.JK.SidebarKeep}})})},handleGizmoSidebarHide(e,t){e.setQueryData(K().queryKey,e=>null!=e&&e.gizmos.some(e=>e.resource.gizmo.id===t)?{gizmos:e.gizmos.filter(e=>e.resource.gizmo.id!==t)}:e)}};function R(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,l.NL)();return(0,a.a)(L(n,e,t))}function E(e){let{gizmoId:t,draft:n,version:r}=e,i=(0,l.NL)(),o=r?{queryKey:["gizmo","version",{gizmoId:t,version:r}],queryFn:async()=>p.U.getVersion({gizmoId:t,version:r}),enabled:null!=t}:L(i,t,n);return(0,a.a)(o)}function F(e,t){return(0,a.a)({queryKey:["gizmo","userActionSettings",{gizmoId:e}],queryFn:async()=>p.U.getUserActionSettings(e),enabled:null!=e&&t})}function L(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,s.C)({queryKey:["gizmo",{gizmoId:t},{draft:n}],queryFn:async()=>p.U.getGizmo(t,n),enabled:null!=t,initialData:()=>{var r,i;if(!0===n)return;let o=e.getQueryData(K().queryKey);if(null!=o)return null===(r=o.gizmos.find(e=>e.resource.gizmo.id===t))||void 0===r?void 0:r.resource;let c=e.getQueryData(["gizmos","discovery"]);if(null!=c)for(let e of c.cuts){let n=null===(i=e.list.items.find(e=>e.resource.gizmo.id===t))||void 0===i?void 0:i.resource;if(null!=n)return n}}})}function j(e,t){return e.fetchQuery(L(e,t))}function N(e){return(0,a.a)({queryKey:["gizmo",{search:e}],queryFn:async()=>p.U.getGizmoSearch(e),enabled:e.length>0})}function M(e,t){return(0,a.a)({queryKey:["gizmo-search-workspace",{search:e}],queryFn:async()=>p.U.getGizmoSearchForWorkspace(e),enabled:e.length>0&&t})}function C(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return(0,u.N)({queryKey:[n?"gizmo-search-workspace":"gizmo",{query:e,cursor:r}],queryFn:async t=>{let{pageParam:i}=t;return n?p.U.getGizmoSearchForWorkspace(e,r=i):p.U.getGizmoSearch(e,r=i)},initialPageParam:r,getNextPageParam:e=>{var t;return null!==(t=e.cursor)&&void 0!==t?t:void 0},enabled:t})}function T(){let e=(0,l.NL)();return(0,g.D)({mutationFn:async e=>{let{gizmoId:t,editorData:n}=e,{instructions:r,name:i,description:c,profilePictureId:a,profilePictureUrl:u,promptStarters:s,tools:l,files:g,trainingDisabled:f}=n;return p.U.upsertDraft({instructions:r,display:{name:i,description:c,profile_pic_id:a,profile_picture_url:u,prompt_starters:s},tools:l,files:g.map(e=>v(v({},e),{},{location:o.Nh.FILE_SERVICE})),training_disabled:f},t)},onSettled:t=>{t&&(e.setQueryData(L(e,t.gizmo.id,!0).queryKey,t),e.invalidateQueries({queryKey:["gizmos","mine"],refetchType:"none"}))}})}function Q(){let e=(0,l.NL)();return(0,g.D)({mutationFn:async e=>{let{gizmoId:t,data:n}=e,{sharingRecipient:r,categories:i}=n,c=await p.U.promoteDraft({sharing:n.sharingSubjects&&n.sharingSubjects.length>0?n.sharingSubjects:{recipient:r},categories:i},t);if(c.error)throw new o.DC(c);return c.resource},onSettled:t=>{e.invalidateQueries({queryKey:["gizmos"],refetchType:"all"}),e.invalidateQueries({queryKey:["gizmos","pinned"],refetchType:"none"}),t&&e.setQueryData(L(e,t.gizmo.id,!1).queryKey,t)}})}function W(){let e=(0,l.NL)();return(0,g.D)({mutationFn:async e=>{let{gizmoId:t}=e;return p.U.deleteGizmo(t)},onSettled:()=>{e.invalidateQueries({queryKey:["gizmos"],refetchType:"all"})}})}function I(){let e=(0,l.NL)();return(0,g.D)({mutationFn:async e=>{let{name:t,hideName:n,websiteUrl:r,willReceiveSupportEmails:i}=e;return p.U.updateBuilderProfile({name:t,hide_name:n,website_url:r,will_receive_support_emails:i})},onSuccess:t=>{e.setQueryData(["builderProfile"],t)},onError:e=>{c.m.warning(e.message)}})}function x(){return(0,a.a)({queryKey:["builderProfile"],queryFn:async()=>p.U.getBuilderProfile()})}function Z(){return(0,g.D)({mutationFn:async e=>{let{gizmoId:t}=e;return p.U.copyGizmo({gizmoId:t})}})}function J(){return(0,a.a)({queryKey:["gizmoCategories"],queryFn:async()=>p.U.getCategories()})}function H(e,t){return!!(null!=t&&[i.OL.PrimaryAssistant,i.OL.GizmoInteraction].includes(t)&&(null==e?void 0:e.includes(i.S.GPT_4)))}function V(e,t){let n=(0,l.NL)();return(0,g.D)({mutationFn:async t=>{let{rating:n,message:r,includeFrom:i}=t;await p.U.upsertUserReview(e,n,r,i)},onSuccess:async()=>{null==t||t(),n.invalidateQueries({queryKey:["gizmo","review",{gizmoId:e}]})},onError:e=>{c.m.danger(e.message)}})}},99555:function(e,t,n){n.d(t,{U:function(){return s}});var r=n(98601),i=n(28438),o=n(72409),c=n(39004);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}class s{static getMyGizmos(){return o.c.get("".concat(i.B,"/gizmos?mine=true"))}static getGizmosByUser(e){return o.c.get("".concat(i.B,"/gizmos/u/").concat(e))}static getGizmo(e,t){return o.c.get("".concat(i.B,"/gizmos/").concat(e).concat(t?"?draft=true":""))}static shareGizmo(e,t){return o.c.post("".concat(i.B,"/gizmos/").concat(e,"/share"),t)}static getGizmoDiscovery(e,t){let n=new URLSearchParams;return null!=e&&n.set("locale",e),o.c.get(t?"".concat(i.k5,"/gizmos/discovery_anon?").concat(n):"".concat(i.k5,"/gizmos/discovery?").concat(n),{authOption:i.FB.SendIfAvailable})}static async getGizmoDiscoveryCut(e,t){let n=n=>{let r={};null!=n&&(r.cursor=n),(null==t?void 0:t.limit)!=null&&(r.limit="".concat(t.limit)),(null==t?void 0:t.locale)!=null&&(r.locale=t.locale);let c="".concat(i.k5,"/gizmos/discovery/").concat(e);return o.c.get(c,{params:r,authOption:i.FB.SendIfAvailable})},r=await n(null==t?void 0:t.cursor);return 0===r.list.items.length&&null!=r.list.cursor?(await new Promise(e=>setTimeout(e,30*Math.random())),n(r.list.cursor)):r}static getGizmoBootstrap(){return o.c.get("".concat(i.B,"/gizmos/bootstrap?limit=2"))}static getGizmoPinned(){return o.c.get("".concat(i.B,"/gizmos/pinned"))}static getGizmoSearch(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?o.c.get("".concat(i.B,"/gizmos/search?q=").concat(e,"&cursor=").concat(t," ")):o.c.get("".concat(i.B,"/gizmos/search?q=").concat(e))}static getGizmoSearchForWorkspace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?o.c.get("".concat(i.B,"/gizmos/search?q=").concat(e,"&workspace_only=",!0,"&cursor=").concat(t)):o.c.get("".concat(i.B,"/gizmos/search?q=").concat(e,"&workspace_only=",!0))}static async postGizmoAppeal(e,t,n,r,c){await o.c.post("".concat(i.B,"/gizmos/").concat(t,"/appeal"),{reason:n,share_recipient:r,categories:c}),await e.invalidateQueries({queryKey:["gizmo",{gizmoId:t}]})}static async postGizmoCancelAppeal(e,t){await o.c.post("".concat(i.B,"/gizmos/").concat(t,"/cancel_appeal"),{}),await e.invalidateQueries({queryKey:["gizmo",{gizmoId:t}]})}static upsertDraft(e,t){return void 0!==t?o.c.post("".concat(i.B,"/gizmos?gizmo_id=").concat(t),e):o.c.post("".concat(i.B,"/gizmos"),e)}static promoteDraft(e,t){return o.c.post("".concat(i.B,"/gizmos/").concat(t,"/promote"),e)}static deleteGizmo(e){return o.c.delete("".concat(i.B,"/gizmos/").concat(e))}static getBuilderProfile(){return o.c.get("".concat(i.B,"/gizmo_creator_profile"))}static updateBuilderProfile(e){return o.c.post("".concat(i.B,"/gizmo_creator_profile"),e)}static unverifySocialAuth(e){return o.c.delete("".concat(i.B,"/gizmo_creator_profile/socials/").concat(e))}static async updateGizmoSidebar(e,t,n){let r=await o.c.post("".concat(i.B,"/gizmos/").concat(t,"/sidebar"),{action:n});switch(n){case"keep":c.D2.handleGizmoSidebarKeep(e,t);break;case"hide":c.D2.handleGizmoSidebarHide(e,t)}return r}static async removeFromRecent(e,t){let n=await o.c.post("".concat(i.B,"/gizmos/").concat(t,"/remove_recent"),{});return e.invalidateQueries({queryKey:["gizmos","bootstrap"]}),e.invalidateQueries({queryKey:["gizmos","discovery"]}),n}static fetchOpenAPISpec(e){return o.c.post("".concat(i.B,"/gizmos/fetch_openapi"),{url:e})}static validateOpenAPISpec(e){return o.c.post("".concat(i.B,"/gizmos/validate_openapi"),{raw_spec:e})}static transformToOpenAPISpec(e,t){return o.c.post("".concat(i.B,"/gizmos/transform_openapi"),u(u({},e),{},{auth:t}))}static async doOAuthRedirect(e,t,n,r,c){let a=await o.c.post("".concat(i.B,"/gizmos/oauth_redirect"),{gizmo_id:e,gizmo_action_id:t,domain:n,redirect_to:r,draft:c});window.location.href=a.redirect_uri}static async upsertUserActionSettings(e,t,n){return o.c.post("".concat(i.B,"/gizmos/action_settings"),{gizmo_action_id:e,domain:t,action_settings:n})}static async getUserActionSettings(e){return o.c.get("".concat(i.B,"/gizmos/user_action_settings?gizmo_id=").concat(e))}static async generateCategory(e,t){return o.c.post("".concat(i.B,"/gizmos/gen_category"),{name:e,instructions:t})}static async getCategories(){return o.c.get("".concat(i.B,"/gizmos/categories"))}static async getUserReview(e){return o.c.get("".concat(i.B,"/gizmo_reviews/").concat(e))}static async upsertUserReview(e,t,n,r){return o.c.post("".concat(i.B,"/gizmo_reviews/").concat(e),{rating:t,message:n,include_from:r})}static async sendFeedbackEmail(e,t,n){return o.c.post("".concat(i.B,"/gizmos/").concat(e,"/feedback"),{message:t,include_from:n})}static async getAbout(e){return o.c.get("".concat(i.B,"/gizmos/").concat(e,"/about"))}static async getCreatorSlice(e){let{creatorId:t}=e;return o.c.get("".concat(i.B,"/gizmo_creators/").concat(t,"/gizmos"))}static async getVersion(e){let{gizmoId:t,version:n}=e;return null==n?o.c.get("".concat(i.B,"/gizmos/").concat(t,"/version/latest")):o.c.get("".concat(i.B,"/gizmos/").concat(t,"/version/").concat(n))}static async listVersions(e){let{gizmoId:t,limit:n,cursor:r}=e,c={};return n&&(c.limit=n),r&&(c.cursor=r),o.c.get("".concat(i.B,"/gizmos/").concat(t,"/versions"),{params:c})}static async getRolodex(){return o.c.get("".concat(i.B,"/rolodex"))}static async upsertToRolodex(e,t){let{gizmoId:n,usageDescription:r,remove:c}=t,a=await o.c.post("".concat(i.B,"/rolodex"),{gizmo_id:n,usage_description:r,remove:c});return e.invalidateQueries({queryKey:["gizmoRolodex"],refetchType:"all"}),a}static async copyGizmo(e){let{gizmoId:t}=e;return await o.c.post("".concat(i.B,"/gizmos/").concat(t,"/copy"))}}},10080:function(e,t,n){var r,i,o,c,a;n.d(t,{AR:function(){return S},CS:function(){return u},DC:function(){return w},EL:function(){return g},H$:function(){return b},JK:function(){return k},LA:function(){return l},Mj:function(){return _},Nh:function(){return v},U9:function(){return p},Zz:function(){return y},fV:function(){return f},h:function(){return z},q0:function(){return d},qL:function(){return s},yS:function(){return m}});let u="g-YyyyMT9XH",s="g-2fkFE8rbu",l=((r={})[r.USER=1]="USER",r[r.GROUP=2]="GROUP",r[r.WORKSPACE=3]="WORKSPACE",r[r.ALL=4]="ALL",r[r.PROJECT=5]="PROJECT",r[r.ORGANIZATION=6]="ORGANIZATION",r[r.SYSTEM=7]="SYSTEM",r[r.AGENT=8]="AGENT",r),g={can_read:!0,can_view_config:!1,can_write:!1,can_delete:!1,can_export:!1,can_share:!1},f={can_read:!0,can_view_config:!0,can_write:!1,can_delete:!1,can_export:!1,can_share:!1},y={Private:"private",User:"user",Group:"group",WorkspaceLink:"workspace_link",Workspace:"workspace",Link:"link",Marketplace:"marketplace"},p=((i={}).FirstParty="first_party",i.UsesFunctionCalls="uses_function_calls",i.Reportable="reportable",i.Private="private",i.Workspace="workspace",i.Public="public",i.Beta="beta",i.Pinned="pinned",i.WorkspaceDisabled="workspace_disabled",i.Unreviewable="unreviewable",i),m=e=>{var t;return null===(t=e.gizmo.tags)||void 0===t?void 0:t.includes(p.FirstParty)},d=e=>{var t;return!(null!==(t=e.gizmo.tags)&&void 0!==t&&t.includes(p.Unreviewable))},v=((o={}).FILE_SERVICE="fs",o);function z(e){return e.type===l.USER||e.type===l.GROUP}let h=[l.USER,l.GROUP,l.WORKSPACE,l.ALL];function b(e){return 0===e.length?null:e.reduce((e,t)=>h.indexOf(t.type)<h.indexOf(e.type)?e:t,e[0])}function _(e,t,n){return(t=t.filter(e=>e.type===y.User||e.type===y.Group),e===y.Private||e===y.User||e===y.Group)?[{type:y.Private,capabilities:g},...t]:[...t,{type:e,capabilities:n}]}class w{constructor(e){this.response=e}}let S=((c={}).ENGLISH="en",c.GLOBAL="global",c),k=((a={}).FirstParty="first_party",a.SidebarKeep="sidebar_keep",a.Mine="mine",a.Recent="recent",a.Workspace="workspace",a)},45334:function(e,t,n){n.d(t,{R2:function(){return a},S9:function(){return s},VN:function(){return g},WQ:function(){return l},XA:function(){return u},k1:function(){return c}});var r=n(10080),i=n(31498),o=n(75172);function c(e){var t,n;return null!==(t=null===(n=e.gizmo.current_user_permission)||void 0===n?void 0:n.can_write)&&void 0!==t&&t}function a(e){var t,n;return null!==(t=null===(n=e.gizmo.current_user_permission)||void 0===n?void 0:n.can_view_config)&&void 0!==t&&t}function u(e){let t=(0,o.Z)();return function(e,t,n){let i=null==t?void 0:t.name;switch(e){case r.Zz.Link:return n.formatMessage(f.privacyAnyoneWithLink);case r.Zz.Private:return n.formatMessage(f.privacyOnlyMe);case r.Zz.Group:case r.Zz.User:return n.formatMessage({id:"B9pJ5o",defaultMessage:"Invite only"});case r.Zz.Marketplace:return n.formatMessage(f.privacyMarketplace);case r.Zz.Workspace:return n.formatMessage(f.privacyWorkspace,{workspaceName:i});case r.Zz.WorkspaceLink:return n.formatMessage({id:"T5Eek0",defaultMessage:"Anyone at {workspaceName} with the link"},{workspaceName:i})}}(e,(0,i.ec)(e=>e.currentWorkspace),t)}function s(e){return"gizmo"in e}function l(e){return"id"in e}function g(e){return"".concat(e.replaceAll(".","_").replaceAll("-","_"),"__jit_plugin")}let f=(0,n(68306).vU)({privacyOnlyMe:{id:"gizmo.privacyOnlyMe",defaultMessage:"Only me"},privacyAnyoneWithLink:{id:"gizmo.privacyAnyoneWithLink",defaultMessage:"Anyone with a link"},privacyWorkspace:{id:"gizmo.privacyWorkspace",defaultMessage:"Anyone at {workspaceName}"},privacyMarketplace:{id:"gizmo.privacyMarketplace",defaultMessage:"Everyone"}})},42906:function(e,t,n){n.d(t,{M:function(){return p},l:function(){return y}});var r=n(52088),i=n(16757),o=n(67437),c=n(92745),a=n(30474),u=n(85567),s=n(34977),l=n(92379),g=n(92054);function f(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let y="q";function p(e){var t,n;let{clientThreadId:p,currentLeafId:d,handleRequestCompletion:v}=e,z=(0,l.useRef)(!1),{isLoading:h}=(0,o.Y7)(),b=(0,s.useRouter)(),_=(0,l.useCallback)((e,t,n,r)=>{c.tQ.updateTree(p,o=>{o.addNode(e,n,t,i.uU.User,void 0,r)})},[p]),w=(0,l.useCallback)(async(e,t,n,r)=>{let{content:o,attachments:c}=t;_(e,d,o,c.length>0?{attachments:c}:{}),v({type:i.Os.Next,promptId:e,eventMetadata:n,cancelActiveRequests:!0,completionMetadata:r})},[_,v,d]),S=null!==(t=(0,a.L)(()=>window.location.pathname))&&void 0!==t?t:null,k=!h&&null!=(n=S)&&("/"===n||m(n)),O=c.iN.getConversationMode(p),P=(0,u.f)();m(S)&&void 0===P&&(k=!1),(0,l.useEffect)(()=>{var e;if(!k||z.current)return;let t=b.query,{[y]:n,m:i}=t,o=(0,r.Z)(t,[y,"m"].map(f)),a=null!==(e="string"==typeof n?n:null)&&void 0!==e?e:"string"==typeof i?i:null;if(!a||null!=c.tQ.getServerThreadId(p)||null==O)return;let u=(0,g.Z)();z.current=!0,b.replace({query:o},void 0,{shallow:!0}),w(u,{content:a,attachments:[]},{eventSource:"url"},{conversationMode:O,source:"instant-query"})},[k,b,w,p,O])}function m(e){return null!=e&&/^\/g\/[\w-]+$/.test(e)}},85567:function(e,t,n){n.d(t,{I:function(){return a},f:function(){return u}});var r=n(84760);let i="client-correlated-secret";function o(){let e=localStorage.getItem(i);return null==e?e:crypto.subtle.importKey("jwk",JSON.parse(e),{name:"HMAC",hash:{name:"SHA-512"}},!0,["sign","verify"])}async function c(){null==o()&&localStorage.setItem(i,JSON.stringify(await crypto.subtle.exportKey("jwk",await crypto.subtle.generateKey({name:"HMAC",hash:{name:"SHA-512"}},!0,["sign","verify"]))));let e=o();if(null==e)throw Error("Failed to get key from storage");return e}function a(e){let t=new URL(e),n=(0,r.a)({queryKey:[i,"generate-challenge",e.search],queryFn:async()=>[...new Uint8Array(await crypto.subtle.sign("HMAC",await c(),new TextEncoder().encode(e.search)))].map(e=>e.toString(16).padStart(2,"0")).join(""),staleTime:0});if(void 0!==n.data)return t.hash=n.data,t}function u(){var e,t;let n=null===(e=location)||void 0===e?void 0:e.search,o=null===(t=location)||void 0===t?void 0:t.hash;return(0,r.a)({queryKey:[i,"verify-challenge",n,o],queryFn:async()=>"string"==typeof n&&"string"==typeof o&&crypto.subtle.verify("HMAC",await c(),function(e){let t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++)t[n]=parseInt(e.substr(2*n,2),16);return t.buffer}(o.slice(1)),new TextEncoder().encode(n))}).data?new URLSearchParams(n):void 0}}}]);
//# sourceMappingURL=9113-ccbc5069ef78b12d.js.map