"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3347],{81014:function(t,e,n){n.d(e,{A8:function(){return g},K8:function(){return m},NK:function(){return v},Y5:function(){return S},a2:function(){return y},dN:function(){return f},k4:function(){return p},lw:function(){return d},mH:function(){return _},mO:function(){return l},pV:function(){return h},qE:function(){return w},tF:function(){return q},v5:function(){return O},zq:function(){return b}});var r=n(98601),c=n(16351),o=n(72409),a=n(82363),i=n(23047);function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach(function(e){(0,r.Z)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}let l=async t=>{let{queryKey:e}=t,[n,r]=e;if(r.length<2)return[];let a=new URLSearchParams({query_fragment:r});return o.c.get("".concat(c.rq,"/suggestions?").concat(a.toString())).then(t=>t.suggestions).catch(()=>[])};async function f(t){let{threadId:e,sessionId:n,query:r,agentSettingsOverrides:i,metadata:u}=t,l=d(i),f=e?"".concat(c.rq,"/threads/").concat(e,"/turns?blocking=false"):"".concat(c.rq,"/turns?nonce=").concat(n);i.emulated_location&&(u=s(s({},u),i.emulated_location));let g=new PerformanceObserver(t=>{let e=t.getEntriesByName(f,"resource");if(e.length){let t=e[0];if(t.connectEnd){let e=t.connectEnd-t.fetchStart;a.U.addAction("sonic.web.home.new_turn_connection_time",{durationMs:e})}g.disconnect()}});return g.observe({type:"resource"}),o.c.post(f,s(s({},l),{},{turn:{user_query:r},user_metadata:u}))}async function g(){return o.c.delete("".concat(c.rq,"/threads"))}function d(t){var e;return{settings_overrides:{search_results:{search_engines:t.use_labrador?{bing:{}}:{bing:{ranking_model:null,rrf_alpha:1,rrf_input_threshold:0},labrador:null}},model_response:{enable_multimodal:t.show_image_to_model,completion_model:t.completion_model?{model:t.completion_model,clip_model:"@mmapi",direct_connection_urls:[]}:{}}},base_config:null!==(e=t.base_config)&&void 0!==e?e:i.l.SCALLION,eval_preset:t.eval_preset}}async function m(t){let{threadId:e,threadUserId:n,routePrefix:r}=t,a=c.rq;r&&(a+=r);let i=new URL("".concat(a,"/threads/").concat(e,"/with_turns"));return n&&i.searchParams.append("thread_user_id",n),await o.c.get(i.toString())}async function p(t){let e=new FormData;return e.append("feedback",JSON.stringify({thread_id:t.threadId,turn_index:t.turnIndex,rating:t.rating,search_query:t.searchQuery,text:t.text,model_instructions:t.modelInstructions,tags:t.tags,user_email:t.userEmail})),t.screenshot&&e.append("file",new File([t.screenshot],"screenshot.jpeg",{type:"image/jpeg"})),o.c.post("".concat(c.rq,"/feedback/turns"),e)}async function _(t,e){return o.c.post("".concat(c.rq,"/threads/").concat(t,"/turns/").concat(e,"/images_try_hard"))}async function h(){return o.c.get("".concat(c.rq,"/feedback/turns"))}async function y(t,e){return o.c.get("".concat(c.rq,"/feedback/turns/").concat(t,"/").concat(e))}async function b(t,e){return o.c.get("".concat(c.rq,"/feedback/links/").concat(t,"/").concat(e))}async function v(t){let e=new FormData;return t.screenshot&&e.append("file",new File([t.screenshot],"screenshot.jpeg",{type:"image/jpeg"})),e.append("feedback",JSON.stringify({thread_id:t.threadId,url:t.url,title:t.title,snippet:t.snippet,rating:t.rating,search_query:t.searchQuery,text:t.text,tags:t.tags,user_email:t.userEmail})),o.c.post("".concat(c.rq,"/feedback/links"),e)}function S(t){let e=d(t.agentSettingsOverrides);o.c.post("".concat(c.rq,"/prefetch"),s(s({},e),{},{turn:{user_query:t.query},user_metadata:t.metadata}))}function w(){return o.c.get("".concat(c.rq,"/healthcheck"))}function O(){return o.c.post("".concat(c.rq,"/waitlist"))}function q(){return o.c.delete("".concat(c.rq,"/waitlist"))}},23047:function(t,e,n){var r;n.d(e,{l:function(){return c}});let c=((r={}).SCALLION="scallion",r.SCALLION_RC="scallion-rc",r)},95628:function(t,e,n){n.d(e,{ZP:function(){return o}});var r=n(92379);function c(t,e,n){try{var r;let c=JSON.parse(null!==(r=window.localStorage.getItem(t))&&void 0!==r?r:"");if(!n(c))return e;return c}catch(t){return e}}function o(t,e,n){let{0:o,1:a}=(0,r.useState)(()=>c(t,e,n));return(0,r.useEffect)(()=>{a(()=>c(t,e,n))},[t,e,n]),(0,r.useEffect)(()=>{window.localStorage.setItem(t,JSON.stringify(o))},[t,o]),[o,a]}},10798:function(t,e,n){n.d(e,{OR:function(){return _},Ws:function(){return g},lM:function(){return m},nf:function(){return f},rV:function(){return p}});var r=n(13249),c=n(92379),o=n(95628),a=n(651);function i(t){return"object"==typeof t&&"boolean"==typeof t.suggestions}let u={version:0,useLocation:!1};function s(t){try{let e=r.m.getItem(r.F.SearchSettings,{userId:t});return"number"==typeof e.version&&e.version>=u.version?e:u}catch{return u}}let l=(0,c.createContext)({settings:u,setSettings:()=>{}}),f=t=>{let{userId:e,children:n}=t,{0:o,1:i}=(0,c.useState)(()=>s(e));return(0,c.useEffect)(()=>i(s(e)),[e]),(0,c.useEffect)(()=>{r.m.setItem(r.F.SearchSettings,o,{userId:e})},[o,e]),(0,a.jsx)(l.Provider,{value:{settings:o,setSettings:i},children:n})},g={suggestions:!0,showInlineFollowups:!1},d=(0,c.createContext)({settings:g,setSettings:()=>{}}),m=t=>{let{userId:e,children:n}=t,[r,c]=(0,o.ZP)("_INTERNAL_".concat(e,"_").concat("SONIC_SETTINGS_1717364375"),g,i);return(0,a.jsx)(d.Provider,{value:{settings:r,setSettings:c},children:n})};function p(){let{settings:t,setSettings:e}=(0,c.useContext)(l);return[t,e]}function _(){let{settings:t,setSettings:e}=(0,c.useContext)(d);return[t,e]}},5132:function(t,e,n){n.d(e,{XB:function(){return s},XM:function(){return u},ri:function(){return l},t5:function(){return f},to:function(){return c}});var r=n(65012);let c=2592e3,o="last_checked_loc",a="last_denied_loc",i={latitude:null,longitude:null,locationAccuracy:null};async function u(){var t;return null!==(t=navigator)&&void 0!==t&&t.permissions?await navigator.permissions.query({name:"geolocation"}):null}async function s(t){var e;let{enabled:n}=t;if(!n)return l();if((null===(e=await u())||void 0===e?void 0:e.state)!=="granted"){let t=localStorage.getItem(o);if(t){let e=Number(t);if(Date.now()-864e5<e)try{return JSON.parse(r.bX.getCookie(r.cn.LastLocation))}catch{}}}let i=localStorage.getItem(a);if(i){let t=Number(i);if(Date.now()-36e5<t)return null}return await new Promise(t=>{navigator.geolocation.getCurrentPosition(e=>{let n={latitude:e.coords.latitude,longitude:e.coords.longitude,locationAccuracy:e.coords.accuracy};r.bX.setCookie(r.cn.LastLocation,JSON.stringify(n),{maxAge:c}),localStorage.setItem(o,Date.now().toString()),t(n)},()=>{localStorage.setItem(a,Date.now().toString()),t(l())},{enableHighAccuracy:!0,maximumAge:0})})}function l(){return r.bX.setCookie(r.cn.LastLocation,JSON.stringify(i),{maxAge:c}),localStorage.removeItem(o),localStorage.removeItem(a),null}function f(t,e){return"".concat("https://chatgpt.com","/search/evals/permalink/").concat(t,"/").concat(e)}}}]);
//# sourceMappingURL=3347.00439c895ff202d6.js.map