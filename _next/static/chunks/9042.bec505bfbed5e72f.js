"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9042,7541],{39358:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(98601),a=n(92379),s=n(47584),l=n(75325),o=n(15478),i=n(15174),c=n(30853),d=n(11433),u=n(651);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let x=(0,s.vU)({copy:{id:"CopyButton.copy",defaultMessage:"Copy"},copied:{id:"CopyButton.copied",defaultMessage:"Copied!"}});function p(e){let{buttonText:t,shouldChangeText:n=!0,iconClassName:r="icon-sm",onCopy:s,className:o}=e,{0:f,1:p}=(0,a.useState)(!1),b=(0,i.Z)(),g=(0,a.useCallback)(e=>{e.stopPropagation(),s(),p(!0),setTimeout(()=>{b()&&p(!1)},2e3)},[b,s]),j=t;return n&&f?j=(0,u.jsx)(l.Z,h({},x.copied)):!0===t&&(j=(0,u.jsx)(l.Z,h({},x.copy))),(0,u.jsxs)(u.Fragment,{children:[!f&&(0,u.jsx)(c.u,{label:(0,u.jsx)(l.Z,{id:"CopyButton.copyTooltip",defaultMessage:"Copy"}),sideOffset:0,children:(0,u.jsxs)(m,{onClick:g,className:o,children:[(0,u.jsx)(d.TIy,{className:r}),j]})}),f&&(0,u.jsxs)(m,{className:o,children:[(0,u.jsx)(d.$As,{className:r}),j]})]})}let m=o.Z.button`flex gap-1 items-center`},19042:function(e,t,n){n.r(t),n.d(t,{DebugJsonViewer:function(){return P},DebugModal:function(){return C},DebugModalContents:function(){return V}});var r=n(11550),a=n(39358),s=n(30115),l=n(11433),o=n(24434),i=n(67330),c=n(91111),d=n(97193),u=n(27313),f=n(5132),h=n(30757),x=n(79746),p=n(19841),m=n(38482),b=n.n(m),g=n(92379),j=n(15478),v=n(19229),y=n(651);let w=b()(()=>Promise.all([n.e(3904),n.e(6476)]).then(n.bind(n,16476)),{ssr:!1,loadableGenerated:{webpack:()=>[16476]}});function C(e){let{threadId:t,threadUserId:n}=e;return(0,d.W6)(d.bM.isDebugModalOpen)&&(0,y.jsx)(o.Z,{isOpen:!0,onClose:()=>d.vm.toggleDebugModalOpen(),type:"success",size:"fullscreen",noPadding:!0,rootClassName:"z-50",children:(0,y.jsx)(V,{threadId:t,threadUserId:n,onClose:()=>d.vm.toggleDebugModalOpen()})})}let _=(e,t)=>{let n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=window.URL.createObjectURL(n),a=document.createElement("a");a.href=r,a.download=e,a.click(),window.URL.revokeObjectURL(r)},k="<|im_start|>",N="<|im_sep|>",O="<|im_end|>";function E(e){let{prompt:t}=e,n=[],r=0;for(;;){let e=t.indexOf(k,r);if(-1===e)break;let a=t.indexOf(N,e);if(-1===a)break;let s=t.indexOf(O,a),l=t.indexOf("<|fim_suffix|>",a);if(-1!==l&&(-1===s||l<s)&&(s=l),-1===s)break;let o=t.substring(e+k.length,a),i=t.substring(a+N.length,s);n.push((0,y.jsxs)("div",{children:[(0,y.jsxs)("span",{className:"font-semibold",children:["[",o,"]"]})," ",i]},e)),r=s+O.length}return n}let M=j.Z.div`mb-[-5px] px-2 pb-1 font-semibold uppercase border-b-2 ${e=>{let{$isSelected:t}=e;return t?"border-black dark:border-white":"border-transparent"}}`;function V(e){let{threadId:t,threadUserId:n,message:a,onClose:o}=e,{sessionUser:d}=(0,c.A)(),{0:x,1:m}=(0,g.useState)(a?"message":"json"),{data:b,isLoading:j,refetch:v}=(0,u.Y)({threadId:t,threadUserId:n,refetchOnMount:"always"}),w=b?.thread;if((0,g.useEffect)(()=>{m(a?"message":w?.turns.length?`turn${w?.turns.length-1}`:"thread")},[w?.turns.length,a]),!j&&!w&&!a)return(0,y.jsxs)(i.bW,{onClickRetry:()=>v(),children:["Failed to load."," "]});if(j)return(0,y.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:"Loading..."});let C=w?.turns,k=w?.turns[w.turns.length-1]?.artifacts__?.model_snapshots?.default_id,N=n&&t?(0,f.t5)(n,t):null;return(0,y.jsx)("div",{className:"flex flex-col gap-2 break-words font-mono text-xs",children:(0,y.jsxs)(h.fC,{orientation:"vertical",value:x,onValueChange:e=>m(e),children:[(0,y.jsxs)(h.aV,{className:"flex items-center justify-center gap-2 px-4 py-1",children:[a&&(0,y.jsx)(h.xz,{value:"message",children:(0,y.jsx)(M,{$isSelected:"message"===x,children:"Message"})},"message"),w&&(0,y.jsx)(h.xz,{value:"thread",children:(0,y.jsx)(M,{$isSelected:"thread"===x,children:"Thread"})},"thread"),C?.map((e,t)=>y.jsxs(g.Fragment,{children:[y.jsx(h.xz,{value:`turn${t}`,children:y.jsxs(M,{$isSelected:x===`turn${t}`,children:["Turn[",t,"]"]})},t),e.artifacts__?.debug_ddtrace_urls?.map(e=>y.jsx(M,{$isSelected:!1,children:y.jsxs("a",{target:"_blank",href:e,className:"text-nowrap",children:["Trace[",t,"] â†—"]})},e))]},t)),(0,y.jsx)("div",{className:"flex-grow"}),k&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(T,{name:"Model",id:k})," ",(0,y.jsx)("span",{className:"text-gray-500 dark:text-white",children:"|"})]}),d&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(T,{name:"User ID",id:d.id})," ",(0,y.jsx)("span",{className:"text-gray-500 dark:text-white",children:"|"})]}),N&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(T,{name:"Permalink",id:N}),(0,y.jsx)("span",{className:"text-gray-500 dark:text-white",children:"|"})]}),w&&(0,y.jsxs)(r.z,{size:"small",color:"secondary",onClick:()=>_("thread.json",w),children:[(0,y.jsx)(l._8t,{className:"icon-sm"})," thread.json"]}),(0,y.jsx)(s.P,{onClick:o})]}),C?.map((e,t)=>y.jsxs(h.VY,{value:`turn${t}`,className:"max-h-[calc(100vh-46px)] w-full overflow-y-scroll scroll-smooth",children:[y.jsxs("div",{className:p.default("flex flex-col gap-1 p-6",e.index%2==0&&"bg-token-main-surface-tertiary"),children:[y.jsx(E,{prompt:e.artifacts__?.debug_info?.main_model_response?.prompt_string??""}),y.jsxs("div",{children:[y.jsx("span",{className:"font-semibold",children:"[assistant]"})," ",e.model_response?.text]})]})," "]},t)),w&&(0,y.jsx)(h.VY,{value:"thread",className:"max-h-[calc(100vh-46px)] w-full overflow-y-scroll scroll-smooth p-6",children:(0,y.jsx)(P,{data:w,collapsed:4})}),a&&(0,y.jsx)(h.VY,{value:"message",className:"max-h-[calc(100vh-46px)] w-full overflow-y-scroll scroll-smooth p-6",children:(0,y.jsx)(P,{data:a,collapsed:4})})]},w?.turns.length??"message")})}function P(e){let{data:t,collapsed:n}=e,{0:r,1:a}=(0,g.useState)(n??!0);return(0,y.jsxs)("div",{className:"flex flex-col items-start gap-1",children:[(0,y.jsx)("button",{onClick:()=>a(!r),className:"flex items-center gap-1",children:r?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(v.rIY,{size:14})," Expand all"]}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(v.NsE,{size:14})," Collapse all"]})}),(0,y.jsx)("div",{className:"w-full",children:(0,y.jsx)(w,{json:t,jsonViewProps:{collapsed:r,shortenTextAfterLength:0}},String(r))})]})}function T(e){let{name:t,id:n}=e,r=(0,g.useCallback)(()=>{(0,x.v)(n)},[n]);return(0,y.jsxs)("div",{className:"flex items-center gap-2 truncate",children:[(0,y.jsxs)("span",{className:"text-nowrap font-semibold",children:[t,":"]}),(0,y.jsx)("span",{title:n,className:"truncate text-gray-500 dark:text-white",children:n}),(0,y.jsx)(a.Z,{onCopy:r})]})}},27313:function(e,t,n){n.d(t,{Y:function(){return o},v:function(){return i}});var r=n(84760),a=n(92379),s=n(81014),l=n(12381);function o(e){let{threadId:t,threadUserId:n,refetchOnMount:a}=e;return(0,r.a)({queryKey:["thread",t,n],queryFn:async()=>{if(!t)return{thread:null,turns:null};let e=await (0,s.K8)({threadId:t,threadUserId:n}),r=e.turns;return{thread:e,turns:r}},enabled:!!t,refetchOnMount:a})}function i(e){let{threadId:t,threadUserId:n}=e,r=o({threadId:t,threadUserId:n}),s=r.data;return(0,a.useEffect)(()=>{t&&l.P3.setThread(t,s?.turns??[])},[t,s]),{query:r.data?.turns[0]?.user_query,refetch:r.refetch,isLoading:r.isLoading,isError:r.isError}}},15174:function(e,t,n){var r=n(92379);t.Z=function(){let e=(0,r.useRef)(!1);return(0,r.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),(0,r.useCallback)(()=>e.current,[])}},30757:function(e,t,n){n.d(t,{VY:function(){return E},aV:function(){return N},fC:function(){return k},xz:function(){return O}});var r=n(37088),a=n(92379),s=n(10132),l=n(31541),o=n(65954),i=n(79813),c=n(52125),d=n(76228),u=n(48758),f=n(28531);let h="Tabs",[x,p]=(0,l.b)(h,[o.Pc]),m=(0,o.Pc)(),[b,g]=x(h),j=(0,a.forwardRef)((e,t)=>{let{__scopeTabs:n,value:s,onValueChange:l,defaultValue:o,orientation:i="horizontal",dir:h,activationMode:x="automatic",...p}=e,m=(0,d.gm)(h),[g,j]=(0,u.T)({prop:s,onChange:l,defaultProp:o});return(0,a.createElement)(b,{scope:n,baseId:(0,f.M)(),value:g,onValueChange:j,orientation:i,dir:m,activationMode:x},(0,a.createElement)(c.WV.div,(0,r.Z)({dir:m,"data-orientation":i},p,{ref:t})))}),v=(0,a.forwardRef)((e,t)=>{let{__scopeTabs:n,loop:s=!0,...l}=e,i=g("TabsList",n),d=m(n);return(0,a.createElement)(o.fC,(0,r.Z)({asChild:!0},d,{orientation:i.orientation,dir:i.dir,loop:s}),(0,a.createElement)(c.WV.div,(0,r.Z)({role:"tablist","aria-orientation":i.orientation},l,{ref:t})))}),y=(0,a.forwardRef)((e,t)=>{let{__scopeTabs:n,value:l,disabled:i=!1,...d}=e,u=g("TabsTrigger",n),f=m(n),h=C(u.baseId,l),x=_(u.baseId,l),p=l===u.value;return(0,a.createElement)(o.ck,(0,r.Z)({asChild:!0},f,{focusable:!i,active:p}),(0,a.createElement)(c.WV.button,(0,r.Z)({type:"button",role:"tab","aria-selected":p,"aria-controls":x,"data-state":p?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:h},d,{ref:t,onMouseDown:(0,s.M)(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():u.onValueChange(l)}),onKeyDown:(0,s.M)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&u.onValueChange(l)}),onFocus:(0,s.M)(e.onFocus,()=>{let e="manual"!==u.activationMode;p||i||!e||u.onValueChange(l)})})))}),w=(0,a.forwardRef)((e,t)=>{let{__scopeTabs:n,value:s,forceMount:l,children:o,...d}=e,u=g("TabsContent",n),f=C(u.baseId,s),h=_(u.baseId,s),x=s===u.value,p=(0,a.useRef)(x);return(0,a.useEffect)(()=>{let e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,a.createElement)(i.z,{present:l||x},({present:n})=>(0,a.createElement)(c.WV.div,(0,r.Z)({"data-state":x?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":f,hidden:!n,id:h,tabIndex:0},d,{ref:t,style:{...e.style,animationDuration:p.current?"0s":void 0}}),n&&o))});function C(e,t){return`${e}-trigger-${t}`}function _(e,t){return`${e}-content-${t}`}let k=j,N=v,O=y,E=w}}]);
//# sourceMappingURL=9042.bec505bfbed5e72f.js.map