"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[84],{95204:function(e,t,r){var n,i=r(92379);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}t.Z=e=>i.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 34 34"},e),n||(n=i.createElement("g",{id:"icon / robot-sad"},i.createElement("path",{id:"Rectangle 49961",stroke:"currentColor",strokeWidth:2.833,d:"M4.959 9.917a2.833 2.833 0 0 1 2.833-2.834h18.417a2.833 2.833 0 0 1 2.833 2.834V21.25a5.667 5.667 0 0 1-5.667 5.667h-12.75A5.667 5.667 0 0 1 4.96 21.25z"}),i.createElement("circle",{id:"Ellipse 32520",cx:12.041,cy:14.167,r:2.125,fill:"currentColor"}),i.createElement("circle",{id:"Ellipse 32521",cx:21.959,cy:14.167,r:2.125,fill:"currentColor"}),i.createElement("path",{id:"Vector 2380",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.833,d:"M17 7.083V4.25"}),i.createElement("path",{id:"Vector 2381",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.833,d:"M4.958 14.167c-.782 0-1.416.634-1.416 1.416V17c0 .782.634 1.417 1.416 1.417v0"}),i.createElement("path",{id:"Vector 2382",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.833,d:"M29.042 14.167c.782 0 1.416.634 1.416 1.416V17c0 .782-.634 1.417-1.416 1.417v0"}),i.createElement("path",{id:"Vector 2386",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.833,d:"M19.834 21.158c-1.964-.822-3.703-.822-5.667 0"}))))},20084:function(e,t,r){r.r(t),r.d(t,{ImageLightbox:function(){return k},ImageLightboxSearchGPT:function(){return y},ImageResultModal:function(){return M}});var n=r(57098),i=r(59144),a=r(28146),l=r(95204),s=r(92745),o=r(43703),c=r(48175),u=r(87230),d=r(66583),h=r(19841),m=r(88600),f=r(21389),p=r(65925),g=r.n(p),x=r(92379),w=r(15478),b=r(71868),v=r(62789),j=r(651);function k(e){let{clientThreadId:t}=e,r=(0,v.Kp)();if(!r)return null;let{image:n,source:i,turnIndex:a}=r;return null==i||null==t||null==a?(0,j.jsx)(M,{image:n}):i===v.zo.Turn?(0,j.jsx)(N,{image:n,clientThreadId:t,turnIndex:a}):void 0}function y(){let e=(0,v.Kp)();if(!e)return null;let{image:t,source:r}=e;if(null==r)return(0,j.jsx)(M,{image:t});switch(r){case v.zo.ImagesTab:return(0,j.jsx)(E,{image:t});case v.zo.Turn:return(0,j.jsx)(q,{image:t})}}function E(e){let{image:t}=e,{imageResults:r}=(0,b.i)();return(0,j.jsx)(M,{image:t,group:r,groupSource:v.zo.ImagesTab})}function q(e){let{image:t}=e,{imageResults:r}=(0,b.HQ)();return(0,j.jsx)(M,{image:t,group:r,groupSource:v.zo.Turn})}function N(e){let{image:t,clientThreadId:r,turnIndex:n}=e,i=(0,s.xC)(r,n);return(0,j.jsx)(M,{image:t,group:i,turnIndex:n,groupSource:v.zo.Turn})}let C=w.Z.div`grow flex items-start p-8`;function L(e){let{title:t,urls:r}=e,n=r[0],{data:i,isError:a}=(0,b.Fw)(n);if(0===r.length)return;if(a)return r.length>1?(0,j.jsx)(L,{title:t,urls:r.slice(1)}):(0,j.jsx)("div",{className:"flex h-full grow items-center justify-center",children:(0,j.jsx)("div",{className:"flex h-96 w-96 items-center justify-center bg-white/10",children:(0,j.jsx)(l.Z,{className:"h-12 w-12 text-token-text-tertiary"})})});let s="max-w-[100vw] sm:max-w-[calc(100vw-10rem)] object-scale-down h-full";return null!=i?(0,j.jsx)(m.E.img,{src:n,alt:t,initial:{opacity:0},animate:{opacity:1},className:s}):(0,j.jsx)("div",{className:(0,h.default)("w-full animate-pulse bg-white/10",s)})}let T={enter:e=>({x:e>0?1e3:-1e3,opacity:0}),center:{zIndex:1,x:0,opacity:1},exit:e=>({zIndex:0,x:e<0?1e3:-1e3,opacity:0})},I=(e,t)=>Math.abs(e)*t;function M(e){let{image:t,group:r,groupSource:l,turnIndex:s}=e,h=(0,u.d)(t?.url??""),p=(0,v.Kp)(),w=p?.mountDirection;(0,x.useEffect)(()=>{window.history.state.imageModalOpen||window.history.pushState({imageModalOpen:!0},"",window.location.href);let e=()=>{window.history.state.imageModalOpen||v.Tn.setCurrentImage(void 0)};return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)},[]);let b=()=>{window.history.go(-1),v.Tn.setCurrentImage(void 0)},k=r?.findIndex(e=>g()(t,e)),y=r?.length??1,E=null!=k&&y>1,q=(0,x.useCallback)(()=>{E&&null!=r&&v.Tn.setCurrentImage({image:r[(k+1)%r.length],source:l,mountDirection:v.E3.FromRight,turnIndex:s})},[r,E,k,l,s]),N=(0,x.useCallback)(()=>{E&&null!=r&&v.Tn.setCurrentImage({image:r[(k-1+r.length)%r.length],source:l,mountDirection:v.E3.FromLeft,turnIndex:s})},[r,E,k,l,s]);return(0,x.useEffect)(()=>(0,o.eR)(document,{keydown:e=>{"ArrowRight"===e.key?q():"ArrowLeft"===e.key&&N()}}),[q,N]),(0,j.jsx)(f.M,{children:t&&(0,j.jsx)(i.Z.Root,{isOpen:!0,onClose:b,children:(0,j.jsxs)(d.VY,{className:"flex h-full w-full flex-col bg-black/95",onClick:b,children:[(0,j.jsxs)("div",{className:"relative flex w-full grow justify-center overflow-hidden",children:[(0,j.jsxs)("div",{className:"absolute right-4 top-4 flex items-center sm:right-6 sm:top-6",children:[E&&(0,j.jsxs)("div",{className:"shrink-0 px-4 py-2 text-token-text-tertiary",children:[k+1," / ",y]}),(0,j.jsx)("button",{onClick:e=>{e.stopPropagation(),b()},className:"flex h-9 w-9 items-center justify-center outline-none hover:opacity-70",children:(0,j.jsx)(a.tPq,{className:"h-6 w-6 text-gray-400"})})]}),(0,j.jsx)(C,{className:"cursor-w-resize",onClick:e=>{e.stopPropagation(),N()}}),(0,j.jsx)(f.M,{initial:!1,custom:w,children:(0,j.jsx)(m.E.div,{variants:T,custom:w??0,className:"absolute bottom-4 top-24",initial:"enter",animate:"center",exit:"exit",transition:{x:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2}},drag:y>1&&"x",dragConstraints:{left:0,right:0},dragElastic:1,onDragEnd:(e,t)=>{let{offset:r,velocity:n}=t,i=I(r.x,n.x);i<-1e4?q():i>1e4&&N()},children:(0,j.jsx)(L,{title:t.title,urls:[t.content_url.replace(/^http:\/\//,"https://"),t.thumbnail_url]})},k)}),(0,j.jsx)(C,{className:"cursor-e-resize",onClick:e=>{e.stopPropagation(),q()}})]}),(0,j.jsx)("a",{href:t.url,target:"_blank",rel:"noopener",className:"flex min-h-20 w-full shrink-0 items-center gap-8 px-6 pb-3 pt-8 text-sm hover:opacity-70 sm:px-8 sm:pb-8",children:(0,j.jsxs)("div",{className:"flex grow flex-col gap-0.5 overflow-hidden pr-2",children:[(0,j.jsxs)("div",{className:"flex items-center gap-2 truncate text-token-text-tertiary",children:[(0,j.jsx)(n.Z,{url:t.content_url,className:"rounded",size:16}),h.data??(0,c.p)(t.url)]}),(0,j.jsx)("div",{className:"truncate font-semibold text-white",children:t.title})]})})]})})})}},48175:function(e,t,r){r.d(t,{p:function(){return n}});function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"short";try{let r=new URL(e).hostname.replace("www.","");if("hostname"===t)return r;return r.replace(/\.[^.]*$/,"")}catch(t){return e}}},87230:function(e,t,r){r.d(t,{d:function(){return p},u:function(){return g}});var n=r(72409),i=r(3551),a=r(42420),l=r(84760),s=r(19464),o=r(79208),c=r(18939),u=r.n(c),d=r(74153),h=r.n(d),m=r(28438);let f=h()(e=>o.Ue({fetcher:async t=>{let r=new Map;for await(let i of n.c.streamedJsonPost(`${m.B}/attributions`,{urls:t}))i.attribution&&r.set(i.url,i.attribution),e.setQueryData(["attribution",{url:i.url}],i.attribution);return u()(t.map(e=>{let t=r.get(e);return t&&{url:e,attribution:t}}))},resolver:o.rp("url"),scheduler:o.ck(100)}));function p(e){let{useBaseUrl:t=!0,enabled:r=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t?(0,i.FH)(e):e,s=f((0,a.NL)());return(0,l.a)({queryKey:["attribution",{url:n}],queryFn:async()=>(await s.fetch(n)).attribution,enabled:r&&!!e})}function g(e){let{useBaseUrl:t=!0,enabled:r=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t?e.map(i.FH):e,l=f((0,a.NL)());return(0,s.h)({queries:n.map(e=>({queryKey:["attribution",{url:e}],queryFn:async()=>(await l.fetch(e)).attribution,enabled:n.length>0&&r})),combine:t=>{let r=new Map;for(let n=0;n<t.length;n++){let i=t[n].data;i&&r.set(e[n],i)}return r}})}},79208:function(e,t,r){r.d(t,{Ue:function(){return i},rp:function(){return a},ck:function(){return l}});let n=()=>{let e,t;let r=new Promise((r,n)=>{e=r,t=n});return{resolve:e,reject:t,value:r}},i=(e,t)=>{let r=e.name??`batcher:${Math.random().toString(16).slice(2)})`,i=e.scheduler??l(10),a=globalThis.__BATSHIT_DEVTOOLS__?.for(r),s=t??{seq:0,batch:new Set,currentRequest:n(),timer:void 0,start:null,latest:null};a?.create({seq:s.seq});let o=()=>{s.batch=new Set,s.currentRequest=n(),s.timer=void 0,s.start=null,s.latest=null};return{fetch:t=>{s.start||(s.start=Date.now()),s.latest=Date.now(),s.batch.add(t),clearTimeout(s.timer);let r=i(s.start,s.latest,s.batch.size);a?.queue({seq:s.seq,query:t,batch:[...s.batch],scheduled:r,latest:s.latest,start:s.start});let n=()=>{let t=s.seq,r=e.fetcher([...s.batch]),n=s.currentRequest;return a?.fetch({seq:t,batch:[...s.batch]}),o(),r.then(e=>{a?.data({seq:t,data:e}),n.resolve(e)}).catch(e=>{a?.error({seq:t,error:e}),n.reject(e)}),s.seq++,r};if("immediate"===r){let r=s.currentRequest;return n(),r.value.then(r=>e.resolver(r,t))}return"never"===r?s.currentRequest.value.then(r=>e.resolver(r,t)):(s.timer=setTimeout(n,r),s.currentRequest.value.then(r=>e.resolver(r,t)))}}},a=e=>(t,r)=>t.find(t=>t[e]==r),l=e=>(t,r)=>e-(r-t)}}]);
//# sourceMappingURL=84.c760c0d7b85b3ad8.js.map