"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3124],{88491:function(e,t,n){n.d(t,{Z:function(){return O}});var r,i=n(98601),o=n(99333),s=n(11550),a=n(64216),l=n(6440),c=n(59144),d=n(36792),u=n(13490),m=n(24434),f=n(24740),g=n(2721),h=n(42420),x=n(56032),p=n(92379),v=n(75172),y=n(62984),j=n(68306),b=n(12310),M=n(651);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var N=((r=N||{})[r.INITIAL=0]="INITIAL",r[r.PENDING=1]="PENDING",r[r.FINAL=2]="FINAL",r);function O(e){let{workspaceId:t,isOpen:n,onClose:r,currentDomain:i,domains:s=[],showUnverifiedDomains:l=!1,onVerifyDomain:d}=e,u=(0,v.Z)(),{mutateAsync:j,isPending:b}=function(e){let t=(0,h.NL)();return(0,x.D)({mutationFn:t=>{let{hostname:n}=t;return g.Z.addDomainToWorkspace(e,n)},onSuccess:()=>{t.invalidateQueries({queryKey:["workspace/identity",e]}),t.invalidateQueries({queryKey:["builderProfile"]})},onError:e=>{f.m.danger(e.message)}})}(t),{mutateAsync:w,isPending:O}=function(e){let t=(0,h.NL)();return(0,x.D)({mutationFn:t=>{let{domainId:n}=t;return g.Z.checkDomainForWorkspace(e,n)},onSuccess:()=>{t.invalidateQueries({queryKey:["workspace/identity",e]}),t.invalidateQueries({queryKey:["builderProfile"]})},onError:e=>{f.m.danger(e.message)}})}(t),{0:P,1:C}=(0,p.useState)(null!=i?i:void 0),{0:S,1:_}=(0,p.useState)(null==i?void 0:i.hostname),{0:D,1:L}=(0,p.useState)((null==i?void 0:i.status)===void 0?N.INITIAL:(null==i?void 0:i.status)===o.pT.PENDING?N.PENDING:N.FINAL),I=()=>{i||(C(void 0),L(N.INITIAL))},E=async()=>{if(void 0===S)return;let e=s.find(e=>e.hostname===S&&e.status===o.pT.PENDING);if(e)C(e),L(N.PENDING);else{let e=await j({hostname:S});"id"in e&&C(e),L(N.PENDING)}},R=(0,M.jsx)(c.Z.Button,{title:u.formatMessage(T.check),color:"primary",disabled:(null==P?void 0:P.id)===void 0||O,onClick:async()=>{if(null!=P&&P.id){let e=await w({domainId:P.id});"error"in e&&f.m.danger(u.formatMessage(T.domainCheckError,{message:e.error.message})),"id"in e&&(d&&d(e),e.status===o.pT.VERIFIED&&L(N.FINAL))}}}),A=(0,M.jsx)(c.Z.Button,{title:u.formatMessage(T.submit),color:"primary",disabled:void 0===S||b,onClick:E}),B=(0,M.jsx)(c.Z.Button,{title:u.formatMessage(T.done),color:"primary",onClick:()=>{I(),r()}});return(0,M.jsxs)(m.Z,{isOpen:n,onClose:()=>{I(),r()},type:"success",className:"text-token-text-secondary",title:u.formatMessage(D===N.INITIAL?T.newTitle:T.editTitle),primaryButton:D===N.INITIAL?A:D===N.PENDING?R:B,secondaryButton:(0,M.jsx)(c.Z.Button,{title:u.formatMessage(T.cancel),color:"secondary",onClick:()=>{I(),r()}}),children:[D===N.INITIAL&&(0,M.jsx)(Z,{hostname:S,onSetHostname:_,onSubmit:E,unverifiedDomains:l?s:[],onVerifyDomain:e=>{L(N.PENDING),C(e)},workspaceId:t}),D===N.PENDING&&(0,M.jsxs)("div",{className:"flex flex-col gap-3",children:[u.formatMessage(T.verificationTokenMessage,{hostname:null==P?void 0:P.hostname}),(null==P?void 0:P.dns_verification_token_string)&&(0,M.jsx)(a.Z,{value:P.dns_verification_token_string,onCopied:()=>{f.m.success(u.formatMessage(T.copiedTXTRecordToClipboard),{duration:3})}}),(0,M.jsx)(y.Z,k({},T.verificationTokenFooter))]}),D===N.FINAL&&(0,M.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,M.jsx)(y.Z,k(k({},T.successfulVerification),{},{values:{hostname:null==P?void 0:P.hostname}})),(null==P?void 0:P.dns_verification_token_string)&&(0,M.jsx)(a.Z,{value:P.dns_verification_token_string,onCopied:()=>{f.m.success(u.formatMessage(T.copiedTXTRecordToClipboard),{duration:3})}})]})]})}function P(e){let{unverifiedDomains:t,onVerifyDomain:n,workspaceId:r}=e,{mutateAsync:i}=(0,b.Bd)(r);return(0,M.jsxs)(d.Z.Root,{fixed:!0,size:"compact",className:"mb-6 border-b border-token-border-light",children:[(0,M.jsxs)(d.Z.Header,{children:[(0,M.jsx)(d.Z.HeaderCell,{children:(0,M.jsx)(y.Z,k({},T.unverifiedDomainsTableHeader))}),(0,M.jsx)(d.Z.HeaderCell,{textAlign:"right"})]}),t.map(e=>(0,M.jsxs)(d.Z.Row,{children:[(0,M.jsx)(d.Z.Cell,{children:e.hostname}),(0,M.jsx)(d.Z.Cell,{textAlign:"right",children:(0,M.jsxs)("div",{className:"flex gap-2",children:[(0,M.jsx)(s.z,{color:"secondary",size:"small",onClick:()=>n(e),children:(0,M.jsx)(y.Z,k({},T.verifyDomainButton))}),(0,M.jsx)(s.z,{color:"secondary",size:"small",onClick:()=>i({domainId:e.id}),icon:u.XHJ})]})})]},e.id))]})}function Z(e){let{hostname:t,onSetHostname:n,onSubmit:r,unverifiedDomains:i,onVerifyDomain:o,workspaceId:s}=e,a=(0,v.Z)();return(0,M.jsxs)(M.Fragment,{children:[i&&i.length>0&&(0,M.jsx)(P,{workspaceId:s,unverifiedDomains:i,onVerifyDomain:o}),(0,M.jsx)("form",{onSubmit:e=>{e.preventDefault(),r()},children:(0,M.jsxs)("div",{className:"mb-4",children:[(0,M.jsx)("label",{className:"mb-2 flex items-center text-sm font-semibold",children:(0,M.jsx)(y.Z,k({},T.domainInput))}),(0,M.jsx)(l.Z,{name:"hostname",placeholder:a.formatMessage(T.placeholder),value:null!=t?t:"",onChange:e=>{n(e.target.value)}})]})})]})}let T=(0,j.vU)({newTitle:{id:"domainModal.newTitle.0",defaultMessage:"Verify a new domain"},editTitle:{id:"domainModal.editTitle",defaultMessage:"Manage Domain"},submit:{id:"domainModal.submit",defaultMessage:"Submit"},check:{id:"domainModal.check",defaultMessage:"Check"},done:{id:"domainModal.done",defaultMessage:"Done"},cancel:{id:"domainModal.cancel",defaultMessage:"Cancel"},domainInput:{id:"domainModal.domainInput.0",defaultMessage:"Add a new domain"},placeholder:{id:"domainModal.placeholder",defaultMessage:"openai.com"},domainCheckError:{id:"domainModal.domainCheckError",defaultMessage:"Your domain could not be verified: {message}"},verificationTokenMessage:{id:"domainModal.verificationTokenMessage",defaultMessage:"To verify ownership of {hostname}, navigate to your DNS provider and add a TXT record with this value:"},verificationTokenFooter:{id:"domainModal.verificationTokenFooter",defaultMessage:"Then, check the record to complete the verification."},successfulVerification:{id:"domainModal.successfulVerification.0",defaultMessage:'Your domain, "{hostname}" has been successfully verified'},copiedTXTRecordToClipboard:{id:"domainModal.copiedTXTRecordToClipboard",defaultMessage:"Copied DNS TXT record to clipboard"},verifyDomainButton:{id:"domainModal.verifyDomainButton",defaultMessage:"Verify"},unverifiedDomainsTableHeader:{id:"domainModal.unverifiedDomainsTableHeader",defaultMessage:"Your unverified domains"}})},92683:function(e,t,n){n.d(t,{aB:function(){return x},fK:function(){return y},g2:function(){return h}});var r=n(99333),i=n(70663),o=n(59358),s=n(2721),a=n(93951),l=n(86025),c=n(84760),d=n(82363),u=n(18939),m=n.n(u),f=n(92379);let g=new Map;function h(){let{gdriveLinkStatus:e,o365BusinessLinkStatus:t,o365PersonalLinkStatus:n}=(0,i.r)();return v(e,t,n)}function x(){let{gdriveStatus:e,o365Status:t}=(0,i.r)();return v(e,t,t)}let p=[r.PO.GDRIVE,r.PO.O365_PERSONAL,r.PO.O365_BUSINESS];function v(e,t,n){var i,s,l;let c=(0,a.t)(),d=null==c?void 0:c.getWorkspaceId(),{connectors:u,isLoading:g}=y(p),{data:h,isLoading:x}=(0,o.C)(d),v=!d||(null==h||null===(i=h.beta_settings)||void 0===i?void 0:i.context_connector_gdrive),j=!d||(null==h||null===(s=h.beta_settings)||void 0===s?void 0:s.context_connector_o365_personal),b=!d||(null==h||null===(l=h.beta_settings)||void 0===l?void 0:l.context_connector_o365_business),M=u.get(r.PO.GDRIVE),w=u.get(r.PO.O365_PERSONAL),k=u.get(r.PO.O365_BUSINESS),N=(e,t)=>"true"===e||"ifConnected"===e&&t;return{connectorConfig:(0,f.useMemo)(()=>{var i;let o=N(e,!!(null!=M&&M.access_token)),s=!!(null!==(i=null==w?void 0:w.access_token)&&void 0!==i?i:null==k?void 0:k.access_token),a=N(t,s),l=N(n,s),c=[o&&M&&v?[r.PO.GDRIVE,M]:null,l&&w&&j?[r.PO.O365_PERSONAL,w]:null,a&&k&&b?[r.PO.O365_BUSINESS,k]:null];return new Map(m()(c))},[M,e,w,k,t,n,v,j,b]),isLoading:g||x}}function y(e){let{0:t,1:n}=(0,f.useState)(g),{isUnauthenticated:r}=(0,l.u)(),{isSuccess:i,data:o,isLoading:s}=(0,c.a)({queryKey:["fetchConnectorData",e],queryFn:j,refetchInterval:18e5,enabled:!r});return(0,f.useEffect)(()=>{i&&n(new Map(o.map(e=>[e.type,e])))},[i,o]),{connectors:t,isLoading:s}}async function j(e){let{queryKey:t}=e,[n,i]=t,o=null;try{o=await s.Z.checkConnectorAPI(i)}catch(e){d.U.addError(Error("Error while retrieving context connector entry",{cause:e}))}return o?o.connectors.map(e=>{if(!e.access_token)return e;if(e.type===r.PO.O365_PERSONAL)e.onedrive_endpoint_hint={type:"personal",baseUrl:"https://onedrive.live.com",parsedUrl:"https://onedrive.live.com/picker"};else if(e.type===r.PO.O365_BUSINESS){var t;let n=null===(t=e.onedrive_business_metadata)||void 0===t?void 0:t.base_url;if(n){let t=new URL(n);e.onedrive_endpoint_hint={type:"business",baseUrl:n,parsedUrl:"https://".concat(t.hostname,"/_layouts/15/FilePicker.aspx")}}}return e}):[]}},70663:function(e,t,n){n.d(t,{r:function(){return s}});var r=n(31498),i=n(88667),o=n(92379);function s(){let e=(0,r.aF)(),t=(0,i.xb)("1967546325").config,n=t.get("gdrivePicker",!1),s=t.get("o365Picker",!1),l=t.get("gdriveLink",!1),c=t.get("o365PersonalLink",!1),d=t.get("o365BusinessLink",!1),u=t.get("gdrivePercentage",0),m=t.get("o365Percentage",0),f=t.get("loadTestPercentage",0),g=t.get("showWorkspaceSettings",!1),h=e?Math.abs(function(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n)|0;return t}(e.id)%100):null;return(0,o.useMemo)(()=>({gdriveStatus:a(n,h,u),o365Status:a(s,h,m),gdriveLinkStatus:a(l,h,u),o365PersonalLinkStatus:a(c,h,m),o365BusinessLinkStatus:a(d,h,m),loadTest:"true"===a(!0,h,f),showWorkspaceSettings:g}),[n,h,u,s,m,l,c,d,f,g])}function a(e,t,n){return e&&null!=t?t<n?"true":"ifConnected":"false"}},81522:function(e,t,n){n.d(t,{B$:function(){return u},Yk:function(){return d},hx:function(){return m}});var r=n(98601),i=n(68029),o=n(68810);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let l=(0,i.M)(()=>({activeRequests:{}})),c=e=>(0,o.oR)(l,e);function d(e){return c(t=>null!=t.activeRequests[e])}function u(){return c(e=>Object.keys(e.activeRequests).length>0)}let m={addRequest(e,t){l.setState(n=>({activeRequests:a(a({},n.activeRequests),{},{[e]:{id:e,abortController:t}})}))},removeRequest(e){l.setState(t=>{let n=a({},t.activeRequests);return delete n[e],{activeRequests:n}})},clear(){l.setState({activeRequests:{}})},abortRequest(e){let{activeRequests:t}=l.getState();return null!=t[e]&&(t[e].abortController.abort(),m.removeRequest(e),!0)},abortRequests(e){let{activeRequests:t}=l.getState(),n=a({},t);for(let t of e)null!=n[t]&&(n[t].abortController.abort(),delete n[t]);l.setState({activeRequests:n})},abortAllRequests(){let{activeRequests:e}=l.getState();Object.values(e).forEach(e=>{e.abortController.abort()}),m.clear()}}},83036:function(e,t,n){n.d(t,{Z:function(){return g}});var r,i=n(2346),o=n(42110),s=n(10449);n(82363);var a=n(88667),l=n(92379),c=n(62984),d=n(15478),u=n(13490),m=n(651);let f=d.Z.div(r||(r=(0,i.Z)(["text-sm text-token-text-tertiary"])));function g(e){let t,n,{gizmo:r,builderName:i,builderUrl:s,className:l,socials:d,hideLink:g=!1}=e,{value:x}=(0,a.sB)("2256850471");r&&"gizmo"in r?(t=r.gizmo.author.display_name,n=r.gizmo.author.link_to):(t=i,n=s),(""===t||null==t)&&(t="community builder");let p=null==d?void 0:d.filter(e=>e.verified),v=(0,m.jsxs)("div",{className:"w-48 space-y-4 text-sm",children:[n&&(0,m.jsxs)("div",{className:"flex w-full flex-row items-center justify-between",children:[(0,m.jsxs)("div",{className:"flex flex-row items-center space-x-2 text-token-text-primary",children:[(0,m.jsx)(u.n9J,{className:"icon-md"}),(0,m.jsx)("span",{children:(0,m.jsx)(c.Z,{id:"gizmo.author.websiteLabel",defaultMessage:"Website"})})]}),(0,m.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:n,className:"text-token-text-tertiary  hover:cursor-pointer",children:(0,m.jsx)(u.Pfi,{className:"icon-sm"})})]}),x&&(null==p?void 0:p.map((e,t)=>e.verified?(0,m.jsx)(o.lD,{socialData:e},t):null)),(0,m.jsxs)("div",{className:"text-xs text-token-text-tertiary",children:[(n||p&&p.length>0)&&(0,m.jsx)("hr",{className:"my-2 border-token-border-light"}),(0,m.jsx)(c.Z,{id:"gizmo.author.cannotViewLabel",defaultMessage:"The builder of this GPT cannot view your conversations."})]})]});return(0,m.jsxs)("div",{className:"flex flex-row items-center space-x-1",children:[(0,m.jsx)(f,{className:l,children:(0,m.jsx)(c.Z,{id:"gizmo.author.byLabel",defaultMessage:"By {displayName}",values:{displayName:t}})}),!g&&(0,m.jsx)(h,{socials:d,website:n,children:v})]})}function h(e){let{website:t,socials:n,children:r}=e,{0:i,1:o}=(0,l.useState)(!1),a=[];t&&a.push((0,m.jsx)(u.n9J,{className:"icon-xs text-token-text-secondary"})),n&&n.forEach(e=>{e.verified&&("twitter"===e.type?a.push((0,m.jsx)(u.suT,{className:"icon-xs text-token-text-secondary"})):"linkedin"===e.type?a.push((0,m.jsx)(u.O9,{className:"icon-xs text-token-text-secondary"})):"github"===e.type&&a.push((0,m.jsx)(u.C2$,{className:"icon-xs text-token-text-secondary"})))});let c=a.length-2;return a=a.slice(0,2),c>0&&a.push((0,m.jsxs)("span",{className:"text-xs font-semibold text-token-text-secondary",children:["+",c]},"overflow")),(0,m.jsx)(s.fC,{open:i,onOpenChange:o,children:(0,m.jsxs)("div",{onPointerLeave:()=>o(!1),children:[(0,m.jsx)(s.xz,{asChild:!0,children:(0,m.jsx)("div",{onPointerEnter:()=>o(!0),children:a.length>0?(0,m.jsx)("div",{className:"flex items-center gap-1 rounded-xl bg-token-main-surface-secondary px-2 py-1",children:a}):(0,m.jsx)(u.tBG,{className:"icon-xs text-token-text-secondary"})})}),(0,m.jsx)(s.VY,{side:"top",sideOffset:8,align:"center",className:"z-10 rounded-lg bg-token-main-surface-primary p-4 drop-shadow-md",children:r})]})})}},42110:function(e,t,n){n.d(t,{lD:function(){return k},s6:function(){return N},tw:function(){return w}});var r=n(98601),i=n(88491),o=n(12310),s=n(11550),a=n(98095),l=n(13490),c=n(99555),d=n(81690),u=n(97537),m=n(93951),f=n(54089),g=n(42420),h=n(56032),x=n(19841),p=n(92379),v=n(62984),y=n(68306),j=n(651);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function w(e){var t,n;let{selectedDomain:r,verifiedDomains:s,domains:c,onChangeDomain:d}=e,{0:u,1:g}=(0,p.useState)(!1),h=s.length>0,x=null===(t=(0,m.t)())||void 0===t?void 0:t.id,y=null===(n=(0,m.t)())||void 0===n?void 0:n.isEnterprisey(),{mutateAsync:b}=(0,o.Bd)(x);return(0,j.jsxs)("div",{className:"font-normal",children:[(0,j.jsxs)(a.Z.Root,{children:[(0,j.jsx)(f.xz,{children:(0,j.jsxs)("span",{className:"flex items-center gap-2 py-2",children:[null!=r?r:(0,j.jsx)(v.Z,M({},O.selectADomain)),(0,j.jsx)(l.T2M,{className:"icon-md"})]})}),(0,j.jsx)(a.Z.Portal,{children:(0,j.jsxs)(a.Z.Content,{children:[(0,j.jsx)(a.Z.RadioGroup,{value:r,onValueChange:e=>{e!==r&&d(e)},children:s.map(e=>{let{id:t,hostname:n}=e;return(0,j.jsx)(a.Z.RadioItem,{value:n,children:(0,j.jsxs)("div",{className:"flex flex-row",children:[(0,j.jsx)("span",{children:n}),(0,j.jsx)("span",{onClick:()=>{b({domainId:t}),d("")},children:(0,j.jsx)(l.XHJ,{className:"icon-sm fixed right-4"})})]})},t)})}),h&&(0,j.jsx)(a.Z.Separator,{}),(0,j.jsx)(a.Z.Item,{onClick:()=>{g(!0)},icon:l.Vz5,children:(0,j.jsx)(v.Z,M({},O.addDomain))})]})})]}),x&&!y&&(0,j.jsx)(i.Z,{domains:c,isOpen:u,onClose:()=>g(!1),workspaceId:x,showUnverifiedDomains:!0,onVerifyDomain:e=>{d(e.hostname)}})]})}function k(e){let{socialData:t}=e,{type:n,display_name:r,verified_data:i}=t,o="twitter"===n?l.suT:"linkedin"===n?l.O9:"github"===n?l.C2$:null;return o?(0,j.jsxs)("div",{className:"flex w-full flex-row items-center justify-between",children:[(0,j.jsxs)("div",{className:"flex flex-row items-center space-x-2 text-token-text-primary",children:[o({className:"icon-md"}),(0,j.jsx)("span",{children:r})]}),(null==i?void 0:i.link_to)&&(0,j.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:i.link_to,className:"text-sm text-token-text-tertiary  hover:cursor-pointer",children:(0,j.jsx)(l.Pfi,{className:"icon-sm"})})]}):null}function N(e){let{socialData:t,icon:n}=e,{id:r,type:i,display_name:o,verified:a,verified_data:m}=t,{0:f,1:y}=(0,p.useState)(!1),b=function(){let e=(0,g.NL)();return(0,h.D)({mutationFn:e=>{let{verifierType:t}=e;return c.U.unverifySocialAuth(t)},onSuccess:()=>{e.refetchQueries({queryKey:["builderProfile"]})}})}();return(0,j.jsxs)("div",{className:"flex flex-row items-center justify-between space-y-1",children:[(0,j.jsxs)("div",{className:(0,x.default)("flex items-center space-x-2"),children:[(0,j.jsx)(n,{className:"icon-sm"}),(0,j.jsx)("span",{children:o}),a&&(null==m?void 0:m.username)&&(0,j.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:m.link_to,className:"text-sm text-token-text-tertiary hover:cursor-pointer",children:null==m?void 0:m.username})]}),a?(0,j.jsx)("div",{className:"py-1 font-semibold hover:cursor-pointer",onClick:()=>{b.mutate({verifierType:i})},children:b.isPending?(0,j.jsx)(u.Z,{}):(0,j.jsx)(l.tPq,{className:"icon-sm text-token-text-tertiary"})}):(0,j.jsx)(s.z,{size:"small",color:"secondary",loading:f,onClick:async()=>{y(!0),await (0,d.Up)({id:r},"#settings/BuilderProfile"),y(!1)},children:(0,j.jsx)(v.Z,M({},O.verify))})]})}let O=(0,y.vU)({verify:{defaultMessage:"Add",id:"GizmoSocialRow.add"},addDomain:{id:"GizmoSocialRow.addDomain",defaultMessage:"Verify new domain"},selectADomain:{id:"GizmoSocialRow.selectADomain",defaultMessage:"Select a domain"}})},81690:function(e,t,n){n.d(t,{Up:function(){return o},doConnectorOauthRedirect:function(){return s},wP:function(){return l},wW:function(){return a}});var r=n(16757),i=n(2721);async function o(e,t){let n="".concat("https://chat.openai.com","/aip/").concat(e.id,"/oauth/callback"),r=await i.Z.pluginOauthRedirect(e.id,n,t);window.location.href=r.redirect_uri}async function s(e,t,n,r){let o=await i.Z.connectorOauthRedirect(e.id,n,t,r);window.location.href=o.redirect_uri}function a(e){switch(e){case r.NA.Link:return"link_paste_popover";case r.NA.Picker:return"file_upload_menu"}}async function l(e){await i.Z.deleteUserConnectedApp(e),window.location.reload()}},385:function(e,t,n){n.d(t,{Z:function(){return D}});var r,i=n(2346),o=n(2721),s=n(31498),a=n(83963),l=n(33221),c=n(42420),d=n(56032),u=n(84760),m=n(90372),f=n.n(m),g=n(92379),h=n(75172),x=n(62984),p=n(15478),v=n(11550),y=n(98095),j=n(36792),b=n(30853),M=n(13490),w=n(53128),k=n(24434),N=n(12128),O=n(24740),P=n(71744),Z=n(58890),T=n(651);function C(e){var t;let{gizmo:n,memory:r}=e,i=(0,h.Z)(),s=(0,c.NL)(),{mutate:a,isPending:u}=(0,d.D)({mutationFn:e=>o.Z.deleteMemory(e,null==n?void 0:n.id),onSettled:()=>{s.invalidateQueries({queryKey:(0,l.Lq)(null==n?void 0:n.id)})},onError:()=>{O.m.danger(i.formatMessage({id:"MemoriesModal.deleteFailed",defaultMessage:"Failed to forget memory"}),{id:"memoryDeleteFailed"})}}),{0:m,1:p}=(0,g.useState)(!1),v=i.formatMessage({id:"z2CNgB",defaultMessage:"Forget"});return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(j.Z.Row,{disabled:u,children:[(0,T.jsx)(j.Z.Cell,{children:(0,T.jsx)("div",{className:"whitespace-pre-wrap py-2",children:r.content})}),(0,T.jsx)(j.Z.Cell,{textAlign:"right",children:(0,T.jsx)(j.Z.Actions,{children:(0,T.jsx)("button",{onClick:()=>p(!0),"aria-label":v,className:"text-token-text-tertiary hover:text-token-text-secondary",children:(0,T.jsx)(b.u,{className:"leading-none",label:v,sideOffset:4,side:"top",children:(0,T.jsx)(M.XHJ,{className:"icon-sm"})})})})})]}),m&&(0,T.jsx)(w.Z,{isOpen:!0,primaryButtonColor:"danger",title:v,confirmText:i.formatMessage({id:"fCn0ar",defaultMessage:"Forget"}),onConfirm:()=>{a(r.id),p(!1)},onClose:()=>{p(!1)},children:(0,T.jsx)(x.Z,{id:"pZ/TCe",defaultMessage:'{name} will forget "{title}". This cannot be undone. <link>Learn more</link>',values:{name:null!==(t=null==n?void 0:n.name)&&void 0!==t?t:"ChatGPT",title:(0,T.jsx)("strong",{children:f()(r.content,{length:130,omission:"..."})}),link:e=>(0,T.jsx)("a",{href:"https://help.openai.com/en/articles/8590148-memory-faq#h_41527f643d",target:"_blank",className:"underline",rel:"noreferrer",children:e})}})})]})}function S(e){let{selectedGizmoId:t,onSelect:n,items:r}=e,i=r.find(e=>e.id===t);function o(e){var t;return(0,T.jsx)(N.Z,{isFirstParty:void 0===e.id,src:null!==(t=e.iconUrl)&&void 0!==t?t:null,className:"icon-md"})}return(0,T.jsx)("div",{className:"mb-2 inline-flex rounded-md border border-token-border-medium",children:(0,T.jsxs)(y.Z.Root,{children:[(0,T.jsx)(y.Z.Trigger,{children:(0,T.jsxs)("div",{className:"flex items-center gap-2",children:[i?(0,T.jsxs)(T.Fragment,{children:[o(i),(0,T.jsx)("span",{className:"text-token-text-primary",children:null==i?void 0:i.name})]}):(0,T.jsx)(x.Z,{id:"MemoriesModal.unknownGizmo",defaultMessage:"Unknown GPT"}),(0,T.jsx)(M.Tg4,{className:"icon-sm text-token-text-tertiary"})]})}),(0,T.jsx)(y.Z.Portal,{children:(0,T.jsx)(y.Z.Content,{children:r.map(e=>(0,T.jsxs)(y.Z.Item,{className:"flex items-center gap-3",onClick:()=>{n(e.id)},children:[o(e),e.name]},e.id))})})]})})}let _=p.Z.div(r||(r=(0,i.Z)(["flex h-full items-center justify-center pb-8 text-sm text-token-text-tertiary rounded-lg border border-token-border-light"])));function D(e){var t,n,r,i;let d;let{onClose:m,initialGizmoId:f}=e,p=(0,h.Z)(),y=(0,c.NL)(),b=(0,a.tW)(),{0:M,1:w}=(0,g.useState)(f),N=(0,s.m0)(),{data:O,isLoading:D,isError:L,refetch:I}=(0,l.HL)(M,!0,b),E=null==O?void 0:O.memories,{data:R,refetch:A}=(0,u.a)({queryKey:["memory_gizmos"],queryFn:()=>o.Z.getGizmosWithMemory(),refetchOnMount:"always"}),B=[{id:void 0,name:"ChatGPT",iconUrl:null},...null!==(t=null==R||null===(n=R.items)||void 0===n?void 0:n.map(e=>{let{gizmo:t}=e;return{id:t.id,name:t.display.name,iconUrl:t.display.profile_picture_url}}))&&void 0!==t?t:[]],F=B.find(e=>e.id===M);return d=D?(0,T.jsx)(_,{children:(0,T.jsx)(x.Z,{id:"MemoriesModal.loading",defaultMessage:"Loading..."})}):L?(0,T.jsx)(_,{children:(0,T.jsxs)("div",{className:"max-w-sm text-center",children:[(0,T.jsx)("div",{className:"mb-4 text-red-500",children:(0,T.jsx)(x.Z,{id:"MemoriesModal.somethingWentWrong",defaultMessage:"Something went wrong..."})}),(0,T.jsx)("div",{children:(0,T.jsx)(v.z,{color:"secondary",onClick:()=>{I()},children:(0,T.jsx)(x.Z,{id:"MemoriesModal.retry",defaultMessage:"Retry"})})})]})}):E&&0!==E.length?(0,T.jsx)(j.Z.Root,{className:"h-full",size:"compact",bordered:!0,children:(0,T.jsx)(j.Z.Body,{children:E.map(e=>(0,T.jsx)(C,{gizmo:F?{id:F.id,name:F.name}:void 0,memory:e},e.id))})}):(0,T.jsx)(_,{children:(0,T.jsx)("div",{className:"max-w-sm text-center",children:b?(0,T.jsx)(x.Z,{id:"MemoriesModal.noMemories.1",defaultMessage:"As you chat with {name}, the details and preferences it remembers will be shown here.",values:{name:null!==(i=null==F?void 0:F.name)&&void 0!==i?i:"ChatGPT"}}):(0,T.jsx)(x.Z,{id:"MemoriesModal.noMemoriesAndDisabled",defaultMessage:"Memory is disabled. ChatGPT won't use or create memories."})})}),(0,T.jsxs)(k.Z,{isOpen:!0,onClose:m,size:"custom",className:"max-w-5xl",type:"success",title:p.formatMessage({id:"MemoriesModal.title",defaultMessage:"Memory"}),showCloseButton:!0,children:[N&&B.length>1&&(0,T.jsx)("div",{className:"mb-4",children:(0,T.jsx)(S,{selectedGizmoId:M,items:B,onSelect:e=>{y.invalidateQueries({queryKey:(0,l.Lq)(e)}),w(e)}})}),(0,T.jsx)(P.s,{memoryFullPct:null==O?void 0:O.memoryFullPct,className:"mb-5"}),(0,T.jsx)("div",{className:"h-[24rem]",children:d}),(0,T.jsx)("div",{className:"mt-5 flex justify-end",children:(0,T.jsx)(Z.n,{onReset:()=>{I(),A(),M&&w(void 0)},gizmoId:M,memoryName:null!==(r=null==F?void 0:F.name)&&void 0!==r?r:"ChatGPT"})})]})}},71744:function(e,t,n){n.d(t,{b:function(){return g},s:function(){return h}});var r=n(83963),i=n(33221),o=n(19841),s=n(88600),a=n(62984),l=n(30853),c=n(13490),d=n(651);function u(e){return e<100?"bg-[#fcf6e0] text-yellow-500 dark:bg-yellow-600 dark:text-yellow-100":"bg-orange-100 text-[#f48c15] dark:bg-orange-800 dark:text-orange-100"}function m(e){return(0,r.u1)()&&null!=e&&e>=91}function f(e){let{memoryFullPct:t,className:n,children:r}=e;return m(t)?(0,d.jsx)("div",{className:(0,o.default)("rounded-lg border border-token-border-light p-1 text-sm",n),children:(0,d.jsxs)(s.E.div,{className:(0,o.default)("flex items-center overflow-hidden whitespace-nowrap rounded px-2 py-1.5",u(t)),initial:{width:0},animate:{width:"".concat(t,"%")},transition:{duration:.5},children:[(0,d.jsx)(a.Z,{id:"6D2etG",defaultMessage:"{memoryFullPct}% full",values:{memoryFullPct:t}}),r]})}):null}function g(e){let{memoryFullPct:t}=e;return m(t)?(0,d.jsxs)("div",{className:"flex items-center justify-center",children:[(0,d.jsx)("div",{className:(0,o.default)("relative -mr-1 h-2 w-2 rotate-45 transform border-white/10 ",u(t))}),(0,d.jsxs)("div",{className:(0,o.default)("flex items-center rounded-lg px-3 py-1.5",u(t)),children:[(0,d.jsx)(a.Z,{id:"x7M6HK",defaultMessage:"{memoryFullPct}%",values:{memoryFullPct:t}}),(0,d.jsx)(l.u,{label:t<100?(0,d.jsx)(a.Z,{id:"VXohcH",defaultMessage:"Memory is almost full. Once memory is full, new memories won’t be created. You can forget existing memories to make space."}):(0,d.jsx)(a.Z,{id:"pQ9dnt",defaultMessage:"Memory is full. New memories won’t be created. You can forget existing memories to make space."}),children:(0,d.jsx)(c.F3p,{className:"icon-sm ml-1 text-token-text-secondary"})})]})]}):null}function h(e){let{memoryFullPct:t,className:n}=e;return m(t)?(0,d.jsxs)("div",{className:(0,o.default)("flex flex-col gap-2",n),children:[(0,d.jsx)(f,{memoryFullPct:t}),(0,d.jsx)("div",{className:"pl-3 text-sm text-token-text-secondary",children:t<100?(0,d.jsx)(a.Z,{id:"z3LYM2",defaultMessage:"<strong>Memory almost full</strong>. Once memory is full, new memories won’t be created. You can forget existing memories to make space. <a>Learn more</a>.",values:{strong:e=>(0,d.jsx)("strong",{children:e}),a:e=>(0,d.jsx)("a",{href:i.Fx,target:"_blank",rel:"noopener noreferrer",className:"underline",children:e})}}):(0,d.jsx)(a.Z,{id:"6rc4Jv",defaultMessage:"<strong>Memory is full</strong>. New memories won’t be created. You can forget existing memories to make space. <a>Learn more</a>.",values:{strong:e=>(0,d.jsx)("strong",{children:e}),a:e=>(0,d.jsx)("a",{href:i.Fx,target:"_blank",rel:"noopener noreferrer",className:"underline",children:e})}})})]}):null}},58890:function(e,t,n){n.d(t,{n:function(){return f}});var r=n(2721),i=n(92379),o=n(75172),s=n(62984),a=n(11550),l=n(59144),c=n(24434),d=n(24740),u=n(651);function m(e){let{description:t,onClose:n,onConfirm:r}=e,i=(0,o.Z)();return(0,u.jsx)(c.Z,{isOpen:!0,onClose:n,type:"success",title:i.formatMessage({id:"MemoriesModal.resetModalTitle",defaultMessage:"Are you sure?"}),description:t,primaryButton:(0,u.jsx)(l.Z.Button,{title:i.formatMessage({id:"MemoriesModal.resetModalConfirm",defaultMessage:"Clear memory"}),color:"danger",onClick:r}),secondaryButton:(0,u.jsx)(l.Z.Button,{title:i.formatMessage({id:"MemoriesModal.resetModalCancel",defaultMessage:"Cancel"}),color:"secondary",onClick:n})})}function f(e){let{onReset:t,gizmoId:n,memoryName:l}=e,{0:c,1:f}=(0,i.useState)(!1),g=(0,o.Z)(),h=async()=>{try{await r.Z.clearUserMemory(n),d.m.success(g.formatMessage({id:"ResetMemoriesButton.resetSuccess",defaultMessage:"Memory cleared."})),null==t||t(),f(!1)}catch(e){d.m.danger(g.formatMessage({id:"ResetMemoriesButton.resetFailed",defaultMessage:"Failed to clear memory."}))}};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(a.z,{color:"danger-outline",onClick:()=>f(!0),children:n?(0,u.jsx)(s.Z,{id:"ResetMemoriesButton.resetGizmo",defaultMessage:"Clear this GPT's memory"}):(0,u.jsx)(s.Z,{id:"ResetMemoriesButton.resetChatGPT",defaultMessage:"Clear ChatGPT's memory"})}),c&&(0,u.jsx)(m,{description:g.formatMessage({id:"MemoriesModal.resetGizmoModalDescription",defaultMessage:"{name} will forget everything it has remembered from your chats. This cannot be undone."},{name:l}),onClose:()=>f(!1),onConfirm:h})]})}},87040:function(e,t,n){n.d(t,{$N:function(){return f},SK:function(){return d},hE:function(){return m},qn:function(){return u}});var r=n(99333),i=n(43878),o=n(58025),s=n(2721),a=n(84760),l=n(58695),c=n(92379);function d(){var e,t;let n=null===(e=(0,o.R1)(r.sh.VoiceName))||void 0===e?void 0:e.data,i=null===(t=(0,o.R1)(r.sh.VoiceMainLanguage))||void 0===t?void 0:t.data;return{voiceName:f(n,u()),voiceMainLanguage:null!=i?i:r.P9.Auto}}function u(){let e=m(),{currentLocale:t}=(0,i.b)();return(0,c.useCallback)(()=>{if(0===e.length)return"juniper";let n=e[0].voice;return t.startsWith("zh")&&(n="cove"),n},[e,t])}function m(){let{session:e}=(0,l.kP)(),{data:t}=(0,a.a)({queryKey:["getUserSettingVoices"],queryFn:()=>s.Z.getUserSettingVoices(),enabled:null!=e});return t?t.voices:[]}function f(e,t){return"sky"===e?"juniper":null!=e?e:t()}},49763:function(e,t,n){n.d(t,{V:function(){return s}});var r=n(98601),i=n(36560),o=n.n(i);class s{constructor(){(0,r.Z)(this,"emitter",new(o())),this.emitter.setMaxListeners(1e3)}on(e,t){this.emitter.on(e,t)}off(e,t){this.emitter.off(e,t)}publish(e){this.emitter.emit(e.kind,e),this.emitter.emit("anyEvent",e)}}},33221:function(e,t,n){n.d(t,{Fx:function(){return l},HL:function(){return d},Lq:function(){return c}});var r=n(98601),i=n(2721),o=n(84760);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let l="https://help.openai.com/en/articles/8590148-memory-faq";function c(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return["memories",{gizmoId:e,includeMemoryEntries:t}]}function d(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=!(arguments.length>2)||void 0===arguments[2]||arguments[2];return(0,o.a)({queryKey:c(e,t),queryFn:async()=>{let n=await i.Z.getMemories(e,t),r=Math.min(Math.floor(100*n.memory_num_tokens/n.memory_max_tokens),100);return a(a({},n),{},{memoryFullPct:r})},refetchOnMount:"always",enabled:n})}},15174:function(e,t,n){var r=n(92379);t.Z=function(){let e=(0,r.useRef)(!1);return(0,r.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),(0,r.useCallback)(()=>e.current,[])}},27393:function(e,t,n){n.d(t,{Ef:function(){return g},UG:function(){return h},dG:function(){return c},gb:function(){return x},mK:function(){return f}});var r,i=n(98601),o=n(37671),s=n(82363),a=n(92379);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}let c=((r={}).SonicHome="sonic.web.home",r.SonicServer="sonic.ssr.search",r.ChatPageLoad="chatgpt.web.pageLoad",r.CompletionRequest="chatgpt.web.completionRequest",r.ProofOfWork="chatgpt.web.proofOfWork",r);class d{constructor(e,t){var n,r;(0,i.Z)(this,"expectedTimingLogTimeouts",{}),(0,i.Z)(this,"startMs",-1),(0,i.Z)(this,"lastLogMs",-1),(0,i.Z)(this,"loggedTimings",new Set),(0,i.Z)(this,"timingBlocks",{}),(0,i.Z)(this,"debug",!1),this.namespace=e,this.expectedTimingLogs=null!==(n=null==t?void 0:t.expectedTimingLogs)&&void 0!==n?n:[],this.debug=null!==(r=null==t?void 0:t.debug)&&void 0!==r&&r,this.reset()}reset(){for(let e of(this.startMs=this.lastLogMs=performance.now(),this.timingBlocks={},this.loggedTimings=new Set,Object.values(this.expectedTimingLogTimeouts)))clearTimeout(e);for(let e of(this.expectedTimingLogTimeouts={},this.expectedTimingLogs)){let t=setTimeout(()=>{var t;s.U.addAction("".concat(this.namespace,".").concat(e.name,".timed_out"),null!==(t=e.initializationInfo)&&void 0!==t?t:{})},e.expectedInMs);this.expectedTimingLogTimeouts[e.name]=t,this.debug&&console.debug("[DatadogProfiler] Expecting ".concat(this.namespace,".").concat(e.name," to be logged within ").concat(e.expectedInMs,"ms"))}}logTiming(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fromLastLog:!1};if(this.loggedTimings.has(e)){console.warn("[DatadogProfiler] Timing ".concat(this.namespace,".").concat(e," already logged"));return}let n=performance.now()-(t.fromLastLog?this.lastLogMs:this.startMs);s.U.addAction("".concat(this.namespace,".").concat(e),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({durationMs:n},t.context)),this.lastLogMs=performance.now(),this.loggedTimings.add(e),e in this.expectedTimingLogTimeouts&&(clearTimeout(this.expectedTimingLogTimeouts[e]),delete this.expectedTimingLogTimeouts[e]),this.debug&&console.debug("[DatadogProfiler] ".concat(this.namespace,".").concat(e,": ").concat(n,"ms"))}startBlock(e){this.timingBlocks[e]=performance.now()}endBlock(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{throwError:!0},n=this.timingBlocks[e];if(void 0===n&&t.throwError)throw Error("Block ".concat(e," not started"));let r=performance.now()-n;s.U.addAction("".concat(this.namespace,".").concat(e),{durationMs:r}),delete this.timingBlocks[e]}}let u={},m="__global__";function f(e){let{namespace:t,key:n=m,opts:r}=e;void 0===u[t]&&(u[t]={});let i=(0,o.S)(u[t]);return void 0!==i[n]&&s.U.addError("Profiler already exists for namespace ".concat(t," and key ").concat(n)),i[n]=new d(t,r),i[n]}function g(e){let{namespace:t,key:n=m}=e;if(void 0!==u[t])return(0,o.S)(u[t])[n]}function h(e){let{namespace:t,key:n=m}=e;if(void 0!==u[t]){let e=(0,o.S)(u[t]);delete e[n]}}function x(e){let{namespace:t,key:n=m,opts:r}=e,{0:i}=(0,a.useState)(()=>f({namespace:t,key:n,opts:r}));return i}}}]);
//# sourceMappingURL=3124-7f564121b832496d.js.map