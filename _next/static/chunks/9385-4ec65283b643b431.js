"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9385],{42508:function(e,t,r){var n=r(92379);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}t.Z=e=>n.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",width:14,height:14,fill:"none",viewBox:"0 0 14 14"},e),n.createElement("path",{stroke:"currentColor",strokeWidth:1.2,d:"m10.67 9.087 2.252-6.347c.367-1.033-.63-2.03-1.662-1.662L4.913 3.33A2.6 2.6 0 0 0 3.33 4.913L1.078 11.26c-.367 1.033.63 2.03 1.662 1.662l6.347-2.251a2.6 2.6 0 0 0 1.584-1.584Z",style:{stroke:"currentColor",strokeOpacity:1}}),n.createElement("path",{stroke:"currentColor",d:"M7 8.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z",style:{stroke:"currentColor",strokeOpacity:1}}))},39385:function(e,t,r){r.d(t,{$:function(){return b},m:function(){return v}});var n=r(93951),i=r(92745),s=r(86025),o=r(31438),a=r(15913),l=r(19841),c=r(75172),d=r(30478),u=r(4160),f=r(30853),m=r(13490),h=r(95033),g=r(47762),p=r(2118),y=r(651);function v(e){let{clientThreadId:t}=e,r=(0,i.XK)(t),o=(0,n.t)(),{isUnauthenticated:a}=(0,s.u)(),l=(0,i.eV)(t),c=(0,d.V_)();return a?null:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(h.Vq,{isActive:void 0===l,isNewConversation:!0}),null!=o&&o.canInteractWithGizmos()?(0,y.jsx)(h.Dy,{currentGizmoId:l}):(0,y.jsx)(g.Z,{}),!a&&(0,y.jsx)(u.Z,{activeId:c?void 0:r,isInPopover:!1})]})}function b(e){let{className:t}=e,r=(0,c.Z)(),n=(0,a.w$)();return(0,y.jsx)("div",{className:(0,l.default)("flex justify-between",t),children:(0,y.jsx)(f.u,{sideOffset:4,label:r.formatMessage({id:"e7SzX9",defaultMessage:"Close sidebar"}),className:"flex",side:"right",children:(0,y.jsx)(p.W,{"aria-label":r.formatMessage({id:"e7SzX9",defaultMessage:"Close sidebar"}),onClick:()=>{n?o.vm.toggleDesktopNavCollapsed():o.vm.toggleActiveSidebar("mobile-nav")},icon:n?m.BSo:m.Oqj,surfaceContext:"secondary"})})})}},4160:function(e,t,r){r.d(t,{V:function(){return eh},Z:function(){return ef}});var n,i,s=r(2346),o=r(98601),a=r(83963),l=r(42420),c=r(27393),d=r(19841),u=r(95638),f=r(26430),m=r(12654),h=r(44043),g=r(82187),p=r(69262),y=r(157),v=r(21389),b=r(88600),x=r(24098),j=r.n(x),k=r(92379),w=r(68306),M=r(75172),C=r(62984),O=r(15478),S=r(17096),N=r(11550),P=r(39004),T=r(2721),D=r(53132),E=r(92745),Z=r(86025),z=r(43703),A=r(13391),B=r(15913),L=r(3551),I=r(66290),G=r(99976),_=r(61619),R=r(88667),K=r(38482),F=r.n(K),q=r(15174),U=r(651);function V(e){let{text:t}=e,r=(0,q.Z)(),{0:n,1:i}=(0,k.useState)(!0),{0:s,1:o}=(0,k.useState)(0),a=(0,k.useMemo)(()=>Array.from(t),[t]),l=(0,k.useMemo)(()=>new W().humanTypingDelaysQuertyDistance(a),[a]);return(0,k.useEffect)(()=>{t&&n&&(i(!0),l.forEach((e,t)=>{setTimeout(()=>{r()&&(o(t),t===l.length-1&&i(!1))},e)}))},[l,r,n,t]),(0,U.jsx)(U.Fragment,{children:a.slice(0,s+1).join("")})}class W{qwertyDistance(e,t){var r,n;let i={q:[0,0],w:[1,0],e:[2,0],r:[3,0],t:[4,0],y:[5,0],u:[6,0],i:[7,0],o:[8,0],p:[9,0],a:[0,1],s:[1,1],d:[2,1],f:[3,1],g:[4,1],h:[5,1],j:[6,1],k:[7,1],l:[8,1],z:[0,2],x:[1,2],c:[2,2],v:[3,2],b:[4,2],n:[5,2],m:[6,2]},[s,o]=null!==(r=i[e.toLowerCase()])&&void 0!==r?r:[0,0],[a,l]=null!==(n=i[t.toLowerCase()])&&void 0!==n?n:[0,0];return Math.abs(s-a)+Math.abs(o-l)}humanTypingDelaysQuertyDistance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,n=0,i=[];for(let s=0;s<e.length;++s){let o;if(s>0){let n=this.qwertyDistance(e[s-1],e[s]);o=0===n?this.getRandomInt(t,Math.floor(r/2)):1===n?this.getRandomInt(t,Math.floor(2*r/3)):this.getRandomInt(t,r)}else o=this.getRandomInt(t,r);i.push(o+n),n+=o}return i}getRandomInt(e,t){return Math.floor(Math.random()*(t-e+1))+e}}var Y=r(44395),H=r(81522),Q=r(30853),X=r(13490),$=r(24740),J=r(60682),ee=r(24241);let et=F()(()=>Promise.all([r.e(1612),r.e(9695),r.e(6746),r.e(8639)]).then(r.bind(r,52245)).then(e=>e.GizmoConversationOptionsDropdown),{loadableGenerated:{webpack:()=>[52245]}});function er(e){let{conversation:t,conversationTitle:r,onOpenChange:n}=e,i=(0,M.Z)(),{isUnauthenticated:s}=(0,Z.u)(),{eligible:o,markAsViewed:a}=(0,J.qg)(J.pm.ArchiveConversationOnboarding),c=(0,E.ff)(t.id),{0:d,1:u}=(0,k.useState)(!1),f=(0,l.NL)(),m=(0,I.Z)();return((0,k.useEffect)(()=>(0,z.LW)(A.n,{deleteChat:e=>{let{serverThreadId:r}=e;r===t.id&&u(!0)},archiveChat:async e=>{let{serverThreadId:r}=e;r===t.id&&(await T.Z.patchConversation(t.id,{is_archived:!0}),(0,ee.aM)(f),R.m9.logEvent("chatgpt_conversation_archived"),G.A.logEvent(_.M.conversationArchived),o&&($.m.info(i.formatMessage({defaultMessage:"You can view archived chats in Settings",id:"HistoryGizmoItem.archiveChatOnboarding"}),{duration:10,hasCloseButton:!0}),a()),c&&m("/"))}}),[m,f,o,t.id,i,c,a]),s)?null:(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Q.u,{label:i.formatMessage({id:"tJPHEQ",defaultMessage:"Options"}),sideOffset:4,side:"top",children:(0,U.jsx)(et,{clientThreadId:t.id,onOpenChange:n,children:(0,U.jsx)("button",{className:"flex items-center justify-center text-token-text-secondary transition hover:text-token-text-primary radix-state-open:text-token-text-secondary",children:(0,U.jsx)(X.nWS,{className:"icon-md"})})})}),d&&(0,U.jsx)(eh,{title:r,handleDelete:()=>{T.Z.patchConversation(t.id,{is_visible:!1}).then(()=>{(0,ee.aM)(f),R.m9.logEvent("chatgpt_conversation_deleted"),G.A.logEvent(_.M.conversationDeleted)}),c&&m("/")},onClose:()=>{u(!1)}})]})}function en(e){let{conversation:t,onClose:r}=e,{0:n,1:i}=(0,k.useState)(t.title),s=(0,l.NL)();function o(){n!==t.title&&(E.tQ.setTitle(t.id,n,E._L.User),G.A.logEvent(_.M.renameThread,{threadId:t.id,content:n}),T.Z.patchConversation(t.id,{title:n}).then(()=>{(0,ee.aM)(s)}))}return(0,U.jsx)("input",{type:"text",value:n,onChange:e=>{i(e.target.value)},onKeyDown:e=>{switch(e.key){case"Escape":r();break;case"Enter":o(),r()}},onBlur:()=>{o(),r()},autoFocus:!0,className:"w-full border border-token-border-light bg-transparent p-0 text-sm"})}function ei(e){var t;let{conversation:r,isActive:n,elementRef:i,isPrimaryBackgroundColor:s}=e,o=(0,M.Z)(),{0:a,1:l}=(0,k.useState)(!1),{0:c,1:u}=(0,k.useState)(!1),f=D.p.useState(D.p.selectConversationStatus)(r.id),m=D.p.useStore();(0,k.useEffect)(()=>{if(2===f&&n){let e=setTimeout(()=>{m.setConversationStatus(r.id,null),T.Z.clearConversationStatus(r.id)},500);return()=>clearTimeout(e)}},[f,n,r.id,m]),(0,k.useEffect)(()=>(0,z.LW)(A.n,{editTitle:e=>{let{serverThreadId:t}=e;(t?t===r.id:n)&&l(!0)}}),[r.id,n]);let h=o.formatMessage({id:"mpXAeu",defaultMessage:"New chat"}),{resolvedTitle:g,isTypingEffect:p}=function(e,t,r){let{title:n,titleSource:i}=(0,E.XL)(e),{0:s,1:o}=(0,k.useState)(!1),a=null!=n?n:t,l=(0,k.useRef)(a);return(0,k.useEffect)(()=>(r&&i===E._L.Generated&&a!==l.current&&o(!0),()=>{l.current=a}),[r,a,i]),{isTypingEffect:s,resolvedTitle:a}}(r.id,r.title,n),y=(0,B.w$)(),v=p&&n&&y,{data:b}=(0,P.b9)(null!==(t=r.conversation_template_id)&&void 0!==t?t:void 0),x=(0,I.Z)();return(0,U.jsxs)("div",{className:(0,d.default)("group relative rounded-lg active:opacity-90",n?"bg-token-sidebar-surface-secondary":"hover:bg-token-sidebar-surface-secondary",c&&!n&&"bg-token-sidebar-surface-secondary"),children:[(0,U.jsx)(j(),{href:(0,L.ZV)(r.id,b),onClick:e=>{if(!e.metaKey&&!e.ctrlKey&&(e.preventDefault(),!n)){var t;t=r.id,H.hx.abortAllRequests(),G.A.logEvent(_.M.loadThread,{threadId:t}),x((0,L.ZV)(t,b))}},onDoubleClick:()=>{l(!0)},ref:i,className:"flex items-center gap-2 p-2",children:(0,U.jsxs)("div",{className:"relative grow overflow-hidden whitespace-nowrap",dir:"auto",children:[v?(0,U.jsx)(V,{text:g||h}):g||h,(0,U.jsx)("div",{className:(0,d.default)("absolute bottom-0 top-0 to-transparent ltr:right-0 ltr:bg-gradient-to-l rtl:left-0 rtl:bg-gradient-to-r",!!s&&(n?"from-token-sidebar-surface-secondary":!n&&c?"from-token-sidebar-surface-secondary":"from-token-main-surface-primary"),!s&&(n?"from-token-sidebar-surface-secondary":!n&&c?"from-token-sidebar-surface-secondary":"from-token-sidebar-surface-primary"),{"from-token-main-surface-primary can-hover:group-hover:from-token-sidebar-surface-secondary":s&&!n&&!c,"from-token-sidebar-surface-primary can-hover:group-hover:from-token-sidebar-surface-secondary":!s&&!n&&!c,"w-10 from-60%":n||c,"w-8 from-0% can-hover:group-hover:w-10 can-hover:group-hover:from-60%":!n&&!c})})]})}),a?(0,U.jsx)("div",{className:"absolute bottom-0 left-[7px] right-2 top-0 flex items-center bg-token-sidebar-surface-secondary",children:(0,U.jsx)(en,{conversation:r,onClose:()=>{l(!1)}})}):n||1!==f?n||2!==f?(0,U.jsx)("div",{className:(0,d.default)("absolute bottom-0 top-0 items-center gap-1.5 pr-2 ltr:right-0 rtl:left-0",n||c?"flex":"hidden can-hover:group-hover:flex"),children:(0,U.jsx)(er,{conversation:r,conversationTitle:null!=g?g:r.title,onOpenChange:e=>{u(e),e&&G.A.logEvent(_.M.conversationHistoryItemOpenMenu,{conversationId:r.id})}})}):(0,U.jsx)("div",{className:"absolute bottom-0 top-0 flex items-center gap-1.5 pr-2 ltr:right-0 rtl:left-0",children:(0,U.jsx)("div",{className:"h-2 w-2 rounded-full bg-blue-selection"})}):(0,U.jsx)("div",{className:"absolute bottom-0 top-0 flex items-center gap-1.5 pr-2 ltr:right-0 rtl:left-0",children:(0,U.jsx)(Y.O,{size:18})})]})}var es=r(97537),eo=r(59144),ea=r(24434);function el(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ec(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?el(Object(r),!0).forEach(function(t){(0,o.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):el(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let ed=(0,w.vU)({historyBucketToday:{id:"history.bucket.today",defaultMessage:"Today"},historyBucketYesterday:{id:"history.bucket.yesterday",defaultMessage:"Yesterday"},historyBucketLastSeven:{id:"history.bucket.lastSeven",defaultMessage:"Previous 7 Days"},historyBucketLastThirty:{id:"history.bucket.lastThirty",defaultMessage:"Previous 30 Days"},unableToLoadHistory:{id:"history.unableToLoad",defaultMessage:"Unable to load history"},retryButton:{id:"history.retryButton",defaultMessage:"Retry"},showMoreButton:{id:"history.showMoreButton",defaultMessage:"Show more"},deleteModalTitle:{id:"history.deleteModalTitle",defaultMessage:"Delete chat?"},deleteModalBody:{id:"history.deleteModalBody",defaultMessage:"This will delete {title}."},deleteModalConfirm:{id:"history.deleteModalConfirm",defaultMessage:"Delete"},deleteModalCancel:{id:"history.deleteModalCancel",defaultMessage:"Cancel"}}),eu={initial:e=>{let{isNew:t}=e;return t?{opacity:0,height:0,overflow:"hidden"}:{}},animate:()=>({opacity:1,height:"auto"}),exit:()=>({opacity:0,height:0})};var ef=k.memo(function(e){let{activeId:t,isPrimaryBackgroundColor:r,isInPopover:n}=e,i=(0,l.NL)(),s=(0,M.Z)(),{0:o,1:a}=(0,k.useState)(!1),{0:x,1:j}=(0,k.useState)(0),w=(0,S.Z)(),{conversations:O,hasNextPage:P,fetchNextPage:T,isLoading:D,isFetchingNextPage:E,isError:Z}=(0,ee.MO)(),z=(0,k.useRef)(null),A=(0,k.useCallback)(e=>{var t;D||null==e||(null===(t=z.current)||void 0===t||t.disconnect(),z.current=new IntersectionObserver(e=>{e[0].isIntersecting&&P&&T()}),z.current.observe(e))},[D,P,T]);(0,k.useEffect)(()=>()=>{var e;null===(e=z.current)||void 0===e||e.disconnect()},[]);let B=function(e){let t=(0,k.useRef)(),r=(0,k.useRef)();return((0,k.useEffect)(()=>{t.current=r.current,r.current=e},[e]),e===r.current)?t.current:r.current}(O);(0,k.useEffect)(()=>{w(()=>{j(x+1)},(0,f.Z)((0,m.Z)(),Date.now())+1e3)},[x,w]);let L=0===O.length;(0,k.useEffect)(()=>{if(!L){var e;null===(e=(0,c.Ef)({namespace:c.dG.ChatPageLoad}))||void 0===e||e.logTiming("render_history_items")}},[L]);let I=(0,k.useMemo)(()=>O.reduce((e,t)=>{var r,n;let i=new Date(null!==(r=null!==(n=t.update_time)&&void 0!==n?n:t.create_time)&&void 0!==r?r:0),o=(0,u.Z)(new Date,i);if(0===o)e.recent.today.items.push(t);else if(o<=1)e.recent.yesterday.items.push(t);else if(o<=7)e.recent.lastSeven.items.push(t);else if(o<=30)e.recent.lastThirty.items.push(t);else if((0,p.Z)(i)){let r=(0,g.Z)(i),n=(0,h.Z)(i),o="".concat(r,"-").concat(n);e.dynamicMonths[o]?e.dynamicMonths[o].items.push(t):e.dynamicMonths[o]={label:s.formatDate(i,{month:"long"}),items:[t]}}else{let r=(0,g.Z)(i),n="".concat(r,"-");e.dynamicYears[n]?e.dynamicYears[n].items.push(t):e.dynamicYears[n]={label:s.formatDate(i,{year:"numeric"}),items:[t]}}return e},{recent:{today:{label:(0,U.jsx)(C.Z,ec({},ed.historyBucketToday)),items:[]},yesterday:{label:(0,U.jsx)(C.Z,ec({},ed.historyBucketYesterday)),items:[]},lastSeven:{label:(0,U.jsx)(C.Z,ec({},ed.historyBucketLastSeven)),items:[]},lastThirty:{label:(0,U.jsx)(C.Z,ec({},ed.historyBucketLastThirty)),items:[]}},dynamicMonths:{},dynamicYears:{}}),[x,O]);return(0,U.jsxs)(em,{$centered:D||Z||L,children:[L&&D&&(0,U.jsx)(es.Z,{className:"m-auto"}),L&&Z&&(0,U.jsxs)("div",{className:"p-3 text-center italic text-token-text-tertiary",children:[(0,U.jsx)(C.Z,ec({},ed.unableToLoadHistory)),!o&&(0,U.jsx)("div",{className:"mt-1",children:(0,U.jsx)(N.z,{as:"button",color:"primary",size:"small",className:"m-auto mt-2",onClick:()=>{a(!0),(0,ee.aM)(i)},children:(0,U.jsx)(C.Z,ec({},ed.retryButton))})})]}),!D&&!L&&(0,U.jsx)("div",{children:(0,U.jsx)(y.S,{id:n?"history-popover":"history-sidebar",children:(0,U.jsx)(v.M,{initial:!1,children:[I.recent,I.dynamicMonths,I.dynamicYears].flatMap((e,n)=>(0,U.jsx)(k.Fragment,{children:Object.entries(e).map((e,i)=>{let[s,{items:o,label:a}]=e;if("today"!==s&&!o.length)return null;let l=!!o.find(e=>{var t;return O.length>0&&e.id===(null===(t=O[0])||void 0===t?void 0:t.id)});return o.length>0&&(0,U.jsxs)(b.E.div,{className:(0,d.default)(r&&"first:mt-0","relative mt-5 first:mt-0 last:mb-5 empty:mt-0 empty:hidden"),layout:"position",initial:{height:0,opacity:1,position:"relative"},animate:{height:"auto",opacity:1,transition:{duration:.2,ease:"easeIn"}},children:[(0,U.jsx)(b.E.div,{className:"sticky top-0 z-20 bg-token-sidebar-surface-primary",layout:"position",children:(0,U.jsx)("span",{className:"flex h-9 items-center",children:(0,U.jsx)(eg,{children:a})})},"title-".concat(s)),(0,U.jsx)("ol",{children:o.map((e,n)=>{var i;let o=t===e.id,a=null==B?void 0:B.find(t=>{let{id:r}=t;return r===e.id}),c=P&&(null===(i=O[O.length-5-1])||void 0===i?void 0:i.id)===e.id?A:void 0;return(0,U.jsx)(b.E.li,{className:(0,d.default)("relative",l&&0===n?"z-[15]":""),layout:"position",custom:{isNew:!a},variants:eu,initial:"initial",animate:"animate",exit:"exit",children:(0,U.jsx)(ei,{isPrimaryBackgroundColor:r,conversation:e,isActive:o,elementRef:c})},"history-item-".concat(e.id,"-").concat(s))})})]},"".concat(s,"-").concat(n,"-").concat(i))})},"category-".concat(n)))})})}),E&&(0,U.jsx)("div",{className:"m-4 mb-5 flex justify-center",children:(0,U.jsx)(es.Z,{})})]})});let em=O.Z.div(n||(n=(0,s.Z)(["flex flex-col gap-2 pb-2 text-token-text-primary text-sm mt-5\n",""])),e=>{let{$centered:t}=e;return t&&"h-full justify-center items-center empty:hidden"});function eh(e){let{title:t,handleDelete:r,onClose:n}=e,i=(0,M.Z)(),s=(0,a.ll)();return(0,U.jsxs)(ea.Z,{isOpen:!0,onClose:n,type:"success",title:i.formatMessage(ed.deleteModalTitle),primaryButton:(0,U.jsx)(eo.Z.Button,{title:i.formatMessage(ed.deleteModalConfirm),color:"danger",onClick:()=>{r(),n()}}),secondaryButton:(0,U.jsx)(eo.Z.Button,{title:i.formatMessage(ed.deleteModalCancel),color:"secondary",onClick:n}),children:[(0,U.jsx)(C.Z,ec(ec({},ed.deleteModalBody),{},{values:{title:(0,U.jsx)("strong",{children:t})}})),s&&(0,U.jsx)("div",{className:"mt-2 text-sm text-token-text-tertiary",children:(0,U.jsx)(C.Z,{id:"history.deleteModalMemoryDisclaimer",defaultMessage:"To clear any memories from this chat, visit your <link>settings</link>.",values:{link:e=>(0,U.jsx)(j(),{href:"#settings/Personalization",shallow:!0,className:"underline",children:e})}})})]})}let eg=O.Z.h3(i||(i=(0,s.Z)(["pb-2 pt-3 px-2 text-xs font-semibold text-ellipsis overflow-hidden break-all text-token-text-secondary"])))},95033:function(e,t,r){r.d(t,{Dy:function(){return W},Vq:function(){return U},eY:function(){return q},xL:function(){return Q}});var n,i=r(98601),s=r(30853),o=r(12128),a=r(25899),l=r(39004),c=r(99555),d=r(10080),u=r(93951),f=r(86025),m=r(31438),h=r(3551),g=r(42420),p=r(58695),y=r(13490),v=r(66290),b=r(99976),x=r(61619),j=r(27393),k=r(19841),w=r(88600),M=r(14015),C=r.n(M),O=r(38482),S=r.n(O),N=r(24098),P=r.n(N),T=r(92379),D=r(62984),E=r(75172),Z=r(68306),z=r(98095),A=r(34643),B=r(75372),L=r(15972),I=r(47762),G=r(651);function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach(function(t){(0,i.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let K=S()(()=>Promise.all([r.e(6746),r.e(8826)]).then(r.bind(r,52245)).then(e=>e.GizmoKeepInSidebarMenuItem),{loadableGenerated:{webpack:()=>[52245]}}),F=((n={})[n.Keep=0]="Keep",n[n.Recents=1]="Recents",n);function q(e){let{data:{gizmos:t}={}}=(0,l.Wz)();return!!t&&t.some(t=>t.resource.gizmo.id===e)}function U(e){let{isActive:t,isNewConversation:r}=e,n=(0,g.NL)(),i=(0,v.Z)();return(0,G.jsx)("div",{className:"mb-5 mt-2 bg-token-sidebar-surface-primary",children:(0,G.jsx)(H,{gizmo:void 0,isActive:t,onClick:e=>{(0,f.P)((0,p.y_)(n))&&!r&&(e.preventDefault(),(0,L.Xl)(i))}})})}function V(e){let{gizmo:t,currentGizmoId:r}=e,n=(0,T.useRef)(!1),i=(0,m.tN)(),{0:s,1:o}=(0,T.useState)(!1),{itemsLeft:a,listItems:l,needsToCollapseItems:c}=function(e,t){var r,n,i,s,o,a;let l=C()(e,e=>e.flair.kind),c=[...null!==(r=null===(n=l[d.JK.FirstParty])||void 0===n?void 0:n.map(e=>{let{resource:t}=e;return{gizmo:t,section:F.Keep}}))&&void 0!==r?r:[],...null!==(i=null===(s=l[d.JK.SidebarKeep])||void 0===s?void 0:s.map(e=>{let{resource:t}=e;return{gizmo:t,section:F.Keep}}))&&void 0!==i?i:[],...null!==(o=null===(a=l[d.JK.Recent])||void 0===a?void 0:a.slice(0,2).map(e=>{let{resource:t}=e;return{gizmo:t,section:F.Recents}}))&&void 0!==o?o:[]],u=c.length>5,f=u&&!t&&c.length>4?c.slice(0,4):c;return{listItems:[...f.filter(e=>{let{section:t}=e;return t===F.Keep}),...f.filter(e=>{let{section:t}=e;return t===F.Recents})],itemsLeft:c.length-f.length,needsToCollapseItems:u}}(t,s);return(0,T.useEffect)(()=>{if(l.length>0&&!n.current){var e;null===(e=(0,j.Ef)({namespace:j.dG.ChatPageLoad}))||void 0===e||e.logTiming("render_gizmo_sidebar"),n.current=!0}},[l]),(0,G.jsxs)("div",{children:[l.map((e,t)=>{let{gizmo:n,section:i}=e;return(0,G.jsxs)(T.Fragment,{children:[t>1&&i!==l[t-1].section&&(0,G.jsx)("div",{className:"my-2 ml-2 h-px w-7 bg-token-sidebar-surface-tertiary"}),(0,G.jsx)(H,{gizmo:n,isActive:n.gizmo.id===r,section:i},n.gizmo.id)]},t)}),c?(0,G.jsxs)("button",{onClick:()=>{o(!s)},className:"flex h-10 w-full items-center gap-2 rounded-lg px-2 text-sm text-token-text-primary hover:bg-token-sidebar-surface-secondary",children:[(0,G.jsx)("div",{className:"flex h-6 w-6 flex-shrink-0 items-center justify-center",children:(0,G.jsx)(y.nWS,{className:"icon-md text-token-text-primary"})}),(0,G.jsx)("div",{className:"flex grow items-center gap-1",children:s?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(D.Z,{id:"GizmoSidebarList.showLess",defaultMessage:"See less"}),(0,G.jsx)(y.r0F,{className:"icon-xs"})]}):(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(D.Z,{id:"GizmoSidebarList.showMoreItems",defaultMessage:"{numMore} more",values:{numMore:a}}),(0,G.jsx)(y.Tg4,{className:"icon-xs"})]})})]}):null,(0,G.jsx)(A.Z,{children:(0,G.jsx)(w.E.div,{whileTap:{scale:.98},children:(0,G.jsx)(P(),{href:(0,h.cy)(),onClick:()=>{"mobile-nav"===i.activeSidebar&&m.vm.toggleActiveSidebar("mobile-nav")},children:(0,G.jsx)(B.f,{icon:y.frp,children:(0,G.jsx)(D.Z,R({},X.exploreStoreEnabled))})},"explore")})})]})}function W(e){let{currentGizmoId:t}=e,{data:{gizmos:r}={}}=(0,l.Wz)();return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(I.Z,{}),null!=r?(0,G.jsx)(V,{gizmo:r,currentGizmoId:t}):null]})}function Y(e){let{gizmo:t,isOpen:r,setIsOpen:n,section:i}=e,s=(0,g.NL)();return(0,G.jsxs)(z.d,{open:r,onOpenChange:n,triggerButton:(0,G.jsx)("button",{className:(0,k.default)("flex text-token-text-secondary hover:text-token-text-primary",r?"":"invisible group-hover:visible"),children:(0,G.jsx)(y.nWS,{className:"icon-md"})}),contentAlign:"start",sideOffset:4,alignOffset:-4,size:"auto",children:[i===F.Recents&&(0,G.jsx)(z.Z.Item,{onClick:async()=>{await c.U.updateGizmoSidebar(s,t.gizmo.id,"keep")},children:(0,G.jsx)(D.Z,R({},X.keepInSidebar))}),(0,G.jsx)(K,{gizmoResource:t})]})}function H(e){var t,r;let n;let{gizmo:i,historyDisabled:c,section:f,onClick:m}=e,h=(0,E.Z)(),{0:g,1:p}=(0,T.useState)(!1),{0:v,1:b}=(0,T.useState)(!1),x=(0,u.t)(),j=!!(null==i||null===(t=i.gizmo.tags)||void 0===t?void 0:t.includes(d.U9.FirstParty));if(null!=i)n=i.gizmo.display.name||a.zf;else{if(null==x)return null;n=c?h.formatMessage(X.clearChat):x.canInteractWithGizmos()?a.Dd:h.formatMessage({id:"GizmoSidebarListItem.newChat",defaultMessage:"New chat"})}return(0,G.jsx)(w.E.div,{whileTap:{scale:.98},onMouseEnter:()=>{b(!0)},onMouseLeave:()=>{b(!1)},children:(0,G.jsx)(Q,{loggingGizmoId:null!==(r=null==i?void 0:i.gizmo.id)&&void 0!==r?r:"primary",href:null!=i?(0,l.m_)(i):"/",onClick:m,icon:(0,G.jsx)(o.Z,{isFirstParty:null==i||j,src:null==i?void 0:i.gizmo.display.profile_picture_url,className:"h-6 w-6 flex-shrink-0"}),isMenuOpen:g,label:n,hoverRightIcon:(0,G.jsxs)("div",{className:"flex gap-2",children:[(v||g)&&null!=i&&(0,G.jsx)("div",{className:"text-token-text-tertiary",onClick:e=>{e.preventDefault()},children:(0,G.jsx)(Y,{gizmo:i,isOpen:g,setIsOpen:p,section:f})}),(0,G.jsx)(s.u,{side:"right",label:h.formatMessage(c?X.clearChat:X.newChat),className:"flex items-center",children:(0,G.jsx)("button",{className:g?"text-token-text-tertiary":"invisible text-token-text-secondary hover:text-token-text-primary group-hover:visible",children:c?(0,G.jsx)(y.Ezi,{className:"icon-md"}):(0,G.jsx)(y.bl$,{className:"icon-md"})})})]})})})}function Q(e){let{href:t,icon:r,label:n,hoverRightIcon:i,isMenuOpen:s,loggingGizmoId:o,onClick:a,target:l}=e;return(0,G.jsxs)(P(),{href:t,target:l,shallow:!0,className:(0,k.default)("group flex h-10 items-center gap-2.5 rounded-lg bg-token-sidebar-surface-primary px-2 font-normal",s?"bg-token-main-surface-primary":"hover:bg-token-sidebar-surface-secondary"),onClick:e=>{b.A.logNewChatButtonClicked({location:"Sidebar gizmo list",gizmo_id:o}),b.A.logEvent(x.M.sidebarClickGizmo,{gizmo_id:o}),null==a||a(e)},children:[r,(0,G.jsx)("div",{className:"grow overflow-hidden text-ellipsis whitespace-nowrap text-sm text-token-text-primary",children:n}),i]})}let X=(0,Z.vU)({exploreStoreEnabled:{id:"gizmo.exploreStoreEnabled",defaultMessage:"Explore GPTs"},keepInSidebar:{id:"gizmo.keepInSidebar",defaultMessage:"Keep in sidebar"},newChat:{id:"gizmo.newChat",defaultMessage:"New chat"},clearChat:{id:"gizmo.clearChat",defaultMessage:"Clear chat"}})},47762:function(e,t,r){r.d(t,{Z:function(){return j}});var n=r(13490),i=r(95033),s=r(60682),o=r(98095),a=r(40833),l=r(34643),c=r(31438),d=r(45120),u=r(19841),f=r(88600),m=r(92379),h=r(62984),g=r(42508),p=r(651);function y(){let e=(0,s.qg)(s.pm.SonicSidebar),{0:t,1:r}=(0,m.useState)(!1);return e.isLoading||!e.eligible?null:(0,p.jsx)(f.E.div,{className:"group pb-0",whileTap:{scale:.98},children:(0,p.jsx)(v,{children:(0,p.jsx)(i.xL,{href:"/search",target:"_blank",icon:(0,p.jsx)("div",{className:(0,u.default)("gizmo-shadow-stroke mr-[0.5] flex h-6 w-6 items-center justify-center rounded-full bg-token-main-surface-primary align-middle text-token-text-primary"),children:(0,p.jsx)(g.Z,{})}),label:"SearchGPT",hoverRightIcon:(0,p.jsxs)("div",{className:"flex gap-3",children:[(0,p.jsx)(b,{isOpen:t,setIsOpen:r,onDismiss:()=>e.markAsViewed()}),(0,p.jsx)(n.Pfi,{className:(0,u.default)("icon-md text-token-text-tertiary",!t&&"invisible group-hover:visible")})]}),isMenuOpen:!1,loggingGizmoId:"search-gpt-sidebar"})})})}function v(e){let{children:t}=e,r=function(){let e=(0,c.xH)(),t=(0,s.qg)(s.pm.hasSeenSncSidebarTooltip),r=(0,l.c)(),n=(0,c.ss)(),{activeModals:i}=(0,c.tN)(),o=(0,d.AH)("717266490").layer.get("optimize_initial_modals",!1);return!t.isLoading&&t.eligible&&!r&&0===i.size&&!e&&(!o||!n)}(),n=(0,s.qg)(s.pm.hasSeenSncSidebarTooltip);return r?(0,p.jsx)(a.v,{side:"right",show:!0,badge:"new",title:"Try SearchGPT",onDismiss:n.markAsViewed,sideOffset:10,theme:"bright",description:"You're in. Get answers with real-time information from relevant sources, and ask follow-up questions.",children:(0,p.jsx)("div",{className:"w-full",children:t})}):(0,p.jsx)(p.Fragment,{children:t})}function b(e){let{isOpen:t,setIsOpen:r,onDismiss:i}=e;return(0,p.jsx)(o.d,{open:t,onOpenChange:r,triggerButton:(0,p.jsx)("button",{className:(0,u.default)("flex text-token-text-tertiary",t?"":"invisible group-hover:visible"),onClick:e=>{e.preventDefault()},children:(0,p.jsx)(n.nWS,{className:"icon-md"})}),children:(0,p.jsx)(o.Z.Item,{onClick:e=>{e.preventDefault(),i()},children:(0,p.jsx)(h.Z,{id:"sidebar.hideFromSidebar",defaultMessage:"Hide from sidebar"})})})}var x=r(88667);function j(){return(0,x.sB)("114024").value?(0,p.jsx)(y,{}):null}},34643:function(e,t,r){r.d(t,{Z:function(){return v},c:function(){return y}});var n=r(98601),i=r(93951),s=r(31438),o=r(99976),a=r(61619),l=r(45120),c=r(92379),d=r(75172),u=r(62984),f=r(68306),m=r(60682),h=r(40833),g=r(651);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function y(){let{activeModals:e}=(0,s.tN)(),t=(0,i.t)(),r=(0,m.qg)(m.pm.ExploreGPTs),n=(0,m.qg)(m.pm.ExploreGPTsNewNux),d=(0,s.ss)(),u=(0,s.xH)(),f=(0,l.AH)("717266490").layer.get("optimize_initial_modals",!1),h=r.eligible&&!r.isLoading&&!u,g=n.eligible&&!n.isLoading&&!u&&(!f||!d);return e.size>0&&(g=!1),!h&&null!=t&&t.hasPlusFeatures()&&(g=!1),(0,c.useEffect)(()=>{g&&o.A.logEvent(a.M.storeDisplayNewNux)},[g]),g}function v(e){let{children:t}=e,r=y(),i=(0,d.Z)(),s=(0,m.qg)(m.pm.ExploreGPTsNewNux);return r?(0,g.jsx)(h.v,{side:"right",show:!0,title:i.formatMessage(b.exploreGPTsTitle),onDismiss:s.markAsViewed,sideOffset:20,theme:"bright",description:(0,g.jsx)(u.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},b.exploreGPTsDescriptionNewNux)),children:t}):(0,g.jsx)(g.Fragment,{children:t})}let b=(0,f.vU)({exploreGPTsTitle:{id:"gptExploreGPTs.title",defaultMessage:"Explore GPTs"},exploreGPTsDescription:{id:"gptExploreGPTs.description",defaultMessage:"Now you can discover GPTs created by the community"},exploreGPTsDescriptionNewNux:{id:"gptExploreGPTs.descriptionNewNux",defaultMessage:"Discover custom versions of ChatGPT created for specific use cases like writing, research, and coding."}})},13391:function(e,t,r){r.d(t,{n:function(){return T},A3:function(){return N},yx:function(){return z},JS:function(){return Z}});var n,i=r(98601),s=r(15858),o=r(70879),a=r(99976),l=r(61619),c=r(79746),d=r(82363),u=r(91530),f=r.n(u),m=r(92379),h=r(68306),g=r(16757),p=r(24740),y=r(92745),v=r(31438),b=r(49763),x=r(22433),j=r(45248);let k=m.useLayoutEffect;function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}let M=/```.*?\n([\s\S]+?)\n?```[^`]*$/gms;var C=((n=C||{}).Core="Core",n.Chat="Chat",n.Settings="Settings",n);let O=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach(function(t){(0,i.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({Mod:"mod",Comma:","},s.s),S={[O.Mod]:/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)?"⌘":"Ctrl",[O.Comma]:",",[O.Enter]:"⏎",[O.Escape]:"Esc",[O.ArrowUp]:"↑",[O.ArrowDown]:"↓",[O.ArrowLeft]:"←",[O.ArrowRight]:"→",[O.Backspace]:"⌫",[O.Delete]:"⌦",[O.Tab]:"⇥",[O.Control]:"Ctrl",[O.Shift]:"Shift"},N=e=>e.map(e=>{var t;return null!==(t=S[e])&&void 0!==t?t:e}),P=(0,h.vU)({newChat:{id:"keyboardActions.newChat",defaultMessage:"Open new chat"},focusPromptTextarea:{id:"keyboardActions.focusPromptTextarea",defaultMessage:"Focus chat input"},copyLastCodeBlock:{id:"keyboardActions.copyLastCodeBlock",defaultMessage:"Copy last code block"},copyLastResponse:{id:"keyboardActions.copyLastResponse",defaultMessage:"Copy last response"},toggleCustomInstructions:{id:"keyboardActions.toggleCustomInstructions",defaultMessage:"Set custom instructions"},navigationToggle:{id:"keyboardActions.navigationToggle",defaultMessage:"Toggle sidebar"},deleteChat:{id:"keyboardActions.deleteChat",defaultMessage:"Delete chat"},archiveChat:{id:"keyboardActions.archiveChat",defaultMessage:"Archive chat"},toggleKeyboardActions:{id:"keyboardActions.toggleKeyboardActions",defaultMessage:"Show shortcuts"}}),T=new b.V,D=e=>{let{resetThreadAction:t,clientThreadId:r}=e;return[{key:"newChat",action:t||f(),actionMessageDescriptor:P.newChat,group:C.Core,keyboardBinding:[O.Mod,O.Shift,"o"],altKeyboardBindings:[[O.Mod,"k"]]},{key:"focusPromptTextarea",action:o.go,actionMessageDescriptor:P.focusPromptTextarea,group:C.Chat,keyboardBinding:[O.Shift,O.Escape]},{key:"copyLastCodeBlock",action:()=>{if(null!=r){let e=y.tQ.getThreadCurrentLeafId(r),t=y.tQ.getThreadConversationTurns(r,e);for(let e=t.length-1;e>=0;e--){let{messages:r}=t[e],n=[...r.reduce((e,t)=>null==t.err&&t.message.author.role===g.uU.Assistant&&"all"===t.message.recipient?e+(e?"\n\n":"")+(0,x.RR)(t.message):e,"").matchAll(M)],i=n.length?n[n.length-1][1]:null;if(null!=i){(0,c.v)(i).then(()=>{p.m.success("Copied code block to clipboard")});break}}}},actionMessageDescriptor:P.copyLastCodeBlock,group:C.Chat,keyboardBinding:[O.Mod,O.Shift,";"],altKeyboardBindings:[[O.Mod,O.Shift,":"]]},{key:"copyLastResponse",action:()=>{null!=r&&y.tQ.copyLastMessageToClipboard(r,"keyboard").then(()=>{p.m.success("Last response copied to clipboard")})},actionMessageDescriptor:P.copyLastResponse,group:C.Chat,keyboardBinding:[O.Mod,O.Shift,"c"]},{key:"toggleCustomInstructions",action:()=>v.vm.toggleModal(v.B.UserContext),actionMessageDescriptor:P.toggleCustomInstructions,group:C.Settings,keyboardBinding:[O.Mod,O.Shift,"i"]},{key:"navigationToggle",action:()=>v.vm.toggleDesktopNavCollapsed(),actionMessageDescriptor:P.navigationToggle,group:C.Core,keyboardBinding:[O.Mod,O.Shift,"s"]},{key:"deleteChat",action:()=>{if(r){let e=y.tQ.getServerThreadId(r);e&&T.publish({kind:"deleteChat",serverThreadId:e})}},actionMessageDescriptor:P.deleteChat,group:C.Chat,keyboardBinding:[O.Mod,O.Shift,O.Backspace],altKeyboardBindings:[[O.Mod,O.Shift,O.Delete]]},{key:"toggleKeyboardActions",action:()=>v.vm.toggleModal(v.B.KeyboardActions),actionMessageDescriptor:P.toggleKeyboardActions,group:C.Settings,keyboardBinding:[O.Mod,"/"]}]},E=e=>(function(e,t,r){let n=e.map(e=>{let{keyboardBinding:t}=e,r=t.join("+");if(e.altKeyboardBindings){r=[r];let t=e.altKeyboardBindings.map(e=>e.join("+"));r=r.concat(t)}return(0,j.ZP)(r,{byKey:!0})});k(()=>{if((null==r?void 0:r.enabled)===!1)return;let i=r=>{if(!r.repeat)for(let i=0;i<n.length;i++)n[i](r)&&(void 0===e[i].enabled||e[i].enabled)&&(r.preventDefault(),t(e[i]),e[i].action())},s=e=>{void 0!==e.key&&i(e)},o=document;return o.addEventListener("keydown",s),()=>{o.removeEventListener("keydown",s)}},[e,r])})(e,e=>{a.A.logEvent(l.M.keyboardShortcut,{keyboardActionKey:e.key}),d.U.addAction("chatgpt_keyboard_shortcut",{keyboardActionKey:e.key})},{enabled:!0}),Z=function(){let{resetThreadAction:e,clientThreadId:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,m.useMemo)(()=>D({resetThreadAction:e,clientThreadId:t}).filter(e=>{let{enabled:t=!0}=e;return t}),[t,e])},z=e=>{let{resetThreadAction:t,clientThreadId:r}=e;E(Z({resetThreadAction:t,clientThreadId:r}))}},17096:function(e,t,r){r.d(t,{Z:function(){return i}});var n=r(92379);function i(){let e=(0,n.useRef)([]),t=(0,n.useRef)((t,r)=>{let n=setTimeout(t,r);return e.current.push(n),n});return(0,n.useEffect)(()=>{let t=e.current;return()=>{t.forEach(e=>{clearTimeout(e)})}},[]),t.current}}}]);
//# sourceMappingURL=9385-4ec65283b643b431.js.map