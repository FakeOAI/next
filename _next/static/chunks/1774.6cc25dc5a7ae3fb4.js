"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1774],{21774:function(e,t,s){s.r(t),s.d(t,{default:function(){return B}});var r,l,n,a,i,o,u,c=s(94521),d=s(96086),p=s(62484),g=s(66246),m=s(41141),f=s(19841),x=s(25940),h=s(26123),j=s(81080),v=s(74091),b=s(50684),y=s(72427),O=s(651);let N=(0,x.vU)({generatedImage:{id:"pluginDisplayParams.generatedImage",defaultMessage:"Generated by plugin"}});var w=((r=w||{}).WIDE="wide",r.SQUARE="square",r.TALL="tall",r);function Z(e){var t,s,r,l,n;let a;let{plugin:i,pluginMessage:o,toolMessage:u}=e;if(null!=i&&"plugin-bd1fbb6d-40f9-4159-8da9-7a8975c5793b"!==i.id)return null;let c=w.WIDE;if("text"===o.content.content_type)try{let{result:e}=function(e){for(let t of["","}",'"}',"]}",'"]}']){let s=e.trimEnd().endsWith(",")?e.trimEnd().slice(0,-1):e;try{return{result:JSON.parse(s+t),isComplete:""===t}}catch(e){}}return{result:JSON.parse(e),isComplete:!1}}(o.content.parts[0]);a=e,(null===(s=a)||void 0===s?void 0:s.image_shape)!=null&&(c=a.image_shape)}catch(e){}let d=!1;if(null!=u){if("text"===u.content.content_type){let e;try{e=JSON.parse(u.content.parts[0])}catch(e){}if((null===(r=e)||void 0===r?void 0:r.images)!=null)return(0,O.jsx)(M,{images:e.images,gridItemShape:c})}d=!0}return(null===(t=a)||void 0===t?void 0:t.prompts)!=null?(0,O.jsx)(k,{numItems:null!==(l=null===(n=a)||void 0===n?void 0:n.n)&&void 0!==l?l:Math.max(a.prompts.length,1),prompts:a.prompts,gridItemShape:c,showErrorState:d||(0,y.We)(o)}):null}function k(e){let{numItems:t,prompts:s,gridItemShape:r,showErrorState:l}=e,n=[];for(let e=0;e<t;e++){let t=s[e];n.push((0,O.jsx)(T,{className:(0,f.default)("text-sm",l&&"text-token-text-tertiary"),shape:r,bgColor:l?"medium":null==t?"dark":"light",children:(0,O.jsx)(j.default,{className:"no-scrollbar h-full",followButtonClassName:"hidden",children:(0,O.jsx)("div",{className:"flex min-h-full flex-col items-center justify-center gap-3 px-4 pb-5",children:l?(0,O.jsx)(g.ETw,{className:"icon-sm self-center text-token-text-tertiary"}):(0,O.jsx)(b.Z,{className:"h-4 w-4 self-center"})})})},e))}return(0,O.jsx)(S,{$numItems:t,children:n})}function M(e){let{images:t,gridItemShape:s}=e;return(0,O.jsx)(S,{$numItems:t.length,children:t.map((e,t)=>(0,O.jsx)(P,{imageUrl:e.url,shape:s},t))})}function T(e){let{children:t,shape:s,className:r,bgColor:l="light"}=e;return(0,O.jsxs)("div",{className:(0,f.default)("relative overflow-hidden rounded",r,s===w.WIDE&&"aspect-[7/4]",s===w.SQUARE&&"aspect-square max-w-[400px]",s===w.TALL&&"aspect-[4/7] max-w-xs"),children:[(0,O.jsx)("div",{className:(0,f.default)("pointer-events-none absolute inset-0 blur-xl","light"===l&&"bg-black/[.04]","medium"===l&&"bg-black/[.08]","dark"===l&&"bg-black/[.12]")}),t]})}function P(e){let{imageUrl:t,shape:s}=e,r=(0,h.Z)();return(0,O.jsx)(T,{shape:s,children:(0,O.jsx)("a",{href:t,target:"_blank",rel:"noreferrer",children:(0,O.jsx)("img",{src:t,alt:r.formatMessage(N.generatedImage)})})})}let S=v.Z.div(l||(l=(0,m.Z)(["grid gap-4\n",""])),e=>{let{$numItems:t}=e;return 1===t?"grid-cols-1":"grid-cols-2"});var E=s(2630),D=s(98302),C=s(72256);function I(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function U(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?I(Object(s),!0).forEach(function(t){(0,c.Z)(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):I(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}v.Z.div(n||(n=(0,m.Z)(["flex h-[18px] w-[18px] items-center justify-center rounded-[5px] bg-red-200 text-red-800"])));let _=(0,x.vU)({unapprovedTag:{id:"TagComponents.unapprovedTag",defaultMessage:"Unverified"},localhostTag:{id:"TagComponents.localhostTag",defaultMessage:"Localhost"}}),R=v.Z.div(a||(a=(0,m.Z)(["flex items-center gap-1 rounded-[5px] bg-red-200 py-0.5 px-1.5 text-xs font-semibold uppercase text-red-800"])));function J(){return(0,O.jsxs)(R,{children:[(0,O.jsx)(D.OH,{className:"h-3 w-3 stroke-[2.5]"}),(0,O.jsx)("div",{children:(0,O.jsx)(C.Z,U({},_.unapprovedTag))})]})}function W(){return(0,O.jsxs)(R,{children:[(0,O.jsx)(g.vHI,{className:"icon-xs"}),(0,O.jsx)("div",{children:(0,O.jsx)(C.Z,U({},_.localhostTag))})]})}var q=s(64424),L=s(92524),F=s(92379),A=F.memo(function(e){let{children:t,isComplete:s,expanderClosedLabel:r,expanderOpenLabel:l,resultsPreview:n,results:a,initialExpanded:i=!1,onExpand:o}=e,{0:u,1:c}=(0,F.useState)(i),d=(0,F.useCallback)(()=>{c(e=>!e),null==o||o()},[o]);return(0,O.jsxs)($,{children:[(0,O.jsxs)(H,{$complete:s,children:[(0,O.jsx)("div",{children:t}),!s&&(0,O.jsx)(b.Z,{className:(0,f.default)("shrink-0",null!=a?"ml-1":"ml-12")}),null!=a&&(0,O.jsxs)("div",{className:"ml-12 flex items-center gap-2",role:"button",onClick:d,children:[null!=l&&null!=r&&(0,O.jsx)("div",{className:"text-xs text-token-text-tertiary",children:u?l:r}),!u&&n,u?(0,O.jsx)(g.r0F,{className:"icon-sm"}):(0,O.jsx)(g.Tg4,{className:"icon-sm"})]})]}),u&&a]})});let $=v.Z.div(i||(i=(0,m.Z)(["flex flex-col items-start"]))),H=v.Z.div(o||(o=(0,m.Z)(["flex items-center text-xs bg-green-100 rounded p-3 text-gray-900 ",""])),e=>{let{$complete:t}=e;return t&&"bg-gray-100"});function Q(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function z(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(s),!0).forEach(function(t){(0,c.Z)(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Q(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}v.Z.div(u||(u=(0,m.Z)(["max-w-full overflow-x-auto mt-3 flex flex-col gap-2 rounded bg-gray-100 p-3 text-sm text-gray-800"])));var B=F.memo(function(e){let t,{clientThreadId:s,messages:r}=e,[l,n]=r,a=(0,q.i)(s),i=(0,L.Lx)(l.message.recipient),o=a.find(e=>e.namespace===(null==i?void 0:i.namespace)),u=null==o?void 0:o.manifest.name_for_human,c=(0,y.We)(l.message),d=null!=u?(0,O.jsx)("b",{children:u}):"unknown plugin",p=null!=n?(0,O.jsx)("div",{children:(0,O.jsx)(C.Z,z(z({},V.used),{},{values:{pluginName:d}}))}):c?(0,O.jsx)("div",{children:(0,O.jsx)(C.Z,z(z({},V.triedToUse),{},{values:{pluginName:d}}))}):(0,O.jsx)("div",{children:(0,O.jsx)(C.Z,z(z({},V.using),{},{values:{pluginName:d}}))});return o&&((0,E.cf)(o)?t=(0,O.jsx)(W,{}):"approved"!==o.status&&(t=(0,O.jsx)(J,{}))),(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(A,{isComplete:null!=n||c,results:(0,O.jsx)(G,{pluginName:null!=u?u:"unknown plugin",pluginMessage:l,toolMessage:n}),children:(0,O.jsxs)("div",{className:"flex items-center gap-3",children:[p,t]})}),null!=o&&(0,O.jsx)(Z,{plugin:o,pluginMessage:l.message,toolMessage:null==n?void 0:n.message})]})});function G(e){let{pluginName:t,pluginMessage:s,toolMessage:r}=e,l=(0,h.Z)(),n=(0,L.RR)(s.message),a=r?(0,L.RR)(r.message):null;try{n=JSON.stringify(JSON.parse(n),null,2),null!=a&&(a=JSON.stringify(JSON.parse(a),null,2))}catch(e){}let i=(null==r?void 0:r.message.author.name)==="plugin_service";return(0,O.jsxs)("div",{className:"my-3 flex max-w-full flex-col gap-3",children:[(0,O.jsx)(K,{title:l.formatMessage(V.requestTo,{pluginName:t}),infoTooltip:s.message.recipient,children:n}),null!=a&&(0,O.jsx)(K,{title:i?l.formatMessage(V.error):l.formatMessage(V.responseFrom,{pluginName:t}),infoTooltip:s.message.recipient,children:(0,O.jsx)("span",{className:(0,f.default)(i&&"text-red-500"),children:a})})]})}function K(e){let{title:t,infoTooltip:s,children:r}=e;return(0,O.jsx)(d.$,{title:(0,O.jsx)("span",{className:"uppercase",children:t}),headerDecoration:void 0!==s?(0,O.jsx)(p.u,{label:s,children:(0,O.jsx)(g.szr,{className:"icon-sm text-white/50"})}):void 0,shouldWrapCode:!0,className:"w-full text-xs text-white/80",children:r})}let V=(0,x.vU)({used:{id:"PluginMessage.used",defaultMessage:"Used {pluginName}"},triedToUse:{id:"PluginMessage.triedToUse",defaultMessage:"Tried to use {pluginName}"},using:{id:"PluginMessage.using",defaultMessage:"Using {pluginName}..."},requestTo:{id:"ResultsSection.requestTo",defaultMessage:"Request to {pluginName}"},responseFrom:{id:"ResultsSection.responseFrom",defaultMessage:"Response from {pluginName}"},error:{id:"ResultsSection.error",defaultMessage:"Error"}})}}]);
//# sourceMappingURL=1774.6cc25dc5a7ae3fb4.js.map