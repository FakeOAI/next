"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1014],{81014:function(e,t,n){n.d(t,{A8:function(){return d},K8:function(){return g},NK:function(){return O},Y5:function(){return $},a2:function(){return y},dN:function(){return f},k4:function(){return _},lw:function(){return p},mH:function(){return h},mO:function(){return l},pV:function(){return m},qE:function(){return q},tF:function(){return k},v5:function(){return w},zq:function(){return b}});var r=n(98601),c=n(16351),s=n(72409),u=n(82363),i=n(23047);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let l=async e=>{let{queryKey:t}=e,[n,r]=t;if(r.length<2)return[];let u=new URLSearchParams({query_fragment:r});return s.c.get(`${c.rq}/suggestions?${u.toString()}`).then(e=>e.suggestions).catch(()=>[])};async function f(e){let{threadId:t,sessionId:n,query:r,agentSettingsOverrides:i,metadata:o}=e,l=p(i),f=t?`${c.rq}/threads/${t}/turns?blocking=false`:`${c.rq}/turns?nonce=${n}`;i.emulated_location&&(o=a(a({},o),i.emulated_location));let d=new PerformanceObserver(e=>{let t=e.getEntriesByName(f,"resource");if(t.length){let e=t[0];if(e.connectEnd){let t=e.connectEnd-e.fetchStart;u.U.addAction("sonic.web.home.new_turn_connection_time",{durationMs:t})}d.disconnect()}});return d.observe({type:"resource"}),s.c.post(f,a(a({},l),{},{turn:{user_query:r},user_metadata:o}))}async function d(){return s.c.delete(`${c.rq}/threads`)}function p(e){return{settings_overrides:{search_results:{search_engines:e.use_labrador?{bing:{}}:{bing:{ranking_model:null,rrf_alpha:1,rrf_input_threshold:0},labrador:null}},model_response:{enable_multimodal:e.show_image_to_model,completion_model:e.completion_model?{model:e.completion_model,clip_model:"@mmapi",direct_connection_urls:[]}:{}}},base_config:e.base_config??i.l.SCALLION,eval_preset:e.eval_preset}}async function g(e){let{threadId:t,threadUserId:n,routePrefix:r}=e,u=c.rq;r&&(u+=r);let i=new URL(`${u}/threads/${t}/with_turns`);return n&&i.searchParams.append("thread_user_id",n),await s.c.get(i.toString())}async function _(e){let t=new FormData;return t.append("feedback",JSON.stringify({thread_id:e.threadId,turn_index:e.turnIndex,rating:e.rating,search_query:e.searchQuery,text:e.text,model_instructions:e.modelInstructions,tags:e.tags,user_email:e.userEmail})),e.screenshot&&t.append("file",new File([e.screenshot],"screenshot.jpeg",{type:"image/jpeg"})),s.c.post(`${c.rq}/feedback/turns`,t)}async function h(e,t){return s.c.post(`${c.rq}/threads/${e}/turns/${t}/images_try_hard`)}async function m(){return s.c.get(`${c.rq}/feedback/turns`)}async function y(e,t){return s.c.get(`${c.rq}/feedback/turns/${e}/${t}`)}async function b(e,t){return s.c.get(`${c.rq}/feedback/links/${e}/${t}`)}async function O(e){let t=new FormData;return e.screenshot&&t.append("file",new File([e.screenshot],"screenshot.jpeg",{type:"image/jpeg"})),t.append("feedback",JSON.stringify({thread_id:e.threadId,url:e.url,title:e.title,snippet:e.snippet,rating:e.rating,search_query:e.searchQuery,text:e.text,tags:e.tags,user_email:e.userEmail})),s.c.post(`${c.rq}/feedback/links`,t)}function $(e){let t=p(e.agentSettingsOverrides);s.c.post(`${c.rq}/prefetch`,a(a({},t),{},{turn:{user_query:e.query},user_metadata:e.metadata}))}function q(){return s.c.get(`${c.rq}/healthcheck`)}function w(){return s.c.post(`${c.rq}/waitlist`)}function k(){return s.c.delete(`${c.rq}/waitlist`)}},23047:function(e,t,n){var r;n.d(t,{l:function(){return c}});let c=((r={}).SCALLION="scallion",r.SCALLION_RC="scallion-rc",r)}}]);
//# sourceMappingURL=1014.6c59ad62b4859e6d.js.map