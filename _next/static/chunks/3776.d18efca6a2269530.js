(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3776,5674],{34598:function(e,t,r){var n=r(85036);e.exports=function(e,t){return!!(null==e?0:e.length)&&n(e,t,0)>-1}},60510:function(e){e.exports=function(e,t,r){for(var n=-1,s=null==e?0:e.length;++n<s;)if(r(t,e[n]))return!0;return!1}},85036:function(e,t,r){var n=r(83663),s=r(18826),o=r(31154);e.exports=function(e,t,r){return t==t?o(e,t,r):n(e,s,r)}},18826:function(e){e.exports=function(e){return e!=e}},18296:function(e,t,r){var n=r(25561),s=r(34598),o=r(60510),l=r(8529),i=r(33295),a=r(33005);e.exports=function(e,t,r){var c=-1,d=s,u=e.length,f=!0,m=[],p=m;if(r)f=!1,d=o;else if(u>=200){var x=t?null:i(e);if(x)return a(x);f=!1,d=l,p=new n}else p=t?[]:m;e:for(;++c<u;){var g=e[c],h=t?t(g):g;if(g=r||0!==g?g:0,f&&h==h){for(var v=p.length;v--;)if(p[v]===h)continue e;t&&p.push(h),m.push(g)}else d(p,h,r)||(p!==m&&p.push(h),m.push(g))}return m}},33295:function(e,t,r){var n=r(353),s=r(91530),o=r(33005),l=n&&1/o(new n([,-0]))[1]==1/0?function(e){return new n(e)}:s;e.exports=l},31154:function(e){e.exports=function(e,t,r){for(var n=r-1,s=e.length;++n<s;)if(e[n]===t)return n;return -1}},96594:function(e,t,r){var n=r(61757),s=r(18296);e.exports=function(e,t){return e&&e.length?s(e,n(t,2)):[]}},93776:function(e,t,r){"use strict";r.d(t,{r:function(){return L},wV:function(){return M}});var n,s=r(98601),o=r(2346),l=r(16757),i=r(97537),a=r(12128),c=r(39004),d=r(10080),u=r(73392),f=r(9026),m=r(15913),p=r(99976),x=r(61619),g=r(19841),h=r(96594),v=r.n(h),y=r(24098),k=r.n(y),w=r(92379),b=r(62984),j=r(75172),N=r(68306),C=r(15478),P=r(41619),_=r(56756),z=r(651);function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach(function(t){(0,s.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let D=C.Z.div(n||(n=(0,o.Z)(["group flex h-10 items-center gap-2 rounded-lg px-2 hover:bg-token-main-surface-secondary text-sm text-token-text-primary"])));function L(){let{data:e,isLoading:t}=(0,c.Fi)({cutId:"recent",limit:8}),{data:r,isLoading:n}=(0,c.Dq)();return{isLoading:t||n,recent:e,pinned:r}}let A=(0,w.forwardRef)(function(e,t){let{query:r,onSelectGizmo:n,selectedIdx:s}=e,o=(0,m.oc)(),l=(0,w.useRef)([]),{isLoading:a,recent:c,pinned:u}=L();(0,w.useImperativeHandle)(t,()=>({handleEnterOnIndex:e=>{if(!p[e])return e<f.length?f[e].resource:"create"},getResultsLength:()=>f.length+1,scrollToItem:e=>{let t=l.current[e];t&&t.scrollIntoView({behavior:"instant",block:"nearest"})}}));let f=[];if(a)return(0,z.jsx)("div",{className:"absolute right-4 top-0 flex h-full items-center justify-center",children:(0,z.jsx)(i.Z,{})});c&&f.push(...c.pages.flatMap(e=>e.list.items).map(e=>({resource:e.resource,from:"recent"}))),u&&f.push(...u.items.map(e=>({resource:e,from:"pinned"})));let p=(f=v()(f,e=>e.resource.gizmo.id)).map(e=>{var t;return null===(t=e.resource.gizmo.tags)||void 0===t?void 0:t.includes(d.U9.WorkspaceDisabled)});return r&&""!==r&&(f=f.filter(e=>{var t,n;return(e.resource.gizmo.display.name.toLowerCase()+(null===(t=e.resource.gizmo.display.description)||void 0===t?void 0:t.toLowerCase())+(null===(n=e.resource.gizmo.author.display_name)||void 0===n?void 0:n.toLowerCase())).includes(null==r?void 0:r.toLowerCase())})),(0,z.jsxs)("div",{className:"max-h-40 overflow-y-auto",children:[f.map((e,t)=>(0,z.jsx)("div",{ref:e=>{l.current[t]=e},tabIndex:t,onClick:()=>{p[t]||n(e.resource)},children:(0,z.jsx)(Z,{gizmoResource:e.resource,from:e.from,showDescription:o,isSelected:s===t,grayedOut:p[t]})},e.resource.gizmo.id)),(0,z.jsx)("div",{ref:e=>{l.current[f.length]=e},tabIndex:f.length,onClick:()=>{n("create")},children:(0,z.jsx)(E,{isSelected:s===f.length})},"create")]})}),E=e=>{let{isSelected:t}=e;return(0,z.jsx)(D,{className:t?"bg-token-main-surface-secondary":"",children:(0,z.jsxs)(k(),{href:"/gpts/editor",target:"_blank",className:"flex flex-row space-x-2 font-semibold",children:[(0,z.jsx)("span",{className:"self-center",children:(0,z.jsx)(P.Vz5,{className:"icon-sm"})}),(0,z.jsx)("span",{children:(0,z.jsx)(b.Z,O({},S.dropdownCreateLabel))})]})})},I=e=>{let{onClick:t,onClose:r}=e,{0:n,1:s}=(0,w.useState)(null),o=(0,w.useRef)(null),l=(0,w.useRef)(null),{0:i,1:a}=(0,w.useState)(0),c=(0,j.Z)(),d=e=>{p.A.logEvent(x.M.mentionsClickGizmo,{gizmo_id:"create"===e?"create":e.gizmo.id}),"create"!==e&&t(e)};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("input",{autoFocus:!0,placeholder:c.formatMessage(S.searchPlaceholder),ref:o,onKeyDown:e=>{var t,s,o,c,u;let f=null!==(t=null===(s=l.current)||void 0===s?void 0:s.getResultsLength())&&void 0!==t?t:0;if("Escape"!==e.key&&("Backspace"!==e.key||n)||(e.preventDefault(),r()),"Enter"===e.key||"Tab"===e.key){e.preventDefault();let t=null===(o=l.current)||void 0===o?void 0:o.handleEnterOnIndex(i);if(!t)return;"create"===t?(window.open("/gpts/editor","_blank"),r()):d(t)}if("ArrowDown"===e.key&&i<f-1){e.preventDefault();let t=i+1;null===(c=l.current)||void 0===c||c.scrollToItem(t),a(t)}if("ArrowUp"===e.key&&i>0){e.preventDefault();let t=i-1;null===(u=l.current)||void 0===u||u.scrollToItem(t),a(t)}},onChange:e=>{s(e.target.value),a(0)},className:"w-full border-0 bg-token-main-surface-primary p-2 text-sm focus:outline-none"}),(0,z.jsx)(A,{ref:l,query:n,selectedIdx:i,onSelectGizmo:d})]})};function Z(e){var t;let{gizmoResource:r,from:n,showDescription:s,isSelected:o,grayedOut:l}=e,i=!!(null===(t=r.gizmo.tags)||void 0===t?void 0:t.includes(d.U9.FirstParty));return(0,z.jsxs)(D,{className:(0,g.default)(o?"bg-token-main-surface-secondary":"",l&&"opacity-50"),children:[(0,z.jsx)(a.Z,{isFirstParty:i,src:r.gizmo.display.profile_picture_url,className:(0,g.default)("icon-xl h-7 w-7 flex-shrink-0",l&&"grayscale group-hover:grayscale-0")}),(0,z.jsxs)("div",{className:"flex h-fit grow flex-row justify-between space-x-2 overflow-hidden text-ellipsis whitespace-nowrap",children:[(0,z.jsxs)("div",{className:"flex flex-row space-x-2",children:[(0,z.jsx)("span",{className:"shrink-0 truncate font-semibold",children:r.gizmo.display.name}),s&&(0,z.jsx)("span",{className:"flex-grow truncate text-sm text-token-text-tertiary sm:max-w-xs lg:max-w-md",children:r.gizmo.display.description})]}),(0,z.jsx)("span",{className:"shrink-0 self-center",children:"recent"===n?(0,z.jsx)(P.T39,{className:"icon-sm"}):(0,z.jsx)(P.qQX,{className:"icon-sm"})})]})]})}function M(e){var t;let{gizmoResource:r,onRemove:n}=e,s=!!(null===(t=r.gizmo.tags)||void 0===t?void 0:t.includes(d.U9.FirstParty));return(0,z.jsxs)("div",{className:"flex w-full flex-row items-center rounded-t-2xl bg-token-main-surface-secondary px-2 py-1",children:[(0,z.jsxs)("div",{className:(0,g.default)("group flex h-10 items-center gap-2 rounded-lg px-2 font-semibold"),children:[(0,z.jsx)(a.Z,{isFirstParty:s,src:r.gizmo.display.profile_picture_url,className:"h-6 w-6 flex-shrink-0"}),(0,z.jsxs)("div",{className:"space-x-2 overflow-hidden text-ellipsis text-sm text-token-text-tertiary",children:[(0,z.jsx)(b.Z,O({},S.talkingTo))," ",(0,z.jsx)("span",{className:"font-semibold text-token-text-secondary",children:r.gizmo.display.name})]})]}),n&&(0,z.jsx)("button",{className:"absolute right-4 text-sm font-bold",onClick:n,children:(0,z.jsx)(P.tPq,{className:"icon-md text-token-text-secondary hover:text-token-text-primary"})})]})}let S=(0,N.vU)({talkingTo:{id:"TaggingDropdown.talkingTo",defaultMessage:"Talking to"},dropdownCreateLabel:{id:"TaggingDropdown.dropdownCreateLabel",defaultMessage:"Create a GPT"},searchPlaceholder:{id:"TaggingDropdown.searchPlaceholder",defaultMessage:"Search recent and pinned GPTs"}});t.ZP=e=>{let{onClick:t,onClose:r}=e,n=(0,f.b0)(),s=!!n;return((0,u.n)(()=>{p.A.logEvent(x.M.mentionsOpened,{gizmo_selector_disabled:s})}),s)?(0,z.jsx)(_.W,{clientThreadId:l.Zq,rateLimitInfo:n}):(0,z.jsx)("div",{onBlur:e=>{e.currentTarget.contains(e.relatedTarget)||r()},className:"popover rounded-2xl border border-token-border-light bg-token-main-surface-primary p-2 shadow-lg",children:(0,z.jsx)(I,{onClick:t,onClose:r})})}},69338:function(e,t,r){"use strict";r.d(t,{j:function(){return i}});var n=r(19841),s=r(11550),o=r(30115),l=r(651);let i=e=>{let{onDismiss:t,title:r,content:i,onPrimaryCtaClick:a,primaryCtaText:c,onSecondaryCtaClick:d,secondaryCtaText:u,isElevated:f=!0}=e;return(0,l.jsxs)("div",{className:(0,n.default)("flex w-full items-start gap-4 rounded-2xl border border-token-border-light bg-token-main-surface-primary py-4 pl-5 pr-3 text-sm text-token-text-primary [text-wrap:pretty] dark:border-transparent dark:bg-token-main-surface-secondary md:items-center lg:mx-auto",f&&"shadow-xxs"),children:[(0,l.jsxs)("div",{className:"mt-1.5 flex grow flex-col items-start gap-4 md:mt-0 md:flex-row md:items-center md:justify-between md:gap-8",children:[(0,l.jsxs)("div",{className:"flex max-w-none flex-col",children:[r&&(0,l.jsx)("div",{className:(0,n.default)("font-bold text-token-text-primary"),children:r}),(0,l.jsx)("div",{className:(0,n.default)(r?"text-token-text-secondary":""),children:i})]}),(c||u)&&(0,l.jsxs)("div",{className:"flex shrink-0 gap-2 pb-1 md:pb-0",children:[u&&(0,l.jsx)(s.z,{onClick:d,color:"secondary",className:"shrink-0",children:u}),c&&(0,l.jsx)(s.z,{onClick:a,color:"primary",className:"shrink-0",children:c})]})]}),(0,l.jsx)("div",{className:"flex shrink-0 items-center gap-2",children:!!t&&(0,l.jsx)(o.P,{onClick:t})})]})}},56756:function(e,t,r){"use strict";r.d(t,{W:function(){return h}});var n=r(16757),s=r(89857),o=r(75172),l=r(69338),i=r(651);let a=e=>{var t,r,n,s,a,c;let{actions:d,title:u,description:f,onDismiss:m}=e,p=(0,o.Z)(),x=null!=d&&null!==(t=d.primaryAction)&&void 0!==t&&t.text?p.formatMessage(d.primaryAction.text):void 0,g=null!=d&&null!==(r=d.secondaryAction)&&void 0!==r&&r.text?p.formatMessage(d.secondaryAction.text):void 0;return(0,i.jsx)(l.j,{title:u,content:f,onDismiss:m,primaryCtaText:x,onPrimaryCtaClick:null!==(n=null==d||null===(s=d.primaryAction)||void 0===s?void 0:s.onClick)&&void 0!==n?n:void 0,secondaryCtaText:g,onSecondaryCtaClick:null!==(a=null==d||null===(c=d.secondaryAction)||void 0===c?void 0:c.onClick)&&void 0!==a?a:void 0,isElevated:!0})};var c=r(73392),d=r(93951),u=r(9026),f=r(92745),m=r(66290),p=r(99976),x=r(68306),g=r(67437);let h=e=>{var t;let{clientThreadId:r,rateLimitInfo:o,onDismiss:l}=e,{name:x,title:h,call_to_action:y,description:k}=o,w=(0,d.t)(),b=(0,g.fm)(!0),j=(0,u.zd)(),N=(0,f.Ao)(r),C=null!==(t=null==w?void 0:w.planType)&&void 0!==t?t:"unknown",P=j&&"block_reason"in j?j.block_reason:null,_="banner_description",z={type:x||"unknown",location:_,plan_type:C,is_new_conversation:N,is_hard_block:!!j,hard_block_reason:null!=P?P:""},T=(0,m.Z)(),O=e=>{switch(e){case n.Pt.GET_PLUS:return{text:v.getPlusButton,onClick:()=>{p.A.logRateLimitGetPlusButtonClicked(z),(0,s.MG)(T,"Prompt textarea rate limit banner")}};case n.Pt.NEW_CHAT:return{text:v.newChatButton,onClick:()=>{b({modelId:"",location:_})}}}};(0,c.n)(()=>{p.A.logRateLimitBannerShown(z)});let[D,L]=null!=y?y:[],A={primaryAction:O(D),secondaryAction:O(L)};return(0,i.jsx)(a,{onDismiss:l,title:h,description:k,actions:A})},v=(0,x.vU)({getPlusButton:{id:"TeyLcp",defaultMessage:"Get Plus"},newChatButton:{id:"7OvnJ5",defaultMessage:"New chat"}})},73392:function(e,t,r){"use strict";r.d(t,{n:function(){return s}});var n=r(92379);let s=e=>{(0,n.useEffect)(e,[])}}}]);
//# sourceMappingURL=3776.d18efca6a2269530.js.map