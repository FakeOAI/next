(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8115,8939],{42508:function(e,t,r){"use strict";var n=r(92379);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}t.Z=e=>n.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",width:14,height:14,fill:"none",viewBox:"0 0 14 14"},e),n.createElement("path",{stroke:"currentColor",strokeWidth:1.2,d:"m10.67 9.087 2.252-6.347c.367-1.033-.63-2.03-1.662-1.662L4.913 3.33A2.6 2.6 0 0 0 3.33 4.913L1.078 11.26c-.367 1.033.63 2.03 1.662 1.662l6.347-2.251a2.6 2.6 0 0 0 1.584-1.584Z",style:{stroke:"currentColor",strokeOpacity:1}}),n.createElement("path",{stroke:"currentColor",d:"M7 8.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z",style:{stroke:"currentColor",strokeOpacity:1}}))},18939:function(e){e.exports=function(e){for(var t=-1,r=null==e?0:e.length,n=0,s=[];++t<r;){var a=e[t];a&&(s[n++]=a)}return s}},68039:function(e,t,r){var n=r(790),s=r(65064),a=r(43735),o=r(2428),i=r(71701),l=r(7757),c=r(92403),d=r(56868),u=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(i(e)&&(o(e)||"string"==typeof e||"function"==typeof e.splice||l(e)||d(e)||a(e)))return!e.length;var t=s(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(c(e))return!n(e).length;for(var r in e)if(u.call(e,r))return!1;return!0}},7979:function(e,t,r){"use strict";r.d(t,{p:function(){return h}});var n=r(15913),s=r(11941),a=r.n(s),o=r(30929),i=r.n(o),l=r(2928),c=r.n(l),d=r(97024),u=r.n(d),m={content:["./pages/**/*.{js,ts,jsx,tsx}","./src/**/*.{js,jsx,ts,tsx}"],plugins:[r(80793),r(57259),r(19953),r(69572),u()(function(e){let{addVariant:t}=e;t("group-ui-open",['&.group[data-headlessui-state~="open"]','.group:where([data-headlessui-state~="open"]) &']),t("can-hover","@media (hover: hover) and (pointer: fine)")})],darkMode:"class",theme:{fontFamily:{serif:["ui-serif","Georgia","Cambria","Times New Roman","serif"],sans:["ui-sans-serif","-apple-system","system-ui","Segoe UI","Helvetica","Apple Color Emoji","Arial","sans-serif","Segoe UI Emoji","Segoe UI Symbol"],circle:["Circle","system-ui","sans-serif"],mono:["ui-monospace","SFMono-Regular","SF Mono","Menlo","Consolas","Liberation Mono","monospace"]},colors:{transparent:"transparent",current:"currentColor",black:c().black,white:c().white,brand:{green:{DEFAULT:"#19c37d",800:"#05A746"},purple:{DEFAULT:"#ab68ff",600:"#715FDE",700:"#6353C3",800:"#5400DE"},blue:{800:"#0066DE"}},blue:{50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#7989FF",400:"#3A88FF",500:"#4559A4",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a",950:"#172554",selection:"#007AFF"},gray:{50:"#F9F9F9",100:"#ECECEC",200:"#E3E3E3",300:"#CDCDCD",400:"#B4B4B4",500:"#9B9B9B",600:"#676767",700:"#424242",750:"#2f2f2f",800:"#212121",900:"#171717",950:"#0D0D0D"},orange:{100:"#FEF1E3",300:"#FFA045",400:"#FF6000",500:"#E06C2B",600:"#F46C21",800:"#A3400A"},green:{50:"#ebfaeb",100:"#d2f4d3",200:"#b9eebc",300:"#93e69c",400:"#68de7a",500:"#19c37d",600:"#10a37f",700:"#1a7f64",800:"#1b5d4a",900:"#183d31",950:"#052e16"},yellow:{50:"#fefce8",100:"#fef9c3",200:"#FAE69E",300:"#FFF3C9",400:"#FFC657",500:"#eab308",600:"#ca8a04",700:"#a16207",800:"#854d0e",900:"#927201",950:"#422006"},red:c().red,token:{"text-primary":"var(--text-primary)","text-secondary":"var(--text-secondary)","text-tertiary":"var(--text-tertiary)","text-quaternary":"var(--text-quaternary)","text-error":"var(--text-error)","surface-error":"rgb(var(--surface-error) / <alpha-value>)","border-light":"var(--border-light)","border-medium":"var(--border-medium)","border-heavy":"var(--border-heavy)","border-xheavy":"var(--border-xheavy)",link:"var(--link)","link-hover":"var(--link-hover)","main-surface-primary":"var(--main-surface-primary)","main-surface-secondary":"var(--main-surface-secondary)","main-surface-tertiary":"var(--main-surface-tertiary)","sidebar-surface-primary":"var(--sidebar-surface-primary)","sidebar-surface-secondary":"var(--sidebar-surface-secondary)","sidebar-surface-tertiary":"var(--sidebar-surface-tertiary)"}},extend:{spacing:{"snc-1":"var(--snc-1)","snc-2":"var(--snc-2)","snc-3":"var(--snc-3)","snc-input-height":"var(--snc-input-height)","snc-results-padding":"var(--snc-results-padding)"},animation:{blinkOnce:"blinkOnce 0.5s",slideDownAndFade:"slideDownAndFade 200ms cubic-bezier(0.16, 1, 0.3, 1)",slideLeftAndFade:"slideLeftAndFade 200ms cubic-bezier(0.16, 1, 0.3, 1)",slideUpAndFade:"slideUpAndFade 200ms cubic-bezier(0.16, 1, 0.3, 1)",slideRightAndFade:"slideRightAndFade 200ms cubic-bezier(0.16, 1, 0.3, 1)",slideDownAndFadeLong:"slideDownAndFade 800ms cubic-bezier(0.16, 1, 0.3, 1)",show:"show 100ms cubic-bezier(0.16, 1, 0.3, 1)",contentShow:"contentShow 150ms cubic-bezier(0.16, 1, 0.3, 1)",alertShow:"alertShow 150ms cubic-bezier(0.16, 1, 0.3, 1)",sidebarShow:"sidebarShow 300ms cubic-bezier(0.16, 1, 0.3, 1)",sidebarHide:"sidebarHide 300ms cubic-bezier(0.16, 1, 0.3, 1)"},boxShadow:{xxs:"0 0 2px 0 rgba(0,0,0,0.05), 0 4px 6px 0 rgba(0,0,0,0.02)",xs:"0 0 15px rgba(0, 0, 0, 0.10)"},keyframes:{blinkOnce:{"0%":{opacity:"1"},"50%":{opacity:"0"},"100%":{opacity:"1"}},slideDownAndFade:{from:{opacity:"0",transform:"translateY(-1px)"},to:{opacity:"1",transform:"translateY(0)"}},slideLeftAndFade:{from:{opacity:"0",transform:"translateX(1px)"},to:{opacity:"1",transform:"translateX(0)"}},slideUpAndFade:{from:{opacity:"0",transform:"translateY(1px)"},to:{opacity:"1",transform:"translateY(0)"}},slideRightAndFade:{from:{opacity:"0",transform:"translateX(-1px)"},to:{opacity:"1",transform:"translateX(0)"}},show:{from:{opacity:"0"},to:{opacity:"1"}},contentShow:{from:{opacity:"0",transform:"scale(0.96)"},to:{opacity:"1",transform:"scale(1)"}},alertShow:{from:{opacity:"0",transform:"translate(-50%, -48%) scale(0.96)"},to:{opacity:"1",transform:"translate(-50%, -50%) scale(1)"}},sidebarShow:{from:{opacity:"0",transform:"translateX(-100%)"},to:{opacity:"1",transform:"translateX(0)"}},sidebarHide:{from:{opacity:"1",transform:"translateX(0)"},to:{opacity:"0",transform:"translateX(-100%)"}}},transitionProperty:{width:"width"},maxWidth:{100:"25rem","2xs":"240px"},typography:{DEFAULT:{css:{blockquote:{"font-style":"normal"},pre:{backgroundColor:"transparent",color:"currentColor",margin:0,padding:0},"--tw-prose-body":"var(--text-primary)","--tw-prose-invert-body":"var(--text-primary)","--tw-prose-headings":"var(--text-primary)","--tw-prose-invert-headings":"var(--text-primary)","--tw-prose-lead":"var(--text-primary)","--tw-prose-invert-lead":"var(--text-primary)","--tw-prose-links":"var(--text-primary)","--tw-prose-invert-links":"var(--text-primary)","--tw-prose-bold":"var(--text-primary)","--tw-prose-invert-bold":"var(--text-primary)","--tw-prose-bullets":"var(--text-primary)","--tw-prose-invert-bullets":"var(--text-primary)","--tw-prose-counters":"var(--text-primary)","--tw-prose-invert-counters":"var(--text-primary)","--tw-prose-quotes":"var(--text-primary)","--tw-prose-invert-quotes":"var(--text-primary)","--tw-prose-hr":"var(--border-xheavy)","--tw-prose-invert-hr":"var(--border-xheavy)","--tw-prose-captions":"var(--text-secondary)","--tw-prose-invert-captions":"var(--text-secondary)","--tw-prose-code":"var(--text-primary)","--tw-prose-invert-code":"var(--text-primary)"}}},backgroundImage:{"vert-light-gradient":"linear-gradient(180deg, rgba(255, 255, 255, 0) 13.94%, #FFFFFF 54.73%)","vert-dark-gradient":"linear-gradient(180deg, rgba(53, 55, 64, 0) 0%, #353740 58.85%)"},screens:{xs:"480px"}}},future:{hoverOnlyWhenSupported:!0}},p=r(651);function h(e){let{title:t}=e,r=(0,n.Gv)(),s=i()(m).theme.colors.gray["950"];return(0,p.jsxs)(a(),{children:[(0,p.jsx)("link",{rel:"apple-touch-icon",sizes:"180x180",href:"https://cdn.oaistatic.com/_next/static/media/favicon-180x180.64673641.png"}),(0,p.jsx)("link",{rel:"icon",type:"image/png",sizes:"64x64",href:"https://cdn.oaistatic.com/_next/static/media/favicon-64x64.338c51a1.png"}),(0,p.jsx)("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"https://cdn.oaistatic.com/_next/static/media/favicon-32x32.87dd456a.png"}),(0,p.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"https://cdn.oaistatic.com/_next/static/media/favicon-16x16.b3216a31.png"}),(0,p.jsx)("link",{rel:"manifest",href:"/manifest-search.json"}),(0,p.jsx)("link",{rel:"preconnect",href:"https://cdn.oaistatic.com"}),(0,p.jsx)("title",{children:t}),(0,p.jsx)("meta",{name:"title",content:"SearchGPT: Get fast answers with clear and relevant sources"}),(0,p.jsx)("meta",{property:"og:description",content:"A prototype of new search features that give you fast answers with clear and relevant sources."}),(0,p.jsx)("meta",{name:"description",content:"SearchGPT is a prototype of new search features designed to use the strength of OpenAI's AI models to give you fast answers with clear, relevant sources."}),(0,p.jsx)("meta",{name:"keywords",content:"ai search,ai,search gpt,search gbt,search gpt login,search gpt website,search gpt,search gtp,search openai,searchai,searchbot gpt,searchg,searchgpt login,searchgpt,gpt search,open ai,openai search,openai searchgpt"}),(0,p.jsx)("meta",{name:"robots",content:"index, follow"}),(0,p.jsx)("meta",{httpEquiv:"Content-Type",content:"text/html; charset=utf-8"}),(0,p.jsx)("meta",{property:"og:title",content:"SearchGPT"},"og:title"),(0,p.jsx)("meta",{property:"og:url",content:"https://chatgpt.com"},"og:url"),(0,p.jsx)("link",{rel:"search",type:"application/opensearchdescription+xml",href:"https://chatgpt.com/opensearch-searchgpt.xml",title:"SearchGPT"}),(0,p.jsx)("meta",{name:"apple-mobile-web-app-status-bar-style",content:"default"}),(0,n.e2)()&&r?(0,p.jsx)("meta",{name:"theme-color",content:s},"theme-color"):(0,p.jsx)("meta",{name:"theme-color",content:"white"},"theme-color")]})}},28777:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return td}});var n,s,a=r(98601),o=r(79930),i=r(93951),l=r(92379),c=r(62984),d=r(74250),u=r(95204),m=r(651);function p(e){let{reason:t}=e,r=(0,i.t)();return(0,l.useEffect)(()=>{o.Y.logEvent(o.M.blockedPageShown)},[]),(0,m.jsxs)("div",{className:"flex min-h-screen w-full justify-center bg-token-main-surface-primary",children:[(0,m.jsx)(d.WU,{hideReadyState:!0}),(0,m.jsxs)("div",{className:"m-auto flex max-w-2xl flex-col items-center space-y-2 pb-20 pt-20 text-token-text-tertiary",children:[(0,m.jsx)(u.Z,{className:"h-10 w-10"}),(0,m.jsxs)("p",{className:"font-semibold",children:["region"===t&&(0,m.jsx)(c.Z,{id:"SLU4OU",defaultMessage:"SearchGPT is not currently available in your country."}),"enterprise"===t&&(0,m.jsx)(c.Z,{id:"8pSa5H",defaultMessage:"SearchGPT is not currently available for Enterprise or Team accounts."})]})]}),(null==r?void 0:r.id)&&(0,m.jsx)(d.rm,{})]})}var h=r(91111),f=r(25162),x=r(13490),g=r(60682),v=r(2721),b=r(97193);let y=e=>{let{onClose:t}=e;return(0,l.useEffect)(()=>{o.Y.logEvent(o.M.welcomePageShown)},[]),(0,m.jsxs)("div",{className:"flex min-h-screen w-full bg-token-main-surface-primary",children:[(0,m.jsx)("div",{className:"flex w-full justify-center",children:(0,m.jsxs)("div",{className:"m-auto max-w-2xl pb-20 pt-20",children:[(0,m.jsxs)("div",{className:"mb-10 border-b-[0.5px] border-token-border-medium pb-5",children:[(0,m.jsxs)("div",{className:"flex flex-col items-center justify-center gap-5",children:[(0,m.jsx)(f.nI,{className:"h-10 w-10"}),(0,m.jsx)("h1",{className:"pb-3 text-xl font-semibold sm:text-2xl",children:"SearchGPT Terms & Conditions"})]}),(0,m.jsx)("div",{className:"flex justify-center",children:(0,m.jsxs)("div",{className:"max-w-[90%] pb-6 text-center sm:text-base md:max-w-[80%]",children:["SearchGPT is offered on a preview basis under OpenAI's"," ",(0,m.jsx)("a",{className:"text-token-link hover:underline",target:"_blank",href:"https://openai.com/policies/service-terms",children:"service terms"})," ","and governed by our"," ",(0,m.jsx)("a",{className:"text-token-link hover:underline",target:"_blank",href:"https://openai.com/policies/terms-of-use",children:"terms of use"}),", as well as these additional terms:"]})})]}),(0,m.jsxs)("div",{className:"flex flex-col gap-8 px-5 md:px-0",children:[(0,m.jsx)(w,{icon:(0,m.jsx)(x.vHI,{className:"icon-lg"}),title:"Work in Progress",description:(0,m.jsx)("p",{children:"SearchGPT is constantly changing and improving, and it may make mistakes or be unavailable at times."})}),(0,m.jsx)(w,{icon:(0,m.jsx)(x.s5y,{className:"icon-lg"}),title:"Information Sharing",description:(0,m.jsxs)("p",{children:["To search and answer your questions, SearchGPT may share de-identified search queries with third-party search providers. For more information, see our"," ",(0,m.jsx)("a",{className:"text-token-link hover:underline",target:"_blank",href:"https://openai.com/policies/privacy-policy",children:"Privacy Policy"}),"."]})}),(0,m.jsx)(w,{icon:(0,m.jsx)(x.tEx,{className:"icon-lg"}),title:"Location",description:(0,m.jsx)("p",{children:"We collect and share general location information with third-party search providers to improve the accuracy of your results. You can choose to share more precise location information to help give the best results by updating your controls in the settings menu."})}),(0,m.jsx)(w,{icon:(0,m.jsx)(x.gXg,{className:"icon-lg"}),title:"Improving Our Search Services",description:(0,m.jsx)("p",{children:"SearchGPT conversations may be reviewed and used to improve our search functionality. You can adjust your preferences for improving our services in the settings menu. Any changes will carry over between ChatGPT and SearchGPT."})}),(0,m.jsx)(w,{icon:(0,m.jsx)(x.Yv9,{className:"icon-lg"}),title:"Account History",description:(0,m.jsx)("p",{children:"Your SearchGPT search history is separate from your ChatGPT chat history. If you wish to delete either history, you must do so separately in each service."})})]}),(0,m.jsx)("div",{className:"mt-16 flex",children:(0,m.jsxs)("div",{role:"button",className:"m-auto flex items-center justify-center space-x-2 rounded-full bg-token-text-primary py-3 pl-10 pr-8 font-semibold text-token-main-surface-primary hover:opacity-85",onClick:t,children:[(0,m.jsx)("p",{children:"Accept & Continue"}),(0,m.jsx)("span",{children:(0,m.jsx)(x.LZ3,{className:"icon-md-heavy"})})]})})]})}),(0,m.jsx)(d.z0,{})]})};function w(e){let{icon:t,title:r,description:n}=e;return(0,m.jsxs)("div",{className:"flex gap-4 sm:text-base",children:[(0,m.jsx)("div",{className:"pt-[2px]",children:t}),(0,m.jsxs)("div",{className:"flex flex-col",children:[(0,m.jsx)("div",{className:"font-semibold text-token-text-primary",children:r}),(0,m.jsx)("div",{className:"text-token-text-secondary",children:n})]})]})}var j=r(24740),S=r(38724),k=r(84760),_=r(25009),E=r(65012),N=r(82363),T=r(27393),P=r(88600),C=r(68039),F=r.n(C),O=r(38482),L=r.n(O),A=r(34977),q=r(91981),I=r(15913),M=r(21389),W=r(19841),R=r(37088),D=r(58517),U=r(82845),z=function(e){var t=l.useRef(e);return(0,U.Z)(function(){t.current=e}),t},H=function(e,t){if("function"==typeof e){e(t);return}e.current=t},G=function(e,t){var r=(0,l.useRef)();return(0,l.useCallback)(function(n){e.current=n,r.current&&H(r.current,null),r.current=t,t&&H(t,n)},[t])},Q={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Z=function(e){Object.keys(Q).forEach(function(t){e.style.setProperty(t,Q[t],"important")})},B=null,V=function(e,t){var r=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?r+t.borderSize:r-t.paddingSize},Y=function(){},K=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],X=!!document.documentElement.currentStyle,J=function(e){var t=window.getComputedStyle(e);if(null===t)return null;var r=K.reduce(function(e,r){return e[r]=t[r],e},{}),n=r.boxSizing;if(""===n)return null;X&&"border-box"===n&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),a=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:a}};function $(e,t,r){var n=z(r);l.useLayoutEffect(function(){var r=function(e){return n.current(e)};if(e)return e.addEventListener(t,r),function(){return e.removeEventListener(t,r)}},[])}var ee=function(e){$(window,"resize",e)},et=function(e){$(document.fonts,"loadingdone",e)},er=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],en=l.forwardRef(function(e,t){var r=e.cacheMeasurements,n=e.maxRows,s=e.minRows,a=e.onChange,o=void 0===a?Y:a,i=e.onHeightChange,c=void 0===i?Y:i,d=(0,D.Z)(e,er),u=void 0!==d.value,m=l.useRef(null),p=G(m,t),h=l.useRef(0),f=l.useRef(),x=function(){var e,t,a,o,i,l,d,u,p,x,g,v=m.current,b=r&&f.current?f.current:J(v);if(b){f.current=b;var y=(e=v.value||v.placeholder||"x",void 0===(t=s)&&(t=1),void 0===(a=n)&&(a=1/0),B||((B=document.createElement("textarea")).setAttribute("tabindex","-1"),B.setAttribute("aria-hidden","true"),Z(B)),null===B.parentNode&&document.body.appendChild(B),o=b.paddingSize,i=b.borderSize,d=(l=b.sizingStyle).boxSizing,Object.keys(l).forEach(function(e){B.style[e]=l[e]}),Z(B),B.value=e,u=V(B,b),B.value=e,u=V(B,b),B.value="x",x=(p=B.scrollHeight-o)*t,"border-box"===d&&(x=x+o+i),u=Math.max(x,u),g=p*a,"border-box"===d&&(g=g+o+i),[u=Math.min(g,u),p]),w=y[0],j=y[1];h.current!==w&&(h.current=w,v.style.setProperty("height",w+"px","important"),c(w,{rowHeight:j}))}};return l.useLayoutEffect(x),ee(x),et(x),l.createElement("textarea",(0,R.Z)({},d,{onChange:function(e){u||x(),o(e)},ref:p}))}),es=r(26925),ea=r(712);function eo(e){let{onSubmitSearch:t,submitButtonTextClassName:r,className:n}=e,s=es.ne.useStore(),{0:a,1:o}=(0,l.useState)(()=>es.ne.selectQueryInput(s.getState())),i=a.trim().length>0;function c(){i&&(t(a),s.setState({queryInput:a,shouldShowComposer:!1}))}let d=(0,l.useRef)(null);(0,l.useEffect)(()=>{let e=d.current;null==e||e.focus(),null==e||e.setSelectionRange(0,e.value.length)},[]);let u=(0,ea.o)({query:a}),p=a.length>0?u.find(e=>e.length>a.length&&e.startsWith(a)):void 0;return(0,m.jsx)("div",{className:(0,W.default)("overflow-hidden rounded-2xl p-6",n),onClick:e=>{if(e.target instanceof Element&&"TEXTAREA"!==e.target.tagName&&"BUTTON"!==e.target.tagName){var t;null===(t=d.current)||void 0===t||t.focus()}},children:(0,m.jsxs)("div",{className:"flex gap-3",children:[(0,m.jsx)(x.W1M,{className:"icon-lg relative top-[0.125rem] shrink-0 self-start text-token-text-primary"}),(0,m.jsxs)("div",{className:"relative grow",children:[null!=p&&(0,m.jsx)("div",{className:"absolute inset-0 text-lg text-token-text-tertiary",children:p}),(0,m.jsx)(en,{value:a,minRows:4,maxRows:10,placeholder:"What are you looking for?",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),c()),"Escape"===e.key&&s.setState({shouldShowComposer:!1}),"Tab"===e.key&&null!=p&&(e.preventDefault(),o(p))},style:{height:void 0},onChange:e=>{o(e.target.value)},ref:d,className:"relative block w-full resize-none border-none bg-transparent p-0 text-lg text-token-text-primary"})]}),(0,m.jsx)("button",{onClick:c,disabled:!i,className:(0,W.default)("shrink-0 self-end rounded-lg bg-black p-1.5 transition disabled:bg-token-text-quaternary dark:bg-white disabled:dark:bg-token-text-tertiary",r),children:(0,m.jsx)(x.LZ3,{className:"icon-lg"})})]})})}var ei=r(61097),el=r(2346),ec=r(71522),ed=r(30115),eu=r(17096),em=r(71867),ep=r(86336),eh=r(66472),ef=r(39882),ex=r(41843),eg=r(74371),ev=r(15478),eb=r(9033),ey=r(65787),ew=r(21338);function ej(e){let{onTypeaheadOpenChange:t,onFocus:r}=e,n=(0,l.useRef)(""),{0:s,1:a}=(0,l.useState)(!1),o=es.ne.useState(es.ne.selectQueryInput),i=es.ne.useStore();(0,l.useEffect)(()=>{N.U.addTiming("sonic.web.home.consolePrimarySearchInput.mounted")},[]);let{0:c,1:d}=(0,l.useState)(null),{submitSearch:u}=(0,h.A)(),p=(0,ea.o)({query:n.current});(0,l.useEffect)(()=>{0===p.length&&d(null),a(p.length>0)},[p]),(0,l.useEffect)(()=>{null==t||t(s)},[s,t]);let f=e=>{i.setQueryInput(e),u(e)},g=e=>{let{value:t,delta:r,shouldUpdateQuery:s=!0}=e;if(void 0===t&&void 0===r)throw Error("changeSelectedIndex requires either value or delta");let a=null;void 0!==r?null==c?a=-1===r?p.length-1:0:((a=c+r)<0||a>=p.length)&&(a=null):void 0!==t&&(a=t),d(a),s&&(null==a?i.setQueryInput(n.current):i.setQueryInput(p[a]))};return(0,m.jsxs)("div",{className:"relative sm:hidden",children:[(0,m.jsx)("div",{className:"relative h-snc-3",children:(0,m.jsx)(ew.I,{className:"w-full",value:o,placeholder:"Search",leftIcon:(0,m.jsx)(x.W1M,{className:"icon-md-heavy"}),submitButtonIcon:(0,m.jsx)(x.WmV,{className:"icon-lg-heavy rotate-90"}),onKeyDown:e=>{s&&("ArrowUp"===e.key?(e.preventDefault(),g({delta:-1})):"ArrowDown"===e.key?(e.preventDefault(),g({delta:1})):"Escape"===e.key&&a(!1))},onChange:e=>{i.setQueryInput(e),n.current=e},onSubmit:e=>u(e),onFocus:r,autoFocus:!0})}),s&&(0,m.jsx)("div",{className:"absolute left-0 right-0 top-full mt-[14px]",onMouseLeave:()=>g({value:null,shouldUpdateQuery:!1}),children:p.map((e,t)=>(0,m.jsx)(eS,{typeahead:e,typedQuery:n.current,onHover:()=>g({value:t,shouldUpdateQuery:!1}),onSubmit:f,isSelected:t===c},t))})]})}function eS(e){let{typeahead:t,typedQuery:r,onHover:n,onSubmit:s,isSelected:a}=e,o=t.startsWith(r),i=o?r:t,l=o?t.slice(r.length):"";return(0,m.jsx)(P.E.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full",children:(0,m.jsxs)("button",{className:(0,W.default)("flex w-full items-center gap-3 rounded-lg px-5 py-3.5 transition-colors",a?"text-token-text-primary":"text-token-text-tertiary"),onClick:e=>{e.stopPropagation(),s(t)},onMouseEnter:()=>n(t),children:[(0,m.jsx)("div",{className:"flex h-5 w-5 items-center justify-center",children:(0,m.jsx)(x.w9k,{})}),(0,m.jsxs)("div",{className:"flex-grow text-left",children:[(0,m.jsx)("span",{children:i}),(0,m.jsx)("span",{className:"font-semibold",children:l})]})]},t)})}var ek=r(42508);function e_(){let e=es.ne.useStore(),{0:t,1:r}=(0,l.useState)(!1);return(0,m.jsx)(P.E.div,{animate:{height:92,opacity:1},exit:t?void 0:{height:0,opacity:0},className:"overflow-hidden px-2.5 sm:hidden",children:(0,m.jsxs)("div",{className:"flex items-center gap-3 rounded-[20px] bg-token-main-surface-tertiary p-2",onClick:()=>{e.setState({shouldShowAddToHomePopover:!0}),r(!0),e.dismissAddToHomePrompt()},children:[(0,m.jsx)("div",{className:"flex h-[60px] w-[60px] items-center justify-center rounded-2xl border border-token-border-light bg-token-main-surface-primary shadow-sm",children:(0,m.jsx)(ek.Z,{className:"h-8 w-8"})}),(0,m.jsxs)("div",{className:"grow",children:[(0,m.jsx)("div",{className:"font-semibold",children:"Add to home screen"}),(0,m.jsx)("div",{className:"text-sm text-token-text-tertiary",children:"for quicker access"})]}),(0,m.jsx)(ed.P,{onClick:t=>{t.stopPropagation(),e.dismissAddToHomePrompt()},className:"text-token-text-secondary"})]})},"add-to-home")}function eE(){let e=!es.ne.useState(e=>e.hasDismissedAddToHome)&&(0,I.e2)();return(0,m.jsx)(M.M,{children:e?(0,m.jsx)(e_,{},"prompt"):null})}function eN(){let{0:e,1:t}=(0,l.useState)(!1),{submitSearch:r}=(0,h.A)(),n=es.ne.useState(e=>e.shouldShowAddToHomePopover);return(0,m.jsxs)("div",{className:"flex h-full w-full flex-col bg-token-main-surface-primary sm:flex-row",children:[(0,m.jsx)(d.WU,{}),(0,m.jsxs)("div",{className:"lg:p-snc-4 relative flex flex-col items-center gap-7 overflow-hidden p-2.5 sm:mx-16 sm:-mt-12 sm:grow sm:justify-center sm:p-0",children:[(0,m.jsx)(eF,{}),(0,m.jsx)(eP,{}),(0,m.jsxs)("div",{className:"w-full sm:max-w-[700px] 2xl:max-w-[800px]",children:[(0,m.jsx)(eo,{onSubmitSearch:r,submitButtonTextClassName:"text-token-main-surface-tertiary",className:"hidden bg-token-main-surface-tertiary sm:block"}),(0,m.jsx)(ej,{onFocus:t})]})]}),(0,m.jsxs)("div",{className:"absolute right-5 top-5 hidden items-center gap-4 sm:flex",children:[(0,m.jsx)(ey.F,{}),(0,m.jsx)(eb.Kd,{className:"h-8 w-8"})]}),(0,m.jsx)(eT,{isInputFocused:e}),(0,m.jsxs)("div",{className:(0,W.default)("px-4 text-center text-xs text-token-text-tertiary max-sm:mb-4 sm:absolute sm:bottom-snc-1 sm:left-1/2 sm:-translate-x-1/2",{invisible:n}),children:[(0,m.jsx)("span",{className:"inline-block whitespace-nowrap",children:"SearchGPT is a prototype."})," ",(0,m.jsxs)("span",{className:"inline-block whitespace-nowrap",children:["Read our"," ",(0,m.jsx)("a",{href:"https://openai.com/policies/terms-of-use",target:"_blank",className:"underline hover:no-underline",children:"Terms"})," ","and"," ",(0,m.jsx)("a",{href:"https://openai.com/policies/privacy-policy",target:"_blank",className:"underline hover:no-underline",children:"Privacy Policy"}),"."]})]}),(0,m.jsx)(ec.ZP,{children:(0,m.jsx)(eE,{})})]})}function eT(e){let{isInputFocused:t}=e;return(0,m.jsx)(P.E.div,{className:"flex grow items-center justify-center sm:hidden",initial:{opacity:0},animate:{opacity:t?0:1},children:(0,m.jsx)(f.nI,{className:"h-14 w-14"})})}function eP(){return(0,m.jsxs)("div",{className:"-mb-2 grid w-full grid-cols-[1fr,auto,1fr] items-center justify-between sm:hidden",children:[(0,m.jsx)("div",{className:"flex",children:(0,m.jsx)(eb.Kd,{children:(0,m.jsx)(x.Oqj,{})})}),(0,m.jsx)("div",{className:"text-lg font-semibold",children:"SearchGPT"})]})}let eC="SearchGPT";function eF(){var e,t;let r=function(e,t={}){let{isStatic:r}=(0,l.useContext)(eh._),n=(0,l.useRef)(null),s=(0,ep.c)((0,em.i)(0)?0..get():0),a=()=>{n.current&&n.current.stop()};return(0,l.useInsertionEffect)(()=>s.attach((e,o)=>{if(r)return o(e);let i=n.current;return i&&0===i.time&&i.sample(eg.frameData.delta),a(),n.current=(0,ex.y)({keyframes:[s.get(),e],velocity:s.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...t,onUpdate:o}),s.get()},a),[JSON.stringify(t)]),(0,ef.L)(()=>{if((0,em.i)(e))return e.on("change",e=>s.set(parseFloat(e)))},[s]),s}(0,{duration:1e3}),{0:n,1:s}=(0,l.useState)(0),{0:a,1:o}=(0,l.useState)(!1),i=(0,eu.Z)();return(0,l.useEffect)(()=>{i(()=>r.set(eC.length),100)},[]),e="change",t=e=>{s(t=>Math.max(t,Math.floor(e)))},(0,l.useInsertionEffect)(()=>r.on(e,t),[r,e,t]),(0,l.useEffect)(()=>{n===eC.length&&i(()=>o(!0),50)},[n,i]),(0,m.jsxs)("div",{className:"hidden h-snc-3 items-center gap-1 text-4xl font-bold sm:flex",children:[eC.slice(0,n),(0,m.jsx)(eL,{className:(0,W.default)(a&&"animate-blinkOnce")})]})}function eO(){return(0,m.jsxs)("div",{className:"flex items-center gap-1 text-4xl font-bold",children:[eC,(0,m.jsx)(eL,{})]})}let eL=ev.Z.div(n||(n=(0,el.Z)(["w-7 h-7 bg-token-text-primary rounded-full"]))),eA={type:"spring",damping:20,stiffness:200};function eq(e){let{onSubmitSearch:t}=e,r=es.ne.useState(e=>e.shouldShowComposer);return(0,m.jsx)(M.M,{children:r?(0,m.jsx)(eI,{onSubmitSearch:t},"composer"):null})}function eI(e){let{onSubmitSearch:t}=e,r=es.ne.useStore();(0,l.useEffect)(()=>(document.body.classList.add("overflow-hidden"),()=>{document.body.classList.remove("overflow-hidden")}),[]);let n=(0,l.useRef)(null),{0:s}=(0,l.useState)(()=>Date.now());return(0,m.jsxs)("div",{className:"fixed inset-0",children:[(0,m.jsx)(P.E.div,{initial:{opacity:0,backdropFilter:"blur(0px)"},animate:{opacity:1,backdropFilter:"blur(10px)"},exit:{opacity:0,backdropFilter:"blur(0px)"},transition:eA,className:"absolute -inset-4 bg-[rgba(255,255,255,0.9)] backdrop-blur-md dark:bg-[rgb(33,33,33,0.9)]"}),(0,m.jsxs)(P.E.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:eA,onClick:e=>{Date.now()<s+300||e.target!==n.current||r.setState({shouldShowComposer:!1})},className:"absolute inset-0 flex items-center justify-center",ref:n,children:[(0,m.jsx)(eM,{}),(0,m.jsxs)(P.E.div,{className:"relative flex flex-col items-center gap-8",children:[(0,m.jsx)(eO,{}),(0,m.jsx)("div",{className:"w-[800px] max-w-[90vw]",children:(0,m.jsx)(eo,{onSubmitSearch:t,submitButtonTextClassName:"text-token-main-surface-primary dark:text-token-main-surface-tertiary",className:"bg-token-main-surface-primary shadow-[0_0_200px_0_rgba(0,0,0,0.14)] dark:bg-token-main-surface-tertiary dark:shadow-xl"})})]})]})]})}function eM(){return(0,m.jsxs)(P.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"absolute bottom-8 flex cursor-default items-center gap-4",children:[(0,m.jsxs)("div",{className:"rounded-lg bg-token-main-surface-tertiary px-2.5 py-1 text-sm font-semibold text-token-text-primary",children:[(0,ei.M2)((0,I.kK)()?"meta":"ctrl"),"K"]}),(0,m.jsx)("div",{className:"text-token-text-tertiary",children:"Toggle search"})]})}var eW=r(67330),eR=r(87387),eD=r(7979),eU=r(43703),ez=r(67708),eH=r(12381),eG=r(51837),eQ=r(5132);let eZ=L()(()=>Promise.all([r.e(8682),r.e(6923),r.e(3037)]).then(r.bind(r,4168)).then(e=>e.DebugModal),{ssr:!1,loadableGenerated:{webpack:()=>[4168]}}),eB=(0,l.memo)(function(e){let{initialQuery:t,showSplash:r}=e,{query:n}=(0,A.useRouter)(),s="true"===n.feather_eval,a=(0,eG.L)(),o=es.ne.useStore(),i=(0,eH.nn)(eH.LW.threadId),{sessionUser:c}=(0,h.A)(),d=(0,l.useRef)(null);return(0,l.useEffect)(()=>{t!==d.current&&(d.current=t,o.setQueryInput(null!=t?t:""),o.setFollowupQueryInput(""))},[o,t]),(0,l.useEffect)(()=>(0,eU.eR)(document,{keydown:e=>{"k"===e.key&&e.metaKey&&e.shiftKey&&(e.preventDefault(),o.setQueryInput(""),o.setFollowupQueryInput(""))}}),[o]),r?(0,m.jsx)(eN,{}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(ez.u,{}),a&&(0,m.jsx)(eZ,{threadId:i,threadUserId:null==c?void 0:c.id}),s&&(0,m.jsx)(eV,{})]})});function eV(){let{sessionUser:e}=(0,h.A)(),t=(0,eH.nn)(eH.LW.threadId),r=null==e?void 0:e.id,n=(0,eH.nn)(eH.LW.isLastTurnStreaming),s=(0,eH.nn)(eH.LW.numTurns);return t&&r?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("input",{type:"text",className:"hidden",id:"__feather_permalink",value:(0,eQ.t5)(r,t)}),s>0&&!n&&(0,m.jsx)("div",{className:"hidden",id:"__feather_is_done_streaming"})]}):null}var eY=r(10449);function eK(){return(eK=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}var eX=e=>l.createElement("svg",eK({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20"},e),s||(s=l.createElement("path",{fill:"currentColor",d:"M5.59 18q-1.268 0-1.933-.665Q3 16.669 3 15.4V7.867q0-1.277.657-1.934.665-.665 1.934-.665h2.178v1.717h-2.04q-.505 0-.773.263-.26.255-.26.789v7.186q0 .534.26.789.268.263.772.263h8.536q.497 0 .764-.263.268-.255.268-.789V8.037q0-.534-.268-.789-.267-.263-.764-.263h-2.04V5.268h2.185q1.269 0 1.926.665Q17 6.59 17 7.867V15.4q0 1.268-.665 1.934-.657.665-1.926.665zm4.402-6.366a.75.75 0 0 1-.55-.232.75.75 0 0 1-.23-.542V3.164l.07-1.137-.382.518L7.876 3.65a.7.7 0 0 1-.528.224.7.7 0 0 1-.481-.185.63.63 0 0 1-.199-.48q0-.278.214-.503L9.39.271a.9.9 0 0 1 .305-.21.75.75 0 0 1 .604 0 .8.8 0 0 1 .306.21l2.506 2.436q.214.224.214.503a.62.62 0 0 1-.206.48.7.7 0 0 1-.482.185.68.68 0 0 1-.52-.224L11.1 2.545l-.382-.518.062 1.137v7.696a.75.75 0 0 1-.23.542.74.74 0 0 1-.558.232"})));function eJ(){return es.ne.useState(e=>e.shouldShowAddToHomePopover)?(0,m.jsx)(e$,{}):null}function e$(){let{0:e}=(0,l.useState)(()=>(0,I._o)()),t=es.ne.useStore();return(0,m.jsxs)(eY.fC,{modal:!0,open:!0,onOpenChange:e=>{e||t.setState({shouldShowAddToHomePopover:!1})},children:[(0,m.jsx)(eY.ee,{children:(0,m.jsx)("div",{className:"fixed bottom-0 left-1/2"})}),(0,m.jsxs)(eY.VY,{sideOffset:12,className:"animate-bounce rounded-2xl bg-black px-6 py-2 text-center text-white outline-none dark:bg-white dark:text-black",children:[(0,m.jsxs)("div",{className:"flex items-center justify-center font-semibold",children:["Tap ",(0,m.jsx)(eX,{className:"h-4.5 w-4.5 ml-1"})]}),(0,m.jsx)("div",{className:"text-sm opacity-70",children:'And select "Add to Home Screen"'}),!e&&(0,m.jsx)("div",{className:"absolute bottom-0 left-1/2 h-4 w-4 -translate-x-1/2 translate-y-1/2",children:(0,m.jsx)("div",{className:"h-full w-full rotate-45 bg-black dark:bg-white"})})]})]})}var e0=r(11550),e1=r(24434);function e2(){let e=(0,g.qg)(g.pm.hasSeenSncUsageNux),t=(0,b.W6)(b.bM.isWelcomePageOpen),r=!e.isLoading&&e.eligible&&!t;return((0,l.useEffect)(()=>{b.vm.setUsageNuxModalOpen(r)},[r]),r)?(0,m.jsxs)(e1.Z,{title:(0,m.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,m.jsx)("div",{className:"text-xl",children:"Welcome to SearchGPT"}),(0,m.jsx)("div",{className:"text-sm font-normal text-token-text-tertiary",children:"A prototype combining the strength of OpenAI's models with information from the web"})]}),onClose:e.markAsViewed,type:"success",isOpen:!0,size:"custom",className:"max-w-[48rem] px-4 sm:px-0",children:[(0,m.jsxs)("div",{className:"flex w-full flex-col gap-4 sm:grid sm:grid-cols-3",children:[(0,m.jsx)(e3,{icon:(0,m.jsx)(x.WGR,{className:"icon-md text-green-500"}),title:"Get real-time information",children:"Get fast and timely answers in a conversational format. Ask follow-up questions to clarify and learn more."}),(0,m.jsx)(e3,{icon:(0,m.jsx)(x.n9J,{className:"icon-md text-brand-purple"}),title:"Dive deep with sources",children:"Connect with publishers and creators through prominent in-line citations. Explore more with clear, relevant sources."}),(0,m.jsx)(e3,{icon:(0,m.jsx)(x.Z7j,{className:"icon-md text-yellow-600 dark:text-yellow-400"}),title:"Help us improve",children:"SearchGPT is a temporary prototype. Share feedback by clicking the thumbs up and thumbs down icons."})]}),(0,m.jsx)("div",{className:"mt-4 flex w-full justify-end",children:(0,m.jsx)(e0.z,{onClick:e.markAsViewed,className:"mt-4",children:"Get started"})})]}):null}function e3(e){let{title:t,icon:r,children:n}=e;return(0,m.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2 font-semibold",children:[r,t]}),(0,m.jsx)("div",{className:"text-sm text-token-text-secondary",children:n})]})}var e6=r(40374),e5=r(48772),e7=r(52445),e4=r(94206),e8=r(16351);let e9=["moz","ms","o","webkit"];function te(e){return e?e+"Hidden":"hidden"}var tt=r(92319),tr=r(72409),tn=r(81014),ts=r(10798);function ta(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function to(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ta(Object(r),!0).forEach(function(t){(0,a.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ta(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let ti=L()(()=>r.e(8682).then(r.bind(r,85015)).then(e=>e.InternalSettings),{ssr:!1,loadableGenerated:{webpack:()=>[85015]}});function tl(e){var t,r,n;let{user:s,initialQuery:a,initialThreadId:c,sessionId:d,socketUrls:u,userMetadata:f,evalPreset:x,baseConfig:w,isRegionBlocked:S,isAccountPlanBlocked:C}=e,O=es.ne.useStore(),L=es.ne.useState(es.ne.selectLastSubmittedQuery),I=(0,i.t)(),M=null!==(t=null!==(r=null==I?void 0:I.isWorkspacePlan())&&void 0!==r?r:C)&&void 0!==t&&t,W=(0,eG.L)(),R=(0,b.W6)(b.bM.isSettingsModalOpen),D=(0,b.W6)(b.bM.isInternalSettingsModalOpen),{showWelcomePage:U,onClose:z}=function(){let e=(0,b.W6)(b.bM.isWelcomePageOpen),{eligible:t,isLoading:r}=(0,g.qg)(g.pm.hasSeenSncWelcomeNux);return(0,l.useEffect)(()=>{b.vm.setWelcomePageOpen(t)},[t]),{showWelcomePage:e,isAnnouncementEligible:t,onClose:()=>{b.vm.setWelcomePageOpen(!1),v.Z.announcementViewed(g.pm.hasSeenSncWelcomeNux)},isLoading:r}}(),[H,G]=(0,ts.rV)(),{0:Q,1:Z}=(0,l.useState)(null==a),B=null!==(n=(0,eH.nn)(eH.LW.threadId))&&void 0!==n?n:c,V=(0,eH.nn)(eH.LW.lastTurn),Y=(0,eH.nn)(eH.LW.numTurns),{0:K,1:X}=(0,l.useState)(Y),J=(0,A.useRouter)(),$=(0,T.gb)({namespace:T.dG.SonicHome}),ee=(0,e7.m)();(0,l.useEffect)(()=>{N.U.addTiming("sonic.web.home.mounted")},[]),(0,l.useEffect)(()=>{x&&O.updateAgentSettingsOverrides({eval_preset:x})},[x,O]),(0,l.useEffect)(()=>{w&&O.updateAgentSettingsOverrides({base_config:w})},[w,O]);let{readyState:et,postQuery:er}=function(e){let{threadId:t,sessionId:r,socketUrls:n,onTurnSubmitted:s}=e,a=es.ne.useStore(),{0:i,1:c}=(0,l.useState)(!1),{0:d}=(0,l.useState)(n),{0:u,1:m}=(0,l.useState)(!0),{0:p,1:h}=(0,l.useState)(!0),f=(0,l.useRef)(0),x=(0,l.useRef)(!1);(0,l.useEffect)(()=>(x.current=!0,()=>{x.current=!1}),[]),(0,k.a)({queryKey:["ping"],queryFn:tn.qE,enabled:!0,networkMode:"online",refetchInterval:1e4});let g=(0,l.useCallback)(async()=>{if(f.current>50)return j.m.danger("Failed to fetch websocket url",{hasCloseButton:!0,id:"ws-fetch-error"}),N.U.addError(new e4.O$("Failed to fetch websocket url, giving up"),{attempts:f.current}),null;try{var e;let t=await tr.c.get("".concat(e8.rq,"/register-websocket"));return f.current=0,{wss_url:t.wss_url,fallback_wss_url:null!==(e=t.fallback_wss_url)&&void 0!==e?e:null}}catch(e){throw e instanceof tt.gK&&401===e.status&&window.location.reload(),N.U.addError(new e4.O$("Failed to fetch websocket url, retrying"),{cause:e}),f.current+=1,e}},[]),v=(0,l.useCallback)(e=>{let t=a.getState().currentSearch;t&&(o.Y.logEvent(o.M.searchQuerySubmitted,{thread_id:e,source:t.config.querySource,prefetched:es.ne.selectWasCurrentSearchPrefetched(a.getState())}),N.U.addAction("sonic.web.search_query_submitted",{thread_id:e,source:t.config.querySource}))},[a]),b=e=>({retryOnError:!0===x.current&&p,shouldReconnect:()=>!0===x.current&&p,reconnectAttempts:50,reconnectInterval:e=>Math.min(1e3*Math.pow(1.3,e),5e3),onMessage:e=>{!function(e,t,r,n){if(e.thread_id!==t&&!("append_turn"===e.delta.type&&e.delta.session_id===r))return;let s="append_turn"===e.delta.type||"set_turn"===e.delta.type?e.delta.turn.index:e.delta.turn_index;if(null==s)throw Error();switch(e.delta.type){case"append_turn":{let t=e.delta;eH.P3.appendTurn(e.thread_id,t.turn,n);break}case"set_search_results":{let t=e.delta;eH.P3.updateTurn(s,e=>{e.search_results=t.search_results});break}case"set_model_response":{let t=e.delta;eH.P3.updateTurn(s,e=>e.model_response=t.model_response);break}case"append_model_response_text":{let t=e.delta;eH.P3.updateTurn(s,e=>{if(!e.model_response||null==e.model_response.text)throw Error();t.text_start&&t.text_start!==e.model_response.text.length?(N.U.addError(new e4.jF("Text start index does not match the current text length."),{expected:e.model_response.text.length,actual:t.text_start}),t.text_start<e.model_response.text.length?e.model_response.text=e.model_response.text.substring(0,t.text_start)+t.text+e.model_response.text.substring(t.text_start+t.text.length):e.model_response.text=e.model_response.text.padEnd(t.text_start," ")+t.text):e.model_response.text+=t.text,t.citations&&(e.model_response.citations=[...e.model_response.citations.filter(e=>e.start_idx<t.citations_start),...t.citations])});break}case"set_sports_widget":{let t=e.delta;eH.P3.updateTurn(s,e=>{e.sports_widget=t.sports_widget});break}case"set_olympics_widget":{let t=e.delta;eH.P3.updateTurn(s,e=>{e.olympics_widget=t.olympics_widget});break}case"set_use_location":{let t=e.delta;eH.P3.updateTurn(s,e=>{e.use_location=t.use_location});break}case"set_turn_execution_status":{let t=e.delta;eH.P3.updateTurn(s,e=>{e.execution_status=t.execution_status,e.error=t.error});break}case"set_image_results":{let t=e.delta;eH.P3.updateTurn(s,e=>{e.image_results=t.image_results});break}case"set_image_try_hard_status":{let t=e.delta;eH.P3.updateTurn(s,e=>{e.image_try_hard_status=t.status});break}case"set_model_response_citation":{let t=e.delta;eH.P3.updateTurn(s,e=>{if(!e.model_response)throw Error();e.model_response.citations[t.citation_index]=t.citation});break}default:N.U.addError("Unsupported delta type",{delta:e.delta})}}(JSON.parse(e.data),t,r,v)},onError:t=>{N.U.addError(new e4.O$("Websocket error"),{event:t,primary:e})},onOpen:()=>{N.U.addAction("sonic.web.websocket_open",{primary:e})},onClose:()=>{console.debug("[ws] Connection closed"),N.U.addAction("sonic.web.websocket_closed",{primary:e}),c(!0)},onReconnectStop:()=>{j.m.danger("Websocket connection attempts failed, pausing reconnects",{hasCloseButton:!0})}}),y=(0,l.useCallback)(async()=>{var e,t;return null!==(e=null===(t=await g())||void 0===t?void 0:t.wss_url)&&void 0!==e?e:""},[g]),w=(0,l.useCallback)(async()=>{var e,t;return null!==(e=null===(t=await g())||void 0===t?void 0:t.fallback_wss_url)&&void 0!==e?e:""},[g]),{readyState:S}=(0,q.ZP)(!i&&d?d.wss_url:y,b(!0),u),{readyState:_}=(0,q.ZP)(!i&&d?d.fallback_wss_url:w,b(!1),u),E=S!==q.kQ.CLOSING&&S!==q.kQ.CLOSED?S:_,T=(0,l.useCallback)(()=>{E!==q.kQ.OPEN&&(m(!1),f.current=0,setTimeout(()=>{m(!0)},0))},[E]);return(0,l.useEffect)(()=>(function(e){let t=function(){for(let e=0;e<e9.length;e++)if(te(e9[e]) in document)return e9[e];return null}(),r=(t||"")+"visibilitychange";function n(r){return"boolean"==typeof r?r?e.onVisible():e.onHidden():document[te(t)]?e.onHidden():e.onVisible()}return document.addEventListener(r,n,!1),document.addEventListener("focus",e.onVisible,!1),document.addEventListener("blur",e.onHidden,!1),window.addEventListener("focus",e.onVisible,!1),window.addEventListener("blur",e.onHidden,!1),()=>{document.removeEventListener(r,n,!1),document.removeEventListener("focus",e.onVisible,!1),document.removeEventListener("blur",e.onHidden,!1),window.removeEventListener("focus",e.onVisible,!1),window.removeEventListener("blur",e.onHidden,!1)}})({onHidden:()=>{console.debug("[ws] onHidden"),h(!1)},onVisible:()=>{console.debug("[ws] onVisible, set reconnect to true"),h(!0),T()}}),[T]),{readyState:E,postQuery:(0,l.useCallback)(async e=>{let{threadId:t,sessionId:r,isFollowup:n}=e;a.setCurrentSearch({config:{threadId:t,query:e.query,isFollowup:n,querySource:e.querySource},state:es.po.Active}),(0,tn.dN)({threadId:t,sessionId:r,query:e.query,agentSettingsOverrides:e.agentSettingsOverrides,metadata:e.metadata}).then(()=>{null==s||s({isFollowup:n})}).catch(e=>{N.U.addError(new e4.v3("Failed to postThreadTurn"),{cause:e}),eH.P3.setError(e.message)})},[a,s])}}({socketUrls:u,threadId:B,sessionId:d,onTurnSubmitted:(0,l.useCallback)(e=>{let{isFollowup:t}=e;if(!t){var r;$.logTiming("search_query_submitted",{context:{source:null===(r=O.getState().currentSearch)||void 0===r?void 0:r.config.querySource,prefetched:es.ne.selectWasCurrentSearchPrefetched(O.getState())}})}O.markHasSearched()},[O,$])}),{newQueryStarted:en}=function(e){let{profiler:t}=e,r=(0,l.useRef)(to({},tc)),n=(0,eH.nn)(eH.LW.firstTurn),s=es.ne.useStore();return(0,l.useEffect)(()=>{var e,a,o;if(null==n)return;let i=null===(e=s.getState().currentSearch)||void 0===e?void 0:e.config.querySource;r.current.turn||(r.current.turn=!0,t.logTiming("ttf_message",{context:{source:i}})),r.current.modelResponse||F()(null===(a=n.model_response)||void 0===a?void 0:a.text)||(r.current.modelResponse=!0,t.logTiming("ttf_model_response",{context:{source:i}})),r.current.searchResults||F()(null===(o=n.search_results)||void 0===o?void 0:o.entries)||(r.current.searchResults=!0,t.logTiming("ttf_search_results",{context:{source:i}}))},[s,n,t]),{newQueryStarted:(0,l.useCallback)(()=>{r.current=to({},tc)},[])}}({profiler:$});(0,l.useEffect)(()=>{"denied"===ee&&G(e=>to(to({},e),{},{useLocation:!1}))},[G,ee]);let{data:ea}=(0,k.a)({queryKey:["userLocation",H.useLocation],queryFn:e=>{let{queryKey:[t,r]}=e;return(0,eQ.XB)({enabled:r})},initialData:function(e){if(e){let e=E.bX.getCookie(E.cn.LastLocation);if(e)try{return JSON.parse(e)}catch{(0,eQ.ri)()}}return null}(H.useLocation),networkMode:"always",refetchOnMount:"always",refetchOnWindowFocus:"always",staleTime:0}),eo=(0,l.useMemo)(()=>null==ea?f:to(to({},f),ea),[f,ea]),ei=null==V?void 0:V.index,el=(0,l.useCallback)(async e=>{try{let t=e.isFollowup?"followup":"query";"query"===t&&($.reset(),en(),O.setQueryInput(e.query)),await er({threadId:e.threadId,sessionId:d,isFollowup:e.isFollowup,prefetched:!e.isFollowup&&es.ne.selectWasCurrentSearchPrefetched(O.getState()),query:e.query,querySource:e.querySource,agentSettingsOverrides:es.ne.selectAgentSettingsOverrides(O.getState()),metadata:eo}),"followup"===t&&o.Y.logEvent(o.M.searchFollowupSubmitted,{thread_id:e.threadId,turn_index:null!=ei?ei:0})}catch(e){N.U.addError(Error("Error posting user action",{cause:e})),j.m.danger("Failed to submit")}},[er,d,eo,$,en,O,ei]),ec=(0,l.useCallback)(e=>{var t;O.setLastPrefetchedQuery(e);let r=null===(t=O.getState().currentSearch)||void 0===t?void 0:t.config.querySource;o.Y.logEvent(o.M.searchQueryPrefetched,{source:null!=r?r:"search_input"}),N.U.addAction("sonic.web.home.prefetch",{source:r})},[O]),ed=(0,l.useCallback)(async(e,t)=>{let{isFollowup:r=!1}=t;if(et!==q.kQ.OPEN){N.U.addAction("sonic.web.home.websocket.not_open"),j.m.danger("Websocket connection is not open");return}Z(!1),await el({query:e,threadId:r?B:null,isFollowup:r,querySource:"search_input"})},[el,et,B]),eu=(0,l.useCallback)(async e=>{eH.P3.clearThread();let t=new URLSearchParams(window.location.search);if(e?t.set("q",e):t.delete("q"),O.setState({queryInput:null!=e?e:"",currentSearch:void 0}),e!==J.query.q){let r=(0,e5.Y)(window.innerWidth)===e5.AE.DesktopWithDrawer;J.push({search:t.toString(),hash:r?(0,e5.Ld)()||J.asPath.split("#")[1]:void 0},void 0,{shallow:!0}),null==e&&Z(!0)}else e&&await ed(e,{isFollowup:!1})},[J,O,ed]),em=(0,l.useCallback)(async e=>{let t=es.ne.selectLastSubmittedQuery(O.getState());if(null==t){j.m.danger("No previous query to retry");return}return e?ed(e,{isFollowup:!0}):eu(t)},[O,eu,ed]),ep=(0,l.useCallback)(e=>(O.setFollowupQueryInput(""),(0,e6.Z)(),eu(e)),[eu,O]),eh=(0,l.useCallback)(e=>(X(Y+1),O.setFollowupQueryInput(""),ed(e,{isFollowup:!0})),[ed,O,Y]);(0,l.useEffect)(()=>{var e;if((null===(e=O.getState().currentSearch)||void 0===e?void 0:e.state)!==es.po.InitialPending){let e=J.query.q;eH.P3.clearThread(),e?(Z(!1),X(1),el({query:e,threadId:null,isFollowup:!1,querySource:"search_input"})):Z(!0)}},[J.query.q]),(0,l.useEffect)(()=>{if(et!==q.kQ.OPEN||U)return;let e=O.handlePendingInitialSearch();e&&(el(e.config),X(1),Z(!1))},[O,et,s.id,el,U]);let ef=(0,l.useMemo)(()=>({waitingForNewTurn:Y!==K,sessionUser:s,settings:H,userMetadata:eo,submitFollowup:eh,submitSearch:ep,retrySearch:em,resetSearch:()=>eu(),prefetch:ec,readyState:et}),[s,H,eo,eh,ep,em,ec,eu,et,Y,K]),ex=(0,l.useCallback)(()=>{z(),G(e=>to(to({},e),{},{useLocation:!0}))},[z,G]),eg=es.ne.useState(e=>e.shouldShowComposer);return(0,m.jsxs)(_.S,{name:"sonic_ui_boundary_error",fallback:e=>{let{resetError:t,componentStack:r,error:n}=e;return(0,m.jsx)(eW.aE,{resetError:t,componentStack:r,error:n})},children:[(0,m.jsx)(eD.p,{title:!Q&&L?"".concat(L," - SearchGPT"):"SearchGPT"}),(0,m.jsx)(P.E.div,{animate:{scale:eg?1.04:1},transition:eA,className:"h-[100dvh] w-screen overflow-auto","data-search-root":!0,children:S||!W&&M?(0,m.jsx)(p,{reason:S?"region":"enterprise"}):U?(0,m.jsx)(P.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:(0,m.jsx)(y,{onClose:ex})}):(0,m.jsx)(h.c.Provider,{value:ef,children:(0,m.jsx)(eB,{initialQuery:a,showSplash:Q})})}),R&&(0,m.jsx)(eR.aO,{onClose:()=>b.vm.setSettingsModalOpen(!1)}),W&&D&&(0,m.jsx)(ti,{onClose:()=>b.vm.setInternalSettingsModalOpen(!1)}),(0,m.jsx)(e2,{}),(0,m.jsx)(eq,{onSubmitSearch:ep}),(0,m.jsx)(eJ,{})]})}let tc={turn:!1,searchResults:!1,modelResponse:!1,widget:!1};function td(e){return(0,m.jsx)(S.$b,{children:(0,m.jsx)(ts.nf,{userId:e.user.id,children:(0,m.jsx)(ts.lM,{userId:e.user.id,children:(0,m.jsx)(e7.w,{children:(0,m.jsx)(es.HC,{serverProps:e,children:(0,m.jsx)(tl,to({},e))})})})})})}},17096:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(92379);function s(){let e=(0,n.useRef)([]),t=(0,n.useRef)((t,r)=>{let n=setTimeout(t,r);return e.current.push(n),n});return(0,n.useEffect)(()=>{let t=e.current;return()=>{t.forEach(e=>{clearTimeout(e)})}},[]),t.current}},27393:function(e,t,r){"use strict";r.d(t,{Ef:function(){return h},UG:function(){return f},dG:function(){return c},gb:function(){return x},mK:function(){return p}});var n,s=r(98601),a=r(37671),o=r(82363),i=r(92379);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}let c=((n={}).SonicHome="sonic.web.home",n.SonicServer="sonic.ssr.search",n.ChatPageLoad="chatgpt.web.pageLoad",n.CompletionRequest="chatgpt.web.completionRequest",n.ProofOfWork="chatgpt.web.proofOfWork",n);class d{constructor(e,t){var r,n;(0,s.Z)(this,"expectedTimingLogTimeouts",{}),(0,s.Z)(this,"startMs",-1),(0,s.Z)(this,"lastLogMs",-1),(0,s.Z)(this,"loggedTimings",new Set),(0,s.Z)(this,"timingBlocks",{}),(0,s.Z)(this,"debug",!1),this.namespace=e,this.expectedTimingLogs=null!==(r=null==t?void 0:t.expectedTimingLogs)&&void 0!==r?r:[],this.debug=null!==(n=null==t?void 0:t.debug)&&void 0!==n&&n,this.reset()}reset(){for(let e of(this.startMs=this.lastLogMs=performance.now(),this.timingBlocks={},this.loggedTimings=new Set,Object.values(this.expectedTimingLogTimeouts)))clearTimeout(e);for(let e of(this.expectedTimingLogTimeouts={},this.expectedTimingLogs)){let t=setTimeout(()=>{var t;o.U.addAction("".concat(this.namespace,".").concat(e.name,".timed_out"),null!==(t=e.initializationInfo)&&void 0!==t?t:{})},e.expectedInMs);this.expectedTimingLogTimeouts[e.name]=t,this.debug&&console.debug("[DatadogProfiler] Expecting ".concat(this.namespace,".").concat(e.name," to be logged within ").concat(e.expectedInMs,"ms"))}}logTiming(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fromLastLog:!1};if(this.loggedTimings.has(e)){console.warn("[DatadogProfiler] Timing ".concat(this.namespace,".").concat(e," already logged"));return}let r=performance.now()-(t.fromLastLog?this.lastLogMs:this.startMs);o.U.addAction("".concat(this.namespace,".").concat(e),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){(0,s.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({durationMs:r},t.context)),this.lastLogMs=performance.now(),this.loggedTimings.add(e),e in this.expectedTimingLogTimeouts&&(clearTimeout(this.expectedTimingLogTimeouts[e]),delete this.expectedTimingLogTimeouts[e]),this.debug&&console.debug("[DatadogProfiler] ".concat(this.namespace,".").concat(e,": ").concat(r,"ms"))}startBlock(e){this.timingBlocks[e]=performance.now()}endBlock(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{throwError:!0},r=this.timingBlocks[e];if(void 0===r&&t.throwError)throw Error("Block ".concat(e," not started"));let n=performance.now()-r;o.U.addAction("".concat(this.namespace,".").concat(e),{durationMs:n}),delete this.timingBlocks[e]}}let u={},m="__global__";function p(e){let{namespace:t,key:r=m,opts:n}=e;void 0===u[t]&&(u[t]={});let s=(0,a.S)(u[t]);return void 0!==s[r]&&o.U.addError("Profiler already exists for namespace ".concat(t," and key ").concat(r)),s[r]=new d(t,n),s[r]}function h(e){let{namespace:t,key:r=m}=e;if(void 0!==u[t])return(0,a.S)(u[t])[r]}function f(e){let{namespace:t,key:r=m}=e;if(void 0!==u[t]){let e=(0,a.S)(u[t]);delete e[r]}}function x(e){let{namespace:t,key:r=m,opts:n}=e,{0:s}=(0,i.useState)(()=>p({namespace:t,key:r,opts:n}));return s}},82845:function(e,t,r){"use strict";var n=r(92379).useLayoutEffect;t.Z=n},86336:function(e,t,r){"use strict";r.d(t,{c:function(){return i}});var n=r(92379),s=r(35069),a=r(66472),o=r(49439);function i(e){let t=(0,o.h)(()=>(0,s.BX)(e)),{isStatic:r}=(0,n.useContext)(a._);if(r){let[,r]=(0,n.useState)(e);(0,n.useEffect)(()=>t.on("change",r),[])}return t}}}]);
//# sourceMappingURL=8115.aac3f51a5d814b44.js.map