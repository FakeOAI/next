(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6885],{54221:function(e,t,r){var n=0/0,o=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,u=/^0o[0-7]+$/i,a=parseInt,l="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,s="object"==typeof self&&self&&self.Object===Object&&self,f=l||s||Function("return this")(),d=Object.prototype.toString,p=Math.max,h=Math.min,v=function(){return f.Date.now()};function b(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||t&&"object"==typeof t&&"[object Symbol]"==d.call(t))return n;if(b(e)){var t,r="function"==typeof e.valueOf?e.valueOf():e;e=b(r)?r+"":r}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var l=c.test(e);return l||u.test(e)?a(e.slice(2),l?2:8):i.test(e)?n:+e}e.exports=function(e,t,r){var n,o,i,c,u,a,l=0,s=!1,f=!1,d=!0;if("function"!=typeof e)throw TypeError("Expected a function");function m(t){var r=n,i=o;return n=o=void 0,l=t,c=e.apply(i,r)}function g(e){var r=e-a,n=e-l;return void 0===a||r>=t||r<0||f&&n>=i}function w(){var e,r,n,o=v();if(g(o))return T(o);u=setTimeout(w,(e=o-a,r=o-l,n=t-e,f?h(n,i-r):n))}function T(e){return(u=void 0,d&&n)?m(e):(n=o=void 0,c)}function S(){var e,r=v(),i=g(r);if(n=arguments,o=this,a=r,i){if(void 0===u)return l=e=a,u=setTimeout(w,t),s?m(e):c;if(f)return u=setTimeout(w,t),m(a)}return void 0===u&&(u=setTimeout(w,t)),c}return t=y(t)||0,b(r)&&(s=!!r.leading,i=(f="maxWait"in r)?p(y(r.maxWait)||0,t):i,d="trailing"in r?!!r.trailing:d),S.cancel=function(){void 0!==u&&clearTimeout(u),l=0,n=a=o=u=void 0},S.flush=function(){return void 0===u?c:T(v())},S}},89311:function(e,t,r){var n,o;void 0!==(o="function"==typeof(n=function(){"use strict";var e=function(){},t="undefined",r=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"],o={},i=null;function c(e,t){var r=e[t];if("function"==typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(t){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function u(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(){for(var r=this.getLevel(),o=0;o<n.length;o++){var i=n[o];this[i]=o<r?e:this.methodFactory(i,r,this.name)}if(this.log=this.debug,typeof console===t&&r<this.levels.SILENT)return"No console available for logging"}function l(e){return function(){typeof console!==t&&(a.call(this),this[e].apply(this,arguments))}}function s(n,o,i){var a;return"debug"===(a=n)&&(a="log"),typeof console!==t&&("trace"===a&&r?u:void 0!==console[a]?c(console,a):void 0!==console.log?c(console,"log"):e)||l.apply(this,arguments)}function f(e,r){var c,u,l,f=this,d="loglevel";function p(){var e;if(typeof window!==t&&d){try{e=window.localStorage[d]}catch(e){}if(typeof e===t)try{var r=window.document.cookie,n=encodeURIComponent(d),o=r.indexOf(n+"=");-1!==o&&(e=/^([^;]+)/.exec(r.slice(o+n.length+1))[1])}catch(e){}return void 0===f.levels[e]&&(e=void 0),e}}function h(e){var t=e;if("string"==typeof t&&void 0!==f.levels[t.toUpperCase()]&&(t=f.levels[t.toUpperCase()]),"number"==typeof t&&t>=0&&t<=f.levels.SILENT)return t;throw TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?d+=":"+e:"symbol"==typeof e&&(d=void 0),f.name=e,f.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},f.methodFactory=r||s,f.getLevel=function(){return null!=l?l:null!=u?u:c},f.setLevel=function(e,r){return l=h(e),!1!==r&&function(e){var r=(n[e]||"silent").toUpperCase();if(typeof window!==t&&d){try{window.localStorage[d]=r;return}catch(e){}try{window.document.cookie=encodeURIComponent(d)+"="+r+";"}catch(e){}}}(l),a.call(f)},f.setDefaultLevel=function(e){u=h(e),p()||f.setLevel(e,!1)},f.resetLevel=function(){l=null,function(){if(typeof window!==t&&d){try{window.localStorage.removeItem(d)}catch(e){}try{window.document.cookie=encodeURIComponent(d)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}(),a.call(f)},f.enableAll=function(e){f.setLevel(f.levels.TRACE,e)},f.disableAll=function(e){f.setLevel(f.levels.SILENT,e)},f.rebuild=function(){if(i!==f&&(c=h(i.getLevel())),a.call(f),i===f)for(var e in o)o[e].rebuild()},c=h(i?i.getLevel():"WARN");var v=p();null!=v&&(l=h(v)),a.call(f)}(i=new f).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw TypeError("You must supply a name when creating a logger.");var t=o[e];return t||(t=o[e]=new f(e,i.methodFactory)),t};var d=typeof window!==t?window.log:void 0;return i.noConflict=function(){return typeof window!==t&&window.log===i&&(window.log=d),i},i.getLoggers=function(){return o},i.default=i,i})?n.call(t,r,t,e):n)&&(e.exports=o)},26885:function(e,t,r){"use strict";r.d(t,{IC:function(){return ej},Z5:function(){return eM},qT:function(){return eU},z1:function(){return e_},fZ:function(){return ex},Ih:function(){return eR}});var n,o,i,c=r(92379),u=function(){for(var e,t,r=0,n="",o=arguments.length;r<o;r++)(e=arguments[r])&&(t=function e(t){var r,n,o="";if("string"==typeof t||"number"==typeof t)o+=t;else if("object"==typeof t){if(Array.isArray(t)){var i=t.length;for(r=0;r<i;r++)t[r]&&(n=e(t[r]))&&(o&&(o+=" "),o+=n)}else for(n in t)t[n]&&(o&&(o+=" "),o+=n)}return o}(e))&&(n&&(n+=" "),n+=t);return n},a=r(83520),l=r(89311),s=r(9508);function f(e){return"function"==typeof e}var d=((n=function(e){Error.call(e),e.stack=Error().stack},o=function(e){n(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}).prototype=Object.create(Error.prototype),o.prototype.constructor=o,o);function p(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var h=function(){var e;function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e,t,r,n,o,i=this._parentage;if(i){if(this._parentage=null,Array.isArray(i))try{for(var c=(0,s.XA)(i),u=c.next();!u.done;u=c.next())u.value.remove(this)}catch(t){e={error:t}}finally{try{u&&!u.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}else i.remove(this)}var a=this.initialTeardown;if(f(a))try{a()}catch(e){o=e instanceof d?e.errors:[e]}var l=this._finalizers;if(l){this._finalizers=null;try{for(var p=(0,s.XA)(l),h=p.next();!h.done;h=p.next()){var v=h.value;try{b(v)}catch(e){o=null!=o?o:[],e instanceof d?o=(0,s.ev)((0,s.ev)([],(0,s.CR)(o)),(0,s.CR)(e.errors)):o.push(e)}}}catch(e){r={error:e}}finally{try{h&&!h.done&&(n=p.return)&&n.call(p)}finally{if(r)throw r.error}}}if(o)throw new d(o)}},t.prototype.add=function(e){var r;if(e&&e!==this){if(this.closed)b(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(e)}}},t.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},t.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},t.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&p(t,e)},t.prototype.remove=function(e){var r=this._finalizers;r&&p(r,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t}();function v(e){return e instanceof h||e&&"closed"in e&&f(e.remove)&&f(e.add)&&f(e.unsubscribe)}function b(e){f(e)?e():e.unsubscribe()}h.EMPTY;var y={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},m={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=m.delegate;return(null==o?void 0:o.setTimeout)?o.setTimeout.apply(o,(0,s.ev)([e,t],(0,s.CR)(r))):setTimeout.apply(void 0,(0,s.ev)([e,t],(0,s.CR)(r)))},clearTimeout:function(e){var t=m.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function g(e){m.setTimeout(function(){var t=y.onUnhandledError;if(t)t(e);else throw e})}function w(){}var T=S("C",void 0,void 0);function S(e,t,r){return{kind:e,value:t,error:r}}var k=null,E=function(e){function t(t){var r=e.call(this)||this;return r.isStopped=!1,t?(r.destination=t,v(t)&&t.add(r)):r.destination=A,r}return(0,s.ZT)(t,e),t.create=function(e,t,r){return new O(e,t,r)},t.prototype.next=function(e){this.isStopped?_(S("N",e,void 0),this):this._next(e)},t.prototype.error=function(e){this.isStopped?_(S("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?_(T,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(h),C=Function.prototype.bind;function x(e,t){return C.call(e,t)}var P=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){Q(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){Q(e)}else Q(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){Q(e)}},e}(),O=function(e){function t(t,r,n){var o,i,c=e.call(this)||this;return f(t)||!t?o={next:null!=t?t:void 0,error:null!=r?r:void 0,complete:null!=n?n:void 0}:c&&y.useDeprecatedNextContext?((i=Object.create(t)).unsubscribe=function(){return c.unsubscribe()},o={next:t.next&&x(t.next,i),error:t.error&&x(t.error,i),complete:t.complete&&x(t.complete,i)}):o=t,c.destination=new P(o),c}return(0,s.ZT)(t,e),t}(E);function Q(e){y.useDeprecatedSynchronousErrorHandling?y.useDeprecatedSynchronousErrorHandling&&k&&(k.errorThrown=!0,k.error=e):g(e)}function _(e,t){var r=y.onStoppedNotification;r&&m.setTimeout(function(){return r(e,t)})}var A={closed:!0,next:w,error:function(e){throw e},complete:w},R="function"==typeof Symbol&&Symbol.observable||"@@observable";function I(e){return e}var L=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n,o=this,i=(n=e)&&n instanceof E||n&&f(n.next)&&f(n.error)&&f(n.complete)&&v(n)?e:new O(e,t,r);return function(e){if(y.useDeprecatedSynchronousErrorHandling){var t=!k;if(t&&(k={errorThrown:!1,error:null}),e(),t){var r=k,n=r.errorThrown,o=r.error;if(k=null,n)throw o}}else e()}(function(){var e=o.operator,t=o.source;i.add(e?e.call(i,t):t?o._subscribe(i):o._trySubscribe(i))}),i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=U(t))(function(t,n){var o=new O({next:function(t){try{e(t)}catch(e){n(e),o.unsubscribe()}},error:n,complete:t});r.subscribe(o)})},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[R]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0===e.length?I:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)})(this)},e.prototype.toPromise=function(e){var t=this;return new(e=U(e))(function(e,r){var n;t.subscribe(function(e){return n=e},function(e){return r(e)},function(){return e(n)})})},e.create=function(t){return new e(t)},e}();function U(e){var t;return null!==(t=null!=e?e:y.Promise)&&void 0!==t?t:Promise}function N(e){return function(t){if(f(null==t?void 0:t.lift))return t.lift(function(t){try{return e(t,this)}catch(e){this.error(e)}});throw TypeError("Unable to lift unknown Observable type")}}function j(e,t,r,n,o){return new M(e,t,r,n,o)}var M=function(e){function t(t,r,n,o,i,c){var u=e.call(this,t)||this;return u.onFinalize=i,u.shouldUnsubscribe=c,u._next=r?function(e){try{r(e)}catch(e){t.error(e)}}:e.prototype._next,u._error=o?function(e){try{o(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,u._complete=n?function(){try{n()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,u}return(0,s.ZT)(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),r||null===(t=this.onFinalize)||void 0===t||t.call(this)}},t}(E);function D(e,t){return N(function(r,n){var o=0;r.subscribe(j(n,function(r){n.next(e.call(t,r,o++))}))})}var F=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function $(e){return f(null==e?void 0:e.then)}function J(e){return Symbol.asyncIterator&&f(null==e?void 0:e[Symbol.asyncIterator])}function z(e){return TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var q="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function H(e){return f(null==e?void 0:e[q])}function W(e){return(0,s.FC)(this,arguments,function(){var t,r,n;return(0,s.Jh)(this,function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,(0,s.qq)(t.read())];case 3:if(n=(r=o.sent()).value,!r.done)return[3,5];return[4,(0,s.qq)(void 0)];case 4:return[2,o.sent()];case 5:return[4,(0,s.qq)(n)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function Y(e){return f(null==e?void 0:e.getReader)}function Z(e){if(e instanceof L)return e;if(null!=e){if(f(e[R]))return new L(function(t){var r=e[R]();if(f(r.subscribe))return r.subscribe(t);throw TypeError("Provided object does not correctly implement Symbol.observable")});if(F(e))return new L(function(t){for(var r=0;r<e.length&&!t.closed;r++)t.next(e[r]);t.complete()});if($(e))return new L(function(t){e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,g)});if(J(e))return B(e);if(H(e))return new L(function(t){var r,n;try{for(var o=(0,s.XA)(e),i=o.next();!i.done;i=o.next()){var c=i.value;if(t.next(c),t.closed)return}}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}t.complete()});if(Y(e))return B(W(e))}throw z(e)}function B(e){return new L(function(t){(function(e,t){var r,n,o,i;return(0,s.mG)(this,void 0,void 0,function(){var c;return(0,s.Jh)(this,function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),r=(0,s.KL)(e),u.label=1;case 1:return[4,r.next()];case 2:if((n=u.sent()).done)return[3,4];if(c=n.value,t.next(c),t.closed)return[2];u.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return o={error:u.sent()},[3,11];case 6:if(u.trys.push([6,,9,10]),!(n&&!n.done&&(i=r.return)))return[3,8];return[4,i.call(r)];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})})(e,t).catch(function(e){return t.error(e)})})}function X(e,t,r,n,o){void 0===n&&(n=0),void 0===o&&(o=!1);var i=t.schedule(function(){r(),o?e.add(this.schedule(null,n)):this.unsubscribe()},n);if(e.add(i),!o)return i}function G(e){var t;return(t=e[e.length-1])&&f(t.schedule)?e.pop():void 0}function K(e,t){return void 0===t&&(t=0),N(function(r,n){r.subscribe(j(n,function(r){return X(n,e,function(){return n.next(r)},t)},function(){return X(n,e,function(){return n.complete()},t)},function(r){return X(n,e,function(){return n.error(r)},t)}))})}function V(e,t){return void 0===t&&(t=0),N(function(r,n){n.add(e.schedule(function(){return r.subscribe(n)},t))})}function ee(e,t){if(!e)throw Error("Iterable cannot be null");return new L(function(r){X(r,t,function(){var n=e[Symbol.asyncIterator]();X(r,t,function(){n.next().then(function(e){e.done?r.complete():r.next(e.value)})},0,!0)})})}function et(){for(var e,t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return(void 0===(e=1)&&(e=1/0),function e(t,r,n){return(void 0===n&&(n=1/0),f(r))?e(function(e,n){return D(function(t,o){return r(e,t,n,o)})(Z(t(e,n)))},n):("number"==typeof r&&(n=r),N(function(e,r){var o,i,c,u,a,l,s,f,d,p,h,v;return o=n,l=[],s=0,f=0,d=!1,p=function(){!d||l.length||s||r.complete()},h=function(e){return s<o?v(e):l.push(e)},v=function(e){s++;var n=!1;Z(t(e,f++)).subscribe(j(r,function(e){null==void 0||i(e),c?h(e):r.next(e)},function(){n=!0},void 0,function(){if(n)try{for(s--;l.length&&s<o;)!function(){var e=l.shift();1?v(e):X(r,u,function(){return v(e)})}();p()}catch(e){r.error(e)}}))},e.subscribe(j(r,h,function(){d=!0,p()})),function(){null==void 0||a()}}))}(I,e))((t=G(r))?function(e,t){if(null!=e){if(f(e[R]))return Z(e).pipe(V(t),K(t));if(F(e))return new L(function(r){var n=0;return t.schedule(function(){n===e.length?r.complete():(r.next(e[n++]),r.closed||this.schedule())})});if($(e))return Z(e).pipe(V(t),K(t));if(J(e))return ee(e,t);if(H(e))return new L(function(r){var n;return X(r,t,function(){n=e[q](),X(r,t,function(){var e,t,o;try{t=(e=n.next()).value,o=e.done}catch(e){r.error(e);return}o?r.complete():r.next(t)},0,!0)}),function(){return f(null==n?void 0:n.return)&&n.return()}});if(Y(e))return ee(W(e),t)}throw z(e)}(r,t):Z(r))}function er(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=G(e);return N(function(t,n){(r?et(e,t,r):et(e,t)).subscribe(n)})}function en(e){var t;return void 0!==e&&(!!e&&e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&e.hasOwnProperty("track")&&void 0!==(null==(t=e.publication)?void 0:t.track)||!!e&&e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&e.hasOwnProperty("publication")&&void 0!==e.publication)}function eo(e){return e instanceof a.Ix}Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var ei=[a.TQ.ConnectionStateChanged,a.TQ.RoomMetadataChanged,a.TQ.ActiveSpeakersChanged,a.TQ.ConnectionQualityChanged,a.TQ.ParticipantConnected,a.TQ.ParticipantDisconnected,a.TQ.ParticipantPermissionsChanged,a.TQ.ParticipantMetadataChanged,a.TQ.TrackMuted,a.TQ.TrackUnmuted,a.TQ.TrackPublished,a.TQ.TrackUnpublished,a.TQ.TrackStreamStateChanged,a.TQ.TrackSubscriptionFailed,a.TQ.TrackSubscriptionPermissionChanged,a.TQ.TrackSubscriptionStatusChanged,a.TQ.LocalTrackPublished,a.TQ.LocalTrackUnpublished];a.dd.TrackPublished,a.dd.TrackUnpublished,a.dd.TrackMuted,a.dd.TrackUnmuted,a.dd.TrackStreamStateChanged,a.dd.TrackSubscribed,a.dd.TrackUnsubscribed,a.dd.TrackSubscriptionPermissionChanged,a.dd.TrackSubscriptionFailed,a.dd.LocalTrackPublished,a.dd.LocalTrackUnpublished,a.dd.ConnectionQualityChanged,a.dd.IsSpeakingChanged,a.dd.ParticipantMetadataChanged,a.dd.ParticipantPermissionsChanged,a.dd.TrackMuted,a.dd.TrackUnmuted,a.dd.TrackPublished,a.dd.TrackUnpublished,a.dd.TrackStreamStateChanged,a.dd.TrackSubscriptionFailed,a.dd.TrackSubscriptionPermissionChanged,a.dd.TrackSubscriptionStatusChanged,a.dd.LocalTrackPublished,a.dd.LocalTrackUnpublished;var ec=l.getLogger("lk-components-js");function eu(e){return"object"==typeof e}function ea(e){return Array.isArray(e)&&e.filter(eu).length>0}function el(e){if(en(e))return e.publication;{let{source:t,name:r,participant:n}=e;if(t&&r)return n.getTrackPublications().find(e=>e.source===t&&e.trackName===r);if(r)return n.getTrackPublicationByName(r);if(t)return n.getTrackPublication(t);throw Error("At least one of source and name needs to be defined")}}function es(e,t,r=!0){let n=[e.localParticipant,...Array.from(e.remoteParticipants.values())],o=[];return n.forEach(e=>{t.forEach(t=>{let n=Array.from(e.trackPublications.values()).filter(e=>e.source===t&&(!r||e.track)).map(t=>({participant:e,publication:t,source:t.source}));o.push(...n)})}),{trackReferences:o,participants:n}}ec.setDefaultLevel("WARN"),new TextEncoder,new TextDecoder;var{load:ef,save:ed}=(i="lk-user-choices",{load:()=>(function(e){if("undefined"==typeof localStorage){ec.error("Local storage is not available.");return}try{let t=localStorage.getItem(e);if(!t){ec.warn(`Item with key ${e} does not exist in local storage.`);return}return JSON.parse(t)}catch(e){ec.error(`Error getting item from local storage: ${e}`);return}})(i),save:e=>(function(e,t){if("undefined"==typeof localStorage){ec.error("Local storage is not available.");return}try{localStorage.setItem(e,JSON.stringify(t))}catch(e){ec.error(`Error setting item to local storage: ${e}`)}})(i,e)});r(54221),"undefined"!=typeof window?c.useLayoutEffect:c.useEffect,r(44675);var ep=Object.defineProperty,eh=Object.defineProperties,ev=Object.getOwnPropertyDescriptors,eb=Object.getOwnPropertySymbols,ey=Object.prototype.hasOwnProperty,em=Object.prototype.propertyIsEnumerable,eg=(e,t,r)=>t in e?ep(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ew=(e,t)=>{for(var r in t||(t={}))ey.call(t,r)&&eg(e,r,t[r]);if(eb)for(var r of eb(t))em.call(t,r)&&eg(e,r,t[r]);return e},eT=(e,t)=>eh(e,ev(t)),eS=(e,t)=>{var r={};for(var n in e)ey.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&eb)for(var n of eb(e))0>t.indexOf(n)&&em.call(e,n)&&(r[n]=e[n]);return r},ek=(c.createContext(void 0),c.createContext(void 0));function eE(e){let t=c.useContext(ek),r=null!=e?e:t;if(!r)throw Error("No TrackRef, make sure you are inside a TrackRefContext or pass the TrackRef explicitly");return r}c.createContext(void 0);var eC=c.createContext(void 0);function ex(){let e=c.useContext(eC);if(!e)throw Error("tried to access room context outside of livekit room component");return e}function eP(e){let t=c.useContext(eC),r=null!=e?e:t;if(!r)throw Error("No room provided, make sure you are inside a Room context or pass the room explicitly");return r}var eO=c.createContext(void 0);function eQ(...e){let t=ew({},e[0]);for(let r=1;r<e.length;r++){let n=e[r];for(let e in n){let r=t[e],o=n[e];"function"==typeof r&&"function"==typeof o&&"o"===e[0]&&"n"===e[1]&&e.charCodeAt(2)>=65&&90>=e.charCodeAt(2)?t[e]=function(...e){return(...t)=>{for(let r of e)if("function"==typeof r)try{r(...t)}catch(e){console.error(e)}}}(r,o):("className"===e||"UNSAFE_className"===e)&&"string"==typeof r&&"string"==typeof o?t[e]=u(r,o):t[e]=void 0!==o?o:r}}return t}function e_(e){let t=eP(e);return function(e,t,r=!0){let[n,o]=c.useState(t);return c.useEffect(()=>{if(r&&o(t),"undefined"==typeof window||!e)return;let n=e.subscribe(o);return()=>n.unsubscribe()},[e,r]),n}(c.useMemo(()=>{var e;return(e=a.TQ.ConnectionStateChanged,new L(r=>{let n=(...e)=>{r.next(e)};return t.on(e,n),()=>{t.off(e,n)}})).pipe(D(([e])=>e),er(t.state))},[t]),t.state)}var eA={connect:!0,audio:!1,video:!1};function eR(e=[a.fQ.Source.Camera,a.fQ.Source.Microphone,a.fQ.Source.ScreenShare,a.fQ.Source.ScreenShareAudio,a.fQ.Source.Unknown],t={}){let r=eP(t.room),[n,o]=c.useState([]),[i,u]=c.useState([]),l=c.useMemo(()=>e.map(e=>eu(e)?e.source:e),[JSON.stringify(e)]);return c.useEffect(()=>{let e=(function(e,t,r){var n,o;let i=null!=(n=r.additionalRoomEvents)?n:ei,c=null==(o=r.onlySubscribed)||o;return(function(e,...t){return new L(r=>{let n=()=>{r.next(e)};return t.forEach(t=>{e.on(t,n)}),()=>{t.forEach(t=>{e.off(t,n)})}}).pipe(er(e))})(e,...Array.from(new Set([a.TQ.ParticipantConnected,a.TQ.ParticipantDisconnected,a.TQ.ConnectionStateChanged,a.TQ.LocalTrackPublished,a.TQ.LocalTrackUnpublished,a.TQ.TrackPublished,a.TQ.TrackUnpublished,a.TQ.TrackSubscriptionStatusChanged,...i]).values())).pipe(D(e=>{let r=es(e,t,c);return ec.debug(`TrackReference[] was updated. (length ${r.trackReferences.length})`,r),r}),er(es(e,t,c)))})(r,l,{additionalRoomEvents:t.updateOnlyOn,onlySubscribed:t.onlySubscribed}).subscribe(({trackReferences:e,participants:t})=>{ec.debug("setting track bundles",e,t),o(e),u(t)});return()=>e.unsubscribe()},[r,JSON.stringify(t.onlySubscribed),JSON.stringify(t.updateOnlyOn),JSON.stringify(e)]),c.useMemo(()=>{if(!ea(e))return n;{let t=function(e,t){let r=new Map;if(ea(e)){let n=e.filter(e=>e.withPlaceholder).map(e=>e.source);t.forEach(e=>{let t=e.getTrackPublications().map(e=>{var t;return null==(t=e.track)?void 0:t.source}).filter(e=>void 0!==e),o=Array.from(function(e,t){let r=new Set(e);for(let e of t)r.delete(e);return r}(new Set(n),new Set(t)));o.length>0&&r.set(e.identity,o)})}return r}(e,i),r=Array.from(n);return i.forEach(e=>{var o;t.has(e.identity)&&(null!=(o=t.get(e.identity))?o:[]).forEach(t=>{n.find(({participant:r,publication:n})=>e.identity===r.identity&&n.source===t)||(ec.debug(`Add ${t} placeholder for participant ${e.identity}.`),r.push({participant:e,source:t}))})}),r}},[n,i,e])}function eI(e){return void 0!==e}function eL(e,t={}){var r;let[n,o]=c.useState(el(e)),[i,u]=c.useState(null==n?void 0:n.isMuted),[l,s]=c.useState(null==n?void 0:n.isSubscribed),[f,d]=c.useState(null==n?void 0:n.track),[p,h]=c.useState("landscape"),v=c.useRef(),{className:b,trackObserver:y}=c.useMemo(()=>(function(e){var t;let r=el(e),n=(function(e,...t){return new L(r=>{let n=()=>{r.next(e)};return t.forEach(t=>{e.on(t,n)}),()=>{t.forEach(t=>{e.off(t,n)})}}).pipe(er(e))})(e.participant,a.dd.TrackMuted,a.dd.TrackUnmuted,a.dd.ParticipantPermissionsChanged,a.dd.TrackPublished,a.dd.TrackUnpublished,a.dd.LocalTrackPublished,a.dd.LocalTrackUnpublished,a.dd.MediaDevicesError,a.dd.TrackSubscriptionStatusChanged).pipe(D(e=>{let{isMicrophoneEnabled:t,isCameraEnabled:r,isScreenShareEnabled:n}=e,o=e.getTrackPublication(a.fQ.Source.Microphone);return{isCameraEnabled:r,isMicrophoneEnabled:t,isScreenShareEnabled:n,cameraTrack:e.getTrackPublication(a.fQ.Source.Camera),microphoneTrack:o,participant:e}})).pipe(D(()=>el(e)),er(r));return{className:(t=e.source===a.fQ.Source.Camera||e.source===a.fQ.Source.ScreenShare?"participant-media-video":"participant-media-audio",`lk-${t}`),trackObserver:n}})(e),[null!=(r=e.participant.sid)?r:e.participant.identity,e.source,en(e)&&e.publication.trackSid]);return c.useEffect(()=>{let e=y.subscribe(e=>{ec.debug("update track",e),o(e),u(null==e?void 0:e.isMuted),s(null==e?void 0:e.isSubscribed),d(null==e?void 0:e.track)});return()=>null==e?void 0:e.unsubscribe()},[y]),c.useEffect(()=>{var r,n;return f&&(v.current&&f.detach(v.current),(null==(r=t.element)?void 0:r.current)&&!(eo(e.participant)&&(null==f?void 0:f.kind)==="audio")&&f.attach(t.element.current)),v.current=null==(n=t.element)?void 0:n.current,()=>{v.current&&(null==f||f.detach(v.current))}},[f,t.element]),c.useEffect(()=>{var e,t;"number"==typeof(null==(e=null==n?void 0:n.dimensions)?void 0:e.width)&&"number"==typeof(null==(t=null==n?void 0:n.dimensions)?void 0:t.height)&&h(n.dimensions.width>n.dimensions.height?"landscape":"portrait")},[n]),{publication:n,isMuted:i,isSubscribed:l,track:f,elementProps:function(...e){return eQ(...e.filter(eI))}(t.props,ew({className:b,"data-lk-local-participant":e.participant.isLocal,"data-lk-source":null==n?void 0:n.source},(null==n?void 0:n.kind)==="video"&&{"data-lk-orientation":p}))}}var eU=c.forwardRef(function(e,t){var{onTrackClick:r,onClick:n,onSubscriptionStatusChanged:o,trackRef:i,manageSubscription:u}=e,l=eS(e,["onTrackClick","onClick","onSubscriptionStatusChanged","trackRef","manageSubscription"]);let s=eE(i),f=c.useRef(null);c.useImperativeHandle(t,()=>f.current);let d=function(e,t){var r;let n="current"in e,o=n?t:e,{threshold:i=0,root:u=null,rootMargin:a="0%",freezeOnceVisible:l=!1,initialIsIntersecting:s=!1}=o??{},[f,d]=(0,c.useState)(null),p=n?e.current:f,[h,v]=(0,c.useState)(()=>({isIntersecting:s,entry:void 0})),b=(0,c.useRef)();b.current=null==o?void 0:o.onChange;let y=(null==(r=h.entry)?void 0:r.isIntersecting)&&l;(0,c.useEffect)(()=>{let e;if(!p||!("IntersectionObserver"in window)||y)return;let t=new IntersectionObserver(r=>{let n=Array.isArray(t.thresholds)?t.thresholds:[t.thresholds];r.forEach(t=>{let r=t.isIntersecting&&n.some(e=>t.intersectionRatio>=e);v({isIntersecting:r,entry:t}),b.current&&b.current(r,t),r&&l&&e&&(e(),e=void 0)})},{threshold:i,root:u,rootMargin:a});return t.observe(p),()=>{t.disconnect()}},[p,JSON.stringify(i),u,a,y,l]);let m=(0,c.useRef)(null);if((0,c.useEffect)(()=>{var e;p||null==(e=h.entry)||!e.target||l||y||m.current===h.entry.target||(m.current=h.entry.target,v({isIntersecting:s,entry:void 0}))},[p,h.entry,l,y,s]),n)return h.entry;let g=[d,!!h.isIntersecting,h.entry];return g.ref=g[0],g.isIntersecting=g[1],g.entry=g[2],g}(f,{}),p=function(e,t){let[r,n]=(0,c.useState)(e);return(0,c.useEffect)(()=>{let t=setTimeout(()=>{n(e)},3e3);return()=>{clearTimeout(t)}},[e,3e3]),r}(d,0);c.useEffect(()=>{u&&s.publication instanceof a.E8&&(null==p?void 0:p.isIntersecting)===!1&&(null==d?void 0:d.isIntersecting)===!1&&s.publication.setSubscribed(!1)},[p,s,u]),c.useEffect(()=>{u&&s.publication instanceof a.E8&&(null==d?void 0:d.isIntersecting)===!0&&s.publication.setSubscribed(!0)},[d,s,u]);let{elementProps:h,publication:v,isSubscribed:b}=eL(s,{element:f,props:l});return c.useEffect(()=>{null==o||o(!!b)},[b,o]),c.createElement("video",eT(ew({ref:f},h),{muted:!0,onClick:e=>{null==n||n(e),null==r||r({participant:null==s?void 0:s.participant,track:v})}}))}),eN=c.forwardRef(function(e,t){var{trackRef:r,onSubscriptionStatusChanged:n,volume:o,muted:i}=e,u=eS(e,["trackRef","onSubscriptionStatusChanged","volume","muted"]);let l=eE(r),s=c.useRef(null);c.useImperativeHandle(t,()=>s.current);let{elementProps:f,isSubscribed:d,track:p,publication:h}=eL(l,{element:s,props:u});return c.useEffect(()=>{null==n||n(!!d)},[d,n]),c.useEffect(()=>{void 0!==p&&void 0!==o&&(p instanceof a.rl?p.setVolume(o):ec.warn("Volume can only be set on remote audio tracks."))},[o,p]),c.useEffect(()=>{void 0!==h&&void 0!==i&&(h instanceof a.E8?h.setEnabled(!i):ec.warn("Can only call setEnabled on remote track publications."))},[i,h,p]),c.createElement("audio",ew({ref:s},f))}),ej=c.forwardRef(function(e,t){let{room:r,htmlProps:n}=function(e){let t=ew(ew({},eA),e),{token:r,serverUrl:n,options:o,room:i,connectOptions:u,connect:l,audio:s,video:f,screen:d,onConnected:p,onDisconnected:h,onError:v,onMediaDeviceFailure:b,onEncryptionError:y,simulateParticipants:m}=t,g=eS(t,["token","serverUrl","options","room","connectOptions","connect","audio","video","screen","onConnected","onDisconnected","onError","onMediaDeviceFailure","onEncryptionError","simulateParticipants"]);o&&i&&ec.warn("when using a manually created room, the options object will be ignored. set the desired options directly when creating the room instead.");let[w,T]=c.useState();c.useEffect(()=>{T(null!=i?i:new a.du(o))},[i]);let S=c.useMemo(()=>{let{className:e}={className:"lk-room-container"};return eQ(g,{className:e})},[g]);return c.useEffect(()=>{if(!w)return;let e=()=>{let e=w.localParticipant;ec.debug("trying to publish local tracks"),Promise.all([e.setMicrophoneEnabled(!!s,"boolean"!=typeof s?s:void 0),e.setCameraEnabled(!!f,"boolean"!=typeof f?f:void 0),e.setScreenShareEnabled(!!d,"boolean"!=typeof d?d:void 0)]).catch(e=>{ec.warn(e),null==v||v(e)})},t=e=>{let t=a.CB.getFailure(e);null==b||b(t)},r=e=>{null==y||y(e)};return w.on(a.TQ.SignalConnected,e).on(a.TQ.MediaDevicesError,t).on(a.TQ.EncryptionError,r),()=>{w.off(a.TQ.SignalConnected,e).off(a.TQ.MediaDevicesError,t).off(a.TQ.EncryptionError,r)}},[w,s,f,d,v,y,b]),c.useEffect(()=>{if(w){if(m){w.simulateParticipants({participants:{count:m},publish:{audio:!0,useRealTracks:!0}});return}if(!r){ec.debug("no token yet");return}if(!n){ec.warn("no livekit url provided"),null==v||v(Error("no livekit url provided"));return}l?(ec.debug("connecting"),w.connect(n,r,u).catch(e=>{ec.warn(e),null==v||v(e)})):(ec.debug("disconnecting because connect is false"),w.disconnect())}},[l,r,JSON.stringify(u),w,v,n,m]),c.useEffect(()=>{if(!w)return;let e=e=>{switch(e){case a.em.Disconnected:h&&h();break;case a.em.Connected:p&&p()}};return w.on(a.TQ.ConnectionStateChanged,e),()=>{w.off(a.TQ.ConnectionStateChanged,e)}},[r,p,h,w]),c.useEffect(()=>{if(w)return()=>{ec.info("disconnecting on onmount"),w.disconnect()}},[w]),{room:w,htmlProps:S}}(e);return c.createElement("div",ew({ref:t},n),r&&c.createElement(eC.Provider,{value:r},c.createElement(eO.Provider,{value:e.featureFlags},e.children)))});function eM({volume:e,muted:t}){let r=eR([a.fQ.Source.Microphone,a.fQ.Source.ScreenShareAudio,a.fQ.Source.Unknown],{updateOnlyOn:[],onlySubscribed:!0}).filter(e=>!eo(e.participant)&&e.publication.kind===a.fQ.Kind.Audio);return c.createElement("div",{style:{display:"none"}},r.map(r=>c.createElement(eN,{key:function(e){if("string"==typeof e||"number"==typeof e)return`${e}`;if(e&&e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&void 0===e.publication)return`${e.participant.identity}_${e.source}_placeholder`;if(en(e))return`${e.participant.identity}_${e.publication.source}_${e.publication.trackSid}`;throw Error(`Can't generate a id for the given track reference: ${e}`)}(r),trackRef:r,volume:e,muted:t})))}}}]);
//# sourceMappingURL=6885.10b1e88a53214fe8.js.map