(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9457],{82920:function(e,t){"use strict";t.ZP=function(e,t){if(t)return e;throw Error("Unhandled discriminated union member: "+JSON.stringify(e))}},75286:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return D},default:function(){return T}});var r=n(82823),s=n(21904),i=n(85734),o=n(5443),a=n(49217),l=n(52868),c=n(83252),d=n(89987),u=n(88454),f=n(56029),m=n(2933),x=n(14816),h=n(48580),g=n(43128),p=n(92379),j=n(25940),y=n(72256),v=n(67165),b=n(44230),w=n(651);let N=e=>{let{gizmoId:t,limit:n,cursor:r}=e;return(0,x.a)({queryFn:async()=>f.U.listVersions({gizmoId:t}),queryKey:["gizmo","versions",{gizmoId:t,limit:n,cursor:r}]})},O=(0,p.memo)(function(e){let{gizmoId:t,onSelectVersion:n}=e,{value:r}=(0,h.sB)("chatgpt-gizmo-version-history");return t&&r?(0,w.jsx)(z,{gizmoId:t,onSelectVersion:n}):null});function z(e){let{gizmoId:t,onSelectVersion:n}=e,r=(0,g.useRouter)(),{data:s}=N({gizmoId:t}),i=s?s.items.reduce((e,t)=>{let n=new Date(t.updated_at),r="".concat(n.getFullYear(),"-").concat(n.getMonth()+1,"-").concat(n.getDate());return e[r]||(e[r]=[]),e[r].push(t),e},{}):null,o=e=>{r.push("/g/".concat(t,"/view?version=").concat(e))};return i?(0,w.jsx)("div",{className:"relative h-full w-screen max-w-2xs",children:(0,w.jsx)("div",{className:"flex h-full max-w-2xs flex-col overflow-y-scroll bg-token-sidebar-surface-primary py-6 shadow-xl",children:(0,w.jsx)("div",{className:"relative flex-1 px-4 sm:px-6",children:Object.keys(i).map((e,t)=>{let r=i[e];return(0,w.jsx)(k,{date:e,entries:r,onSelectVersion:n,onRestoreVersion:o},t)})})})}):null}function k(e){let{date:t,entries:n,onSelectVersion:r,onRestoreVersion:s}=e;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:"border-b border-token-border-medium py-2 font-semibold uppercase text-token-text-secondary",children:(0,w.jsx)(j.Ji,{value:t,dateStyle:"medium"})}),(0,w.jsx)("div",{className:"flex flex-col space-y-2",children:n.map((e,t)=>(0,w.jsxs)("div",{className:"flex flex-row items-center justify-between border-b border-token-border-medium",onClick:()=>r(e.version),children:[(0,w.jsx)("span",{className:"grow p-2 hover:cursor-pointer hover:bg-token-sidebar-surface-tertiary",children:(0,w.jsx)(j.Ji,{value:e.updated_at,timeStyle:"short"})}),(0,w.jsx)(_,{onRestoreVersion:()=>{s(e.version)}})]},t))})]})}function _(e){let{onRestoreVersion:t}=e;return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(v.d,{sideOffset:8,triggerButton:(0,w.jsx)("button",{color:"secondary",className:"rounded-lg px-3 py-2 text-token-text-primary duration-100 ease-in hover:bg-token-sidebar-surface-tertiary active:scale-[0.9]",children:(0,w.jsx)(b.nWS,{className:"icon-md"})}),children:(0,w.jsxs)(v.Z.Item,{className:"items-center",disabled:!1,onClick:t,children:[(0,w.jsx)(b.Ezi,{className:"icon-md"}),(0,w.jsx)(y.Z,{id:"gizmoVersionHistory.restoreVersionLabel",defaultMessage:"Restore this version"})]})})})}var P=n(27860),C=n(61888);let M=e=>{let{gizmoId:t,version:n}=e;return(0,x.a)({queryFn:async()=>f.U.getVersion({gizmoId:t,version:n}),queryKey:["gizmo","version",{gizmoId:t,version:n}]})},Z=(e,t)=>"/gpts/editor/".concat(e,"?version=").concat(t);function R(e){var t;let{gizmoId:n}=e,{0:o,1:a}=(0,p.useState)(null),l=(0,g.useRouter)(),{data:c}=(0,r.b9)(n),d=null==c||null===(t=c.gizmo.current_user_permission)||void 0===t?void 0:t.can_write,u=(0,r.YR)(),{0:f,1:x}=(0,p.useState)(!1),h=()=>{o?l.push(Z(n,o)):l.push((0,P.AA)(n))};return(0,w.jsxs)("div",{className:"flex h-screen w-full flex-col items-center",children:[(0,w.jsx)("div",{className:"relative flex h-16 w-full items-center justify-between gap-2 border-b border-token-border-medium px-3",children:c&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{className:"flex cursor-pointer items-center gap-2",onClick:()=>l.back(),children:[(0,w.jsx)(b.Y1T,{className:"icon-lg"}),(0,w.jsx)("div",{className:"font-semibold",children:d?(0,w.jsx)(y.Z,{id:"gizmoReadOnly.versionHistoryTitle",defaultMessage:"Version History"}):(0,w.jsx)(y.Z,{id:"gizmoReadOnly.configurationTitle",defaultMessage:"Configuration"})})]}),(0,w.jsx)("div",{className:"mr-4 flex items-center gap-2",children:d?(0,w.jsx)(m.cY,{color:"secondary",onClick:()=>{o&&o!==c.gizmo.live_version&&c.tools.find(e=>{var t;return e.type===s.qK.JIT_PLUGIN&&(null===(t=e.metadata.auth)||void 0===t?void 0:t.type)!==i.Jv.None})?x(!0):h()},children:(0,w.jsx)(y.Z,{id:"gizmo.readonly.restoreVersion",defaultMessage:"Restore this version"})}):(0,w.jsx)(m.cY,{color:"secondary",loading:u.isPending,onClick:async()=>{let e=await u.mutateAsync({gizmoId:n});e.gizmo.id&&l.push("/gpts/editor/".concat(e.gizmo.id))},children:(0,w.jsx)(y.Z,{id:"gizmo.readonly.duplicate",defaultMessage:"Duplicate"})})})]})}),(0,w.jsxs)("div",{className:"flex h-full w-full items-center",children:[d&&(0,w.jsx)(O,{gizmoId:n,onSelectVersion:e=>{a(e)}}),(0,w.jsx)(I,{gizmoId:n,version:o})]}),f&&(0,w.jsx)(S,{onClose:()=>{x(!1)},onContinue:h})]})}function S(e){let{onClose:t,onContinue:n}=e,{0:r,1:s}=(0,p.useState)(!1);return(0,w.jsx)(a.Z,{isOpen:!0,onClose:t,type:"warning",showCloseButton:!0,title:(0,w.jsx)(y.Z,{id:"gizmoReadOnly.authModalWarningTitle",defaultMessage:"Reset Authentication for Custom Actions"}),primaryButton:(0,w.jsx)(o.z,{onClick:()=>{s(!0),n()},loading:r,color:"secondary",children:(0,w.jsx)(y.Z,{id:"gizmoReadOnly.authModalContinueButton",defaultMessage:"Continue"})}),secondaryButton:(0,w.jsx)(o.z,{onClick:t,color:"secondary",children:(0,w.jsx)(y.Z,{id:"gizmoReadOnly.authModalCancelButton",defaultMessage:"Cancel"})}),size:"normal",children:(0,w.jsx)(y.Z,{id:"gizmoReadOnly.authModalWarningBody",defaultMessage:"Restoring this version will reset authentication of your custom actions. You may need to reconfigure each custom action afterwards."})})}function I(e){var t,n,r,i;let{gizmoId:o,version:a}=e,{data:f}=M({gizmoId:o,version:a}),{0:m,1:x}=(0,p.useState)(null);if(!f)return null;let h=f.tools.filter(e=>e.type===s.qK.JIT_PLUGIN);return(0,w.jsx)("div",{className:"flex max-h-[80vh] flex-grow justify-center overflow-y-auto",children:(0,w.jsxs)("div",{className:"flex w-full max-w-2xl flex-col text-sm",children:[(0,w.jsx)(d.hj,{className:"self-center",children:(0,w.jsx)(c.Z,{src:f.gizmo.display.profile_picture_url,isFirstParty:!1,className:"h-12 w-12"})}),(0,w.jsxs)(d.hj,{children:[(0,w.jsx)(d.lX,{label:(0,w.jsx)(y.Z,{id:"gizmo.readonly.nameLabel",defaultMessage:"Name"})}),(0,w.jsx)(d.yt,{type:"text",value:null!==(t=f.gizmo.display.name)&&void 0!==t?t:"",disabled:!0,className:"bg-token-main-surface-secondary"})]}),(0,w.jsxs)(d.hj,{children:[(0,w.jsx)(d.lX,{label:(0,w.jsx)(y.Z,{id:"gizmo.readonly.descriptionLabel",defaultMessage:"Description"})}),(0,w.jsx)(d.yt,{type:"text",value:null!==(n=f.gizmo.display.description)&&void 0!==n?n:"",disabled:!0,className:"bg-token-main-surface-secondary"})]}),(0,w.jsxs)(d.hj,{children:[(0,w.jsx)(d.lX,{label:(0,w.jsx)(y.Z,{id:"gizmo.readonly.instructionsLabel",defaultMessage:"Instructions"})}),(0,w.jsx)(d.B1,{className:"resize-none bg-token-main-surface-secondary",rows:8,value:null!==(r=f.gizmo.instructions)&&void 0!==r?r:"",disabled:!0})]}),f.gizmo.display.prompt_starters&&f.gizmo.display.prompt_starters.length>0&&(0,w.jsxs)(d.hj,{children:[(0,w.jsx)(d.lX,{label:(0,w.jsx)(y.Z,{id:"gizmo.readonly.conversationStartersLabel",defaultMessage:"Conversation starters"})}),f.gizmo.display.prompt_starters.map((e,t)=>(0,w.jsx)(d.yt,{type:"text",value:e,disabled:!0,className:"resize-none bg-token-main-surface-secondary"},t))]}),f.files&&f.files.length>0&&(0,w.jsxs)(d.hj,{children:[(0,w.jsx)(d.lX,{label:(0,w.jsx)(y.Z,{id:"gizmo.readonly.knowledgeLabel",defaultMessage:"Knowledge"})}),f.files.map((e,t)=>(0,w.jsx)(l.Z,{file:e.name,fileId:e.id},t))]}),(0,w.jsxs)(d.hj,{children:[(0,w.jsx)(d.lX,{label:(0,w.jsx)(y.Z,{id:"gizmo.readonly.capabilitiesLabel",defaultMessage:"Capabilities"})}),(0,w.jsx)(u.W,{enabledTools:f.tools,onEnabledToolsChange:C.noop})]}),h&&h.length>0&&(0,w.jsxs)(d.hj,{children:[(0,w.jsx)(d.lX,{label:(0,w.jsx)(y.Z,{id:"gizmo.readonly.actionsLabel",defaultMessage:"Actions"})}),h.map((e,t)=>(0,w.jsx)(d.r,{isDisabled:!1,actionTool:e,onShowActionsEditor:()=>{(null==m?void 0:m.metadata.action_id)===e.metadata.action_id?x(null):x(e)}},t)),m&&(0,w.jsx)("textarea",{readOnly:!0,value:null!==(i=m.metadata.raw_spec)&&void 0!==i?i:"",className:"mb-16 block h-96 w-full border-t-0 border-token-main-surface-tertiary bg-transparent p-2 font-mono text-xs text-token-text-primary"})]})]})})}var E=n(4702),D=!0;function T(){var e,t;let n=(0,E.t)(),s=(0,g.useRouter)(),i=null!==(e=null===(t=s.query)||void 0===t?void 0:t.gizmoId)&&void 0!==e?e:"",o=(0,r.CR)(i),{value:a}=(0,h.sB)("chatgpt-gizmo-version-history");return(0,p.useEffect)(()=>{null!=n&&n.isFree()&&s.push("/")},[n,s]),a?(0,w.jsx)(R,{gizmoId:o}):null}},38417:function(e,t,n){"use strict";var r=n(48538),s=n(5443),i=n(44230),o=n(651);t.Z=e=>{let{label:t,value:n,onCopied:a}=e,l=()=>{(0,r.v)(n),a()};return(0,o.jsxs)("div",{className:"flex flex-col space-y-2",children:[void 0!==t&&(0,o.jsx)("label",{className:"font-semibold",children:t}),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("div",{onClick:l,className:"w-full cursor-pointer break-all rounded-lg bg-token-main-surface-tertiary px-4 py-2 font-mono text-sm text-token-text-primary",children:n}),(0,o.jsx)(s.z,{color:"ghost",onClick:l,icon:i.TIy})]})]})}},81816:function(e,t,n){"use strict";n.d(t,{C:function(){return s}});var r=n(4702);function s(e){var t,n;let s=(0,r.hz)();return!(null===(t=(0,r.t)())||void 0===t?void 0:t.isWorkspaceAccount())||null!==(n=null==s?void 0:s.includes(e))&&void 0!==n&&n}},65938:function(e,t,n){"use strict";n.d(t,{JQ:function(){return a},Ul:function(){return o},i5:function(){return l}});var r=n(21904),s=n(82920),i=n(651);function o(e,t){switch(e){case r.PO.GDRIVE_SYNC_CONNECTOR:case r.PO.GDRIVE:return"Google Drive";case r.PO.O365:case r.PO.O365_PERSONAL:case r.PO.O365_BUSINESS:if(e===r.PO.O365_PERSONAL){var n;return null!==(n=null==t?void 0:t.formatMessage({defaultMessage:"Microsoft OneDrive personal",description:"Name of a service, Microsoft OneDrive, with a short, non-branded descriptor indicating that this is the consumer version of the service instead of the business one",id:"ContextConnector.OneDrivePersonal.name"}))&&void 0!==n?n:"Microsoft OneDrive personal"}return"Microsoft OneDrive"}}function a(e,t){switch(e){case r.PO.GDRIVE_SYNC_CONNECTOR:case r.PO.GDRIVE:switch(t){case"doc":case"docx":return"Google Docs";case"xls":case"xlsx":return"Google Sheets";case"ppt":case"pptx":return"Google Slides";default:return"Google Drive"}case r.PO.O365:case r.PO.O365_PERSONAL:case r.PO.O365_BUSINESS:switch(t){case"doc":case"docx":return"Microsoft Word";case"xls":case"xlsx":return"Microsoft Excel";case"ppt":case"pptx":return"Microsoft PowerPoint";default:return"Microsoft OneDrive"}}(0,s.ZP)(e)}function l(e){let{contextConnector:t,extension:n}=e;return(0,i.jsx)(i.Fragment,{children:a(t,n)})}},83252:function(e,t,n){"use strict";n.d(t,{M:function(){return c},Z:function(){return l}});var r=n(55257),s=n(44230),i=n(82823),o=n(16645),a=n(651);function l(e){let{isFirstParty:t,src:n,alt:i,className:o}=e;return(0,a.jsx)("div",{className:o,children:null!=n?(0,a.jsx)("div",{className:"gizmo-shadow-stroke overflow-hidden rounded-full",children:(0,a.jsx)("img",{src:n,className:"h-full w-full bg-token-main-surface-secondary",alt:null!=i?i:"GPT",width:80,height:80})}):(0,a.jsx)("div",{className:"gizmo-shadow-stroke relative flex h-full items-center justify-center rounded-full bg-token-main-surface-primary text-token-text-primary",children:t?(0,a.jsx)(r.nI,{className:"h-2/3 w-2/3"}):(0,a.jsx)(s.uy2,{className:"h-2/3 w-2/3 text-gray-400"})})})}function c(e){var t,n;let{gizmoId:r,className:s}=e,{data:c}=(0,i.b9)(r);return(0,a.jsx)(l,{src:null==c?void 0:c.gizmo.display.profile_picture_url,isFirstParty:null!==(t=null==c||null===(n=c.gizmo.tags)||void 0===n?void 0:n.includes(o.U9.FirstParty))&&void 0!==t&&t,className:s})}},5994:function(e,t,n){"use strict";n.d(t,{Dd:function(){return r},L5:function(){return i},P_:function(){return a},aI:function(){return o},vi:function(){return l},zf:function(){return s}});let r="ChatGPT",s="Untitled",i=10,o=50,a=300,l=8e3},2933:function(e,t,n){"use strict";n.d(t,{QT:function(){return j},Xb:function(){return b},cY:function(){return v},f8:function(){return w},y4:function(){return y}});var r,s=n(17379),i=n(94521),o=n(41141),a=n(71840),l=n(98131),c=n(19841),d=n(92379),u=n(74091),f=n(5443),m=n(62484),x=n(651);let h=["tooltip","className"];function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let j=u.Z.div(r||(r=(0,o.Z)(["sticky top-0 juice:p-3 mb-1.5 flex items-center justify-between z-10 h-14 p-2 font-semibold bg-token-main-surface-primary"])));function y(e){let t=(0,x.jsx)(f.z,p(p({color:"secondary",size:"small"},e),{},{className:(0,c.default)("flex items-center justify-center whitespace-nowrap",e.className)}));return null!=e.label?(0,x.jsx)(m.u,{side:"left",label:e.label,className:"h-fit w-fit",children:t}):t}let v=(0,d.forwardRef)(function(e,t){var n;let{tooltip:r,className:i}=e,o=(0,s.Z)(e,h),a=(0,x.jsx)(f.z,p(p({color:null!==(n=e.color)&&void 0!==n?n:"secondary",size:"medium"},o),{},{className:i,ref:t}));return null!=r?(0,x.jsx)(m.u,{label:r,children:a}):a});function b(e){let{label:t,disabled:n=!1,tooltipText:r,value:s}=e,i=(0,d.useId)();return(0,x.jsx)("div",{className:(0,c.default)("flex items-center gap-2",n?"opacity-50":""),children:(0,x.jsx)(m.E,{disabled:null==r,label:r,side:"right",children:(0,x.jsxs)("label",{htmlFor:i,className:"flex cursor-pointer items-center gap-1",children:[(0,x.jsx)(l.ck,{id:i,value:s,disabled:n,className:"mr-1 flex h-5 w-5 shrink-0 items-center justify-center rounded-full border border-gray-500 bg-white dark:border-gray-600 dark:bg-gray-700",children:(0,x.jsx)(l.z$,{className:"h-2 w-2 rounded-full bg-gray-950 dark:bg-white"})}),t]})})})}function w(e){return(0,x.jsx)(a.Z,p(p({},e),{},{className:(0,c.default)("!rounded border-gray-950 checked:!bg-black dark:border-gray-600 dark:bg-gray-700",e.className)}))}},83650:function(e,t,n){"use strict";n.d(t,{U:function(){return s},doConnectorOauthRedirect:function(){return i},w:function(){return o}});var r=n(93223);async function s(e,t){let n="".concat("https://chat.openai.com","/aip/").concat(e.id,"/oauth/callback"),s=await r.Z.pluginOauthRedirect(e.id,n,t);window.location.href=s.redirect_uri}async function i(e,t){let n="".concat(window.location.origin,"/ccc/").concat(e.id,"/oauth/callback"),s=await r.Z.connectorOauthRedirect(e.id,n,t);window.location.href=s.redirect_uri}async function o(e){await r.Z.deleteUserConnectedApp(e),window.location.reload()}},72465:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/g/[gizmoId]/view",function(){return n(75286)}])}},function(e){e.O(0,[6271,2349,1783,4834,5165,8798,9987,2888,9774,179],function(){return e(e.s=72465)}),_N_E=e.O()}]);
//# sourceMappingURL=view-a4ea39712dc79461.js.map