(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9457,45],{82920:function(e,t){"use strict";t.ZP=function(e,t){if(t)return e;throw Error("Unhandled discriminated union member: "+JSON.stringify(e))}},75286:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSP:function(){return E},default:function(){return T}});var n=r(82823),s=r(21904),a=r(85734),i=r(5443),o=r(49217),l=r(52868),c=r(83252),d=r(89987),u=r(88454),f=r(56029),m=r(2933),x=r(14816),g=r(48580),p=r(43128),b=r(92379),h=r(25940),j=r(72256),y=r(67165),v=r(66246),w=r(651);let k=e=>{let{gizmoId:t,limit:r,cursor:n}=e;return(0,x.a)({queryFn:async()=>f.U.listVersions({gizmoId:t}),queryKey:["gizmo","versions",{gizmoId:t,limit:r,cursor:n}]})},N=(0,b.memo)(function(e){let{gizmoId:t,onSelectVersion:r}=e,{value:n}=(0,g.sB)("chatgpt-gizmo-version-history");return t&&n?(0,w.jsx)(z,{gizmoId:t,onSelectVersion:r}):null});function z(e){let{gizmoId:t,onSelectVersion:r}=e,n=(0,p.useRouter)(),{data:s}=k({gizmoId:t}),a=s?s.items.reduce((e,t)=>{let r=new Date(t.updated_at),n="".concat(r.getFullYear(),"-").concat(r.getMonth()+1,"-").concat(r.getDate());return e[n]||(e[n]=[]),e[n].push(t),e},{}):null,i=e=>{n.push("/g/".concat(t,"/view?version=").concat(e))};return a?(0,w.jsx)("div",{className:"relative h-full w-screen max-w-2xs",children:(0,w.jsx)("div",{className:"flex h-full max-w-2xs flex-col overflow-y-scroll bg-token-sidebar-surface-primary py-6 shadow-xl",children:(0,w.jsx)("div",{className:"relative flex-1 px-4 sm:px-6",children:Object.keys(a).map((e,t)=>{let n=a[e];return(0,w.jsx)(O,{date:e,entries:n,onSelectVersion:r,onRestoreVersion:i},t)})})})}):null}function O(e){let{date:t,entries:r,onSelectVersion:n,onRestoreVersion:s}=e;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:"border-b border-token-border-medium py-2 font-semibold uppercase text-token-text-secondary",children:(0,w.jsx)(h.Ji,{value:t,dateStyle:"medium"})}),(0,w.jsx)("div",{className:"flex flex-col space-y-2",children:r.map((e,t)=>(0,w.jsxs)("div",{className:"flex flex-row items-center justify-between border-b border-token-border-medium",onClick:()=>n(e.version),children:[(0,w.jsx)("span",{className:"grow p-2 hover:cursor-pointer hover:bg-token-sidebar-surface-tertiary",children:(0,w.jsx)(h.Ji,{value:e.updated_at,timeStyle:"short"})}),(0,w.jsx)(Z,{onRestoreVersion:()=>{s(e.version)}})]},t))})]})}function Z(e){let{onRestoreVersion:t}=e;return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(y.d,{sideOffset:8,triggerButton:(0,w.jsx)("button",{color:"secondary",className:"rounded-lg px-3 py-2 text-token-text-primary duration-100 ease-in hover:bg-token-sidebar-surface-tertiary active:scale-[0.9]",children:(0,w.jsx)(v.nWS,{className:"icon-md"})}),children:(0,w.jsxs)(y.Z.Item,{className:"items-center",disabled:!1,onClick:t,children:[(0,w.jsx)(v.Ezi,{className:"icon-md"}),(0,w.jsx)(j.Z,{id:"gizmoVersionHistory.restoreVersionLabel",defaultMessage:"Restore this version"})]})})})}var _=r(27860),C=r(61888);let P=e=>{let{gizmoId:t,version:r}=e;return(0,x.a)({queryFn:async()=>f.U.getVersion({gizmoId:t,version:r}),queryKey:["gizmo","version",{gizmoId:t,version:r}]})},S=(e,t)=>"/gpts/editor/".concat(e,"?version=").concat(t);function R(e){var t;let{gizmoId:r}=e,{0:i,1:o}=(0,b.useState)(null),l=(0,p.useRouter)(),{data:c}=(0,n.b9)(r),d=null==c||null===(t=c.gizmo.current_user_permission)||void 0===t?void 0:t.can_write,u=(0,n.YR)(),{0:f,1:x}=(0,b.useState)(!1),g=()=>{i?l.push(S(r,i)):l.push((0,_.AA)(r))};return(0,w.jsxs)("div",{className:"flex h-screen w-full flex-col items-center",children:[(0,w.jsx)("div",{className:"relative flex h-16 w-full items-center justify-between gap-2 border-b border-token-border-medium px-3",children:c&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{className:"flex cursor-pointer items-center gap-2",onClick:()=>l.back(),children:[(0,w.jsx)(v.Y1T,{className:"icon-lg"}),(0,w.jsx)("div",{className:"font-semibold",children:d?(0,w.jsx)(j.Z,{id:"gizmoReadOnly.versionHistoryTitle",defaultMessage:"Version History"}):(0,w.jsx)(j.Z,{id:"gizmoReadOnly.configurationTitle",defaultMessage:"Configuration"})})]}),(0,w.jsx)("div",{className:"mr-4 flex items-center gap-2",children:d?(0,w.jsx)(m.cY,{color:"secondary",onClick:()=>{i&&i!==c.gizmo.live_version&&c.tools.find(e=>{var t;return e.type===s.qK.JIT_PLUGIN&&(null===(t=e.metadata.auth)||void 0===t?void 0:t.type)!==a.Jv.None})?x(!0):g()},children:(0,w.jsx)(j.Z,{id:"gizmo.readonly.restoreVersion",defaultMessage:"Restore this version"})}):(0,w.jsx)(m.cY,{color:"secondary",loading:u.isPending,onClick:async()=>{let e=await u.mutateAsync({gizmoId:r});e.gizmo.id&&l.push("/gpts/editor/".concat(e.gizmo.id))},children:(0,w.jsx)(j.Z,{id:"gizmo.readonly.duplicate",defaultMessage:"Duplicate"})})})]})}),(0,w.jsxs)("div",{className:"flex h-full w-full items-center",children:[d&&(0,w.jsx)(N,{gizmoId:r,onSelectVersion:e=>{o(e)}}),(0,w.jsx)(F,{gizmoId:r,version:i})]}),f&&(0,w.jsx)(M,{onClose:()=>{x(!1)},onContinue:g})]})}function M(e){let{onClose:t,onContinue:r}=e,{0:n,1:s}=(0,b.useState)(!1);return(0,w.jsx)(o.Z,{isOpen:!0,onClose:t,type:"warning",showCloseButton:!0,title:(0,w.jsx)(j.Z,{id:"gizmoReadOnly.authModalWarningTitle",defaultMessage:"Reset Authentication for Custom Actions"}),primaryButton:(0,w.jsx)(i.z,{onClick:()=>{s(!0),r()},loading:n,color:"secondary",children:(0,w.jsx)(j.Z,{id:"gizmoReadOnly.authModalContinueButton",defaultMessage:"Continue"})}),secondaryButton:(0,w.jsx)(i.z,{onClick:t,color:"secondary",children:(0,w.jsx)(j.Z,{id:"gizmoReadOnly.authModalCancelButton",defaultMessage:"Cancel"})}),size:"normal",children:(0,w.jsx)(j.Z,{id:"gizmoReadOnly.authModalWarningBody",defaultMessage:"Restoring this version will reset authentication of your custom actions. You may need to reconfigure each custom action afterwards."})})}function F(e){var t,r,n,a;let{gizmoId:i,version:o}=e,{data:f}=P({gizmoId:i,version:o}),{0:m,1:x}=(0,b.useState)(null);if(!f)return null;let g=f.tools.filter(e=>e.type===s.qK.JIT_PLUGIN);return(0,w.jsx)("div",{className:"flex max-h-[80vh] flex-grow justify-center overflow-y-auto",children:(0,w.jsxs)("div",{className:"flex w-full max-w-2xl flex-col text-sm",children:[(0,w.jsx)(d.hj,{className:"self-center",children:(0,w.jsx)(c.Z,{src:f.gizmo.display.profile_picture_url,isFirstParty:!1,className:"h-12 w-12"})}),(0,w.jsxs)(d.hj,{children:[(0,w.jsx)(d.lX,{label:(0,w.jsx)(j.Z,{id:"gizmo.readonly.nameLabel",defaultMessage:"Name"})}),(0,w.jsx)(d.yt,{type:"text",value:null!==(t=f.gizmo.display.name)&&void 0!==t?t:"",disabled:!0,className:"bg-token-main-surface-secondary"})]}),(0,w.jsxs)(d.hj,{children:[(0,w.jsx)(d.lX,{label:(0,w.jsx)(j.Z,{id:"gizmo.readonly.descriptionLabel",defaultMessage:"Description"})}),(0,w.jsx)(d.yt,{type:"text",value:null!==(r=f.gizmo.display.description)&&void 0!==r?r:"",disabled:!0,className:"bg-token-main-surface-secondary"})]}),(0,w.jsxs)(d.hj,{children:[(0,w.jsx)(d.lX,{label:(0,w.jsx)(j.Z,{id:"gizmo.readonly.instructionsLabel",defaultMessage:"Instructions"})}),(0,w.jsx)(d.B1,{className:"resize-none bg-token-main-surface-secondary",rows:8,value:null!==(n=f.gizmo.instructions)&&void 0!==n?n:"",disabled:!0})]}),f.gizmo.display.prompt_starters&&f.gizmo.display.prompt_starters.length>0&&(0,w.jsxs)(d.hj,{children:[(0,w.jsx)(d.lX,{label:(0,w.jsx)(j.Z,{id:"gizmo.readonly.conversationStartersLabel",defaultMessage:"Conversation starters"})}),f.gizmo.display.prompt_starters.map((e,t)=>(0,w.jsx)(d.yt,{type:"text",value:e,disabled:!0,className:"resize-none bg-token-main-surface-secondary"},t))]}),f.files&&f.files.length>0&&(0,w.jsxs)(d.hj,{children:[(0,w.jsx)(d.lX,{label:(0,w.jsx)(j.Z,{id:"gizmo.readonly.knowledgeLabel",defaultMessage:"Knowledge"})}),f.files.map((e,t)=>(0,w.jsx)(l.Z,{file:e.name,fileId:e.id},t))]}),(0,w.jsxs)(d.hj,{children:[(0,w.jsx)(d.lX,{label:(0,w.jsx)(j.Z,{id:"gizmo.readonly.capabilitiesLabel",defaultMessage:"Capabilities"})}),(0,w.jsx)(u.W,{enabledTools:f.tools,onEnabledToolsChange:C.noop})]}),g&&g.length>0&&(0,w.jsxs)(d.hj,{children:[(0,w.jsx)(d.lX,{label:(0,w.jsx)(j.Z,{id:"gizmo.readonly.actionsLabel",defaultMessage:"Actions"})}),g.map((e,t)=>(0,w.jsx)(d.r,{isDisabled:!1,actionTool:e,onShowActionsEditor:()=>{(null==m?void 0:m.metadata.action_id)===e.metadata.action_id?x(null):x(e)}},t)),m&&(0,w.jsx)("textarea",{readOnly:!0,value:null!==(a=m.metadata.raw_spec)&&void 0!==a?a:"",className:"mb-16 block h-96 w-full border-t-0 border-token-main-surface-tertiary bg-transparent p-2 font-mono text-xs text-token-text-primary"})]})]})})}var I=r(4702),E=!0;function T(){var e,t;let r=(0,I.t)(),s=(0,p.useRouter)(),a=null!==(e=null===(t=s.query)||void 0===t?void 0:t.gizmoId)&&void 0!==e?e:"",i=(0,n.CR)(a),{value:o}=(0,g.sB)("chatgpt-gizmo-version-history");return(0,b.useEffect)(()=>{null!=r&&r.isFree()&&s.push("/")},[r,s]),o?(0,w.jsx)(R,{gizmoId:i}):null}},81816:function(e,t,r){"use strict";r.d(t,{C:function(){return s}});var n=r(4702);function s(e){var t,r;let s=(0,n.hz)();return!(null===(t=(0,n.t)())||void 0===t?void 0:t.isWorkspaceAccount())||null!==(r=null==s?void 0:s.includes(e))&&void 0!==r&&r}},67165:function(e,t,r){"use strict";r.d(t,{d:function(){return w}});var n=r(94521),s=r(17379),a=r(96271),i=r(19841),o=r(92379),l=r(14910),c=r(73746),d=r(66246),u=r(73965),f=r(651);let m=["className","size","align"],x=["onSelect","icon","className","color","size"],g=["className"],p=["onSelect","children"],b=["className"],h=["icon","children"];function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let v=o.forwardRef(function(e,t){let{className:r,size:n="default",align:o}=e,l=(0,s.Z)(e,m);return(0,f.jsx)(u.w5,y({ref:t,$as:a.VY,sideOffset:4,align:null!=o?o:"start",collisionPadding:10,className:(0,i.default)({"min-w-[280px]":"default"===n,"min-w-[340px]":"large"===n,"min-w-[125px]":"small"===n,"overflow-hidden":!0},r)},l))});function w(e){let{triggerButton:t,children:r,size:n="default",open:s,onOpenChange:i,contentAlign:o,side:l,sideOffset:c=0,alignOffset:d=0,contentClassName:u}=e;return(0,f.jsxs)(a.fC,{modal:!1,open:s,onOpenChange:i,children:[(0,f.jsx)(a.xz,{asChild:!0,children:t}),(0,f.jsx)(a.Uv,{children:(0,f.jsx)(v,{size:n,align:o,alignOffset:d,side:l,sideOffset:c,className:u,children:r})})]})}let k={Root:a.fC,Trigger:function(e){return(0,f.jsx)(u.J7,y(y({$as:a.xz},e),{},{onFocusCapture:t=>{var r;t.stopPropagation(),null===(r=e.onFocusCapture)||void 0===r||r.call(e,t)}}))},Portal:a.Uv,Content:v,Item:o.forwardRef(function(e,t){let{onSelect:r,icon:n,className:l,color:d,size:m="default"}=e,g=(0,s.Z)(e,x),p=(0,c.Qr)(),b=p?u.yy:u.aF;return n?(0,f.jsxs)(b,y(y({$as:a.ck,ref:t,onSelect:r,className:(0,i.default)("danger"===d&&"text-token-text-error",p&&"large"===m&&"gap-3",l)},g),{},{children:[(0,f.jsx)("div",{className:(0,i.default)(p&&"flex items-center justify-center",p&&"danger"===d&&"text-token-text-error",p&&"danger"!==d&&"text-token-text-secondary",p&&"default"===m&&"h-5 w-5",p&&"large"===m&&"h-5 w-7"),children:(0,o.isValidElement)(n)?n:(0,f.jsx)(n,{className:"h-5 w-5 shrink-0"})}),g.children]})):(0,f.jsx)(b,y({$as:a.ck,ref:t,onSelect:r,className:(0,i.default)("danger"===d&&"text-token-text-error",l)},g))}),Separator:function(e){let{className:t}=e,r=(0,s.Z)(e,g);return(0,f.jsx)(a.Z0,y({className:(0,i.default)("my-1.5 h-[1px] bg-token-border-light juice:mx-5 juice:my-1",t)},r))},RadioGroup:a.Ee,RadioItem:function(e){let{onSelect:t,children:r}=e,n=(0,s.Z)(e,p);return(0,f.jsxs)(u.aF,y(y({$as:a.Rk,onSelect:t},n),{},{children:[(0,f.jsx)(a.wU,{className:"absolute",children:(0,f.jsx)(d.$As,{className:"icon-sm"})}),(0,f.jsx)("span",{className:"ml-6",children:r})]}))},Sub:a.Tr,SubContent:function(e){let{className:t}=e,r=(0,s.Z)(e,b),n=(0,c.Qr)();return(0,f.jsx)(u.w5,y({$as:a.tu,className:(0,i.default)("mt-2 max-h-[calc(100vh-300px)] min-w-[100px] overflow-auto",t),sideOffset:n?8:-10,alignOffset:n?-16:-14,collisionPadding:20},r))},SubMenuTrigger:function(e){let{icon:t,children:r}=e,n=(0,s.Z)(e,h),o=(0,c.Qr)(),d=o?u.yy:u.aF;return(0,f.jsxs)(d,y(y({$as:a.fF},n),{},{children:[t&&(0,f.jsx)("div",{className:(0,i.default)(o&&"text-token-text-secondary",o&&"flex h-5 w-5 items-center justify-center"),children:(0,f.jsx)(t,{className:"h-5 w-5 flex-shrink-0"})}),r,(0,f.jsx)("div",{className:"ml-auto flex items-center text-token-text-tertiary group-data-[disabled]:opacity-50",children:(0,f.jsx)(l.Yf,{className:"icon-md "})})]}))},Label:function(e){let{children:t}=e;return(0,f.jsx)(a.__,{className:"m-1.5 p-2.5 text-xs font-semibold text-token-text-secondary juice:mx-2 juice:my-0 juice:px-2",children:t})}};t.Z=k},73965:function(e,t,r){"use strict";r.d(t,{J7:function(){return d},M4:function(){return x},aF:function(){return u},w5:function(){return m},yy:function(){return f}});var n,s,a,i,o,l=r(41141),c=r(74091);let d=c.Z.button(n||(n=(0,l.Z)(["\ntext-token-text-primary border border-transparent inline-flex h-9 items-center justify-center gap-1 rounded-lg bg-white px-3 text-sm dark:transparent dark:bg-transparent\nleading-none outline-none cursor-pointer\nhover:bg-token-main-surface-secondary dark:hover:bg-token-main-surface-secondary\nfocus-visible:bg-token-main-surface-secondary\nradix-state-active:text-token-text-secondary\nradix-disabled:cursor-auto radix-disabled:bg-transparent radix-disabled:text-token-text-tertiary dark:radix-disabled:bg-transparent\n"]))),u=c.Z.div(s||(s=(0,l.Z)(["flex gap-2 items-center m-1.5 rounded p-2.5 text-sm cursor-pointer focus-visible:outline-0 hover:bg-token-main-surface-secondary focus-visible:bg-token-main-surface-secondary radix-disabled:pointer-events-none radix-disabled:opacity-50 group relative"]))),f=(0,c.Z)(u)(a||(a=(0,l.Z)(["hover:bg-[#f5f5f5] focus-visible:bg-[#f5f5f5] dark:hover:bg-token-main-surface-secondary dark:focus-visible:bg-token-main-surface-secondary rounded-md my-0 px-3 mx-2 radix-state-open:bg-[#f5f5f5] dark:radix-state-open:bg-token-main-surface-secondary gap-2.5 py-3"]))),m=c.Z.div(i||(i=(0,l.Z)(["\nmax-w-xs rounded-lg popover bg-token-main-surface-primary shadow-lg will-change-[opacity,transform] radix-side-bottom:animate-slideUpAndFade radix-side-left:animate-slideRightAndFade radix-side-right:animate-slideLeftAndFade radix-side-top:animate-slideDownAndFade\nborder border-token-border-light juice:rounded-2xl juice:py-2\n"]))),x=c.Z.div(o||(o=(0,l.Z)(["popover overflow-auto rounded-xl border border-token-border-light bg-token-main-surface-primary p-2 shadow-xl"])))},5994:function(e,t,r){"use strict";r.d(t,{Dd:function(){return n},L5:function(){return a},P_:function(){return o},aI:function(){return i},vi:function(){return l},zf:function(){return s}});let n="ChatGPT",s="Untitled",a=10,i=50,o=300,l=8e3},2933:function(e,t,r){"use strict";r.d(t,{QT:function(){return h},Xb:function(){return v},cY:function(){return y},f8:function(){return w},y4:function(){return j}});var n,s=r(17379),a=r(94521),i=r(41141),o=r(71840),l=r(98131),c=r(19841),d=r(92379),u=r(74091),f=r(5443),m=r(62484),x=r(651);let g=["tooltip","className"];function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach(function(t){(0,a.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let h=u.Z.div(n||(n=(0,i.Z)(["sticky top-0 juice:p-3 mb-1.5 flex items-center justify-between z-10 h-14 p-2 font-semibold bg-token-main-surface-primary"])));function j(e){let t=(0,x.jsx)(f.z,b(b({color:"secondary",size:"small"},e),{},{className:(0,c.default)("flex items-center justify-center whitespace-nowrap",e.className)}));return null!=e.label?(0,x.jsx)(m.u,{side:"left",label:e.label,className:"h-fit w-fit",children:t}):t}let y=(0,d.forwardRef)(function(e,t){var r;let{tooltip:n,className:a}=e,i=(0,s.Z)(e,g),o=(0,x.jsx)(f.z,b(b({color:null!==(r=e.color)&&void 0!==r?r:"secondary",size:"medium"},i),{},{className:a,ref:t}));return null!=n?(0,x.jsx)(m.u,{label:n,children:o}):o});function v(e){let{label:t,disabled:r=!1,tooltipText:n,value:s}=e,a=(0,d.useId)();return(0,x.jsx)("div",{className:(0,c.default)("flex items-center gap-2",r?"opacity-50":""),children:(0,x.jsx)(m.E,{disabled:null==n,label:n,side:"right",children:(0,x.jsxs)("label",{htmlFor:a,className:"flex cursor-pointer items-center gap-1",children:[(0,x.jsx)(l.ck,{id:a,value:s,disabled:r,className:"mr-1 flex h-5 w-5 shrink-0 items-center justify-center rounded-full border border-gray-500 bg-white dark:border-gray-600 dark:bg-gray-700",children:(0,x.jsx)(l.z$,{className:"h-2 w-2 rounded-full bg-gray-950 dark:bg-white"})}),t]})})})}function w(e){return(0,x.jsx)(o.Z,b(b({},e),{},{className:(0,c.default)("!rounded border-gray-950 checked:!bg-black dark:border-gray-600 dark:bg-gray-700",e.className)}))}},72465:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/g/[gizmoId]/view",function(){return r(75286)}])}},function(e){e.O(0,[6271,2349,4834,5165,6992,8798,9987,2888,9774,179],function(){return e(e.s=72465)}),_N_E=e.O()}]);
//# sourceMappingURL=view-6b234f627410c566.js.map