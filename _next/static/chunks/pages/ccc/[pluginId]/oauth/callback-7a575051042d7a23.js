(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1475],{81067:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return i},default:function(){return o}});var c=n(24740),r=n(86741),u=n(2721),s=n(34977),a=n(92379),i=!0;function o(){let e=(0,s.useRouter)(),t=(0,a.useRef)(!1),{0:n,1:i}=(0,a.useState)(""),{code:o,error:f,error_description:_,state:l}=Object.fromEntries(new URLSearchParams(n.substring(1)).entries()),h=e.query.pluginId;return(0,a.useEffect)(()=>{i(window.location.hash)},[]),(0,a.useEffect)(()=>{t.current||(h&&o&&l&&(t.current=!0),async function(){let t=`https://chatgpt.com/ccc/${h}/oauth/callback`;if(!h||!o||!l)return;let n=await u.Z.connectorOauthCallback(h,o,t,l);if(n.success){let t=new URL((0,r.M5)(r.LT.OAUTH_SUCCESS,n.redirect_path));t.searchParams.set("oauth_success","true"),e.push(t.toString())}else e.push((0,r.M5)(r.LT.CUSTOM_ERROR,n.redirect_path,n.error??n.message))}())},[h,o,l,e]),(0,a.useEffect)(()=>{f&&c.m.danger(`${f}${_?`: ${_}`:""}`)},[f,_]),null}},70403:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ccc/[pluginId]/oauth/callback",function(){return n(81067)}])}},function(e){e.O(0,[2888,9774,179],function(){return e(e.s=70403)}),_N_E=e.O()}]);
//# sourceMappingURL=callback-7a575051042d7a23.js.map