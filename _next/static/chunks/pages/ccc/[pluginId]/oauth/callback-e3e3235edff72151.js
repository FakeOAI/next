(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1475],{81067:function(e,t,c){"use strict";c.r(t),c.d(t,{__N_SSP:function(){return i},default:function(){return o}});var n=c(24740),u=c(86741),r=c(2721),s=c(34977),a=c(92379),i=!0;function o(){let e=(0,s.useRouter)(),t=(0,a.useRef)(!1),{0:c,1:i}=(0,a.useState)(""),{code:o,error:f,error_description:_,state:h}=Object.fromEntries(new URLSearchParams(c.substring(1)).entries()),l=e.query.pluginId;return(0,a.useEffect)(()=>{i(window.location.hash)},[]),(0,a.useEffect)(()=>{t.current||(l&&o&&h&&(t.current=!0),async function(){let t=`https://chatgpt.com/ccc/${l}/oauth/callback`;if(l&&o&&h)try{let c=await r.Z.connectorOauthCallback(l,o,t,h);if(c.success){let t=new URL((0,u.M5)(u.LT.OAUTH_SUCCESS,c.redirect_path));t.searchParams.set("oauth_success","true"),e.push(t.toString())}else e.push((0,u.M5)(u.LT.CUSTOM_ERROR,c.redirect_path,c.error??c.message))}catch{e.push((0,u.M5)(u.LT.CUSTOM_ERROR))}}())},[l,o,h,e]),(0,a.useEffect)(()=>{f&&n.m.danger(`${f}${_?`: ${_}`:""}`)},[f,_]),null}},70403:function(e,t,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ccc/[pluginId]/oauth/callback",function(){return c(81067)}])}},function(e){e.O(0,[2888,9774,179],function(){return e(e.s=70403)}),_N_E=e.O()}]);
//# sourceMappingURL=callback-e3e3235edff72151.js.map