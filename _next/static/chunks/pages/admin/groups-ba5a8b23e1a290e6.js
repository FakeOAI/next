(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7705,6638],{51516:function(e,t,r){"use strict";function n(e,t){if(t.length<e)throw TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}r.d(t,{Z:function(){return n}})},67629:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(28734),s=r(51516);function a(e){(0,s.Z)(1,arguments);var t=(0,n.Z)(e);return t.setHours(0,0,0,0),t}},28734:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(51516);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){(0,n.Z)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===s(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):(("string"==typeof e||"[object String]"===t)&&"undefined"!=typeof console&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(Error().stack)),new Date(NaN))}},43062:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSP:function(){return et},default:function(){return er}});var n=r(98601),s=r(68986),a=r(76638),o=r(89794),i=r(30853),l=r(24740),c=r(2721),u=r(93951),d=r(42420),p=r(84760),m=r(52134),f=r(56032),g=r(88667),h=r(19841),x=r(11941),y=r.n(x),j=r(92379),b=r(75172),w=r(62984),v=r(68306),O=r(64854),k=r(11550),S=r(6440),Z=r(13350),M=r(41619),C=r(651);function P(e){let{className:t,inputClassName:r,value:n,onChange:s,placeholder:a}=e;return(0,C.jsxs)("div",{className:(0,h.default)("relative",t),children:[(0,C.jsx)(M.W1M,{className:"icon-sm absolute left-2 top-1/2 -translate-y-1/2 transform text-token-text-tertiary"}),(0,C.jsx)("input",{type:"text",value:n,onChange:s,placeholder:a,className:(0,h.default)("rounded-lg border border-gray-200 pl-8 placeholder:text-gray-500 dark:border-gray-600 dark:bg-gray-700",r),autoComplete:"off"})]})}var N=r(97537),E=r(98095),D=r(36792),F=r(24434),I=r(82363),_=r(91530),A=r.n(_),T=r(18898),U=r(60464),R=r(66587);function G(e){let{group:t,isOpen:r,onClose:n}=e,s=(0,b.Z)(),a=s.formatMessage({id:"workspaceSettings.groups.addMember",defaultMessage:"Add members to the {groupName} group"},{groupName:t.name}),o=(0,u.t)(),{0:i,1:d}=(0,j.useState)([]),{0:p,1:m}=(0,j.useState)(!1);async function f(){let e=null==o?void 0:o.getWorkspaceId();if(!e)throw Error("No workspace ID found");m(!0);let r=await c.Z.bulkAddWorkspaceGroupUsers(e,t.id,i);l.m.success(s.formatMessage({id:"yU4Zf0",defaultMessage:"Added {numUsers} users to the group"},{numUsers:r.added_group_users.length})),null==n||n(),m(!1)}return(0,C.jsxs)(F.Z,{isOpen:r,onClose:null!=n?n:A(),title:a,type:"success",showCloseButton:!0,primaryButton:(0,C.jsx)(k.z,{onClick:f,disabled:0===i.length||i.length>1e3,loading:p,children:(0,C.jsx)(w.Z,{id:"EpbOzA",defaultMessage:"Add users to group"})}),children:[(0,C.jsx)(z,{onChange:d}),i.length>1e3&&(0,C.jsx)("div",{className:"mt-2 text-sm text-token-text-error",children:(0,C.jsx)(w.Z,{id:"9lp0Tc",defaultMessage:"Email list is limited to {maxEmails} users at once",values:{maxEmails:1e3}})})]})}function z(e){let{onChange:t}=e,{0:r,1:n}=(0,j.useState)("");return(0,C.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,C.jsxs)("label",{htmlFor:"group-email-paste",children:[(0,C.jsx)(w.Z,{id:"qvGcSC",defaultMessage:"Emails"}),(0,C.jsx)("br",{}),(0,C.jsx)("span",{className:"text-sm text-token-text-tertiary",children:(0,C.jsx)(w.Z,{id:"Fhd+5h",defaultMessage:"Paste email addresses here, one per line:"})})]}),(0,C.jsx)(R.Z,{id:"group-email-paste",className:"h-[250px] text-sm",value:r,onChange:e=>{n(e.target.value),t(e.target.value.split("\n").map(e=>e.trim()).filter(e=>e.length>0).filter(e=>U.F.test(e)))},placeholder:"jean@example.com\njoohyun@example.com\nmuhammed@example.com\nsusan@example.com"})]})}function q(e){var t;let{group:r,isOpen:n,onClose:s}=e,a=(0,b.Z)().formatMessage({id:"workspaceSettings.groups.addMember",defaultMessage:"Add members to the {groupName} group"},{groupName:r.name}),o=(0,u.t)(),i=null==o?void 0:o.getWorkspaceId(),{0:l,1:c}=(0,j.useState)(""),{0:d,1:p}=(0,j.useState)(0),{data:f}=(0,T.Z)(i,d*T.I,l,T.I,m.Wk),{0:g,1:h}=(0,j.useState)([]),{0:x,1:y}=(0,j.useState)([]),{0:v,1:O}=(0,j.useState)("interactive"),S=f?Math.ceil(null!==(t=f.total)&&void 0!==t?t:0/T.I):0;async function N(e){y(t=>[...t,e]);try{await Q(i,r.id,e),h(t=>[...t,e])}catch(e){I.U.addError(e)}finally{y(t=>t.filter(t=>t!==e))}}return"batch"===v?(0,C.jsx)(G,{group:r,isOpen:n,onClose:s}):(0,C.jsx)(F.Z,{type:"warning",isOpen:n,onClose:null!=s?s:A(),title:a,size:"custom",className:"max-w-screen-md",showCloseButton:!0,primaryButton:(0,C.jsx)(k.z,{onClick:s,children:(0,C.jsx)(w.Z,{id:"0NAzDq",defaultMessage:"Done"})}),children:(0,C.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,C.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,C.jsx)("p",{children:a}),(0,C.jsx)(k.z,{onClick:()=>{O("batch")},color:"secondary",children:(0,C.jsx)(w.Z,{id:"5GPldp",defaultMessage:"Bulk add users"})})]}),(0,C.jsx)(P,{value:l,inputClassName:"w-full",onChange:e=>{c(e.target.value)}}),(0,C.jsxs)(D.Z.Root,{className:"min-w-full",children:[(0,C.jsxs)(D.Z.Header,{children:[(0,C.jsx)(D.Z.HeaderCell,{children:(0,C.jsx)(w.Z,{id:"workspaceSettings.groups.addMember.name",defaultMessage:"Name"})}),(0,C.jsx)(D.Z.HeaderCell,{children:(0,C.jsx)(w.Z,{id:"workspaceSettings.groups.addMember.email",defaultMessage:"Email"})}),(0,C.jsx)(D.Z.HeaderCell,{})]}),(0,C.jsx)(D.Z.Body,{children:null==f?void 0:f.items.map(e=>(0,C.jsxs)(D.Z.Row,{children:[(0,C.jsx)(D.Z.Cell,{children:e.name}),(0,C.jsx)(D.Z.Cell,{children:e.email}),(0,C.jsx)(D.Z.Cell,{textAlign:"right",className:"pr-1",children:(0,C.jsx)(k.z,{size:"small",color:"secondary",disabled:x.includes(e.id),onClick:()=>{g.includes(e.id)||N(e.id)},icon:g.includes(e.id)?M.$As:M.Vz5,children:g.includes(e.id)?(0,C.jsx)(w.Z,{id:"workspaceSettings.groups.addMember.addButton",defaultMessage:"Added"}):(0,C.jsx)(w.Z,{id:"workspaceSettings.groups.addMember.addedButton",defaultMessage:"Add"})})})]},e.id))})]}),(0,C.jsx)("div",{className:"flex flex-row justify-center",children:(0,C.jsx)(Z.t,{currentPage:d,onChangeIndex:e=>{p(e)},length:S})})]})})}async function Q(e,t,r){await c.Z.addWorkspaceGroupUser(e,t,r)}function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function B(e){let{workspaceId:t,group:r,readOnly:n}=e,s=(0,b.Z)(),{0:a,1:l}=(0,j.useState)(!1),{0:u,1:g}=(0,j.useState)(""),{0:x,1:y}=(0,j.useState)(0),{data:v,isLoading:O,isPlaceholderData:S}=(0,p.a)({queryKey:[t,"groups",r.id,u,"members-page-".concat(x)],queryFn:()=>c.Z.listWorkspaceGroupMembers(t,r.id,u,10*x),placeholderData:m.Wk}),{0:P,1:F}=(0,j.useState)(!1),I=(0,j.useRef)(null),_=(0,d.NL)();(0,j.useEffect)(()=>{a&&I.current&&I.current.focus()},[a]);let{mutateAsync:A}=(0,f.D)({mutationFn:async e=>await c.Z.removeWorkspaceGroupMember(t,r.id,e),onMutate:e=>(_.cancelQueries({queryKey:[t,"groups",r.id]}),_.setQueryData([t,"groups",r.id,u,"members-page-".concat(x)],t=>t?X(X({},t),{},{items:t.items.filter(t=>t.id!==e),total:t.total-1}):{limit:10,offset:0,items:[],total:0}),{previousData:v}),onError:(e,n,s)=>{_.setQueryData([t,"groups",r.id,"members-page-".concat(x)],null==s?void 0:s.previousData),_.invalidateQueries({queryKey:[t,"groups",r.id]})},onSettled:async()=>{await new Promise(e=>setTimeout(e,1e3)),_.invalidateQueries({queryKey:[t,"groups"]})}});return(0,C.jsxs)("div",{className:"flex w-full flex-col",children:[(0,C.jsxs)("div",{className:"flex flex-row items-center ",children:[(0,C.jsx)("div",{className:"border-token-border-dark mt-3 inline-block h-8 grow-0 border-b-2 text-sm font-semibold",children:(0,C.jsx)(w.Z,{id:"workspaceSettings.groups.membersTableTitle",defaultMessage:"Group members"})}),(0,C.jsx)("div",{className:"grow"}),(0,C.jsx)(i.u,{label:s.formatMessage({id:"workspaceSettings.groups.searchButtonTooltip",defaultMessage:"Search members"}),children:(0,C.jsx)("div",{className:"cursor-pointer p-2",onClick:()=>{l(!0)},children:(0,C.jsx)(M.W1M,{className:"icon-sm"})})}),(0,C.jsx)("input",{type:"text",ref:I,placeholder:s.formatMessage({id:"workspaceSettings.groups.searchMembers",defaultMessage:"Filter by name or email..."}),className:(0,h.default)("bg-token-surface-primary dark:bg-token-surface-secondary border-none px-0 transition-width duration-300 ease-in-out focus:ring-0",a?"w-64":"w-0"),value:u,onChange:()=>{var e,t;y(0),g(null!==(e=null===(t=I.current)||void 0===t?void 0:t.value)&&void 0!==e?e:"")}})]}),(0,C.jsxs)(D.Z.Root,{className:"min-w-full",children:[(0,C.jsxs)(D.Z.Header,{children:[(0,C.jsx)(D.Z.HeaderCell,{children:(0,C.jsx)(w.Z,{id:"workspaceSettings.groups.memberName",defaultMessage:"Name"})}),(0,C.jsx)(D.Z.HeaderCell,{children:(0,C.jsx)(w.Z,{id:"workspaceSettings.groups.email",defaultMessage:"Email"})}),(0,C.jsx)(D.Z.HeaderCell,{})]}),(0,C.jsx)(D.Z.Body,{className:O||S?"opacity-50":void 0,children:null==v?(0,C.jsx)(D.Z.Row,{children:(0,C.jsx)(D.Z.Cell,{colSpan:3,children:(0,C.jsx)(N.Z,{})})}):0===v.items.length?(0,C.jsx)(D.Z.Row,{children:(0,C.jsx)(D.Z.Cell,{colSpan:3,children:""===u?(0,C.jsx)(w.Z,{id:"workspaceSettings.groups.noMembers",defaultMessage:"No members"}):(0,C.jsx)(w.Z,{id:"workspaceSettings.groups.noMembersForSearch",defaultMessage:"No members matched the filter"})})}):v.items.map(e=>(0,C.jsxs)(D.Z.Row,{children:[(0,C.jsx)(D.Z.Cell,{children:(0,C.jsx)("span",{className:"ml-3",children:e.name})}),(0,C.jsx)(D.Z.Cell,{children:e.email}),(0,C.jsx)(D.Z.Cell,{textAlign:"right",children:!n&&(r.is_scim_managed?(0,C.jsx)(E.Z.Root,{children:(0,C.jsx)(E.Z.Trigger,{disabled:!0,children:(0,C.jsx)(i.u,{sideOffset:0,label:s.formatMessage(o.s.managedViaSCIMTooltip),className:"flex",side:"right",children:(0,C.jsx)(M.nWS,{className:"icon-sm"})})})}):(0,C.jsxs)(E.Z.Root,{children:[(0,C.jsx)(E.Z.Trigger,{className:"-my-2",children:(0,C.jsx)(M.nWS,{className:"icon-sm"})}),(0,C.jsx)(E.Z.Portal,{children:(0,C.jsx)(E.Z.Content,{children:(0,C.jsx)(E.Z.Item,{onClick:()=>A(e.id),children:(0,C.jsx)(w.Z,{id:"workspaceSettings.groups.removeMember",defaultMessage:"Remove member"})})})})]}))})]},e.id))})]}),(0,C.jsxs)("div",{className:"my-2 flex flex-row justify-center",children:[!n&&!r.is_scim_managed&&(0,C.jsx)(k.z,{color:"secondary",onClick:()=>F(!0),children:(0,C.jsx)(w.Z,{id:"workspaceSettings.groups.addMemberButton",defaultMessage:"Add member"})}),!n&&r.is_scim_managed&&(0,C.jsx)(i.u,{label:s.formatMessage(o.s.managedViaSCIMTooltip),side:"right",sideOffset:0,children:(0,C.jsx)(k.z,{color:"secondary",disabled:!0,children:(0,C.jsx)(w.Z,{id:"workspaceSettings.groups.addMemberButton",defaultMessage:"Add member"})})}),(0,C.jsx)("div",{className:"grow"}),v&&v.items.length>0&&(0,C.jsx)(Z.t,{currentPage:x,onChangeIndex:e=>{y(e)},length:Math.ceil(v.total/10)})]}),P&&(0,C.jsx)(q,{isOpen:!0,onClose:()=>{_.invalidateQueries({queryKey:[t,"groups"]}),F(!1)},group:r})]})}function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function J(e){let{workspaceId:t}=e,r=(0,b.Z)(),n=(0,u.t)(),s=!(null!=n&&n.isAdminOfAccount()||null!=n&&n.isOwnerOfAccount()),a=(0,d.NL)(),{0:o,1:i}=(0,j.useState)(""),{0:g,1:x}=(0,j.useState)(0),{data:y,isLoading:v,isPlaceholderData:O}=(0,p.a)({queryKey:""===o?[t,"groups","page-".concat(g)]:[t,"groups","filtered",o,"page-".concat(g)],queryFn:()=>c.Z.getWorkspaceGroups(t,{query:o,offset:10*g}),placeholderData:m.Wk}),{0:S,1:M}=(0,j.useState)(!1),E=e=>{e&&(x(0),i("")),M(e)},{mutateAsync:F}=(0,f.D)({mutationFn:async e=>{let{workspaceId:t,name:r}=e;return await c.Z.createWorkspaceGroup(t,r)},onMutate:e=>{let{workspaceId:t,name:r}=e;return a.cancelQueries({queryKey:[t,"groups"]}),a.setQueryData([t,"groups","page-0"],e=>(e||(e={limit:10,offset:0,items:[],total:0}),K(K({},e),{},{items:[{id:"new",name:r,num_members:0,created_time:""},...e.items.slice(0,9)]}))),{previousGroups:y}},onError:(e,n,s)=>{a.setQueryData([t,"groups","page-0"],null==s?void 0:s.previousGroups),a.invalidateQueries({queryKey:[t,"groups"]}),"Group with this name already exists."===e.message&&l.m.warning(r.formatMessage({id:"workspaceSettings.groups.duplicateName",defaultMessage:"Group with this name already exists"}),{duration:2})},onSettled:async()=>{await new Promise(e=>setTimeout(e,1e3)),a.invalidateQueries({queryKey:[t,"groups"]})}}),{mutateAsync:I}=(0,f.D)({mutationFn:async e=>await c.Z.deleteWorkspaceGroup(t,e),onMutate:e=>(a.cancelQueries({queryKey:[t,"groups","page-0"]}),a.setQueryData([t,"groups","page-0"],t=>(t||(t={items:[]}),K(K({},t),{},{items:t.items.filter(t=>t.id!==e)}))),{previousGroups:y}),onError:(e,r,n)=>{a.setQueryData([t,"groups","page-0"],null==n?void 0:n.previousGroups),a.invalidateQueries({queryKey:[t,"groups"]})},onSettled:async()=>{await new Promise(e=>setTimeout(e,1e3)),a.invalidateQueries({queryKey:[t,"groups"]})}}),{mutateAsync:_}=(0,f.D)({mutationFn:async e=>{let{workspaceId:t,groupID:r,name:n}=e;return await c.Z.updateWorkspaceGroup(t,r,n)},onMutate:e=>{let{workspaceId:t,groupID:r,name:n}=e,s=a.getQueryData([t,"groups","page-".concat(g)]);return a.setQueryData([t,"groups","page-".concat(g)],e=>(e||(e={items:[]}),K(K({},e),{},{items:e.items.map(e=>e.id===r?K(K({},e),{},{name:n}):e)}))),{previousGroups:s}},onError:(e,t,n)=>{a.setQueryData([t,"groups","page-".concat(g)],null==n?void 0:n.previousGroups),"Group with this name already exists."===e.message&&l.m.warning(r.formatMessage({id:"workspaceSettings.groups.duplicateName",defaultMessage:"Group with this name already exists"}),{duration:2})},onSettled:async()=>{await new Promise(e=>setTimeout(e,1e3)),a.invalidateQueries({queryKey:[t,"groups"]})}});return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"mb-3 mt-6 flex flex-row justify-between gap-2",children:[(0,C.jsx)(P,{inputClassName:"w-[250px]",value:o,onChange:e=>{i(e.target.value),x(0)},placeholder:r.formatMessage({id:"workspaceSettings.groups.search",defaultMessage:"Search group name"})}),!s&&(0,C.jsx)(k.z,{onClick:()=>E(!0),children:(0,C.jsx)(w.Z,{id:"workspaceSettings.groups.create",defaultMessage:"Create group"})})]}),(0,C.jsxs)("div",{children:[(0,C.jsxs)(D.Z.Root,{className:"min-w-full",children:[(0,C.jsxs)(D.Z.Header,{children:[(0,C.jsx)(D.Z.HeaderCell,{}),(0,C.jsx)(D.Z.HeaderCell,{children:(0,C.jsx)(w.Z,{id:"workspaceSettings.groups.groupName",defaultMessage:"Group name"})}),(0,C.jsx)(D.Z.HeaderCell,{children:(0,C.jsx)(w.Z,{id:"workspaceSettings.groups.members",defaultMessage:"Members"})}),(0,C.jsx)(D.Z.HeaderCell,{children:(0,C.jsx)(w.Z,{id:"workspaceSettings.groups.created",defaultMessage:"Created"})}),(0,C.jsx)(D.Z.HeaderCell,{})]}),(0,C.jsxs)(D.Z.Body,{className:(0,h.default)((v||O)&&"opacity-50"),children:[S&&(0,C.jsx)(V,{group:"new",workspaceId:t,onChangeName:async e=>{""!==e.trim()&&(F({workspaceId:t,name:e}),E(!1))},onDelete:()=>null,readOnly:s}),null==y?(0,C.jsx)(D.Z.Row,{children:(0,C.jsx)(D.Z.Cell,{colSpan:5,textAlign:"center",children:(0,C.jsx)(N.Z,{})})}):0===y.items.length?(0,C.jsx)(D.Z.Row,{children:(0,C.jsx)(D.Z.Cell,{colSpan:5,textAlign:"center",children:""===o?(0,C.jsx)(w.Z,{id:"workspaceSettings.groups.noGroups",defaultMessage:"No groups found."}):(0,C.jsx)(w.Z,{id:"workspaceSettings.groups.noGroupsWithFIlter",defaultMessage:"No groups found. Try changing the search query."})})}):y.items.map(e=>(0,C.jsx)(V,{group:e,workspaceId:t,onDelete:I,onChangeName:async r=>{_({workspaceId:t,groupID:e.id,name:r})},readOnly:s},e.id))]})]}),y&&(0,C.jsx)("div",{className:"text-center",children:(0,C.jsx)(Z.t,{length:Math.ceil(y.total/10),currentPage:Math.min(g,Math.ceil(y.total/10)),onChangeIndex:e=>x(e)})})]})]})}function L(e){let{currentWorkspaceId:t}=e,r=(0,b.Z)();return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(y(),{children:(0,C.jsx)("title",{children:r.formatMessage(Y.title)})}),(0,C.jsx)(s.yG,{title:r.formatMessage(Y.title),subtitle:(0,C.jsx)(w.Z,{id:"NDDzzF",defaultMessage:"Only workspace admins can edit these settings."})}),(0,C.jsx)(s.hb,{showSpinner:!1,children:(0,C.jsx)(J,{workspaceId:t})})]})}function V(e){let{group:t,workspaceId:r,onChangeName:n,onDelete:s,readOnly:l}=e,c=(0,b.Z)(),{value:u}=(0,g.sB)("2091463435"),{0:d,1:p}=(0,j.useState)(!1),{0:m,1:f}=(0,j.useState)("new"===t?"":t.name),{0:h,1:x}=(0,j.useState)(!1),{0:y,1:k}=(0,j.useState)("new"===t),{0:Z,1:P}=(0,j.useState)(null),N=(0,j.useRef)(null);(0,j.useEffect)(()=>{if("new"===t||y){var e;null===(e=N.current)||void 0===e||e.focus()}},[t,y]);let F=async()=>{if(""===m.trim()){f("new"===t?"":t.name),k(!1),x(!1);return}n&&(x(!0),await n(m)),x(!1),k(!1)};return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(D.Z.Row,{onClick:()=>p(e=>!e),className:"hover:bg-token-surface-secondary cursor-pointer",children:[(0,C.jsx)(D.Z.Cell,{children:(0,C.jsx)(O.Z,{checked:d})}),(0,C.jsxs)(D.Z.Cell,{children:["new"===t||y?(0,C.jsx)(S.Z,{ref:N,name:"newGroupName",value:m,disabled:h,placeholder:c.formatMessage({id:"workspaceSettings.groups.groupNamePlaceholder",defaultMessage:"New group name..."}),onChange:e=>f(e.target.value),onBlur:()=>{m!==("new"===t?"":t.name)&&F()},onPressEnter:F}):t.name,u&&"new"!==t&&t.is_scim_managed&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("span",{className:"flex-grow"}),(0,C.jsx)(a.DirectorySyncResourceManagedIndication,{})]})]}),(0,C.jsx)(D.Z.Cell,{children:(0,C.jsx)(w.Z,{id:"workspaceSettings.groups.memberCount",defaultMessage:"{count} members",values:{count:"new"===t?"0":t.num_members}})}),(0,C.jsx)(D.Z.Cell,{children:"new"!==t&&t.created_time?(0,C.jsx)(v.Ji,{value:t.created_time,year:"numeric",month:"long",day:"numeric"}):""}),(0,C.jsx)(D.Z.Cell,{textAlign:"right",children:"new"!==t&&!l&&(t.is_scim_managed?(0,C.jsx)(E.Z.Root,{children:(0,C.jsx)(E.Z.Trigger,{disabled:!0,children:(0,C.jsx)(i.u,{sideOffset:0,label:c.formatMessage(o.s.managedViaSCIMTooltip),className:"flex",side:"right",children:(0,C.jsx)(M.nWS,{className:"icon-sm"})})})}):(0,C.jsxs)(E.Z.Root,{children:[(0,C.jsx)(E.Z.Trigger,{className:"-my-2",children:(0,C.jsx)(M.nWS,{className:"icon-sm"})}),(0,C.jsx)(E.Z.Portal,{children:(0,C.jsxs)(E.Z.Content,{children:[(0,C.jsx)(E.Z.Item,{onClick:e=>{k(!0),setTimeout(()=>{var e;null===(e=N.current)||void 0===e||e.focus()},120),e.stopPropagation()},children:(0,C.jsx)(w.Z,{id:"workspaceSettings.groups.changeName",defaultMessage:"Edit name"})}),(0,C.jsx)(E.Z.Item,{onClick:e=>{P(t),e.stopPropagation()},children:(0,C.jsx)(w.Z,{id:"workspaceSettings.groups.edit",defaultMessage:"Delete group"})})]})})]}))})]}),d&&"new"!==t&&(0,C.jsx)(D.Z.Row,{children:(0,C.jsx)(D.Z.Cell,{colSpan:5,className:"pl-8",children:(0,C.jsx)(B,{group:t,workspaceId:r,readOnly:l})})}),Z&&(0,C.jsx)($,{group:Z,onDelete:s,onClose:()=>P(null)})]})}function $(e){let{group:t,onDelete:r,onClose:n}=e,s=(0,b.Z)().formatMessage({id:"workspaceSettings.groups.deleteGroupTitle",defaultMessage:"Delete group {groupName}?"},{groupName:t.name});return(0,C.jsx)(F.Z,{type:"warning",isOpen:!0,onClose:n,title:s,showCloseButton:!0,primaryButton:(0,C.jsx)(k.z,{color:"danger",onClick:async()=>{r(t.id),n()},children:(0,C.jsx)(w.Z,{id:"workspaceSettings.groups.confirmDelete",defaultMessage:"Delete"})}),secondaryButton:(0,C.jsx)(k.z,{onClick:n,color:"secondary",children:(0,C.jsx)(w.Z,{id:"workspaceSettings.groups.cancelDelete",defaultMessage:"Cancel"})}),children:(0,C.jsx)("p",{children:(0,C.jsx)(w.Z,{id:"workspaceSettings.groups.deleteGroupWarning",defaultMessage:'Are you sure you want to delete the "{groupName}" group? This action cannot be undone.',values:{groupName:t.name}})})})}let Y=(0,v.vU)({title:{id:"admin.groupsSettings.title",defaultMessage:"Groups"}});function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var et=!0;function er(e){return(0,C.jsx)(L,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e))}er.getLayout=function(e){return(0,C.jsx)(s.ZP,{mobilePageTitle:"Groups",children:e})}},64854:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(19841),s=r(41619),a=r(651);function o(e){let{className:t,checked:r}=e;return(0,a.jsx)(s.Tg4,{className:(0,n.default)("icon-sm transform transition-transform duration-200",t,r?"rotate-0":"ltr:-rotate-90 rtl:rotate-90")})}},66587:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var n=r(98601),s=r(52088),a=r(19841),o=r(651);let i=["className"];function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){let{className:t}=e,r=(0,s.Z)(e,i);return(0,o.jsx)("textarea",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({className:(0,a.default)("form-textarea w-full rounded-lg border border-token-border-light bg-token-main-surface-secondary text-sm text-token-text-primary focus:border-token-text-primary focus:shadow-none focus:outline-none focus:ring-token-text-primary",t)},r))}},76638:function(e,t,r){"use strict";r.r(t),r.d(t,{DirectorySyncResourceManagedIndication:function(){return l}});var n=r(98601),s=r(62984),a=r(68306),o=r(651);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function l(){return(0,o.jsx)("div",{className:"flex items-center",children:(0,o.jsx)("div",{className:"flex rounded-md bg-orange-300 px-1 text-center text-white dark:bg-orange-800",children:(0,o.jsx)("span",{className:"text-[0.5em] font-bold leading-4",children:(0,o.jsx)(s.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},c.scimIndicatorText))})})})}let c=(0,a.vU)({scimIndicatorText:{id:"workspaceIdentity.directorySyncResourceTagTitle",defaultMessage:"SCIM"}})},84082:function(e,t,r){"use strict";r.d(t,{$e:function(){return a},EZ:function(){return o},Ql:function(){return s},dO:function(){return n},xC:function(){return i}});let n=10,s=4,a={duration:20,hasCloseButton:!0},o=512,i=536870912},98628:function(e,t,r){"use strict";r.d(t,{R3:function(){return w},W7:function(){return y},cT:function(){return b},lU:function(){return v},po:function(){return j}});var n=r(98601),s=r(99333),a=r(2721),o=r(92319),i=r(99976),l=r(61619),c=r(82363),u=r(68306),d=r(88815),p=r(24740),m=r(62166),f=r(66114);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let x={duration:20,hasCloseButton:!0};function y(e){return JSON.stringify({file:e.name,modified:e.lastModified,currentTime:new Date().toString()})}function j(e){return new Promise((t,r)=>{let n=new FileReader,s=new Image;n.onload=()=>{s.onload=()=>t(s),s.onerror=e=>r(e),s.src=n.result},n.readAsDataURL(e)})}async function b(e,t,r,n,c,u){var m,f,g;let h=d.N.getState().resetRateLimits,y=s.EG.Initial;i.A.logEvent(l.M.uploadFileInitiated,{client:"web",useCase:n.kind,uploadEntry:"local"});let j=u.usesRetrievalIndex?performance.now():void 0;try{let{file_id:o,upload_url:i}=await a.Z.createFile(t.name,t.size,n,!!h);c.onFileCreated(e,o,i),y=s.EG.FileCreated;let l=n.kind===s.Ei.Gizmo?n.gizmoId:void 0,d=null!==(m=u.shouldUpdateProgress)&&void 0!==m&&m,g=null!==(f=u.usesRetrievalIndex)&&void 0!==f&&f,b=await a.Z.uploadFileToAzureStorage(t,i,t=>{d&&c.onFileUploadProgress(e,10+80*t)});if(c.onFileUploadProgress(e,90),201!==b.status&&k(b,o,g),y=s.EG.FileUploaded,await a.Z.processFileUpload(o,{gizmoId:l}),y=s.EG.FileProcessed,u.usesRetrievalIndex){let t=await O(o,l);(null==t?void 0:t.status)===s.Xf.Skipped&&p.m.danger(r.formatMessage(Z.retrievalSkippedFile,{fileName:t.name}),x),c.onFileUploaded(e,o,void 0,{fileTokenSize:t.file_size_tokens}),y=s.EG.RetrievalIndexCreated}else c.onFileUploaded(e,o,u.imageDimensions);null!=j&&a.Z.postRetrievalTiming({e2eLatencyMs:performance.now()-j,type:"file"})}catch(a){S(r,t.name,a);let s="NotInstanceOfError";a instanceof o.gK?s=a.name:a instanceof o.Q0?s="FatalServerError_type_".concat(null!==(g=a.type)&&void 0!==g?g:"undefined"):a instanceof Error?s=a.name:a instanceof o.vq&&(s=a.name),c.onError(e,"error",s,n,y)}}async function w(e,t,r,n,u,d,g){let y=performance.now();i.A.logEvent(l.M.uploadFileInitiated,{client:"web",useCase:r.kind,contextConnector:u.contextConnector,fileSourceType:u.type});let j=s.EG.Initial;r.kind===s.Ei.Gizmo&&(r=h(h({},r),{},{kind:n.includes(t.type)?s.Ei.Multimodal:s.Ei.MyFiles}));try{let n=await a.Z.uploadConnectorAPI(e,u.contextConnector,r,t,d,u.o365DriveId);switch(n.type){case"error":throw function(e){let{status_code:t,error_code:r,error_message:n}=e;if(!t||!(t<500))return new o.Q0(n);{let e="internal_error";return r?e=r:404===t?e="file_not_found":403===t?e="permission_error":413===t&&(e="file_too_large"),new o.vq(n,e)}}(n.error);case"file":switch(m.MP.onFileCreated(e,n.file.id,"",u.contextConnector),j=s.EG.FileProcessed,r.kind){case s.Ei.MyFiles:{m.MP.onFileUploadProgress(e,90);let t=await O(n.file.file_id,d);(null==t?void 0:t.status)===s.Xf.Skipped&&p.m.danger(g.formatMessage(Z.retrievalSkippedFile,{fileName:t.name}),x),m.MP.onFileUploaded(e,n.file.file_id,void 0,{fileTokenSize:t.file_size_tokens,mimeType:n.file.mime_type}),j=s.EG.RetrievalIndexCreated;break}case s.Ei.Multimodal:m.MP.onFileUploaded(e,n.file.file_id,{width:512,height:512},{mimeType:n.file.mime_type});break;case s.Ei.AceUpload:m.MP.onFileUploaded(e,n.file.file_id,void 0,{mimeType:n.file.mime_type});break;case s.Ei.DalleAgent:case s.Ei.Gizmo:case s.Ei.ProfilePicture:throw new o.vq("Use case not supported by cloud doc: ".concat(r.kind))}break;case"folder":throw new o.vq("Folder type not supported")}a.Z.postRetrievalTiming({e2eLatencyMs:performance.now()-y,type:u.contextConnector})}catch(n){c.U.addError(Error("Failed to upload connected file by ".concat(u.contextConnector),{cause:n})),S(g,(0,f.Ad)(t.name,null==u?void 0:u.syntheticExtension),n);let r="NotInstanceOfError";if(n instanceof o.Q0){var b;r="FatalServerError_type_".concat(null!==(b=n.type)&&void 0!==b?b:"undefined")}else(n instanceof o.gK||n instanceof Error||n instanceof o.vq)&&(r=n.name);m.MP.onError(e,"error",r,{kind:s.Ei.MyFiles},j)}}async function v(e,t,r,n,s){let{width:a,height:o}=await j(t);return b(e,t,r,{kind:n},s,{imageDimensions:{width:a,height:o}})}async function O(e,t){let r=Date.now()+6e4,n=e=>new Promise(t=>setTimeout(t,e)),i=0;for(;Date.now()<r;){let r=await a.Z.getRetrievalStatus(e,t);if(r.status===s.Xf.Success||r.status===s.Xf.Skipped)return r;if(r.status===s.Xf.Failed)throw new o.vq("Context extraction failed",r.error_code);i++,await n(Math.min(1e3,100*i))}throw new o.vq("Retrieval indexing timed out")}async function k(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n="Unknown error";try{n=await e.data}catch(e){}throw r&&a.Z.markFileUploadFailed(t,{error:n}),new o.vq("File upload to blobstore failed","failed_upload_to_blobstore")}function S(e,t,r){let n=(0,f.kr)(e,"default_upload_error",{fileName:t});r instanceof o.vq&&null!=r.code&&(n=(0,f.kr)(e,r.code)),p.m.danger(n,x)}let Z=(0,u.vU)({retrievalSkippedFile:{id:"useFilePickerState.retrievalSkippedFile",defaultMessage:'Unable to extract text from "{fileName}"'}})},62166:function(e,t,r){"use strict";r.d(t,{Dw:function(){return b},HR:function(){return j},MP:function(){return w},gF:function(){return y}});var n=r(98601),s=r(99333),a=r(99976),o=r(61619),i=r(82363),l=r(68306),c=r(68810),u=r(24740),d=r(84082),p=r(93866),m=r(98628),f=r(66114);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let x={files:[],connectorFileData:{}},y=(0,c.Ue)(()=>x),j={hasUploadInProgress:e=>{let{files:t}=e;return t.some(e=>e.status===p.XX.Uploading)},getReadyFiles:e=>{let{files:t}=e;return t.filter(e=>e.status===p.XX.Ready)}},b={reset:()=>{y.setState(x)},uploadFile:async function(e,t,r,n,l){let c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},g=arguments.length>6?arguments[6]:void 0,h=arguments.length>7?arguments[7]:void 0,{gizmoId:x}=c,j=y.getState().files,b=(0,f.xs)(r,t.name,t.type,null==h?void 0:h.contextConnector,g),O={tempId:e,gizmoId:c.gizmoId,status:p.XX.Uploading,file:t,progress:1,fileId:null,cdnUrl:null,contextConnectorInfo:h,contextConnector:null==h?void 0:h.contextConnector};if(j.length===d.dO)a.A.logEvent(o.M.uploadedMaxFilesError),u.m.danger(l.formatMessage(v.maxUploadsAtATime,{maxUploads:d.dO,fileName:t.name}),d.$e);else if(j.some(t=>t.tempId===e))a.A.logEvent(o.M.uploadedDuplicateFileError),u.m.danger(l.formatMessage(v.duplicateFileAttached,{fileName:t.name.length>20?t.name.slice(0,19)+"â€¦":t.name}),d.$e);else{let r;y.setState(e=>{let{files:t}=e;return{files:[...t,O]}});let a={};if(n.includes(t.type)){if(r={kind:s.Ei.Multimodal},!h){let{width:e,height:r}=await (0,m.po)(t);if(e>2048||r>2048)try{let n=await (0,f.Tu)(t,2048),s=await (0,m.po)(n);e=s.width,r=s.height,t=n}catch(e){i.U.addError(Error("Error resizing image:",{cause:e}))}a.imageDimensions={width:e,height:r}}}else switch(b){case p.AJ.Multimodal:throw Error("Multimodal file upload not supported mime type, ".concat(t.type,"\nSupported mime types: ")+n.join(", "));case p.AJ.Interpreter:r={kind:s.Ei.AceUpload};break;case p.AJ.Retrieval:r={kind:s.Ei.MyFiles},a.usesRetrievalIndex=!0;break;case p.AJ.ProfilePicture:throw Error("cannot upload profile picture via uploadFile");case p.AJ.ContextConnector:case p.AJ.None:return}null!=x&&(r={kind:s.Ei.Gizmo,gizmoId:x}),c.skipUpload||(h?await (0,m.R3)(e,t,r,n,h,c.gizmoId,l):await (0,m.cT)(e,t,l,r,w,a))}},createFileCompleted:(e,t,r,n)=>{let s=y.getState().files,a=s.findIndex(t=>t.tempId===e),o=s[a];if(a>=0&&o.status===p.XX.Uploading){let e=[...s];e.splice(a,1,h(h({},o),{},{progress:10,fileId:t,cdnUrl:r,contextConnector:n})),y.setState({files:e})}},updateProgress:(e,t)=>{let r=y.getState().files,n=r.findIndex(t=>t.tempId===e),s=r[n];if(n>=0&&s.status===p.XX.Uploading){let e=[...r];e.splice(n,1,h(h({},s),{},{progress:t})),y.setState({files:e})}},uploadCompleted:(e,t,r,n,s)=>{let i=y.getState().files,l=i.findIndex(t=>t.tempId===e);if(l>=0&&i[l].status===p.XX.Uploading&&null!=i[l].fileId){var c,u,d;let t=i[l],m=[...i],g=h(h({},t),{},{tempId:e,status:p.XX.Ready,progress:100,fileSpec:h(h({name:t.file.name,id:t.fileId,size:t.file.size,contextConnectorInfo:t.contextConnectorInfo,mimeType:null!==(c=null!==(u=null==n?void 0:n.mimeType)&&void 0!==u?u:t.file.type)&&void 0!==c?c:(0,f.s1)(t.file.name)},r||{}),n||{})});m.splice(l,1,g);let x=h({},y.getState().connectorFileData);s&&(x[null==s?void 0:s.file_id]=s),y.setState({files:m,connectorFileData:x}),a.A.logEvent(o.M.uploadFileCompleted,{status:t.status,fileId:t.fileId,contextConnector:null!==(d=t.contextConnector)&&void 0!==d?d:"local"})}},remove:(e,t,r,n,s)=>{let i=y.getState().files,l=i.findIndex(t=>t.tempId===e);if(l>=0){let e=i[l];"error"===t?a.A.logEvent(o.M.uploadFileError,{status:e.status,fileId:e.fileId,client:"web",errorClassName:null!=r?r:"undefined",useCaseType:n,uploadStatus:null!=s?s:"undefined",contextConnector:e.contextConnector}):a.A.logEvent(o.M.removeFile,{status:e.status,fileId:e.fileId});let c=[...i];c.splice(l,1),y.setState({files:c})}}},w={onFileCreated:b.createFileCompleted,onFileUploadProgress:b.updateProgress,onFileUploaded:b.uploadCompleted,onError:b.remove},v=(0,l.vU)({maxUploadsAtATime:{id:"useFilePickerState.maxUploadsAtATime",defaultMessage:"Unable to upload {fileName}. Max {maxUploads} uploads at a time"},duplicateFileAttached:{id:"useFilePickerState.duplicateFileAttached",defaultMessage:"Unable to upload {fileName} because an identical file has already been attached to this message."}})},88815:function(e,t,r){"use strict";r.d(t,{J:function(){return s},N:function(){return a}});var n=r(68810);let s={label:"Auto",value:""},a=(0,n.Ue)(()=>({forceParagen:!1,forceParagenModel:s,forceNulligen:!1,forceIndepthFeedback:!1,forceIndepthFeedbackPrompt:"The user has opted in to provide additional feedback on the previous response. Encourage the user to share feedback that you can store in a memory to better meet their needs in future. Use no more than 3 turns. If at any point the user indicates no longer wanting to provide feedback, return to the original topic.",forceRateLimit:!1,resetRateLimits:!1,showDebugConversationTurns:!1,rebaseSystemMessageContent:null}))},68865:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/groups",function(){return r(43062)}])}},function(e){e.O(0,[2205,4198,6636,4089,9504,7137,3088,8500,2406,3183,2349,5162,7437,7035,9725,3625,5385,9417,6003,2879,3662,2888,9774,179],function(){return e(e.s=68865)}),_N_E=e.O()}]);
//# sourceMappingURL=groups-ba5a8b23e1a290e6.js.map