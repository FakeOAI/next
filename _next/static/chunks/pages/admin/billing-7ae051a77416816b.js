(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3224],{51516:function(e,t,n){"use strict";function i(e,t){if(t.length<e)throw TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}n.d(t,{Z:function(){return i}})},29237:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return e_},default:function(){return eD}});var i,a,s,l,r,o,c,d,u=n(34142),f=n(98601),m=n(93465),p=n(59144),g=n(24434),x=n(50454),v=n(24740),h=n(43991),j=n(60806),b=n(92379),y=n(75172),w=n(62984),M=n(68306),O=n(651);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach(function(t){(0,f.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let S=((i={}).FLEXIBLE="month",i.ANNUAL="year",i),N=(0,j.b)(S);function Z(e){let{isOpen:t,onClose:n,initialTeamBillingType:i,renewalDate:a,accountId:s}=e,{0:l,1:r}=(0,b.useState)(i),{0:o,1:c}=(0,b.useState)(!1),{0:d,1:u}=(0,b.useState)(!1),f=k[l],p=(0,y.Z)(),x=(0,m.bm)(s),h=async()=>{u(!0);try{await x.mutateAsync({accountId:s,updatedPriceInterval:l===S.FLEXIBLE?"month":"year",updatedSeats:void 0}),u(!1),v.m.success(p.formatMessage({id:"teamBilling.successfullyUpdatedSubscription",defaultMessage:"Your subscription was updated successfully"}),{hasCloseButton:!0}),c(!1),n()}catch(e){v.m.warning(p.formatMessage({id:"teamBilling.errorUpdatingSubscription",defaultMessage:"There was a problem updating your subscription"}),{hasCloseButton:!0})}finally{u(!1)}};return(0,O.jsx)(g.Z,{type:"success",isOpen:t,onClose:()=>{c(!1),r(i),n()},size:"custom",className:"max-w-xl",noPadding:!0,title:o?p.formatMessage({id:"teamBilling.changeBillingScheduleConfirmTitle",defaultMessage:"Confirm changes"}):p.formatMessage({id:"teamBilling.changeBillingScheduleTitle",defaultMessage:"Change billing schedule"}),showCloseButton:!0,children:o?(0,O.jsx)(C,{selectedPlan:l,initialTeamBillingType:i,renewalDate:a,selectedPlanData:f,handleUpdate:h,isUpdating:d}):(0,O.jsx)(I,{setSelectedPlan:r,selectedPlan:l,initialTeamBillingType:i,toggleConfirmPage:function(){c(!o)},renewalDate:a})})}function I(e){let{selectedPlan:t,setSelectedPlan:n,initialTeamBillingType:i,toggleConfirmPage:a,renewalDate:s}=e,l=(0,y.Z)();return(0,O.jsxs)("div",{children:[(0,O.jsx)("div",{className:"grid grid-flow-row grid-cols-2",children:(0,O.jsxs)(h.fC,{className:"col-span-2 grid md:col-span-2 md:grid-cols-2",defaultValue:t,onValueChange:e=>{N(e)&&n(e)},children:[(0,O.jsx)(x.IW,E({billingType:S.FLEXIBLE},x.c0)),(0,O.jsx)(x.IW,E({billingType:S.ANNUAL},x.sr))]})}),(0,O.jsx)("hr",{}),(0,O.jsxs)("div",{className:"m-4 flex items-center justify-between",children:[(0,O.jsx)("span",{className:"text-sm text-token-text-secondary",children:(0,O.jsx)(w.Z,E(E({},x.sY.changeEffectDate),{},{values:{date:(0,O.jsx)(M.Ji,{value:s,year:"numeric",month:"long",day:"numeric"})}}))}),(0,O.jsx)(p.m,{title:l.formatMessage(x.sY.continueToPricePreview),disabled:t===i,color:"primary",onClick:()=>{a()}})]})]})}function C(e){let{initialTeamBillingType:t,selectedPlan:n,renewalDate:i,selectedPlanData:a,handleUpdate:s,isUpdating:l}=e,r=(0,y.Z)();return(0,O.jsxs)("div",{className:"p-4",children:[(0,O.jsx)("span",{className:"text-sm",children:(0,O.jsx)(w.Z,E(E({},x.sY.confirmPageChangeEffectDate),{},{values:{current_plan:t===S.FLEXIBLE?"Flexible (monthly)":"Annual",new_plan:n===S.FLEXIBLE?"Flexible (monthly)":"Annual",date:(0,O.jsx)(M.Ji,{value:i,year:"numeric",month:"long",day:"numeric"})}}))}),(0,O.jsxs)("div",{className:"mt-4 flex flex-col bg-token-main-surface-secondary p-4",children:[(0,O.jsx)("span",{className:"font-semibold",children:(0,O.jsx)(w.Z,E({},a.name))}),(0,O.jsx)("span",{className:"text-sm",children:(0,O.jsx)(w.Z,E(E({},a.cost),{},{values:{s:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,O.jsx)(x.Re,{children:t})}}}))}),(0,O.jsx)("span",{className:"text-sm text-token-text-secondary",children:(0,O.jsx)(w.Z,E({},a.structure))})]}),(0,O.jsx)("div",{className:"mt-4 flex justify-end",children:(0,O.jsx)(p.m,{title:r.formatMessage(x.sY.confirmChange),color:"primary",onClick:s,loading:l})})]})}let k={[S.FLEXIBLE]:{name:x.sY.flexiblePlanName,cost:x.sY.flexiblePlanCost,structure:x.sY.teamsCostStructure},[S.ANNUAL]:{name:x.sY.annualPlanName,cost:x.sY.annualPlanCost,structure:x.sY.teamsCostStructure}};var T=n(2721),B=n(93951),_=n(31498),D=n(88667),L=n(19841),F=n(34977),U=n(11550),A=n(92609),z=n(97537),X=n(98095),R=n(94668),Y=n(47563),q=n(59725),G=n(6440);function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach(function(t){(0,f.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function W(e){let{isOpen:t,onClose:n}=e,i=(0,y.Z)(),{data:a,isLoading:s}=(0,m.ZP)(),l=(0,B.t)(),r=(0,m.St)(null==l?void 0:l.id),o=(0,_.aF)(),{0:c,1:d}=(0,b.useState)(""),{0:u,1:f}=(0,b.useState)(!1),x=(null==o?void 0:o.email)&&c.toLowerCase()==o.email.toLowerCase(),{0:h,1:j}=(0,b.useState)(a&&!a.will_renew);if(s||!l||!a)return null;let M=async()=>{f(!0);try{await r.mutateAsync(l.id),j(!0)}catch(e){v.m.warning(i.formatMessage($.errorCancellingSubscription),{hasCloseButton:!0})}finally{f(!1)}};return(0,O.jsx)(g.Z,{type:"success",onClose:n,showCloseButton:!0,isOpen:t,className:"",title:(0,O.jsx)("span",{className:"text-lg",children:(0,O.jsx)(w.Z,J({},$.cancelPlan))}),children:h?(0,O.jsxs)("div",{children:[(0,O.jsx)("h3",{className:"mb-2 text-base font-semibold text-token-text-primary",children:(0,O.jsx)(w.Z,J({},$.successfullyCanceled))}),null!=a.active_until&&(0,O.jsx)("p",{className:"text-sm text-token-text-primary",children:(0,O.jsx)(w.Z,J(J({},$.retainUntil),{},{values:{expiryDate:new Date(a.active_until)}}))}),(0,O.jsx)("div",{className:"mt-6 flex w-full flex-row justify-end",children:(0,O.jsx)(p.m,{title:i.formatMessage($.doneButton),color:"primary",onClick:n,disabled:u})})]}):(0,O.jsxs)("div",{children:[(0,O.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4",children:[(0,O.jsxs)("div",{className:"flex w-full items-center gap-4",children:[(0,O.jsx)(q.B0,{src:l.data.profilePictureUrl,size:"large"}),(0,O.jsxs)("div",{className:"flex-col",children:[(0,O.jsx)("p",{className:"font-semibold",children:l.data.name}),(0,O.jsx)("p",{className:"text-sm text-token-text-secondary",children:(0,O.jsx)(w.Z,J(J({},$.membersCount),{},{values:{count:a.seats_entitled}}))})]})]}),(0,O.jsxs)("div",{className:"w-full",children:[(0,O.jsx)("h3",{className:"mb-2 text-base font-semibold text-token-text-primary",children:(0,O.jsx)(w.Z,J({},$.areYouSure))}),(0,O.jsxs)("ul",{className:"list-disc pl-5 text-sm text-token-text-secondary",children:[(0,O.jsx)("li",{className:"my-2",children:(0,O.jsx)(w.Z,J({},$.dataUnavailable))}),null!=a.active_until&&(0,O.jsx)("li",{className:"my-2",children:(0,O.jsx)(w.Z,J(J({},$.retainUntil),{},{values:{expiryDate:new Date(a.active_until)}}))}),(0,O.jsx)("li",{className:"my-2",children:(0,O.jsx)(w.Z,J({},$.retainEmailAccess))})]})]}),(0,O.jsxs)("div",{className:"w-full",children:[(0,O.jsx)("h3",{className:"mb-2 text-base font-semibold text-token-text-primary",children:(0,O.jsx)(w.Z,J({},$.enterEmailToConfirm))}),(0,O.jsx)(G.Z,{type:"text",name:"user-email",placeholder:"abcd@acme.com",onChange:e=>{d(e.target.value)}})]})]}),(0,O.jsxs)("div",{className:"mt-6 flex w-full flex-row justify-end",children:[(0,O.jsx)(p.m,{title:i.formatMessage($.keepSubscriptionButton),onClick:n,disabled:u}),(0,O.jsx)(p.m,{title:i.formatMessage($.cancelSubscriptionButton),onClick:M,disabled:!x,loading:u,color:"danger",className:"ml-2"})]})]})})}let $=(0,M.vU)({dataUnavailable:{id:"cancelTeamPlanModal.dataUnavailable",defaultMessage:"All workspace data including chat history and settings will not be available."},cancelPlan:{id:"cancelTeamPlanModal.cancelPlan",defaultMessage:"Cancel subscription"},retainUntil:{id:"cancelTeamPlanModal.retainUntil",defaultMessage:"You will retain access to the workspace until the end of your billing cycle on {expiryDate, date, long}."},retainEmailAccess:{id:"cancelTeamPlanModal.retainEmailAccess",defaultMessage:"You will still be able to use ChatGPT with the other workspaces associated with this email address."},errorCancellingSubscription:{id:"cancelTeamPlanModal.errorCancellingSubscription",defaultMessage:"There was a problem cancelling your subscription."},areYouSure:{id:"cancelTeamPlanModal.areYouSure",defaultMessage:"Are you sure?"},enterEmailToConfirm:{id:"cancelTeamPlanModal.enterEmailToConfirm",defaultMessage:"Enter your Email address to confirm"},emailPlaceholder:{id:"cancelTeamPlanModal.emailPlaceholder",defaultMessage:"abcd@acme.com"},doneButton:{id:"cancelTeamPlanModal.doneButton",defaultMessage:"Done"},keepSubscriptionButton:{id:"cancelTeamPlanModal.keepSubscriptionButton",defaultMessage:"Keep subscription"},cancelSubscriptionButton:{id:"cancelTeamPlanModal.cancelSubscriptionButton",defaultMessage:"Cancel subscription"},successfullyCanceled:{id:"cancelTeamPlanModal.successfullyCanceled",defaultMessage:"You have successfully canceled your subscription."},membersCount:{id:"yourComponent.membersCount",defaultMessage:"{count, plural, one {# member} other {# members}}"}});var Q=n(2346),V=n(32378),K=n(55356),ee=n(15478);function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function en(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach(function(t){(0,f.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ei=((a=ei||{}).FLEXIBLE="month",a.ANNUAL="year",a);let ea=ee.Z.p(s||(s=(0,Q.Z)(["text-base font-semibold mb-3 mt-3"])));function es(e){let{isOpen:t,onClose:n,initialTeamBillingType:i,initialSeats:a,accountId:s,renewalDate:l}=e,r=(0,y.Z)(),{0:o,1:c}=(0,b.useState)(a),{0:d,1:u}=(0,b.useState)(!1),{0:f,1:p}=(0,b.useState)(!1),h=x.qS[i],j=i===ei.FLEXIBLE?x.c0:x.sr,w=(0,m.bm)(s),M=async()=>{p(!0);try{await w.mutateAsync({accountId:s,updatedPriceInterval:void 0,updatedSeats:o}),p(!1),v.m.success(r.formatMessage({id:"teamBilling.successfullyUpdatedSubscription",defaultMessage:"Your subscription was updated successfully"}),{hasCloseButton:!0}),u(!1),n()}catch(e){v.m.warning(r.formatMessage({id:"teamBilling.errorUpdatingSubscription",defaultMessage:"There was a problem updating your subscription"}))}finally{p(!1)}};return(0,O.jsx)(g.Z,{type:"success",isOpen:t,onClose:()=>{u(!1),c(a),n()},size:"custom",noPadding:!0,className:"max-w-xl",showCloseButton:!0,title:d?r.formatMessage({id:"teamsManageSeatsModal.title",defaultMessage:"Manage seats"}):r.formatMessage({id:"teamsManageSeatsModalConfirmPage.title",defaultMessage:"Review"}),children:d?(0,O.jsx)(er,{initialTeamBillingType:i,numSeats:o,initialSeats:a,handleUpdate:M,isUpdating:f,renewalDate:l}):(0,O.jsx)(el,{initialTeamBillingType:i,selectedPlanBillingInfo:j,numSeats:o,initialSeats:a,setNumSeats:c,selectedPlanData:h,toggleConfirmPage:function(){u(!d)}})})}function el(e){let{initialTeamBillingType:t,selectedPlanBillingInfo:n,numSeats:i,initialSeats:a,setNumSeats:s,selectedPlanData:l,toggleConfirmPage:r}=e,o=(0,y.Z)();return(0,O.jsxs)("div",{className:"grid grid-flow-row grid-cols-2",children:[(0,O.jsx)(h.fC,{className:"col-span-2 grid md:col-span-1 md:grid-cols-1",defaultValue:t,children:(0,O.jsx)(x.IW,en({billingType:t},n))}),(0,O.jsxs)("div",{className:"col-span-3 overflow-hidden border-l border-token-main-surface-tertiary bg-token-main-surface-secondary p-6 md:col-span-1",children:[(0,O.jsx)("label",{className:"mb-3 block text-base font-semibold",htmlFor:"seats",children:(0,O.jsx)(w.Z,en({},x.sY.seatsTitle))}),(0,O.jsx)(x.ZY,{numSeats:i,minSeats:a,setNumSeats:s}),(0,O.jsx)(V.b,{}),(0,O.jsx)(ea,{children:(0,O.jsx)(w.Z,en({},x.sY.summaryTitle))}),(0,O.jsxs)("div",{className:"text-sm",children:[(0,O.jsx)("p",{className:"mb-2",children:(0,O.jsx)(w.Z,en({},l.name))}),(0,O.jsxs)(K.QI,{children:[(0,O.jsx)(K.HC,{children:(0,O.jsx)(w.Z,en({},l.billed))}),(0,O.jsx)(K.HC,{children:(0,O.jsx)("b",{children:(0,O.jsx)(w.Z,en(en({},l.total),{},{values:{totalCost:(i||0)*(t===ei.ANNUAL?300:30)}}))})})]})]})]}),(0,O.jsx)("hr",{}),(0,O.jsx)("div",{className:"m-4 flex justify-end",children:(0,O.jsx)(p.m,{title:o.formatMessage({id:"teamsManageSeatsModal.continue",defaultMessage:"Continue"}),disabled:i===a,onClick:()=>{r()},color:"primary"})})]})}function er(e){let{initialTeamBillingType:t,numSeats:n,initialSeats:i,renewalDate:a,handleUpdate:s,isUpdating:l}=e,r=(0,y.Z)();return(0,O.jsxs)("div",{className:"p-6",children:[(0,O.jsxs)("div",{className:"flex justify-between",children:[(0,O.jsx)("span",{className:"font-semibold",children:(0,O.jsx)(w.Z,{id:"teamsManageSeatsModal.additionalSeats",defaultMessage:"{additionalSeats} additional seats",values:{additionalSeats:n-i}})}),(0,O.jsx)("span",{className:"font-semibold",children:(0,O.jsx)(w.Z,{id:"teamsManageSeatsModal.additionalSeatsTotal",defaultMessage:"USD ${totalCost}.00",values:{totalCost:(n-i)*(t===ei.ANNUAL?300:30)}})})]}),(0,O.jsx)("span",{className:"text-sm text-token-text-secondary",children:(0,O.jsx)(w.Z,{id:"teamsManageSeatsModal.priceBreakdown",defaultMessage:"${price} per month x {additionalSeats} additional seats",values:{price:t===ei.ANNUAL?300:30,additionalSeats:n-i}})}),(0,O.jsx)("span",{className:"mt-4 flex flex-col text-sm text-token-text-secondary",children:(0,O.jsx)(w.Z,{id:"teamsManageSeatsModal.chargeMessage",defaultMessage:"You will be charged for {numSeats} total seats at your next renewal on {date}",values:{numSeats:n,date:(0,O.jsx)(M.Ji,{value:a,year:"numeric",month:"long",day:"numeric"})}})}),(0,O.jsx)("div",{className:"mt-6 flex justify-end",children:(0,O.jsx)(p.m,{title:r.formatMessage({id:"teamsManageSeatsModal.payNow",defaultMessage:"Pay now"}),color:"primary",onClick:s,loading:l})})]})}var eo=n(30853);function ec(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function ed(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ec(Object(n),!0).forEach(function(t){(0,f.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ec(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eu(e){var t;let{numInUse:n,numAllocated:i,isTeam:a,subscriptionWillRenew:s,subscriptionBillingPeriod:l,accountId:r,subscriptionRenewalDate:o}=e,c=Math.max(i,n),d=null===(t=(0,D.sB)("3954884439"))||void 0===t?void 0:t.value,{0:u,1:f}=(0,b.useState)(!1),m=function(){f(!u)},p="monthly"===l?S.FLEXIBLE:S.ANNUAL;return(0,O.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,O.jsxs)("div",{className:"flex justify-between",children:[(0,O.jsx)("span",{className:"mt-1 text-left text-sm",children:(0,O.jsx)(w.Z,ed(ed({},eb.description),{},{values:{num:"".concat(n,"/").concat(i)}}))}),a&&s&&d&&(0,O.jsx)(U.z,{color:"secondary",className:"text-right",onClick:m,children:(0,O.jsx)(w.Z,{id:"components.business.NumSeats.manageSeats",defaultMessage:"Manage seats"})}),(0,O.jsx)(es,{isOpen:u,onClose:m,initialTeamBillingType:p,initialSeats:i,accountId:r,renewalDate:o})]}),(0,O.jsx)(c>10?ef:ej,{numInUse:n,numAllocated:i})]})}function ef(e){let{numAllocated:t,numInUse:n}=e,i=(0,y.Z)(),a=n>t,s=a?100:n/t*100,l=a?t/n*100:100;return(0,O.jsx)("div",{className:(0,L.default)("relative w-full rounded-full",a?"bg-orange-500":"bg-token-main-surface-primary"),children:(0,O.jsxs)("div",{className:"relative h-4",style:{width:"".concat(l,"%")},children:[(0,O.jsx)("div",{className:(0,L.default)("h-4 overflow-hidden rounded-l-full bg-green-600",n===t&&"rounded-r-full"),style:{width:"".concat(s,"%")}}),n!==t&&a&&(0,O.jsx)("div",{className:"absolute right-0 top-[-3px] bg-token-main-surface-primary",children:(0,O.jsx)(eo.u,{label:i.formatMessage(eb.dividerTooltip,{count:t}),children:(0,O.jsx)(em,{className:"px-1 py-0.5"})})})]})})}let em=e=>{let{className:t}=e;return(0,O.jsxs)("div",{className:(0,L.default)("flex flex-col gap-0.5",t),children:[(0,O.jsx)(eh,{}),(0,O.jsx)(eh,{}),(0,O.jsx)(eh,{}),(0,O.jsx)(eh,{})]})},ep=ee.Z.div(l||(l=(0,Q.Z)(["h-4 w-4 rounded-full"]))),eg=(0,ee.Z)(ep)(r||(r=(0,Q.Z)(["bg-green-600"]))),ex=(0,ee.Z)(ep)(o||(o=(0,Q.Z)(["bg-token-main-surface-tertiary"]))),ev=(0,ee.Z)(ep)(c||(c=(0,Q.Z)(["bg-orange-500"]))),eh=ee.Z.span(d||(d=(0,Q.Z)(["w-[3px] h-[3px] bg-gray-400 dark:bg-gray-500 rounded-full"])));function ej(e){let{numAllocated:t,numInUse:n}=e,i=(0,y.Z)(),a=n>t,s=(0,b.useMemo)(()=>Array.from(Array(a?n:t).keys()),[a,t,n]);return(0,O.jsx)("div",{className:"flex items-center gap-2",children:s.map(e=>{let s=ev,l=null;return e<n&&!a?s=eg:e<t&&!a&&(s=ex),e===t-1&&(l=(0,O.jsx)(eo.u,{label:i.formatMessage(eb.dividerTooltip,{count:t}),children:(0,O.jsx)(em,{})})),(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(s,{},e),l]})})})}let eb=(0,M.vU)({dividerTooltip:{defaultMessage:"Your team has {count, plural, =0 {no seats} one {# seat} other {# seats}} purchased",id:"components.business.NumSeats.dividerTooltip"},description:{defaultMessage:"{num} seats in use",id:"components.business.NumSeats.description"}});var ey=n(8040),ew=n(84760);function eM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function eO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eM(Object(n),!0).forEach(function(t){(0,f.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eM(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let eP=(0,M.vU)({invoicesLoadError:{id:"organizationBillingInfo.invoicesLoadError.0",defaultMessage:"Failed to load invoices. Contact support@openai.com if error persists."}});function eE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function eS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eE(Object(n),!0).forEach(function(t){(0,f.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eE(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eN(){var e;let{data:t,isLoading:n,isError:i}=(0,m.ZP)(),a=(0,B.t)(),{0:s,1:l}=(0,b.useState)(!1);if(n)return(0,O.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,O.jsx)(z.Z,{})});if(i||!t||!a)return null;let r=null!=t.active_until,o=(null==t?void 0:t.seats_in_use)>(null==t?void 0:t.seats_entitled);return(0,O.jsx)(O.Fragment,{children:(0,O.jsxs)(ey.i9,{children:[(0,O.jsx)(ey.A4,{children:(0,O.jsx)(w.Z,eS({},eB.planTitle))}),(0,O.jsx)("hr",{}),(0,O.jsxs)("div",{className:"flex items-center justify-between",children:[(0,O.jsxs)("div",{children:[(0,O.jsx)(ey.i$,{children:null!=a&&a.isEnterprise()?r?(0,O.jsx)(w.Z,eS({},eB.activeEnterpriseLicense)):null!=a&&a.isResellerHosted()?(0,O.jsx)(w.Z,eS({},eB.resellerHostedEnterpriseLicense)):(0,O.jsx)(w.Z,eS({},eB.pendingEnterpriseLicense)):null!=a&&a.isEdu()?r?(0,O.jsx)(w.Z,eS({},eB.activeEduLicense)):null!=a&&a.isResellerHosted()?(0,O.jsx)(w.Z,eS({},eB.resellerHostedEduLicense)):(0,O.jsx)(w.Z,eS({},eB.pendingEduLicense)):r?t.non_profit_org_discount_applied?(0,O.jsx)(w.Z,eS({},eB.activeTeamLicenseNonProfitOrg)):(0,O.jsx)(w.Z,eS({},eB.activeTeamLicense)):(0,O.jsx)(w.Z,eS({},eB.pendingTeamLicense))}),null!=t.active_until&&(0,O.jsx)(ey.Li,{className:"mt-1",children:null!=a&&a.isEnterpriseOrEdu()?(0,O.jsx)(w.Z,eS(eS({},eB.licenseExpiry),{},{values:{expiryDate:new Date(t.active_until)}})):t.will_renew?(0,O.jsx)(w.Z,eS(eS({},eB.renewalDate),{},{values:{expiryDate:new Date(t.active_until)}})):(0,O.jsx)(w.Z,eS(eS({},eB.deactivateDate),{},{values:{expiryDate:new Date(t.active_until)}}))})]}),(0,O.jsx)(eZ,{isOpen:s,onDropdownOpen:function(){l(!s)}})]}),(0,O.jsx)("hr",{}),r&&(0,O.jsxs)("div",{children:[(0,O.jsx)(ey.i$,{children:(0,O.jsx)(w.Z,eS({},eB.seatsTitle))}),(0,O.jsx)(ek,{isTeam:null!==(e=null==a?void 0:a.isTeam())&&void 0!==e&&e,accountId:a.id}),(null==a?void 0:a.isTeam())&&o&&(0,O.jsxs)("span",{className:"text-sm text-token-text-secondary",children:[(0,O.jsx)(w.Z,eS({},eB.teamsAutochargeMessage)),(0,O.jsx)(A.Z,{className:"pl-1",openNewTab:!0,href:"https://help.openai.com/en/articles/8792536-manage-billing-on-the-chatgpt-team-subscription-plan",children:(0,O.jsx)(w.Z,eS({},eB.billingLearnMore))})]})]}),(0,O.jsx)("hr",{})]})})}function eZ(e){var t;let{isOpen:n,onDropdownOpen:i}=e,{0:a,1:s}=(0,b.useState)(!1),l=(0,F.useRouter)(),r=(0,y.Z)(),o=(0,B.t)(),{data:c}=(0,m.ZP)(),{0:d,1:u}=(0,b.useState)(!1),f=function(){u(!d)},{0:p,1:g}=(0,b.useState)(!1),x=function(){g(!p)},h=null===(t=(0,D.sB)("1318146997"))||void 0===t?void 0:t.value;if(!o||!o.isTeam()||!c)return;let j=async()=>{s(!0);try{let e=await T.Z.fetchCustomerPortalUrl(null==o?void 0:o.getWorkspaceId());l.push(e.url)}catch(e){v.m.warning(r.formatMessage(eB.stripeErrorWarning),{hasCloseButton:!0})}finally{s(!1)}},M=(null==c?void 0:c.billing_period)==="monthly"?S.FLEXIBLE:S.ANNUAL;return(0,O.jsxs)(X.d,{open:n,size:"default",triggerButton:(0,O.jsx)(U.z,{color:"secondary",onClick:i,icon:Y.Tg4,children:(0,O.jsx)(w.Z,eS({},eB.manageLicenseBtn))}),children:[(0,O.jsx)(X.Z.Item,{icon:Y.ciH,onClick:j,children:(0,O.jsx)(w.Z,eS({},eB.managePaymentMethod))}),c.will_renew&&h&&(0,O.jsx)(X.Z.Item,{icon:Y.lDw,onClick:()=>{x()},children:(0,O.jsx)(w.Z,eS({},eB.manageBillingSchedule))}),null!=c.active_until&&(0,O.jsx)(Z,{isOpen:p,onClose:x,initialTeamBillingType:M,renewalDate:new Date(c.active_until),accountId:o.id}),(null==c?void 0:c.will_renew)&&(0,O.jsx)(X.Z.Separator,{}),(null==c?void 0:c.will_renew)&&(0,O.jsx)(X.Z.Item,{icon:Y.oOx,color:"danger",onClick:()=>{f()},children:(0,O.jsx)(w.Z,eS({},eB.cancelSubscriptionBtn))}),(0,O.jsx)(W,{isOpen:d,onClose:f})]})}function eI(e){let{invoice:t}=e,n=(null==t?void 0:t.status_transitions.paid_at)!=null&&new Date(1e3*t.status_transitions.paid_at),i=t&&new Date(1e3*t.due_date),a=t&&new Date(1e3*t.created);return(0,O.jsxs)(ey.vi,{className:"items-center",children:[(0,O.jsxs)("div",{className:"flex grow flex-col gap-1",children:[(0,O.jsx)("span",{children:a?(0,O.jsx)(w.Z,eS(eS({},eB.invoiceName),{},{values:{createdDate:a}})):(0,O.jsx)(w.Z,eS({},eB.defaultInvoiceName))}),null!=t&&t.paid&&null!=n?(0,O.jsx)("div",{className:"text-xs text-token-text-secondary",children:(0,O.jsx)(w.Z,eS(eS({},eB.paidInvoice),{},{values:{invoiceDate:n}}))}):t&&(0,O.jsx)("div",{className:"text-xs text-green-600",children:(0,O.jsx)(w.Z,eS(eS({},eB.upcomingInvoice),{},{values:{invoiceDate:i}}))})]}),(0,O.jsx)("a",{href:null==t?void 0:t.hosted_invoice_url,className:(0,L.default)("mx-auto",(null==t?void 0:t.hosted_invoice_url)==void 0&&"cursor-not-allowed opacity-20"),target:"_blank",rel:"noreferrer",children:(0,O.jsx)(Y.Pfi,{className:"icon-sm text-green-600"})})]})}function eC(){let{0:e,1:t}=(0,b.useState)({limit:5}),{data:n,isError:i}=function(e){var t;let n=(0,B.t)(),i=null==n?void 0:n.id,a=null!==(t=null==n?void 0:n.data.organizationId)&&void 0!==t?t:void 0;return function(e,t){let n=(0,y.Z)();return(0,ew.a)({queryKey:["organization-invoices",eO(eO({},e),{},{options:t})],queryFn:async()=>await T.Z.getInvoices(e,t).catch(e=>{throw v.m.danger(n.formatMessage(eP.invoicesLoadError,{error:e.message})),e}),enabled:"account_id"in e||"organization_id"in e})}((null==n?void 0:n.isEnterpriseOrEdu())?{organization_id:a}:{account_id:i},e)}(e),a=null!=e.startingAfter||null!=e.endingBefore&&(null==n?void 0:n.has_more),s=null!=e.endingBefore||(null==n?void 0:n.has_more)&&null==e.endingBefore;return i||null==n?(0,O.jsxs)(ey.i9,{children:[(0,O.jsx)(ey.A4,{children:(0,O.jsx)(w.Z,eS({},eB.invoicesTitle))}),(0,O.jsx)(R.Z,{children:(0,O.jsx)(w.Z,eS({},eB.noInvoices))})]}):(0,O.jsxs)(ey.i9,{children:[(0,O.jsx)(ey.A4,{children:(0,O.jsx)(w.Z,eS({},eB.invoicesTitle))}),(0,O.jsx)(ey.qQ,{children:n.data.map(e=>(0,O.jsx)(eI,{invoice:e},e.id))}),(0,O.jsxs)("div",{className:"flex",children:[a&&(0,O.jsx)("button",{onClick:()=>{n&&t(e=>eS(eS({},e),{},{endingBefore:n.data[0].id,startingAfter:void 0}))},children:(0,O.jsx)(Y.DUf,{className:"icon-sm"})}),(0,O.jsx)("div",{className:"flex-grow"}),s&&(0,O.jsx)("button",{onClick:()=>{n&&t(e=>eS(eS({},e),{},{startingAfter:n.data[n.data.length-1].id,endingBefore:void 0}))},children:(0,O.jsx)(Y.ob9,{className:"icon-sm"})})]})]})}function ek(e){let{isTeam:t,accountId:n}=e,{data:i,isLoading:a,isError:s}=(0,m.ZP)();return!s&&i&&!a&&i.billing_period&&i.active_until?(0,O.jsx)(eu,{numInUse:i.seats_in_use,numAllocated:i.seats_entitled,isTeam:t,subscriptionWillRenew:i.will_renew,subscriptionBillingPeriod:i.billing_period,subscriptionRenewalDate:new Date(i.active_until),accountId:n}):null}function eT(){let e=(0,_.ec)(e=>e.currentWorkspace),t=null==e?void 0:e.organizationId,n=(0,y.Z)();return void 0===t?null:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(u.yG,{title:n.formatMessage(eB.title),subtitle:n.formatMessage(eB.subtitle)}),(0,O.jsx)(u.hb,{children:(0,O.jsxs)(ey.$V,{children:[(0,O.jsx)(eN,{}),(0,O.jsx)(eC,{})]})})]})}let eB=(0,M.vU)({title:{id:"organizationBillingInfo.title.1",defaultMessage:"Billing"},subtitle:{id:"organizationBillingInfo.subtitle",defaultMessage:"Only workspace owners can view and change these settings"},planTitle:{id:"organizationBillingInfo.planTitle",defaultMessage:"Plan"},activeEnterpriseLicense:{id:"organizationBillingInfo.activeEnterpriseLicense",defaultMessage:"Enterprise License"},pendingEnterpriseLicense:{id:"organizationBillingInfo.pendingEnterpriseLicense",defaultMessage:"Enterprise License (pending activation)"},resellerHostedEnterpriseLicense:{id:"organizationBillingInfo.resellerHostedEnterpriseLicense",defaultMessage:"Enterprise License"},activeEduLicense:{id:"organizationBillingInfo.activeEduLicense",defaultMessage:"Edu License"},pendingEduLicense:{id:"organizationBillingInfo.pendingEduLicense",defaultMessage:"Edu License (pending activation)"},resellerHostedEduLicense:{id:"organizationBillingInfo.resellerHostedEduLicense",defaultMessage:"Edu License"},activeTeamLicense:{id:"organizationBillingInfo.activeTeamLicense",defaultMessage:"Team License"},activeTeamLicenseNonProfitOrg:{id:"organizationBillingInfo.activeTeamLicenseNonProfitOrg",defaultMessage:"Team License (Non Profit Discount)"},pendingTeamLicense:{id:"organizationBillingInfo.pendingTeamLicense",defaultMessage:"Team License (pending activation)"},licenseExpiry:{id:"organizationBillingInfo.licenseExpiry",defaultMessage:"Active until {expiryDate, date, long}"},renewalDate:{id:"organizationBillingInfo.renewalDate",defaultMessage:"Renews on {expiryDate, date, long}"},deactivateDate:{id:"organizationBillingInfo.deactivateDate",defaultMessage:"Deactivates on {expiryDate, date, long}"},seatsTitle:{id:"organizationBillingInfo.seatsTitle",defaultMessage:"Seats"},seatsInUse:{id:"organizationBillingInfo.seatsInUse",defaultMessage:"{numSeats} in use ({numSeatsPct})"},invoicesTitle:{id:"organizationBillingInfo.invoicesTitle",defaultMessage:"Invoices"},invoiceName:{id:"organizationBillingInfo.invoiceName",defaultMessage:"Invoice: {createdDate, date, long}"},defaultInvoiceName:{id:"organizationBillingInfo.defaultInvoiceName",defaultMessage:"Invoice"},paidInvoice:{id:"organizationBillingInfo.paidInvoice",defaultMessage:"Paid: {invoiceDate, date, long}"},upcomingInvoice:{id:"organizationBillingInfo.upcomingInvoice",defaultMessage:"Due: {invoiceDate, date, long}"},noInvoices:{id:"organizationBillingInfo.noInvoices",defaultMessage:"No invoices found"},manageSubscription:{id:"organizationBillingInfo.manageSubscription",defaultMessage:"Manage subscription"},cancelSubscriptionBtn:{id:"organizationBillingInfo.cancelSubscriptionBtn",defaultMessage:"Cancel subscription"},manageLicenseBtn:{id:"organizationBillingInfo.manageLicenseBtn",defaultMessage:"Manage license"},managePaymentMethod:{id:"organizationBillingInfo.managePaymentMethod",defaultMessage:"Payment method"},manageBillingSchedule:{id:"organizationBillingInfo.manageSchedule",defaultMessage:"Billing schedule"},stripeErrorWarning:{id:"organizationBillingInfo.stripeErrorWarning",defaultMessage:"Error loading account information"},teamsAutochargeMessage:{id:"organizationBillingInfo.teamsAutochargeMessage",defaultMessage:"Your additional seats will be included on your next invoice."},billingLearnMore:{id:"organizationBillingInfo.billingLearnMore",defaultMessage:"Learn more"}});var e_=!0;function eD(){return(0,O.jsx)(eT,{})}eD.getLayout=function(e){return(0,O.jsx)(u.ZP,{mobilePageTitle:"Billing",requireOwnerPrivileges:!0,children:e})}},32378:function(e,t,n){"use strict";n.d(t,{b:function(){return a}});var i=n(651);function a(){return(0,i.jsx)("hr",{className:"w-full border-token-border-xheavy"})}},8040:function(e,t,n){"use strict";n.d(t,{$V:function(){return m},A4:function(){return p},Li:function(){return h},W8:function(){return b},i$:function(){return g},i9:function(){return v},qQ:function(){return x},vi:function(){return j}});var i,a,s,l,r,o,c,d,u=n(2346),f=n(15478);let m=f.Z.div(i||(i=(0,u.Z)(["text-base text-token-text-primary flex flex-col gap-10 my-10"]))),p=f.Z.div(a||(a=(0,u.Z)(["text-xl font-semibold"]))),g=f.Z.div(s||(s=(0,u.Z)(["text-base font-semibold"]))),x=f.Z.div(l||(l=(0,u.Z)(["flex flex-col divide-y divide-token-border-light border-y border-token-border-light"]))),v=f.Z.div(r||(r=(0,u.Z)(["flex flex-col gap-3 w-full m-auto md:m-0"]))),h=f.Z.div(o||(o=(0,u.Z)(["text-sm"]))),j=f.Z.div(c||(c=(0,u.Z)(["flex justify-between py-4 gap-4"]))),b=f.Z.hr(d||(d=(0,u.Z)(["max-w-xl border-token-border-light"])))},84082:function(e,t,n){"use strict";n.d(t,{$e:function(){return s},EZ:function(){return l},Ql:function(){return a},dO:function(){return i},xC:function(){return r}});let i=10,a=4,s={duration:20,hasCloseButton:!0},l=512,r=536870912},98628:function(e,t,n){"use strict";n.d(t,{R3:function(){return y},W7:function(){return h},cT:function(){return b},lU:function(){return w},po:function(){return j}});var i=n(98601),a=n(99333),s=n(2721),l=n(92319),r=n(99976),o=n(61619),c=n(82363),d=n(68306),u=n(88815),f=n(24740),m=n(62166),p=n(66114);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let v={duration:20,hasCloseButton:!0};function h(e){return JSON.stringify({file:e.name,modified:e.lastModified,currentTime:new Date().toString()})}function j(e){return new Promise((t,n)=>{let i=new FileReader,a=new Image;i.onload=()=>{a.onload=()=>t(a),a.onerror=e=>n(e),a.src=i.result},i.readAsDataURL(e)})}async function b(e,t,n,i,c,d){var m,p,g;let x=u.N.getState().resetRateLimits,h=a.EG.Initial;r.A.logEvent(o.M.uploadFileInitiated,{client:"web",useCase:i.kind,uploadEntry:"local"});let j=d.usesRetrievalIndex?performance.now():void 0;try{let{file_id:l,upload_url:r}=await s.Z.createFile(t.name,t.size,i,!!x);c.onFileCreated(e,l,r),h=a.EG.FileCreated;let o=i.kind===a.Ei.Gizmo?i.gizmoId:void 0,u=null!==(m=d.shouldUpdateProgress)&&void 0!==m&&m,g=null!==(p=d.usesRetrievalIndex)&&void 0!==p&&p,b=await s.Z.uploadFileToAzureStorage(t,r,t=>{u&&c.onFileUploadProgress(e,10+80*t)});if(c.onFileUploadProgress(e,90),201!==b.status&&O(b,l,g),h=a.EG.FileUploaded,await s.Z.processFileUpload(l,{gizmoId:o}),h=a.EG.FileProcessed,d.usesRetrievalIndex){let t=await M(l,o);(null==t?void 0:t.status)===a.Xf.Skipped&&f.m.danger(n.formatMessage(E.retrievalSkippedFile,{fileName:t.name}),v),c.onFileUploaded(e,l,void 0,{fileTokenSize:t.file_size_tokens}),h=a.EG.RetrievalIndexCreated}else c.onFileUploaded(e,l,d.imageDimensions);null!=j&&s.Z.postRetrievalTiming({e2eLatencyMs:performance.now()-j,type:"file"})}catch(s){P(n,t.name,s);let a="NotInstanceOfError";s instanceof l.gK?a=s.name:s instanceof l.Q0?a="FatalServerError_type_".concat(null!==(g=s.type)&&void 0!==g?g:"undefined"):s instanceof Error?a=s.name:s instanceof l.vq&&(a=s.name),c.onError(e,"error",a,i,h)}}async function y(e,t,n,i,d,u,g){let h=performance.now();r.A.logEvent(o.M.uploadFileInitiated,{client:"web",useCase:n.kind,contextConnector:d.contextConnector,fileSourceType:d.type});let j=a.EG.Initial;n.kind===a.Ei.Gizmo&&(n=x(x({},n),{},{kind:i.includes(t.type)?a.Ei.Multimodal:a.Ei.MyFiles}));try{let i=await s.Z.uploadConnectorAPI(e,d.contextConnector,n,t,u,d.o365DriveId);switch(i.type){case"error":throw function(e){let{status_code:t,error_code:n,error_message:i}=e;if(!t||!(t<500))return new l.Q0(i);{let e="internal_error";return n?e=n:404===t?e="file_not_found":403===t?e="permission_error":413===t&&(e="file_too_large"),new l.vq(i,e)}}(i.error);case"file":switch(m.MP.onFileCreated(e,i.file.id,"",d.contextConnector),j=a.EG.FileProcessed,n.kind){case a.Ei.MyFiles:{m.MP.onFileUploadProgress(e,90);let t=await M(i.file.file_id,u);(null==t?void 0:t.status)===a.Xf.Skipped&&f.m.danger(g.formatMessage(E.retrievalSkippedFile,{fileName:t.name}),v),m.MP.onFileUploaded(e,i.file.file_id,void 0,{fileTokenSize:t.file_size_tokens,mimeType:i.file.mime_type}),j=a.EG.RetrievalIndexCreated;break}case a.Ei.Multimodal:m.MP.onFileUploaded(e,i.file.file_id,{width:512,height:512},{mimeType:i.file.mime_type});break;case a.Ei.AceUpload:m.MP.onFileUploaded(e,i.file.file_id,void 0,{mimeType:i.file.mime_type});break;case a.Ei.DalleAgent:case a.Ei.Gizmo:case a.Ei.ProfilePicture:throw new l.vq("Use case not supported by cloud doc: ".concat(n.kind))}break;case"folder":throw new l.vq("Folder type not supported")}s.Z.postRetrievalTiming({e2eLatencyMs:performance.now()-h,type:d.contextConnector})}catch(i){c.U.addError(Error("Failed to upload connected file by ".concat(d.contextConnector),{cause:i})),P(g,(0,p.Ad)(t.name,null==d?void 0:d.syntheticExtension),i);let n="NotInstanceOfError";if(i instanceof l.Q0){var b;n="FatalServerError_type_".concat(null!==(b=i.type)&&void 0!==b?b:"undefined")}else(i instanceof l.gK||i instanceof Error||i instanceof l.vq)&&(n=i.name);m.MP.onError(e,"error",n,{kind:a.Ei.MyFiles},j)}}async function w(e,t,n,i,a){let{width:s,height:l}=await j(t);return b(e,t,n,{kind:i},a,{imageDimensions:{width:s,height:l}})}async function M(e,t){let n=Date.now()+6e4,i=e=>new Promise(t=>setTimeout(t,e)),r=0;for(;Date.now()<n;){let n=await s.Z.getRetrievalStatus(e,t);if(n.status===a.Xf.Success||n.status===a.Xf.Skipped)return n;if(n.status===a.Xf.Failed)throw new l.vq("Context extraction failed",n.error_code);r++,await i(Math.min(1e3,100*r))}throw new l.vq("Retrieval indexing timed out")}async function O(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i="Unknown error";try{i=await e.data}catch(e){}throw n&&s.Z.markFileUploadFailed(t,{error:i}),new l.vq("File upload to blobstore failed","failed_upload_to_blobstore")}function P(e,t,n){let i=(0,p.kr)(e,"default_upload_error",{fileName:t});n instanceof l.vq&&null!=n.code&&(i=(0,p.kr)(e,n.code)),f.m.danger(i,v)}let E=(0,d.vU)({retrievalSkippedFile:{id:"useFilePickerState.retrievalSkippedFile",defaultMessage:'Unable to extract text from "{fileName}"'}})},62166:function(e,t,n){"use strict";n.d(t,{Dw:function(){return b},HR:function(){return j},MP:function(){return y},gF:function(){return h}});var i=n(98601),a=n(99333),s=n(99976),l=n(61619),r=n(82363),o=n(68306),c=n(68810),d=n(24740),u=n(84082),f=n(93866),m=n(98628),p=n(66114);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let v={files:[],connectorFileData:{}},h=(0,c.Ue)(()=>v),j={hasUploadInProgress:e=>{let{files:t}=e;return t.some(e=>e.status===f.XX.Uploading)},getReadyFiles:e=>{let{files:t}=e;return t.filter(e=>e.status===f.XX.Ready)}},b={reset:()=>{h.setState(v)},uploadFile:async function(e,t,n,i,o){let c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},g=arguments.length>6?arguments[6]:void 0,x=arguments.length>7?arguments[7]:void 0,{gizmoId:v}=c,j=h.getState().files,b=(0,p.xs)(n,t.name,t.type,null==x?void 0:x.contextConnector,g),M={tempId:e,gizmoId:c.gizmoId,status:f.XX.Uploading,file:t,progress:1,fileId:null,cdnUrl:null,contextConnectorInfo:x,contextConnector:null==x?void 0:x.contextConnector};if(j.length===u.dO)s.A.logEvent(l.M.uploadedMaxFilesError),d.m.danger(o.formatMessage(w.maxUploadsAtATime,{maxUploads:u.dO,fileName:t.name}),u.$e);else if(j.some(t=>t.tempId===e))s.A.logEvent(l.M.uploadedDuplicateFileError),d.m.danger(o.formatMessage(w.duplicateFileAttached,{fileName:t.name.length>20?t.name.slice(0,19)+"…":t.name}),u.$e);else{let n;h.setState(e=>{let{files:t}=e;return{files:[...t,M]}});let s={};if(i.includes(t.type)){if(n={kind:a.Ei.Multimodal},!x){let{width:e,height:n}=await (0,m.po)(t);if(e>2048||n>2048)try{let i=await (0,p.Tu)(t,2048),a=await (0,m.po)(i);e=a.width,n=a.height,t=i}catch(e){r.U.addError(Error("Error resizing image:",{cause:e}))}s.imageDimensions={width:e,height:n}}}else switch(b){case f.AJ.Multimodal:throw Error("Multimodal file upload not supported mime type, ".concat(t.type,"\nSupported mime types: ")+i.join(", "));case f.AJ.Interpreter:n={kind:a.Ei.AceUpload};break;case f.AJ.Retrieval:n={kind:a.Ei.MyFiles},s.usesRetrievalIndex=!0;break;case f.AJ.ProfilePicture:throw Error("cannot upload profile picture via uploadFile");case f.AJ.ContextConnector:case f.AJ.None:return}null!=v&&(n={kind:a.Ei.Gizmo,gizmoId:v}),c.skipUpload||(x?await (0,m.R3)(e,t,n,i,x,c.gizmoId,o):await (0,m.cT)(e,t,o,n,y,s))}},createFileCompleted:(e,t,n,i)=>{let a=h.getState().files,s=a.findIndex(t=>t.tempId===e),l=a[s];if(s>=0&&l.status===f.XX.Uploading){let e=[...a];e.splice(s,1,x(x({},l),{},{progress:10,fileId:t,cdnUrl:n,contextConnector:i})),h.setState({files:e})}},updateProgress:(e,t)=>{let n=h.getState().files,i=n.findIndex(t=>t.tempId===e),a=n[i];if(i>=0&&a.status===f.XX.Uploading){let e=[...n];e.splice(i,1,x(x({},a),{},{progress:t})),h.setState({files:e})}},uploadCompleted:(e,t,n,i,a)=>{let r=h.getState().files,o=r.findIndex(t=>t.tempId===e);if(o>=0&&r[o].status===f.XX.Uploading&&null!=r[o].fileId){var c,d,u;let t=r[o],m=[...r],g=x(x({},t),{},{tempId:e,status:f.XX.Ready,progress:100,fileSpec:x(x({name:t.file.name,id:t.fileId,size:t.file.size,contextConnectorInfo:t.contextConnectorInfo,mimeType:null!==(c=null!==(d=null==i?void 0:i.mimeType)&&void 0!==d?d:t.file.type)&&void 0!==c?c:(0,p.s1)(t.file.name)},n||{}),i||{})});m.splice(o,1,g);let v=x({},h.getState().connectorFileData);a&&(v[null==a?void 0:a.file_id]=a),h.setState({files:m,connectorFileData:v}),s.A.logEvent(l.M.uploadFileCompleted,{status:t.status,fileId:t.fileId,contextConnector:null!==(u=t.contextConnector)&&void 0!==u?u:"local"})}},remove:(e,t,n,i,a)=>{let r=h.getState().files,o=r.findIndex(t=>t.tempId===e);if(o>=0){let e=r[o];"error"===t?s.A.logEvent(l.M.uploadFileError,{status:e.status,fileId:e.fileId,client:"web",errorClassName:null!=n?n:"undefined",useCaseType:i,uploadStatus:null!=a?a:"undefined",contextConnector:e.contextConnector}):s.A.logEvent(l.M.removeFile,{status:e.status,fileId:e.fileId});let c=[...r];c.splice(o,1),h.setState({files:c})}}},y={onFileCreated:b.createFileCompleted,onFileUploadProgress:b.updateProgress,onFileUploaded:b.uploadCompleted,onError:b.remove},w=(0,o.vU)({maxUploadsAtATime:{id:"useFilePickerState.maxUploadsAtATime",defaultMessage:"Unable to upload {fileName}. Max {maxUploads} uploads at a time"},duplicateFileAttached:{id:"useFilePickerState.duplicateFileAttached",defaultMessage:"Unable to upload {fileName} because an identical file has already been attached to this message."}})},88815:function(e,t,n){"use strict";n.d(t,{J:function(){return a},N:function(){return s}});var i=n(68810);let a={label:"Auto",value:""},s=(0,i.Ue)(()=>({forceParagen:!1,forceParagenModel:a,forceNulligen:!1,forceIndepthFeedback:!1,forceIndepthFeedbackPrompt:"The user has opted in to provide additional feedback on the previous response. Encourage the user to share feedback that you can store in a memory to better meet their needs in future. Use no more than 3 turns. If at any point the user indicates no longer wanting to provide feedback, return to the original topic.",forceRateLimit:!1,resetRateLimits:!1,showDebugConversationTurns:!1,rebaseSystemMessageContent:null}))},60806:function(e,t,n){"use strict";function i(e){let t=Object.values(e);return e=>t.includes(e)}n.d(t,{b:function(){return i}})},51270:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/billing",function(){return n(29237)}])}},function(e){e.O(0,[2205,4198,6636,4089,5182,4384,3088,8500,1612,3183,2349,5162,7437,4315,6803,8557,9857,211,449,2879,6384,2888,9774,179],function(){return e(e.s=51270)}),_N_E=e.O()}]);
//# sourceMappingURL=billing-7ae051a77416816b.js.map