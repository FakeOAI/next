(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[867],{19663:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSP:function(){return U},default:function(){return E}});var r,a,n,i,l=s(72438),o=s(31605),c=s(25927),d=s(71727),u=s(61236),g=s(65998),y=s(77743),p=s(83474),f=s.n(p),m=s(70079),b=s(25771),x=s(9063),h=s(84692),j=s(68498),k=s(21389),v=s(35250);function w(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function O(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?w(Object(s),!0).forEach(function(t){(0,l.Z)(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):w(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}async function P(e){let{queryKey:[t,{workspaceId:s}]}=e;return d.Z.getWorkspaceAnalytics(s)}function _(e){let{data:t,label:s,getWeekValue:r}=e,a=(0,x.Z)(),n=(0,y.F)().theme,i=(0,m.useMemo)(()=>(function(e){let t=getComputedStyle(document.body);return{animation:!1,scales:{y:{position:"right",beginAtZero:!0,ticks:{stepSize:3,color:t.getPropertyValue("--text-tertiary"),padding:12},grid:{tickLength:0,color:t.getPropertyValue("--border-medium")},border:{display:!1}},x:{grid:{display:!1},ticks:{color:t.getPropertyValue("--text-tertiary"),padding:20}}},plugins:{legend:!1,tooltip:{backgroundColor:t.getPropertyValue("--surface-primary"),titleColor:t.getPropertyValue("--text-primary"),bodyColor:t.getPropertyValue("--text-secondary"),displayColors:!1,padding:{top:8,left:8,right:8,bottom:8}}}}})(0),[n]),l=(0,m.useMemo)(()=>getComputedStyle(document.body).getPropertyValue("--text-secondary"),[n]),o={labels:t.weekly_data.map(e=>a.formatDate(e.week,{month:"numeric",day:"numeric"})),datasets:[{label:s,data:t.weekly_data.map(r),borderWidth:0,backgroundColor:l,barThickness:20}]};return(0,v.jsx)("div",{className:"flex h-full w-full items-center justify-center bg-token-main-surface-secondary p-4",children:(0,v.jsx)(b.$Q,{options:i,data:o,height:192})})}function L(e){let{label:t,value:s}=e;return(0,v.jsxs)("div",{className:"w-1/3 rounded bg-token-main-surface-secondary px-4 py-2",children:[(0,v.jsx)("label",{className:"text-sm text-token-text-secondary",children:t}),(0,v.jsx)("div",{className:"text-xl font-medium text-token-text-primary",children:s})]})}function M(e){let{data:t}=e,s=(0,x.Z)(),r=t.weekly_data[t.weekly_data.length-2];return(0,v.jsxs)("div",{className:"mt-10",children:[(0,v.jsx)("div",{className:"mb-2 font-medium text-token-text-primary",children:(0,v.jsx)(h.Z,O({},W.totals))}),(0,v.jsxs)("div",{className:"mb-16 flex gap-4",children:[(0,v.jsx)(L,{label:s.formatMessage(W.usersLabel),value:t.total_users}),(0,v.jsx)(L,{label:s.formatMessage(W.conversationsLabel),value:t.total_conversations}),(0,v.jsx)(L,{label:s.formatMessage(W.messagesLabel),value:t.total_messages})]}),(0,v.jsxs)(Z,{children:[(0,v.jsx)("div",{className:"flex flex-col justify-between p-4",children:(0,v.jsxs)("div",{children:[(0,v.jsx)(A,{children:(0,v.jsx)(h.Z,O({},W.usageTitle))}),null!=r&&(0,v.jsxs)("div",{children:[(0,v.jsx)(N,{children:r.message_count}),(0,v.jsx)(D,{children:(0,v.jsx)(h.Z,O({},W.messagesLastWeek))})]})]})}),(0,v.jsx)("div",{children:(0,v.jsx)(_,{data:t,label:s.formatMessage(W.messagesChartLabel),getWeekValue:e=>e.message_count})})]}),(0,v.jsxs)(Z,{children:[(0,v.jsx)("div",{children:(0,v.jsx)(_,{data:t,label:s.formatMessage(W.activeUsersChartLabel),getWeekValue:e=>e.active_users_count})}),(0,v.jsx)("div",{className:"flex grow flex-col justify-between p-4",children:(0,v.jsxs)("div",{children:[(0,v.jsx)(A,{children:(0,v.jsx)(h.Z,O({},W.weeklyUsersTitle))}),null!=r&&(0,v.jsxs)("div",{children:[(0,v.jsx)(N,{children:r.active_users_count}),(0,v.jsx)(D,{children:(0,v.jsx)(h.Z,O({},W.activeUsersLastWeek))})]})]})})]})]})}g.kL.register(g.uw,g.f$,g.od,g.ZL,g.Dx,g.u,g.De);let Z=k.Z.div(r||(r=(0,c.Z)(["mb-12 grid grid-cols-1 rounded-lg overflow-hidden border border-token-border-light sm:grid-cols-2"]))),A=k.Z.div(a||(a=(0,c.Z)(["font-medium"]))),N=k.Z.div(n||(n=(0,c.Z)(["font-medium text-3xl"]))),D=k.Z.div(i||(i=(0,c.Z)(["text-sm text-token-text-tertiary"])));function C(e){let{currentWorkspaceId:t}=e,s=(0,x.Z)(),{data:r,isLoading:a}=(0,u.a)({queryKey:["workspace-analytics",{workspaceId:t}],queryFn:P});return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(f(),{children:(0,v.jsx)("title",{children:s.formatMessage(W.title)})}),(0,v.jsx)(o.yG,{title:s.formatMessage(W.title),subtitle:s.formatMessage(W.pageDescription)}),(0,v.jsx)(o.hb,{showSpinner:a,children:void 0!==r?(0,v.jsx)(M,{data:r}):null})]})}let W=(0,j.vU)({title:{id:"workspaceAnalytics.title",defaultMessage:"Workspace Analytics"},pageDescription:{id:"workspaceAnalytics.understand",defaultMessage:"Understand how your workspace is using ChatGPT"},totals:{id:"workspaceAnalytics.totals",defaultMessage:"Totals over last 30 days"},usersLabel:{id:"workspaceAnalytics.usersLabel",defaultMessage:"Users"},conversationsLabel:{id:"workspaceAnalytics.conversationsLabel",defaultMessage:"Conversations"},messagesLabel:{id:"workspaceAnalytics.messagesLabel",defaultMessage:"Messages"},usageTitle:{id:"workspaceAnalytics.usageTitle",defaultMessage:"Usage"},messagesLastWeek:{id:"workspaceAnalytics.messagesLastWeek",defaultMessage:"Messages processed last week"},messagesLast30Days:{id:"workspaceAnalytics.messagesLast30Days",defaultMessage:"{count, plural, =0 {No messages} one {# message} other {# messages}} processed over last 30 days"},messagesChartLabel:{id:"workspaceAnalytics.messagesChartLabel",defaultMessage:"Messages"},weeklyUsersTitle:{id:"workspaceAnalytics.weeklyUsersTitle",defaultMessage:"Weekly users"},activeUsersChartLabel:{id:"workspaceAnalytics.activeUsersChartLabel",defaultMessage:"Active users"},activeUsersLastWeek:{id:"workspaceAnalytics.activeUsersLastWeek",defaultMessage:"Active users last week"},usersLast30Days:{id:"workspaceAnalytics.usersLast30Days",defaultMessage:"{count, plural, =0 {No active users} one {# active user} other {# active user}} over last 30 days"}});function T(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}var U=!0;function E(e){return(0,v.jsx)(C,function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?T(Object(s),!0).forEach(function(t){(0,l.Z)(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):T(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}({},e))}E.getLayout=function(e){return(0,v.jsx)(o.ZP,{mobilePageTitle:"Analytics",requireAdminPrivileges:!0,children:e})}},94107:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var r=s(19841),a=s(35250);function n(e){let{percentage:t,thickness:s=1/12,className:n,backgroundStrokeClassName:i="stroke-gray-400",transitionDuration:l,transitionTimingFunction:o,onTransitionEnd:c}=e,d=120*s,u=(120-d)/2,g=2*Math.PI*u;return(0,a.jsxs)("svg",{width:120,height:120,viewBox:"0 0 ".concat(120," ").concat(120),className:n,children:[(0,a.jsx)("circle",{className:(0,r.default)("origin-[50%_50%] -rotate-90",i),strokeWidth:d,fill:"transparent",r:u,cx:60,cy:60}),(0,a.jsx)("circle",{className:"origin-[50%_50%] -rotate-90 transition-[stroke-dashoffset]",stroke:"currentColor",strokeWidth:d,strokeDashoffset:g-t/100*g,strokeDasharray:"".concat(g," ").concat(g),fill:"transparent",r:u,cx:60,cy:60,style:{transitionDuration:l,transitionTimingFunction:o},onTransitionEnd:c})]})}},65512:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/analytics",function(){return s(19663)}])}},function(e){e.O(0,[6835,4736,4848,1605,2888,9774,179],function(){return e(e.s=65512)}),_N_E=e.O()}]);
//# sourceMappingURL=analytics-332412f7b7eef530.js.map