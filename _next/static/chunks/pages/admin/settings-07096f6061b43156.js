(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[577],{82920:function(e,t){"use strict";t.ZP=function(e,t){if(t)return e;throw Error("Unhandled discriminated union member: "+JSON.stringify(e))}},51516:function(e,t,n){"use strict";function r(e,t){if(t.length<e)throw TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}n.d(t,{Z:function(){return r}})},67629:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(28734),o=n(51516);function i(e){(0,o.Z)(1,arguments);var t=(0,r.Z)(e);return t.setHours(0,0,0,0),t}},28734:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(51516);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){(0,r.Z)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===o(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):(("string"==typeof e||"[object String]"===t)&&"undefined"!=typeof console&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(Error().stack)),new Date(NaN))}},52539:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return W},default:function(){return q}});var r=n(98601),o=n(68986),i=n(99333),s=n(34607),a=n(70663),l=n(30853),c=n(41619),d=n(59358),u=n(2721),f=n(93951),p=n(31498),g=n(83963),m=n(42420),y=n(56032),x=n(19841),h=n(11941),b=n.n(h),v=n(92379),w=n(75172),O=n(62984),k=n(68306),S=n(11550),j=n(64216),M=n(5691),C=n(73062),P=n(24434),E=n(12622),N=n(24740),D=n(8040),F=n(651);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function I(e){let t,{conversationTTL:n}=e,r=(0,w.Z)();return t=null==n?r.formatMessage(L.retentionInfinite):7776e3===n?r.formatMessage(L.retentionNinetyDays):31536e3===n?r.formatMessage(L.retentionOneYear):r.formatMessage(L.retentionCustomDays,{num:Math.floor(n/86400)}),(0,F.jsxs)(D.vi,{children:[(0,F.jsx)("p",{className:"inline-flex items-center text-base",children:(0,F.jsx)(O.Z,_({},L.conversationRetention))}),(0,F.jsx)(l.u,{label:r.formatMessage(L.retentionSettingTooltip),children:t})]})}function Z(e){let{title:t,description:n,children:r,upsellEnterprise:o=!1,descriptionValues:i={}}=e;return(0,F.jsx)(l.E,{label:(0,F.jsx)(O.Z,_({},L.enterpriseRequiredMessage)),side:"top",sideOffset:4,disabled:!o,className:"max-w-xl",children:(0,F.jsxs)(D.i9,{className:(0,x.default)(o&&"text-token-text-tertiary"),children:[(0,F.jsxs)(D.A4,{className:"flex items-center gap-3",children:[(0,F.jsx)(O.Z,_({},t)),o&&(0,F.jsx)("span",{className:"rounded-xl bg-token-main-surface-tertiary px-2 pb-0.5 text-sm",children:(0,F.jsx)(O.Z,_({},L.enterpriseUpsellPill))})]}),n&&(0,F.jsx)(D.Li,{className:"py-2 text-token-text-secondary",children:n&&"object"==typeof n&&"id"in n?(0,F.jsx)(O.Z,_(_({},n),{},{values:i})):n}),r]})})}function U(e){var t;let{workspaceId:n,label:r,setting:o,defaultValue:i,values:s,disabled:a=!1}=e,l=(0,w.Z)(),c=(0,m.NL)(),{variables:d,mutate:f}=(0,y.D)({mutationFn:e=>{let{setting:t,value:r}=e;return u.Z.setWorkspaceShareSetting(n,t,r)},onSettled:()=>{c.invalidateQueries({queryKey:["workspace-settings"]})},onError:()=>{N.m.danger(l.formatMessage(L.featureSettingsUpdateFailed))}});return(0,F.jsxs)(D.vi,{children:[(0,F.jsx)("p",{className:"text-md inline-flex items-center",children:(0,F.jsx)(O.Z,_({},r))}),(0,F.jsxs)(C.Z.Root,{defaultValue:null!==(t=null==d?void 0:d.value)&&void 0!==t?t:i,onValueChange:e=>{f({setting:o,value:e})},disabled:a,children:[(0,F.jsxs)(C.Z.Trigger,{className:"text-md focus-visible:border-none",children:[(0,F.jsx)(C.Z.Value,{}),(0,F.jsx)(C.Z.Icon,{})]}),(0,F.jsx)(C.Z.Portal,{children:(0,F.jsx)(C.Z.Content,{children:s.map((e,t)=>(0,F.jsx)(C.Z.Item,{className:"text-md",value:e.value,children:(0,F.jsx)(O.Z,_({},e.display))},t))})})]})]})}function R(e){let{onConfirm:t,onClose:n}=e,r=(0,w.Z)();return(0,F.jsx)(P.Z,{type:"warning",isOpen:!0,onClose:n,title:r.formatMessage(L.deleteWorkspaceMemoryModalTitle),showCloseButton:!0,primaryButton:(0,F.jsx)(S.z,{color:"danger",onClick:t,children:(0,F.jsx)(O.Z,_({},L.deleteWorkspaceMemoryModalConfirm))}),secondaryButton:(0,F.jsx)(S.z,{onClick:n,color:"secondary",children:(0,F.jsx)(O.Z,_({},L.deleteWorkspaceMemoryModalCancel))}),children:(0,F.jsx)("div",{className:"mb-2 text-sm text-token-text-primary",children:(0,F.jsx)(O.Z,_(_({},L.deleteWorkspaceMemoryModalInfo),{},{values:{b:e=>(0,F.jsx)("b",{children:e})}}))})})}function A(e){var t,n;let{workspaceId:r,data:o}=e,l=(0,p.ec)(p.F_.isTeamPlan),d=(0,f.t)(),x=(0,w.Z)(),h=(0,g.tv)(),{showWorkspaceSettings:b}=(0,a.r)(),{0:k,1:S}=(0,v.useState)(!1),C=(0,m.NL)(),{variables:P,mutate:T}=(0,y.D)({mutationFn:e=>{let{feature:t,enabled:n}=e;return u.Z.setWorkspaceBetaFeature(r,t,n)},onSettled:()=>{C.invalidateQueries({queryKey:["workspace-settings"]})},onError:()=>{N.m.danger(x.formatMessage(L.featureSettingsUpdateFailed))}});return(0,F.jsxs)(D.$V,{children:[l&&(0,F.jsx)(D.W8,{}),(0,F.jsxs)(Z,{title:L.workspaceDetails,children:[(0,F.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,F.jsx)(O.Z,{id:"SgdcRQ",defaultMessage:"Organization ID"}),(0,F.jsx)(j.Z,{value:null!==(t=null==d?void 0:d.data.organizationId)&&void 0!==t?t:"",onCopied:()=>N.m.success(x.formatMessage({id:"Ctw3o0",defaultMessage:"Copied organization ID"}))})]}),(0,F.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,F.jsx)(O.Z,{id:"yFldxx",defaultMessage:"Workspace ID"}),(0,F.jsx)(j.Z,{value:r,onCopied:()=>N.m.success(x.formatMessage({id:"CqDpiM",defaultMessage:"Copied workspace ID"}))})]})]}),(0,F.jsx)(Z,{title:L.sharingSettingsTitle,upsellEnterprise:l,children:(0,F.jsx)(D.qQ,{children:(0,F.jsx)(U,{workspaceId:r,label:L.chatSharingTitle,setting:i.bb.CHAT_SHARE_SETTINGS,disabled:l,defaultValue:o.share_settings.chat_share_setting,values:[{display:L.workspaceMembersOnlySelect,value:i.Gz.WORKSPACE_ONLY},{display:L.noOneSelect,value:i.Gz.NO_ONE}]})})}),h&&(0,F.jsx)(Z,{title:L.memoryFeatureSettingsTitle,description:L.workspaceMemoryDescription,descriptionValues:{link:e=>(0,F.jsx)("a",{href:"https://help.openai.com/en/articles/8590148-memory-in-chatgpt-faq",target:"_blank",className:"underline",rel:"noreferrer",children:e})},upsellEnterprise:l,children:(0,F.jsx)(D.qQ,{children:(0,F.jsxs)(D.vi,{className:"justify-start py-6",children:[(0,F.jsx)(E.wy,{label:"",disabled:l,enabled:null!==(n=null==P?void 0:P.enabled)&&void 0!==n?n:o.beta_settings.sunshine,onChange:e=>{e?T({feature:i.Nh.MEMORY,enabled:e}):S(!0)}}),(0,F.jsx)("p",{className:"text-md inline-flex items-center",children:(0,F.jsx)(O.Z,_({},L.memoryOptionTitle))})]})})}),k&&(0,F.jsx)(R,{onConfirm:()=>{T({feature:i.Nh.MEMORY,enabled:!1}),S(!1)},onClose:()=>{S(!1)}}),(0,F.jsx)(Z,{title:L.retentionPolicyTitle,description:L.retentionChange,upsellEnterprise:l,children:(0,F.jsx)(I,{conversationTTL:o.conversation_ttl})}),b&&(0,F.jsx)(Z,{title:L.contextConnectorsTitle,upsellEnterprise:l,description:(0,F.jsx)(O.Z,_(_({},L.contextConnectorsSubtitle),{},{values:{helpCenterLink:(0,F.jsx)("a",{className:"text-token-link",href:"https://help.openai.com/en/articles/9309188-connected-apps-on-chatgpt",target:"_blank",rel:"noreferrer",children:(0,F.jsx)(O.Z,_({},L.contextConnectorsHelpCenterLink))})}})),children:(0,F.jsx)(D.qQ,{children:(0,F.jsxs)(D.qQ,{children:[(0,F.jsx)(s.K,{disabled:l,label:L.contextConnectorsGoogleDrive,Icon:c.Gle,feature:i.Nh.CONTEXT_CONNECTOR_GDRIVE,value:o.beta_settings.context_connector_gdrive,workspaceId:r}),(0,F.jsx)(s.K,{disabled:l,label:M.e6,Icon:c.ur6,tooltip:L.contextConnectorsO365BusinessTooltip,feature:i.Nh.CONTEXT_CONNECTOR_O365_BUSINESS,value:o.beta_settings.context_connector_o365_business,workspaceId:r}),(0,F.jsx)(s.K,{disabled:l,label:M.AJ,Icon:c.ur6,tooltip:L.contextConnectorsO365PersonalTooltip,feature:i.Nh.CONTEXT_CONNECTOR_O365_PERSONAL,value:o.beta_settings.context_connector_o365_personal,workspaceId:r})]})})})]})}function G(e){let{currentWorkspaceId:t}=e,{data:n,isLoading:r}=(0,d.C)(t),i=(0,w.Z)();return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(b(),{children:(0,F.jsx)("title",{children:i.formatMessage(L.title)})}),(0,F.jsx)(o.yG,{title:i.formatMessage(L.title)}),(0,F.jsx)(o.hb,{showSpinner:r,children:void 0===n?null:(0,F.jsx)(A,{workspaceId:t,data:n})})]})}let L=(0,k.vU)({title:{id:"workspaceSettings.title",defaultMessage:"Settings"},retentionPolicyTitle:{id:"workspaceSettings.retentionPolicyTitle",defaultMessage:"Retention policy"},sharingSettingsTitle:{id:"workspaceSettings.sharingSettingsTitle",defaultMessage:"Sharing"},memoryFeatureSettingsTitle:{id:"workspaceSettings.memoryFeatureSettingsTitle",defaultMessage:"Memory"},memoryOptionTitle:{id:"workspaceSettings.memoryOptionTitle",defaultMessage:"Allow members to use memory"},workspaceMemoryDescription:{id:"workspaceSettings.workspaceMemoryDescription",defaultMessage:"Manage whether members can enable memory. This allows ChatGPT to become more helpful by remembering details and preferences across chats. <link>Learn more</link>"},deleteWorkspaceMemoryModalTitle:{id:"workspaceSettings.deleteWorkspaceMemoryModalTitle",defaultMessage:"Are you sure?"},deleteWorkspaceMemoryModalConfirm:{id:"workspaceSettings.deleteWorkspaceMemoryModalConfirm",defaultMessage:"Disable and delete memories"},deleteWorkspaceMemoryModalCancel:{id:"workspaceSettings.deleteWorkspaceMemoryModalCancel",defaultMessage:"Cancel"},deleteWorkspaceMemoryModalInfo:{id:"workspaceSettings.groups.deleteWorkspaceMemoryModalInfo",defaultMessage:"If you disable memory for your workspace, <b>members' existing memories will be forgotten</b>. This can't be undone."},chatSharingTitle:{id:"workspaceSettings.chatSharingTitle",defaultMessage:"Chats can be shared with..."},workspaceDetails:{id:"workspaceSettings.workspaceDetails",defaultMessage:"Workspace details"},workspaceMembersOnlySelect:{id:"workspaceSettings.workspaceMembersOnlySelect",defaultMessage:"Workspace members only"},noOneSelect:{id:"workspaceSettings.noOneSelect",defaultMessage:"No one"},featureSettingsUpdateFailed:{id:"workspaceSettings.featureSettingsUpdateFailed",defaultMessage:"Failed to update feature setting"},conversationRetention:{id:"workspaceSettings.conversationRetention",defaultMessage:"Chat retention"},retentionInfinite:{id:"workspaceSettings.retentionInfinite",defaultMessage:"Infinite"},retentionNinetyDays:{id:"workspaceSettings.retentionNinetyDays",defaultMessage:"90 days"},retentionOneYear:{id:"workspaceSettings.retentionOneYear",defaultMessage:"1 year"},retentionCustomDays:{id:"workspaceSettings.retentionCustomDays",defaultMessage:"{num} days"},retentionChange:{id:"workspaceSettings.retentionChange",defaultMessage:"Contact your account manager to change this setting."},enterpriseUpsellPill:{id:"workspaceSettings.enterpriseUpsellPill",defaultMessage:"Enterprise"},retentionSettingTooltip:{id:"workspaceSettings.retentionSettingTooltip",defaultMessage:"Contact your account manager to change this setting"},enterpriseRequiredMessage:{id:"workspaceSettings.enterpriseRequiredMessage",defaultMessage:"Only workspaces with the Enterprise plan can change these settings"},contextConnectorsTitle:{id:"workspaceSettings.contextConnectorsTitle",defaultMessage:"Connected Apps"},contextConnectorsSubtitle:{id:"workspaceSettings.contextConnectorsSubtitle",defaultMessage:"Manage which apps users in this workspace can connect to directly from ChatGPT. For more information, refer to the {helpCenterLink}."},contextConnectorsHelpCenterLink:{id:"workspaceSettings.contextConnectorsHelpCenterLink",defaultMessage:"Help Center"},contextConnectorsGoogleDrive:{id:"workspaceSettings.contextConnectorsGoogleDrive",defaultMessage:"Google Drive"},contextConnectorsO365PersonalTooltip:{id:"workspaceSettings.contextConnectorsO365PersonalTooltip",defaultMessage:"This includes personal OneDrive accounts but not OneDrive for Business or SharePoint accounts."},contextConnectorsO365BusinessTooltip:{id:"workspaceSettings.contextConnectorsO365BusinessTooltip",defaultMessage:"This includes OneDrive for Business and SharePoint accounts but not personal accounts."}});function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var W=!0;function q(e){return(0,F.jsx)(G,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e))}q.getLayout=function(e){return(0,F.jsx)(o.ZP,{mobilePageTitle:"Settings",requireAdminPrivileges:!0,children:e})}},64216:function(e,t,n){"use strict";var r=n(79746),o=n(11550),i=n(41619),s=n(651);t.Z=e=>{let{label:t,value:n,onCopied:a}=e,l=()=>{(0,r.v)(n),a()};return(0,s.jsxs)("div",{className:"flex flex-col space-y-2",children:[void 0!==t&&(0,s.jsx)("label",{className:"font-semibold",children:t}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{onClick:l,className:"w-full cursor-pointer break-all rounded-lg bg-token-main-surface-tertiary px-4 py-2 font-mono text-sm text-token-text-primary",children:n}),(0,s.jsx)(o.z,{color:"ghost",onClick:l,icon:i.TIy})]})]})}},34607:function(e,t,n){"use strict";n.d(t,{I:function(){return h},K:function(){return b}});var r=n(98601),o=n(30853),i=n(2721),s=n(42420),a=n(56032),l=n(75172),c=n(62984),d=n(68306),u=n(41619),f=n(12622),p=n(24740),g=n(8040),m=n(651);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function h(){return(0,m.jsx)(u.szr,{className:"icon-sm ml-1 text-token-text-tertiary"})}function b(e){var t;let{workspaceId:n,Icon:r,label:d,feature:u,value:y,tooltip:b,disabled:w=!1}=e,O=(0,l.Z)(),k=(0,s.NL)(),{variables:S,mutate:j}=(0,a.D)({mutationFn:e=>{let{feature:t,enabled:r}=e;return i.Z.setWorkspaceBetaFeature(n,t,r)},onSettled:()=>{k.invalidateQueries({queryKey:["workspace-settings"]})},onError:()=>{p.m.danger(O.formatMessage(v.featureSettingsUpdateFailed))}});return(0,m.jsxs)(g.vi,{className:"justify-start py-6",children:[(0,m.jsx)(f.wy,{label:"",disabled:w,enabled:null!==(t=null==S?void 0:S.enabled)&&void 0!==t?t:y,onChange:e=>{j({feature:u,enabled:e})}}),(0,m.jsxs)("p",{className:"text-md inline-flex items-center",children:[r&&(0,m.jsx)(r,{className:"icon-md mr-2"}),(0,m.jsx)(c.Z,x({},d)),b&&(0,m.jsx)(o.u,{sideOffset:4,interactive:!0,delayDuration:0,label:(0,m.jsx)(c.Z,x({},b)),side:"top",children:(0,m.jsx)(h,{})})]})]})}let v=(0,d.vU)({featureSettingsUpdateFailed:{id:"workspaceSettingsOld.featureSettingsUpdateFailed",defaultMessage:"Failed to update feature setting"}})},8040:function(e,t,n){"use strict";n.d(t,{$V:function(){return p},A4:function(){return g},Li:function(){return h},W8:function(){return v},i$:function(){return m},i9:function(){return x},qQ:function(){return y},vi:function(){return b}});var r,o,i,s,a,l,c,d,u=n(2346),f=n(15478);let p=f.Z.div(r||(r=(0,u.Z)(["text-base text-token-text-primary flex flex-col gap-10 my-10"]))),g=f.Z.div(o||(o=(0,u.Z)(["text-xl font-semibold"]))),m=f.Z.div(i||(i=(0,u.Z)(["text-base font-semibold"]))),y=f.Z.div(s||(s=(0,u.Z)(["flex flex-col divide-y divide-token-border-light border-y border-token-border-light"]))),x=f.Z.div(a||(a=(0,u.Z)(["flex flex-col gap-3 w-full m-auto md:m-0"]))),h=f.Z.div(l||(l=(0,u.Z)(["text-sm"]))),b=f.Z.div(c||(c=(0,u.Z)(["flex justify-between py-4 gap-4"]))),v=f.Z.hr(d||(d=(0,u.Z)(["max-w-xl border-token-border-light"])))},5691:function(e,t,n){"use strict";n.d(t,{AJ:function(){return a},JQ:function(){return d},Ul:function(){return c},e6:function(){return l},i5:function(){return u}});var r=n(99333),o=n(82920),i=n(68306),s=n(651);let a=(0,i.Em)({defaultMessage:"Microsoft OneDrive (personal)",id:"ContextConnector.OneDrivePersonal.name"}),l=(0,i.Em)({defaultMessage:"Microsoft OneDrive (work/school)",id:"ContextConnector.OneDriveBusiness.name"});function c(e,t){var n,o;switch(e){case r.PO.GDRIVE_SYNC_CONNECTOR:case r.PO.GDRIVE:return"Google Drive";case r.PO.O365:return"Microsoft OneDrive";case r.PO.O365_PERSONAL:return null!==(n=null==t?void 0:t.formatMessage(a))&&void 0!==n?n:"Microsoft OneDrive (personal)";case r.PO.O365_BUSINESS:return null!==(o=null==t?void 0:t.formatMessage(l))&&void 0!==o?o:"Microsoft OneDrive (work/school)"}}function d(e,t){switch(e){case r.PO.GDRIVE_SYNC_CONNECTOR:case r.PO.GDRIVE:switch(t){case"doc":case"docx":return"Google Docs";case"xls":case"xlsx":return"Google Sheets";case"ppt":case"pptx":return"Google Slides";default:return"Google Drive"}case r.PO.O365:case r.PO.O365_PERSONAL:case r.PO.O365_BUSINESS:switch(t){case"doc":case"docx":return"Microsoft Word";case"xls":case"xlsx":return"Microsoft Excel";case"ppt":case"pptx":return"Microsoft PowerPoint";default:return"Microsoft OneDrive"}}(0,o.ZP)(e)}function u(e){let{contextConnector:t,extension:n}=e;return(0,s.jsx)(s.Fragment,{children:d(t,n)})}},70663:function(e,t,n){"use strict";n.d(t,{r:function(){return s}});var r=n(31498),o=n(88667),i=n(92379);function s(){let e=(0,r.aF)(),t=(0,o.xb)("1967546325").config,n=t.get("gdrivePicker",!1),s=t.get("o365Picker",!1),l=t.get("gdriveLink",!1),c=t.get("o365PersonalLink",!1),d=t.get("o365BusinessLink",!1),u=t.get("gdrivePercentage",0),f=t.get("o365Percentage",0),p=t.get("loadTestPercentage",0),g=t.get("showWorkspaceSettings",!1),m=e?Math.abs(function(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n)|0;return t}(e.id)%100):null;return(0,i.useMemo)(()=>({gdriveStatus:a(n,m,u),o365Status:a(s,m,f),gdriveLinkStatus:a(l,m,u),o365PersonalLinkStatus:a(c,m,f),o365BusinessLinkStatus:a(d,m,f),loadTest:"true"===a(!0,m,p),showWorkspaceSettings:g}),[n,m,u,s,f,l,c,d,p,g])}function a(e,t,n){return e&&null!=t?t<n?"true":"ifConnected":"false"}},84082:function(e,t,n){"use strict";n.d(t,{$e:function(){return i},EZ:function(){return s},Ql:function(){return o},dO:function(){return r},xC:function(){return a}});let r=10,o=4,i={duration:20,hasCloseButton:!0},s=512,a=536870912},98628:function(e,t,n){"use strict";n.d(t,{R3:function(){return w},W7:function(){return h},cT:function(){return v},lU:function(){return O},po:function(){return b}});var r=n(98601),o=n(99333),i=n(2721),s=n(92319),a=n(99976),l=n(61619),c=n(82363),d=n(68306),u=n(88815),f=n(24740),p=n(62166),g=n(66114);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let x={duration:20,hasCloseButton:!0};function h(e){return JSON.stringify({file:e.name,modified:e.lastModified,currentTime:new Date().toString()})}function b(e){return new Promise((t,n)=>{let r=new FileReader,o=new Image;r.onload=()=>{o.onload=()=>t(o),o.onerror=e=>n(e),o.src=r.result},r.readAsDataURL(e)})}async function v(e,t,n,r,c,d){var p,g,m;let y=u.N.getState().resetRateLimits,h=o.EG.Initial;a.A.logEvent(l.M.uploadFileInitiated,{client:"web",useCase:r.kind,uploadEntry:"local"});let b=d.usesRetrievalIndex?performance.now():void 0;try{let{file_id:s,upload_url:a}=await i.Z.createFile(t.name,t.size,r,!!y);c.onFileCreated(e,s,a),h=o.EG.FileCreated;let l=r.kind===o.Ei.Gizmo?r.gizmoId:void 0,u=null!==(p=d.shouldUpdateProgress)&&void 0!==p&&p,m=null!==(g=d.usesRetrievalIndex)&&void 0!==g&&g,v=await i.Z.uploadFileToAzureStorage(t,a,t=>{u&&c.onFileUploadProgress(e,10+80*t)});if(c.onFileUploadProgress(e,90),201!==v.status&&S(v,s,m),h=o.EG.FileUploaded,await i.Z.processFileUpload(s,{gizmoId:l}),h=o.EG.FileProcessed,d.usesRetrievalIndex){let t=await k(s,l);(null==t?void 0:t.status)===o.Xf.Skipped&&f.m.danger(n.formatMessage(M.retrievalSkippedFile,{fileName:t.name}),x),c.onFileUploaded(e,s,void 0,{fileTokenSize:t.file_size_tokens}),h=o.EG.RetrievalIndexCreated}else c.onFileUploaded(e,s,d.imageDimensions);null!=b&&i.Z.postRetrievalTiming({e2eLatencyMs:performance.now()-b,type:"file"})}catch(i){j(n,t.name,i);let o="NotInstanceOfError";i instanceof s.gK?o=i.name:i instanceof s.Q0?o="FatalServerError_type_".concat(null!==(m=i.type)&&void 0!==m?m:"undefined"):i instanceof Error?o=i.name:i instanceof s.vq&&(o=i.name),c.onError(e,"error",o,r,h)}}async function w(e,t,n,r,d,u,m){let h=performance.now();a.A.logEvent(l.M.uploadFileInitiated,{client:"web",useCase:n.kind,contextConnector:d.contextConnector,fileSourceType:d.type});let b=o.EG.Initial;n.kind===o.Ei.Gizmo&&(n=y(y({},n),{},{kind:r.includes(t.type)?o.Ei.Multimodal:o.Ei.MyFiles}));try{let r=await i.Z.uploadConnectorAPI(e,d.contextConnector,n,t,u,d.o365DriveId);switch(r.type){case"error":throw function(e){let{status_code:t,error_code:n,error_message:r}=e;if(!t||!(t<500))return new s.Q0(r);{let e="internal_error";return n?e=n:404===t?e="file_not_found":403===t?e="permission_error":413===t&&(e="file_too_large"),new s.vq(r,e)}}(r.error);case"file":switch(p.MP.onFileCreated(e,r.file.id,"",d.contextConnector),b=o.EG.FileProcessed,n.kind){case o.Ei.MyFiles:{p.MP.onFileUploadProgress(e,90);let t=await k(r.file.file_id,u);(null==t?void 0:t.status)===o.Xf.Skipped&&f.m.danger(m.formatMessage(M.retrievalSkippedFile,{fileName:t.name}),x),p.MP.onFileUploaded(e,r.file.file_id,void 0,{fileTokenSize:t.file_size_tokens,mimeType:r.file.mime_type}),b=o.EG.RetrievalIndexCreated;break}case o.Ei.Multimodal:p.MP.onFileUploaded(e,r.file.file_id,{width:512,height:512},{mimeType:r.file.mime_type});break;case o.Ei.AceUpload:p.MP.onFileUploaded(e,r.file.file_id,void 0,{mimeType:r.file.mime_type});break;case o.Ei.DalleAgent:case o.Ei.Gizmo:case o.Ei.ProfilePicture:throw new s.vq("Use case not supported by cloud doc: ".concat(n.kind))}break;case"folder":throw new s.vq("Folder type not supported")}i.Z.postRetrievalTiming({e2eLatencyMs:performance.now()-h,type:d.contextConnector})}catch(r){c.U.addError(Error("Failed to upload connected file by ".concat(d.contextConnector),{cause:r})),j(m,(0,g.Ad)(t.name,null==d?void 0:d.syntheticExtension),r);let n="NotInstanceOfError";if(r instanceof s.Q0){var v;n="FatalServerError_type_".concat(null!==(v=r.type)&&void 0!==v?v:"undefined")}else(r instanceof s.gK||r instanceof Error||r instanceof s.vq)&&(n=r.name);p.MP.onError(e,"error",n,{kind:o.Ei.MyFiles},b)}}async function O(e,t,n,r,o){let{width:i,height:s}=await b(t);return v(e,t,n,{kind:r},o,{imageDimensions:{width:i,height:s}})}async function k(e,t){let n=Date.now()+6e4,r=e=>new Promise(t=>setTimeout(t,e)),a=0;for(;Date.now()<n;){let n=await i.Z.getRetrievalStatus(e,t);if(n.status===o.Xf.Success||n.status===o.Xf.Skipped)return n;if(n.status===o.Xf.Failed)throw new s.vq("Context extraction failed",n.error_code);a++,await r(Math.min(1e3,100*a))}throw new s.vq("Retrieval indexing timed out")}async function S(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r="Unknown error";try{r=await e.data}catch(e){}throw n&&i.Z.markFileUploadFailed(t,{error:r}),new s.vq("File upload to blobstore failed","failed_upload_to_blobstore")}function j(e,t,n){let r=(0,g.kr)(e,"default_upload_error",{fileName:t});n instanceof s.vq&&null!=n.code&&(r=(0,g.kr)(e,n.code)),f.m.danger(r,x)}let M=(0,d.vU)({retrievalSkippedFile:{id:"useFilePickerState.retrievalSkippedFile",defaultMessage:'Unable to extract text from "{fileName}"'}})},62166:function(e,t,n){"use strict";n.d(t,{Dw:function(){return v},HR:function(){return b},MP:function(){return w},gF:function(){return h}});var r=n(98601),o=n(99333),i=n(99976),s=n(61619),a=n(82363),l=n(68306),c=n(68810),d=n(24740),u=n(84082),f=n(93866),p=n(98628),g=n(66114);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let x={files:[],connectorFileData:{}},h=(0,c.Ue)(()=>x),b={hasUploadInProgress:e=>{let{files:t}=e;return t.some(e=>e.status===f.XX.Uploading)},getReadyFiles:e=>{let{files:t}=e;return t.filter(e=>e.status===f.XX.Ready)}},v={reset:()=>{h.setState(x)},uploadFile:async function(e,t,n,r,l){let c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},m=arguments.length>6?arguments[6]:void 0,y=arguments.length>7?arguments[7]:void 0,{gizmoId:x}=c,b=h.getState().files,v=(0,g.xs)(n,t.name,t.type,null==y?void 0:y.contextConnector,m),k={tempId:e,gizmoId:c.gizmoId,status:f.XX.Uploading,file:t,progress:1,fileId:null,cdnUrl:null,contextConnectorInfo:y,contextConnector:null==y?void 0:y.contextConnector};if(b.length===u.dO)i.A.logEvent(s.M.uploadedMaxFilesError),d.m.danger(l.formatMessage(O.maxUploadsAtATime,{maxUploads:u.dO,fileName:t.name}),u.$e);else if(b.some(t=>t.tempId===e))i.A.logEvent(s.M.uploadedDuplicateFileError),d.m.danger(l.formatMessage(O.duplicateFileAttached,{fileName:t.name.length>20?t.name.slice(0,19)+"â€¦":t.name}),u.$e);else{let n;h.setState(e=>{let{files:t}=e;return{files:[...t,k]}});let i={};if(r.includes(t.type)){if(n={kind:o.Ei.Multimodal},!y){let{width:e,height:n}=await (0,p.po)(t);if(e>2048||n>2048)try{let r=await (0,g.Tu)(t,2048),o=await (0,p.po)(r);e=o.width,n=o.height,t=r}catch(e){a.U.addError(Error("Error resizing image:",{cause:e}))}i.imageDimensions={width:e,height:n}}}else switch(v){case f.AJ.Multimodal:throw Error("Multimodal file upload not supported mime type, ".concat(t.type,"\nSupported mime types: ")+r.join(", "));case f.AJ.Interpreter:n={kind:o.Ei.AceUpload};break;case f.AJ.Retrieval:n={kind:o.Ei.MyFiles},i.usesRetrievalIndex=!0;break;case f.AJ.ProfilePicture:throw Error("cannot upload profile picture via uploadFile");case f.AJ.ContextConnector:case f.AJ.None:return}null!=x&&(n={kind:o.Ei.Gizmo,gizmoId:x}),c.skipUpload||(y?await (0,p.R3)(e,t,n,r,y,c.gizmoId,l):await (0,p.cT)(e,t,l,n,w,i))}},createFileCompleted:(e,t,n,r)=>{let o=h.getState().files,i=o.findIndex(t=>t.tempId===e),s=o[i];if(i>=0&&s.status===f.XX.Uploading){let e=[...o];e.splice(i,1,y(y({},s),{},{progress:10,fileId:t,cdnUrl:n,contextConnector:r})),h.setState({files:e})}},updateProgress:(e,t)=>{let n=h.getState().files,r=n.findIndex(t=>t.tempId===e),o=n[r];if(r>=0&&o.status===f.XX.Uploading){let e=[...n];e.splice(r,1,y(y({},o),{},{progress:t})),h.setState({files:e})}},uploadCompleted:(e,t,n,r,o)=>{let a=h.getState().files,l=a.findIndex(t=>t.tempId===e);if(l>=0&&a[l].status===f.XX.Uploading&&null!=a[l].fileId){var c,d,u;let t=a[l],p=[...a],m=y(y({},t),{},{tempId:e,status:f.XX.Ready,progress:100,fileSpec:y(y({name:t.file.name,id:t.fileId,size:t.file.size,contextConnectorInfo:t.contextConnectorInfo,mimeType:null!==(c=null!==(d=null==r?void 0:r.mimeType)&&void 0!==d?d:t.file.type)&&void 0!==c?c:(0,g.s1)(t.file.name)},n||{}),r||{})});p.splice(l,1,m);let x=y({},h.getState().connectorFileData);o&&(x[null==o?void 0:o.file_id]=o),h.setState({files:p,connectorFileData:x}),i.A.logEvent(s.M.uploadFileCompleted,{status:t.status,fileId:t.fileId,contextConnector:null!==(u=t.contextConnector)&&void 0!==u?u:"local"})}},remove:(e,t,n,r,o)=>{let a=h.getState().files,l=a.findIndex(t=>t.tempId===e);if(l>=0){let e=a[l];"error"===t?i.A.logEvent(s.M.uploadFileError,{status:e.status,fileId:e.fileId,client:"web",errorClassName:null!=n?n:"undefined",useCaseType:r,uploadStatus:null!=o?o:"undefined",contextConnector:e.contextConnector}):i.A.logEvent(s.M.removeFile,{status:e.status,fileId:e.fileId});let c=[...a];c.splice(l,1),h.setState({files:c})}}},w={onFileCreated:v.createFileCompleted,onFileUploadProgress:v.updateProgress,onFileUploaded:v.uploadCompleted,onError:v.remove},O=(0,l.vU)({maxUploadsAtATime:{id:"useFilePickerState.maxUploadsAtATime",defaultMessage:"Unable to upload {fileName}. Max {maxUploads} uploads at a time"},duplicateFileAttached:{id:"useFilePickerState.duplicateFileAttached",defaultMessage:"Unable to upload {fileName} because an identical file has already been attached to this message."}})},88815:function(e,t,n){"use strict";n.d(t,{J:function(){return o},N:function(){return i}});var r=n(68810);let o={label:"Auto",value:""},i=(0,r.Ue)(()=>({forceParagen:!1,forceParagenModel:o,forceNulligen:!1,forceIndepthFeedback:!1,forceIndepthFeedbackPrompt:"The user has opted in to provide additional feedback on the previous response. Encourage the user to share feedback that you can store in a memory to better meet their needs in future. Use no more than 3 turns. If at any point the user indicates no longer wanting to provide feedback, return to the original topic.",forceRateLimit:!1,resetRateLimits:!1,showDebugConversationTurns:!1,rebaseSystemMessageContent:null}))},40476:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/settings",function(){return n(52539)}])}},function(e){e.O(0,[2205,4198,6636,4089,9504,7137,3088,8500,2406,3183,2349,5162,7437,7035,9725,6803,5385,9417,2230,2879,3662,2888,9774,179],function(){return e(e.s=40476)}),_N_E=e.O()}]);
//# sourceMappingURL=settings-07096f6061b43156.js.map