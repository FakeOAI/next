(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2571],{10737:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return en},default:function(){return eo}});var o,i=n(98601),r=n(68986),a=n(99333),s=n(59144),l=n(24434),d=n(82821),c=n(42420),u=n(58695),f=n(88667),p=n(19841);class m extends Error{}m.prototype.name="InvalidTokenError";var g=n(38482),v=n.n(g),x=n(11941),y=n.n(x),h=n(92379),b=n(62984),w=n(75172),j=n(68306),M=n(11550),k=n(16779),I=n(28146),C=n(98095),T=n(36792),S=n(88491),E=n(12310),O=n(651);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _(e){let{onRemoveDomainClick:t,onVerifyDomainClick:n}=e;return(0,O.jsxs)(C.Z.Root,{children:[(0,O.jsx)(C.Z.Trigger,{children:(0,O.jsx)(I.nWS,{className:"icon-sm"})}),(0,O.jsx)(C.Z.Portal,{children:(0,O.jsxs)(C.Z.Content,{children:[(0,O.jsx)(C.Z.Item,{onClick:t,children:(0,O.jsx)(b.Z,Z({},N.ssoDropdownRemoveButtonText))}),(0,O.jsx)(C.Z.Item,{onClick:n,children:(0,O.jsx)(b.Z,Z({},N.ssoDropdownVerifyButtonText))})]})})]})}function P(e){let{domains:t,workspaceId:n}=e,o=(0,w.Z)(),{mutateAsync:i}=(0,E.Bd)(n),{0:r,1:a}=(0,h.useState)(!1),{0:s,1:l}=(0,h.useState)();return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(T.Z.Root,{className:"w-full table-auto",children:[(0,O.jsxs)(T.Z.Header,{children:[(0,O.jsx)(T.Z.HeaderCell,{className:"bg-token-main-surface-primary",children:(0,O.jsx)(b.Z,Z({},N.domainTableHeader))}),(0,O.jsx)(T.Z.HeaderCell,{className:"bg-token-main-surface-primary",children:(0,O.jsx)(b.Z,Z({},N.statusTableHeader))}),(0,O.jsx)(T.Z.HeaderCell,{className:"bg-token-main-surface-primary"})]}),(0,O.jsx)(T.Z.Body,{children:t.map((e,t)=>(0,O.jsxs)("tr",{onClick:()=>l(e),className:"cursor-pointer",children:[(0,O.jsx)(T.Z.Cell,{children:e.hostname}),(0,O.jsx)(T.Z.Cell,{children:o.formatMessage(E.sd[e.status])}),(0,O.jsx)(T.Z.Cell,{textAlign:"right",children:(0,O.jsx)("div",{onClick:e=>e.stopPropagation(),children:(0,O.jsx)(_,{onRemoveDomainClick:()=>{i({domainId:e.id})},onVerifyDomainClick:()=>{l(e)}})})})]},t))})]}),(0,O.jsx)(M.z,{color:"secondary",className:"mt-6",onClick:()=>{a(!0)},icon:I.Vz5,children:(0,O.jsx)(b.Z,Z({},N.addDomainButton))}),(0,O.jsx)(S.Z,{isOpen:r||void 0!==s,onClose:()=>{a(!1),l(void 0)},workspaceId:n,currentDomain:r?void 0:s,domains:t},null==s?void 0:s.id)]})}let N=(0,j.vU)({ssoDropdownRemoveButtonText:{id:"workspaceIdentity.ssoDropdownRemoveButtonText",defaultMessage:"Remove Domain"},ssoDropdownVerifyButtonText:{id:"workspaceIdentity.ssoDropdownVerifyButtonText",defaultMessage:"Verify"},domainTableHeader:{id:"workspaceIdentity.domainTableHeader",defaultMessage:"Domain"},statusTableHeader:{id:"workspaceIdentity.statusTableHeader",defaultMessage:"Status"},addDomainButton:{id:"workspaceIdentity.addDomainButton.0",defaultMessage:"Add domain"}});var L=n(64216),A=n(6440),F=n(24740),U=n(92319),B=n(8040);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let z=async e=>new Promise((t,n)=>{let o=new FileReader;o.readAsText(e),o.onload=function(e){var n;t(null===(n=e.target)||void 0===n?void 0:n.result)},o.onerror=n});function V(e){let{acsId:t,hasSSO:n}=e,o="https://auth0.openai.com/login/callback?connection=".concat(t),i="urn:auth0:openai:".concat(t),r="".concat(location.host,"/auth/login?sso=true&connection=").concat(t),a=(0,w.Z)();return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(B.Li,{children:(0,O.jsx)(b.Z,q({},G.setupSSOContent))}),(0,O.jsxs)("div",{className:"mb-6 flex flex-col space-y-4",children:[(0,O.jsx)(L.Z,{label:"Assertion Consumer Service (ACS) URL",value:o,onCopied:()=>{F.m.success(a.formatMessage(G.copiedACSToClipboard),{duration:3})}}),(0,O.jsx)(L.Z,{label:"Entity ID",value:i,onCopied:()=>{F.m.success(a.formatMessage(G.copiedEntityToClipboard),{duration:3})}}),n&&(0,O.jsx)(L.Z,{label:a.formatMessage(G.idpSignInURL),value:r,onCopied:()=>{F.m.success(a.formatMessage(G.copiedIDPUrlToClipboard),{duration:3})}})]})]})}var H=((o=H||{})[o.CREATE=1]="CREATE",o[o.EDIT=2]="EDIT",o);function X(e){let{workspaceId:t,data:n,isOpen:o,onClose:i}=e,r=(0,w.Z)(),a=(0,d.b)(),{mutateAsync:c}=(0,E.Fc)(t),{mutateAsync:u}=(0,E.OR)(t),{mutateAsync:f}=(0,E.DD)(t),m=(0,h.useRef)(null),g=null==n?void 0:n.connection,{0:v,1:x}=(0,h.useState)(null==g?void 0:g.sign_in_endpoint),{0:y,1:j}=(0,h.useState)(!1),{0:k,1:C}=(0,h.useState)(null==g?void 0:g.cert),T=null===n?H.CREATE:H.EDIT,S=async(e,t)=>{let n;try{n=await c({signInEndpoint:e,cert:t})}catch(e){if(e instanceof U.gK&&"reauth_required"===e.code){j(!0);return}throw e}await f({connectionId:n.id,active:!0}),i()},D=T===H.CREATE?(0,O.jsx)(s.Z.Button,{title:r.formatMessage(G.doneButton),color:"primary",disabled:void 0===v||void 0===k,onClick:async()=>{void 0!==v&&void 0!==k&&await S(v,k)}}):n&&(0,O.jsx)(s.Z.Button,{title:r.formatMessage(G.doneButton),color:"primary",onClick:async()=>{await f({connectionId:null==n?void 0:n.id,cert:k,signInEndpoint:v,active:!0}),i()}}),Z=null===n?(0,O.jsx)(s.Z.Button,{title:r.formatMessage(G.cancelButton),color:"secondary",onClick:()=>i()}):(0,O.jsx)(M.z,{as:"link",color:"danger-outline",onClick:async()=>{await u({connectionId:null==n?void 0:n.id}),i()},children:r.formatMessage(G.deleteButton)});return(0,O.jsx)(l.Z,{isOpen:o,type:"success",title:r.formatMessage(T===H.CREATE?G.createTitle:G.editTitle),primaryButton:D,secondaryButton:Z,onClose:i,children:(0,O.jsxs)("form",{onSubmit:e=>e.preventDefault(),children:[(0,O.jsx)(E.z0,{children:(0,O.jsx)(b.Z,q({},G.createInstructionsManual))}),(0,O.jsx)("label",{className:"mb-2 flex items-center text-sm",children:(0,O.jsx)(b.Z,q({},G.signInLabel))}),(0,O.jsx)("div",{className:"mb-4",children:(0,O.jsx)(A.Z,{className:"w-full appearance-none rounded border px-3 py-2",name:"Sign-In URL",type:"text",placeholder:"https://your.idp.here/saml2?idpid=123456",value:null!=v?v:"",onChange:e=>{x(e.target.value)}})}),(0,O.jsxs)("div",{className:"mb-4",children:[(0,O.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,O.jsx)("label",{className:"text-sm",children:(0,O.jsx)(b.Z,q({},G.certLabel))}),(0,O.jsx)("input",{ref:m,type:"file",accept:".csv,.cer,.pem,text/plain",className:"hidden",onChange:async e=>{var t;null!==(t=e.target.files)&&void 0!==t&&t[0]&&C(await z(e.target.files[0]))}}),(0,O.jsx)(M.z,{color:"secondary",onClick:()=>{var e;return null===(e=m.current)||void 0===e?void 0:e.click()},icon:I.aAc})]}),(0,O.jsx)("textarea",{rows:10,className:(0,p.default)("w-full resize-none overflow-y-auto rounded border border-gray-300 px-3 py-2","outline-none focus-within:border-green-600 focus-within:ring-1 focus-within:ring-green-600","text-token-text-primary placeholder-gray-500 dark:bg-gray-700"),placeholder:"-----BEGIN CERTIFICATE-----",value:null!=k?k:"",onChange:e=>{C(e.target.value)}})]}),y&&(0,O.jsx)("label",{className:"text-token-text-error",children:(0,O.jsx)(b.Z,{id:"ZfFabW",defaultMessage:"You need to re-authenticate to access this page. Please <login>log in</login> before continuing.",values:{login:e=>(0,O.jsx)("a",{href:"#",className:"text-token-text-primary underline",onClick:e=>{e.preventDefault(),a({authType:"login",callbackUrl:"/admin/identity"})},children:e})}})})]})})}let G=(0,j.vU)({setupSSOContent:{id:"workspaceIdentity.setupSSOContent",defaultMessage:"Anyone using email addresses with a verified domain can log in via SAML SSO."},createInstructionsXML:{id:"ssoModal.createInstructionsXML",defaultMessage:"If your Identity Provider offers a metadata URL or an XML file, add it here for the quickest setup option."},createInstructionsManual:{id:"ssoModal.createInstructionsManual",defaultMessage:"Copy your Sign-in endpoint (SSO URL) and the public X.509 certificate from your Identity Provider."},createTitle:{id:"ssoModal.createTitle",defaultMessage:"Create SAML SSO Configuration"},editTitle:{id:"ssoModal.editTitle",defaultMessage:"Edit SAML SSO Configuration"},ssoMetadataLabel:{id:"ssoModal.ssoMetadataLabel",defaultMessage:"App Federation Metadata URL"},signInLabel:{id:"ssoModal.signInLabel",defaultMessage:"SSO URL"},certLabel:{id:"ssoModal.certLabel",defaultMessage:"X.509 Signing Certificate"},doneButton:{id:"ssoModal.doneButton",defaultMessage:"Done"},nextButton:{id:"ssoModal.nextButton",defaultMessage:"Next"},deleteButton:{id:"ssoModal.deleteButton",defaultMessage:"Delete configuration"},cancelButton:{id:"ssoModal.cancelButton",defaultMessage:"Cancel"},acsURLLabel:{id:"workspaceIdentity.acsURLLabel",defaultMessage:"Assertion Consumer Service (ACS) URL"},entityIDLabel:{id:"workspaceIdentity.entityIDLabel",defaultMessage:"Entity ID"},idpSignInURL:{id:"workspaceIdentity.idpSignInURL",defaultMessage:"IDP Tile URL"},copiedACSToClipboard:{id:"workspaceIdentity.copiedACSToClipboard",defaultMessage:"Copied ACS URL to clipboard"},copiedEntityToClipboard:{id:"workspaceIdentity.copiedEntityToClipboard",defaultMessage:"Copied entity ID to clipboard"},copiedIDPUrlToClipboard:{id:"workspaceIdentity.copiedIDPUrlToClipboard",defaultMessage:"Copied IDP URL to clipboard"},orDivider:{id:"workspaceIdentity.orDivider",defaultMessage:"or"},certExtractFailed:{id:"workspaceIdentity.certExtractFailed",defaultMessage:"Unable to find X.509 Certificate in provided XML"},ssoUrlExtractFailed:{id:"workspaceIdentity.ssoUrlExtractFailed",defaultMessage:"Unable to find Entity ID (sign-in endpoint) in provided XML"},ssoLearnMoreLink:{id:"workspaceIdentity.ssoLearnMoreLink",defaultMessage:"Learn more"}});function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let $=v()(()=>n.e(5622).then(n.bind(n,95622)).then(e=>e.DirectorySyncSection),{loadableGenerated:{webpack:()=>[95622]}}),W=e=>{let{title:t,footer:n,children:o}=e;return(0,O.jsxs)(B.i9,{children:[(0,O.jsx)(B.A4,{children:(0,O.jsx)(b.Z,Q({},t))}),(0,O.jsx)("div",{children:o}),(0,O.jsx)(B.Li,{children:n})]})},K=e=>{let{icon:t,title:n,body:o,toggle:i}=e;return(0,O.jsxs)(B.i9,{children:[(0,O.jsxs)("div",{className:"flex items-center justify-between",children:[(0,O.jsxs)("div",{className:"flex items-center gap-2",children:[(0,O.jsx)(t,{className:"icon-sm"}),(0,O.jsx)(B.A4,{children:(0,O.jsx)(b.Z,Q({},n))})]}),(0,O.jsx)("div",{children:i})]}),(0,O.jsx)(B.Li,{children:o})]})};function Y(e){var t,n,o,i,g,v,x,j;let{currentWorkspaceId:C}=e,{value:T}=(0,f.sB)("3999712942"),S=(0,w.Z)(),D=(0,c.NL)(),{data:Z,isLoading:_}=(0,E.f_)(C),N=(0,d.b)(),{mutateAsync:L}=(0,E.DD)(C),{variables:A,mutateAsync:F}=(0,E.Ji)(C),{variables:U,mutateAsync:R}=(0,E.HH)(C),q=(null==Z?void 0:Z.sso_connection)!=null,z=null==Z?void 0:Z.domains,H=!!(null!=z&&z.some(e=>e.status===a.pT.VERIFIED)),G=q?ee.ssoEditButton:ee.ssoAddButton,{0:J,1:Y}=(0,h.useState)(!1),{0:et,1:en}=(0,h.useState)(!1),eo=(null==Z||null===(t=Z.sso_connection)||void 0===t?void 0:t.status)==="ACTIVE",ei=null!==(n=null==Z||null===(o=Z.sso_connection)||void 0===o||null===(o=o.connection)||void 0===o||null===(o=o.enabled_client_names)||void 0===o?void 0:o.includes("chat"))&&void 0!==n&&n,er=eo&&ei,ea=null==Z||null===(i=Z.sso_connection)||void 0===i?void 0:i.id,es=null===(g=null!==(v=null==U?void 0:U.shouldAllowExternalDomainInvites)&&void 0!==v?v:null==Z?void 0:Z.allow_external_domain_invites)||void 0===g||g,el=Z?(0,O.jsxs)(B.$V,{children:[T&&(0,O.jsx)($,{workspaceId:C}),(0,O.jsx)(W,{title:ee.domainSubtitle,footer:(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(b.Z,Q({},ee.verifyDomainInfoText))}),children:(0,O.jsx)(P,{domains:Z.domains,workspaceId:C})}),(0,O.jsx)(K,{icon:I.uSF,title:ee.autoProvisionTitle,body:(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(b.Z,Q({},ee.autoProvisionBody))}),toggle:(0,O.jsx)(k.Z,{disabled:!H,enabled:null!==(x=null==A?void 0:A.shouldAutoProvision)&&void 0!==x?x:Z.should_auto_provision,onChange:e=>{F({shouldAutoProvision:e})},label:S.formatMessage(ee.toggleAutoProvisionLabel)})}),H&&(0,O.jsx)(K,{icon:I.ZyU,title:ee.allowExternalDomainInvitesTitle,body:(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(b.Z,Q({},ee.allowExternalDomainInvitesBody))}),toggle:(0,O.jsx)(k.Z,{disabled:!H&&es,enabled:es,onChange:e=>{R({shouldAllowExternalDomainInvites:e})},label:S.formatMessage(ee.toggleDisableExternalDomainInvitesLabel)})}),(0,O.jsxs)(B.i9,{children:[(0,O.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,O.jsxs)("div",{className:"flex items-center gap-2",children:[(0,O.jsx)(I.kaz,{className:(0,p.default)("icon-sm",er?"text-blue-600":"text-token-text-tertiary")}),(0,O.jsx)(B.A4,{children:(0,O.jsx)(b.Z,Q({},ee.ssoTitle))})]}),q&&(0,O.jsx)("div",{children:(0,O.jsx)(k.Z,{enabled:er,onChange:()=>{L({connectionId:ea,active:!er})},label:S.formatMessage(ee.ssoToggleActive)})})]}),H&&(0,O.jsx)(V,{acsId:Z.acs_id,hasSSO:q}),(0,O.jsxs)("div",{children:[(0,O.jsx)(M.z,{as:"button",color:"primary",disabled:!H,onClick:()=>{!function(e){var t;let n=null===(t=(0,u.y_)(e))||void 0===t?void 0:t.accessToken,o=n?function(e,t){let n;if("string"!=typeof e)throw new m("Invalid token specified: must be a string");t||(t={});let o=!0===t.header?0:1,i=e.split(".")[o];if("string"!=typeof i)throw new m(`Invalid token specified: missing part #${o+1}`);try{n=function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw Error("base64 string is not of the correct length")}try{var n;return n=t,decodeURIComponent(atob(n).replace(/(.)/g,(e,t)=>{let n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}catch(e){return atob(t)}}(i)}catch(e){throw new m(`Invalid token specified: invalid base64 for part #${o+1} (${e.message})`)}try{return JSON.parse(n)}catch(e){throw new m(`Invalid token specified: invalid json for part #${o+1} (${e.message})`)}}(n):null,i=null==o?void 0:o.pwd_auth_time;return null!=i&&Date.now()-i<6e4}(D)?Y(!0):en(!0)},children:(0,O.jsx)(b.Z,Q({},G))}),(0,O.jsx)(X,{workspaceId:C,data:Z.sso_connection,isOpen:et,onClose:()=>{en(!1)}}),(0,O.jsx)(l.Z,{isOpen:J,onClose:()=>Y(!1),type:"warning",title:S.formatMessage(ee.reauthRequiredTitle),icon:I.oVl,primaryButton:(0,O.jsx)(s.Z.Button,{onClick:()=>{N({authType:"login",callbackUrl:"/admin/identity"})},color:"primary",children:(0,O.jsx)(b.Z,{id:"qcl4gn",defaultMessage:"Login"})}),secondaryButton:(0,O.jsx)(s.Z.Button,{onClick:()=>Y(!1),children:(0,O.jsx)(b.Z,{id:"E1vtdZ",defaultMessage:"Close"})}),children:(0,O.jsx)("label",{className:"mb-2 flex items-center text-sm",children:S.formatMessage(ee.reauthRequiredExplanation)})})]})]}),Z.sso_connection&&(0,O.jsx)(K,{icon:I.oVl,title:ee.enforceSSOTitle,body:(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(b.Z,Q({},ee.enforceSSOBody))}),toggle:(0,O.jsx)(k.Z,{disabled:!H,enabled:null===(j=Z.sso_connection.auth0_enforced_clients)||void 0===j?void 0:j.includes("chat"),onChange:e=>{L({connectionId:Z.sso_connection.id,enforcedClients:e?["chat"]:[]})},label:S.formatMessage(ee.enforceSSOLabel)})})]}):null;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(y(),{children:(0,O.jsx)("title",{children:S.formatMessage(ee.title)})}),(0,O.jsx)(r.yG,{title:S.formatMessage(ee.title)}),(0,O.jsx)(r.hb,{showSpinner:_,children:el})]})}let ee=(0,j.vU)({title:{id:"workspaceIdentity.title",defaultMessage:"Identity & Provisioning"},domainSubtitle:{id:"workspaceIdentity.domainSubtitle",defaultMessage:"Domain management"},ssoTitle:{id:"workspaceIdentity.ssoTitle",defaultMessage:"Single Sign On"},ssoToggleActive:{id:"WorkspaceIdentityPage.ssoToggleActive",defaultMessage:"Enable SSO for this workspace"},ssoAddButton:{id:"workspaceIdentity.ssoAddButton",defaultMessage:"Add SAML SSO"},ssoEditButton:{id:"workspaceIdentity.ssoEditButton",defaultMessage:"Edit SAML SSO"},autoProvisionTitle:{id:"workspaceIdentity.autoProvisionSubtitle",defaultMessage:"Automatic account creation"},autoProvisionBody:{id:"workspaceIdentity.autoProvisionBody",defaultMessage:"Automatically create workspace accounts for new users who log in with a verified domain."},toggleAutoProvisionLabel:{id:"workspaceIdentity.toggleAutoProvisionLabel",defaultMessage:"Toggle to enable or disable auto provisioning"},allowExternalDomainInvitesTitle:{id:"RQGwuu",defaultMessage:"Allow External Domain Invites"},allowExternalDomainInvitesBody:{id:"7KRqHk",defaultMessage:"If not checked, future invitations to this workspace will be limited to users from this organization's verified domains"},toggleDisableExternalDomainInvitesLabel:{id:"bQy24Z",defaultMessage:"Toggle to enable or disable external domain invites"},enforceSSOTitle:{id:"workspaceIdentity.enforceSSOTitle",defaultMessage:"Enforce SSO log in"},enforceSSOBody:{id:"workspaceIdentity.enforceSSOBody",defaultMessage:"When SSO is active, users will no longer be able to use social logins and will be redirected to your SSO portal."},enforceSSOLabel:{id:"workspaceIdentity.enforceSSOLabel",defaultMessage:"Toggle to enable or disable SSO enforcement"},verifyDomainInfoText:{id:"workspaceIdentity.verifyDomainInfoText",defaultMessage:"Verify ownership of an email domain to access advanced security features including single sign-on."},learnMoreLink:{id:"workspaceIdentity.learnMoreLink",defaultMessage:"Learn more"},reauthRequiredTitle:{id:"workspaceIdentity.reauthRequiredTitle",defaultMessage:"Please login again"},reauthRequiredExplanation:{id:"workspaceIdentity.reauthRequiredExplanation",defaultMessage:"For security reasons, we need you to reauthenticate before making changes to SSO settings."}});function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}var en=!0;function eo(e){return(0,O.jsx)(Y,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e))}eo.getLayout=function(e){return(0,O.jsx)(r.ZP,{mobilePageTitle:"Identity",requireOwnerPrivileges:!0,children:e})}},64216:function(e,t,n){"use strict";var o=n(79746),i=n(11550),r=n(28146),a=n(651);t.Z=e=>{let{label:t,value:n,onCopied:s}=e,l=()=>{(0,o.v)(n),s()};return(0,a.jsxs)("div",{className:"flex flex-col space-y-2",children:[void 0!==t&&(0,a.jsx)("label",{className:"font-semibold",children:t}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{onClick:l,className:"w-full cursor-pointer break-all rounded-lg bg-token-main-surface-tertiary px-4 py-2 font-mono text-sm text-token-text-primary",children:n}),(0,a.jsx)(i.z,{color:"ghost",onClick:l,icon:r.TIy})]})]})}},88491:function(e,t,n){"use strict";n.d(t,{Z:function(){return C}});var o,i=n(98601),r=n(99333),a=n(11550),s=n(64216),l=n(6440),d=n(59144),c=n(36792),u=n(28146),f=n(24434),p=n(24740),m=n(2721),g=n(42420),v=n(56032),x=n(92379),y=n(75172),h=n(62984),b=n(68306),w=n(12310),j=n(651);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var I=((o=I||{})[o.INITIAL=0]="INITIAL",o[o.PENDING=1]="PENDING",o[o.FINAL=2]="FINAL",o);function C(e){let{workspaceId:t,isOpen:n,onClose:o,currentDomain:i,domains:a=[],showUnverifiedDomains:l=!1,onVerifyDomain:c}=e,u=(0,y.Z)(),{mutateAsync:b,isPending:w}=function(e){let t=(0,g.NL)();return(0,v.D)({mutationFn:t=>{let{hostname:n}=t;return m.Z.addDomainToWorkspace(e,n)},onSuccess:()=>{t.invalidateQueries({queryKey:["workspace/identity",e]}),t.invalidateQueries({queryKey:["builderProfile"]})},onError:e=>{p.m.danger(e.message)}})}(t),{mutateAsync:M,isPending:C}=function(e){let t=(0,g.NL)();return(0,v.D)({mutationFn:t=>{let{domainId:n}=t;return m.Z.checkDomainForWorkspace(e,n)},onSuccess:()=>{t.invalidateQueries({queryKey:["workspace/identity",e]}),t.invalidateQueries({queryKey:["builderProfile"]})},onError:e=>{p.m.danger(e.message)}})}(t),{0:T,1:O}=(0,x.useState)(null!=i?i:void 0),{0:D,1:Z}=(0,x.useState)(null==i?void 0:i.hostname),{0:_,1:P}=(0,x.useState)((null==i?void 0:i.status)===void 0?I.INITIAL:(null==i?void 0:i.status)===r.pT.PENDING?I.PENDING:I.FINAL),N=()=>{i||(O(void 0),P(I.INITIAL))},L=async()=>{if(void 0===D)return;let e=a.find(e=>e.hostname===D&&e.status===r.pT.PENDING);if(e)O(e),P(I.PENDING);else{let e=await b({hostname:D});"id"in e&&O(e),P(I.PENDING)}},A=(0,j.jsx)(d.Z.Button,{title:u.formatMessage(E.check),color:"primary",disabled:(null==T?void 0:T.id)===void 0||C,onClick:async()=>{if(null!=T&&T.id){let e=await M({domainId:T.id});"error"in e&&p.m.danger(u.formatMessage(E.domainCheckError,{message:e.error.message})),"id"in e&&(c&&c(e),e.status===r.pT.VERIFIED&&P(I.FINAL))}}}),F=(0,j.jsx)(d.Z.Button,{title:u.formatMessage(E.submit),color:"primary",disabled:void 0===D||w,onClick:L}),U=(0,j.jsx)(d.Z.Button,{title:u.formatMessage(E.done),color:"primary",onClick:()=>{N(),o()}});return(0,j.jsxs)(f.Z,{isOpen:n,onClose:()=>{N(),o()},type:"success",className:"text-token-text-secondary",title:u.formatMessage(_===I.INITIAL?E.newTitle:E.editTitle),primaryButton:_===I.INITIAL?F:_===I.PENDING?A:U,secondaryButton:(0,j.jsx)(d.Z.Button,{title:u.formatMessage(E.cancel),color:"secondary",onClick:()=>{N(),o()}}),children:[_===I.INITIAL&&(0,j.jsx)(S,{hostname:D,onSetHostname:Z,onSubmit:L,unverifiedDomains:l?a:[],onVerifyDomain:e=>{P(I.PENDING),O(e)},workspaceId:t}),_===I.PENDING&&(0,j.jsxs)("div",{className:"flex flex-col gap-3",children:[u.formatMessage(E.verificationTokenMessage,{hostname:null==T?void 0:T.hostname}),(null==T?void 0:T.dns_verification_token_string)&&(0,j.jsx)(s.Z,{value:T.dns_verification_token_string,onCopied:()=>{p.m.success(u.formatMessage(E.copiedTXTRecordToClipboard),{duration:3})}}),(0,j.jsx)(h.Z,k({},E.verificationTokenFooter))]}),_===I.FINAL&&(0,j.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,j.jsx)(h.Z,k(k({},E.successfulVerification),{},{values:{hostname:null==T?void 0:T.hostname}})),(null==T?void 0:T.dns_verification_token_string)&&(0,j.jsx)(s.Z,{value:T.dns_verification_token_string,onCopied:()=>{p.m.success(u.formatMessage(E.copiedTXTRecordToClipboard),{duration:3})}})]})]})}function T(e){let{unverifiedDomains:t,onVerifyDomain:n,workspaceId:o}=e,{mutateAsync:i}=(0,w.Bd)(o);return(0,j.jsxs)(c.Z.Root,{fixed:!0,size:"compact",className:"mb-6 border-b border-token-border-light",children:[(0,j.jsxs)(c.Z.Header,{children:[(0,j.jsx)(c.Z.HeaderCell,{children:(0,j.jsx)(h.Z,k({},E.unverifiedDomainsTableHeader))}),(0,j.jsx)(c.Z.HeaderCell,{textAlign:"right"})]}),t.map(e=>(0,j.jsxs)(c.Z.Row,{children:[(0,j.jsx)(c.Z.Cell,{children:e.hostname}),(0,j.jsx)(c.Z.Cell,{textAlign:"right",children:(0,j.jsxs)("div",{className:"flex gap-2",children:[(0,j.jsx)(a.z,{color:"secondary",size:"small",onClick:()=>n(e),children:(0,j.jsx)(h.Z,k({},E.verifyDomainButton))}),(0,j.jsx)(a.z,{color:"secondary",size:"small",onClick:()=>i({domainId:e.id}),icon:u.XHJ})]})})]},e.id))]})}function S(e){let{hostname:t,onSetHostname:n,onSubmit:o,unverifiedDomains:i,onVerifyDomain:r,workspaceId:a}=e,s=(0,y.Z)();return(0,j.jsxs)(j.Fragment,{children:[i&&i.length>0&&(0,j.jsx)(T,{workspaceId:a,unverifiedDomains:i,onVerifyDomain:r}),(0,j.jsx)("form",{onSubmit:e=>{e.preventDefault(),o()},children:(0,j.jsxs)("div",{className:"mb-4",children:[(0,j.jsx)("label",{className:"mb-2 flex items-center text-sm font-semibold",children:(0,j.jsx)(h.Z,k({},E.domainInput))}),(0,j.jsx)(l.Z,{name:"hostname",placeholder:s.formatMessage(E.placeholder),value:null!=t?t:"",onChange:e=>{n(e.target.value)}})]})})]})}let E=(0,b.vU)({newTitle:{id:"domainModal.newTitle.0",defaultMessage:"Verify a new domain"},editTitle:{id:"domainModal.editTitle",defaultMessage:"Manage Domain"},submit:{id:"domainModal.submit",defaultMessage:"Submit"},check:{id:"domainModal.check",defaultMessage:"Check"},done:{id:"domainModal.done",defaultMessage:"Done"},cancel:{id:"domainModal.cancel",defaultMessage:"Cancel"},domainInput:{id:"domainModal.domainInput.0",defaultMessage:"Add a new domain"},placeholder:{id:"domainModal.placeholder",defaultMessage:"openai.com"},domainCheckError:{id:"domainModal.domainCheckError",defaultMessage:"Your domain could not be verified: {message}"},verificationTokenMessage:{id:"domainModal.verificationTokenMessage",defaultMessage:"To verify ownership of {hostname}, navigate to your DNS provider and add a TXT record with this value:"},verificationTokenFooter:{id:"domainModal.verificationTokenFooter",defaultMessage:"Then, check the record to complete the verification."},successfulVerification:{id:"domainModal.successfulVerification.0",defaultMessage:'Your domain, "{hostname}" has been successfully verified'},copiedTXTRecordToClipboard:{id:"domainModal.copiedTXTRecordToClipboard",defaultMessage:"Copied DNS TXT record to clipboard"},verifyDomainButton:{id:"domainModal.verifyDomainButton",defaultMessage:"Verify"},unverifiedDomainsTableHeader:{id:"domainModal.unverifiedDomainsTableHeader",defaultMessage:"Your unverified domains"}})},8040:function(e,t,n){"use strict";n.d(t,{$V:function(){return p},A4:function(){return m},Li:function(){return y},W8:function(){return b},i$:function(){return g},i9:function(){return x},qQ:function(){return v},vi:function(){return h}});var o,i,r,a,s,l,d,c,u=n(2346),f=n(15478);let p=f.Z.div(o||(o=(0,u.Z)(["text-base text-token-text-primary flex flex-col gap-10 my-10"]))),m=f.Z.div(i||(i=(0,u.Z)(["text-xl font-semibold"]))),g=f.Z.div(r||(r=(0,u.Z)(["text-base font-semibold"]))),v=f.Z.div(a||(a=(0,u.Z)(["flex flex-col divide-y divide-token-border-light border-y border-token-border-light"]))),x=f.Z.div(s||(s=(0,u.Z)(["flex flex-col gap-3 w-full m-auto md:m-0"]))),y=f.Z.div(l||(l=(0,u.Z)(["text-sm"]))),h=f.Z.div(d||(d=(0,u.Z)(["flex justify-between py-4 gap-4"]))),b=f.Z.hr(c||(c=(0,u.Z)(["max-w-xl border-token-border-light"])))},42606:function(e,t,n){"use strict";n.d(t,{I:function(){return r},o:function(){return a}});let o=["xlsx","pptx","docx"],i={"application/vnd.google-apps.spreadsheet":"xlsx","application/vnd.google-apps.presentation":"pptx","application/vnd.google-apps.document":"docx"};function r(e){var t;return e&&null!==(t=i[e.split(";")[0]])&&void 0!==t?t:null}function a(e){return e&&o.includes(e)?e:null}},84082:function(e,t,n){"use strict";n.d(t,{$e:function(){return r},EZ:function(){return a},Ql:function(){return i},dO:function(){return o},xC:function(){return s}});let o=10,i=4,r={duration:20,hasCloseButton:!0},a=512,s=536870912},93866:function(e,t,n){"use strict";n.d(t,{AJ:function(){return a},XX:function(){return l},xA:function(){return s}});var o,i,r=n(42606);let a=((o={})[o.None=0]="None",o[o.Multimodal=1]="Multimodal",o[o.Interpreter=2]="Interpreter",o[o.Retrieval=3]="Retrieval",o[o.ContextConnector=4]="ContextConnector",o[o.ProfilePicture=5]="ProfilePicture",o);function s(e){if(e)return{contextConnector:e.context_connector,sourceUrl:e.source_url,syntheticExtension:(0,r.o)(e.synthetic_extension),type:e.type}}let l=((i={}).Uploading="uploading",i.Ready="ready",i)},98628:function(e,t,n){"use strict";n.d(t,{E1:function(){return x},Sj:function(){return h},W7:function(){return p},cT:function(){return g},lU:function(){return v},po:function(){return m},sY:function(){return b}});var o=n(99333),i=n(2721),r=n(92319),a=n(99976),s=n(61619),l=n(68306),d=n(88815),c=n(24740),u=n(66114);let f={duration:20,hasCloseButton:!0};function p(e){return JSON.stringify({file:e.name,modified:e.lastModified,currentTime:new Date().toString()})}function m(e){return new Promise((t,n)=>{let o=new FileReader,i=new Image;o.onload=()=>{i.onload=()=>t(i),i.onerror=e=>n(e),i.src=o.result},o.readAsDataURL(e)})}async function g(e,t,n,l,u,p){var m,g,v;let w=d.N.getState().resetRateLimits,j=o.EG.Initial;a.A.logEvent(s.M.uploadFileInitiated,{client:"web",useCase:l.kind,uploadEntry:"local"});let M=p.usesRetrievalIndex?performance.now():void 0;try{let{file_id:r,upload_url:a}=await i.Z.createFile(t.name,t.size,l,!!w);u.onFileCreated(e,r,a),j=o.EG.FileCreated;let s=l.kind===o.Ei.Gizmo?l.gizmoId:void 0,d=null!==(m=p.shouldUpdateProgress)&&void 0!==m&&m,v=null!==(g=p.usesRetrievalIndex)&&void 0!==g&&g,h=await i.Z.uploadFileToAzureStorage(t,a,t=>{d&&u.onFileUploadProgress(e,10+80*t)});if(u.onFileUploadProgress(e,90),201!==h.status&&y(h,r,v),j=o.EG.FileUploaded,await i.Z.processFileUpload(r,{gizmoId:s}),j=o.EG.FileProcessed,p.usesRetrievalIndex){let t=await x(r,s);(null==t?void 0:t.status)===o.Xf.Skipped&&c.m.danger(n.formatMessage(b.retrievalSkippedFile,{fileName:t.name}),f),u.onFileUploaded(e,r,void 0,{fileTokenSize:t.file_size_tokens}),j=o.EG.RetrievalIndexCreated}else u.onFileUploaded(e,r,p.imageDimensions);null!=M&&i.Z.postRetrievalTiming({e2eLatencyMs:performance.now()-M,type:"file"})}catch(i){h(n,t.name,i);let o="NotInstanceOfError";i instanceof r.gK?o=i.name:i instanceof r.Q0?o="FatalServerError_type_".concat(null!==(v=i.type)&&void 0!==v?v:"undefined"):i instanceof Error?o=i.name:i instanceof r.vq&&(o=i.name),u.onError(e,"error",o,l,j)}}async function v(e,t,n,o,i){let{width:r,height:a}=await m(t);return g(e,t,n,{kind:o},i,{imageDimensions:{width:r,height:a}})}async function x(e,t){let n=Date.now()+6e4,a=e=>new Promise(t=>setTimeout(t,e)),s=0;for(;Date.now()<n;){let n=await i.Z.getRetrievalStatus(e,t);if(n.status===o.Xf.Success||n.status===o.Xf.Skipped)return n;if(n.status===o.Xf.Failed)throw new r.vq("Context extraction failed",n.error_code);s++,await a(Math.min(1e3,100*s))}throw new r.vq("Retrieval indexing timed out")}async function y(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o="Unknown error";try{o=await e.data}catch(e){}throw n&&i.Z.markFileUploadFailed(t,{error:o}),new r.vq("File upload to blobstore failed","failed_upload_to_blobstore")}function h(e,t,n){let o=(0,u.kr)(e,"default_upload_error",{fileName:t});n instanceof r.vq&&null!=n.code&&(o=(0,u.kr)(e,n.code)),c.m.danger(o,f)}let b=(0,l.vU)({retrievalSkippedFile:{id:"useFilePickerState.retrievalSkippedFile",defaultMessage:'Unable to extract text from "{fileName}"'}})},66114:function(e,t,n){"use strict";n.d(t,{$H:function(){return v},$p:function(){return E},Ad:function(){return L},B:function(){return N},BV:function(){return Z},CO:function(){return O},Iy:function(){return m},KL:function(){return T},L8:function(){return g},O6:function(){return h},Tu:function(){return _},VF:function(){return y},Vm:function(){return D},WI:function(){return P},YN:function(){return w},Z8:function(){return S},Zp:function(){return I},_0:function(){return k},kr:function(){return x},p0:function(){return C},s1:function(){return j},ww:function(){return b},xs:function(){return M}});var o=n(99333),i=n(16757),r=n(2721),a=n(86025),s=n(58695),l=n(82363),d=n(92379),c=n(75172),u=n(68306),f=n(24740),p=n(93866);function m(e){return e.replace("file-service://","")}function g(e){return"file-service://"+e}function v(e){return e.startsWith("file-service://")}function x(e,t,n){switch(t){case"file_zero_bytes":return e.formatMessage(A.fileZeroBytes,n);case"file_too_large":return e.formatMessage(A.fileTooLarge,n);case"over_user_quota":return e.formatMessage(A.overUserQuota,n);case"file_not_found":case"file_expired":return e.formatMessage(A.fileNotFound,n);case"file_timed_out":return e.formatMessage(A.fileTimedOut,n);case"ace_pod_expired":return e.formatMessage(A.codeInterpreterSessionTimeout,n);case"permission_error":return e.formatMessage(A.permissionError,n);case"default_upload_error":case"file_rejected":return e.formatMessage(A.defaultCreateEntryError,n);case"default_download_link_error":return e.formatMessage(A.defaultDownloadLinkError,n);case"file_empty":return e.formatMessage(A.fileEmpty,n);case"too_many_tokens":return e.formatMessage(A.fileTooManyTokens,n);case"file_encrypted":return e.formatMessage(A.fileEncrypted,n);case"file_corrupted":return e.formatMessage(A.fileCorrupted,n);case"failed_upload_to_blobstore":return e.formatMessage(A.failedUploadToBlobStore,n);default:return e.formatMessage(A.unknownError)}}function y(){let e=(0,c.Z)();return(0,d.useCallback)((t,n)=>x(e,t,n),[e])}function h(){let{session:e}=(0,s.kP)(),{isUnauthenticated:t}=(0,a.u)(),n=(0,c.Z)();return async(i,a)=>{if(!t&&null==e)return f.m.danger(n.formatMessage(A.fileDownloadFailed)),!1;try{let e=await r.Z.getFileDownloadLink(i,void 0,t);if(e.status!==o.KF.Success)throw Error("File is not ready to download: "+JSON.stringify(e));let n=e.download_url,s=document.createElement("a");s.href=n,s.download=a,s.click(),window.open(n,"_blank")}catch(e){return f.m.danger(n.formatMessage(A.fileDownloadFailed)),!1}return!0}}function b(e,t){if((null==t?void 0:t.kind)===i.OL.GizmoInteraction||(null==t?void 0:t.kind)===i.OL.GizmoTest){var n;return null===(n=t.gizmo)||void 0===n?void 0:n.product_features}return null==e?void 0:e.product_features}function w(e,t){var n,i,r,a;let s=b(e,t);return(null==s||null===(n=s.attachments)||void 0===n?void 0:n.type)===o.Cd.CodeInterpreter?p.AJ.Interpreter:(null==s||null===(i=s.attachments)||void 0===i?void 0:i.type)===o.Cd.Multimodal?p.AJ.Multimodal:(null==s||null===(r=s.attachments)||void 0===r?void 0:r.type)===o.Cd.Retrieval?p.AJ.Retrieval:(null==s||null===(a=s.attachments)||void 0===a?void 0:a.type)===o.Cd.ContextConnector?p.AJ.ContextConnector:p.AJ.None}function j(e){var t;let n=null===(t=e.split(".").pop())||void 0===t?void 0:t.toLowerCase();return({md:"text/markdown",java:"text/x-java",py:"text/x-script.python",c:"text/x-c",cpp:"text/x-c++",h:"text/x-c++",php:"text/x-php",rb:"text/x-ruby",tex:"application/x-latext",ts:"text/x-typescript",cs:"text/x-csharp"})[null!=n?n:""]||""}function M(e,t,n,o,i){if(null==i)return e;let r=j(t);r&&(n=r),o&&(n=function(e){switch(e){case"application/vnd.google-apps.spreadsheet":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"application/vnd.google-apps.document":case"application/vnd.google-apps.presentation":return"text/plain";default:return e}}(n));let{accepted_mime_types:a,can_accept_all_mime_types:s}=i;return null!=a&&0!==a.length&&s?a.includes(n)?e:p.AJ.Interpreter:e}function k(e,t,n){var i,r,a;let s=""!==t?t:j(n),l=null==e||null===(i=e.product_features)||void 0===i?void 0:i.attachments;return null==l?void 0:null!==(r=l.accepted_mime_types)&&void 0!==r&&r.includes(s)?l.type:null!==(a=l.image_mime_types)&&void 0!==a&&a.includes(s)?o.Cd.Multimodal:o.Cd.CodeInterpreter}function I(e,t){var n,o;let i=b(e,t);return null!=i&&null!==(n=i.attachments)&&void 0!==n&&n.can_accept_all_mime_types?void 0:null==i||null===(o=i.attachments)||void 0===o?void 0:o.accepted_mime_types}function C(e,t){let n=b(e,t),{attachments:o}=null!=n?n:{};if(null!=o&&o.image_mime_types)return o.image_mime_types;if((null==o?void 0:o.type)==="multimodal"){var i;return null!==(i=o.accepted_mime_types)&&void 0!==i?i:T}return[]}let T=["image/png","image/jpeg","image/gif","image/webp"];function S(e){return(0,d.useMemo)(()=>{if(void 0===e)return{};let t={"image/jpeg":[".jpg",".jpeg"],"image/svg+xml":[".svg"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":[".pptx"]};return{accept:e.reduce((e,n)=>(n in t?e[n]=t[n]:n.includes("/")&&(e[n]=[".".concat(n.split("/")[1])]),e),{})}},[e])}function E(e){var t;return null===(t=e.split(".").pop())||void 0===t?void 0:t.toLowerCase()}function O(e){let t=E(e);return null!=t&&["jpg","jpeg","png","gif","webp"].includes(t)}function D(e){let t=E(e);return null!=t&&["xls","xlsx","csv"].includes(t)}function Z(e){let t=E(e);return null!=t&&["xls","xlsx"].includes(t)}function _(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"fit";return new Promise((o,i)=>{let r=new FileReader;r.onerror=e=>{l.U.addError(Error("File reading has failed:",{cause:e})),i(Error("Failed to read the file."))},r.onload=r=>{let a=new Image;a.onerror=e=>{l.U.addError(Error("Image loading has failed:",{cause:e})),i(Error("Failed to load the image."))},a.onload=()=>{let r=document.createElement("canvas"),s,d=0,c=0;switch(n){case"fill":case"square":s=t/Math.min(a.width,a.height);break;case"fit":s=t/Math.max(a.width,a.height)}let u=a.width*s,f=a.height*s;"square"===n?(r.width=t,r.height=t,d=(t-u)/2,c=(t-f)/2):(r.width=u,r.height=f);let p=r.getContext("2d");if(null==p){l.U.addError("Canvas context creation failed. Your environment might not fully support HTML5 canvas."),i(Error("Failed to create canvas context."));return}p.drawImage(a,d,c,u,f);let m=e.type||"image/png";r.toBlob(t=>{t?o(new File([t],e.name,{type:m})):(l.U.addError("Blob creation failed. Blob is null."),i(Error("Failed to create blob from image data.")))},m)},null==r.target?(l.U.addError("Event target is null. Failed to load image."),i("Failed to load image.")):a.src=r.target.result},r.readAsDataURL(e)})}function P(e,t){return _(e,t,"square")}function N(e){var t,n;let o=null!==(t=e.name.split("/"))&&void 0!==t?t:[];return(null!==(n=o[o.length-1])&&void 0!==n?n:"").replace(/[-_]/g," ").split(".")[0]}function L(e,t){return t?e.slice(0,-t.length-1):e}let A=(0,u.vU)({defaultCreateEntryError:{id:"fileUpload.defaultCreateEntryError",defaultMessage:"Unable to upload {fileName}"},defaultDownloadLinkError:{id:"fileUpload.defaultDownloadLinkError",defaultMessage:"Failed to get upload status for {fileName}"},unknownError:{id:"fileUpload.unknownError",defaultMessage:"Unknown error occurred"},fileZeroBytes:{id:"fileUpload.fileZeroBytes",defaultMessage:"File is empty"},fileTooLarge:{id:"fileUpload.fileTooLarge",defaultMessage:"File is too large"},overUserQuota:{id:"fileUpload.overUserQuota",defaultMessage:"User quota exceeded"},fileNotFound:{id:"fileUpload.fileNotFound",defaultMessage:"File not found"},fileTimedOut:{id:"fileUpload.fileTimedOut",defaultMessage:"File upload timed out. Please try again."},fileEmpty:{id:"fileUpload.fileEmpty",defaultMessage:"No text could be extracted from this file."},fileTooManyTokens:{id:"fileUpload.fileTooManyTokens",defaultMessage:"This file contains too much text content. Please try again with a smaller file."},fileEncrypted:{id:"fileUpload.fileEncrypted",defaultMessage:"This file is encrypted/requires a password to access. Please try again with an unencrypted file."},fileCorrupted:{id:"fileUpload.fileCorrupted",defaultMessage:"This file is corrupted. Please ensure the file is not corrupted and try again."},codeInterpreterSessionTimeout:{id:"fileUpload.codeInterpreterSessionTimeout",defaultMessage:"Code interpreter session expired"},permissionError:{id:"fileUpload.permissionError",defaultMessage:"Missing permission to access file"},fileDownloadFailed:{id:"filesModal.fileDownloadFailed",defaultMessage:"File download failed. Please try again."},failedUploadToBlobStore:{id:"fileUpload.failedUploadToBlobStore",defaultMessage:"Failed upload to files.oaiusercontent.com. Please ensure your network settings allow access to this site or contact your network administrator."}})},88815:function(e,t,n){"use strict";n.d(t,{J:function(){return i},N:function(){return r}});var o=n(68810);let i={label:"Auto",value:""},r=(0,o.Ue)(()=>({forceParagen:!1,forceParagenModel:i,forceNulligen:!1,forceIndepthFeedback:!1,forceIndepthFeedbackPrompt:"The user has opted in to provide additional feedback on the previous response. Encourage the user to share feedback that you can store in a memory to better meet their needs in future. Use no more than 3 turns. If at any point the user indicates no longer wanting to provide feedback, return to the original topic.",forceRateLimit:!1,resetRateLimits:!1,showDebugConversationTurns:!1,rebaseSystemMessageContent:null}))},83369:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/identity",function(){return n(10737)}])}},function(e){e.O(0,[9237,2342,4198,4089,1133,3718,3088,5696,1612,2349,2745,5162,1749,9113,9725,7261,3403,3127,3662,2888,9774,179],function(){return e(e.s=83369)}),_N_E=e.O()}]);
//# sourceMappingURL=identity-fdfbefbdfca787c7.js.map