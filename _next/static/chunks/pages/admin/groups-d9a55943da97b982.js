(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7705],{40530:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSP:function(){return X},default:function(){return J}});var r=s(39993),a=s(52527),n=s(28592),i=s(44506),l=s(93130),o=s(82473),c=s(61236),u=s(52134),d=s(25494),p=s(19841),m=s(9842),g=s.n(m),x=s(70079),f=s(9063),h=s(84692),j=s(68498),y=s(47566),b=s(35250);function w(e){let{checked:t}=e;return(0,b.jsx)("div",{className:"p-2",children:(0,b.jsx)(y.Tg4,{className:"icon-sm"})})}var v=s(77919),Z=s(25309),k=s(58546);function N(e){let{className:t,inputClassName:s,value:r,onChange:a,placeholder:n}=e;return(0,b.jsxs)("div",{className:(0,p.default)("relative",t),children:[(0,b.jsx)(y.W1M,{className:"icon-sm absolute left-2 top-1/2 -translate-y-1/2 transform text-token-text-tertiary"}),(0,b.jsx)("input",{type:"text",value:r,onChange:a,placeholder:n,className:(0,p.default)("rounded-lg border border-gray-200 pl-8 placeholder:text-gray-500 dark:border-gray-600 dark:bg-gray-700",s),autoComplete:"off"})]})}var S=s(71023),O=s(78653),C=s(70257),M=s(68608),P=s(6716),D=s(58236),E=s(61888),A=s(19166),F=s(60571),z=s(75118);function G(e){let{group:t,isOpen:s,onClose:r}=e,a=(0,f.Z)(),o=a.formatMessage({id:"workspaceSettings.groups.addMember",defaultMessage:"Add members to the {groupName} group"},{groupName:t.name}),c=(0,l.t)(),{0:u,1:d}=(0,x.useState)([]),{0:p,1:m}=(0,x.useState)(!1);async function g(){let e=null==c?void 0:c.getWorkspaceId();if(!e)throw Error("No workspace ID found");m(!0);let s=await i.Z.bulkAddWorkspaceGroupUsers(e,t.id,u);n.m.success(a.formatMessage({id:"yU4Zf0",defaultMessage:"Added {numUsers} users to the group"},{numUsers:s.added_group_users.length})),null==r||r(),m(!1)}return(0,b.jsxs)(M.Z,{isOpen:s,onClose:null!=r?r:E.noop,title:o,type:"success",showCloseButton:!0,primaryButton:(0,b.jsx)(v.z,{onClick:g,disabled:0===u.length||u.length>1e3,loading:p,children:(0,b.jsx)(h.Z,{id:"EpbOzA",defaultMessage:"Add users to group"})}),children:[(0,b.jsx)(T,{onChange:d}),u.length>1e3&&(0,b.jsx)("div",{className:"mt-2 text-sm text-token-text-error",children:(0,b.jsx)(h.Z,{id:"9lp0Tc",defaultMessage:"Email list is limited to {maxEmails} users at once",values:{maxEmails:1e3}})})]})}function T(e){let{onChange:t}=e,{0:s,1:r}=(0,x.useState)("");return(0,b.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,b.jsxs)("label",{htmlFor:"group-email-paste",children:[(0,b.jsx)(h.Z,{id:"qvGcSC",defaultMessage:"Emails"}),(0,b.jsx)("br",{}),(0,b.jsx)("span",{className:"text-sm text-token-text-tertiary",children:(0,b.jsx)(h.Z,{id:"Fhd+5h",defaultMessage:"Paste email addresses here, one per line:"})})]}),(0,b.jsx)(z.Z,{id:"group-email-paste",className:"h-[250px] text-sm",value:s,onChange:e=>{r(e.target.value),t(e.target.value.split("\n").map(e=>e.trim()).filter(e=>e.length>0).filter(e=>F.F.test(e)))},placeholder:"jean@example.com\njoohyun@example.com\nmuhammed@example.com\nsusan@example.com"})]})}function _(e){let{group:t,isOpen:s,onClose:r}=e,a=(0,f.Z)().formatMessage({id:"workspaceSettings.groups.addMember",defaultMessage:"Add members to the {groupName} group"},{groupName:t.name}),n=(0,l.t)(),i=null==n?void 0:n.getWorkspaceId(),{0:o,1:c}=(0,x.useState)(""),{0:d,1:p}=(0,x.useState)(0),{data:m}=(0,A.Z)(i,d*A.I,o,A.I,u.Wk),{0:g,1:j}=(0,x.useState)([]),{0:w,1:Z}=(0,x.useState)([]),{0:S,1:O}=(0,x.useState)("interactive"),P=m?Math.ceil(m.total/A.I):0;async function F(e){Z(t=>[...t,e]);try{await q(i,t.id,e),j(t=>[...t,e])}catch(e){D.U.addError(e)}finally{Z(t=>t.filter(t=>t!==e))}}return"batch"===S?(0,b.jsx)(G,{group:t,isOpen:s,onClose:r}):(0,b.jsx)(M.Z,{type:"warning",isOpen:s,onClose:null!=r?r:E.noop,title:a,size:"custom",className:"max-w-screen-md",showCloseButton:!0,primaryButton:(0,b.jsx)(v.z,{onClick:r,children:(0,b.jsx)(h.Z,{id:"0NAzDq",defaultMessage:"Done"})}),children:(0,b.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,b.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,b.jsx)("p",{children:a}),(0,b.jsx)(v.z,{onClick:()=>{O("batch")},color:"secondary",children:(0,b.jsx)(h.Z,{id:"5GPldp",defaultMessage:"Bulk add users"})})]}),(0,b.jsx)(N,{value:o,inputClassName:"w-full",onChange:e=>{c(e.target.value)}}),(0,b.jsxs)(C.Z.Root,{className:"min-w-full",children:[(0,b.jsxs)(C.Z.Header,{children:[(0,b.jsx)(C.Z.HeaderCell,{children:(0,b.jsx)(h.Z,{id:"workspaceSettings.groups.addMember.name",defaultMessage:"Name"})}),(0,b.jsx)(C.Z.HeaderCell,{children:(0,b.jsx)(h.Z,{id:"workspaceSettings.groups.addMember.email",defaultMessage:"Email"})}),(0,b.jsx)(C.Z.HeaderCell,{})]}),(0,b.jsx)(C.Z.Body,{children:null==m?void 0:m.items.map(e=>(0,b.jsxs)(C.Z.Row,{children:[(0,b.jsx)(C.Z.Cell,{children:e.name}),(0,b.jsx)(C.Z.Cell,{children:e.email}),(0,b.jsx)(C.Z.Cell,{textAlign:"right",className:"pr-1",children:(0,b.jsx)(v.z,{size:"small",color:"secondary",disabled:w.includes(e.id),onClick:()=>{g.includes(e.id)||F(e.id)},children:g.includes(e.id)?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(y.$As,{className:"icon-sm"}),(0,b.jsx)(h.Z,{id:"workspaceSettings.groups.addMember.addButton",defaultMessage:"Added"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(y.Vz5,{className:"icon-sm"}),(0,b.jsx)(h.Z,{id:"workspaceSettings.groups.addMember.addedButton",defaultMessage:"Add"})]})})})]},e.id))})]}),(0,b.jsx)("div",{className:"flex flex-row justify-center",children:(0,b.jsx)(k.t,{currentPage:d,onChangeIndex:e=>{p(e)},length:P})})]})})}async function q(e,t,s){await i.Z.addWorkspaceGroupUser(e,t,s)}function Q(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function B(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(s),!0).forEach(function(t){(0,r.Z)(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Q(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function H(e){let{workspaceId:t,group:s,readOnly:r}=e,a=(0,f.Z)(),{0:n,1:l}=(0,x.useState)(!1),{0:m,1:g}=(0,x.useState)(""),{0:j,1:w}=(0,x.useState)(0),{data:Z,isLoading:N,isPlaceholderData:M}=(0,c.a)({queryKey:[t,"groups",s.id,m,"members-page-".concat(j)],queryFn:()=>i.Z.listWorkspaceGroupMembers(t,s.id,m,10*j),placeholderData:u.Wk}),{0:D,1:E}=(0,x.useState)(!1),A=(0,x.useRef)(null),F=(0,o.NL)();(0,x.useEffect)(()=>{n&&A.current&&A.current.focus()},[n]);let{mutateAsync:z}=(0,d.D)({mutationFn:async e=>await i.Z.removeWorkspaceGroupMember(t,s.id,e),onMutate:e=>(F.cancelQueries({queryKey:[t,"groups",s.id]}),F.setQueryData([t,"groups",s.id,m,"members-page-".concat(j)],t=>t?B(B({},t),{},{items:t.items.filter(t=>t.id!==e),total:t.total-1}):{limit:10,offset:0,items:[],total:0}),{previousData:Z}),onError:(e,r,a)=>{F.setQueryData([t,"groups",s.id,"members-page-".concat(j)],null==a?void 0:a.previousData),F.invalidateQueries({queryKey:[t,"groups",s.id]})},onSettled:async()=>{await new Promise(e=>setTimeout(e,1e3)),F.invalidateQueries({queryKey:[t,"groups"]})}});return(0,b.jsxs)("div",{className:"flex w-full flex-col",children:[(0,b.jsxs)("div",{className:"flex flex-row items-center ",children:[(0,b.jsx)("div",{className:"border-token-border-dark mt-3 inline-block h-8 grow-0 border-b-2 text-sm font-semibold",children:(0,b.jsx)(h.Z,{id:"workspaceSettings.groups.membersTableTitle",defaultMessage:"Group members"})}),(0,b.jsx)("div",{className:"grow"}),(0,b.jsx)(P.u,{label:a.formatMessage({id:"workspaceSettings.groups.searchButtonTooltip",defaultMessage:"Search members"}),children:(0,b.jsx)("div",{className:"cursor-pointer p-2",onClick:()=>{l(!0)},children:(0,b.jsx)(y.W1M,{className:"icon-sm"})})}),(0,b.jsx)("input",{type:"text",ref:A,placeholder:a.formatMessage({id:"workspaceSettings.groups.searchMembers",defaultMessage:"Filter by name or email..."}),className:(0,p.default)("bg-token-surface-primary dark:bg-token-surface-secondary border-none px-0 transition-width duration-300 ease-in-out focus:ring-0",n?"w-64":"w-0"),value:m,onChange:()=>{var e,t;w(0),g(null!==(e=null===(t=A.current)||void 0===t?void 0:t.value)&&void 0!==e?e:"")}})]}),(0,b.jsxs)(C.Z.Root,{className:"min-w-full",children:[(0,b.jsxs)(C.Z.Header,{children:[(0,b.jsx)(C.Z.HeaderCell,{children:(0,b.jsx)(h.Z,{id:"workspaceSettings.groups.memberName",defaultMessage:"Name"})}),(0,b.jsx)(C.Z.HeaderCell,{children:(0,b.jsx)(h.Z,{id:"workspaceSettings.groups.email",defaultMessage:"Email"})}),(0,b.jsx)(C.Z.HeaderCell,{})]}),(0,b.jsx)(C.Z.Body,{className:N||M?"opacity-50":void 0,children:null==Z?(0,b.jsx)(C.Z.Row,{children:(0,b.jsx)(C.Z.Cell,{colSpan:3,children:(0,b.jsx)(S.Z,{})})}):0===Z.items.length?(0,b.jsx)(C.Z.Row,{children:(0,b.jsx)(C.Z.Cell,{colSpan:3,children:""===m?(0,b.jsx)(h.Z,{id:"workspaceSettings.groups.noMembers",defaultMessage:"No members"}):(0,b.jsx)(h.Z,{id:"workspaceSettings.groups.noMembersForSearch",defaultMessage:"No members matched the filter"})})}):Z.items.map(e=>(0,b.jsxs)(C.Z.Row,{children:[(0,b.jsx)(C.Z.Cell,{children:(0,b.jsx)("span",{className:"ml-3",children:e.name})}),(0,b.jsx)(C.Z.Cell,{children:e.email}),(0,b.jsx)(C.Z.Cell,{textAlign:"right",children:!r&&(0,b.jsxs)(O.Z.Root,{children:[(0,b.jsx)(O.Z.Trigger,{className:"-my-2",children:(0,b.jsx)(y.nWS,{className:"icon-sm"})}),(0,b.jsx)(O.Z.Portal,{children:(0,b.jsx)(O.Z.Content,{children:(0,b.jsx)(O.Z.Item,{onClick:()=>z(e.id),children:(0,b.jsx)(h.Z,{id:"workspaceSettings.groups.removeMember",defaultMessage:"Remove member"})})})})]})})]},e.id))})]}),(0,b.jsxs)("div",{className:"my-2 flex flex-row justify-center",children:[!r&&(0,b.jsx)(v.z,{color:"secondary",onClick:()=>E(!0),children:(0,b.jsx)(h.Z,{id:"workspaceSettings.groups.addMemberButton",defaultMessage:"Add member"})}),(0,b.jsx)("div",{className:"grow"}),Z&&Z.items.length>0&&(0,b.jsx)(k.t,{currentPage:j,onChangeIndex:e=>{w(e)},length:Math.ceil(Z.total/10)})]}),D&&(0,b.jsx)(_,{isOpen:!0,onClose:()=>{F.invalidateQueries({queryKey:[t,"groups"]}),E(!1)},group:s})]})}function R(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function W(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?R(Object(s),!0).forEach(function(t){(0,r.Z)(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):R(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function I(e){let{workspaceId:t}=e,s=(0,f.Z)(),r=(0,l.t)(),a=!(null!=r&&r.isAdminOfAccount()||null!=r&&r.isOwnerOfAccount()),m=(0,o.NL)(),{0:g,1:j}=(0,x.useState)(""),{0:y,1:w}=(0,x.useState)(0),{data:Z,isLoading:O,isPlaceholderData:M}=(0,c.a)({queryKey:""===g?[t,"groups","page-".concat(y)]:[t,"groups","filtered",g,"page-".concat(y)],queryFn:()=>i.Z.getWorkspaceGroups(t,{query:g,offset:10*y}),placeholderData:u.Wk}),{0:P,1:D}=(0,x.useState)(!1),E=e=>{e&&(w(0),j("")),D(e)},{mutateAsync:A}=(0,d.D)({mutationFn:async e=>{let{workspaceId:t,name:s}=e;return await i.Z.createWorkspaceGroup(t,s)},onMutate:e=>{let{workspaceId:t,name:s}=e;return m.cancelQueries({queryKey:[t,"groups"]}),m.setQueryData([t,"groups","page-0"],e=>(e||(e={limit:10,offset:0,items:[],total:0}),W(W({},e),{},{items:[{id:"new",name:s,num_members:0,created_time:""},...e.items.slice(0,9)]}))),{previousGroups:Z}},onError:(e,r,a)=>{m.setQueryData([t,"groups","page-0"],null==a?void 0:a.previousGroups),m.invalidateQueries({queryKey:[t,"groups"]}),"Group with this name already exists."===e.message&&n.m.warning(s.formatMessage({id:"workspaceSettings.groups.duplicateName",defaultMessage:"Group with this name already exists"}),{duration:2})},onSettled:async()=>{await new Promise(e=>setTimeout(e,1e3)),m.invalidateQueries({queryKey:[t,"groups"]})}}),{mutateAsync:F}=(0,d.D)({mutationFn:async e=>await i.Z.deleteWorkspaceGroup(t,e),onMutate:e=>(m.cancelQueries({queryKey:[t,"groups","page-0"]}),m.setQueryData([t,"groups","page-0"],t=>(t||(t={items:[]}),W(W({},t),{},{items:t.items.filter(t=>t.id!==e)}))),{previousGroups:Z}),onError:(e,s,r)=>{m.setQueryData([t,"groups","page-0"],null==r?void 0:r.previousGroups),m.invalidateQueries({queryKey:[t,"groups"]})},onSettled:async()=>{await new Promise(e=>setTimeout(e,1e3)),m.invalidateQueries({queryKey:[t,"groups"]})}}),{mutateAsync:z}=(0,d.D)({mutationFn:async e=>{let{workspaceId:t,groupID:s,name:r}=e;return await i.Z.updateWorkspaceGroup(t,s,r)},onMutate:e=>{let{workspaceId:t,groupID:s,name:r}=e,a=m.getQueryData([t,"groups","page-".concat(y)]);return m.setQueryData([t,"groups","page-".concat(y)],e=>(e||(e={items:[]}),W(W({},e),{},{items:e.items.map(e=>e.id===s?W(W({},e),{},{name:r}):e)}))),{previousGroups:a}},onError:(e,t,r)=>{m.setQueryData([t,"groups","page-".concat(y)],null==r?void 0:r.previousGroups),"Group with this name already exists."===e.message&&n.m.warning(s.formatMessage({id:"workspaceSettings.groups.duplicateName",defaultMessage:"Group with this name already exists"}),{duration:2})},onSettled:async()=>{await new Promise(e=>setTimeout(e,1e3)),m.invalidateQueries({queryKey:[t,"groups"]})}});return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"mb-3 mt-6 flex flex-row justify-between gap-2",children:[(0,b.jsx)(N,{inputClassName:"w-[250px]",value:g,onChange:e=>{j(e.target.value),w(0)},placeholder:s.formatMessage({id:"workspaceSettings.groups.search",defaultMessage:"Search group name"})}),!a&&(0,b.jsx)(v.z,{onClick:()=>E(!0),children:(0,b.jsx)(h.Z,{id:"workspaceSettings.groups.create",defaultMessage:"Create group"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)(C.Z.Root,{className:"min-w-full",children:[(0,b.jsxs)(C.Z.Header,{children:[(0,b.jsx)(C.Z.HeaderCell,{}),(0,b.jsx)(C.Z.HeaderCell,{children:(0,b.jsx)(h.Z,{id:"workspaceSettings.groups.groupName",defaultMessage:"Group name"})}),(0,b.jsx)(C.Z.HeaderCell,{children:(0,b.jsx)(h.Z,{id:"workspaceSettings.groups.members",defaultMessage:"Members"})}),(0,b.jsx)(C.Z.HeaderCell,{children:(0,b.jsx)(h.Z,{id:"workspaceSettings.groups.created",defaultMessage:"Created"})}),(0,b.jsx)(C.Z.HeaderCell,{})]}),(0,b.jsxs)(C.Z.Body,{className:(0,p.default)((O||M)&&"opacity-50"),children:[P&&(0,b.jsx)(U,{group:"new",workspaceId:t,onChangeName:async e=>{""!==e.trim()&&(A({workspaceId:t,name:e}),E(!1))},onDelete:()=>null,readOnly:a}),null==Z?(0,b.jsx)(C.Z.Row,{children:(0,b.jsx)(C.Z.Cell,{colSpan:5,textAlign:"center",children:(0,b.jsx)(S.Z,{})})}):0===Z.items.length?(0,b.jsx)(C.Z.Row,{children:(0,b.jsx)(C.Z.Cell,{colSpan:5,textAlign:"center",children:""===g?(0,b.jsx)(h.Z,{id:"workspaceSettings.groups.noGroups",defaultMessage:"No groups found."}):(0,b.jsx)(h.Z,{id:"workspaceSettings.groups.noGroupsWithFIlter",defaultMessage:"No groups found. Try changing the search query."})})}):Z.items.map(e=>(0,b.jsx)(U,{group:e,workspaceId:t,onDelete:F,onChangeName:async s=>{z({workspaceId:t,groupID:e.id,name:s})},readOnly:a},e.id))]})]}),Z&&(0,b.jsx)("div",{className:"flex flex-row justify-center",children:(0,b.jsx)(k.t,{length:Math.ceil(Z.total/10),currentPage:Math.min(y,Math.ceil(Z.total/10)),onChangeIndex:e=>w(e)})})]})]})}function K(e){let{currentWorkspaceId:t}=e,s=(0,f.Z)();return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g(),{children:(0,b.jsx)("title",{children:s.formatMessage($.title)})}),(0,b.jsx)(a.yG,{title:s.formatMessage($.title),subtitle:(0,b.jsx)(h.Z,{id:"NDDzzF",defaultMessage:"Only workspace admins can edit these settings."})}),(0,b.jsx)(a.hb,{showSpinner:!1,children:(0,b.jsx)(I,{workspaceId:t})})]})}function U(e){let{group:t,workspaceId:s,onChangeName:r,onDelete:a,readOnly:n}=e,i=(0,f.Z)(),{0:l,1:o}=(0,x.useState)(!1),{0:c,1:u}=(0,x.useState)("new"===t?"":t.name),{0:d,1:p}=(0,x.useState)(!1),{0:m,1:g}=(0,x.useState)("new"===t),{0:v,1:k}=(0,x.useState)(null),N=(0,x.useRef)(null);(0,x.useEffect)(()=>{if("new"===t||m){var e;null===(e=N.current)||void 0===e||e.focus()}},[t,m]);let S=async()=>{if(""===c.trim()){u("new"===t?"":t.name),g(!1),p(!1);return}r&&(p(!0),await r(c)),p(!1),g(!1)};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(C.Z.Row,{onClick:()=>o(e=>!e),className:"hover:bg-token-surface-secondary cursor-pointer",children:[(0,b.jsx)(C.Z.Cell,{children:(0,b.jsx)(w,{checked:l})}),(0,b.jsx)(C.Z.Cell,{children:"new"===t||m?(0,b.jsx)(Z.Z,{ref:N,name:"newGroupName",value:c,disabled:d,placeholder:i.formatMessage({id:"workspaceSettings.groups.groupNamePlaceholder",defaultMessage:"New group name..."}),onChange:e=>u(e.target.value),onBlur:()=>{c!==("new"===t?"":t.name)&&S()},onPressEnter:S}):t.name}),(0,b.jsx)(C.Z.Cell,{children:(0,b.jsx)(h.Z,{id:"workspaceSettings.groups.memberCount",defaultMessage:"{count} members",values:{count:"new"===t?"0":t.num_members}})}),(0,b.jsx)(C.Z.Cell,{children:"new"!==t&&t.created_time?(0,b.jsx)(j.Ji,{value:t.created_time,year:"numeric",month:"long",day:"numeric"}):""}),(0,b.jsx)(C.Z.Cell,{textAlign:"right",children:"new"!==t&&!n&&(0,b.jsxs)(O.Z.Root,{children:[(0,b.jsx)(O.Z.Trigger,{className:"-my-2",children:(0,b.jsx)(y.nWS,{className:"icon-sm"})}),(0,b.jsx)(O.Z.Portal,{children:(0,b.jsxs)(O.Z.Content,{children:[(0,b.jsx)(O.Z.Item,{onClick:e=>{g(!0),setTimeout(()=>{var e;null===(e=N.current)||void 0===e||e.focus()},120),e.stopPropagation()},children:(0,b.jsx)(h.Z,{id:"workspaceSettings.groups.changeName",defaultMessage:"Edit name"})}),(0,b.jsx)(O.Z.Item,{onClick:e=>{k(t),e.stopPropagation()},children:(0,b.jsx)(h.Z,{id:"workspaceSettings.groups.edit",defaultMessage:"Delete group"})})]})})]})})]}),l&&"new"!==t&&(0,b.jsx)(C.Z.Row,{children:(0,b.jsx)(C.Z.Cell,{colSpan:5,className:"pl-8",children:(0,b.jsx)(H,{group:t,workspaceId:s,readOnly:n})})}),v&&(0,b.jsx)(V,{group:v,onDelete:a,onClose:()=>k(null)})]})}function V(e){let{group:t,onDelete:s,onClose:r}=e,a=(0,f.Z)().formatMessage({id:"workspaceSettings.groups.deleteGroupTitle",defaultMessage:"Delete group {groupName}?"},{groupName:t.name});return(0,b.jsx)(M.Z,{type:"warning",isOpen:!0,onClose:r,title:a,showCloseButton:!0,primaryButton:(0,b.jsx)(v.z,{color:"danger",onClick:async()=>{s(t.id),r()},children:(0,b.jsx)(h.Z,{id:"workspaceSettings.groups.confirmDelete",defaultMessage:"Delete"})}),secondaryButton:(0,b.jsx)(v.z,{onClick:r,color:"secondary",children:(0,b.jsx)(h.Z,{id:"workspaceSettings.groups.cancelDelete",defaultMessage:"Cancel"})}),children:(0,b.jsx)("p",{children:(0,b.jsx)(h.Z,{id:"workspaceSettings.groups.deleteGroupWarning",defaultMessage:'Are you sure you want to delete the "{groupName}" group? This action cannot be undone.',values:{groupName:t.name}})})})}let $=(0,j.vU)({title:{id:"admin.groupsSettings.title",defaultMessage:"Groups"}});function L(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}var X=!0;function J(e){return(0,b.jsx)(K,function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?L(Object(s),!0).forEach(function(t){(0,r.Z)(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):L(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}({},e))}J.getLayout=function(e){return(0,b.jsx)(a.ZP,{mobilePageTitle:"Groups",children:e})}},13415:function(e,t,s){"use strict";s.d(t,{Z:function(){return b}});var r=s(39993),a=s(6716),n=s(32148),i=s(19841),l=s(83737),o=s(70079),c=s(84692),u=s(68498),d=s(83901),p=s(87648),m=s(96496),g=s(20228),x=s(37358),f=s(35250);function h(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function j(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?h(Object(s),!0).forEach(function(t){(0,r.Z)(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):h(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function y(e){let{isDesktopNavCollapsed:t}=e;return(0,f.jsx)(l.E.div,{initial:!1,transition:{duration:.165},animate:{x:t?"0":"260px"},style:{rotate:t?180:0,y:"-50%"},className:(0,i.default)("fixed left-0 top-1/2 z-40"),children:(0,f.jsx)("button",{onClick:d.vm.toggleDesktopNavCollapsed,children:(0,f.jsxs)(a.u,{side:"right",label:t?(0,f.jsx)(c.Z,j({},w.openSidebar)):(0,f.jsx)(c.Z,j({},w.closeSidebar)),sideOffset:4,children:[(0,f.jsx)(l.E.div,{className:"flex h-[72px] w-8 items-center justify-center",variants:{rest:{},hover:{}},initial:!1,whileHover:["hover","arrow"],animate:["rest",t?"arrow":"line"],children:(0,f.jsxs)(l.E.div,{className:"flex h-6 w-6 flex-col items-center",children:[(0,f.jsx)(l.E.div,{className:"h-3 w-1 rounded-full",variants:{line:{rotate:"0deg",y:".15rem"},arrow:{rotate:"15deg",y:".15rem"},rest:{background:"var(--text-quaternary)"},hover:{background:"var(--text-primary)"}}}),(0,f.jsx)(l.E.div,{className:"h-3 w-1 rounded-full",variants:{line:{rotate:"0deg",y:"-.15rem"},arrow:{rotate:"-15deg",y:"-.15rem"},rest:{background:"var(--text-quaternary)"},hover:{background:"var(--text-primary)"}}})]})}),(0,f.jsx)(n.T,{children:t?(0,f.jsx)(c.Z,j({},w.openSidebar)):(0,f.jsx)(c.Z,j({},w.closeSidebar))})]})})})}function b(e){let{children:t,hideNavigation:s=!1,mobileHeaderContent:r,mobileHeaderRightContent:a,mobileHeaderBottomContent:n,sidebar:l,forceOpenDesktopSidebar:c=!1}=e,u=(0,p.w$)(),h=(0,d.xH)(),j=[],w=null;o.Children.forEach(t,e=>{o.isValidElement(e)&&(e.type===b.Sidebars?w=e:j.push(e))});let v=(0,m.Qr)(),Z=u&&!s&&null!=l;return(0,f.jsxs)("div",{className:"relative z-0 flex h-full w-full overflow-hidden",children:[Z?(0,f.jsx)(g.Z,{children:(0,f.jsx)(x.l6,{forceOpenDesktopSidebar:c,children:(0,f.jsx)("div",{className:(0,i.default)("flex h-full min-h-0 flex-col"),children:l})})}):null,(0,f.jsxs)("div",{className:"relative flex h-full max-w-full flex-1 flex-col overflow-hidden",children:[!u&&!s&&(0,f.jsx)(g.Z,{children:(0,f.jsx)(x.Vs,{onClickOpenSidebar:()=>d.vm.toggleActiveSidebar("mobile-nav"),sidebar:l,rightContent:a,bottomContent:n,children:r})}),(0,f.jsxs)("main",{className:"relative h-full w-full flex-1 overflow-auto transition-width",children:[(0,f.jsx)(g.Z,{children:Z&&!v&&(0,f.jsx)(y,{isDesktopNavCollapsed:h})}),j]})]}),w]})}b.Sidebars=function(e){let{children:t}=e;return(0,f.jsx)(f.Fragment,{children:t})};let w=(0,u.vU)({closeSidebar:{id:"Stage.closeSidebar",defaultMessage:"Close sidebar"},openSidebar:{id:"Stage.openSidebar",defaultMessage:"Open sidebar"}})},37358:function(e,t,s){"use strict";s.d(t,{MP:function(){return S},Nz:function(){return O},Vs:function(){return D},l6:function(){return E}});var r=s(39993),a=s(86944),n=s(77919),i=s(47566),l=s(35968),o=s(22209),c=s(53728),u=s(4396),d=s(29057),p=s(19841),m=s(83737),g=s(22348),x=s(70079),f=s(84692),h=s(68498),j=s(83901);s(87648),s(6716);var y=s(96496),b=s(42797),w=s(35250);let v=["onClick","className"],Z=["onClick"];function k(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function N(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?k(Object(s),!0).forEach(function(t){(0,r.Z)(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):k(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function S(e){let{onClick:t,className:s}=e,r=(0,a.Z)(e,v);return(0,w.jsx)(b.zV,N({onClick:t,className:(0,p.default)(s,"flex-grow overflow-hidden")},r))}function O(e){let{historyDisabled:t,onNewChatButtonClick:s}=e,{isUserUnauthenticated:r,isLoading:a}=(0,o.EH)(),n=(0,y.Qr)();return a?null:r?(0,w.jsx)(M,{className:"mr-3"}):(0,w.jsx)(C,{onClick:()=>{d.A.logNewChatButtonClicked({location:"Mobile header"}),s()},children:t?(0,w.jsx)(i.Ezi,{className:(0,p.default)(n?"icon-lg mx-2.5":"icon-sm","juice:text-token-text-secondary")}):(0,w.jsx)(i.bl$,{className:(0,p.default)(n?"icon-lg mx-2.5":"icon-sm","juice:text-token-text-secondary")})})}function C(e){let{onClick:t}=e,s=(0,a.Z)(e,Z);return(0,w.jsx)("button",N({type:"button",className:"px-3",onClick:t},s))}function M(e){let{className:t}=e,{navigateToAuth:s}=(0,o.EH)();return(0,w.jsx)(n.z,{as:"button",size:"small",color:"primary",className:t,onClick:()=>{let e=s({authType:"signup"});d.A.logSignUpButtonClicked({location:"Mobile Chat Stage Header",provider:e})},children:(0,w.jsx)(f.Z,N({},A.signUpButtonText))})}let P=e=>{let{onClose:t,sidebarOpen:s,children:r}=e;return(0,w.jsx)(c.u.Root,{show:s,as:x.Fragment,children:(0,w.jsxs)(u.V,{as:"div",className:"relative",onClose:t,children:[(0,w.jsx)(c.u.Child,{as:x.Fragment,enter:"transition-opacity ease-linear duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity ease-linear duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,w.jsx)("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/75"})}),(0,w.jsxs)("div",{className:"fixed inset-0 flex",children:[(0,w.jsx)(c.u.Child,{as:x.Fragment,enter:"transition ease-in-out duration-300 transform",enterFrom:"-translate-x-full",enterTo:"translate-x-0",leave:"transition ease-in-out duration-300 transform",leaveFrom:"translate-x-0",leaveTo:"-translate-x-full",children:(0,w.jsxs)(u.V.Panel,{className:"relative flex w-full max-w-xs flex-1 flex-col bg-token-sidebar-surface-primary",children:[(0,w.jsx)(c.u.Child,{as:x.Fragment,enter:"ease-in-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in-out duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,w.jsx)("div",{className:"absolute right-0 top-0 -mr-12 pt-3.5",children:(0,w.jsxs)("button",{type:"button",className:"ml-1 flex h-10 w-10 items-center justify-center text-white focus:outline-none focus:ring-0 focus-visible:outline-white juice:hidden",onClick:t,children:[(0,w.jsx)("span",{className:"sr-only",children:(0,w.jsx)(f.Z,N({},A.closeSidebar))}),(0,w.jsx)(l.v7,{className:"icon-md"})]})})}),r]})}),(0,w.jsx)("div",{className:"w-14 flex-shrink-0"})]})]})})},D=e=>{let{onClickOpenSidebar:t,children:s,sidebar:r,rightContent:a,bottomContent:n}=e,l=(0,j.tN)(e=>e.activeSidebar),o=(0,g.useRouter)().asPath;return(0,x.useEffect)(()=>{"mobile-nav"===l&&j.vm.setActiveSidebar(!1)},[o]),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{className:"sticky top-0 z-10 flex min-h-[40px] items-center justify-center border-b border-token-border-medium bg-token-main-surface-primary pl-1 juice:min-h-[60px] juice:border-transparent md:hidden",children:[(0,w.jsxs)("button",{type:"button",className:"absolute bottom-0 left-0 top-0 inline-flex items-center justify-center rounded-md px-3 hover:text-token-text-primary focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white active:opacity-50",onClick:t,children:[(0,w.jsx)("span",{className:"sr-only",children:(0,w.jsx)(f.Z,N({},A.openSidebar))}),(0,w.jsx)(i.Oqj,{className:"icon-lg juice:mx-2.5 juice:text-token-text-secondary"})]}),s,null!=a&&(0,w.jsx)("div",{className:"absolute bottom-0 right-0 top-0 flex items-center",children:a})]}),n&&(0,w.jsx)("div",{className:"flex w-full items-center justify-center bg-token-main-surface-primary",children:n}),(0,w.jsx)(P,{onClose:()=>{j.vm.setActiveSidebar(!1)},sidebarOpen:"mobile-nav"===l,children:r})]})};function E(e){let{forceOpenDesktopSidebar:t,children:s}=e,r=(0,x.useRef)(null),a=(0,j.xH)()&&!t;return(0,w.jsx)(m.E.div,{className:"flex-shrink-0 overflow-x-hidden bg-token-sidebar-surface-primary",ref:r,initial:!1,animate:{width:a?0:"260px",transition:{duration:.165,ease:"easeOut"}},onAnimationStart:()=>{r.current&&(r.current.style.visibility="visible")},onAnimationComplete:()=>{r.current&&a&&(r.current.style.visibility="hidden")},children:(0,w.jsx)("div",{className:"h-full w-[260px]",children:(0,w.jsx)("div",{className:"flex h-full min-h-0 flex-col",children:s})})})}let A=(0,h.vU)({closeSidebar:{id:"navigation.closeSidebar",defaultMessage:"Close sidebar"},openSidebar:{id:"navigation.openSidebar",defaultMessage:"Open sidebar"},signUpButtonText:{id:"navigation.signUpButtonText",defaultMessage:"Sign up"}})},60571:function(e,t,s){"use strict";s.d(t,{F:function(){return r}});let r=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/},20274:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/groups",function(){return s(40530)}])}},function(e){e.O(0,[4736,3433,6883,2527,2888,9774,179],function(){return e(e.s=20274)}),_N_E=e.O()}]);
//# sourceMappingURL=groups-d9a55943da97b982.js.map