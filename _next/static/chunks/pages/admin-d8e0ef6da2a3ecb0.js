(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6964],{84746:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSP:function(){return ef},default:function(){return ep}});var n,a=r(98601),i=r(68986),s=r(98095),o=r(93951),l=r(31438),c=r(60806),u=r(19841),d=r(89678),f=r.n(d),p=r(11941),m=r.n(p),g=r(34977),h=r(92379),v=r(75325),x=r(49764),y=r(47584),b=r(15478),j=r(11550),w=r(11433),M=r(25805),k=r(89794),E=r(30853),O=r(88667),P=r(38482),_=r.n(P),I=r(36792),C=r(13350),Z=r(2721),U=r(84760),F=r(42420),R=r(56032),S=r(24740);function T(e){let t=(0,x.Z)(),r=(0,F.NL)();return(0,R.D)({mutationFn:r=>{let{inviteId:n,role:a,acceptRequest:i}=r;return Z.Z.patchWorkspaceInvite(e,n,{role:a,acceptRequest:i}).catch(e=>{S.m.danger(t.formatMessage(D.updateInviteError,{error:e.message}))})},onSuccess:()=>{r.invalidateQueries({queryKey:["workspace",e,"invites"]}),r.invalidateQueries({queryKey:["workspace",e,"invites","requests"]}),r.invalidateQueries({queryKey:["workspace",e]})}})}function N(e){let t=(0,x.Z)(),r=(0,F.NL)();return(0,R.D)({mutationFn:r=>{let{email:n}=r;return Z.Z.deleteWorkspaceInvite(e,n).catch(e=>{S.m.danger(t.formatMessage(D.deleteInviteError,{email:n,error:e.message}))})},onSuccess:()=>{r.invalidateQueries({queryKey:["workspace",e,"invites"]}),r.invalidateQueries({queryKey:["workspace",e,"invites","requests"]})}})}let D=(0,y.vU)({updateInviteError:{id:"WorkspaceInvites.updateInviteError",defaultMessage:"Unable to update invite from workspace: {error}"},deleteInviteError:{id:"WorkspaceInvites.deleteInviteError",defaultMessage:"Unable to remove user ({email}) from workspace: {error}"},resendInviteSuccess:{id:"WorkspaceInvites.resendInviteSuccess",defaultMessage:"Sent a new invite to {email}"},resendInviteError:{id:"WorkspaceInvites.resendInviteError",defaultMessage:"Unable to resend invite to ({email}) from workspace: {error}"}});var q=r(60211),L=r(44087),A=r(651);function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach(function(t){(0,a.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let z=_()(()=>r.e(6638).then(r.bind(r,76638)).then(e=>e.DirectorySyncResourceManagedIndication),{loadableGenerated:{webpack:()=>[76638]}});function G(e){var t;let{workspaceId:r,filterInputValue:n}=e,{0:a,1:i}=(0,h.useState)(0),s=(0,L.Gk)(r),o=(0,L.bE)(r),l=s||o,{data:c}=(t=25*a,(0,U.a)({queryKey:["workspace",r,"invites",t,n],queryFn:async()=>await Z.Z.getWorkspaceInvites(r,t,25,n)}));if(void 0===c)return(0,A.jsx)(q.bq,{});let u=c.items,d=Math.ceil((c.total??0)/25);return a>=d&&0!==d&&i(Math.max(d-1,0)),(0,A.jsxs)("div",{children:[(0,A.jsxs)(I.Z.Root,{fixed:!0,size:"normal",children:[(0,A.jsxs)(I.Z.Header,{children:[(0,A.jsx)(I.Z.HeaderCell,{className:"bg-token-main-surface-primary",children:(0,A.jsx)(v.Z,W({},K.email))}),(0,A.jsx)(I.Z.HeaderCell,{className:"w-28 bg-token-main-surface-primary",children:(0,A.jsx)("span",{className:l?"pl-3":"",children:(0,A.jsx)(v.Z,W({},K.role))})}),l&&(0,A.jsx)(I.Z.HeaderCell,{className:"w-16 bg-token-main-surface-primary"})]}),(0,A.jsxs)(I.Z.Body,{children:[u.map(e=>(0,A.jsx)(H,{workspaceId:r,invite:e,isCurrentUserOwner:s,currentUserHasAdminRights:l},e.id)),0===u.length&&(0,A.jsx)(I.Z.Row,{children:(0,A.jsx)(I.Z.Cell,{children:(0,A.jsx)("div",{className:"text-token-text-tertiary",children:(0,A.jsx)(v.Z,W({},K.noResults))})})})]})]}),d>1&&(0,A.jsx)("div",{className:"mt-2 flex justify-center",children:(0,A.jsx)(C.t,{currentPage:a,onChangeIndex:i,length:d})})]})}function H(e){let{workspaceId:t,invite:r,isCurrentUserOwner:n,currentUserHasAdminRights:a}=e,i=(0,L.Ap)(),s=T(t),o=N(t),l=function(e){let t=(0,x.Z)(),r=(0,F.NL)();return(0,R.D)({mutationFn:r=>{let{role:n,email:a}=r;return Z.Z.addWorkspaceUsers(e,[a],n,!0).then(e=>{let{account_invites:r,errored_emails:n}=e;if(n.length>0)throw Error(n[0].error);r.length>0&&S.m.success(t.formatMessage(D.resendInviteSuccess,{email:a}))}).catch(e=>{S.m.danger(t.formatMessage(D.resendInviteError,{email:a,error:e.message}))})},onSuccess:()=>{r.invalidateQueries({queryKey:["workspace",e,"invites"]}),r.invalidateQueries({queryKey:["workspace",e,"invites","requests"]})}})}(t),{value:c}=(0,O.sB)("3999712942");return(0,A.jsxs)(I.Z.Row,{disabled:s.isPending||o.isPending||o.isSuccess||l.isPending,children:[(0,A.jsx)(I.Z.Cell,{children:(0,A.jsxs)("span",{className:"flex flex-grow justify-between",children:[(0,A.jsx)("span",{children:r.email_address}),c&&r.is_scim_managed&&(0,A.jsx)(z,{})]})}),(0,A.jsx)(I.Z.Cell,{children:n?(0,A.jsx)(q.mJ,{currentRole:r.role,onUpdateUserRole:e=>{s.mutate({inviteId:r.id,role:e})}}):i[r.role]}),a&&(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(I.Z.Cell,{children:(0,A.jsx)(J,{onDeleteUser:()=>{o.mutate({email:r.email_address??""})},onResendInvite:()=>{l.mutate({email:r.email_address??"",role:r.role??""})},disabled:r.is_scim_managed})})})]})}function J(e){let{onDeleteUser:t,onResendInvite:r,disabled:n}=e,a=(0,x.Z)();return(0,A.jsx)(A.Fragment,{children:n?(0,A.jsx)(s.Z.Root,{children:(0,A.jsx)(s.Z.Trigger,{disabled:!0,children:(0,A.jsx)(E.u,{sideOffset:0,label:a.formatMessage(k.s.managedViaSCIMTooltip),className:"flex",side:"right",children:(0,A.jsx)(w.nWS,{className:"icon-sm"})})})}):(0,A.jsxs)(s.Z.Root,{children:[(0,A.jsx)(s.Z.Trigger,{children:(0,A.jsx)(w.nWS,{className:"icon-sm"})}),(0,A.jsx)(s.Z.Portal,{children:(0,A.jsxs)(s.Z.Content,{children:[(0,A.jsx)(s.Z.Item,{onClick:r,children:(0,A.jsx)(v.Z,W({},K.resendInvite))}),(0,A.jsx)(s.Z.Item,{onClick:t,children:(0,A.jsx)(v.Z,W({},K.revokeInvite))})]})})]})})}let K=(0,y.vU)({email:{id:"InviteManager.email",defaultMessage:"Email"},role:{id:"InviteManager.role",defaultMessage:"Role"},resendInvite:{id:"InviteManager.resendInvite",defaultMessage:"Resend invite"},revokeInvite:{id:"InviteManager.revokeInvite",defaultMessage:"Revoke invite"},noResults:{id:"InviteManager.noResults",defaultMessage:"No results"}});function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach(function(t){(0,a.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function $(e){var t;let{workspaceId:r,filterInputValue:n}=e,{0:a,1:i}=(0,h.useState)(0),{data:s}=(t=25*a,(0,U.a)({queryKey:["workspace",r,"invites","requests",t,n],queryFn:async()=>await Z.Z.getWorkspaceInviteRequests(r,t,25,n)})),o=(0,L.Gk)(r),l=(0,L.bE)(r),c=(0,x.Z)(),u=o||l;if(void 0===s)return(0,A.jsx)(q.bq,{});let d=s.items,f=Math.ceil(s.total/25);return a>=f&&0!==f&&i(Math.max(f-1,0)),(0,A.jsxs)("div",{children:[(0,A.jsxs)(I.Z.Root,{fixed:!0,size:"normal",children:[(0,A.jsxs)(I.Z.Header,{children:[(0,A.jsx)(I.Z.HeaderCell,{className:"bg-token-main-surface-primary",children:(0,A.jsx)(v.Z,V({},Y.email))}),(0,A.jsx)(I.Z.HeaderCell,{className:"w-28 bg-token-main-surface-primary",children:(0,A.jsx)("span",{className:u?"pl-3":"",children:(0,A.jsx)(v.Z,V({},Y.role))})}),u&&(0,A.jsx)(I.Z.HeaderCell,{className:"w-40 bg-token-main-surface-primary",children:c.formatMessage(Y.actions)})]}),(0,A.jsxs)(I.Z.Body,{children:[d.map(e=>(0,A.jsx)(X,{workspaceId:r,invite:e,isCurrentUserOwner:o,currentUserHasAdminRights:u},e.id)),0===d.length&&(0,A.jsx)(I.Z.Row,{children:(0,A.jsx)(I.Z.Cell,{children:(0,A.jsx)("div",{className:"text-token-text-tertiary",children:(0,A.jsx)(v.Z,V({},Y.noResults))})})})]})]}),f>1&&(0,A.jsx)("div",{className:"mt-2 flex justify-center",children:(0,A.jsx)(C.t,{currentPage:a,onChangeIndex:i,length:f})})]})}function X(e){let{workspaceId:t,invite:r,isCurrentUserOwner:n,currentUserHasAdminRights:a}=e,i=(0,L.Ap)(),s=T(t),o=N(t),l=(0,x.Z)();return(0,A.jsxs)(I.Z.Row,{disabled:s.isPending||o.isPending||o.isPending,children:[(0,A.jsx)(I.Z.Cell,{children:r.email_address}),(0,A.jsx)(I.Z.Cell,{children:n?(0,A.jsx)(q.mJ,{currentRole:r.role,onUpdateUserRole:e=>{s.mutate({inviteId:r.id,role:e})}}):i[r.role]}),a&&(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(I.Z.Cell,{children:(0,A.jsxs)("div",{className:"flex gap-2",children:[(0,A.jsx)(j.z,{onClick:()=>s.mutate({inviteId:r.id,acceptRequest:!0}),children:l.formatMessage(Y.accept)}),(0,A.jsx)(j.z,{color:"secondary",onClick:()=>o.mutate({email:r.email_address}),children:l.formatMessage(Y.reject)})]})})})]})}let Y=(0,y.vU)({email:{id:"RequestInviteManager.email",defaultMessage:"Email"},role:{id:"RequestInviteManager.role",defaultMessage:"Role"},actions:{id:"RequestInviteManager.actions",defaultMessage:"Actions"},accept:{id:"RequestInviteManager.accept",defaultMessage:"Accept"},reject:{id:"RequestInviteManager.reject",defaultMessage:"Reject"},noResults:{id:"RequestInviteManager.noResults",defaultMessage:"No results"}});var ee=r(12310);function et(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function er(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?et(Object(r),!0).forEach(function(t){(0,a.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):et(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var en=((n=en||{}).Members="members",n.Invites="invites",n.Requests="requests",n);function ea(e){let{tab:t}=e;switch(t){case en.Members:return(0,A.jsx)(v.Z,er({},eu.allMembers));case en.Invites:return(0,A.jsx)(v.Z,er({},eu.pendingInvites));case en.Requests:return(0,A.jsx)(v.Z,er({},eu.pendingRequests))}}function ei(e){let{tab:t,filterInputValue:r,workspaceId:n}=e;switch(t){case en.Members:return(0,A.jsx)(q.ZP,{workspaceId:n,filterInputValue:r});case en.Invites:return(0,A.jsx)(G,{workspaceId:n,filterInputValue:r});case en.Requests:return(0,A.jsx)($,{workspaceId:n,filterInputValue:r})}}let es=(0,c.b)(en);function eo(e){let{currentWorkspaceId:t}=e,r=(0,x.Z)(),n=(0,o.t)(),a=(0,q.p5)(t)??"?",c=(0,L.qH)(n),u=n?.isTeam(),d=(0,g.useRouter)(),p="string"==typeof d.query.tab&&es(d.query.tab)?d.query.tab:en.Members,{0:y,1:b}=(0,h.useState)(""),{0:k,1:E}=(0,h.useState)("");(0,h.useEffect)(()=>{E("")},[p]);let O=(0,h.useCallback)(f()(e=>{E(e)},250),[]),P=(0,ee.uo)(),_=!!P?.length;if(!n)return null;let I=n.isAdminOfAccount(),C=n.isOwnerOfAccount(),Z=u||!_?[en.Members,en.Invites]:[en.Members,en.Invites,en.Requests];return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(m(),{children:(0,A.jsx)("title",{children:r.formatMessage(eu.adminBrowserPageTitle)})}),(0,A.jsx)(i.yG,{title:r.formatMessage(eu.adminPageTitle),subtitle:(0,A.jsx)(v.Z,er({values:{totalMembers:a,planName:c}},eu.totalMembers))}),(0,A.jsxs)(i.hb,{children:[(0,A.jsxs)(ec,{children:[(0,A.jsx)("div",{className:"mb-6 flex gap-2",children:Z.map(e=>(0,A.jsx)(el,{onClick:()=>{d.push(null!=e?`/admin?tab=${e}`:"/admin")},isSelected:p===e,children:(0,A.jsx)(ea,{tab:e})},e))}),(0,A.jsxs)("div",{className:"flex gap-2",children:[(0,A.jsxs)("div",{className:"relative",children:[(0,A.jsx)(w.W1M,{className:"icon-sm absolute left-2 top-1/2 -translate-y-1/2 transform text-token-text-tertiary"}),(0,A.jsx)("input",{type:"text",value:y,onChange:e=>{b(e.target.value),O(e.target.value)},placeholder:r.formatMessage(eu.search),className:"w-48 rounded-lg border border-token-border-light bg-token-main-surface-primary pl-8 placeholder:text-token-text-tertiary"})]}),(I||C||u)&&(0,A.jsx)(j.z,{onClick:()=>{l.vm.openModal(l.B.InviteUsersToWorkspace)},icon:w.Vz5,children:(0,A.jsx)(v.Z,er({},eu.inviteMemberButton))}),u?(0,A.jsx)(s.d,{triggerButton:(0,A.jsx)(j.z,{color:"secondary",icon:w.nWS}),children:(0,A.jsx)(s.Z.Item,{onClick:()=>{n&&l.vm.setLeaveWorkspaceData(n)},children:(0,A.jsx)(v.Z,er({},eu.leaveWorkspace))})}):null]})]}),(0,A.jsx)(ei,{workspaceId:t,tab:p,filterInputValue:k})]}),null!=n?(0,A.jsx)(M.Z,{workspace:n}):null]})}function el(e){let{children:t,isSelected:r,onClick:n}=e;return(0,A.jsx)(j.z,{color:"ghost",className:(0,u.default)(r?"bg-token-main-surface-tertiary":"hover:bg-token-main-surface-tertiary"),onClick:n,children:t})}let ec=b.Z.div`mb-4 py-6 flex flex-col gap-4 lg:flex-row md:items-start lg:justify-between`,eu=(0,y.vU)({adminBrowserPageTitle:{id:"adminPage.adminBrowserPageTitle",defaultMessage:"ChatGPT - Member admin"},adminPageTitle:{id:"adminPage.adminPageTitle.0",defaultMessage:"Members"},workspaceNotFound:{id:"adminPage.workspaceNotFound",defaultMessage:"Workspace not found"},totalMembers:{id:"adminPage.totalMembers",defaultMessage:"{planName} \xb7 {totalMembers} {totalMembers, plural, one {member} other {members}}"},backToChat:{id:"adminPage.backToChat",defaultMessage:"Back to chat"},allMembers:{id:"adminPage.allMembers",defaultMessage:"All members"},pendingInvites:{id:"adminPage.pendingInvites",defaultMessage:"Pending invites"},pendingRequests:{id:"adminPage.pendingRequests",defaultMessage:"Pending requests"},analytics:{id:"adminPage.analytics",defaultMessage:"Analytics"},inviteMemberButton:{id:"adminPage.inviteMemberButton",defaultMessage:"Invite member"},leaveWorkspace:{id:"adminPage.leaveWorkspace",defaultMessage:"Leave workspace"},search:{id:"adminPage.search",defaultMessage:"Search"}});function ed(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var ef=!0;function ep(e){return(0,A.jsx)(eo,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ed(Object(r),!0).forEach(function(t){(0,a.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ed(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e))}ep.getLayout=function(e){return(0,A.jsx)(i.ZP,{mobilePageTitle:"Members",children:e})}},42606:function(e,t,r){"use strict";r.d(t,{I:function(){return i},o:function(){return s}});let n=["xlsx","pptx","docx"],a={"application/vnd.google-apps.spreadsheet":"xlsx","application/vnd.google-apps.presentation":"pptx","application/vnd.google-apps.document":"docx"};function i(e){return e?a[e.split(";")[0]]??null:null}function s(e){return e&&n.includes(e)?e:null}},84082:function(e,t,r){"use strict";r.d(t,{$e:function(){return i},EZ:function(){return s},Ql:function(){return a},dO:function(){return n},xC:function(){return o}});let n=10,a=4,i={duration:20,hasCloseButton:!0},s=512,o=536870912},93866:function(e,t,r){"use strict";r.d(t,{AJ:function(){return s},XX:function(){return l},xA:function(){return o}});var n,a,i=r(42606);let s=((n={})[n.None=0]="None",n[n.Multimodal=1]="Multimodal",n[n.Interpreter=2]="Interpreter",n[n.Retrieval=3]="Retrieval",n[n.ContextConnector=4]="ContextConnector",n[n.ProfilePicture=5]="ProfilePicture",n);function o(e){if(e)return{contextConnector:e.context_connector,sourceUrl:e.source_url,syntheticExtension:(0,i.o)(e.synthetic_extension),type:e.type}}let l=((a={}).Uploading="uploading",a.Ready="ready",a)},98628:function(e,t,r){"use strict";r.d(t,{E1:function(){return j},Sj:function(){return M},W7:function(){return v},cT:function(){return y},lU:function(){return b},po:function(){return x},sY:function(){return k}});var n=r(98601),a=r(99333),i=r(2721),s=r(92319),o=r(99976),l=r(61619),c=r(88667),u=r(47584),d=r(88815),f=r(24740),p=r(66114);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let h={duration:20,hasCloseButton:!0};function v(e){return JSON.stringify({file:e.name,modified:e.lastModified,currentTime:new Date().toString()})}function x(e){return new Promise((t,r)=>{let n=new FileReader,a=new Image;n.onload=()=>{a.onload=()=>t(a),a.onerror=e=>r(e),a.src=n.result},n.readAsDataURL(e)})}async function y(e,t,r,n,u,p){let m={ENTRY_CREATED:10,FILE_UPLOADED:60,FILE_PROCESSED:100},v=a.EG.Initial;o.A.logEvent(l.M.uploadFileInitiated,{client:"web",useCase:n.kind,uploadEntry:"local"});let x=p.usesRetrievalIndex??!1,y=x?performance.now():void 0,b=d.N.getState().resetRateLimits;try{let{file_id:s,upload_url:d}=await i.Z.createFile(t.name,t.size,n,!!b);u.onFileCreated(e,s,d),v=a.EG.FileCreated,u.onFileUploadProgress(e,m.ENTRY_CREATED);let M=n.kind===a.Ei.Gizmo?n.gizmoId:void 0,E={client:"web",useCase:n.kind,uploadEntry:"local",fileId:s,fileSize:t.size};o.A.logEvent(l.M.blobStoreUploadStarted,E);let O=await i.Z.uploadFileToAzureStorage(t,d,t=>{u.onFileUploadProgress(e,m.ENTRY_CREATED+(m.FILE_UPLOADED-m.ENTRY_CREATED)*t)});if(u.onFileUploadProgress(e,m.FILE_UPLOADED),201!==O.status&&(o.A.logEvent(l.M.blobStoreUploadError,g(g({},E),{},{error_type_name:`HTTPStatus${O.status}`,error_msg:`HTTP status ${O.status}: ${O.statusText}`,error_stack:""})),w(O,s,x)),o.A.logEvent(l.M.blobStoreUploadCompleted,E),v=a.EG.FileUploaded,!M&&c.m9.checkGate("1371760254")){let r={file_id:s,use_case:n.kind,file_name:t.name},o=await i.Z.processFileUploadStream(r,t=>{u.onFileUploadProgress(e,m.FILE_UPLOADED+(m.FILE_PROCESSED-m.FILE_UPLOADED)*t/100)});v=a.EG.FileProcessed,u.onFileUploaded(e,s,p.imageDimensions,o),x&&(v=a.EG.RetrievalIndexCreated)}else if(await i.Z.processFileUpload(s,{gizmoId:M}),v=a.EG.FileProcessed,x){let t=await j(s,M);t?.status===a.Xf.Skipped&&f.m.danger(r.formatMessage(k.retrievalSkippedFile,{fileName:t.name}),h),u.onFileUploaded(e,s,void 0,{fileTokenSize:t.file_size_tokens}),v=a.EG.RetrievalIndexCreated}else u.onFileUploaded(e,s,p.imageDimensions);null!=y&&i.Z.postRetrievalTiming({e2eLatencyMs:performance.now()-y,type:"file"})}catch(i){M(r,t.name,i);let a="NotInstanceOfError";i instanceof s.gK?a=i.name:i instanceof s.Q0?a=`FatalServerError_type_${i.type??"undefined"}`:i instanceof Error?a=i.name:i instanceof s.vq&&(a=i.name),u.onError(e,"error",a,n,v)}}async function b(e,t,r,n,a){let{width:i,height:s}=await x(t);return y(e,t,r,{kind:n},a,{imageDimensions:{width:i,height:s}})}async function j(e,t){let r=Date.now()+6e4,n=e=>new Promise(t=>setTimeout(t,e)),o=0;for(;Date.now()<r;){let r=await i.Z.getRetrievalStatus(e,t);if(r.status===a.Xf.Success||r.status===a.Xf.Skipped)return r;if(r.status===a.Xf.Failed)throw new s.vq("Context extraction failed",r.error_code);o++,await n(Math.min(1e3,100*o))}throw new s.vq("Retrieval indexing timed out")}async function w(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n="Unknown error";try{n=await e.data}catch(e){}throw r&&i.Z.markFileUploadFailed(t,{error:n}),new s.vq("File upload to blobstore failed","failed_upload_to_blobstore")}function M(e,t,r){let n=(0,p.kr)(e,"default_upload_error",{fileName:t});r instanceof s.vq&&null!=r.code&&(n=(0,p.kr)(e,r.code)),f.m.danger(n,h)}let k=(0,u.vU)({retrievalSkippedFile:{id:"useFilePickerState.retrievalSkippedFile",defaultMessage:'Unable to extract text from "{fileName}"'}})},66114:function(e,t,r){"use strict";r.d(t,{$H:function(){return h},$p:function(){return I},Ad:function(){return T},B:function(){return S},BV:function(){return U},CO:function(){return C},Iy:function(){return m},KL:function(){return P},L8:function(){return g},O6:function(){return y},Tu:function(){return F},VF:function(){return x},Vm:function(){return Z},WI:function(){return R},YN:function(){return j},Z8:function(){return _},Zp:function(){return E},_0:function(){return k},kr:function(){return v},p0:function(){return O},s1:function(){return w},ww:function(){return b},xs:function(){return M}});var n=r(99333),a=r(16757),i=r(2721),s=r(86025),o=r(58695),l=r(82363),c=r(92379),u=r(49764),d=r(47584),f=r(24740),p=r(93866);function m(e){return e.replace("file-service://","")}function g(e){return"file-service://"+e}function h(e){return e.startsWith("file-service://")}function v(e,t,r){switch(t){case"file_zero_bytes":return e.formatMessage(N.fileZeroBytes,r);case"file_too_large":return e.formatMessage(N.fileTooLarge,r);case"over_user_quota":return e.formatMessage(N.overUserQuota,r);case"file_not_found":case"file_expired":return e.formatMessage(N.fileNotFound,r);case"file_timed_out":return e.formatMessage(N.fileTimedOut,r);case"ace_pod_expired":return e.formatMessage(N.codeInterpreterSessionTimeout,r);case"permission_error":return e.formatMessage(N.permissionError,r);case"default_upload_error":case"file_rejected":return e.formatMessage(N.defaultCreateEntryError,r);case"default_download_link_error":return e.formatMessage(N.defaultDownloadLinkError,r);case"file_empty":return e.formatMessage(N.fileEmpty,r);case"too_many_tokens":return e.formatMessage(N.fileTooManyTokens,r);case"file_encrypted":return e.formatMessage(N.fileEncrypted,r);case"file_corrupted":return e.formatMessage(N.fileCorrupted,r);case"failed_upload_to_blobstore":return e.formatMessage(N.failedUploadToBlobStore,r);default:return e.formatMessage(N.unknownError)}}function x(){let e=(0,u.Z)();return(0,c.useCallback)((t,r)=>v(e,t,r),[e])}function y(){let{session:e}=(0,o.kP)(),{isUnauthenticated:t}=(0,s.u)(),r=(0,u.Z)();return async(a,s)=>{if(!t&&null==e)return f.m.danger(r.formatMessage(N.fileDownloadFailed)),!1;try{let e=await i.Z.getFileDownloadLink(a,void 0,t);if(e.status!==n.KF.Success)throw Error("File is not ready to download: "+JSON.stringify(e));let r=e.download_url,o=document.createElement("a");o.href=r,o.download=s,o.click(),window.open(r,"_blank")}catch(e){return f.m.danger(r.formatMessage(N.fileDownloadFailed)),!1}return!0}}function b(e,t){return t?.kind===a.OL.GizmoInteraction||t?.kind===a.OL.GizmoTest?t.gizmo?.product_features:e?.product_features}function j(e,t){let r=b(e,t);return r?.attachments?.type===n.Cd.CodeInterpreter?p.AJ.Interpreter:r?.attachments?.type===n.Cd.Multimodal?p.AJ.Multimodal:r?.attachments?.type===n.Cd.Retrieval?p.AJ.Retrieval:r?.attachments?.type===n.Cd.ContextConnector?p.AJ.ContextConnector:p.AJ.None}function w(e){return({md:"text/markdown",java:"text/x-java",py:"text/x-script.python",c:"text/x-c",cpp:"text/x-c++",h:"text/x-c++",php:"text/x-php",rb:"text/x-ruby",tex:"application/x-latext",ts:"text/x-typescript",cs:"text/x-csharp"})[e.split(".").pop()?.toLowerCase()??""]||""}function M(e,t,r,n,a){if(null==a)return e;let i=w(t);i&&(r=i),n&&(r=function(e){switch(e){case"application/vnd.google-apps.spreadsheet":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"application/vnd.google-apps.document":case"application/vnd.google-apps.presentation":return"text/plain";default:return e}}(r));let{accepted_mime_types:s,can_accept_all_mime_types:o}=a;return null!=s&&0!==s.length&&o?s.includes(r)?e:p.AJ.Interpreter:e}function k(e,t,r){let a=""!==t?t:w(r),i=e?.product_features?.attachments;return null==i?void 0:i.accepted_mime_types?.includes(a)?i.type:i.image_mime_types?.includes(a)?n.Cd.Multimodal:n.Cd.CodeInterpreter}function E(e,t){let r=b(e,t);return r?.attachments?.can_accept_all_mime_types?void 0:r?.attachments?.accepted_mime_types}function O(e,t){let{attachments:r}=b(e,t)??{};return r?.image_mime_types?r.image_mime_types:r?.type==="multimodal"?r.accepted_mime_types??P:[]}let P=["image/png","image/jpeg","image/gif","image/webp"];function _(e){return(0,c.useMemo)(()=>{if(void 0===e)return{};let t={"image/jpeg":[".jpg",".jpeg"],"image/svg+xml":[".svg"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":[".pptx"]};return{accept:e.reduce((e,r)=>(r in t?e[r]=t[r]:r.includes("/")&&(e[r]=[`.${r.split("/")[1]}`]),e),{})}},[e])}function I(e){return e.split(".").pop()?.toLowerCase()}function C(e){let t=I(e);return null!=t&&["jpg","jpeg","png","gif","webp"].includes(t)}function Z(e){let t=I(e);return null!=t&&["xls","xlsx","csv"].includes(t)}function U(e){let t=I(e);return null!=t&&["xls","xlsx"].includes(t)}function F(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"fit";return new Promise((n,a)=>{let i=new FileReader;i.onerror=e=>{l.U.addError(Error("File reading has failed:",{cause:e})),a(Error("Failed to read the file."))},i.onload=i=>{let s=new Image;s.onerror=e=>{l.U.addError(Error("Image loading has failed:",{cause:e})),a(Error("Failed to load the image."))},s.onload=()=>{let i=document.createElement("canvas"),o,c=0,u=0;switch(r){case"fill":case"square":o=t/Math.min(s.width,s.height);break;case"fit":o=t/Math.max(s.width,s.height)}let d=s.width*o,f=s.height*o;"square"===r?(i.width=t,i.height=t,c=(t-d)/2,u=(t-f)/2):(i.width=d,i.height=f);let p=i.getContext("2d");if(null==p){l.U.addError("Canvas context creation failed. Your environment might not fully support HTML5 canvas."),a(Error("Failed to create canvas context."));return}p.drawImage(s,c,u,d,f);let m=e.type||"image/png";i.toBlob(t=>{t?n(new File([t],e.name,{type:m})):(l.U.addError("Blob creation failed. Blob is null."),a(Error("Failed to create blob from image data.")))},m)},null==i.target?(l.U.addError("Event target is null. Failed to load image."),a("Failed to load image.")):s.src=i.target.result},i.readAsDataURL(e)})}function R(e,t){return F(e,t,"square")}function S(e){let t=e.name.split("/")??[];return(t[t.length-1]??"").replace(/[-_]/g," ").split(".")[0]}function T(e,t){return t?e.slice(0,-t.length-1):e}let N=(0,d.vU)({defaultCreateEntryError:{id:"fileUpload.defaultCreateEntryError",defaultMessage:"Unable to upload {fileName}"},defaultDownloadLinkError:{id:"fileUpload.defaultDownloadLinkError",defaultMessage:"Failed to get upload status for {fileName}"},unknownError:{id:"fileUpload.unknownError",defaultMessage:"Unknown error occurred"},fileZeroBytes:{id:"fileUpload.fileZeroBytes",defaultMessage:"File is empty"},fileTooLarge:{id:"fileUpload.fileTooLarge",defaultMessage:"File is too large"},overUserQuota:{id:"fileUpload.overUserQuota",defaultMessage:"User quota exceeded"},fileNotFound:{id:"fileUpload.fileNotFound",defaultMessage:"File not found"},fileTimedOut:{id:"fileUpload.fileTimedOut",defaultMessage:"File upload timed out. Please try again."},fileEmpty:{id:"fileUpload.fileEmpty",defaultMessage:"No text could be extracted from this file."},fileTooManyTokens:{id:"fileUpload.fileTooManyTokens",defaultMessage:"This file contains too much text content. Please try again with a smaller file."},fileEncrypted:{id:"fileUpload.fileEncrypted",defaultMessage:"This file is encrypted/requires a password to access. Please try again with an unencrypted file."},fileCorrupted:{id:"fileUpload.fileCorrupted",defaultMessage:"This file is corrupted. Please ensure the file is not corrupted and try again."},codeInterpreterSessionTimeout:{id:"fileUpload.codeInterpreterSessionTimeout",defaultMessage:"Code interpreter session expired"},permissionError:{id:"fileUpload.permissionError",defaultMessage:"Missing permission to access file"},fileDownloadFailed:{id:"filesModal.fileDownloadFailed",defaultMessage:"File download failed. Please try again."},failedUploadToBlobStore:{id:"fileUpload.failedUploadToBlobStore",defaultMessage:"Failed upload to files.oaiusercontent.com. Please ensure your network settings allow access to this site or contact your network administrator."}})},88815:function(e,t,r){"use strict";r.d(t,{J:function(){return a},N:function(){return i}});var n=r(68810);let a={label:"Auto",value:""},i=(0,n.Ue)(()=>({forceParagen:!1,forceParagenModel:a,forceNulligen:!1,forceIndepthFeedback:!1,forceIndepthFeedbackPrompt:"The user has opted in to provide additional feedback on the previous response. Encourage the user to share feedback that you can store in a memory to better meet their needs in future. Use no more than 3 turns. If at any point the user indicates no longer wanting to provide feedback, return to the original topic.",forceRateLimit:!1,resetRateLimits:!1,showDebugConversationTurns:!1,rebaseSystemMessageContent:null,forceUseSearch:null}))},60806:function(e,t,r){"use strict";function n(e){let t=Object.values(e);return e=>t.includes(e)}r.d(t,{b:function(){return n}})},37300:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return r(84746)}])}},function(e){e.O(0,[4160,4198,5239,4089,9504,5592,3722,1612,2349,4335,2745,2804,4993,9725,8712,1550,3127,8986,2888,9774,179],function(){return e(e.s=37300)}),_N_E=e.O()}]);
//# sourceMappingURL=admin-d8e0ef6da2a3ecb0.js.map