(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6161],{49339:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return D}});var t=s(24312),r=s(91954),c=s(79381),i=s(43446),l=s(77134),n=s(97021),o=s(91092),d=s(79014),u=s(74199),p=s(18542),f=s(61888),m=s(5904),h=s.n(m),x=s(34442),b=s(92379),v=s(88041),j=s(84551),w=s(94695),k=s(15140),g=s(9234),y=s(61082),O=s(28122),N=s(94449),P=s(651);function M(e,a){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,t)}return s}function S(e){for(var a=1;a<arguments.length;a++){var s=null!=arguments[a]?arguments[a]:{};a%2?M(Object(s),!0).forEach(function(a){(0,t.Z)(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):M(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function W(){var e;let a=(0,u.aF)(),s=(0,o.t)(),{data:t}=(0,o.rk)(),{0:m,1:w}=(0,b.useState)(!1),M=(0,x.useRouter)(),W=null==t?void 0:t.accountItems,D=(0,N.p5)(null!==(e=null==s?void 0:s.id)&&void 0!==e?e:""),C=null==s?void 0:s.id,E=null==W?void 0:W.find(e=>e.id===C),_=(null==s?void 0:s.isOwnerOfAccount())&&s.isTeam()&&!s.hasPaidSubscription(),B=(null==s?void 0:s.isOwnerOfAccount())&&s.isTeam()&&s.hasPaidSubscription(),A=null==W?void 0:W.filter(e=>!e.isDeactivated()),T=(0,v.Z)(),Y=(0,b.useCallback)(()=>{w(!0),d.vm.setPurchaseWorkspaceData({minimumSeats:Math.max(D,O.Y6),existingAccount:E}),w(!1)},[D,E]),F=async()=>{w(!0);try{let e=await n.Z.fetchCustomerPortalUrl();M.push(e.url),w(!1)}catch(e){w(!1),i.m.warning(T.formatMessage(Z.unableToOpenStripeDashboard),{hasCloseButton:!0})}};return null!=s&&E&&A?(0,P.jsx)(y.Z,{type:"success",onClose:f.noop,isOpen:null!=s||null!=t,title:(0,P.jsx)("span",{className:"text-lg",children:(0,P.jsx)(j.Z,S({},Z.workspaceDeactivated))}),children:(0,P.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4",children:[(0,P.jsxs)("div",{className:"flex w-full items-center gap-4",children:[(0,P.jsx)(k.B0,{src:E.data.profilePictureUrl,size:"large"}),(0,P.jsx)("div",{className:"font-semibold",children:E.data.name})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("h3",{className:"mb-2 text-base font-bold",children:(0,P.jsx)(j.Z,S({},Z.workspaceDeactivated))}),(0,P.jsxs)("ul",{className:"list-disc pl-5",children:[(0,P.jsx)("li",{className:"mb-1",children:(0,P.jsx)(j.Z,S({},Z.chatHistoryUnavailable))}),(0,P.jsx)("li",{children:(0,P.jsx)(j.Z,S({},Z.otherWorkspacesAvailable))})]})]}),_&&(0,P.jsxs)("div",{className:"flex w-full flex-col",children:[(0,P.jsx)("p",{children:(0,P.jsx)(j.Z,S({},Z.purchaseNewSubscription))}),(0,P.jsx)(c.mH,{className:"m-auto mt-2 w-full",loading:m,onClick:Y,children:(0,P.jsx)(j.Z,S({},Z.purchaseNewSubscriptionButton))})]}),B&&(0,P.jsxs)("div",{className:"flex w-full flex-col",children:[(0,P.jsx)("p",{children:(0,P.jsx)(j.Z,S({},Z.resolveOutstandingInvoice))}),(0,P.jsx)(c.mH,{className:"m-auto mt-2 w-full",loading:m,onClick:F,children:(0,P.jsx)(j.Z,S({},Z.manageSubscriptionButton))})]}),(0,P.jsx)(g.b,{}),(0,P.jsx)("div",{className:"w-full justify-center",children:A.length>0?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("h3",{className:"mb-2 text-base font-bold",children:(0,P.jsx)(j.Z,S({},Z.selectWorkspace))}),(0,P.jsx)(r.b,{data:A})]}):(0,P.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,P.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,P.jsx)("h3",{className:"text-base font-bold",children:(0,P.jsx)(j.Z,S({},Z.createPersonalWorkspace))}),(0,P.jsx)(j.Z,S({},Z.deactivatedWorkspaceReason))]}),(0,P.jsxs)("div",{className:"flex w-full items-center gap-4",children:[a&&a.picture&&(0,P.jsx)(h(),{alt:"Profile",src:a.picture,width:k.EF.medium,height:k.EF.medium,className:"flex items-center justify-center rounded-sm"}),(0,P.jsx)("span",{className:"font-semibold",children:a&&(0,P.jsx)("span",{children:a.name})})]}),(0,P.jsx)("div",{className:"ml-auto",children:(0,P.jsx)(c.mH,{title:T.formatMessage(Z.createPersonalWorkspaceButton),loading:m,onClick:async()=>{w(!0),await n.Z.upsertPersonalWorkspace(),(0,o.eV)(l.b),(0,p.M)()},color:"primary",className:"ml-4"})})]})})]})}):(0,P.jsx)(P.Fragment,{})}let Z=(0,w.vU)({workspaceDeactivated:{id:"deactivatedWorkspaceModal.workspaceDeactivated",defaultMessage:"Your workspace has been deactivated"},workspaceDeactivatedDesc:{id:"deactivatedWorkspaceModal.workspaceDeactivatedDesc",defaultMessage:"Your workspace has been deactivated."},chatHistoryUnavailable:{id:"deactivatedWorkspaceModal.chatHistoryUnavailable",defaultMessage:"Your chat history and settings will not be available."},otherWorkspacesAvailable:{id:"deactivatedWorkspaceModal.otherWorkspacesAvailable",defaultMessage:"You will still be able to use ChatGPT with the other workspaces associated with this email address."},selectWorkspace:{id:"deactivatedWorkspaceModal.selectWorkspace",defaultMessage:"Select a workspace to continue"},createPersonalWorkspace:{id:"deactivatedWorkspaceModal.createPersonalWorkspace",defaultMessage:"Create a personal workspace to continue"},deactivatedWorkspaceReason:{id:"deactivatedWorkspaceModal.deactivatedWorkspaceReason",defaultMessage:"Because your workspace has been deactivated, you need to create a personal workspace to continue using ChatGPT."},profileAlt:{id:"deactivatedWorkspaceModal.profileAlt",defaultMessage:"Profile"},createPersonalWorkspaceButton:{id:"deactivatedWorkspaceModal.createPersonalWorkspaceButton",defaultMessage:"Create a personal workspace"},unableToOpenStripeDashboard:{id:"deactivatedWorkspaceModal.unableToOpenStripeDashboard",defaultMessage:"Unable to open Stripe dashboard"},purchaseNewSubscription:{id:"deactivatedWorkspaceModal.purchaseNewSubscription",defaultMessage:"You can reactivate your workspace by purchasing a new subscription."},purchaseNewSubscriptionButton:{id:"deactivatedWorkspaceModal.purchaseNewSubscriptionButton",defaultMessage:"Purchase subscription"},resolveOutstandingInvoice:{id:"deactivatedWorkspaceModal.resolveOutstandingInvoice",defaultMessage:"You can reactivate your workspace by resolving an outstanding invoice on your subscription."},manageSubscriptionButton:{id:"deactivatedWorkspaceModal.manageSubscriptionButton",defaultMessage:"Manage subscription"}});function D(){let e=(0,u.ec)(u.F_.workspaces),a=(0,o.t)(),s=(0,u.ec)(u.F_.workspaceId),t=e.find(e=>e.id===s),r=(0,x.useRouter)();return((0,b.useEffect)(()=>{null==a||!a.data||t&&t.deactivated||r.push("/")},[a,t,r]),null==a||!a.data||t&&t.deactivated)?(0,P.jsx)(W,{}):(0,P.jsx)("div",{})}},91954:function(e,a,s){"use strict";s.d(a,{Z:function(){return P},b:function(){return N}});var t=s(24312),r=s(95312),c=s(91092),i=s(74199),l=s(31399),n=s(18542),o=s(19841),d=s(91530),u=s.n(d),p=s(92379),f=s(84551),m=s(94695),h=s(15140),x=s(44194),b=s(66187),v=s(29757),j=s(61082),w=s(77940),k=s(651);function g(e,a){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,t)}return s}function y(e){for(var a=1;a<arguments.length;a++){var s=null!=arguments[a]?arguments[a]:{};a%2?g(Object(s),!0).forEach(function(a){(0,t.Z)(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):g(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function O(e){let{workspace:a}=e,s=(0,i.aF)(),t=(0,c.t)(),d=(null==t?void 0:t.id)===a.id,{0:f,1:m}=(0,p.useState)(!1),j=(0,l.cQ)(),g=(0,p.useCallback)(async()=>{m(!0),(0,c.nq)(a.id),x._P.enableHistory({useLocalStorage:!j}),(0,n.M)()},[j,a.id]),y=(0,w.GA)(a),O=(0,k.jsx)("div",{className:"flex items-center justify-center",children:(0,k.jsx)(h.B0,{src:a.data.profilePictureUrl,size:"medium"})});if(a.structure===r.CZ.PERSONAL){if(!s)return null;O=(0,k.jsx)("div",{className:"flex items-center justify-center",children:(0,k.jsx)(h.Yt,{user:s,customStyle:!0,size:36,className:"h-9 w-9 overflow-hidden rounded-full"})})}return(0,k.jsxs)(d?"div":"button",{onClick:d?u():g,className:(0,o.default)({"flex w-full items-center gap-2 rounded-lg border border-token-border-medium bg-token-main-surface-primary p-4 hover:bg-token-main-surface-secondary":!0,"bg-token-sidebar-surface-secondary":d}),children:[(0,k.jsxs)("div",{className:"flex w-full items-center gap-4",children:[O,(0,k.jsx)("div",{className:"inline align-top font-semibold",children:y})]}),(0,k.jsx)("div",{className:"flex h-full items-center p-1",children:f?(0,k.jsx)(b.Z,{}):d?(0,k.jsx)(v.rE2,{className:"icon-lg"}):(0,k.jsx)(v.ob9,{className:"icon-lg my-auto"})})]})}function N(e){let{data:a}=e,s=a.map(e=>(0,k.jsx)(O,{workspace:e},e.id));return(0,k.jsx)("div",{className:"flex w-full flex-col gap-2",children:s})}function P(){var e;let a=(0,w.my)(),s=(0,i.aF)(),t=null!==(e=null==s?void 0:s.email)&&void 0!==e?e:"";if(!a||0===a.length)return null;let c=a.filter(e=>e.structure===r.CZ.WORKSPACE);return(0,k.jsx)(j.Z,{isOpen:!0,onClose:u(),type:"success",size:"normal",title:(0,k.jsxs)("div",{className:"flex flex-col",children:[(0,k.jsx)(f.Z,y({},M.workspaceSwitcherTitle)),(0,k.jsx)("span",{className:"mt-0.5 text-sm text-token-text-secondary",children:t})]}),children:(0,k.jsxs)("div",{className:"flex w-full flex-col items-center justify-between",children:[(0,k.jsx)(N,{data:a}),(0,k.jsx)("span",{className:"mt-4 text-sm text-token-text-secondary",children:(0,k.jsx)(f.Z,y(y({},M.workspaceSwitcherDisclaimer),{},{values:{workspaces:(0,k.jsx)("span",{className:"contents font-bold",children:(0,k.jsx)(m.yX,{value:c.map(e=>e.data.name)})}),numWorkspaces:c.length}}))})]})})}let M=(0,m.vU)({workspaceSwitcherTitle:{id:"workspaceSwitcher.title",defaultMessage:"Select a workspace"},workspaceSwitcherDisclaimer:{id:"workspaceSwitcher.disclaimer",defaultMessage:"You've been added to the {workspaces} {numWorkspaces, plural, one {workspace} other {workspaces}}. You can switch between workspaces at any time."}})},75734:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/workspace/deactivated",function(){return s(49339)}])}},function(e){e.O(0,[4736,2888,9774,179],function(){return e(e.s=75734)}),_N_E=e.O()}]);
//# sourceMappingURL=deactivated-fae1cebb9365ce3a.js.map