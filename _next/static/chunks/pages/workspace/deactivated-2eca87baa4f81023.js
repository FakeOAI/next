(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6161],{37162:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return Z}});var t=s(98601),c=s(9901),r=s(59144),i=s(50454),n=s(24740),l=s(16351),o=s(2721),d=s(93951),u=s(31438),p=s(31498),f=s(69769),h=s(91530),m=s.n(h),x=s(34977),b=s(92379),j=s(75172),v=s(62984),w=s(68306),k=s(59725),g=s(32378),y=s(24434),O=s(60211),N=s(651);function S(e,a){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,t)}return s}function W(e){for(var a=1;a<arguments.length;a++){var s=null!=arguments[a]?arguments[a]:{};a%2?S(Object(s),!0).forEach(function(a){(0,t.Z)(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):S(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function M(){var e;let a=(0,p.aF)(),s=(0,d.t)(),{data:t}=(0,d.rk)(),{0:h,1:w}=(0,b.useState)(!1),S=(0,x.useRouter)(),M=null==t?void 0:t.accountItems,Z=(0,O.p5)(null!==(e=null==s?void 0:s.id)&&void 0!==e?e:""),C=null==s?void 0:s.id,D=null==M?void 0:M.find(e=>e.id===C),A=(null==s?void 0:s.isOwnerOfAccount())&&s.isTeam()&&!s.hasPaidSubscription(),E=(null==s?void 0:s.isOwnerOfAccount())&&s.isTeam()&&s.hasPaidSubscription(),T=null==M?void 0:M.filter(e=>!e.isDeactivated()),_=(0,j.Z)(),B=(0,b.useCallback)(()=>{w(!0),u.vm.setPurchaseWorkspaceData({minimumSeats:Math.max(Z,i.Y6),existingAccount:D}),w(!1)},[Z,D]),F=async()=>{w(!0);try{let e=await o.Z.fetchCustomerPortalUrl();S.push(e.url),w(!1)}catch(e){w(!1),n.m.warning(_.formatMessage(P.unableToOpenStripeDashboard),{hasCloseButton:!0})}};return null!=s&&D&&T?(0,N.jsx)(y.Z,{type:"success",onClose:m(),isOpen:null!=s||null!=t,title:(0,N.jsx)("span",{className:"text-lg",children:(0,N.jsx)(v.Z,W({},P.workspaceDeactivated))}),children:(0,N.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4",children:[(0,N.jsxs)("div",{className:"flex w-full items-center gap-4",children:[(0,N.jsx)(k.B0,{src:D.data.profilePictureUrl,size:"large"}),(0,N.jsx)("div",{className:"font-semibold",children:D.data.name})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("h3",{className:"mb-2 text-base font-bold",children:(0,N.jsx)(v.Z,W({},P.workspaceDeactivated))}),(0,N.jsxs)("ul",{className:"list-disc pl-5",children:[(0,N.jsx)("li",{className:"mb-1",children:(0,N.jsx)(v.Z,W({},P.chatHistoryUnavailable))}),(0,N.jsx)("li",{children:(0,N.jsx)(v.Z,W({},P.otherWorkspacesAvailable))})]})]}),A&&(0,N.jsxs)("div",{className:"flex w-full flex-col",children:[(0,N.jsx)("p",{children:(0,N.jsx)(v.Z,W({},P.purchaseNewSubscription))}),(0,N.jsx)(r.m,{className:"m-auto mt-2 w-full",loading:h,onClick:B,children:(0,N.jsx)(v.Z,W({},P.purchaseNewSubscriptionButton))})]}),E&&(0,N.jsxs)("div",{className:"flex w-full flex-col",children:[(0,N.jsx)("p",{children:(0,N.jsx)(v.Z,W({},P.resolveOutstandingInvoice))}),(0,N.jsx)(r.m,{className:"m-auto mt-2 w-full",loading:h,onClick:F,children:(0,N.jsx)(v.Z,W({},P.manageSubscriptionButton))})]}),(0,N.jsx)(g.b,{}),(0,N.jsx)("div",{className:"w-full justify-center",children:T.length>0?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("h3",{className:"mb-2 text-base font-bold",children:(0,N.jsx)(v.Z,W({},P.selectWorkspace))}),(0,N.jsx)(c.b,{data:T})]}):(0,N.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,N.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,N.jsx)("h3",{className:"text-base font-bold",children:(0,N.jsx)(v.Z,W({},P.createPersonalWorkspace))}),(0,N.jsx)(v.Z,W({},P.deactivatedWorkspaceReason))]}),(0,N.jsxs)("div",{className:"flex w-full items-center gap-4",children:[a&&a.picture&&(0,N.jsx)("img",{alt:"Profile",src:a.picture,width:k.EF.workspaceMedium,height:k.EF.workspaceMedium,className:"flex items-center justify-center rounded-sm"}),(0,N.jsx)("span",{className:"font-semibold",children:a&&(0,N.jsx)("span",{children:a.name})})]}),(0,N.jsx)("div",{className:"ml-auto",children:(0,N.jsx)(r.m,{title:_.formatMessage(P.createPersonalWorkspaceButton),loading:h,onClick:async()=>{w(!0),await o.Z.upsertPersonalWorkspace(),(0,d.eV)(l.bC),(0,f.M)()},color:"primary",className:"ml-4"})})]})})]})}):(0,N.jsx)(N.Fragment,{})}let P=(0,w.vU)({workspaceDeactivated:{id:"deactivatedWorkspaceModal.workspaceDeactivated",defaultMessage:"Your workspace has been deactivated"},workspaceDeactivatedDesc:{id:"deactivatedWorkspaceModal.workspaceDeactivatedDesc",defaultMessage:"Your workspace has been deactivated."},chatHistoryUnavailable:{id:"deactivatedWorkspaceModal.chatHistoryUnavailable",defaultMessage:"Your chat history and settings will not be available."},otherWorkspacesAvailable:{id:"deactivatedWorkspaceModal.otherWorkspacesAvailable",defaultMessage:"You will still be able to use ChatGPT with the other workspaces associated with this email address."},selectWorkspace:{id:"deactivatedWorkspaceModal.selectWorkspace",defaultMessage:"Select a workspace to continue"},createPersonalWorkspace:{id:"deactivatedWorkspaceModal.createPersonalWorkspace",defaultMessage:"Create a personal workspace to continue"},deactivatedWorkspaceReason:{id:"deactivatedWorkspaceModal.deactivatedWorkspaceReason",defaultMessage:"Because your workspace has been deactivated, you need to create a personal workspace to continue using ChatGPT."},profileAlt:{id:"deactivatedWorkspaceModal.profileAlt",defaultMessage:"Profile"},createPersonalWorkspaceButton:{id:"deactivatedWorkspaceModal.createPersonalWorkspaceButton",defaultMessage:"Create a personal workspace"},unableToOpenStripeDashboard:{id:"deactivatedWorkspaceModal.unableToOpenStripeDashboard",defaultMessage:"Unable to open Stripe dashboard"},purchaseNewSubscription:{id:"deactivatedWorkspaceModal.purchaseNewSubscription",defaultMessage:"You can reactivate your workspace by purchasing a new subscription."},purchaseNewSubscriptionButton:{id:"deactivatedWorkspaceModal.purchaseNewSubscriptionButton",defaultMessage:"Purchase subscription"},resolveOutstandingInvoice:{id:"deactivatedWorkspaceModal.resolveOutstandingInvoice",defaultMessage:"You can reactivate your workspace by resolving an outstanding invoice on your subscription."},manageSubscriptionButton:{id:"deactivatedWorkspaceModal.manageSubscriptionButton",defaultMessage:"Manage subscription"}});function Z(){let e=(0,p.ec)(p.F_.workspaces),a=(0,d.t)(),s=(0,p.ec)(p.F_.workspaceId),t=e.find(e=>e.id===s),c=(0,x.useRouter)();return((0,b.useEffect)(()=>{null==a||!a.data||t&&t.deactivated||c.push("/")},[a,t,c]),null==a||!a.data||t&&t.deactivated)?(0,N.jsx)(M,{}):(0,N.jsx)("div",{})}},32378:function(e,a,s){"use strict";s.d(a,{b:function(){return c}});var t=s(651);function c(){return(0,t.jsx)("hr",{className:"w-full border-token-border-xheavy"})}},9901:function(e,a,s){"use strict";s.d(a,{Z:function(){return M},b:function(){return W}});var t=s(98601),c=s(99333),r=s(93951),i=s(82821),n=s(31498),l=s(69769),o=s(42420),d=s(19841),u=s(91530),p=s.n(u),f=s(92379),h=s(75172),m=s(62984),x=s(68306),b=s(59725),j=s(30478),v=s(97537),w=s(28146),k=s(24434),g=s(44087),y=s(651);function O(e,a){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,t)}return s}function N(e){for(var a=1;a<arguments.length;a++){var s=null!=arguments[a]?arguments[a]:{};a%2?O(Object(s),!0).forEach(function(a){(0,t.Z)(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):O(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function S(e){let{workspace:a}=e,s=(0,o.NL)(),t=(0,n.aF)(),u=(0,r.t)(),x=(null==u?void 0:u.id)===a.id,{0:k,1:O}=(0,f.useState)(!1),S=(0,i.b)(),W=(0,h.Z)(),M=(0,f.useCallback)(async()=>{O(!0);let{willRedirect:e}=(0,r.nq)(s,a.id,S,W);j._P.enableHistory(),e||(0,l.M)()},[s,a.id,S,W]),Z=(0,g.GA)(a),C=(0,y.jsx)("div",{className:"flex items-center justify-center",children:(0,y.jsx)(b.B0,{src:a.data.profilePictureUrl,size:"medium"})});if(a.structure===c.CZ.PERSONAL){if(!t)return null;C=(0,y.jsx)("div",{className:"flex items-center justify-center",children:(0,y.jsx)(b.Yt,{user:t,customStyle:!0,size:b.EF.workspaceMedium,className:"h-9 w-9 overflow-hidden rounded-full"})})}return(0,y.jsxs)(x?"div":"button",{onClick:x?p():M,className:(0,d.default)({"flex w-full items-center gap-2 rounded-lg border border-token-border-medium bg-token-main-surface-primary p-4 hover:bg-token-main-surface-secondary":!0,"bg-token-sidebar-surface-secondary":x,"opacity-50":!a.canAccessWithCurrentSession}),children:[(0,y.jsxs)("div",{className:"flex w-full items-center gap-4",children:[C,(0,y.jsxs)("div",{className:"inline text-left align-top font-semibold",children:[(0,y.jsx)("p",{children:Z}),!a.canAccessWithCurrentSession&&(0,y.jsx)("p",{className:"leading-4",children:(0,y.jsx)("small",{className:"text-token-text-secondary",children:(0,y.jsx)(m.Z,N({},a.ssoConnectionName?P.authenticateWithSSOToAccessWorkspace:P.authenticateWithoutSSOToAccessWorkspace))})})]})]}),(0,y.jsx)("div",{className:"flex h-full items-center p-1",children:k?(0,y.jsx)(v.Z,{}):x?(0,y.jsx)(w.rE2,{className:"icon-lg"}):(0,y.jsx)(w.ob9,{className:"icon-lg my-auto"})})]})}function W(e){let{data:a}=e,s=a.map(e=>(0,y.jsx)(S,{workspace:e},e.id));return(0,y.jsx)("div",{className:"flex w-full flex-col gap-2",children:s})}function M(){var e;let a=(0,g.my)(),s=(0,n.aF)(),t=null!==(e=null==s?void 0:s.email)&&void 0!==e?e:"";if(!a||0===a.length)return null;let r=a.filter(e=>e.structure===c.CZ.WORKSPACE);return(0,y.jsx)(k.Z,{isOpen:!0,onClose:p(),type:"success",size:"normal",title:(0,y.jsxs)("div",{className:"flex flex-col",children:[(0,y.jsx)(m.Z,N({},P.workspaceSwitcherTitle)),(0,y.jsx)("span",{className:"mt-0.5 text-sm text-token-text-secondary",children:t})]}),children:(0,y.jsxs)("div",{className:"flex w-full flex-col items-center justify-between",children:[(0,y.jsx)(W,{data:a}),(0,y.jsx)("span",{className:"mt-4 text-sm text-token-text-secondary",children:(0,y.jsx)(m.Z,N(N({},P.workspaceSwitcherDisclaimer),{},{values:{workspaces:(0,y.jsx)("span",{className:"contents font-bold",children:(0,y.jsx)(x.yX,{value:r.map(e=>e.data.name)})}),numWorkspaces:r.length}}))})]})})}let P=(0,x.vU)({workspaceSwitcherTitle:{id:"workspaceSwitcher.title",defaultMessage:"Select a workspace"},workspaceSwitcherDisclaimer:{id:"workspaceSwitcher.disclaimer",defaultMessage:"You've been added to the {workspaces} {numWorkspaces, plural, one {workspace} other {workspaces}}. You can switch between workspaces at any time."},authenticateWithSSOToAccessWorkspace:{id:"CV7pdM",defaultMessage:"Authenticate with SSO to access this workspace"},authenticateWithoutSSOToAccessWorkspace:{id:"zfCWFh",defaultMessage:"Authenticate without SSO to access this workspace"}})},29985:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/workspace/deactivated",function(){return s(37162)}])}},function(e){e.O(0,[9237,2342,4198,4089,1133,3223,2745,5162,1749,9113,9725,7261,2888,9774,179],function(){return e(e.s=29985)}),_N_E=e.O()}]);
//# sourceMappingURL=deactivated-2eca87baa4f81023.js.map