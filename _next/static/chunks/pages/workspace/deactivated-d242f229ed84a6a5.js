(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6161],{51516:function(e,t,a){"use strict";function s(e,t){if(t.length<e)throw TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}a.d(t,{Z:function(){return s}})},17224:function(e,t,a){"use strict";function s(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}a.d(t,{Z:function(){return s}})},50327:function(e,t,a){"use strict";a.d(t,{qk:function(){return n},vh:function(){return r},yJ:function(){return s}});var s=6e4,r=36e5,n=1e3},70933:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var s=a(50327),r=a(51516),n=a(17224);function i(e,t){(0,r.Z)(1,arguments);var a,i,h,v=(0,n.Z)(null!==(a=null==t?void 0:t.additionalDigits)&&void 0!==a?a:2);if(2!==v&&1!==v&&0!==v)throw RangeError("additionalDigits must be 0, 1 or 2");if(!("string"==typeof e||"[object String]"===Object.prototype.toString.call(e)))return new Date(NaN);var x=function(e){var t,a={},s=e.split(c.dateTimeDelimiter);if(s.length>2)return a;if(/:/.test(s[0])?t=s[0]:(a.date=s[0],t=s[1],c.timeZoneDelimiter.test(a.date)&&(a.date=e.split(c.timeZoneDelimiter)[0],t=e.substr(a.date.length,e.length))),t){var r=c.timezone.exec(t);r?(a.time=t.replace(r[1],""),a.timezone=r[1]):a.time=t}return a}(e);if(x.date){var b=function(e,t){var a=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),s=e.match(a);if(!s)return{year:NaN,restDateString:""};var r=s[1]?parseInt(s[1]):null,n=s[2]?parseInt(s[2]):null;return{year:null===n?r:100*n,restDateString:e.slice((s[1]||s[2]).length)}}(x.date,v);i=function(e,t){if(null===t)return new Date(NaN);var a,s,r=e.match(l);if(!r)return new Date(NaN);var n=!!r[4],i=d(r[1]),c=d(r[2])-1,o=d(r[3]),u=d(r[4]),p=d(r[5])-1;if(n)return u>=1&&u<=53&&p>=0&&p<=6?((a=new Date(0)).setUTCFullYear(t,0,4),s=a.getUTCDay()||7,a.setUTCDate(a.getUTCDate()+((u-1)*7+p+1-s)),a):new Date(NaN);var h=new Date(0);return c>=0&&c<=11&&o>=1&&o<=(f[c]||(m(t)?29:28))&&i>=1&&i<=(m(t)?366:365)?(h.setUTCFullYear(t,c,Math.max(i,o)),h):new Date(NaN)}(b.restDateString,b.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);var w=i.getTime(),g=0;if(x.time&&isNaN(g=function(e){var t=e.match(o);if(!t)return NaN;var a=p(t[1]),r=p(t[2]),n=p(t[3]);return(24===a?0===r&&0===n:n>=0&&n<60&&r>=0&&r<60&&a>=0&&a<25)?a*s.vh+r*s.yJ+1e3*n:NaN}(x.time)))return new Date(NaN);if(x.timezone){if(isNaN(h=function(e){if("Z"===e)return 0;var t=e.match(u);if(!t)return 0;var a="+"===t[1]?-1:1,r=parseInt(t[2]),n=t[3]&&parseInt(t[3])||0;return n>=0&&n<=59?a*(r*s.vh+n*s.yJ):NaN}(x.timezone)))return new Date(NaN)}else{var j=new Date(w+g),k=new Date(0);return k.setFullYear(j.getUTCFullYear(),j.getUTCMonth(),j.getUTCDate()),k.setHours(j.getUTCHours(),j.getUTCMinutes(),j.getUTCSeconds(),j.getUTCMilliseconds()),k}return new Date(w+g+h)}var c={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},l=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,o=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,u=/^([+-])(\d{2})(?::?(\d{2}))?$/;function d(e){return e?parseInt(e):1}function p(e){return e&&parseFloat(e.replace(",","."))||0}var f=[31,null,31,30,31,30,31,31,30,31,30,31];function m(e){return e%400==0||e%4==0&&e%100!=0}},50626:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Z}});var s=a(94521),r=a(80159),n=a(8649),i=a(94982),c=a(38923),l=a(93223),o=a(4702),u=a(55371),d=a(24040),p=a(45779),f=a(61888),m=a(66879),h=a.n(m),v=a(43128),x=a(92379),b=a(26123),w=a(72256),g=a(25940),j=a(27084),k=a(84281),N=a(49217),y=a(58171),O=a(98890),D=a(651);function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(Object(a),!0).forEach(function(t){(0,s.Z)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function S(){var e;let t=(0,d.aF)(),a=(0,o.t)(),{data:s}=(0,o.rk)(),{0:m,1:g}=(0,x.useState)(!1),M=(0,v.useRouter)(),S=null==s?void 0:s.accountItems,Z=(0,O.p5)(null!==(e=null==a?void 0:a.id)&&void 0!==e?e:""),C=null==a?void 0:a.id,T=null==S?void 0:S.find(e=>e.id===C),U=(null==a?void 0:a.isOwnerOfAccount())&&a.isTeam()&&!a.hasPaidSubscription(),E=(null==a?void 0:a.isOwnerOfAccount())&&a.isTeam()&&a.hasPaidSubscription(),_=null==S?void 0:S.filter(e=>!e.isDeactivated()),F=(0,b.Z)(),Y=(0,x.useCallback)(()=>{g(!0),u.vm.setPurchaseWorkspaceData({minimumSeats:Math.max(Z,y.Y6),existingAccount:T}),g(!1)},[Z,T]),B=async()=>{g(!0);try{let e=await l.Z.fetchCustomerPortalUrl();M.push(e.url),g(!1)}catch(e){g(!1),i.m.warning(F.formatMessage(W.unableToOpenStripeDashboard),{hasCloseButton:!0})}};return null!=a&&T&&_?(0,D.jsx)(N.Z,{type:"success",onClose:f.noop,isOpen:null!=a||null!=s,title:(0,D.jsx)("span",{className:"text-lg",children:(0,D.jsx)(w.Z,P({},W.workspaceDeactivated))}),children:(0,D.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4",children:[(0,D.jsxs)("div",{className:"flex w-full items-center gap-4",children:[(0,D.jsx)(j.B0,{src:T.data.profilePictureUrl,size:"large"}),(0,D.jsx)("div",{className:"font-semibold",children:T.data.name})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("h3",{className:"mb-2 text-base font-bold",children:(0,D.jsx)(w.Z,P({},W.workspaceDeactivated))}),(0,D.jsxs)("ul",{className:"list-disc pl-5",children:[(0,D.jsx)("li",{className:"mb-1",children:(0,D.jsx)(w.Z,P({},W.chatHistoryUnavailable))}),(0,D.jsx)("li",{children:(0,D.jsx)(w.Z,P({},W.otherWorkspacesAvailable))})]})]}),U&&(0,D.jsxs)("div",{className:"flex w-full flex-col",children:[(0,D.jsx)("p",{children:(0,D.jsx)(w.Z,P({},W.purchaseNewSubscription))}),(0,D.jsx)(n.m,{className:"m-auto mt-2 w-full",loading:m,onClick:Y,children:(0,D.jsx)(w.Z,P({},W.purchaseNewSubscriptionButton))})]}),E&&(0,D.jsxs)("div",{className:"flex w-full flex-col",children:[(0,D.jsx)("p",{children:(0,D.jsx)(w.Z,P({},W.resolveOutstandingInvoice))}),(0,D.jsx)(n.m,{className:"m-auto mt-2 w-full",loading:m,onClick:B,children:(0,D.jsx)(w.Z,P({},W.manageSubscriptionButton))})]}),(0,D.jsx)(k.b,{}),(0,D.jsx)("div",{className:"w-full justify-center",children:_.length>0?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("h3",{className:"mb-2 text-base font-bold",children:(0,D.jsx)(w.Z,P({},W.selectWorkspace))}),(0,D.jsx)(r.b,{data:_})]}):(0,D.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,D.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,D.jsx)("h3",{className:"text-base font-bold",children:(0,D.jsx)(w.Z,P({},W.createPersonalWorkspace))}),(0,D.jsx)(w.Z,P({},W.deactivatedWorkspaceReason))]}),(0,D.jsxs)("div",{className:"flex w-full items-center gap-4",children:[t&&t.picture&&(0,D.jsx)(h(),{alt:"Profile",src:t.picture,width:j.EF.medium,height:j.EF.medium,className:"flex items-center justify-center rounded-sm"}),(0,D.jsx)("span",{className:"font-semibold",children:t&&(0,D.jsx)("span",{children:t.name})})]}),(0,D.jsx)("div",{className:"ml-auto",children:(0,D.jsx)(n.m,{title:F.formatMessage(W.createPersonalWorkspaceButton),loading:m,onClick:async()=>{g(!0),await l.Z.upsertPersonalWorkspace(),(0,o.eV)(c.b),(0,p.M)()},color:"primary",className:"ml-4"})})]})})]})}):(0,D.jsx)(D.Fragment,{})}let W=(0,g.vU)({workspaceDeactivated:{id:"deactivatedWorkspaceModal.workspaceDeactivated",defaultMessage:"Your workspace has been deactivated"},workspaceDeactivatedDesc:{id:"deactivatedWorkspaceModal.workspaceDeactivatedDesc",defaultMessage:"Your workspace has been deactivated."},chatHistoryUnavailable:{id:"deactivatedWorkspaceModal.chatHistoryUnavailable",defaultMessage:"Your chat history and settings will not be available."},otherWorkspacesAvailable:{id:"deactivatedWorkspaceModal.otherWorkspacesAvailable",defaultMessage:"You will still be able to use ChatGPT with the other workspaces associated with this email address."},selectWorkspace:{id:"deactivatedWorkspaceModal.selectWorkspace",defaultMessage:"Select a workspace to continue"},createPersonalWorkspace:{id:"deactivatedWorkspaceModal.createPersonalWorkspace",defaultMessage:"Create a personal workspace to continue"},deactivatedWorkspaceReason:{id:"deactivatedWorkspaceModal.deactivatedWorkspaceReason",defaultMessage:"Because your workspace has been deactivated, you need to create a personal workspace to continue using ChatGPT."},profileAlt:{id:"deactivatedWorkspaceModal.profileAlt",defaultMessage:"Profile"},createPersonalWorkspaceButton:{id:"deactivatedWorkspaceModal.createPersonalWorkspaceButton",defaultMessage:"Create a personal workspace"},unableToOpenStripeDashboard:{id:"deactivatedWorkspaceModal.unableToOpenStripeDashboard",defaultMessage:"Unable to open Stripe dashboard"},purchaseNewSubscription:{id:"deactivatedWorkspaceModal.purchaseNewSubscription",defaultMessage:"You can reactivate your workspace by purchasing a new subscription."},purchaseNewSubscriptionButton:{id:"deactivatedWorkspaceModal.purchaseNewSubscriptionButton",defaultMessage:"Purchase subscription"},resolveOutstandingInvoice:{id:"deactivatedWorkspaceModal.resolveOutstandingInvoice",defaultMessage:"You can reactivate your workspace by resolving an outstanding invoice on your subscription."},manageSubscriptionButton:{id:"deactivatedWorkspaceModal.manageSubscriptionButton",defaultMessage:"Manage subscription"}});function Z(){let e=(0,d.ec)(d.F_.workspaces),t=(0,o.t)(),a=(0,d.ec)(d.F_.workspaceId),s=e.find(e=>e.id===a),r=(0,v.useRouter)();return((0,x.useEffect)(()=>{null==t||!t.data||s&&s.deactivated||r.push("/")},[t,s,r]),null==t||!t.data||s&&s.deactivated)?(0,D.jsx)(S,{}):(0,D.jsx)("div",{})}},80159:function(e,t,a){"use strict";a.d(t,{Z:function(){return D},b:function(){return O}});var s=a(94521),r=a(21904),n=a(4702),i=a(24040),c=a(45779),l=a(35226),o=a(19841),u=a(91530),d=a.n(u),p=a(92379),f=a(72256),m=a(25940),h=a(27084),v=a(80179),x=a(50684),b=a(92426),w=a(49217),g=a(55775),j=a(651);function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach(function(t){(0,s.Z)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function y(e){let{workspace:t}=e,a=(0,l.NL)(),s=(0,i.aF)(),u=(0,n.t)(),f=(null==u?void 0:u.id)===t.id,{0:m,1:w}=(0,p.useState)(!1),k=(0,p.useCallback)(async()=>{w(!0),(0,n.nq)(a,t.id),v._P.enableHistory(),(0,c.M)()},[a,t.id]),N=(0,g.GA)(t),y=(0,j.jsx)("div",{className:"flex items-center justify-center",children:(0,j.jsx)(h.B0,{src:t.data.profilePictureUrl,size:"medium"})});if(t.structure===r.CZ.PERSONAL){if(!s)return null;y=(0,j.jsx)("div",{className:"flex items-center justify-center",children:(0,j.jsx)(h.Yt,{user:s,customStyle:!0,size:36,className:"h-9 w-9 overflow-hidden rounded-full"})})}return(0,j.jsxs)(f?"div":"button",{onClick:f?d():k,className:(0,o.default)({"flex w-full items-center gap-2 rounded-lg border border-token-border-medium bg-token-main-surface-primary p-4 hover:bg-token-main-surface-secondary":!0,"bg-token-sidebar-surface-secondary":f}),children:[(0,j.jsxs)("div",{className:"flex w-full items-center gap-4",children:[y,(0,j.jsx)("div",{className:"inline align-top font-semibold",children:N})]}),(0,j.jsx)("div",{className:"flex h-full items-center p-1",children:m?(0,j.jsx)(x.Z,{}):f?(0,j.jsx)(b.rE2,{className:"icon-lg"}):(0,j.jsx)(b.ob9,{className:"icon-lg my-auto"})})]})}function O(e){let{data:t}=e,a=t.map(e=>(0,j.jsx)(y,{workspace:e},e.id));return(0,j.jsx)("div",{className:"flex w-full flex-col gap-2",children:a})}function D(){var e;let t=(0,g.my)(),a=(0,i.aF)(),s=null!==(e=null==a?void 0:a.email)&&void 0!==e?e:"";if(!t||0===t.length)return null;let n=t.filter(e=>e.structure===r.CZ.WORKSPACE);return(0,j.jsx)(w.Z,{isOpen:!0,onClose:d(),type:"success",size:"normal",title:(0,j.jsxs)("div",{className:"flex flex-col",children:[(0,j.jsx)(f.Z,N({},M.workspaceSwitcherTitle)),(0,j.jsx)("span",{className:"mt-0.5 text-sm text-token-text-secondary",children:s})]}),children:(0,j.jsxs)("div",{className:"flex w-full flex-col items-center justify-between",children:[(0,j.jsx)(O,{data:t}),(0,j.jsx)("span",{className:"mt-4 text-sm text-token-text-secondary",children:(0,j.jsx)(f.Z,N(N({},M.workspaceSwitcherDisclaimer),{},{values:{workspaces:(0,j.jsx)("span",{className:"contents font-bold",children:(0,j.jsx)(m.yX,{value:n.map(e=>e.data.name)})}),numWorkspaces:n.length}}))})]})})}let M=(0,m.vU)({workspaceSwitcherTitle:{id:"workspaceSwitcher.title",defaultMessage:"Select a workspace"},workspaceSwitcherDisclaimer:{id:"workspaceSwitcher.disclaimer",defaultMessage:"You've been added to the {workspaces} {numWorkspaces, plural, one {workspace} other {workspaces}}. You can switch between workspaces at any time."}})},62800:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/workspace/deactivated",function(){return a(50626)}])}},function(e){e.O(0,[7349,6271,210,8890,2888,9774,179],function(){return e(e.s=62800)}),_N_E=e.O()}]);
//# sourceMappingURL=deactivated-d242f229ed84a6a5.js.map