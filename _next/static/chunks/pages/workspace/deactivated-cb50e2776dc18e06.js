(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6161],{76707:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return U}});var s=t(72438),r=t(52513),n=t(83054),l=t(65733),i=t(21208),o=t(71727),c=t(88324),d=t(81147),u=t(36285),m=t(95566),p=t(61888),f=t(93906),x=t.n(f),h=t(16215),j=t(70079),v=t(9063),b=t(84692),g=t(68498),k=t(19475),w=t(12983),M=t(3806),y=t(59477),N=t(65130),O=t(35250);function Z(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);a&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,s)}return t}function P(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?Z(Object(t),!0).forEach(function(a){(0,s.Z)(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Z(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}function C(){var e;let a=(0,u.aF)(),t=(0,c.t)(),{data:s}=(0,c.rk)(),{0:f,1:g}=(0,j.useState)(!1),Z=(0,h.useRouter)(),C=null==s?void 0:s.accountItems,U=(0,N.p5)(null!==(e=null==t?void 0:t.id)&&void 0!==e?e:""),S=null==t?void 0:t.id,W=null==C?void 0:C.find(e=>e.id===S),R=(null==t?void 0:t.isOwnerOfAccount())&&t.isTeam()&&!t.hasPaidSubscription(),A=(null==t?void 0:t.isOwnerOfAccount())&&t.isTeam()&&t.hasPaidSubscription(),B=null==C?void 0:C.filter(e=>!e.isDeactivated()),E=(0,v.Z)(),T=(0,j.useCallback)(()=>{g(!0),d.vm.setPurchaseWorkspaceData({minimumSeats:Math.max(U,y.Y6),existingAccount:W}),g(!1)},[U,W]),_=async()=>{g(!0);try{let e=await o.Z.fetchCustomerPortalUrl();Z.push(e.url),g(!1)}catch(e){g(!1),l.m.warning(E.formatMessage(D.unableToOpenStripeDashboard),{hasCloseButton:!0})}};return null!=t&&W&&B?(0,O.jsx)(M.Z,{type:"success",onClose:p.noop,isOpen:null!=t||null!=s,title:(0,O.jsx)("span",{className:"text-lg",children:(0,O.jsx)(b.Z,P({},D.workspaceDeactivated))}),children:(0,O.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4",children:[(0,O.jsxs)("div",{className:"flex w-full items-center gap-4",children:[(0,O.jsx)(k.B0,{src:W.data.profilePictureUrl,size:"large"}),(0,O.jsx)("div",{className:"font-medium",children:W.data.name})]}),(0,O.jsxs)("div",{children:[(0,O.jsx)("h3",{className:"mb-2 text-base font-bold",children:(0,O.jsx)(b.Z,P({},D.workspaceDeactivated))}),(0,O.jsxs)("ul",{className:"list-disc pl-5",children:[(0,O.jsx)("li",{className:"mb-1",children:(0,O.jsx)(b.Z,P({},D.chatHistoryUnavailable))}),(0,O.jsx)("li",{children:(0,O.jsx)(b.Z,P({},D.otherWorkspacesAvailable))})]})]}),R&&(0,O.jsxs)("div",{className:"flex w-full flex-col",children:[(0,O.jsx)("p",{children:(0,O.jsx)(b.Z,P({},D.purchaseNewSubscription))}),(0,O.jsx)(n.mH,{className:"m-auto mt-2 w-full",loading:f,onClick:T,children:(0,O.jsx)(b.Z,P({},D.purchaseNewSubscriptionButton))})]}),A&&(0,O.jsxs)("div",{className:"flex w-full flex-col",children:[(0,O.jsx)("p",{children:(0,O.jsx)(b.Z,P({},D.resolveOutstandingInvoice))}),(0,O.jsx)(n.mH,{className:"m-auto mt-2 w-full",loading:f,onClick:_,children:(0,O.jsx)(b.Z,P({},D.manageSubscriptionButton))})]}),(0,O.jsx)(w.b,{}),(0,O.jsx)("div",{className:"w-full justify-center",children:B.length>0?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("h3",{className:"mb-2 text-base font-bold",children:(0,O.jsx)(b.Z,P({},D.selectWorkspace))}),(0,O.jsx)(r.b,{data:B})]}):(0,O.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,O.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,O.jsx)("h3",{className:"text-base font-bold",children:(0,O.jsx)(b.Z,P({},D.createPersonalWorkspace))}),(0,O.jsx)(b.Z,P({},D.deactivatedWorkspaceReason))]}),(0,O.jsxs)("div",{className:"flex w-full items-center gap-4",children:[a&&a.picture&&(0,O.jsx)(x(),{alt:"Profile",src:a.picture,width:k.EF.medium,height:k.EF.medium,className:"flex items-center justify-center rounded-sm"}),(0,O.jsx)("span",{className:"font-medium",children:a&&(0,O.jsx)("span",{children:a.name})})]}),(0,O.jsx)("div",{className:"ml-auto",children:(0,O.jsx)(n.mH,{title:E.formatMessage(D.createPersonalWorkspaceButton),loading:f,onClick:async()=>{g(!0),await o.Z.upsertPersonalWorkspace(),(0,c.eV)(i.b),(0,m.M)()},color:"primary",className:"ml-4"})})]})})]})}):(0,O.jsx)(O.Fragment,{})}let D=(0,g.vU)({workspaceDeactivated:{id:"deactivatedWorkspaceModal.workspaceDeactivated",defaultMessage:"Your workspace has been deactivated"},workspaceDeactivatedDesc:{id:"deactivatedWorkspaceModal.workspaceDeactivatedDesc",defaultMessage:"Your workspace has been deactivated."},chatHistoryUnavailable:{id:"deactivatedWorkspaceModal.chatHistoryUnavailable",defaultMessage:"Your chat history and settings will not be available."},otherWorkspacesAvailable:{id:"deactivatedWorkspaceModal.otherWorkspacesAvailable",defaultMessage:"You will still be able to use ChatGPT with the other workspaces associated with this email address."},selectWorkspace:{id:"deactivatedWorkspaceModal.selectWorkspace",defaultMessage:"Select a workspace to continue"},createPersonalWorkspace:{id:"deactivatedWorkspaceModal.createPersonalWorkspace",defaultMessage:"Create a personal workspace to continue"},deactivatedWorkspaceReason:{id:"deactivatedWorkspaceModal.deactivatedWorkspaceReason",defaultMessage:"Because your workspace has been deactivated, you need to create a personal workspace to continue using ChatGPT."},profileAlt:{id:"deactivatedWorkspaceModal.profileAlt",defaultMessage:"Profile"},createPersonalWorkspaceButton:{id:"deactivatedWorkspaceModal.createPersonalWorkspaceButton",defaultMessage:"Create a personal workspace"},unableToOpenStripeDashboard:{id:"deactivatedWorkspaceModal.unableToOpenStripeDashboard",defaultMessage:"Unable to open Stripe dashboard"},purchaseNewSubscription:{id:"deactivatedWorkspaceModal.purchaseNewSubscription",defaultMessage:"You can reactivate your workspace by purchasing a new subscription."},purchaseNewSubscriptionButton:{id:"deactivatedWorkspaceModal.purchaseNewSubscriptionButton",defaultMessage:"Purchase subscription"},resolveOutstandingInvoice:{id:"deactivatedWorkspaceModal.resolveOutstandingInvoice",defaultMessage:"You can reactivate your workspace by resolving an outstanding invoice on your subscription."},manageSubscriptionButton:{id:"deactivatedWorkspaceModal.manageSubscriptionButton",defaultMessage:"Manage subscription"}});function U(){let e=(0,u.ec)(u.F_.workspaces),a=(0,c.t)(),t=(0,u.ec)(u.F_.workspaceId),s=e.find(e=>e.id===t),r=(0,h.useRouter)();return((0,j.useEffect)(()=>{null==a||!a.data||s&&s.deactivated||r.push("/")},[a,s,r]),null==a||!a.data||s&&s.deactivated)?(0,O.jsx)(C,{}):(0,O.jsx)("div",{})}},65130:function(e,a,t){"use strict";t.d(a,{ZP:function(){return R},bq:function(){return I},mJ:function(){return E},p5:function(){return _}});var s=t(72438),r=t(58554),n=t(59311),l=t(71727),i=t(81147),o=t(36285),c=t(25494),d=t(82473),u=t(19841),m=t(76781),p=t(70079),f=t(37659),x=t(84692),h=t(9063),j=t(68498),v=t(78103),b=t(44344),g=t(31731),k=t(83054),w=t(75967),M=t(49165),y=t(3806),N=t(65733),O=t(40646),Z=t(93944),P=t(35250);function C(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);a&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,s)}return t}function D(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?C(Object(t),!0).forEach(function(a){(0,s.Z)(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):C(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}let U=(0,v.ZP)(()=>({confirmModalUserData:null})),S=e=>{U.setState({confirmModalUserData:e})},W=()=>{U.setState({confirmModalUserData:null})};function R(e){let{workspaceId:a,filterInputValue:t}=e,{0:s,1:r}=(0,p.useState)(0),n=(0,o.aF)(),u=null==n?void 0:n.id,m=(0,Z.Gk)(a),h=(0,Z.bE)(a),j=m||h,v=(0,c.D)({mutationFn:e=>{let{userId:a,workspaceId:t,value:s}=e;return l.Z.updateWorkspaceUserRole(t,a,s).catch(e=>{N.m.danger("Unable to update user (".concat(a,") role: ").concat(e.message))})}}),g=function(e){let a=(0,d.NL)();return(0,c.D)({mutationFn:a=>{let{userId:t}=a;return l.Z.removeWorkspaceUser(e,t).catch(e=>{N.m.danger("Unable to remove user (".concat(t,") from workspace: ").concat(e.message))})},onSuccess:()=>{a.invalidateQueries({queryKey:["workspace",e]})}})}(a),{data:k}=(0,O.Z)(a,s*O.I,t),w=(0,p.useCallback)(e=>{S(e)},[]),y=(0,p.useCallback)(()=>{var e;let a=null===(e=U.getState().confirmModalUserData)||void 0===e?void 0:e.id;void 0!==a&&g.mutate({userId:a}),W()},[g]),C=(0,p.useCallback)((e,t)=>{v.mutate({userId:e,value:t,workspaceId:a})},[v,a]);if(void 0===k)return(0,P.jsx)(I,{});let R=k.items,E=Math.ceil(k.total/O.I);return s>=E&&0!==E&&r(Math.max(E-1,0)),(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(M.Z.Root,{fixed:!0,size:"normal",children:[(0,P.jsxs)(M.Z.Header,{children:[(0,P.jsx)(M.Z.HeaderCell,{className:"bg-token-main-surface-primary",children:(0,P.jsx)(x.Z,D({},F.name))}),(0,P.jsx)(M.Z.HeaderCell,{className:"bg-token-main-surface-primary",children:(0,P.jsx)(x.Z,D({},F.email))}),(0,P.jsx)(M.Z.HeaderCell,{className:"w-28 bg-token-main-surface-primary",children:(0,P.jsx)("span",{className:m?"pl-3":"",children:(0,P.jsx)(x.Z,D({},F.role))})}),j&&(0,P.jsx)(M.Z.HeaderCell,{className:"w-16 bg-token-main-surface-primary"})]}),(0,P.jsxs)(M.Z.Body,{children:[R.map(e=>(0,P.jsx)(B,{isCurrentUser:void 0!==u&&e.id===u,userId:e.id,name:e.name,role:e.role,currentUserHasAdminRights:j,isCurrentUserOwner:m,email:e.email,onRemoveUserClick:()=>w({id:e.id,name:e.name,email:e.email,created_time:e.created_time}),onUpdateUserRole:C},e.id)),0===R.length&&(0,P.jsx)(M.Z.Row,{children:(0,P.jsx)(M.Z.Cell,{children:(0,P.jsx)("div",{className:"text-token-text-tertiary",children:(0,P.jsx)(x.Z,D({},F.noResults))})})})]})]}),(0,P.jsxs)("div",{className:"relative mb-8 mt-4 min-h-[20px]",children:[m&&(0,P.jsxs)("button",{onClick:()=>i.vm.openModal(i.B.InviteUsersToWorkspace),className:"flex items-center gap-2 text-token-text-secondary hover:text-token-text-primary",children:[(0,P.jsx)(f.OvN,{className:"icon-sm"}),(0,P.jsx)(x.Z,D({},F.inviteMemberButton))]}),E>1&&(0,P.jsx)("div",{className:"absolute left-1/2 top-1/2 flex -translate-x-1/2 -translate-y-1/2 justify-center",children:(0,P.jsx)(b.t,{currentPage:s,onChangeIndex:r,length:E})})]}),(0,P.jsx)(A,{onDeleteConfirm:y})]})}function A(e){var a;let{onDeleteConfirm:t}=e,s=(0,h.Z)(),r=U(e=>null!==e.confirmModalUserData),n=U(e=>null===e.confirmModalUserData?{}:{userId:e.confirmModalUserData.id,email:e.confirmModalUserData.email,name:e.confirmModalUserData.name,dateAdded:(0,m.Z)(e.confirmModalUserData.created_time)});return(0,P.jsx)(y.Z,{isOpen:r,title:s.formatMessage(F.removeMemberModalTitle),onClose:()=>W(),type:"success",primaryButton:(0,P.jsx)(k.ZP.Button,{title:s.formatMessage(F.removeMemberModalConfirm),color:"danger",onClick:t}),secondaryButton:(0,P.jsx)(k.ZP.Button,{title:s.formatMessage(F.removeMemberModalCancel),color:"secondary",onClick:()=>W()}),children:(0,P.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[null!==(a=n.name)&&void 0!==a?a:n.email,(0,P.jsx)("div",{className:"text-token-text-tertiary",children:(0,P.jsx)(x.Z,D(D({},F.dateJoined),{},{values:{dateAdded:s.formatDate(n.dateAdded,{year:"numeric",month:"long",day:"numeric"})}}))})]})})}function B(e){let{userId:a,name:t,email:s,role:r,currentUserHasAdminRights:n,isCurrentUserOwner:l,isCurrentUser:i,onRemoveUserClick:o,onUpdateUserRole:c}=e,d=(0,Z.Ap)()[r];return(0,P.jsxs)(M.Z.Row,{children:[(0,P.jsx)(M.Z.Cell,{children:(0,P.jsxs)("span",{className:(0,u.default)("flex items-center gap-2",(null===t||""===t)&&"text-token-text-tertiary"),children:[(0,P.jsx)("span",{children:null!=t?t:(0,P.jsx)(x.Z,D({},F.missingName))}),(0,P.jsx)("span",{children:i&&(0,P.jsx)(x.Z,D({},F.youSpecifier))})]})}),(0,P.jsx)(M.Z.Cell,{children:s}),(0,P.jsx)(M.Z.Cell,{children:l?(0,P.jsx)(E,{currentRole:r,onUpdateUserRole:e=>{c(a,e)},disabled:i}):d}),n&&(0,P.jsx)(M.Z.Cell,{children:(0,P.jsx)(T,{userId:a,onRemoveUserClick:o,disabled:i})})]})}function E(e){let{currentRole:a,onUpdateUserRole:t,disabled:s=!1}=e,n=(0,Z.Ap)();return(0,P.jsx)(w.g,{disabled:s,defaultValue:a,onValueChange:e=>{t(e)},options:[{label:n[r.r3.STANDARD],value:r.r3.STANDARD},{label:n[r.r3.ADMIN],value:r.r3.ADMIN},{label:n[r.r3.OWNER],value:r.r3.OWNER}]})}function T(e){let{disabled:a,onRemoveUserClick:t,userId:s}=e;return a?null:(0,P.jsxs)(g.Z.Root,{children:[(0,P.jsx)(g.Z.Trigger,{className:"-my-2",children:(0,P.jsx)(f.K9M,{className:"icon-sm"})}),(0,P.jsx)(g.Z.Portal,{children:(0,P.jsx)(g.Z.Content,{children:(0,P.jsx)(g.Z.Item,{onClick:()=>{t(s)},children:(0,P.jsx)(x.Z,D({},F.removeMemberModalTitle))})})})]})}function _(e){var a;let{data:t}=(0,O.Z)(e);return null!==(a=null==t?void 0:t.total)&&void 0!==a?a:0}function I(){return(0,P.jsx)("div",{className:"flex w-full items-center justify-center",children:(0,P.jsx)(n.Z,{})})}let F=(0,j.vU)({name:{id:"UserManager.name",defaultMessage:"Name"},email:{id:"UserManager.email",defaultMessage:"Email"},role:{id:"UserManager.role",defaultMessage:"Role"},missingName:{id:"UserManager.missingName",defaultMessage:"No name provided"},youSpecifier:{id:"UserManager.youSpecifier",defaultMessage:"(You)"},removeUser:{id:"UserManager.removeUser",defaultMessage:"Remove user from workspace"},removeMemberModalTitle:{id:"UserManager.removeMemberModalTitle",defaultMessage:"Remove member"},removeMemberModalConfirm:{id:"UserManager.removeMemberModalConfirm",defaultMessage:"Delete"},removeMemberModalCancel:{id:"UserManager.removeMemberModalCancel",defaultMessage:"Cancel"},dateJoined:{id:"UserManager.dateJoined",defaultMessage:"Joined workspace on {dateAdded}"},inviteMemberButton:{id:"UserManager.inviteMemberButton",defaultMessage:"Invite member"},noResults:{id:"UserManager.noResults",defaultMessage:"No results"}})},52513:function(e,a,t){"use strict";t.d(a,{Z:function(){return Z},b:function(){return O}});var s=t(72438),r=t(58554),n=t(88324),l=t(36285),i=t(70062),o=t(95566),c=t(8421),d=t(19841),u=t(91530),m=t.n(u),p=t(70079),f=t(37659),x=t(84692),h=t(68498),j=t(19475),v=t(40392),b=t(59311),g=t(3806),k=t(93944),w=t(35250);function M(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);a&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,s)}return t}function y(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?M(Object(t),!0).forEach(function(a){(0,s.Z)(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):M(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}function N(e){let{workspace:a}=e,t=(0,l.aF)(),s=(0,n.t)(),u=(null==s?void 0:s.id)===a.id,{0:x,1:h}=(0,p.useState)(!1),g=(0,i.cQ)(),M=(0,p.useCallback)(async()=>{h(!0),(0,n.nq)(a.id),v._P.enableHistory({useLocalStorage:!g}),(0,o.M)()},[g,a.id]),y=(0,k.GA)(a),N=(0,w.jsx)("div",{className:"flex items-center justify-center",children:(0,w.jsx)(j.B0,{src:a.data.profilePictureUrl,size:"medium"})});if(a.structure===r.CZ.PERSONAL){if(!t)return null;N=(0,w.jsx)("div",{className:"flex items-center justify-center",children:(0,w.jsx)(j.Yt,{user:t,customStyle:!0,size:36,className:"h-9 w-9 overflow-hidden rounded-full"})})}return(0,w.jsxs)(u?"div":"button",{onClick:u?m():M,className:(0,d.default)({"flex w-full items-center gap-2 rounded-lg border border-token-border-medium bg-token-main-surface-primary p-4 hover:bg-token-main-surface-secondary":!0,"bg-token-sidebar-surface-secondary":u}),children:[(0,w.jsxs)("div",{className:"flex w-full items-center gap-4",children:[N,(0,w.jsx)("div",{className:"inline align-top font-medium",children:y})]}),(0,w.jsx)("div",{className:"flex h-full items-center p-1",children:x?(0,w.jsx)(b.Z,{}):u?(0,w.jsx)(c.Z,{className:"icon-lg"}):(0,w.jsx)(f.Tfp,{className:"icon-lg my-auto"})})]})}function O(e){let{data:a}=e,t=a.map(e=>(0,w.jsx)(N,{workspace:e},e.id));return(0,w.jsx)("div",{className:"flex w-full flex-col gap-2",children:t})}function Z(){var e;let a=(0,k.my)(),t=(0,l.aF)(),s=null!==(e=null==t?void 0:t.email)&&void 0!==e?e:"";if(!a||0===a.length)return null;let n=a.filter(e=>e.structure===r.CZ.WORKSPACE);return(0,w.jsx)(g.Z,{isOpen:!0,onClose:m(),type:"success",size:"normal",title:(0,w.jsxs)("div",{className:"flex flex-col",children:[(0,w.jsx)(x.Z,y({},P.workspaceSwitcherTitle)),(0,w.jsx)("span",{className:"mt-0.5 text-sm text-token-text-secondary",children:s})]}),children:(0,w.jsxs)("div",{className:"flex w-full flex-col items-center justify-between",children:[(0,w.jsx)(O,{data:a}),(0,w.jsx)("span",{className:"mt-4 text-sm text-token-text-secondary",children:(0,w.jsx)(x.Z,y(y({},P.workspaceSwitcherDisclaimer),{},{values:{workspaces:(0,w.jsx)("span",{className:"contents font-bold",children:(0,w.jsx)(h.yX,{value:n.map(e=>e.data.name)})}),numWorkspaces:n.length}}))})]})})}let P=(0,h.vU)({workspaceSwitcherTitle:{id:"workspaceSwitcher.title",defaultMessage:"Select a workspace"},workspaceSwitcherDisclaimer:{id:"workspaceSwitcher.disclaimer",defaultMessage:"You've been added to the {workspaces} {numWorkspaces, plural, one {workspace} other {workspaces}}. You can switch between workspaces at any time."}})},40646:function(e,a,t){"use strict";t.d(a,{I:function(){return n},Z:function(){return l}});var s=t(71727),r=t(61236);let n=25;function l(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;return(0,r.a)({queryKey:["workspace",e,a,t],queryFn:async()=>await s.Z.getWorkspaceUsers(e,a,l,t),placeholderData:i,enabled:!!e})}},80208:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/workspace/deactivated",function(){return t(76707)}])}},function(e){e.O(0,[4736,2888,9774,179],function(){return e(e.s=80208)}),_N_E=e.O()}]);
//# sourceMappingURL=deactivated-cb50e2776dc18e06.js.map