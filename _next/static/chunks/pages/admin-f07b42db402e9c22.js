(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6964],{53772:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSP:function(){return eo},default:function(){return ec}});var s,a,n=r(72438),i=r(31605),l=r(25927),o=r(31731),c=r(88324),d=r(81147),u=r(99715),m=r(51991),f=r(19841),g=r(61888),p=r(83474),v=r.n(p),j=r(16215),x=r(70079),h=r(37659),b=r(84692),M=r(9063),y=r(68498),k=r(21389),Z=r(63081),w=r(72118),O=r(49165),I=r(44344),P=r(71727),C=r(61236),N=r(82473),R=r(25494),U=r(65733);function D(e){let t=(0,M.Z)(),r=(0,N.NL)();return(0,R.D)({mutationFn:r=>{let{inviteId:s,role:a,acceptRequest:n}=r;return P.Z.patchWorkspaceInvite(e,s,{role:a,acceptRequest:n}).catch(e=>{U.m.danger(t.formatMessage(S.updateInviteError,{error:e.message}))})},onSuccess:()=>{r.invalidateQueries({queryKey:["workspace",e,"invites"]}),r.invalidateQueries({queryKey:["workspace",e,"invites","requests"]}),r.invalidateQueries({queryKey:["workspace",e]})}})}function q(e){let t=(0,M.Z)(),r=(0,N.NL)();return(0,R.D)({mutationFn:r=>{let{email:s}=r;return P.Z.deleteWorkspaceInvite(e,s).catch(e=>{U.m.danger(t.formatMessage(S.deleteInviteError,{email:s,error:e.message}))})},onSuccess:()=>{r.invalidateQueries({queryKey:["workspace",e,"invites"]}),r.invalidateQueries({queryKey:["workspace",e,"invites","requests"]})}})}let S=(0,y.vU)({updateInviteError:{id:"WorkspaceInvites.updateInviteError",defaultMessage:"Unable to update invite from workspace: {error}"},deleteInviteError:{id:"WorkspaceInvites.deleteInviteError",defaultMessage:"Unable to remove user ({email}) from workspace: {error}"},resendInviteSuccess:{id:"WorkspaceInvites.resendInviteSuccess",defaultMessage:"Sent a new invite to {email}"},resendInviteError:{id:"WorkspaceInvites.resendInviteError",defaultMessage:"Unable to resend invite to ({email}) from workspace: {error}"}});var T=r(65130),E=r(93944),W=r(35250);function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function A(e){var t;let{workspaceId:r,filterInputValue:s}=e,{0:a,1:n}=(0,x.useState)(0),i=(0,E.Gk)(r),l=(0,E.bE)(r),o=i||l,{data:c}=(t=25*a,(0,C.a)({queryKey:["workspace",r,"invites",t,s],queryFn:async()=>await P.Z.getWorkspaceInvites(r,t,25,s)}));if(void 0===c)return(0,W.jsx)(T.bq,{});let d=c.items,u=Math.ceil(c.total/25);return a>=u&&0!==u&&n(Math.max(u-1,0)),(0,W.jsxs)("div",{children:[(0,W.jsxs)(O.Z.Root,{fixed:!0,size:"normal",children:[(0,W.jsxs)(O.Z.Header,{children:[(0,W.jsx)(O.Z.HeaderCell,{className:"bg-token-main-surface-primary",children:(0,W.jsx)(b.Z,_({},K.email))}),(0,W.jsx)(O.Z.HeaderCell,{className:"w-28 bg-token-main-surface-primary",children:(0,W.jsx)("span",{className:o?"pl-3":"",children:(0,W.jsx)(b.Z,_({},K.role))})}),o&&(0,W.jsx)(O.Z.HeaderCell,{className:"w-16 bg-token-main-surface-primary"})]}),(0,W.jsxs)(O.Z.Body,{children:[d.map(e=>(0,W.jsx)(H,{workspaceId:r,invite:e,isCurrentUserOwner:i,currentUserHasAdminRights:o},e.id)),0===d.length&&(0,W.jsx)(O.Z.Row,{children:(0,W.jsx)(O.Z.Cell,{children:(0,W.jsx)("div",{className:"text-token-text-tertiary",children:(0,W.jsx)(b.Z,_({},K.noResults))})})})]})]}),u>1&&(0,W.jsx)("div",{className:"mt-2 flex justify-center",children:(0,W.jsx)(I.t,{currentPage:a,onChangeIndex:n,length:u})})]})}function H(e){let{workspaceId:t,invite:r,isCurrentUserOwner:s,currentUserHasAdminRights:a}=e,n=(0,E.Ap)(),i=D(t),l=q(t),o=function(e){let t=(0,M.Z)(),r=(0,N.NL)();return(0,R.D)({mutationFn:r=>{let{role:s,email:a}=r;return P.Z.addWorkspaceUsers(e,[a],s,!0).then(e=>{let{account_invites:r,errored_emails:s}=e;if(s.length>0)throw Error(s[0].error);r.length>0&&U.m.success(t.formatMessage(S.resendInviteSuccess,{email:a}))}).catch(e=>{U.m.danger(t.formatMessage(S.resendInviteError,{email:a,error:e.message}))})},onSuccess:()=>{r.invalidateQueries({queryKey:["workspace",e,"invites"]}),r.invalidateQueries({queryKey:["workspace",e,"invites","requests"]})}})}(t);return(0,W.jsxs)(O.Z.Row,{disabled:i.isPending||l.isPending||l.isSuccess||o.isPending,children:[(0,W.jsx)(O.Z.Cell,{children:r.email_address}),(0,W.jsx)(O.Z.Cell,{children:s?(0,W.jsx)(T.mJ,{currentRole:r.role,onUpdateUserRole:e=>{i.mutate({inviteId:r.id,role:e})}}):n[r.role]}),a&&(0,W.jsx)(W.Fragment,{children:(0,W.jsx)(O.Z.Cell,{children:(0,W.jsx)(F,{onDeleteUser:()=>{l.mutate({email:r.email_address})},onResendInvite:()=>{o.mutate({email:r.email_address,role:r.role})}})})})]})}function F(e){let{onDeleteUser:t,onResendInvite:r}=e;return(0,W.jsxs)(o.Z.Root,{children:[(0,W.jsx)(o.Z.Trigger,{children:(0,W.jsx)(h.K9M,{className:"icon-sm"})}),(0,W.jsx)(o.Z.Portal,{children:(0,W.jsxs)(o.Z.Content,{children:[(0,W.jsx)(o.Z.Item,{onClick:r,children:(0,W.jsx)(b.Z,_({},K.resendInvite))}),(0,W.jsx)(o.Z.Item,{onClick:t,children:(0,W.jsx)(b.Z,_({},K.revokeInvite))})]})})]})}let K=(0,y.vU)({email:{id:"InviteManager.email",defaultMessage:"Email"},role:{id:"InviteManager.role",defaultMessage:"Role"},resendInvite:{id:"InviteManager.resendInvite",defaultMessage:"Resend invite"},revokeInvite:{id:"InviteManager.revokeInvite",defaultMessage:"Revoke invite"},noResults:{id:"InviteManager.noResults",defaultMessage:"No results"}});function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function L(e){var t;let{workspaceId:r,filterInputValue:s}=e,{0:a,1:n}=(0,x.useState)(0),{data:i}=(t=25*a,(0,C.a)({queryKey:["workspace",r,"invites","requests",t,s],queryFn:async()=>await P.Z.getWorkspaceInviteRequests(r,t,25,s)})),l=(0,E.Gk)(r),o=(0,E.bE)(r),c=(0,M.Z)(),d=l||o;if(void 0===i)return(0,W.jsx)(T.bq,{});let u=i.items,m=Math.ceil(i.total/25);return a>=m&&0!==m&&n(Math.max(m-1,0)),(0,W.jsxs)("div",{children:[(0,W.jsxs)(O.Z.Root,{fixed:!0,size:"normal",children:[(0,W.jsxs)(O.Z.Header,{children:[(0,W.jsx)(O.Z.HeaderCell,{className:"bg-token-main-surface-primary",children:(0,W.jsx)(b.Z,V({},J.email))}),(0,W.jsx)(O.Z.HeaderCell,{className:"w-28 bg-token-main-surface-primary",children:(0,W.jsx)("span",{className:d?"pl-3":"",children:(0,W.jsx)(b.Z,V({},J.role))})}),d&&(0,W.jsx)(O.Z.HeaderCell,{className:"w-40 bg-token-main-surface-primary",children:c.formatMessage(J.actions)})]}),(0,W.jsxs)(O.Z.Body,{children:[u.map(e=>(0,W.jsx)(Q,{workspaceId:r,invite:e,isCurrentUserOwner:l,currentUserHasAdminRights:d},e.id)),0===u.length&&(0,W.jsx)(O.Z.Row,{children:(0,W.jsx)(O.Z.Cell,{children:(0,W.jsx)("div",{className:"text-token-text-tertiary",children:(0,W.jsx)(b.Z,V({},J.noResults))})})})]})]}),m>1&&(0,W.jsx)("div",{className:"mt-2 flex justify-center",children:(0,W.jsx)(I.t,{currentPage:a,onChangeIndex:n,length:m})})]})}function Q(e){let{workspaceId:t,invite:r,isCurrentUserOwner:s,currentUserHasAdminRights:a}=e,n=(0,E.Ap)(),i=D(t),l=q(t),o=(0,M.Z)();return(0,W.jsxs)(O.Z.Row,{disabled:i.isPending||l.isPending||l.isPending,children:[(0,W.jsx)(O.Z.Cell,{children:r.email_address}),(0,W.jsx)(O.Z.Cell,{children:s?(0,W.jsx)(T.mJ,{currentRole:r.role,onUpdateUserRole:e=>{i.mutate({inviteId:r.id,role:e})}}):n[r.role]}),a&&(0,W.jsx)(W.Fragment,{children:(0,W.jsx)(O.Z.Cell,{children:(0,W.jsxs)("div",{className:"flex gap-2",children:[(0,W.jsx)(Z.z,{onClick:()=>i.mutate({inviteId:r.id,acceptRequest:!0}),children:o.formatMessage(J.accept)}),(0,W.jsx)(Z.z,{color:"neutral",onClick:()=>l.mutate({email:r.email_address}),children:o.formatMessage(J.reject)})]})})})]})}let J=(0,y.vU)({email:{id:"RequestInviteManager.email",defaultMessage:"Email"},role:{id:"RequestInviteManager.role",defaultMessage:"Role"},actions:{id:"RequestInviteManager.actions",defaultMessage:"Actions"},accept:{id:"RequestInviteManager.accept",defaultMessage:"Accept"},reject:{id:"RequestInviteManager.reject",defaultMessage:"Reject"},noResults:{id:"RequestInviteManager.noResults",defaultMessage:"No results"}});var G=r(48709);function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var $=((s=$||{}).Members="members",s.Invites="invites",s.Requests="requests",s);function ee(e){let{tab:t}=e;switch(t){case $.Members:return(0,W.jsx)(b.Z,Y({},ei.allMembers));case $.Invites:return(0,W.jsx)(b.Z,Y({},ei.pendingInvites));case $.Requests:return(0,W.jsx)(b.Z,Y({},ei.pendingRequests))}}function et(e){let{tab:t,filterInputValue:r,workspaceId:s}=e;switch(t){case $.Members:return(0,W.jsx)(T.ZP,{workspaceId:s,filterInputValue:r});case $.Invites:return(0,W.jsx)(A,{workspaceId:s,filterInputValue:r});case $.Requests:return(0,W.jsx)(L,{workspaceId:s,filterInputValue:r})}}let er=(0,m.b)($);function es(e){var t;let{currentWorkspaceId:r}=e,s=(0,M.Z)(),a=(0,c.t)(),n=null!==(t=(0,T.p5)(r))&&void 0!==t?t:"?",l=(0,E.qH)(a),m=null==a?void 0:a.isTeam(),f=(0,j.useRouter)(),p="string"==typeof f.query.tab&&er(f.query.tab)?f.query.tab:$.Members,{0:y,1:k}=(0,x.useState)(""),{0:O,1:I}=(0,x.useState)("");(0,x.useEffect)(()=>{I("")},[p]);let P=(0,x.useCallback)((0,g.debounce)(e=>{I(e)},250),[]),C=(0,G.Wv)();if(!a)return null;let N=a.isAdminOfAccount(),R=a.isOwnerOfAccount(),U=m||!C?[$.Members,$.Invites]:[$.Members,$.Invites,$.Requests];return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(v(),{children:(0,W.jsx)("title",{children:s.formatMessage(ei.adminBrowserPageTitle)})}),(0,W.jsx)(i.yG,{title:s.formatMessage(ei.adminPageTitle),subtitle:(0,W.jsx)(b.Z,Y({values:{totalMembers:n,planName:l}},ei.totalMembers))}),(0,W.jsxs)(i.hb,{children:[(0,W.jsxs)(en,{children:[(0,W.jsx)("div",{className:"mb-6 flex gap-2",children:U.map(e=>(0,W.jsx)(ea,{onClick:()=>{f.push(null!=e?"/admin?tab=".concat(e):"/admin")},isSelected:p===e,children:(0,W.jsx)(ee,{tab:e})},e))}),(0,W.jsxs)("div",{className:"flex gap-2",children:[(0,W.jsxs)("div",{className:"relative",children:[(0,W.jsx)(h.jRj,{className:"icon-sm absolute left-2 top-1/2 -translate-y-1/2 transform text-token-text-tertiary"}),(0,W.jsx)("input",{type:"text",value:y,onChange:e=>{k(e.target.value),P(e.target.value)},placeholder:s.formatMessage(ei.search),className:"w-48 rounded-lg border border-token-border-light bg-token-main-surface-primary pl-8 placeholder:text-token-text-tertiary"})]}),(N||R||m)&&(0,W.jsxs)(Z.z,{onClick:()=>{d.vm.openModal(d.B.InviteUsersToWorkspace)},children:[(0,W.jsx)(h.OvN,{className:"icon-sm"}),(0,W.jsx)(b.Z,Y({},ei.inviteMemberButton))]}),m?(0,W.jsxs)(o.Z.Root,{children:[(0,W.jsx)(u.xz,{asChild:!0,children:(0,W.jsx)(Z.z,{color:"neutral",children:(0,W.jsx)(h.K9M,{className:"icon-sm"})})}),(0,W.jsx)(o.Z.Portal,{children:(0,W.jsx)(o.Z.Content,{children:(0,W.jsx)(o.Z.Item,{onClick:()=>{a&&d.vm.setLeaveWorkspaceData(a)},children:(0,W.jsx)(b.Z,Y({},ei.leaveWorkspace))})})})]}):null]})]}),(0,W.jsx)(et,{workspaceId:r,tab:p,filterInputValue:O})]}),null!=a?(0,W.jsx)(w.Z,{workspace:a}):null]})}function ea(e){let{children:t,isSelected:r,onClick:s}=e;return(0,W.jsx)(Z.z,{color:"none",className:(0,f.default)(r?"bg-token-main-surface-tertiary":"hover:bg-token-main-surface-tertiary"),onClick:s,children:t})}let en=k.Z.div(a||(a=(0,l.Z)(["mb-4 py-6 flex flex-col gap-4 lg:flex-row md:items-start lg:justify-between"]))),ei=(0,y.vU)({adminBrowserPageTitle:{id:"adminPage.adminBrowserPageTitle",defaultMessage:"ChatGPT - Member admin"},adminPageTitle:{id:"adminPage.adminPageTitle.0",defaultMessage:"Members"},workspaceNotFound:{id:"adminPage.workspaceNotFound",defaultMessage:"Workspace not found"},totalMembers:{id:"adminPage.totalMembers",defaultMessage:"{planName} \xb7 {totalMembers} {totalMembers, plural, one {member} other {members}}"},backToChat:{id:"adminPage.backToChat",defaultMessage:"Back to chat"},allMembers:{id:"adminPage.allMembers",defaultMessage:"All members"},pendingInvites:{id:"adminPage.pendingInvites",defaultMessage:"Pending invites"},pendingRequests:{id:"adminPage.pendingRequests",defaultMessage:"Pending requests"},analytics:{id:"adminPage.analytics",defaultMessage:"Analytics"},inviteMemberButton:{id:"adminPage.inviteMemberButton",defaultMessage:"Invite member"},leaveWorkspace:{id:"adminPage.leaveWorkspace",defaultMessage:"Leave workspace"},search:{id:"adminPage.search",defaultMessage:"Search"}});function el(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}var eo=!0;function ec(e){return(0,W.jsx)(es,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?el(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):el(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e))}ec.getLayout=function(e){return(0,W.jsx)(i.ZP,{mobilePageTitle:"Members",children:e})}},94107:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var s=r(19841),a=r(35250);function n(e){let{percentage:t,thickness:r=1/12,className:n,backgroundStrokeClassName:i="stroke-gray-400",transitionDuration:l,transitionTimingFunction:o,onTransitionEnd:c}=e,d=120*r,u=(120-d)/2,m=2*Math.PI*u;return(0,a.jsxs)("svg",{width:120,height:120,viewBox:"0 0 ".concat(120," ").concat(120),className:n,children:[(0,a.jsx)("circle",{className:(0,s.default)("origin-[50%_50%] -rotate-90",i),strokeWidth:d,fill:"transparent",r:u,cx:60,cy:60}),(0,a.jsx)("circle",{className:"origin-[50%_50%] -rotate-90 transition-[stroke-dashoffset]",stroke:"currentColor",strokeWidth:d,strokeDashoffset:m-t/100*m,strokeDasharray:"".concat(m," ").concat(m),fill:"transparent",r:u,cx:60,cy:60,style:{transitionDuration:l,transitionTimingFunction:o},onTransitionEnd:c})]})}},72118:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var s=r(81147),a=r(91530),n=r.n(a),i=r(9063),l=r(68498),o=r(3806),c=r(9598),d=r(35250);function u(e){let{workspace:t}=e,r=(0,i.Z)(),a=(0,s.EV)(s.B.InviteUsersToWorkspace);return(0,d.jsx)(o.Z,{size:"custom",className:"max-w-lg text-sm",isOpen:a,onClose:n(),type:"success",title:null!=t.data.name?r.formatMessage(m.inviteMemberModalTitle,{workspaceName:t.data.name}):r.formatMessage(m.inviteMemberModalTitleUntitledWorkspace),description:r.formatMessage(m.inviteMemberModalDescription),children:(0,d.jsx)(c.Z,{workspace:t,canResendInviteEmails:!0,onCancel:()=>s.vm.closeModal(s.B.InviteUsersToWorkspace),onSuccess:()=>s.vm.closeModal(s.B.InviteUsersToWorkspace),cancelButtonText:r.formatMessage(m.inviteMemberInviteCancelButton)})})}let m=(0,l.vU)({inviteMemberInviteCancelButton:{id:"adminPage.inviteMemberInviteCancelButton",defaultMessage:"Cancel"},inviteMemberModalTitle:{id:"adminPage.inviteMemberModalTitle",defaultMessage:"Invite members to the {workspaceName} workspace"},inviteMemberModalTitleUntitledWorkspace:{id:"adminPage.inviteMemberModalTitleUntitledWorkspace",defaultMessage:"Invite members to this workspace"},inviteMemberModalDescription:{id:"adminPage.inviteMemberModalDescription",defaultMessage:"This workspace is private, only select members and roles can use this workspace. This workspace is opted out of training."},fileTooLargeWarning:{id:"adminPage",defaultMessage:"File is too large. Please upload a CSV file smaller than {maxSize}."}})},65130:function(e,t,r){"use strict";r.d(t,{ZP:function(){return q},bq:function(){return _},mJ:function(){return E},p5:function(){return B}});var s=r(72438),a=r(58554),n=r(59311),i=r(71727),l=r(81147),o=r(36285),c=r(25494),d=r(82473),u=r(19841),m=r(76781),f=r(70079),g=r(37659),p=r(84692),v=r(9063),j=r(68498),x=r(78103),h=r(44344),b=r(31731),M=r(83054),y=r(75967),k=r(49165),Z=r(3806),w=r(65733),O=r(40646),I=r(93944),P=r(35250);function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach(function(t){(0,s.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let R=(0,x.ZP)(()=>({confirmModalUserData:null})),U=e=>{R.setState({confirmModalUserData:e})},D=()=>{R.setState({confirmModalUserData:null})};function q(e){let{workspaceId:t,filterInputValue:r}=e,{0:s,1:a}=(0,f.useState)(0),n=(0,o.aF)(),u=null==n?void 0:n.id,m=(0,I.Gk)(t),v=(0,I.bE)(t),j=m||v,x=(0,c.D)({mutationFn:e=>{let{userId:t,workspaceId:r,value:s}=e;return i.Z.updateWorkspaceUserRole(r,t,s).catch(e=>{w.m.danger("Unable to update user (".concat(t,") role: ").concat(e.message))})}}),b=function(e){let t=(0,d.NL)();return(0,c.D)({mutationFn:t=>{let{userId:r}=t;return i.Z.removeWorkspaceUser(e,r).catch(e=>{w.m.danger("Unable to remove user (".concat(r,") from workspace: ").concat(e.message))})},onSuccess:()=>{t.invalidateQueries({queryKey:["workspace",e]})}})}(t),{data:M}=(0,O.Z)(t,s*O.I,r),y=(0,f.useCallback)(e=>{U(e)},[]),Z=(0,f.useCallback)(()=>{var e;let t=null===(e=R.getState().confirmModalUserData)||void 0===e?void 0:e.id;void 0!==t&&b.mutate({userId:t}),D()},[b]),C=(0,f.useCallback)((e,r)=>{x.mutate({userId:e,value:r,workspaceId:t})},[x,t]);if(void 0===M)return(0,P.jsx)(_,{});let q=M.items,E=Math.ceil(M.total/O.I);return s>=E&&0!==E&&a(Math.max(E-1,0)),(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(k.Z.Root,{fixed:!0,size:"normal",children:[(0,P.jsxs)(k.Z.Header,{children:[(0,P.jsx)(k.Z.HeaderCell,{className:"bg-token-main-surface-primary",children:(0,P.jsx)(p.Z,N({},A.name))}),(0,P.jsx)(k.Z.HeaderCell,{className:"bg-token-main-surface-primary",children:(0,P.jsx)(p.Z,N({},A.email))}),(0,P.jsx)(k.Z.HeaderCell,{className:"w-28 bg-token-main-surface-primary",children:(0,P.jsx)("span",{className:m?"pl-3":"",children:(0,P.jsx)(p.Z,N({},A.role))})}),j&&(0,P.jsx)(k.Z.HeaderCell,{className:"w-16 bg-token-main-surface-primary"})]}),(0,P.jsxs)(k.Z.Body,{children:[q.map(e=>(0,P.jsx)(T,{isCurrentUser:void 0!==u&&e.id===u,userId:e.id,name:e.name,role:e.role,currentUserHasAdminRights:j,isCurrentUserOwner:m,email:e.email,onRemoveUserClick:()=>y({id:e.id,name:e.name,email:e.email,created_time:e.created_time}),onUpdateUserRole:C},e.id)),0===q.length&&(0,P.jsx)(k.Z.Row,{children:(0,P.jsx)(k.Z.Cell,{children:(0,P.jsx)("div",{className:"text-token-text-tertiary",children:(0,P.jsx)(p.Z,N({},A.noResults))})})})]})]}),(0,P.jsxs)("div",{className:"relative mb-8 mt-4 min-h-[20px]",children:[m&&(0,P.jsxs)("button",{onClick:()=>l.vm.openModal(l.B.InviteUsersToWorkspace),className:"flex items-center gap-2 text-token-text-secondary hover:text-token-text-primary",children:[(0,P.jsx)(g.OvN,{className:"icon-sm"}),(0,P.jsx)(p.Z,N({},A.inviteMemberButton))]}),E>1&&(0,P.jsx)("div",{className:"absolute left-1/2 top-1/2 flex -translate-x-1/2 -translate-y-1/2 justify-center",children:(0,P.jsx)(h.t,{currentPage:s,onChangeIndex:a,length:E})})]}),(0,P.jsx)(S,{onDeleteConfirm:Z})]})}function S(e){var t;let{onDeleteConfirm:r}=e,s=(0,v.Z)(),a=R(e=>null!==e.confirmModalUserData),n=R(e=>null===e.confirmModalUserData?{}:{userId:e.confirmModalUserData.id,email:e.confirmModalUserData.email,name:e.confirmModalUserData.name,dateAdded:(0,m.Z)(e.confirmModalUserData.created_time)});return(0,P.jsx)(Z.Z,{isOpen:a,title:s.formatMessage(A.removeMemberModalTitle),onClose:()=>D(),type:"success",primaryButton:(0,P.jsx)(M.ZP.Button,{title:s.formatMessage(A.removeMemberModalConfirm),color:"danger",onClick:r}),secondaryButton:(0,P.jsx)(M.ZP.Button,{title:s.formatMessage(A.removeMemberModalCancel),color:"neutral",onClick:()=>D()}),children:(0,P.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[null!==(t=n.name)&&void 0!==t?t:n.email,(0,P.jsx)("div",{className:"text-token-text-tertiary",children:(0,P.jsx)(p.Z,N(N({},A.dateJoined),{},{values:{dateAdded:s.formatDate(n.dateAdded,{year:"numeric",month:"long",day:"numeric"})}}))})]})})}function T(e){let{userId:t,name:r,email:s,role:a,currentUserHasAdminRights:n,isCurrentUserOwner:i,isCurrentUser:l,onRemoveUserClick:o,onUpdateUserRole:c}=e,d=(0,I.Ap)()[a];return(0,P.jsxs)(k.Z.Row,{children:[(0,P.jsx)(k.Z.Cell,{children:(0,P.jsxs)("span",{className:(0,u.default)("flex items-center gap-2",(null===r||""===r)&&"text-token-text-tertiary"),children:[(0,P.jsx)("span",{children:null!=r?r:(0,P.jsx)(p.Z,N({},A.missingName))}),(0,P.jsx)("span",{children:l&&(0,P.jsx)(p.Z,N({},A.youSpecifier))})]})}),(0,P.jsx)(k.Z.Cell,{children:s}),(0,P.jsx)(k.Z.Cell,{children:i?(0,P.jsx)(E,{currentRole:a,onUpdateUserRole:e=>{c(t,e)},disabled:l}):d}),n&&(0,P.jsx)(k.Z.Cell,{children:(0,P.jsx)(W,{userId:t,onRemoveUserClick:o,disabled:l})})]})}function E(e){let{currentRole:t,onUpdateUserRole:r,disabled:s=!1}=e,n=(0,I.Ap)();return(0,P.jsxs)(y.Z.Root,{disabled:s,defaultValue:t,onValueChange:e=>{r(e)},children:[(0,P.jsxs)(y.Z.Trigger,{className:"-my-2",children:[(0,P.jsx)(y.Z.Value,{}),(0,P.jsx)(y.Z.Icon,{})]}),(0,P.jsx)(y.Z.Portal,{children:(0,P.jsxs)(y.Z.Content,{children:[(0,P.jsx)(y.Z.Item,{value:a.r3.STANDARD,children:n[a.r3.STANDARD]}),(0,P.jsx)(y.Z.Item,{value:a.r3.ADMIN,children:n[a.r3.ADMIN]}),(0,P.jsx)(y.Z.Item,{value:a.r3.OWNER,children:n[a.r3.OWNER]})]})})]})}function W(e){let{disabled:t,onRemoveUserClick:r,userId:s}=e;return t?null:(0,P.jsxs)(b.Z.Root,{children:[(0,P.jsx)(b.Z.Trigger,{className:"-my-2",children:(0,P.jsx)(g.K9M,{className:"icon-sm"})}),(0,P.jsx)(b.Z.Portal,{children:(0,P.jsx)(b.Z.Content,{children:(0,P.jsx)(b.Z.Item,{onClick:()=>{r(s)},children:(0,P.jsx)(p.Z,N({},A.removeMemberModalTitle))})})})]})}function B(e){var t;let{data:r}=(0,O.Z)(e);return null!==(t=null==r?void 0:r.total)&&void 0!==t?t:0}function _(){return(0,P.jsx)("div",{className:"flex w-full items-center justify-center",children:(0,P.jsx)(n.Z,{})})}let A=(0,j.vU)({name:{id:"UserManager.name",defaultMessage:"Name"},email:{id:"UserManager.email",defaultMessage:"Email"},role:{id:"UserManager.role",defaultMessage:"Role"},missingName:{id:"UserManager.missingName",defaultMessage:"No name provided"},youSpecifier:{id:"UserManager.youSpecifier",defaultMessage:"(You)"},removeUser:{id:"UserManager.removeUser",defaultMessage:"Remove user from workspace"},removeMemberModalTitle:{id:"UserManager.removeMemberModalTitle",defaultMessage:"Remove member"},removeMemberModalConfirm:{id:"UserManager.removeMemberModalConfirm",defaultMessage:"Delete"},removeMemberModalCancel:{id:"UserManager.removeMemberModalCancel",defaultMessage:"Cancel"},dateJoined:{id:"UserManager.dateJoined",defaultMessage:"Joined workspace on {dateAdded}"},inviteMemberButton:{id:"UserManager.inviteMemberButton",defaultMessage:"Invite member"},noResults:{id:"UserManager.noResults",defaultMessage:"No results"}})},40646:function(e,t,r){"use strict";r.d(t,{I:function(){return n},Z:function(){return i}});var s=r(71727),a=r(61236);let n=25;function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;return(0,a.a)({queryKey:["workspace",e,t,r],queryFn:async()=>await s.Z.getWorkspaceUsers(e,t,i,r),placeholderData:l,enabled:!!e})}},45789:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return r(53772)}])}},function(e){e.O(0,[4736,4848,9598,1605,2888,9774,179],function(){return e(e.s=45789)}),_N_E=e.O()}]);
//# sourceMappingURL=admin-f07b42db402e9c22.js.map