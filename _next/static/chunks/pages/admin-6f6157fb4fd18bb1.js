(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6964],{89678:function(e,t,r){var n=r(6627),i=r(85365),a=r(67948),o=Math.max,s=Math.min;e.exports=function(e,t,r){var l,u,c,d,f,p,m=0,g=!1,v=!1,h=!0;if("function"!=typeof e)throw TypeError("Expected a function");function x(t){var r=l,n=u;return l=u=void 0,m=t,d=e.apply(n,r)}function y(e){var r=e-p,n=e-m;return void 0===p||r>=t||r<0||v&&n>=c}function b(){var e,r,n,a=i();if(y(a))return j(a);f=setTimeout(b,(e=a-p,r=a-m,n=t-e,v?s(n,c-r):n))}function j(e){return(f=void 0,h&&l)?x(e):(l=u=void 0,d)}function w(){var e,r=i(),n=y(r);if(l=arguments,u=this,p=r,n){if(void 0===f)return m=e=p,f=setTimeout(b,t),g?x(e):d;if(v)return clearTimeout(f),f=setTimeout(b,t),x(p)}return void 0===f&&(f=setTimeout(b,t)),d}return t=a(t)||0,n(r)&&(g=!!r.leading,c=(v="maxWait"in r)?o(a(r.maxWait)||0,t):c,h="trailing"in r?!!r.trailing:h),w.cancel=function(){void 0!==f&&clearTimeout(f),m=0,l=p=u=f=void 0},w.flush=function(){return void 0===f?d:j(i())},w}},85365:function(e,t,r){var n=r(73401);e.exports=function(){return n.Date.now()}},84746:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSP:function(){return em},default:function(){return eg}});var n,i,a=r(98601),o=r(68986),s=r(2346),l=r(98095),u=r(93951),c=r(31438),d=r(60806),f=r(19841),p=r(89678),m=r.n(p),g=r(11941),v=r.n(g),h=r(34977),x=r(92379),y=r(62984),b=r(75172),j=r(68306),w=r(15478),M=r(11550),k=r(77748),I=r(25805),P=r(89794),_=r(30853),O=r(88667),Z=r(38482),E=r.n(Z),C=r(36792),U=r(13350),F=r(2721),R=r(84760),N=r(42420),T=r(56032),S=r(24740);function q(e){let t=(0,b.Z)(),r=(0,N.NL)();return(0,T.D)({mutationFn:r=>{let{inviteId:n,role:i,acceptRequest:a}=r;return F.Z.patchWorkspaceInvite(e,n,{role:i,acceptRequest:a}).catch(e=>{S.m.danger(t.formatMessage(L.updateInviteError,{error:e.message}))})},onSuccess:()=>{r.invalidateQueries({queryKey:["workspace",e,"invites"]}),r.invalidateQueries({queryKey:["workspace",e,"invites","requests"]}),r.invalidateQueries({queryKey:["workspace",e]})}})}function D(e){let t=(0,b.Z)(),r=(0,N.NL)();return(0,T.D)({mutationFn:r=>{let{email:n}=r;return F.Z.deleteWorkspaceInvite(e,n).catch(e=>{S.m.danger(t.formatMessage(L.deleteInviteError,{email:n,error:e.message}))})},onSuccess:()=>{r.invalidateQueries({queryKey:["workspace",e,"invites"]}),r.invalidateQueries({queryKey:["workspace",e,"invites","requests"]})}})}let L=(0,j.vU)({updateInviteError:{id:"WorkspaceInvites.updateInviteError",defaultMessage:"Unable to update invite from workspace: {error}"},deleteInviteError:{id:"WorkspaceInvites.deleteInviteError",defaultMessage:"Unable to remove user ({email}) from workspace: {error}"},resendInviteSuccess:{id:"WorkspaceInvites.resendInviteSuccess",defaultMessage:"Sent a new invite to {email}"},resendInviteError:{id:"WorkspaceInvites.resendInviteError",defaultMessage:"Unable to resend invite to ({email}) from workspace: {error}"}});var A=r(60211),B=r(44087),W=r(651);function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach(function(t){(0,a.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let H=E()(()=>r.e(6638).then(r.bind(r,76638)).then(e=>e.DirectorySyncResourceManagedIndication),{loadableGenerated:{webpack:()=>[76638]}});function J(e){var t,r;let{workspaceId:n,filterInputValue:i}=e,{0:a,1:o}=(0,x.useState)(0),s=(0,B.Gk)(n),l=(0,B.bE)(n),u=s||l,{data:c}=(r=25*a,(0,R.a)({queryKey:["workspace",n,"invites",r,i],queryFn:async()=>await F.Z.getWorkspaceInvites(n,r,25,i)}));if(void 0===c)return(0,W.jsx)(A.bq,{});let d=c.items,f=Math.ceil((null!==(t=c.total)&&void 0!==t?t:0)/25);return a>=f&&0!==f&&o(Math.max(f-1,0)),(0,W.jsxs)("div",{children:[(0,W.jsxs)(C.Z.Root,{fixed:!0,size:"normal",children:[(0,W.jsxs)(C.Z.Header,{children:[(0,W.jsx)(C.Z.HeaderCell,{className:"bg-token-main-surface-primary",children:(0,W.jsx)(y.Z,G({},V.email))}),(0,W.jsx)(C.Z.HeaderCell,{className:"w-28 bg-token-main-surface-primary",children:(0,W.jsx)("span",{className:u?"pl-3":"",children:(0,W.jsx)(y.Z,G({},V.role))})}),u&&(0,W.jsx)(C.Z.HeaderCell,{className:"w-16 bg-token-main-surface-primary"})]}),(0,W.jsxs)(C.Z.Body,{children:[d.map(e=>(0,W.jsx)(K,{workspaceId:n,invite:e,isCurrentUserOwner:s,currentUserHasAdminRights:u},e.id)),0===d.length&&(0,W.jsx)(C.Z.Row,{children:(0,W.jsx)(C.Z.Cell,{children:(0,W.jsx)("div",{className:"text-token-text-tertiary",children:(0,W.jsx)(y.Z,G({},V.noResults))})})})]})]}),f>1&&(0,W.jsx)("div",{className:"mt-2 flex justify-center",children:(0,W.jsx)(U.t,{currentPage:a,onChangeIndex:o,length:f})})]})}function K(e){let{workspaceId:t,invite:r,isCurrentUserOwner:n,currentUserHasAdminRights:i}=e,a=(0,B.Ap)(),o=q(t),s=D(t),l=function(e){let t=(0,b.Z)(),r=(0,N.NL)();return(0,T.D)({mutationFn:r=>{let{role:n,email:i}=r;return F.Z.addWorkspaceUsers(e,[i],n,!0).then(e=>{let{account_invites:r,errored_emails:n}=e;if(n.length>0)throw Error(n[0].error);r.length>0&&S.m.success(t.formatMessage(L.resendInviteSuccess,{email:i}))}).catch(e=>{S.m.danger(t.formatMessage(L.resendInviteError,{email:i,error:e.message}))})},onSuccess:()=>{r.invalidateQueries({queryKey:["workspace",e,"invites"]}),r.invalidateQueries({queryKey:["workspace",e,"invites","requests"]})}})}(t),{value:u}=(0,O.sB)("3999712942");return(0,W.jsxs)(C.Z.Row,{disabled:o.isPending||s.isPending||s.isSuccess||l.isPending,children:[(0,W.jsx)(C.Z.Cell,{children:(0,W.jsxs)("span",{className:"flex flex-grow justify-between",children:[(0,W.jsx)("span",{children:r.email_address}),u&&r.is_scim_managed&&(0,W.jsx)(H,{})]})}),(0,W.jsx)(C.Z.Cell,{children:n?(0,W.jsx)(A.mJ,{currentRole:r.role,onUpdateUserRole:e=>{o.mutate({inviteId:r.id,role:e})}}):a[r.role]}),i&&(0,W.jsx)(W.Fragment,{children:(0,W.jsx)(C.Z.Cell,{children:(0,W.jsx)(Q,{onDeleteUser:()=>{var e;s.mutate({email:null!==(e=r.email_address)&&void 0!==e?e:""})},onResendInvite:()=>{var e,t;l.mutate({email:null!==(e=r.email_address)&&void 0!==e?e:"",role:null!==(t=r.role)&&void 0!==t?t:""})},disabled:r.is_scim_managed})})})]})}function Q(e){let{onDeleteUser:t,onResendInvite:r,disabled:n}=e,i=(0,b.Z)();return(0,W.jsx)(W.Fragment,{children:n?(0,W.jsx)(l.Z.Root,{children:(0,W.jsx)(l.Z.Trigger,{disabled:!0,children:(0,W.jsx)(_.u,{sideOffset:0,label:i.formatMessage(P.s.managedViaSCIMTooltip),className:"flex",side:"right",children:(0,W.jsx)(k.nWS,{className:"icon-sm"})})})}):(0,W.jsxs)(l.Z.Root,{children:[(0,W.jsx)(l.Z.Trigger,{children:(0,W.jsx)(k.nWS,{className:"icon-sm"})}),(0,W.jsx)(l.Z.Portal,{children:(0,W.jsxs)(l.Z.Content,{children:[(0,W.jsx)(l.Z.Item,{onClick:r,children:(0,W.jsx)(y.Z,G({},V.resendInvite))}),(0,W.jsx)(l.Z.Item,{onClick:t,children:(0,W.jsx)(y.Z,G({},V.revokeInvite))})]})})]})})}let V=(0,j.vU)({email:{id:"InviteManager.email",defaultMessage:"Email"},role:{id:"InviteManager.role",defaultMessage:"Role"},resendInvite:{id:"InviteManager.resendInvite",defaultMessage:"Resend invite"},revokeInvite:{id:"InviteManager.revokeInvite",defaultMessage:"Revoke invite"},noResults:{id:"InviteManager.noResults",defaultMessage:"No results"}});function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach(function(t){(0,a.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function $(e){var t;let{workspaceId:r,filterInputValue:n}=e,{0:i,1:a}=(0,x.useState)(0),{data:o}=(t=25*i,(0,R.a)({queryKey:["workspace",r,"invites","requests",t,n],queryFn:async()=>await F.Z.getWorkspaceInviteRequests(r,t,25,n)})),s=(0,B.Gk)(r),l=(0,B.bE)(r),u=(0,b.Z)(),c=s||l;if(void 0===o)return(0,W.jsx)(A.bq,{});let d=o.items,f=Math.ceil(o.total/25);return i>=f&&0!==f&&a(Math.max(f-1,0)),(0,W.jsxs)("div",{children:[(0,W.jsxs)(C.Z.Root,{fixed:!0,size:"normal",children:[(0,W.jsxs)(C.Z.Header,{children:[(0,W.jsx)(C.Z.HeaderCell,{className:"bg-token-main-surface-primary",children:(0,W.jsx)(y.Z,Y({},et.email))}),(0,W.jsx)(C.Z.HeaderCell,{className:"w-28 bg-token-main-surface-primary",children:(0,W.jsx)("span",{className:c?"pl-3":"",children:(0,W.jsx)(y.Z,Y({},et.role))})}),c&&(0,W.jsx)(C.Z.HeaderCell,{className:"w-40 bg-token-main-surface-primary",children:u.formatMessage(et.actions)})]}),(0,W.jsxs)(C.Z.Body,{children:[d.map(e=>(0,W.jsx)(ee,{workspaceId:r,invite:e,isCurrentUserOwner:s,currentUserHasAdminRights:c},e.id)),0===d.length&&(0,W.jsx)(C.Z.Row,{children:(0,W.jsx)(C.Z.Cell,{children:(0,W.jsx)("div",{className:"text-token-text-tertiary",children:(0,W.jsx)(y.Z,Y({},et.noResults))})})})]})]}),f>1&&(0,W.jsx)("div",{className:"mt-2 flex justify-center",children:(0,W.jsx)(U.t,{currentPage:i,onChangeIndex:a,length:f})})]})}function ee(e){let{workspaceId:t,invite:r,isCurrentUserOwner:n,currentUserHasAdminRights:i}=e,a=(0,B.Ap)(),o=q(t),s=D(t),l=(0,b.Z)();return(0,W.jsxs)(C.Z.Row,{disabled:o.isPending||s.isPending||s.isPending,children:[(0,W.jsx)(C.Z.Cell,{children:r.email_address}),(0,W.jsx)(C.Z.Cell,{children:n?(0,W.jsx)(A.mJ,{currentRole:r.role,onUpdateUserRole:e=>{o.mutate({inviteId:r.id,role:e})}}):a[r.role]}),i&&(0,W.jsx)(W.Fragment,{children:(0,W.jsx)(C.Z.Cell,{children:(0,W.jsxs)("div",{className:"flex gap-2",children:[(0,W.jsx)(M.z,{onClick:()=>o.mutate({inviteId:r.id,acceptRequest:!0}),children:l.formatMessage(et.accept)}),(0,W.jsx)(M.z,{color:"secondary",onClick:()=>s.mutate({email:r.email_address}),children:l.formatMessage(et.reject)})]})})})]})}let et=(0,j.vU)({email:{id:"RequestInviteManager.email",defaultMessage:"Email"},role:{id:"RequestInviteManager.role",defaultMessage:"Role"},actions:{id:"RequestInviteManager.actions",defaultMessage:"Actions"},accept:{id:"RequestInviteManager.accept",defaultMessage:"Accept"},reject:{id:"RequestInviteManager.reject",defaultMessage:"Reject"},noResults:{id:"RequestInviteManager.noResults",defaultMessage:"No results"}});var er=r(12310);function en(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ei(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?en(Object(r),!0).forEach(function(t){(0,a.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):en(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ea=((n=ea||{}).Members="members",n.Invites="invites",n.Requests="requests",n);function eo(e){let{tab:t}=e;switch(t){case ea.Members:return(0,W.jsx)(y.Z,ei({},ef.allMembers));case ea.Invites:return(0,W.jsx)(y.Z,ei({},ef.pendingInvites));case ea.Requests:return(0,W.jsx)(y.Z,ei({},ef.pendingRequests))}}function es(e){let{tab:t,filterInputValue:r,workspaceId:n}=e;switch(t){case ea.Members:return(0,W.jsx)(A.ZP,{workspaceId:n,filterInputValue:r});case ea.Invites:return(0,W.jsx)(J,{workspaceId:n,filterInputValue:r});case ea.Requests:return(0,W.jsx)($,{workspaceId:n,filterInputValue:r})}}let el=(0,d.b)(ea);function eu(e){var t;let{currentWorkspaceId:r}=e,n=(0,b.Z)(),i=(0,u.t)(),a=null!==(t=(0,A.p5)(r))&&void 0!==t?t:"?",s=(0,B.qH)(i),d=null==i?void 0:i.isTeam(),f=(0,h.useRouter)(),p="string"==typeof f.query.tab&&el(f.query.tab)?f.query.tab:ea.Members,{0:g,1:j}=(0,x.useState)(""),{0:w,1:P}=(0,x.useState)("");(0,x.useEffect)(()=>{P("")},[p]);let _=(0,x.useCallback)(m()(e=>{P(e)},250),[]),O=(0,er.uo)(),Z=!!(null!=O&&O.length);if(!i)return null;let E=i.isAdminOfAccount(),C=i.isOwnerOfAccount(),U=d||!Z?[ea.Members,ea.Invites]:[ea.Members,ea.Invites,ea.Requests];return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(v(),{children:(0,W.jsx)("title",{children:n.formatMessage(ef.adminBrowserPageTitle)})}),(0,W.jsx)(o.yG,{title:n.formatMessage(ef.adminPageTitle),subtitle:(0,W.jsx)(y.Z,ei({values:{totalMembers:a,planName:s}},ef.totalMembers))}),(0,W.jsxs)(o.hb,{children:[(0,W.jsxs)(ed,{children:[(0,W.jsx)("div",{className:"mb-6 flex gap-2",children:U.map(e=>(0,W.jsx)(ec,{onClick:()=>{f.push(null!=e?"/admin?tab=".concat(e):"/admin")},isSelected:p===e,children:(0,W.jsx)(eo,{tab:e})},e))}),(0,W.jsxs)("div",{className:"flex gap-2",children:[(0,W.jsxs)("div",{className:"relative",children:[(0,W.jsx)(k.W1M,{className:"icon-sm absolute left-2 top-1/2 -translate-y-1/2 transform text-token-text-tertiary"}),(0,W.jsx)("input",{type:"text",value:g,onChange:e=>{j(e.target.value),_(e.target.value)},placeholder:n.formatMessage(ef.search),className:"w-48 rounded-lg border border-token-border-light bg-token-main-surface-primary pl-8 placeholder:text-token-text-tertiary"})]}),(E||C||d)&&(0,W.jsx)(M.z,{onClick:()=>{c.vm.openModal(c.B.InviteUsersToWorkspace)},icon:k.Vz5,children:(0,W.jsx)(y.Z,ei({},ef.inviteMemberButton))}),d?(0,W.jsx)(l.d,{triggerButton:(0,W.jsx)(M.z,{color:"secondary",icon:k.nWS}),children:(0,W.jsx)(l.Z.Item,{onClick:()=>{i&&c.vm.setLeaveWorkspaceData(i)},children:(0,W.jsx)(y.Z,ei({},ef.leaveWorkspace))})}):null]})]}),(0,W.jsx)(es,{workspaceId:r,tab:p,filterInputValue:w})]}),null!=i?(0,W.jsx)(I.Z,{workspace:i}):null]})}function ec(e){let{children:t,isSelected:r,onClick:n}=e;return(0,W.jsx)(M.z,{color:"ghost",className:(0,f.default)(r?"bg-token-main-surface-tertiary":"hover:bg-token-main-surface-tertiary"),onClick:n,children:t})}let ed=w.Z.div(i||(i=(0,s.Z)(["mb-4 py-6 flex flex-col gap-4 lg:flex-row md:items-start lg:justify-between"]))),ef=(0,j.vU)({adminBrowserPageTitle:{id:"adminPage.adminBrowserPageTitle",defaultMessage:"ChatGPT - Member admin"},adminPageTitle:{id:"adminPage.adminPageTitle.0",defaultMessage:"Members"},workspaceNotFound:{id:"adminPage.workspaceNotFound",defaultMessage:"Workspace not found"},totalMembers:{id:"adminPage.totalMembers",defaultMessage:"{planName} \xb7 {totalMembers} {totalMembers, plural, one {member} other {members}}"},backToChat:{id:"adminPage.backToChat",defaultMessage:"Back to chat"},allMembers:{id:"adminPage.allMembers",defaultMessage:"All members"},pendingInvites:{id:"adminPage.pendingInvites",defaultMessage:"Pending invites"},pendingRequests:{id:"adminPage.pendingRequests",defaultMessage:"Pending requests"},analytics:{id:"adminPage.analytics",defaultMessage:"Analytics"},inviteMemberButton:{id:"adminPage.inviteMemberButton",defaultMessage:"Invite member"},leaveWorkspace:{id:"adminPage.leaveWorkspace",defaultMessage:"Leave workspace"},search:{id:"adminPage.search",defaultMessage:"Search"}});function ep(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var em=!0;function eg(e){return(0,W.jsx)(eu,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ep(Object(r),!0).forEach(function(t){(0,a.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ep(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e))}eg.getLayout=function(e){return(0,W.jsx)(o.ZP,{mobilePageTitle:"Members",children:e})}},42606:function(e,t,r){"use strict";r.d(t,{I:function(){return a},o:function(){return o}});let n=["xlsx","pptx","docx"],i={"application/vnd.google-apps.spreadsheet":"xlsx","application/vnd.google-apps.presentation":"pptx","application/vnd.google-apps.document":"docx"};function a(e){var t;return e&&null!==(t=i[e.split(";")[0]])&&void 0!==t?t:null}function o(e){return e&&n.includes(e)?e:null}},84082:function(e,t,r){"use strict";r.d(t,{$e:function(){return a},EZ:function(){return o},Ql:function(){return i},dO:function(){return n},xC:function(){return s}});let n=10,i=4,a={duration:20,hasCloseButton:!0},o=512,s=536870912},93866:function(e,t,r){"use strict";r.d(t,{AJ:function(){return o},XX:function(){return l},xA:function(){return s}});var n,i,a=r(42606);let o=((n={})[n.None=0]="None",n[n.Multimodal=1]="Multimodal",n[n.Interpreter=2]="Interpreter",n[n.Retrieval=3]="Retrieval",n[n.ContextConnector=4]="ContextConnector",n[n.ProfilePicture=5]="ProfilePicture",n);function s(e){if(e)return{contextConnector:e.context_connector,sourceUrl:e.source_url,syntheticExtension:(0,a.o)(e.synthetic_extension),type:e.type}}let l=((i={}).Uploading="uploading",i.Ready="ready",i)},98628:function(e,t,r){"use strict";r.d(t,{E1:function(){return h},Sj:function(){return y},W7:function(){return p},cT:function(){return g},lU:function(){return v},po:function(){return m},sY:function(){return b}});var n=r(99333),i=r(2721),a=r(92319),o=r(99976),s=r(61619),l=r(68306),u=r(88815),c=r(24740),d=r(66114);let f={duration:20,hasCloseButton:!0};function p(e){return JSON.stringify({file:e.name,modified:e.lastModified,currentTime:new Date().toString()})}function m(e){return new Promise((t,r)=>{let n=new FileReader,i=new Image;n.onload=()=>{i.onload=()=>t(i),i.onerror=e=>r(e),i.src=n.result},n.readAsDataURL(e)})}async function g(e,t,r,l,d,p){var m,g,v;let j=u.N.getState().resetRateLimits,w=n.EG.Initial;o.A.logEvent(s.M.uploadFileInitiated,{client:"web",useCase:l.kind,uploadEntry:"local"});let M=p.usesRetrievalIndex?performance.now():void 0;try{let{file_id:a,upload_url:o}=await i.Z.createFile(t.name,t.size,l,!!j);d.onFileCreated(e,a,o),w=n.EG.FileCreated;let s=l.kind===n.Ei.Gizmo?l.gizmoId:void 0,u=null!==(m=p.shouldUpdateProgress)&&void 0!==m&&m,v=null!==(g=p.usesRetrievalIndex)&&void 0!==g&&g,y=await i.Z.uploadFileToAzureStorage(t,o,t=>{u&&d.onFileUploadProgress(e,10+80*t)});if(d.onFileUploadProgress(e,90),201!==y.status&&x(y,a,v),w=n.EG.FileUploaded,await i.Z.processFileUpload(a,{gizmoId:s}),w=n.EG.FileProcessed,p.usesRetrievalIndex){let t=await h(a,s);(null==t?void 0:t.status)===n.Xf.Skipped&&c.m.danger(r.formatMessage(b.retrievalSkippedFile,{fileName:t.name}),f),d.onFileUploaded(e,a,void 0,{fileTokenSize:t.file_size_tokens}),w=n.EG.RetrievalIndexCreated}else d.onFileUploaded(e,a,p.imageDimensions);null!=M&&i.Z.postRetrievalTiming({e2eLatencyMs:performance.now()-M,type:"file"})}catch(i){y(r,t.name,i);let n="NotInstanceOfError";i instanceof a.gK?n=i.name:i instanceof a.Q0?n="FatalServerError_type_".concat(null!==(v=i.type)&&void 0!==v?v:"undefined"):i instanceof Error?n=i.name:i instanceof a.vq&&(n=i.name),d.onError(e,"error",n,l,w)}}async function v(e,t,r,n,i){let{width:a,height:o}=await m(t);return g(e,t,r,{kind:n},i,{imageDimensions:{width:a,height:o}})}async function h(e,t){let r=Date.now()+6e4,o=e=>new Promise(t=>setTimeout(t,e)),s=0;for(;Date.now()<r;){let r=await i.Z.getRetrievalStatus(e,t);if(r.status===n.Xf.Success||r.status===n.Xf.Skipped)return r;if(r.status===n.Xf.Failed)throw new a.vq("Context extraction failed",r.error_code);s++,await o(Math.min(1e3,100*s))}throw new a.vq("Retrieval indexing timed out")}async function x(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n="Unknown error";try{n=await e.data}catch(e){}throw r&&i.Z.markFileUploadFailed(t,{error:n}),new a.vq("File upload to blobstore failed","failed_upload_to_blobstore")}function y(e,t,r){let n=(0,d.kr)(e,"default_upload_error",{fileName:t});r instanceof a.vq&&null!=r.code&&(n=(0,d.kr)(e,r.code)),c.m.danger(n,f)}let b=(0,l.vU)({retrievalSkippedFile:{id:"useFilePickerState.retrievalSkippedFile",defaultMessage:'Unable to extract text from "{fileName}"'}})},66114:function(e,t,r){"use strict";r.d(t,{$H:function(){return v},$p:function(){return Z},Ad:function(){return T},B:function(){return N},BV:function(){return U},CO:function(){return E},Iy:function(){return m},KL:function(){return _},L8:function(){return g},O6:function(){return y},Tu:function(){return F},VF:function(){return x},Vm:function(){return C},WI:function(){return R},YN:function(){return j},Z8:function(){return O},Zp:function(){return I},_0:function(){return k},kr:function(){return h},p0:function(){return P},s1:function(){return w},ww:function(){return b},xs:function(){return M}});var n=r(99333),i=r(16757),a=r(2721),o=r(86025),s=r(58695),l=r(82363),u=r(92379),c=r(75172),d=r(68306),f=r(24740),p=r(93866);function m(e){return e.replace("file-service://","")}function g(e){return"file-service://"+e}function v(e){return e.startsWith("file-service://")}function h(e,t,r){switch(t){case"file_zero_bytes":return e.formatMessage(S.fileZeroBytes,r);case"file_too_large":return e.formatMessage(S.fileTooLarge,r);case"over_user_quota":return e.formatMessage(S.overUserQuota,r);case"file_not_found":case"file_expired":return e.formatMessage(S.fileNotFound,r);case"file_timed_out":return e.formatMessage(S.fileTimedOut,r);case"ace_pod_expired":return e.formatMessage(S.codeInterpreterSessionTimeout,r);case"permission_error":return e.formatMessage(S.permissionError,r);case"default_upload_error":case"file_rejected":return e.formatMessage(S.defaultCreateEntryError,r);case"default_download_link_error":return e.formatMessage(S.defaultDownloadLinkError,r);case"file_empty":return e.formatMessage(S.fileEmpty,r);case"too_many_tokens":return e.formatMessage(S.fileTooManyTokens,r);case"file_encrypted":return e.formatMessage(S.fileEncrypted,r);case"file_corrupted":return e.formatMessage(S.fileCorrupted,r);case"failed_upload_to_blobstore":return e.formatMessage(S.failedUploadToBlobStore,r);default:return e.formatMessage(S.unknownError)}}function x(){let e=(0,c.Z)();return(0,u.useCallback)((t,r)=>h(e,t,r),[e])}function y(){let{session:e}=(0,s.kP)(),{isUnauthenticated:t}=(0,o.u)(),r=(0,c.Z)();return async(i,o)=>{if(!t&&null==e)return f.m.danger(r.formatMessage(S.fileDownloadFailed)),!1;try{let e=await a.Z.getFileDownloadLink(i,void 0,t);if(e.status!==n.KF.Success)throw Error("File is not ready to download: "+JSON.stringify(e));let r=e.download_url,s=document.createElement("a");s.href=r,s.download=o,s.click(),window.open(r,"_blank")}catch(e){return f.m.danger(r.formatMessage(S.fileDownloadFailed)),!1}return!0}}function b(e,t){if((null==t?void 0:t.kind)===i.OL.GizmoInteraction||(null==t?void 0:t.kind)===i.OL.GizmoTest){var r;return null===(r=t.gizmo)||void 0===r?void 0:r.product_features}return null==e?void 0:e.product_features}function j(e,t){var r,i,a,o;let s=b(e,t);return(null==s||null===(r=s.attachments)||void 0===r?void 0:r.type)===n.Cd.CodeInterpreter?p.AJ.Interpreter:(null==s||null===(i=s.attachments)||void 0===i?void 0:i.type)===n.Cd.Multimodal?p.AJ.Multimodal:(null==s||null===(a=s.attachments)||void 0===a?void 0:a.type)===n.Cd.Retrieval?p.AJ.Retrieval:(null==s||null===(o=s.attachments)||void 0===o?void 0:o.type)===n.Cd.ContextConnector?p.AJ.ContextConnector:p.AJ.None}function w(e){var t;let r=null===(t=e.split(".").pop())||void 0===t?void 0:t.toLowerCase();return({md:"text/markdown",java:"text/x-java",py:"text/x-script.python",c:"text/x-c",cpp:"text/x-c++",h:"text/x-c++",php:"text/x-php",rb:"text/x-ruby",tex:"application/x-latext",ts:"text/x-typescript",cs:"text/x-csharp"})[null!=r?r:""]||""}function M(e,t,r,n,i){if(null==i)return e;let a=w(t);a&&(r=a),n&&(r=function(e){switch(e){case"application/vnd.google-apps.spreadsheet":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"application/vnd.google-apps.document":case"application/vnd.google-apps.presentation":return"text/plain";default:return e}}(r));let{accepted_mime_types:o,can_accept_all_mime_types:s}=i;return null!=o&&0!==o.length&&s?o.includes(r)?e:p.AJ.Interpreter:e}function k(e,t,r){var i,a,o;let s=""!==t?t:w(r),l=null==e||null===(i=e.product_features)||void 0===i?void 0:i.attachments;return null==l?void 0:null!==(a=l.accepted_mime_types)&&void 0!==a&&a.includes(s)?l.type:null!==(o=l.image_mime_types)&&void 0!==o&&o.includes(s)?n.Cd.Multimodal:n.Cd.CodeInterpreter}function I(e,t){var r,n;let i=b(e,t);return null!=i&&null!==(r=i.attachments)&&void 0!==r&&r.can_accept_all_mime_types?void 0:null==i||null===(n=i.attachments)||void 0===n?void 0:n.accepted_mime_types}function P(e,t){let r=b(e,t),{attachments:n}=null!=r?r:{};if(null!=n&&n.image_mime_types)return n.image_mime_types;if((null==n?void 0:n.type)==="multimodal"){var i;return null!==(i=n.accepted_mime_types)&&void 0!==i?i:_}return[]}let _=["image/png","image/jpeg","image/gif","image/webp"];function O(e){return(0,u.useMemo)(()=>{if(void 0===e)return{};let t={"image/jpeg":[".jpg",".jpeg"],"image/svg+xml":[".svg"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":[".pptx"]};return{accept:e.reduce((e,r)=>(r in t?e[r]=t[r]:r.includes("/")&&(e[r]=[".".concat(r.split("/")[1])]),e),{})}},[e])}function Z(e){var t;return null===(t=e.split(".").pop())||void 0===t?void 0:t.toLowerCase()}function E(e){let t=Z(e);return null!=t&&["jpg","jpeg","png","gif","webp"].includes(t)}function C(e){let t=Z(e);return null!=t&&["xls","xlsx","csv"].includes(t)}function U(e){let t=Z(e);return null!=t&&["xls","xlsx"].includes(t)}function F(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"fit";return new Promise((n,i)=>{let a=new FileReader;a.onerror=e=>{l.U.addError(Error("File reading has failed:",{cause:e})),i(Error("Failed to read the file."))},a.onload=a=>{let o=new Image;o.onerror=e=>{l.U.addError(Error("Image loading has failed:",{cause:e})),i(Error("Failed to load the image."))},o.onload=()=>{let a=document.createElement("canvas"),s,u=0,c=0;switch(r){case"fill":case"square":s=t/Math.min(o.width,o.height);break;case"fit":s=t/Math.max(o.width,o.height)}let d=o.width*s,f=o.height*s;"square"===r?(a.width=t,a.height=t,u=(t-d)/2,c=(t-f)/2):(a.width=d,a.height=f);let p=a.getContext("2d");if(null==p){l.U.addError("Canvas context creation failed. Your environment might not fully support HTML5 canvas."),i(Error("Failed to create canvas context."));return}p.drawImage(o,u,c,d,f);let m=e.type||"image/png";a.toBlob(t=>{t?n(new File([t],e.name,{type:m})):(l.U.addError("Blob creation failed. Blob is null."),i(Error("Failed to create blob from image data.")))},m)},null==a.target?(l.U.addError("Event target is null. Failed to load image."),i("Failed to load image.")):o.src=a.target.result},a.readAsDataURL(e)})}function R(e,t){return F(e,t,"square")}function N(e){var t,r;let n=null!==(t=e.name.split("/"))&&void 0!==t?t:[];return(null!==(r=n[n.length-1])&&void 0!==r?r:"").replace(/[-_]/g," ").split(".")[0]}function T(e,t){return t?e.slice(0,-t.length-1):e}let S=(0,d.vU)({defaultCreateEntryError:{id:"fileUpload.defaultCreateEntryError",defaultMessage:"Unable to upload {fileName}"},defaultDownloadLinkError:{id:"fileUpload.defaultDownloadLinkError",defaultMessage:"Failed to get upload status for {fileName}"},unknownError:{id:"fileUpload.unknownError",defaultMessage:"Unknown error occurred"},fileZeroBytes:{id:"fileUpload.fileZeroBytes",defaultMessage:"File is empty"},fileTooLarge:{id:"fileUpload.fileTooLarge",defaultMessage:"File is too large"},overUserQuota:{id:"fileUpload.overUserQuota",defaultMessage:"User quota exceeded"},fileNotFound:{id:"fileUpload.fileNotFound",defaultMessage:"File not found"},fileTimedOut:{id:"fileUpload.fileTimedOut",defaultMessage:"File upload timed out. Please try again."},fileEmpty:{id:"fileUpload.fileEmpty",defaultMessage:"No text could be extracted from this file."},fileTooManyTokens:{id:"fileUpload.fileTooManyTokens",defaultMessage:"This file contains too much text content. Please try again with a smaller file."},fileEncrypted:{id:"fileUpload.fileEncrypted",defaultMessage:"This file is encrypted/requires a password to access. Please try again with an unencrypted file."},fileCorrupted:{id:"fileUpload.fileCorrupted",defaultMessage:"This file is corrupted. Please ensure the file is not corrupted and try again."},codeInterpreterSessionTimeout:{id:"fileUpload.codeInterpreterSessionTimeout",defaultMessage:"Code interpreter session expired"},permissionError:{id:"fileUpload.permissionError",defaultMessage:"Missing permission to access file"},fileDownloadFailed:{id:"filesModal.fileDownloadFailed",defaultMessage:"File download failed. Please try again."},failedUploadToBlobStore:{id:"fileUpload.failedUploadToBlobStore",defaultMessage:"Failed upload to files.oaiusercontent.com. Please ensure your network settings allow access to this site or contact your network administrator."}})},88815:function(e,t,r){"use strict";r.d(t,{J:function(){return i},N:function(){return a}});var n=r(68810);let i={label:"Auto",value:""},a=(0,n.Ue)(()=>({forceParagen:!1,forceParagenModel:i,forceNulligen:!1,forceIndepthFeedback:!1,forceIndepthFeedbackPrompt:"The user has opted in to provide additional feedback on the previous response. Encourage the user to share feedback that you can store in a memory to better meet their needs in future. Use no more than 3 turns. If at any point the user indicates no longer wanting to provide feedback, return to the original topic.",forceRateLimit:!1,resetRateLimits:!1,showDebugConversationTurns:!1,rebaseSystemMessageContent:null}))},60806:function(e,t,r){"use strict";function n(e){let t=Object.values(e);return e=>t.includes(e)}r.d(t,{b:function(){return n}})},37300:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return r(84746)}])}},function(e){e.O(0,[2205,4198,5158,4089,1133,3718,3088,5696,1612,2349,5162,6013,9113,9725,8442,7261,2989,2879,3662,2888,9774,179],function(){return e(e.s=37300)}),_N_E=e.O()}]);
//# sourceMappingURL=admin-6f6157fb4fd18bb1.js.map