"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2509],{28368:function(e,t,r){var n;r.d(t,{j:function(){return i}});let i=((n={}).Starter="starter",n.Reply="reply",n)},7937:function(e,t,r){function n(e){return null!=e}r.d(t,{BB:function(){return c},He:function(){return d},OP:function(){return m},PO:function(){return l},WU:function(){return f},aS:function(){return u},lm:function(){return n},qo:function(){return o},r3:function(){return i},sw:function(){return p}});let i=(e,t)=>e.includes(t),o=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(null==e)return r;let n=Array.isArray(e)?e:[e];return t?n.map(t):n},l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return r=>o(r,e,t)},a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return"object"!=typeof e||null==e||Array.isArray(e)?t:e},s=(e,t)=>{let r=a(e),n={};for(let e in t)n[e]=t[e](r?.[e]);return n},u=e=>t=>s(t,e),c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"object"==typeof e||null==e?t:String(e)},d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if("object"==typeof e||null==e)return t;let r=Number(e);return isNaN(r)?t:r},p=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("boolean"==typeof e)return e;if("number"==typeof e){if(0===e)return!1;if(1===e)return!0}if("string"==typeof e){let t=e.toLowerCase();if("false"===t)return!1;if("true"===t)return!0}return t},f=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t[0];return i(t,e)?e:r},m=e=>t=>void 0===t?void 0:e(t)},66587:function(e,t,r){r.d(t,{Z:function(){return u}});var n=r(98601),i=r(52088),o=r(19841),l=r(651);let a=["className"];function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){let{className:t}=e,r=(0,i.Z)(e,a);return(0,l.jsx)("textarea",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({className:(0,o.default)("form-textarea w-full rounded-lg border border-token-border-light bg-token-main-surface-secondary text-sm text-token-text-primary focus:border-token-text-primary focus:shadow-none focus:outline-none focus:ring-token-text-primary",t)},r))}},17004:function(e,t,r){r.d(t,{E:function(){return o},P:function(){return i}});var n=r(92379);let i=(0,n.createContext)({isEmbeddedInFocusedView:!1});function o(){return(0,n.useContext)(i).isEmbeddedInFocusedView}},55357:function(e,t,r){r.d(t,{B:function(){return l},X:function(){return o}});var n=r(16757),i=r(7937);let o=e=>(0,i.r3)([n.OL.GizmoMagicCreate,n.OL.GizmoTest],e?.kind),l=e=>(0,i.r3)([n.OL.GizmoInteraction,n.OL.GizmoMagicCreate,n.OL.GizmoTest],e?.kind)},2319:function(e,t,r){r.d(t,{D:function(){return i},Q:function(){return o}});var n=r(92379);let i=n.createContext({mode:void 0,getGizmoId:void 0}),o=()=>(0,n.useContext)(i)},10083:function(e,t,r){r.d(t,{X:function(){return m},r:function(){return f}});var n=r(12128),i=r(10080),o=r(15913),l=r(19841),a=r(50820),s=r(33138),u=r(54097),c=r(83036),d=r(45334),p=r(651);function f(e){let{gizmo:t,hideOwner:r=!1,children:n,className:i,avatarClassName:o,showStarterPrompts:a=!1,disableStarterPrompts:s=!1}=e;return null==t?null:(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:(0,l.default)("flex h-full flex-col items-center justify-center text-token-text-primary",i),children:[(0,p.jsx)(m,{gizmo:t,avatarClassName:o}),(0,p.jsx)(x,{gizmo:t,hideOwner:r,showStarterPrompts:a,disableStarterPrompts:s}),n]})})}function m(e){let{gizmo:t,avatarClassName:r}=e,o=!!(null!=t&&(0,d.S9)(t)&&t?.gizmo.tags?.includes(i.U9.FirstParty));return(0,p.jsx)("div",{className:"relative",children:(0,p.jsx)(n.Z,{isFirstParty:o||!t,src:null!=t&&(0,d.WQ)(t)?t.profilePictureUrl:t?.gizmo.display.profile_picture_url,className:(0,l.default)("mb-3 h-12 w-12",r)})})}function g(e){let{gizmo:t,disabled:r}=e,n=(0,u.O)(t),i=(0,a.f)(),l=(0,o.BL)();if(null==n||0===n.length)return null;let c=n.slice(0,l?2:4);return(0,p.jsx)(s.cS,{starterPrompts:c,onSelectStarterPrompt:i,disabled:r})}function x(e){let{gizmo:t,hideOwner:r,showStarterPrompts:n,disableStarterPrompts:i}=e,o=null!=t&&(0,d.WQ)(t)?t.name:t?.gizmo.display.name,l=null!=t&&(0,d.WQ)(t)?t.description:t?.gizmo.display.description;return(0,p.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,p.jsx)("div",{className:"text-center text-2xl font-semibold",children:o}),!r&&(0,p.jsx)("div",{className:"flex items-center gap-1 text-token-text-tertiary",children:(0,p.jsx)(p.Fragment,{children:t&&(0,d.WQ)(t)?(0,p.jsx)(c.Z,{gizmo:t}):(0,p.jsx)(c.Z,{gizmo:t,socials:t.gizmo.author.display_socials})})}),l&&(0,p.jsx)("div",{className:"max-w-md text-center text-sm font-normal text-token-text-primary",children:l}),n&&(0,p.jsx)(g,{gizmo:t,disabled:i})]})}},8643:function(e,t,r){r.d(t,{b:function(){return a},l:function(){return s}});var n=r(83271),i=r(92379),o=r(651);let l=(0,i.createContext)(null);function a(e){let{children:t}=e;return(0,o.jsx)(l.Provider,{value:{store:(0,i.useRef)((0,n.rd)()).current},children:t})}function s(){let e=(0,i.useContext)(l);if(!e)throw Error("usePromptTextareaContext must be used within a PromptTextareaProvider");return e}},83271:function(e,t,r){r.d(t,{Tk:function(){return c},cq:function(){return d},j9:function(){return p},rd:function(){return m}});var n,i,o,l=r(92379),a=r(68810),s=r(73177),u=r(95267);let c=((n={}).Header="Header",n.HeaderTop="HeaderTop",n.HeaderBottom="HeaderBottom",n),d=((i={}).Box="Box",i.ItemActions="ItemActions",i.PromptTextareaAction="PromptTextareaAction",i.BannerTermsDisclaimer="BannerTermsDisclaimer",i.BannerSignup="BannerSignup",i.BannersRateLimit="BannersRateLimit",i.BannerSidekickAnnouncement="BannerSidekickAnnouncement",i.BannerMemoryFull="BannerMemoryFull",i.ParagenControls="ParagenControls",i),p=((o={}).DallePromptControls="DallePromptControls",o),f={contentAreas:{[c.Header]:{dimensions:null,contentId:null},[c.HeaderTop]:{dimensions:null,contentId:null},[c.HeaderBottom]:{dimensions:null,contentId:null}},sharedProps:null};function m(){let e=(0,a.Ue)((0,s.XR)((0,u.n)(()=>f)));function t(t,r){e.setState(e=>{e.contentAreas[t].dimensions=r})}return{reset:()=>e.setState(f),useContentAreaId:t=>e(e=>e.contentAreas[t].contentId),useContentAreaApi:t=>({set:(0,l.useCallback)(r=>e.setState(e=>{e.contentAreas[t].contentId=r}),[t]),remove:(0,l.useCallback)(()=>{e.setState(e=>{e.contentAreas[t].contentId=null})},[t])}),useContentAreaDimensions:(t,r)=>e(e=>r(e.contentAreas[t].dimensions)),useContentAreaResizeObserver(e,r){(0,l.useEffect)(()=>{if(r.current){t(e,r.current.getBoundingClientRect());let n=new ResizeObserver(r=>{for(let n of r)t(e,n.contentRect)});return n.observe(r.current),()=>{n.disconnect(),t(e,null)}}},[r,e])},useIsHeaderContentAreaPopulated:()=>e(e=>!!e.contentAreas[c.HeaderTop].contentId||!!e.contentAreas[c.HeaderBottom].contentId),useSharedProps:t=>e(e=>t?t(e.sharedProps):e.sharedProps),useSetSharedProps:()=>(0,l.useCallback)(t=>{e.setState(e=>{e.sharedProps=t})},[])}}},50820:function(e,t,r){r.d(t,{f:function(){return u}});var n=r(92745),i=r(31438),o=r(90215),l=r(92379),a=r(8643),s=r(70879);function u(){let{store:e}=(0,a.l)(),t=e.useSharedProps();return(0,l.useCallback)(async(e,r,l)=>{if(!t)return;let{clientThreadId:a,currentLeafId:u,onCreateNewCompletion:c,onResetState:d,conversationMode:p}=t;i.vm.hideThreadHeader();let f=`${u}-nextPrompt`;await c({promptId:f,content:(0,o.bf)(e),eventMetadata:{eventSource:"mouse"},completionMetadata:{suggestions:r,conversationMode:p??n.iN.getConversationMode(a)},messageMetadata:{is_starter_prompt:!0,suggestion_type:e.type}});let m=n.tQ.getTree(a).getMessageId(f);d(),(0,o.wj)(e,l,m),(0,s.go)()},[t])}},33138:function(e,t,r){r.d(t,{cS:function(){return E},ch:function(){return A},pF:function(){return I}});var n=r(98601),i=r(52088),o=r(50820),l=r(79946),a=r(25905),s=r(67437),u=r(54097),c=r(35367),d=r(9026),p=r(92745),f=r(86025),m=r(15913),g=r(90215),x=r(45120),h=r(19841),b=r(21389),y=r(88600),v=r(38482),j=r.n(v),w=r(92379),S=r(75325),_=r(25162),O=r(651);let P=["promptStarters","onSelectStarterPrompt","isSendBlocked","clientThreadId","isTwoLine"];function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let C=j()(()=>Promise.all([r.e(8682),r.e(2244)]).then(r.bind(r,23123)).then(e=>e.GetCaState).catch(()=>()=>null),{loadableGenerated:{webpack:()=>[23123]}});function A(e){let{clientThreadId:t}=e,{isUnauthenticated:r}=(0,f.u)(),n=!r,i=(0,p.Zz)(t),l=(0,p.Kt)(t),a=(0,d.ep)(),g=(0,m.BL)(),h=(0,o.f)(),y=(0,s.Bv)(t),v=(0,c.Y)(y),{promptStarters:j,isSuccess:w,isError:S}=(0,u.P)(i&&!l,t,g?2:4),P=j&&j?.length>0,k=w&&P&&n&&!v,{layer:N}=(0,x.AH)("4031588851"),A=N.get("is_two_line",!1);return(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(b.M,{children:(S||w)&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(_.nI,{className:`h-12 w-12 ${n?"":"max-sm:hidden"}`}),k&&(0,O.jsx)(B,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},promptStarters:j,onSelectStarterPrompt:h,isSendBlocked:a,clientThreadId:t,isTwoLine:A}),!P&&n&&!v&&(0,O.jsx)(D,{}),v?(0,O.jsx)(C,{}):null,S&&n&&(0,O.jsx)(D,{})]})})})}function D(){return(0,O.jsx)("div",{className:"mt-7 text-3xl",children:(0,O.jsx)(S.Z,{id:"24tuqq",defaultMessage:"Hi, how can I help?"})})}function B(e){let{promptStarters:t,onSelectStarterPrompt:r,isSendBlocked:n,clientThreadId:o,isTwoLine:l}=e,s=(0,i.Z)(e,P);return(0,w.useEffect)(()=>{(0,g.SB)(t,o)},[o]),(0,O.jsx)(O.Fragment,{children:l?(0,O.jsx)(y.E.div,N(N({},s),{},{className:"absolute bottom-6 w-full px-4",children:(0,O.jsx)(a.Nf,{children:(0,O.jsx)(I,{starterPrompts:t,onSelectStarterPrompt:r,disabled:n})})})):(0,O.jsx)(y.E.div,N(N({},s),{},{children:(0,O.jsx)(E,{starterPrompts:t,onSelectStarterPrompt:r,disabled:n})}))})}let z=/\s/;function E(e){let{starterPrompts:t,onSelectStarterPrompt:r,disabled:n}=e,i=t.map((e,i)=>{let o=e.oneliner??e.title;""===o&&(o=e.body);let a=z.test(o);return(0,O.jsxs)("button",{className:"relative flex w-40 flex-col gap-2 rounded-2xl border border-token-border-light px-3 pb-4 pt-3 text-start align-top text-[15px] shadow-xxs transition enabled:hover:bg-token-main-surface-secondary disabled:cursor-not-allowed",disabled:n,onClick:()=>r(e,t,i),children:[(0,O.jsx)(l.ey,{starterPrompt:e}),(0,O.jsx)("div",{className:(0,h.default)("line-clamp-3 max-w-full text-balance text-gray-600 dark:text-gray-500",a?"break-word":"break-all"),children:o})]},e.id??i)});if(i.length>2){let e=Math.floor(i.length/2);i=[i.slice(0,e),i.slice(e)].map((e,t)=>(0,O.jsx)("div",{className:"flex max-w-3xl flex-wrap items-stretch justify-center gap-4",children:e},t))}return(0,O.jsx)("div",{className:"mx-3 mt-12 flex max-w-3xl flex-wrap items-stretch justify-center gap-4",children:i})}function I(e){let{starterPrompts:t,onSelectStarterPrompt:r,disabled:n}=e,i=t.map((e,i)=>(0,O.jsx)("button",{className:"relative whitespace-nowrap rounded-2xl border border-token-border-light px-4 py-2 text-start align-top text-[15px] shadow-xxs transition enabled:hover:bg-token-main-surface-secondary disabled:cursor-not-allowed",disabled:n,onClick:()=>r(e,t,i),children:(0,O.jsxs)("div",{className:"flex flex-col overflow-hidden",children:[e.title&&(0,O.jsx)("div",{className:"truncate font-semibold",children:e.title}),(0,O.jsx)("div",{className:(0,h.default)("truncate font-normal",e.title?"opacity-50":""),children:e.body})]})},e.id??i)),o=Math.floor(i.length/2);return i=[i.slice(0,o),i.slice(o)].map((e,t)=>(0,O.jsx)("div",{className:"flex flex-col gap-2",children:e},t)),(0,O.jsx)("div",{className:"grid w-full grid-flow-row grid-cols-[repeat(auto-fit,minmax(250px,1fr))] gap-2",children:i})}},25905:function(e,t,r){r.d(t,{Nf:function(){return c},_4:function(){return d},nI:function(){return u}});var n=r(92745),i=r(31438),o=r(19841),l=r(17004),a=r(68745),s=r(651);function u(e){let{clientThreadId:t,showInlineEmbeddedDisplay:r,isStaticSharedThread:l,children:u,withVerticalPadding:c,withHorizontalPadding:d}=e,p=(0,a.L)(),f=(0,i.tN)(e=>e.isDesktopNavCollapsed),m=(0,i.tN)(e=>e.activeStageSidebar),g=d&&!l&&!p,x=d&&p&&!f,h=f&&d&&p,b=d&&(!h||!l||m)&&p,y=(0,n.ot)(t);return(0,s.jsx)("div",{className:(0,o.default)("text-base",c&&"py-[18px]",d&&!p&&"px-3 md:px-4",r&&!l?"ml-5":"m-auto",g&&"md:px-5 lg:px-1 xl:px-5",x&&"md:px-5",b&&`w-full px-3 ${y||m?"":"lg:px-0"}`,h&&"md:px-0"),children:u})}function c(e){let{children:t}=e,r=(0,l.E)(),n=(0,i.tN)(e=>e.isDesktopNavCollapsed);return(0,s.jsx)("div",{className:(0,o.default)("mx-auto flex flex-1 gap-4 text-base md:gap-5 lg:gap-6",n?"md:max-w-3xl":"md:max-w-3xl lg:max-w-[40rem] xl:max-w-[48rem]",r&&"-mx-4"),children:t})}function d(e){let{children:t}=e,r=(0,l.E)(),n=(0,i.tN)(e=>e.isDesktopNavCollapsed);return(0,s.jsx)("div",{className:(0,o.default)("mx-auto gap-4 text-base md:gap-5 lg:gap-6",n?"md:max-w-3xl":"md:max-w-3xl lg:max-w-[40rem] xl:max-w-[48rem]",r&&"-mx-4"),children:t})}},68745:function(e,t,r){r.d(t,{L:function(){return s},m:function(){return u}});var n=r(45120),i=r(92379),o=r(651);function l(e){let{children:t,composerBarSize:r,footerBarSize:n}=e,i=r?.width??null,l=r?.height??null,a=n?.height??null;return(0,o.jsx)("div",{className:"contents",style:{"--composer-bar_current-width":null!==i?`${i}px`:void 0,"--composer-bar_current-height":null!==l?`${l-2}px`:void 0,"--composer-bar_footer-current-height":null!==a?`${a}px`:void 0},children:t})}function a(){let{disabled:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{0:t,1:r}=(0,i.useState)(null),n=(0,i.useRef)(null),o=(0,i.useRef)(null);return[t,(0,i.useCallback)(t=>{if(o.current&&(o.current.disconnect(),o.current=null),n.current=t,e||!t)return;let l=new ResizeObserver(e=>{if(!e.length)return;let{width:t,height:n}=function(e){let t,r;if(e.borderBoxSize){let n=Array.isArray(e.borderBoxSize)?e.borderBoxSize[0]:e.borderBoxSize;t=n.inlineSize,r=n.blockSize}else t=e.contentRect.width,r=e.contentRect.height;return{width:t,height:r}}(e[0]);(0,i.startTransition)(()=>{r(e=>e&&e.width===t&&e.height===n?e:{width:t,height:n})})});l.observe(t),o.current=l},[e])]}function s(){let{value:e}=(0,n.fW)("1487207580");return e}function u(e){let{isArchived:t,defaultWidth:r=640,defaultHeight:n=52}=e,o=s()&&!t,[u,c]=a({disabled:!o}),[d,p]=a({disabled:!o}),f=u?.width??r,m=u?.height??n,g=o?`url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%22${f}%22%20height%3D%22${m}%22%3E%3Crect%20width%3D%22${f}%22%20height%3D%22${m}%22%20rx%3D%2226%22%20ry%3D%2226%22%20fill%3D%22white%22/%3E%3C/svg%3E')`:void 0,x=o?l:i.Fragment;return{composerBarSize:u,composerSkeleton:g,footerBarSize:d,isClippedComposerBar:o,setComposerBarElement:c,setFooterBarElement:p,ThreadSizeWrapper:x}}},54097:function(e,t,r){r.d(t,{O:function(){return f},P:function(){return m}});var n=r(16757),i=r(28368),o=r(93951),l=r(92745),a=r(84760),s=r(2721),u=r(55357),c=r(2319),d=r(39004),p=r(45334);function f(e){return(p.WQ(e)?e.promptStarters:e.gizmo.display.prompt_starters)?.map(e=>({type:i.j.Starter,title:"",body:e,prompt:e}))}function m(e,t,r,p,m){let g=(0,o.hz)(),x=(0,l.WA)(t),h=(0,d.b9)(x?.kind===n.OL.GizmoInteraction?x.gizmo_id:void 0).data,{gizmoEditorData:b,mode:y}=(0,c.Q)(),v=(0,u.B)(x),j=(0,o.t)(),w=e&&!v&&(p||!j?.isEnterprisey()),{data:S,isLoading:_,isSuccess:O,isError:P}=(0,a.a)({queryKey:["promptStarters",t,r,m],queryFn:()=>s.Z.getSampledPromptStarter(r,m),enabled:w});return null==g?{promptStarters:[],isLoading:!0,isSuccess:!1}:"test"===y&&b?{promptStarters:f(b)??[],isLoading:!1,isSuccess:!0}:null!=h?{promptStarters:f(h),isLoading:!1,isSuccess:!0}:w?{promptStarters:S?.items.map(e=>({type:i.j.Starter,id:e.id,title:e.title,body:e.description,prompt:e.prompt,category:e.category,oneliner:e.oneliner,theme:e.theme,requires_file_upload:e.requires_file_upload}))??[],isLoading:_,isSuccess:O,isError:P}:{promptStarters:[],isLoading:!1,isSuccess:!0}}},35367:function(e,t,r){r.d(t,{Y:function(){return o}});var n=r(66234),i=r(92379);function o(e){let t=(0,n.Uq)(),{0:o,1:l}=(0,i.useState)(()=>()=>!1);return(0,i.useEffect)(()=>{t&&Promise.all([r.e(8682),r.e(2244)]).then(r.bind(r,23123)).then(e=>l(()=>e.isModelEligibleForCa)).catch()},[t]),t&&o(e)}},66234:function(e,t,r){r.d(t,{D7:function(){return c},HY:function(){return d},LA:function(){return g},Uq:function(){return p}});var n=r(98601),i=r(88667),o=r(18939),l=r.n(o),a=r(85302);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=!(arguments.length>3)||void 0===arguments[3]||arguments[3],i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===t.length)return e;let r=t.filter(t=>t.end_ix<=e.length&&"tether_markdown"===t.citation_format_type&&t.metadata?.type==="webpage");for(let t=r.length-1;t>=0;t--){let n=r[t];if(n.metadata?.type!=="webpage")continue;let{start_ix:i,end_ix:o,metadata:l}=n,a=e.substring(i,o).replace(/\[(.*?)\]\((\d+)\)/g,`[$1](${l?.url})`);e=e.substring(0,i)+a+e.substring(o)}return e}(e,t),o=[...r.length>0?[]:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===t.length)return[];let r=[],n=t.filter(t=>t.end_ix<=e.length&&"tether_markdown"!==t.citation_format_type),i=(0,a.Jx)(e);for(let e=n.length-1;e>=0;e--){let t;let l=n[e],{start_ix:a,end_ix:s,metadata:c,invalid_reason:d}=l;if(!c?.type)continue;let p=i.slice(a,s).join("");switch(c.type){case"webpage":var o;t=u(u({},c),{},{type:"webpage",title:c.title??"",snippet:c.text??null,pub_date:null==(o=c.pub_date)?null:new Date(o).getTime()/1e3,matched_text:p,start_idx:a,end_idx:s,alt:null});break;case"file":t=u(u({},c),{},{matched_text:p,start_idx:a,end_idx:s,alt:null})}d&&(t={type:"invalid",alt:d,start_idx:a,end_idx:s,matched_text:p,invalid:!0});let f=!1;if(r.length>0){let e=r[r.length-1];m(e)===m(t)&&0===i.slice(e.end_idx,l.start_ix).join("").trim().length&&(r[r.length-1].end_idx=l.end_ix,f=!0)}!f&&t&&r.push(t)}return r}(i,t),...r];return{text:i,contentReferences:l()(o.map(e=>"file"===e.type?g(n,e):e))}}function d(){let{config:e}=(0,i.xb)("1001765573"),t=(0,i.xb)("3168246095");return e.get("ca_enabled",!1)?t.config.get("gizmo_ids",[],f):[]}function p(){return(0,i.xb)("1001765573").config.get("ca_enabled",!1)}function f(e){return Array.isArray(e)&&e.every(e=>"string"==typeof e)}function m(e){switch(e.type){case"file":return e.id;case"webpage":return e.url;case"invalid":return e.alt}}function g(e,t){let r;if(!e)return t;let n=t.name.split("\xa4");if(3!==n.length)return t;let[i,o,l]=n,a=l,s=l.lastIndexOf(".");-1!==s&&(a=l.slice(0,s));let c="Google Drive";if("gdrive"===i)r=`https://drive.google.com/file/d/${o}/view`,c="Google Drive";else if("gdoc"===i)r=`https://docs.google.com/document/d/${o}`,c="Google Docs";else{if("notion"!==i)return t;r=`https://www.notion.so/openai/${o}`,c="Notion"}return u(u({},t),{},{type:"webpage",url:r,title:a,snippet:c,pub_date:null})}},90215:function(e,t,r){r.d(t,{Gb:function(){return d},QO:function(){return c},SB:function(){return f},bf:function(){return u},wj:function(){return p}});var n=r(28368),i=r(92745),o=r(99976),l=r(61619),a=r(82363),s=r(88667);let u=e=>{switch(e.type){case n.j.Reply:return e.text;case n.j.Starter:return e.prompt}},c=e=>e.type===n.j.Reply,d=e=>e.type===n.j.Starter,p=(e,t,r)=>{switch(s.m9.logEvent("chatgpt_prompt_use_suggestion",u(e),{index:`${t}`,type:e.type}),e.type){case n.j.Reply:o.A.logEvent(l.M.useSuggestedReply,{value:u(e),prompt_type:n.j.Reply,messageId:r});break;case n.j.Starter:o.A.logEvent(l.M.useStarterPrompt,{value:u(e),prompt_type:n.j.Starter,title:e.title,id:e.id,category:e.category,messageId:r})}},f=(e,t)=>{let r=i.tQ.getThreadCurrentLeafId(t),u=i.tQ.getTree(t).getMessageId(r);s.m9.logEvent("chatgpt_prompt_show_suggestions",`count_${e.length}`,{type:e[0].type}),e.every(c)?o.A.logEvent(l.M.showSuggestedReplies,{prompt_count:e.length,prompt_type:n.j.Reply,client_thread_id:t,suggestions:e.map(e=>e.text),message_id:u}):e.every(d)?o.A.logEvent(l.M.showStarterPrompts,{prompt_count:e.length,prompt_type:n.j.Starter,titles:e.map(e=>e.title),ids:e.map(e=>e.id),client_thread_id:t,message_id:u}):a.U.addError("Unhandled suggestion type",{type:e[0].type})}}}]);
//# sourceMappingURL=2509-1daa189d0e4e76eb.js.map