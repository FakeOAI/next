"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4620],{74620:function(e,a,s){s.r(a),s.d(a,{default:function(){return m},getCommandsFromMessages:function(){return M},getToolMessages:function(){return f},getVisitedUrl:function(){return h},isBrowseDisplayableCommand:function(){return v}});var i=s(85734),n=s(96243),t=s(11181),r=s(27860),l=s(26123),o=s(25940),g=s(33423),d=s(96294),u=s(58086),c=s(72427),p=s(651);function m(e){let a,{messages:s,clientThreadId:n,isLastMessageInTurn:o,isRequestActive:m,isRetrieval:f}=e,w=(0,l.Z)(),b=s.map(e=>e.message),S=M(b),$=S.filter(e=>v(e,f)),k=(0,t.WA)(n),F=null!=k&&[i.OL.GizmoInteraction,i.OL.GizmoMagicCreate,i.OL.GizmoTest].includes(k.kind),_=g.X.Running,K=f?F?x.searchingKnowledge:x.startingRetrieval:x.starting;return(b.some(c.We)?(_=g.X.Stopped,K=f?F?x.searchingKnowledgeStopped:x.retrievalStopped:x.browsingStopped):o&&m?$.length>0&&({displayMessage:K,displayMessageValues:a}=function(e,a,s){switch(e.type){case i.$x.Search:if(a)return s?{displayMessage:x.searchingKnowledge}:{displayMessage:x.startingRetrieval};{var n;let a=null===(n=e.message.metadata)||void 0===n||null===(n=n.args)||void 0===n?void 0:n[0];if(null!=a)return{displayMessage:x.searchingForQuery,displayMessageValues:{query:a}};return{displayMessage:x.searching}}case i.$x.Click:case i.$x.MultiClick:case i.$x.Lookup:case i.$x.OpenUrl:case i.$x.Quote:case i.$x.QuoteFull:case i.$x.QuoteLines:if(a)return s?{displayMessage:x.searchingKnowledge}:{displayMessage:x.readingDocument,displayMessageValues:{filename:y(e)}};{let a=h(e);return{displayMessage:x.visiting,displayMessageValues:{url:null!=a?(0,r.Uq)(a):null}}}case i.$x.Back:case i.$x.Scroll:throw Error("No display string for command: ".concat(e.type))}}($[$.length-1],f,F)):S.length>0&&S.every(e=>e.didError)?(_=g.X.Error,K=f?F?x.searchingKnowledgeFailed:x.retrievalFailed:x.browsingFailed):(_=g.X.Finished,K=void 0),f)?(0,p.jsx)(g.Z,{conversationMessages:s,icon:f?d.BK:d.ED,status:_,text:K?w.formatMessage(K,a):null,estimatedToolDurationMs:f?u.cf:u.Tv}):_===g.X.Running?(0,p.jsx)("div",{className:"text-message [.text-message+&]:mt-5",children:(0,p.jsx)("div",{className:"result-thinking relative"})}):null}function f(e){return e.filter(e=>e.author.role===i.uU.Tool)}function M(e){return e.map((a,s)=>{if(a.author.role!==i.uU.Tool||s>0&&w(a)&&w(e[s-1]))return null;let n=a.metadata;if(!n)return null;let{command:t,status:r}=n;return t?{type:t,status:r,didError:a.content.content_type===i.PX.SystemError,message:a}:null}).filter(n.l)}function w(e){var a,s,i;return(null===(a=e.metadata)||void 0===a?void 0:a.command)==="quote"||(null===(s=e.metadata)||void 0===s?void 0:s.command)==="quote_full"||(null===(i=e.metadata)||void 0===i?void 0:i.command)==="quote_lines"}function v(e,a){switch(e.type){case i.$x.Search:return!0;case i.$x.Click:case i.$x.Lookup:case i.$x.MultiClick:case i.$x.OpenUrl:case i.$x.Quote:case i.$x.QuoteFull:case i.$x.QuoteLines:return a?null!=y(e):null!=h(e);case i.$x.Back:case i.$x.Scroll:return!1}}function h(e){var a;let s=null===(a=e.message.metadata)||void 0===a||null===(a=a._cite_metadata)||void 0===a?void 0:a.metadata_list[0];return null!=s&&"file"!==s.type?s.url:null}function y(e){var a;let s=null===(a=e.message.metadata)||void 0===a||null===(a=a._cite_metadata)||void 0===a?void 0:a.metadata_list[0];return null!=s&&"file"===s.type?s.name:null}let x=(0,o.vU)({starting:{id:"browsingMessage.startingV3",defaultMessage:"Doing research with Bing"},browsingStopped:{id:"browsingMessage.browsingStopped",defaultMessage:"Stopped browsing"},browsingFailed:{id:"browsingMessage.browsingFailed",defaultMessage:"Error browsing"},searching:{id:"browsingMessage.searching",defaultMessage:"Searching Bing"},searchingForQuery:{id:"browsingMessage.searchingForQuery",defaultMessage:"Searching “{query}”"},visiting:{id:"browsingMessage.visiting",defaultMessage:"Visiting {url}"},startingRetrieval:{id:"browsingMessage.startingRetrieval",defaultMessage:"Reading documents"},retrievalStopped:{id:"browsingMessage.retrievalStopped",defaultMessage:"Stopped reading documents"},retrievalFailed:{id:"browsingMessage.retrievalFailed",defaultMessage:"Error reading documents"},readingDocument:{id:"browsingMessage.readingDocument",defaultMessage:"Reading {filename}"},searchingKnowledge:{id:"browsingMessage.searchingKnowledge",defaultMessage:"Searching my knowledge"},searchingKnowledgeStopped:{id:"browsingMessage.searchingKnowledgeStopped",defaultMessage:"Stopped searching knowledge"},searchingKnowledgeFailed:{id:"browsingMessage.searchingKnowledgeFailed",defaultMessage:"Error searching knowledge"}})}}]);
//# sourceMappingURL=4620.4c47e38538bf047a.js.map