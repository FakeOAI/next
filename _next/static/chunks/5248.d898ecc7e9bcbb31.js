(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5248,6404],{98987:function(e,t,n){var a=n(3284);e.exports=function(e,t){for(var n=-1,r=e.length,l=0,s=[];++n<r;){var i=e[n],o=t?t(i):i;if(!n||!a(o,d)){var d=o;s[l++]=0===i?0:i}}return s}},52538:function(e,t,n){var a=n(61757),r=n(98987);e.exports=function(e,t){return e&&e.length?r(e,a(t,2)):[]}},19042:function(e,t,n){"use strict";n.d(t,{q:function(){return C}});var a,r=n(2346),l=n(11550),s=n(39358),i=n(30115),o=n(13490),d=n(24434),c=n(67330),u=n(91111),f=n(97193),x=n(12381),h=n(27313),v=n(5132),m=n(30757),p=n(79746),b=n(19841),j=n(38482),g=n.n(j),w=n(92379),_=n(15478),y=n(19229),k=n(651);let N=g()(()=>Promise.all([n.e(3904),n.e(3674)]).then(n.bind(n,16476)).then(e=>e.default),{ssr:!1,loadableGenerated:{webpack:()=>[16476]}});function C(e){let{threadId:t,threadUserId:n}=e;return(0,f.W6)(f.bM.isDebugModalOpen)&&(0,k.jsx)(d.Z,{isOpen:!0,onClose:()=>f.vm.toggleDebugModalOpen(),type:"success",size:"fullscreen",noPadding:!0,rootClassName:"z-50",children:(0,k.jsx)(z,{threadId:t,threadUserId:n})})}let E=(e,t)=>{let n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),a=window.URL.createObjectURL(n),r=document.createElement("a");r.href=a,r.download=e,r.click(),window.URL.revokeObjectURL(a)},V="<|im_start|>",M="<|im_sep|>",T="<|im_end|>";function D(e){let{prompt:t}=e,n=[],a=0;for(;;){let e=t.indexOf(V,a);if(-1===e)break;let r=t.indexOf(M,e);if(-1===r)break;let l=t.indexOf(T,r),s=t.indexOf("<|fim_suffix|>",r);if(-1!==s&&(-1===l||s<l)&&(l=s),-1===l)break;let i=t.substring(e+V.length,r),o=t.substring(r+M.length,l);n.push((0,k.jsxs)("div",{children:[(0,k.jsxs)("span",{className:"font-semibold",children:["[",i,"]"]})," ",o]},e)),a=l+T.length}return n}let O=_.Z.div(a||(a=(0,r.Z)(["mb-[-5px] px-2 pb-1 font-semibold uppercase border-b-2 ",""])),e=>{let{$isSelected:t}=e;return t?"border-black dark:border-white":"border-transparent"});function z(e){var t;let{threadId:n,threadUserId:a}=e,{sessionUser:r}=(0,u.A)(),s=(0,x.nn)(x.LW.turns),{0:d,1:p}=(0,w.useState)("json");(0,w.useEffect)(()=>{p(0!==s.length?"turn".concat(s.length-1):"json")},[s.length]);let{data:j,isLoading:g,refetch:_}=(0,h.Y)({threadId:n,threadUserId:a,refetchOnMount:"always"});if(!j&&!g)return(0,k.jsxs)(c.bW,{onClickRetry:()=>_(),children:["Failed to load."," "]});if(!j||g)return(0,k.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:"Loading..."});let y=j.thread,N=null===(t=y.turns[y.turns.length-1])||void 0===t||null===(t=t.artifacts__)||void 0===t||null===(t=t.model_snapshots)||void 0===t?void 0:t.default_id,C=a&&n?(0,v.t5)(a,n):null;return(0,k.jsx)("div",{className:"flex flex-col gap-2 break-words font-mono text-xs",children:(0,k.jsxs)(m.fC,{orientation:"vertical",defaultValue:d,onValueChange:e=>p(e),children:[(0,k.jsxs)(m.aV,{className:"flex items-center justify-center gap-2 px-4 py-1",children:[(0,k.jsx)(m.xz,{value:"json",children:(0,k.jsx)(O,{$isSelected:"json"===d,children:"JSON"})}),s.map((e,t)=>{var n;return(0,k.jsxs)(w.Fragment,{children:[(0,k.jsx)(m.xz,{value:"turn".concat(t),children:(0,k.jsxs)(O,{$isSelected:d==="turn".concat(t),children:["Turn[",t,"]"]})},t),null===(n=y.turns[t])||void 0===n||null===(n=n.artifacts__)||void 0===n||null===(n=n.debug_ddtrace_urls)||void 0===n?void 0:n.map(e=>(0,k.jsx)(O,{$isSelected:!1,children:(0,k.jsxs)("a",{target:"_blank",href:e,className:"text-nowrap",children:["Trace[",t,"] â†—"]})},e))]},t)}),(0,k.jsx)("div",{className:"flex-grow"}),N&&(0,k.jsx)(Z,{name:"Model",id:N}),(0,k.jsx)("span",{className:"text-gray-500 dark:text-white",children:"|"}),r&&(0,k.jsx)(Z,{name:"User ID",id:r.id}),(0,k.jsx)("span",{className:"text-gray-500 dark:text-white",children:"|"}),C&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Z,{name:"Permalink",id:C}),(0,k.jsx)("span",{className:"text-gray-500 dark:text-white",children:"|"})]}),(0,k.jsxs)(l.z,{size:"small",color:"secondary",onClick:()=>E("thread.json",y),children:[(0,k.jsx)(o._8t,{className:"icon-sm"})," thread.json"]}),(0,k.jsx)(i.P,{onClick:()=>f.vm.toggleDebugModalOpen()})]}),s.map((e,t)=>{var n,a,r;return(0,k.jsxs)(m.VY,{value:"turn".concat(t),className:"max-h-[calc(100vh-46px)] w-full overflow-y-scroll scroll-smooth",children:[(0,k.jsxs)("div",{className:(0,b.default)("flex flex-col gap-1 p-6",e.index%2==0&&"bg-token-main-surface-tertiary"),children:[(0,k.jsx)(D,{prompt:null!==(n=null===(a=y.turns[t])||void 0===a||null===(a=a.artifacts__)||void 0===a||null===(a=a.debug_info)||void 0===a||null===(a=a.main_model_response)||void 0===a?void 0:a.prompt_string)&&void 0!==n?n:""}),(0,k.jsxs)("div",{children:[(0,k.jsx)("span",{className:"font-semibold",children:"[assistant]"})," ",null===(r=e.model_response)||void 0===r?void 0:r.text]})]})," "]},t)}),(0,k.jsx)(m.VY,{value:"json",className:"max-h-[calc(100vh-46px)] w-full overflow-y-scroll scroll-smooth p-6",children:(0,k.jsx)(R,{data:y,collapsed:4})})]},j.turns.length)})}function R(e){let{data:t,collapsed:n}=e,{0:a,1:r}=(0,w.useState)(null==n||n);return(0,k.jsxs)("div",{className:"flex flex-col items-start gap-1",children:[(0,k.jsx)("button",{onClick:()=>r(!a),className:"flex items-center gap-1",children:a?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(y.rIY,{size:14})," Expand all"]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(y.NsE,{size:14})," Collapse all"]})}),(0,k.jsx)(N,{json:t,jsonViewProps:{collapsed:a,shortenTextAfterLength:0}},String(a))]})}function Z(e){let{name:t,id:n}=e,a=(0,w.useCallback)(()=>{(0,p.v)(n)},[n]);return(0,k.jsxs)("div",{className:"flex items-center gap-2 truncate",children:[(0,k.jsxs)("span",{className:"text-nowrap font-semibold",children:[t,":"]}),(0,k.jsx)("span",{title:n,className:"truncate text-gray-500 dark:text-white",children:n}),(0,k.jsx)(s.Z,{onCopy:a})]})}},27313:function(e,t,n){"use strict";n.d(t,{Y:function(){return i},v:function(){return o}});var a=n(84760),r=n(92379),l=n(81014),s=n(12381);function i(e){let{threadId:t,threadUserId:n,refetchOnMount:r}=e;return(0,a.a)({queryKey:["thread",t,n],queryFn:async()=>{if(!t)return{thread:null,turns:null};let e=await (0,l.K8)({threadId:t,threadUserId:n}),a=e.turns;return{thread:e,turns:a}},enabled:!!t,refetchOnMount:r})}function o(e){var t;let{threadId:n,threadUserId:a}=e,l=i({threadId:n,threadUserId:a}),o=l.data;return(0,r.useEffect)(()=>{if(n){var e;s.P3.setThread(n,null!==(e=null==o?void 0:o.turns)&&void 0!==e?e:[])}},[n,o]),{query:null===(t=l.data)||void 0===t||null===(t=t.turns[0])||void 0===t?void 0:t.user_query,refetch:l.refetch,isLoading:l.isLoading,isError:l.isError}}},78571:function(e,t,n){"use strict";n.d(t,{_:function(){return s}});var a=n(37088),r=n(92379),l=n(52125);let s=(0,r.forwardRef)((e,t)=>(0,r.createElement)(l.WV.label,(0,a.Z)({},e,{ref:t,onMouseDown:t=>{var n;null===(n=e.onMouseDown)||void 0===n||n.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault()}})))},30757:function(e,t,n){"use strict";n.d(t,{VY:function(){return V},aV:function(){return C},fC:function(){return N},xz:function(){return E}});var a=n(37088),r=n(92379),l=n(10132),s=n(31541),i=n(65954),o=n(79813),d=n(52125),c=n(76228),u=n(48758),f=n(28531);let x="Tabs",[h,v]=(0,s.b)(x,[i.Pc]),m=(0,i.Pc)(),[p,b]=h(x),j=(0,r.forwardRef)((e,t)=>{let{__scopeTabs:n,value:l,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:x,activationMode:h="automatic",...v}=e,m=(0,c.gm)(x),[b,j]=(0,u.T)({prop:l,onChange:s,defaultProp:i});return(0,r.createElement)(p,{scope:n,baseId:(0,f.M)(),value:b,onValueChange:j,orientation:o,dir:m,activationMode:h},(0,r.createElement)(d.WV.div,(0,a.Z)({dir:m,"data-orientation":o},v,{ref:t})))}),g=(0,r.forwardRef)((e,t)=>{let{__scopeTabs:n,loop:l=!0,...s}=e,o=b("TabsList",n),c=m(n);return(0,r.createElement)(i.fC,(0,a.Z)({asChild:!0},c,{orientation:o.orientation,dir:o.dir,loop:l}),(0,r.createElement)(d.WV.div,(0,a.Z)({role:"tablist","aria-orientation":o.orientation},s,{ref:t})))}),w=(0,r.forwardRef)((e,t)=>{let{__scopeTabs:n,value:s,disabled:o=!1,...c}=e,u=b("TabsTrigger",n),f=m(n),x=y(u.baseId,s),h=k(u.baseId,s),v=s===u.value;return(0,r.createElement)(i.ck,(0,a.Z)({asChild:!0},f,{focusable:!o,active:v}),(0,r.createElement)(d.WV.button,(0,a.Z)({type:"button",role:"tab","aria-selected":v,"aria-controls":h,"data-state":v?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:x},c,{ref:t,onMouseDown:(0,l.M)(e.onMouseDown,e=>{o||0!==e.button||!1!==e.ctrlKey?e.preventDefault():u.onValueChange(s)}),onKeyDown:(0,l.M)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&u.onValueChange(s)}),onFocus:(0,l.M)(e.onFocus,()=>{let e="manual"!==u.activationMode;v||o||!e||u.onValueChange(s)})})))}),_=(0,r.forwardRef)((e,t)=>{let{__scopeTabs:n,value:l,forceMount:s,children:i,...c}=e,u=b("TabsContent",n),f=y(u.baseId,l),x=k(u.baseId,l),h=l===u.value,v=(0,r.useRef)(h);return(0,r.useEffect)(()=>{let e=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,r.createElement)(o.z,{present:s||h},({present:n})=>(0,r.createElement)(d.WV.div,(0,a.Z)({"data-state":h?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":f,hidden:!n,id:x,tabIndex:0},c,{ref:t,style:{...e.style,animationDuration:v.current?"0s":void 0}}),n&&i))});function y(e,t){return`${e}-trigger-${t}`}function k(e,t){return`${e}-content-${t}`}let N=j,C=g,E=w,V=_}}]);
//# sourceMappingURL=5248.d898ecc7e9bcbb31.js.map