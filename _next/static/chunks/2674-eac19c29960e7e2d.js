(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2674,6638,5418,4315],{68039:function(e,t,r){var s=r(790),n=r(65064),a=r(43735),i=r(2428),o=r(71701),l=r(7757),c=r(92403),d=r(56868),u=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(o(e)&&(i(e)||"string"==typeof e||"function"==typeof e.splice||l(e)||d(e)||a(e)))return!e.length;var t=n(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(c(e))return!s(e).length;for(var r in e)if(u.call(e,r))return!1;return!0}},59725:function(e,t,r){"use strict";r.d(t,{B0:function(){return x},EF:function(){return g},Yt:function(){return h},k$:function(){return p},m0:function(){return w},zf:function(){return b}});var s=r(71522),n=r(19841),a=r(15478),i=r(93951),o=r(31498),l=r(40743),c=r(25162),d=r(79946),u=r(651);let p=e=>{let{iconName:t,className:r,notice:s,size:a="medium"}=e,i=c.nI;return"user"===t&&(i=l.tBG),(0,u.jsxs)(j,{className:(0,n.default)(r,m[a]),children:[(0,u.jsx)(i,{className:f[a]}),s&&("warning"===s||"danger"===s)&&(0,u.jsx)(y,{$type:s,children:"!"})]})},m={small:"h-[18px] w-[18px]",gizmo:"h-8 w-8",gizmoConversation:"h-6 w-6",medium:"h-8 w-8",workspaceMedium:"h-9 w-9",large:"h-12 w-12",workspaceAvatarPreview:"h-24 w-24",cover:"h-[234px] w-[234px]"},g={small:18,gizmo:32,gizmoConversation:24,medium:32,workspaceMedium:36,large:48,workspaceAvatarPreview:96,cover:234},f={small:"icon-xs",medium:"icon-md",workspaceMedium:"icon-md",large:"icon-lg",workspaceAvatarPreview:"icon-workspace-avatar-preview",cover:"icon-cover",gizmo:"icon-md",gizmoConversation:"icon-sm"},h=e=>{let{user:t,notice:r}=e,s=r&&("warning"===r||"danger"===r)&&(0,u.jsx)(y,{$type:r,children:"!"});if(t?.picture)return(0,u.jsxs)("div",{className:(0,n.default)("relative flex",e.customStyle?e.className:""),children:[(0,u.jsx)("img",{src:t.picture,alt:"User",width:e.customStyle?e.size:g[e.size],height:e.customStyle?e.size:g[e.size],className:e.customStyle?"":e.roundedStyle??"rounded-sm",referrerPolicy:"no-referrer"}),s]});let a=(t?.name??"").split(" ").map(e=>e[0]).join("");return(0,u.jsx)("div",{className:"overflow-hidden rounded-full",style:e.customStyle?{width:e.size,height:e.size}:{width:g[e.size],height:g[e.size]},children:(0,u.jsxs)("div",{className:(0,n.default)("relative flex items-center justify-center bg-blue-300 text-white",e.customStyle?e.className:(0,n.default)("gizmo"===e.size?"h-7 w-7 overflow-hidden rounded-full text-xs":"h-full w-full","small"===e.size||"gizmo"===e.size||"gizmoConversation"===e.size?"text-xs":"text-sm")),children:[a?(0,u.jsx)("div",{className:"indent-[0.1em] tracking-widest",children:a}):(0,u.jsx)(l.tBG,{className:e.customStyle?"h-4/5 w-4/5":f[e.size]}),s]})})};function x(e){let{src:t,size:r="large",alt:s}=e;return(0,u.jsx)(u.Fragment,{children:t?(0,u.jsx)("img",{src:t,className:"inline rounded-full bg-token-main-surface-secondary",alt:s??"",width:g[r],height:g[r]}):(0,u.jsx)(c.Wv,{width:g[r].toString(),height:g[r].toString()})})}function b(e){let{className:t,iconSize:r="medium",notice:a,workspace:l}=e,c=(0,i.t)();l??=c;let d=l?.isPersonalAccount(),p=(0,o.aF)();return(0,u.jsx)(s.ZP,{children:(0,u.jsx)("div",{className:(0,n.default)("flex items-center justify-center overflow-hidden rounded-full",t),children:!l||d&&void 0!==p?(0,u.jsx)(h,{user:p,size:r,notice:a}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(x,{src:l.data.profilePictureUrl,size:r}),a&&(0,u.jsx)(y,{$type:a,children:"!"})]})})})}let v=a.Z.div`relative p-1 rounded-sm h-9 w-9 flex items-center justify-center`,j=e=>{let{className:t,children:r}=e;return(0,u.jsx)(v,{className:t,children:r})},y=a.Z.span`
  absolute w-4 h-4 rounded-full text-[10px] text-white flex  justify-center items-center right-0 top-[20px] -mr-2 border border-white
  ${e=>{let{$type:t}=e;return"warning"===t&&"bg-orange-500 text-white"}}
  ${e=>{let{$type:t}=e;return"danger"===t&&"bg-red-500 text-white"}}
`;function w(e){let{name:t,size:r,className:s,initialsCount:a=1}=e,i="";return i=1===a?t.charAt(0):t.split(" ").slice(0,2).map(e=>e[0]).join(""),(0,u.jsx)("div",{className:(0,n.default)("overflow-hidden rounded-full pt-[4.5px] text-center text-[9px] font-extralight text-white",s),style:{backgroundColor:function(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)+t^e.charCodeAt(r);return d.e_[Math.abs(t)%d.e_.length]}(t),width:g[r]+"px",height:g[r]+"px"},children:i})}},39358:function(e,t,r){"use strict";r.d(t,{Z:function(){return f}});var s=r(98601),n=r(92379),a=r(47584),i=r(75325),o=r(15478),l=r(15174),c=r(30853),d=r(40743),u=r(651);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach(function(t){(0,s.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let g=(0,a.vU)({copy:{id:"CopyButton.copy",defaultMessage:"Copy"},copied:{id:"CopyButton.copied",defaultMessage:"Copied!"}});function f(e){let{buttonText:t,shouldChangeText:r=!0,iconClassName:s="icon-sm",onCopy:a,className:o}=e,{0:p,1:f}=(0,n.useState)(!1),x=(0,l.Z)(),b=(0,n.useCallback)(e=>{e.stopPropagation(),a(),f(!0),setTimeout(()=>{x()&&f(!1)},2e3)},[x,a]),v=t;return r&&p?v=(0,u.jsx)(i.Z,m({},g.copied)):!0===t&&(v=(0,u.jsx)(i.Z,m({},g.copy))),(0,u.jsxs)(u.Fragment,{children:[!p&&(0,u.jsx)(c.u,{label:(0,u.jsx)(i.Z,{id:"CopyButton.copyTooltip",defaultMessage:"Copy"}),sideOffset:0,children:(0,u.jsxs)(h,{onClick:b,className:o,children:[(0,u.jsx)(d.TIy,{className:s}),v]})}),p&&(0,u.jsxs)(h,{className:o,children:[(0,u.jsx)(d.$As,{className:s}),v]})]})}let h=o.Z.button`flex gap-1 items-center`},38838:function(e,t,r){"use strict";r.d(t,{Dz:function(){return o},Rp:function(){return l},Yf:function(){return i}});var s=r(19841),n=r(40743),a=r(651);function i(e){let{className:t}=e;return(0,a.jsx)(n.ob9,{className:(0,s.default)(t,"rtl:-scale-x-100")})}function o(e){let{className:t}=e;return(0,a.jsx)(n.Y1T,{className:(0,s.default)(t,"rtl:-scale-x-100")})}function l(e){let{className:t}=e;return(0,a.jsx)(n.Y4O,{className:(0,s.default)(t,"rtl:-scale-x-100")})}},71522:function(e,t,r){"use strict";r.d(t,{Md:function(){return l}});var s=r(38482),n=r.n(s);r(92379);var a=r(651);let i=e=>{let{children:t}=e;return(0,a.jsx)(a.Fragment,{children:t})},o=n()(()=>Promise.resolve(i),{ssr:!1});t.ZP=o;let l=o},76638:function(e,t,r){"use strict";r.r(t),r.d(t,{DirectorySyncResourceManagedIndication:function(){return l}});var s=r(98601),n=r(75325),a=r(47584),i=r(651);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function l(){return(0,i.jsx)("div",{className:"flex items-center",children:(0,i.jsx)("div",{className:"flex rounded-md bg-orange-300 px-1 text-center text-white dark:bg-orange-800",children:(0,i.jsx)("span",{className:"text-[0.5em] font-bold leading-4",children:(0,i.jsx)(n.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){(0,s.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},c.scimIndicatorText))})})})}let c=(0,a.vU)({scimIndicatorText:{id:"workspaceIdentity.directorySyncResourceTagTitle",defaultMessage:"SCIM"}})},21025:function(e,t,r){"use strict";r.d(t,{YK:function(){return a},ai:function(){return i},nJ:function(){return o}});var s=r(10080);function n(e){return e==s.Zz.User||e==s.Zz.Group?s.Zz.Private:e==s.Zz.WorkspaceLink?s.Zz.Workspace:e}function a(e,t){return e=n(e),void 0!==t&&t.some(t=>t.recipient===e&&t.allowed)}function i(e,t){if(void 0===t)return[];e=n(e);let r=t.find(t=>t.recipient===e);return r?.moderated_fields}function o(e,t){let r=i(e,t);return r&&r.length>0}r(651)},51307:function(e,t,r){"use strict";r.d(t,{JE:function(){return _},MU:function(){return G},Te:function(){return S},UJ:function(){return C},z$:function(){return T}});var s,n,a,i=r(98601),o=r(59144),l=r(24434),c=r(39004),d=r(99555),u=r(10080),p=r(93951),m=r(42420),g=r(88667),f=r(82920),h=r(91530),x=r.n(h),b=r(92379),v=r(47584),j=r(75325),y=r(49764),w=r(15478),k=r(21025),P=r(651);function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach(function(t){(0,i.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let z=w.Z.a`bold underline`,M=w.Z.textarea`w-full text-sm overflow-y-auto rounded-lg border px-3 py-2 focus:ring-2 focus:ring-blue-400 border-token-border-medium bg-token-main-surface-primary h-32`,C=((s={})[s.None=0]="None",s[s.AppealAvailable=1]="AppealAvailable",s[s.AppealSent=2]="AppealSent",s),S=((n={})[n.None=0]="None",n[n.PublishBlocked=1]="PublishBlocked",n[n.RemovedFromMarketplace=2]="RemovedFromMarketplace",n[n.RemovedFromPublic=3]="RemovedFromPublic",n[n.RemovedFromPrivate=4]="RemovedFromPrivate",n[n.Recategorized=5]="Recategorized",n);function T(e){if(!e)return;let t=e.gizmo.appeal_info?.state.kind==="appeal_sent",r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=new Set(t.filter(e=>e.allowed).map(e=>e.recipient));if(!e||(e in Z&&(e=Z[e]),r.has(e)))return S.None;let s=r.has(u.Zz.Private)||r.has(u.Zz.Workspace),n=r.has(u.Zz.Link)||r.has(u.Zz.Marketplace);return e===u.Zz.Marketplace&&n?S.RemovedFromMarketplace:!n&&s?S.RemovedFromPublic:S.RemovedFromPrivate}(e.gizmo.share_recipient,e.gizmo.sharing_targets);return{sharingRecipient:e.gizmo.share_recipient,categories:e.gizmo.categories,gizmoId:e.gizmo.id,moderationType:r,sharingTargets:e.gizmo.sharing_targets,showModal:t?C.AppealSent:r!==S.None?C.AppealAvailable:C.None}}let Z={[u.Zz.User]:u.Zz.Private,[u.Zz.Group]:u.Zz.Private,[u.Zz.WorkspaceLink]:u.Zz.Workspace};function E(e){switch(e){case S.None:case S.PublishBlocked:return(0,v.Em)({id:"gizmo.appeals.publishBlockedTitle",defaultMessage:"Your changes couldn’t be published"});case S.RemovedFromMarketplace:return(0,v.Em)({id:"gizmo.appeals.removedFromMarketplaceTitle",defaultMessage:"Your GPT has been removed from the marketplace"});case S.RemovedFromPublic:return(0,v.Em)({id:"gizmo.appeals.removedFromPublicTitle",defaultMessage:"Your GPT has been removed from public view"});case S.Recategorized:return(0,v.Em)({id:"gizmo.appeals.recategorizedTitle",defaultMessage:"Your GPT has been recategorized"});default:(0,f.ZP)(e)}}function _(e){let{sharingRecipient:t,moderatedFields:r,appealAvailable:s}=e,n=r.length;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)("p",{children:[(0,P.jsx)(j.Z,O(O({},function(e){switch(e){case u.Zz.Private:case u.Zz.Workspace:return(0,v.Em)({id:"gizmo.appeals.privateRecipientModerationText",defaultMessage:"Your GPT can’t be updated because it violates our {usagePolicyLink}Usage Policies{usagePolicyLink}."});case u.Zz.Link:return(0,v.Em)({id:"gizmo.appeals.linkRecipientModerationText",defaultMessage:"Your GPT can’t be shared publicly because it violates our {usagePolicyLink}Usage Policies{usagePolicyLink}."});case u.Zz.Marketplace:return(0,v.Em)({id:"gizmo.appeals.marketplaceRecipientModerationText",defaultMessage:"Your GPT can’t appear in the Explore GPTs page because it violates our {usagePolicyLink}Usage Policies{usagePolicyLink}."});default:(0,f.ZP)(e)}}(t)),{},{values:{usagePolicyLink:e=>(0,P.jsx)(z,{target:"_blank",href:"https://openai.com/policies/usage-policies",rel:"noreferrer",children:e})}}))," ",n>0&&(0,P.jsx)(j.Z,{id:"gizmo.appeals.seeBelowForSpecificIssues",defaultMessage:"{numModeratedFields, plural, one {See below for the specific issue:} other {See below for the specific issues:} }",values:{numModeratedFields:n}})]}),n>0&&r?.map(e=>P.jsxs(P.Fragment,{children:[P.jsx("p",{className:"font-bold",children:P.jsx(j.Z,O({},function(e){switch(e){case"profile_picture":return(0,v.Em)({id:"gizmo.appeals.profilePictureFieldName",defaultMessage:"Profile Picture"});case"gizmo_name":return(0,v.Em)({id:"gizmo.appeals.gizmoNameFieldName",defaultMessage:"Name"});case"gizmo_description":return(0,v.Em)({id:"gizmo.appeals.gizmoDescriptionFieldName",defaultMessage:"Description"});case"gizmo_instructions":return(0,v.Em)({id:"gizmo.appeals.gizmoInstructionsFieldName",defaultMessage:"Instructions"});case"gizmo_welcome_message":return(0,v.Em)({id:"gizmo.appeals.gizmoWelcomeMessageFieldName",defaultMessage:"Welcome Message"});case"custom_actions":return(0,v.Em)({id:"gizmo.appeals.customActionsFieldName",defaultMessage:"Custom Actions"});case"conversation_starter":return(0,v.Em)({id:"gizmo.appeals.conversationStarterFieldName",defaultMessage:"Conversation Starter"});case"file":return(0,v.Em)({id:"gizmo.appeals.fileFieldName",defaultMessage:"File"});case"gizmo_combined_content":return(0,v.Em)({id:"gizmo.appeals.gizmoCombinedContentFieldName",defaultMessage:"Overall GPT Config"})}}(e.name)))}),P.jsx("ul",{className:"list-disc pl-5",children:e.reasons.map(e=>P.jsxs("li",{children:[e.description," ",e.link?P.jsx(z,{href:e.link,target:"_blank",rel:"noreferrer",children:P.jsx(j.Z,{id:"gizmo.appeals.learnMore",defaultMessage:"Learn more"})}):""]},e.description))})]})),s&&(0,P.jsx)("p",{children:(0,P.jsx)(j.Z,{id:"gizmo.appeals.appealAvailableText",defaultMessage:"Alternatively you may appeal this decision and we will get back to you as soon as possible. Or you can publish to “Only me” and use this GPT privately."})})]})}var I=((a=I||{})[a.Initial=0]="Initial",a[a.AppealForm=1]="AppealForm",a[a.SubmittedConfirmation=2]="SubmittedConfirmation",a);function L(e){let{gizmoId:t,sharingRecipient:r,categories:s,moderationType:n,sharingTargets:a,appealAvailable:i,onClose:c,onAppealSubmitted:u}=e,g=(0,y.Z)(),{0:f,1:h}=(0,b.useState)(""),{0:x,1:v}=(0,b.useState)(I.Initial),w=(0,m.NL)(),N=async()=>{await d.U.postGizmoAppeal(w,t,f,r,s),v(I.SubmittedConfirmation),u?.()},O=(0,k.ai)(r,a),z=O?.length??0,C=(0,p.t)();if(0==z&&C?.isEnterprisey())return(0,P.jsx)(l.Z,{title:g.formatMessage(E(n)),isOpen:!0,onClose:c,showCloseButton:!0,type:"warning",primaryButton:(0,P.jsx)(o.Z.Button,{color:"primary",onClick:c,children:(0,P.jsx)(j.Z,{id:"wEsAOU",defaultMessage:"OK"})}),children:(0,P.jsx)("p",{className:"text-sm",children:(0,P.jsx)(j.Z,{id:"gizmo.appeals.workspaceSettingsMessage",defaultMessage:"Access to your GPT has been reduced by your workspace's GPT sharing settings. An owner of the workspace can change these settings in the workspace settings page."})})});switch(x){case I.Initial:return(0,P.jsx)(l.Z,{title:g.formatMessage(E(n)),isOpen:!0,onClose:c,showCloseButton:!0,primaryButton:(0,P.jsx)(o.Z.Button,{color:"primary",onClick:c,children:(0,P.jsx)(j.Z,{id:"gizmo.appeals.contunueButton",defaultMessage:"Continue"})}),secondaryButton:i?(0,P.jsx)(o.Z.Button,{onClick:()=>v(I.AppealForm),children:(0,P.jsx)(j.Z,{id:"gizmo.appeals.appealButton",defaultMessage:"Appeal"})}):void 0,type:"warning",children:(0,P.jsx)("div",{className:"flex flex-col gap-2 text-sm",children:(0,P.jsx)(_,{sharingRecipient:r,moderatedFields:O??[],appealAvailable:i})})});case I.AppealForm:return(0,P.jsx)(l.Z,{title:g.formatMessage({id:"gizmo.appeals.appealModalTitle",defaultMessage:"Appeal"}),isOpen:!0,onClose:c,showCloseButton:!0,shouldIgnoreClickOutside:!0,primaryButton:(0,P.jsx)(o.Z.Button,{color:"primary",onClick:N,disabled:0===f.trim().length,children:(0,P.jsx)(j.Z,{id:"gizmo.appeals.submitAppealButton",defaultMessage:"Submit"})}),secondaryButton:(0,P.jsx)(o.Z.Button,{onClick:()=>v(I.Initial),children:(0,P.jsx)(j.Z,{id:"gizmo.appeals.backButton",defaultMessage:"Back"})}),type:"warning",children:(0,P.jsxs)("div",{className:"flex flex-col gap-2 text-sm",children:[(0,P.jsx)("p",{children:(0,P.jsx)(j.Z,{id:"gizmo.appeals.appealReasonText",defaultMessage:"Please provide a reason for why you believe this GPT doesn’t violate our policies and should be published"})}),(0,P.jsx)(M,{value:f,onChange:e=>h(e.target.value)})]})});case I.SubmittedConfirmation:return(0,P.jsx)(P.Fragment,{})}}function A(e){let{onClose:t}=e,r=(0,y.Z)();return(0,P.jsx)(l.Z,{title:r.formatMessage({id:"gizmo.appeals.appealSubmittedModalTitle",defaultMessage:"Appeal submitted"}),isOpen:!0,onClose:t,showCloseButton:!0,primaryButton:(0,P.jsx)(o.Z.Button,{color:"primary",onClick:t,children:(0,P.jsx)(j.Z,{id:"gizmo.appeals.closeButton",defaultMessage:"Close"})}),type:"success",children:(0,P.jsx)("div",{className:"flex flex-col gap-2 text-sm",children:(0,P.jsx)("div",{children:(0,P.jsx)(j.Z,{id:"gizmo.appeals.appealSubmittedText",defaultMessage:"Your appeal has been submitted. We will get back to you as soon as possible."})})})})}function D(e){let{gizmoId:t,onClose:r}=e,{data:s}=(0,c.b9)(t,!0),n=(0,m.NL)(),a=async()=>{await d.U.postGizmoCancelAppeal(n,t)};return(0,P.jsx)(l.Z,{isOpen:!0,onClose:x(),primaryButton:(0,P.jsx)(o.Z.Button,{color:"primary",onClick:()=>{a(),r?.()},children:(0,P.jsx)(j.Z,{id:"gizmo.appeals.cancelAppealButton",defaultMessage:"Cancel appeal"})}),type:"warning",children:(0,P.jsxs)("div",{className:"flex flex-col gap-2 text-sm",children:[(0,P.jsx)("h2",{className:"text-lg font-semibold",children:(0,P.jsx)(j.Z,{id:"gizmo.appeals.appealReviewingHeader",defaultMessage:"Reviewing your appeal"})}),(0,P.jsx)("p",{children:(0,P.jsx)(j.Z,{id:"gizmo.appeals.appealSentModalText",defaultMessage:"During the review you can continue using “{gizmoName}” as your private GPT, but won’t be able to update it or share it with others.",values:{gizmoName:s?.gizmo.display.name}})})]})})}function G(e){let{appealState:t,onAppealClose:r,onAppealSubmitted:s}=e,{value:n}=(0,g.sB)("4226692983"),{0:a,1:i}=(0,b.useState)(!1);return a?(0,P.jsx)(A,{onClose:()=>{i(!1),s?.()}}):(0,P.jsxs)(P.Fragment,{children:[t?.showModal==C.AppealSent&&(0,P.jsx)(D,{gizmoId:t.gizmoId,onClose:r}),t?.showModal==C.AppealAvailable&&(0,P.jsx)(L,{gizmoId:t.gizmoId,sharingRecipient:t.sharingRecipient,categories:t.categories,moderationType:t.moderationType,sharingTargets:t.sharingTargets,appealAvailable:n,onClose:()=>r?.(),onAppealSubmitted:()=>i(!0)})]})}},22674:function(e,t,r){"use strict";r.d(t,{V9:function(){return tH},yf:function(){return tX}});var s,n=r(98601),a=r(99333),i=r(16757),o=r(97537),l=r(98303),c=r(51307),d=r(11550),u=r(6440),p=r(66587),m=r(40743),g=r(71090),f=r(92379),h=r(75325),x=r(88301),b=r(651);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function y(e){let{gizmoEditorData:t,onOpen:r}=e,s=t?.tools?.find(e=>e.type===a.qK.INTENT&&"prompt_config"in e.settings),{0:n}=(0,f.useState)(s?.settings.prompt_config??[]),{0:i}=(0,f.useState)(s?.settings.state_keys??[]);return(0,b.jsxs)(x.hj,{children:[(0,b.jsx)("div",{className:"text-sm",children:(0,b.jsx)(x.lX,{label:"Blocks + State",description:"Blocks and State for your GPT"})}),(0,b.jsxs)("div",{className:"mb space-y-1",children:[!(n||i)&&(0,b.jsx)("div",{className:"flex text-token-text-primary",children:"Add prompt blocks and state keys to your GPT"}),(0,b.jsx)(g.cY,{onClick:()=>r(),children:n||i?"Show Blocks & State":"Add Blocks & State"})]})]})}function w(e){let{gizmoEditorData:t,updateGizmo:r,onClose:s}=e,n=t?.tools?.find(e=>e.type===a.qK.INTENT&&"prompt_config"in e.settings),{0:i,1:o}=(0,f.useState)(n?.settings.prompt_config??[]),{0:l,1:c}=(0,f.useState)(n?.settings.state_keys??[]),u={key_name:"",description:""},p={prompt_key:"",prompt:"",continuation:"",hidden:!1},v=()=>{r(e=>j(j({},e),{},{tools:n?e.tools.map(e=>e.type===a.qK.INTENT?j(j({},e),{},{settings:j(j({},e.settings),{},{prompt_config:i,state_keys:l})}):e):[...e.tools,{type:a.qK.INTENT,settings:{prompt_config:i,state_keys:l}}]}))};return(0,b.jsxs)("div",{className:"h-full overflow-auto px-4 pb-12 text-sm",children:[(0,b.jsxs)("div",{className:"relative flex flex-col items-center px-16 py-6 text-center",children:[(0,b.jsx)("div",{className:"absolute left-0 top-6",children:(0,b.jsx)(d.z,{color:"secondary",onClick:s,icon:m.DUf})}),(0,b.jsx)("div",{className:"text-xl font-semibold",children:(0,b.jsx)(h.Z,{id:"eIFoMg",defaultMessage:"Blocks & State"})}),(0,b.jsx)("div",{className:"text-sm text-token-text-tertiary",children:(0,b.jsx)(h.Z,{id:"rdK8Dl",defaultMessage:"Construct your GPT with instruction blocks and state."})}),(0,b.jsx)(x.lX,{label:(0,b.jsx)("div",{className:"text-sm font-semibold text-token-text-tertiary",children:"Learn more"}),description:(0,b.jsxs)("div",{className:"space-y-2 text-sm font-normal",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("b",{children:"Blocks"})," allow you to break up your GPT's instructions into smaller sections, letting the GPT decide which to load up in what scenario."]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("b",{children:"State"})," gives the GPT a per-user storage for data, that will be provided at the start of all new conversations."]})]})})]}),(0,b.jsx)(x.hj,{children:(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("div",{className:"mb-4 space-y-5 text-lg",children:[(0,b.jsx)(x.lX,{label:(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)("span",{children:"Instruction Blocks"}),(0,b.jsx)(m.szr,{className:"icon-sm"})]}),description:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{children:"Instruction Blocks are added to the end of your GPT's instructions when the GPT decides to use them."}),(0,b.jsx)("div",{children:"The GPT only knows these blocks by their name. and your initial GPT instructions must describe how to use at least one of these blocks."})]})}),(0,b.jsxs)("div",{className:"space-y-5 text-sm",children:[i.map((e,t)=>(0,b.jsx)(k,{promptKey:e.prompt_key,prompt:e.prompt,continuation:e.continuation,hidden:e.hidden,visible:!1,isDuplicate:i.filter(t=>t.prompt_key===e.prompt_key).length>1,onChange:e=>{let{promptKey:r,prompt:s,continuation:n,hidden:a}=e;o(e=>{let i=[...e];return i[t]={prompt_key:r,prompt:s,continuation:n,hidden:a},i}),v()},onDelete:e=>{let{promptKey:t}=e;o(e=>e.filter(e=>e.prompt_key!==t)),v()}},t)),(0,b.jsx)(g.cY,{onClick:()=>{o(e=>[...e,p])},children:"Add Block"})]}),(0,b.jsx)(x.lX,{label:(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)("span",{children:"Saved State"}),(0,b.jsx)(m.szr,{className:"icon-sm"})]}),description:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{children:"State the GPT can save per-user, that will be provided at the start of all new conversations"}),(0,b.jsx)("div",{children:"Your GPT has access to write to these state entries, and read from them."}),(0,b.jsx)("div",{children:"The user can see this data."})]})}),l.map((e,t)=>(0,b.jsx)(P,{keyName:e.key_name,description:e.description,isDuplicate:l.filter(t=>t.key_name===e.key_name).length>1,onChange:e=>{let{keyName:r,description:s}=e;c(e=>{let n=[...e];return n[t]={key_name:r,description:s},n}),v()},onDelete:e=>{let{keyName:t}=e;c(e=>e.filter(e=>e.key_name!==t)),v()}},t))]}),(0,b.jsx)(g.cY,{onClick:()=>{c(e=>[...e,u])},children:"Add State Data"})]})})]})}function k(e){let{promptKey:t,prompt:r,continuation:s,hidden:n,visible:a,isDuplicate:i,onChange:o,onDelete:l}=e,{0:c,1:d}=(0,f.useState)(n),{0:g,1:h}=(0,f.useState)(a),v=[];t.length>20&&v.push({msg:"Block names work best when they are short"}),i&&v.push({msg:"Block names must be unique"});let j=v.length>0?m.ETw:void 0;return(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsxs)("div",{className:"flex space-x-2 text-sm",children:[(0,b.jsx)(x.lX,{collapsed:!g,label:"Block",onClick:()=>{h(!g)}}),(0,b.jsx)(u.Z,{name:"promptKey",value:t,onChange:e=>o({promptKey:e.target.value,prompt:r,continuation:s}),icon:j,className:"max-w-xs grow-0",placeholder:"Block name"})]}),v.map(e=>(0,b.jsx)("div",{className:"text-xs text-token-text-secondary",children:e.msg},e.msg)),g&&(0,b.jsxs)("div",{className:"mb-4 space-y-1",children:[(0,b.jsx)(p.Z,{rows:5,name:"prompt",value:r,onChange:e=>o({promptKey:t,prompt:e.target.value,continuation:s}),className:"grow",placeholder:"Block Text"}),N&&(0,b.jsxs)("div",{className:"flex space-x-2 text-sm",children:[(0,b.jsx)("div",{role:"button",className:"flex items-center space-x-2",onClick:()=>{o({promptKey:t,prompt:r,continuation:s,hidden:!c}),d(!c)},children:c?(0,b.jsx)(m.Xl7,{className:"icon-sm"}):(0,b.jsx)(m.tEF,{className:"icon-sm"})}),(0,b.jsx)(x.lX,{label:"Continue on to:",description:"When set, the GPT will automatically go to the that block after this one."}),(0,b.jsx)(u.Z,{name:"continuation",value:s,onChange:e=>o({promptKey:t,prompt:r,continuation:e.target.value}),className:"max-w-xs grow-0",placeholder:"Continuation"})]}),(0,b.jsx)("div",{role:"button",className:"flex items-center space-x-2",onClick:()=>{l({promptKey:t})},children:(0,b.jsx)(m.XHJ,{className:"icon-sm"})})]})]})}function P(e){let{keyName:t,description:r,isDuplicate:s,onChange:n,onDelete:a}=e,i=[];t.length>20&&i.push({msg:"State names work best when they are short"}),s&&i.push({msg:"State names must be unique"});let o=i.length>0?m.ETw:void 0;return(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsxs)("div",{className:"flex space-x-2 text-sm",children:[(0,b.jsx)(u.Z,{name:"key",value:t,onChange:e=>n({keyName:e.target.value,description:r}),icon:o,className:"max-w-xs grow-0",placeholder:"State Name"}),(0,b.jsx)(u.Z,{name:"description",value:r,onChange:e=>n({keyName:t,description:e.target.value}),className:"max-w-s flex-grow",placeholder:"Description"}),(0,b.jsx)("div",{role:"button",className:"flex items-center space-x-2",onClick:()=>{a({keyName:t})},children:(0,b.jsx)(m.XHJ,{className:"icon-sm"})})]}),i.map(e=>(0,b.jsx)("div",{className:"text-xs text-token-text-secondary",children:e.msg},e.msg))]})}let N=!1;var O=r(39004),z=r(10080),M=r(24740),C=r(67437),S=r(93951),T=r(41987),Z=r(92745),E=r(31498),_=r(92319),I=r(13391),L=r(3551),A=r(38724),D=r(43991),G=r(42420),R=r(99976),U=r(61619),B=r(82363),F=r(13249),W=r(19841),K=r(17806),Y=r.n(K),V=r(89678),q=r.n(V),X=r(65925),Q=r.n(X),$=r(38482),J=r.n($),H=r(34977),ee=r(49764),et=r(47584),er=r(12128),es=r(46702),en=r(31438),ea=r(66290),ei=r(88667),eo=r(15478),el=r(38838),ec=r(98095),ed=r(76665),eu=r(99555),ep=r(41177),em=r(23763),eg=r.n(em),ef=r(24434),eh=r(30853),ex=r(21025),eb=r(81107);function ev(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function ej(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ev(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ev(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ey(e){let{gizmo:t,updateGizmo:r,publishedGizmo:s,promoteGizmo:n,appealGizmo:a,setAppealState:i,showActionsModal:o,shareOnly:l,onClose:c}=e,{0:d,1:u}=(0,f.useState)({type:"privacy"});return"privacy"===d.type?(0,b.jsx)(ew,{gizmo:t,updateGizmo:r,publishedGizmo:s,promoteGizmo:n,appealGizmo:a,setAppealState:i,setStep:u,showActionsModal:o,shareOnly:l,onClose:c}):(0,b.jsx)(ek,{publishedGizmo:d.publishedGizmo,onClose:c})}function ew(e){let{gizmo:t,publishedGizmo:r,updateGizmo:s,promoteGizmo:n,appealGizmo:i,setAppealState:o,setStep:l,showActionsModal:u,shareOnly:p,onClose:m}=e,{0:g,1:x}=(0,f.useState)(!1),v=(0,E.ec)(E.F_.isBusinessWorkspace),j=(0,ee.Z)(),{0:y,1:w}=(0,f.useState)((0,O.Sg)(t)?v?z.Zz.Workspace:z.Zz.Link:t.sharingRecipient),k=(0,G.NL)(),P=(0,ex.YK)(y,t.sharingTargets),{data:N,isLoading:C}=(0,O.WL)(),T=(0,O.Z1)(),{0:Z,1:_}=(0,f.useState)(null!=r&&r.gizmo.display.categories.length>0?T.data?.categories.find(e=>e.id===r.gizmo.display.categories[0])?.id:void 0);(0,f.useEffect)(()=>{_(r?.gizmo.display.categories[0])},[r?.gizmo.display.categories]);let{0:I,1:L}=(0,f.useState)(void 0),A=(0,f.useRef)(eg()((e,t)=>eu.U.generateCategory(e,t),1e3)),R=N?.is_verified?void 0:j.formatMessage({id:"qEQtmt",defaultMessage:"To publish your GPTs to the Explore GPTs page, set up your builder profile."});y!==z.Zz.Marketplace||null==R||C||w(z.Zz.Link);let U=v&&!t.sharingTargets?.some(e=>e.recipient===z.Zz.Link),B=(0,ed.bw)(t,y,Z),F=B.includes(ed.hs.MissingPublicActionPrivacyPolicyURL),W=t.tools.find(e=>e.type===a.qK.JIT_PLUGIN&&!e.metadata.privacy_policy_url),K=(0,E.ec)(e=>e.currentWorkspace),Y=(0,S.hz)();(0,f.useEffect)(()=>{let e=!0;return(async()=>{try{if(null!=Z)return;let r=await A.current(t.name,t.instructions);e&&null==Z&&(r?_(r.id):L(!0))}catch(t){e&&null==Z&&L(!0)}})(),()=>{e=!1}},[t.instructions,t.name,Y,Z]);let{value:V}=(0,ei.sB)("4226692983");return(0,b.jsx)(ef.Z,{type:"success",isOpen:!0,onClose:m,title:(0,b.jsx)(h.Z,{id:"9viumf",defaultMessage:"Share GPT"}),showCloseButton:!0,primaryButton:P?(0,b.jsx)(d.z,{color:"primary",disabled:B.length>0,loading:g,onClick:async()=>{try{if(x(!0),p){if(!r?.gizmo.id){M.m.danger(j.formatMessage({id:"QYVEx8",defaultMessage:"Error sharing GPT"}));return}let e=await eu.U.shareGizmo(r.gizmo.id,Z?{sharing:(0,z.Mj)(y,[],z.EL),categories:[Z]}:{sharing:(0,z.Mj)(y,[],z.EL)});e.error?(M.m.warning(j.formatMessage({id:"tmIKmp",defaultMessage:"Unable to share GPT"})),s({sharingTargets:e.sharing_targets}),o({gizmoId:r.gizmo.id,sharingRecipient:y,categories:r.gizmo.display.categories,moderationType:c.Te.PublishBlocked,sharingTargets:e.sharing_targets,showModal:c.UJ.AppealAvailable})):(k.setQueryData(["gizmo",{gizmoId:r.gizmo.id},{draft:!1}],t=>e.resource),s(e=>ej(ej({},e),{},{sharingRecipient:y})),M.m.success(j.formatMessage({id:"SWSzcY",defaultMessage:"Sharing settings updated"})),m())}else{let e=await n({recipient:y,subjects:(0,z.Mj)(y,[],z.EL)},Z);e?(l({type:"published",publishedGizmo:e}),s(t=>ej(ej({},t),{},{id:e.gizmo.id,sharingRecipient:y})),null!=e.gizmo.live_version&&s({liveVersion:e.gizmo.live_version}),M.m.success(j.formatMessage({id:"R5zko1",defaultMessage:"GPT published"}))):(M.m.warning(j.formatMessage({id:"uf7WYw",defaultMessage:"Unable to publish GPT"})),m())}}finally{x(!1)}},children:(0,b.jsx)(h.Z,{id:"SW4DG4",defaultMessage:"Save"})}):V?(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(d.z,{color:"primary",onClick:async()=>{await i(y,Z)},children:(0,b.jsx)(h.Z,{id:"bBmLUr",defaultMessage:"Appeal"})})}):null,secondaryButton:r?(0,b.jsx)(d.z,{color:"secondary",onClick:()=>(0,eb.A4)(r,j.formatMessage({id:"KdDqMm",defaultMessage:"Copied link to clipboard"})),children:(0,b.jsx)(h.Z,{id:"wvL15a",defaultMessage:"Copy link"})}):null,children:(0,b.jsxs)("div",{className:"mx-[-16px] flex flex-col gap-3 text-sm",children:[(0,b.jsx)("div",{className:"space-y-1.5",children:(0,b.jsxs)(D.fC,{value:y,onValueChange:e=>w(e),children:[t.sharingTargets&&t.sharingTargets.map((e,t)=>(0,b.jsx)(eN,{value:e.recipient,disabled:e.recipient===z.Zz.Marketplace&&null!=R,tooltipText:e.recipient===z.Zz.Marketplace?R??j.formatMessage({id:"0Rcb4e",defaultMessage:"Your GPT will appear in the Explore GPTs page"}):void 0,shareLevel:e.recipient},t)),U&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(eN,{value:z.Zz.Link,disabled:!0,tooltipText:j.formatMessage(eP.workspaceDisabledHint),shareLevel:z.Zz.Link,workspaceName:K?.name}),(0,b.jsx)(eN,{value:z.Zz.Link,disabled:!0,tooltipText:j.formatMessage(eP.workspaceDisabledHint),shareLevel:z.Zz.Marketplace,workspaceName:K?.name})]})]})}),F&&(0,b.jsx)("div",{className:"text-xs text-red-500",children:(0,b.jsx)(h.Z,{id:"/iw1Iv",defaultMessage:"Public actions require valid privacy policy URLs. Click <fixlink>here</fixlink> to update.",values:{fixlink:e=>(0,b.jsx)("button",{onClick:()=>{u(W?.metadata.action_id)},className:"underline",children:e})}})}),y!==z.Zz.Private&&(0,b.jsx)(ep.O2,{gizmo:t,category:Z,categories:y===z.Zz.Marketplace?T.data?.categories??[]:void 0,onCategoryChange:y===z.Zz.Marketplace?e=>_(e.id):void 0}),y===z.Zz.Marketplace&&(I?(0,b.jsx)("div",{className:"text-xs text-red-500",children:(0,b.jsx)(h.Z,{id:"tpC3ui",defaultMessage:"There was an error updating the list of categories"})}):null),!P&&V&&(0,b.jsx)("div",{className:"flex items-center justify-between text-sm text-token-text-secondary",children:(0,b.jsx)(h.Z,{id:"jLCMMV",defaultMessage:"Because this GPT previously may have violated our policies, you will have to submit an appeal to make it available at this level."})})]})})}function ek(e){let{publishedGizmo:t,onClose:r}=e,s=(0,eb.Rb)(t),n=(0,ee.Z)();return(0,b.jsx)(ef.Z,{type:"success",isOpen:!0,onClose:r,title:(0,b.jsx)(h.Z,{id:"rCRRmx",defaultMessage:"Settings Saved"}),showCloseButton:!0,primaryButton:(0,b.jsx)(d.z,{color:"primary",as:"link",to:s,children:(0,b.jsx)(h.Z,{id:"lyZz44",defaultMessage:"View GPT"})}),children:(0,b.jsx)("div",{className:"flex flex-col gap-2",children:(0,b.jsxs)("div",{className:"flex gap-1 rounded bg-token-main-surface-secondary px-2 py-1",children:[(0,b.jsx)("div",{className:"line-clamp-1 text-ellipsis break-all",children:s}),(0,b.jsx)("button",{onClick:()=>{(0,eb.A4)(t,n.formatMessage({id:"KdDqMm",defaultMessage:"Copied link to clipboard"}))},className:"text-token-text-secondary transition hover:text-token-text-primary",children:(0,b.jsx)(m.TIy,{className:"icon-sm"})})]})})})}let eP=(0,et.vU)({workspaceDisabledHint:{id:"gizmo.workspaceDisabledHint",defaultMessage:"Your workspace administrator has disabled this setting"}});function eN(e){let{shareLevel:t,workspaceName:r,value:s,disabled:n=!1,tooltipText:a}=e,i=(0,f.useId)();return(0,b.jsx)(eh.E,{disabled:null==a,label:a,side:"top",children:(0,b.jsxs)(D.ck,{id:i,value:s,disabled:n,className:"flex h-14 w-full cursor-pointer flex-row items-center justify-between gap-2 rounded-md px-3 py-4 font-semibold hover:bg-token-main-surface-secondary",children:[(0,b.jsx)("label",{htmlFor:i,className:"flex cursor-pointer items-center gap-1",children:(0,b.jsx)(ep.C6,{shareLevel:t,workspaceName:r??"",hasInviteSharing:!1})}),(0,b.jsx)(D.z$,{children:(0,b.jsx)(m.kvR,{className:"icon-lg mr-1"})})]})})}function eO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function ez(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eO(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eO(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function eM(e){e(window.history.length>1?-1:(0,L.L7)())}function eC(e){let{gizmo:t,publishedGizmo:r,isLoading:s,isUploadingProfilePic:n,isGeneratingProfilePic:a,updateGizmo:i,promoteGizmo:o,appealGizmo:l,setAppealState:c,showActionsModal:d}=e,u=(0,S.t)(),p=null!=t?(0,ed.bw)(t):[];(null==t||s)&&p.push(ed.hs.Loading),n&&p.push(ed.hs.UploadingProfilePic),a&&p.push(ed.hs.GeneratingProfilePic);let m=(0,O.Sg)(t),{0:x,1:v}=(0,f.useState)(!1),{0:j,1:y}=(0,f.useState)(!1),w=t.sharingRecipient?ep.P6[t.sharingRecipient]:ep.P6.private;return(0,b.jsxs)(b.Fragment,{children:[m?(0,b.jsx)(g.cY,{color:"primary",onClick:()=>v("promote"),loading:s,disabled:void 0===t.id||p.length>0,tooltip:p.length>0?p.map(ed.sw).join("\n"):void 0,children:(0,b.jsx)(h.Z,{id:"svUGIb",defaultMessage:"Create"})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(g.cY,{color:"secondary",loading:s||!r,onClick:()=>v("share"),children:[(0,b.jsx)(w,{className:"icon-sm shrink-0"}),(0,b.jsx)(h.Z,{id:"aXKW4G",defaultMessage:"Share"})]}),(0,b.jsx)(g.cY,{color:"primary",onClick:async()=>{let e=t.sharing.subjects.map(ep.xH),s=(0,z.H$)(t.sharing.subjects);e=(0,z.Mj)(t.sharing.recipient,e,s?.capabilities??z.EL),await o({recipient:t.sharing.recipient,subjects:e},r?.gizmo.display.categories[0])&&y(!0)},loading:s||!r,disabled:p.length>0,tooltip:p.length>0?p.map(ed.sw).join("\n"):void 0,children:(0,b.jsx)(h.Z,{id:"84QVoj",defaultMessage:"Update"})})]}),x&&(u?.getWorkspaceId()==void 0?(0,b.jsx)(ey,{gizmo:t,publishedGizmo:r,promoteGizmo:o,appealGizmo:l,setAppealState:c,showActionsModal:d,updateGizmo:i,shareOnly:"share"===x,onClose:()=>v(!1)}):(0,b.jsx)(ep.hD,{gizmo:t,publishedGizmo:r,promoteGizmo:o,appealGizmo:l,setAppealState:c,showActionsModal:d,updateGizmo:i,onClose:()=>v(!1),shareOnly:"share"===x})),j&&(0,b.jsx)(ep.uj,{publishedGizmo:r,sharing:r.gizmo.sharing,onClose:()=>y(!1),workspaceName:u?.data.name??""})]})}function eS(e){let{gizmoEditorData:t,publishedGizmo:r,revertDraft:s}=e,n=(0,ee.Z)(),a=(0,ea.Z)(),{0:i,1:o}=(0,f.useState)(!1),l=(0,S.hz)(),{value:c}=(0,ei.sB)("3645668434");return l?.includes("debug")||t?.id!=null?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(ec.d,{side:"top",contentAlign:"end",sideOffset:8,triggerButton:(0,b.jsx)(g.cY,{color:"ghost",icon:m.nWS}),children:[null!=r&&(0,b.jsxs)(ec.Z.Item,{onClick:()=>{(0,eb.A4)(r)},children:[(0,b.jsx)(m.xPt,{className:"icon-sm"}),(0,b.jsx)(h.Z,ez({},eI.copyLink))]}),null!=s&&(0,b.jsxs)(ec.Z.Item,{onClick:()=>{window.confirm(n.formatMessage(eI.revertConfirm))&&s()},children:[(0,b.jsx)(m.Ezi,{className:"icon-sm"}),(0,b.jsx)(h.Z,{id:"W2blnV",defaultMessage:"Revert..."})]}),t?.id!=null&&c&&t.liveVersion>0&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(ec.Z.Item,{onClick:()=>{a(`/g/${t.id}/view`)},children:[(0,b.jsx)(m.JJ3,{className:"icon-sm"}),(0,b.jsx)(h.Z,{id:"gizmo.versionHistory",defaultMessage:"Version History"})]}),(0,b.jsxs)(ec.Z.Item,{onClick:async()=>{let e=await eu.U.copyGizmo({gizmoId:t.id});e.gizmo.id&&a(`/gpts/editor/${e.gizmo.id}`)},children:[(0,b.jsx)(m.TIy,{className:"icon-sm"}),(0,b.jsx)(h.Z,{id:"GizmoInformation.copyGizmoLabel",defaultMessage:"Duplicate GPT"})]})]}),t?.id!=null&&(0,b.jsxs)(ec.Z.Item,{color:"danger",onClick:()=>{o(!0)},children:[(0,b.jsx)(m.XHJ,{className:"icon-sm"}),(0,b.jsx)(h.Z,{id:"tNrOLG",defaultMessage:"Delete GPT"})]}),l?.includes("debug")&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(ec.Z.Separator,{}),(0,b.jsxs)(ec.Z.Item,{onClick:()=>{en.vm.toggleActiveSidebar("debug")},children:[(0,b.jsx)(m.reV,{className:"icon-sm"}),"Debug (Internal only)"]})]})]}),i&&(0,b.jsx)(es.b,{gizmoId:t.id,onSuccess:()=>eM(a),onClose:()=>{o(!1)}})]}):null}let eT=eo.Z.div`flex items-center gap-1`;function eZ(e){let{gizmoEditorData:t}=e,r=(0,E.ec)(e=>e.currentWorkspace?.name);switch(t.sharingRecipient){case z.Zz.Private:return(0,b.jsxs)(eT,{children:[(0,b.jsx)(m.oVl,{className:"icon-xs"}),(0,b.jsx)(h.Z,ez({},eI.onlyMe))]});case z.Zz.Link:return(0,b.jsxs)(eT,{children:[(0,b.jsx)(m.xPt,{className:"icon-xs"}),(0,b.jsx)(h.Z,ez({},eI.anyoneWithLink))]});case z.Zz.Workspace:return(0,b.jsxs)(eT,{children:[(0,b.jsx)(m.ZyV,{className:"icon-xs"}),r]});case z.Zz.Marketplace:return(0,b.jsxs)(eT,{children:[(0,b.jsx)(m.frp,{className:"icon-xs"}),(0,b.jsx)(h.Z,ez({},eI.public))]});default:return(0,b.jsx)("div",{})}}function eE(e){let{gizmoEditorData:t}=e;return(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[null!=t.profilePictureUrl?(0,b.jsx)(er.Z,{isFirstParty:!1,src:t.profilePictureUrl,className:"h-8 w-8"}):(0,b.jsx)("div",{className:"h-8 w-8 rounded-full border-2 border-dashed border-token-border-medium"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold",children:t.name||(0,b.jsx)(h.Z,ez({},eI.newGPT))}),(0,b.jsx)("div",{className:"text-xs text-token-text-secondary",children:(0,O.Sg)(t)?(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("div",{className:"h-1.5 w-1.5 rounded-full bg-token-text-tertiary"}),(0,b.jsx)(h.Z,ez({},eI.draft))]}):(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("div",{className:"h-1.5 w-1.5 rounded-full bg-brand-green"}),t.sharingRecipient===z.Zz.Marketplace?(0,b.jsx)(h.Z,ez({},eI.published)):(0,b.jsx)(h.Z,{id:"gizmoEditorHeader.live",defaultMessage:"Live"})," \xb7 ",(0,b.jsx)(eZ,{gizmoEditorData:t})]})})]})]})}function e_(e){let{gizmoEditorData:t,isLoading:r,isUploadingProfilePic:s,isGeneratingProfilePic:n,publishedGizmo:a,updateGizmo:i,promoteGizmo:o,appealGizmo:l,setAppealState:c,revertDraft:d,draftMessage:u,className:p,hasUnpublishedChanges:m,showActionsModal:g}=e,f=(0,ea.Z)();return(0,b.jsxs)("div",{className:(0,W.default)("relative flex h-14 w-full items-center justify-between gap-2 border-b border-token-border-medium px-3",p),children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("a",{className:"cursor-pointer text-token-text-primary",onClick:()=>eM(f),children:(0,b.jsx)(el.Dz,{className:"icon-lg"})}),(0,b.jsx)(eE,{gizmoEditorData:t})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[u,(0,b.jsx)(eS,{gizmoEditorData:t,publishedGizmo:a,revertDraft:d}),(0,b.jsx)(eC,{gizmo:t,publishedGizmo:a,isLoading:r,isUploadingProfilePic:s,isGeneratingProfilePic:n,updateGizmo:i,promoteGizmo:o,appealGizmo:l,setAppealState:c,hasUnpublishedChanges:m,showActionsModal:g})]})]})}let eI=(0,et.vU)({onlyMe:{id:"gizmo.onlyMe",defaultMessage:"Only me"},anyoneWithLink:{id:"gizmo.anyoneWithLink",defaultMessage:"Anyone with a link"},public:{id:"gizmo.public",defaultMessage:"Everyone"},newGPT:{id:"gizmo.newGPT",defaultMessage:"New GPT"},draft:{id:"gizmo.draft",defaultMessage:"Draft"},published:{id:"gizmo.published",defaultMessage:"Published"},revertConfirm:{id:"gizmo.revertConfirm",defaultMessage:"Are you sure you want to revert to the last saved version?"},copyLink:{id:"gizmo.copyLink",defaultMessage:"Copy link"}});var eL=r(18939),eA=r.n(eL),eD=r(64216),eG=r(25899),eR=r(72349),eU=r(44395),eB=r(20772),eF=r(45027),eW=r(84082),eK=r(93866),eY=r(98628),eV=r(66114);function eq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function eX(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eq(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eq(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function eQ(){return(0,b.jsx)("div",{className:"relative flex h-full w-full items-center justify-center rounded-full border-2 border-dashed border-token-border-medium",children:(0,b.jsx)(o.Z,{className:"h-1/4 w-1/4"})})}function e$(e){let{gizmoEditorData:t,onFileChange:r,generateProfilePic:s,isGeneratingProfilePic:n,setIsGeneratingProfilePic:i}=e,o=(0,ee.Z)(),{0:l,1:c}=(0,f.useState)(void 0),d=(0,f.useRef)(r);async function u(e){if(e.length>0){i(!1);let t=await (0,eV.WI)(e[0],512),r=(0,eY.W7)(t);c({tempId:r,file:t,status:eK.XX.Uploading,progress:1,fileId:null,cdnUrl:null}),d.current("uploading"),(0,eY.lU)(r,t,o,a.Ei.ProfilePicture,{onFileCreated(e,t,r){c(s=>"initial"!==s&&s?.tempId===e&&s.status===eK.XX.Uploading?eX(eX({},s),{},{progress:10,fileId:t,cdnUrl:r}):s)},onFileUploadProgress(e,t){c(r=>"initial"!==r&&r?.tempId===e&&r.status===eK.XX.Uploading?eX(eX({},r),{},{progress:t}):r)},onFileUploaded(e,t,r){c(t=>"initial"!==t&&t?.tempId===e?(d.current(t),eX(eX({},t),{},{status:eK.XX.Ready,progress:100,fileSpec:eX({name:t.file.name,id:t.fileId,size:t.file.size},r??{})})):t)},onError(e){c(t=>{if("initial"!==t&&t?.tempId===e){d.current(void 0);return}return t})}})}}(0,f.useEffect)(()=>{d.current=r});let{open:p,getInputProps:g}=(0,eR.uI)(eX({disabled:!1,noClick:!0,onDropAccepted:u,onDropRejected:e=>(0,eB.UJ)(e,o,eK.AJ.ProfilePicture),multiple:!0,maxSize:eW.xC},(0,eV.Z8)(eV.KL)));return(0,b.jsxs)("div",{className:"flex w-full items-center justify-center gap-4",children:[(0,b.jsxs)(ec.d,{sideOffset:8,triggerButton:(0,b.jsx)("button",{className:"h-20 w-20",children:n?(0,b.jsx)(eQ,{}):null!=l&&"initial"!=l&&l.status!=eK.XX.Ready?(0,b.jsxs)("div",{className:"relative h-full w-full overflow-hidden rounded-full",children:[(0,b.jsx)(eF.l,{file:l.file}),l.status===eK.XX.Uploading&&l.progress<90?(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/5 text-white",children:(0,b.jsx)(eU.Z,{percentage:l.progress,className:"h-6 w-6"})}):null]}):t?.profilePictureUrl!=null&&t?.profilePictureUrl!==""?(0,b.jsx)(er.Z,{isFirstParty:!1,src:t.profilePictureUrl}):(0,b.jsx)("div",{className:"flex h-full w-full items-center justify-center rounded-full border-2 border-dashed border-token-border-medium",children:(0,b.jsx)(m.Vz5,{className:"text-4xl"})})}),children:[(0,b.jsx)(ec.Z.Item,{onClick:p,children:(0,b.jsx)(h.Z,{id:"ERQwXg",defaultMessage:"Upload Photo"})}),(0,b.jsx)(ec.Z.Item,{onClick:s,children:(0,b.jsx)(h.Z,{id:"NXAog/",defaultMessage:"Use DALL\xb7E"})})]}),(0,b.jsx)("input",eX({},g()))]})}function eJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function eH(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eJ(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eJ(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function e0(e){let{gizmoEditorData:t,updateGizmo:r}=e,s=t?.tools?.find(e=>e.type===a.qK.INTENT&&"intents"in e.settings),{0:n,1:i}=(0,f.useState)(s?.settings.intents??""),{0:o,1:l}=(0,f.useState)(s?.settings.intent_hook??""),{0:c,1:u}=(0,f.useState)(!1),p=(0,ee.Z)(),m=()=>{r(e=>eH(eH({},e),{},{tools:s?e.tools.map(e=>e.type===a.qK.INTENT?eH(eH({},e),{},{settings:eH(eH({},e.settings),{},{intents:n,intent_hook:o})}):e):[...e.tools,{type:a.qK.INTENT,settings:{intents:n,intent_hook:o}}]})),u(!1)};return(0,b.jsxs)(x.hj,{children:[(0,b.jsx)(x.lX,{label:"GPT Script",description:p.formatMessage({id:"gizmo.gptScriptExplanation",defaultMessage:"Code and Intents to save GPT state"})}),c&&(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)(x.lX,{label:"Intent Hook"}),(0,b.jsx)(x.B1,{value:o,rows:20,onChange:e=>l(e.target.value),placeholder:`def f(input):
return {
  "instructions": str(input.intent),
  "conversation_state": input.conversation_state,
  "user_state": input.user_state,
  "pinned": {},
}`,className:"h-50 mb-4 block w-full resize-none rounded-md border border-gray-300 p-2 font-mono text-xs shadow-sm focus:border-blue-500 focus:ring-blue-500",spellCheck:"false"}),(0,b.jsx)(x.lX,{label:"Intents"}),(0,b.jsx)(x.B1,{value:n,rows:20,onChange:e=>i(e.target.value),placeholder:"Enter Intent",className:"h-50 mb-4"}),(0,b.jsx)(d.z,{color:"primary",onClick:()=>{m()},children:"Update"})]}),!c&&(0,b.jsx)(g.cY,{onClick:()=>u(!0),children:o?"Update Script":"Add Script"})]})}var e1=r(2721),e2=r(21389),e4=r(88600),e3=r(51857),e5=r.n(e3);function e8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function e7(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?e8(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e8(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function e9(e){let{gizmoEditorData:t,requireGizmoId:r,currentModelConfig:s,updateGizmo:n}=e,i=(0,ee.Z)(),{0:o,1:l}=(0,f.useState)(0),c=(0,f.useRef)(new Map),d=(0,eV.Zp)(s,void 0),u=async e=>{R.A.logEvent(U.M.uploadFile,{client:"web",eventSource:"mouse",intent:"gizmo"});let t=await r();e.length>0&&await Promise.all(e.map(e=>{let r=(0,eY.W7)(e);c.current.set(r,{tempId:r,gizmoId:t,file:e,status:eK.XX.Uploading,progress:1,fileId:null,cdnUrl:null}),(0,eY.cT)((0,eY.W7)(e),e,i,{kind:a.Ei.Gizmo,gizmoId:t},{onFileUploaded:(e,t,r,s)=>{let a=c.current.get(e);null!=a&&null!=a.fileId&&(n(e=>e7(e7({},e),{},{files:[...e.files??[],{file_id:a.fileId,name:a.file.name,size:a.file.size,type:a.file.type,last_modified:a.file.lastModified,file_size_tokens:s?.fileTokenSize}]})),c.current.delete(e),l(e=>e+1))},onFileCreated:(r,s,n)=>{c.current.set(r,e7(e7({tempId:r,gizmoId:t,file:e,status:eK.XX.Uploading,progress:1},c.current.get(r)),{},{fileId:s,cdnUrl:n})),l(e=>e+1)},onFileUploadProgress:(e,t)=>{let r=c.current.get(e);r?.status===eK.XX.Uploading&&c.current.set(e,e7(e7({},r),{},{progress:t})),l(e=>e+1)},onError:e=>{c.current.delete(e)}},{usesRetrievalIndex:null!=s&&(0,eV._0)(s,e.type,e.name)===a.Cd.Retrieval})}))},{getInputProps:p,open:m}=(0,eR.uI)(e7({disabled:!1,noClick:!0,onDropAccepted:u,multiple:!0,maxSize:eW.xC,maxFiles:10},(0,eV.Z8)(d))),x=t?.files??[];function v(e){return(0,b.jsx)(eF.Z,{onRemoveFileClick:()=>{c.current.delete(e.tempId),l(e=>e+1)},file:e.file,loadingPercentage:e.status===eK.XX.Uploading?e.progress:void 0},e.tempId)}function j(e){return(0,b.jsx)(eF.Z,{file:e.name,fileId:e.file_id,onRemoveFileClick:()=>n(t=>e7(e7({},t),{},{files:t?.files?.filter(t=>t.file_id!==e.file_id)})),gizmoId:t?.id},e.file_id)}let y=Array.from(c.current.values()).filter(e=>x.every(t=>t.file_id!==e.fileId)),[w,k]=e5()(y,e=>null!=s&&(0,eV._0)(s,e.file.type,e.file.name)===a.Cd.CodeInterpreter),[P,N]=e5()(x,e=>null!=s&&null!=e.type&&(0,eV._0)(s,e.type,e.name)===a.Cd.CodeInterpreter),O=(0,f.useRef)(P.length);return(0,f.useEffect)(()=>{P.length>O.current&&n(e=>e.tools?.some(e=>e.type===a.qK.PYTHON)?e:e7(e7({},e),{},{tools:[...e.tools??[],{type:a.qK.PYTHON}]})),O.current=P.length},[P.length]),(0,b.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,b.jsx)("div",{className:"rounded-lg text-token-text-tertiary",children:(0,b.jsx)(h.Z,e7({},e6.knowledgeWarning))}),k.length>0||N.length>0?(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[k.map(v),N.map(j)]}):null,w.length>0||P.length>0?(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"mb-2 text-xs text-token-text-tertiary",children:(0,b.jsx)(h.Z,{id:"i/QurZ",defaultMessage:"The following files are only available for Code Interpreter:"})}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[w.map(v),P.map(j)]})]}):null,(0,b.jsx)("div",{children:(0,b.jsxs)(g.cY,{onClick:m,children:[(0,b.jsx)("input",e7({},p())),(0,b.jsx)(h.Z,{id:"sr8Qp/",defaultMessage:"Upload files"})]})})]})}let e6=(0,et.vU)({knowledgeWarning:{id:"gizmo.knowledgeWarning",defaultMessage:"If you upload files under Knowledge, conversations with your GPT may include file contents. Files can be downloaded when Code Interpreter is enabled"}});function te(e){let{placeholder:t,text:r,onChange:s,onClose:n}=e;return(0,b.jsx)(ef.Z,{className:"!max-h-[100vh] !max-w-[80vw]",type:"success",isOpen:!0,onClose:n,primaryButton:(0,b.jsx)(g.cY,{onClick:n,children:(0,b.jsx)(h.Z,{id:"FeFVdS",defaultMessage:"Close"})}),children:(0,b.jsx)("textarea",{className:"h-[70vh] w-full resize-none rounded-lg bg-token-main-surface-primary dark:border-gray-700",value:r,onChange:e=>{s(e.target.value)},placeholder:t})})}var tt=r(17711);function tr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function ts(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tr(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tr(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let tn=eo.Z.div`text-sm text-red-500`;function ta(e){let{children:t,collapsed:r,initial:s}=e;return(0,b.jsx)(e2.M,{initial:s,children:!r&&(0,b.jsx)(e4.E.div,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},children:t})})}function ti(e){let{gizmo:t,onShowActionsEditor:r,isDisabled:s}=e,n=(0,ee.Z)(),i=(0,b.jsxs)("div",{className:"space-y-1",children:[t?.tools?.map((e,t)=>e.type!==a.qK.JIT_PLUGIN?null:b.jsxs("div",{children:[b.jsx(x.r,{isDisabled:s,actionTool:e,onShowActionsEditor:()=>r(e.metadata.domain)}),e.metadata.auth?.type==="oauth"&&b.jsx(eD.Z,{label:n.formatMessage(tc.callbackUrlLabel),value:`https://chat.openai.com/aip/${e.metadata.action_id}/oauth/callback`,onCopied:()=>{M.m.success("Copied to clipboard",{duration:3})}})]},t)),(t?.tools?.filter(e=>e.type===a.qK.JIT_PLUGIN)??[]).length>=eG.L5?(0,b.jsx)("div",{children:n.formatMessage(tc.maxActionsReached,{number:eG.L5})}):(0,b.jsx)(g.cY,{disabled:s,onClick:()=>{r("Unknown domain")},className:"mt-2",children:(0,b.jsx)(h.Z,ts({},tc.createActionLabel))})]});return s?(0,b.jsx)(eh.u,{side:"top",label:n.formatMessage(tc.disabledCustomActionsTooltip),children:i}):i}function to(e){let{gizmoEditorData:t,updateGizmo:r,currentModelConfig:s,generateProfilePic:n,setIsUploadingProfilePic:i,isGeneratingProfilePic:o,setIsGeneratingProfilePic:c,requireGizmoId:d,onShowActionsEditor:u,onShowBlocksEditor:p}=e,v=t?.tools??[],{0:j,1:w}=(0,f.useState)(!1),{0:k,1:P}=(0,f.useState)(!0),N=t?.promptStarters??[],O=[...N,...N.length<12?[""]:[]],z=(0,ed.bw)(t),M=(0,S.t)(),C=M?.isWorkspaceAccount(),Z=(0,l.C)(T.L0.WorkspaceGPTCustomActions),E=(0,ee.Z)(),{value:_}=(0,ei.sB)("804300613"),{value:I}=(0,ei.sB)("736089948"),{value:L}=(0,ei.sB)("3047641741");return(0,b.jsxs)("div",{className:"flex h-full grow flex-col overflow-y-auto px-2 pt-6 text-sm",children:[(0,b.jsxs)("div",{className:"grow",children:[(0,b.jsxs)(x.hj,{children:[(0,b.jsx)(e$,{gizmoEditorData:t,generateProfilePic:n,isGeneratingProfilePic:o,setIsGeneratingProfilePic:c,onFileChange:async e=>{if(null!=e&&"uploading"!==e&&null!=e.fileId){let t=await e1.Z.getFileDownloadLink(e.fileId);t.status===a.KF.Success&&r({profilePictureId:null!=e.fileId?e.fileId:void 0,profilePictureUrl:t.download_url})}else r({profilePictureId:void 0,profilePictureUrl:void 0});i("uploading"===e)}}),(0,b.jsx)(x.lX,{label:(0,b.jsx)(h.Z,{id:"M4dZms",defaultMessage:"Name"}),description:(0,b.jsx)(h.Z,{id:"+Gkni2",defaultMessage:"The name of your GPT"})}),(0,b.jsx)(x.yt,{type:"text",placeholder:E.formatMessage(tc.gptNamePlaceholder),value:t?.name??"",onChange:e=>{r({name:e.target.value})},onBlurCapture:()=>r(e=>ts(ts({},e),{},{name:e.name.trim()}))}),z.includes(ed.hs.GizmoNameTooLong)?(0,b.jsx)(tn,{className:"mt-1",children:(0,b.jsx)(h.Z,ts(ts({},tc.nameTooLong),{},{values:{length:eG.aI}}))}):null]}),(0,b.jsxs)(x.hj,{className:"mt-4",children:[(0,b.jsx)(x.lX,{label:(0,b.jsx)(h.Z,{id:"YDzNvf",defaultMessage:"Description"}),description:(0,b.jsx)(h.Z,{id:"dpxCw8",defaultMessage:"Short description of what this GPT does"})}),(0,b.jsx)(x.yt,{type:"text",placeholder:E.formatMessage(tc.descriptionPlaceholder),value:t?.description??"",onChange:e=>r({description:e.target.value}),onBlurCapture:()=>r(e=>ts(ts({},e),{},{description:e.description?.trim()??""}))}),z.includes(ed.hs.GizmoDescriptionTooLong)?(0,b.jsx)(tn,{className:"mt-1",children:(0,b.jsx)(h.Z,ts(ts({},tc.descriptionTooLong),{},{values:{length:eG.P_}}))}):null]}),(0,b.jsxs)(x.hj,{children:[(0,b.jsx)(x.lX,{label:(0,b.jsx)(h.Z,{id:"2SO0RJ",defaultMessage:"Instructions"}),description:E.formatMessage(tc.instructionsSubtitle)}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(x.B1,{className:"resize-none",rows:8,value:t?.instructions,onChange:e=>r({instructions:e.target.value}),onBlurCapture:()=>r(e=>ts(ts({},e),{},{instructions:e.instructions.trim()})),placeholder:E.formatMessage(tc.instructionsSubtitle)}),(0,b.jsx)("button",{className:"absolute bottom-3 right-2 text-token-text-tertiary",onClick:()=>w(!0),children:(0,b.jsx)(m.Qq,{className:"icon-sm"})})]}),z.includes(ed.hs.GizmoInstructionsTooLong)?(0,b.jsx)(tn,{className:"mt-1",children:(0,b.jsx)(h.Z,ts(ts({},tc.instructionsTooLong),{},{values:{length:eG.vi}}))}):null]}),(0,b.jsxs)(x.hj,{children:[(0,b.jsx)(x.lX,{label:(0,b.jsx)(h.Z,{id:"6rfYOX",defaultMessage:"Conversation starters"}),description:(0,b.jsx)(h.Z,{id:"OSOIpd",defaultMessage:"Examples for the user to start the conversation"})}),(0,b.jsx)("div",{className:"flex flex-col gap-1",children:O.map((e,t)=>(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)(x.yt,{className:"rounded-r-none",value:e,type:"text",onChange:e=>{let s=e.target.value;r(e=>ts(ts({},e),{},{promptStarters:eA()(t>=(N.length??0)?[...N??[],s]:N.map((e,r)=>{if(r===t){if(""===s)return;return s}return e}))}))}}),(0,b.jsx)("button",{className:"flex h-9 w-9 items-center justify-center rounded-lg rounded-l-none border border-l-0 border-token-border-medium",onClick:()=>r(e=>ts(ts({},e),{},{promptStarters:N.filter((e,r)=>r!==t)})),children:(0,b.jsx)(m.tPq,{className:"icon-sm"})})]},t))})]}),(0,b.jsxs)(x.hj,{children:[(0,b.jsx)(x.lX,{label:(0,b.jsx)(h.Z,{id:"bwXSkU",defaultMessage:"Knowledge"}),description:E.formatMessage(tc.knowledgeExplanation)}),(0,b.jsx)(e9,{gizmoEditorData:t,requireGizmoId:d,currentModelConfig:s,updateGizmo:r})]}),(0,b.jsxs)(x.hj,{children:[(0,b.jsx)(x.lX,{label:(0,b.jsx)(h.Z,{id:"mcAwDU",defaultMessage:"Capabilities"}),description:(0,b.jsx)(h.Z,{id:"2exQT6",defaultMessage:"Functionality this GPT can use"})}),(0,b.jsx)(tt.W,{enabledTools:v,onEnabledToolsChange:e=>r({tools:e})})]}),(0,b.jsxs)(x.hj,{children:[(0,b.jsx)(x.lX,{label:(0,b.jsx)(h.Z,{id:"7r7v+u",defaultMessage:"Actions"}),description:(0,b.jsx)(h.Z,{id:"fBln7I",defaultMessage:"APIs this GPT can use"})}),(0,b.jsx)(ti,{isDisabled:!!(C&&!Z),gizmo:t,onShowActionsEditor:u})]}),!C&&((t.files?.length??0)>0||t?.tools?.some(e=>e.type===a.qK.JIT_PLUGIN))&&(0,b.jsxs)(x.hj,{children:[(0,b.jsx)(x.lX,{label:(0,b.jsx)(h.Z,{id:"R3KeU7",defaultMessage:"Additional Settings"}),collapsed:!!k,onClick:()=>{P(e=>!e)}}),(0,b.jsx)(ta,{collapsed:k,initial:!1,children:(0,b.jsx)(g.f8,{className:"mx-3 my-1",labelClassName:"w-full cursor-pointer",label:(0,b.jsx)(h.Z,{id:"tZgwFW",defaultMessage:"Use conversation data in your GPT to improve our models"}),id:"improve-chatgpt",checked:!t.trainingDisabled,onChange:()=>{r({trainingDisabled:!t.trainingDisabled})}})})]}),_&&(0,b.jsx)(tl,{gizmoEditorData:t,updateGizmo:r}),I&&!L&&(0,b.jsx)(e0,{gizmoEditorData:t,updateGizmo:r}),L&&(0,b.jsx)(y,{gizmoEditorData:t,onOpen:p})]}),j&&(0,b.jsx)(te,{text:t.instructions??"",onChange:e=>{r({instructions:e})},onClose:()=>w(!1),placeholder:E.formatMessage(tc.instructionsSubtitle)})]})}let tl=J()(()=>r.e(8682).then(r.bind(r,98365)).then(e=>e.GizmoContactsEditor),{loadableGenerated:{webpack:()=>[98365]}}),tc=(0,et.vU)({nameTooLong:{id:"gizmo.nameTooLong",defaultMessage:"GPT names cannot be longer than {length} characters."},knowledgeExplanation:{id:"gizmo.knowledgeExplanation",defaultMessage:"Additional files for this GPT to reference."},descriptionTooLong:{id:"gizmo.descriptionTooLong",defaultMessage:"GPT descriptions cannot be longer than {length} characters."},instructionsTooLong:{id:"gizmo.instructionsTooLong",defaultMessage:"GPT instructions cannot be longer than {length} characters."},disabledCustomActionsTooltip:{id:"gizmo.disabledCustomActionsTooltip",defaultMessage:"Custom actions are disabled for your workspace. Contact your admin to enable them."},createActionLabel:{id:"gizmo.createActionLabel",defaultMessage:"Create new action"},maxActionsReached:{id:"gizmo.maxActionsReached",defaultMessage:"GPTs can have a maximum of {number} actions"},descriptionPlaceholder:{id:"gizmo.descriptionPlaceholder",defaultMessage:"Add a short description about what this GPT does"},instructionsSubtitle:{id:"gizmo.instructionsSubtitle",defaultMessage:"What does this GPT do? How does it behave? What should it avoid doing?"},gptNamePlaceholder:{id:"gizmo.gptNamePlaceholder",defaultMessage:"Name your GPT"},callbackUrlLabel:{id:"gizmo.callbackUrlLabel",defaultMessage:"Callback URL"}});function td(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function tu(e){let{upsertDraftError:t}=e,r=function(e,t){let r=e.response,s=(0,_.Ot)(e);if(!Array.isArray(r))return s;let n=eA()(r.map(e=>{if("value_error.any_str.max_length"===e.type)switch(e.loc[1]){case"display":switch(e.loc[2]){case"name":return t.formatMessage(tc.nameTooLong,{length:e.ctx.limit_value});case"description":return t.formatMessage(tc.descriptionTooLong,{length:e.ctx.limit_value})}break;case"instructions":return t.formatMessage(tc.instructionsTooLong,{length:e.ctx.limit_value})}if("string"==typeof e.msg)return e.msg}));return n.length>0?n.join("\n"):s}(t,(0,ee.Z)());return(0,b.jsxs)("div",{className:"flex items-center gap-2 text-red-500",children:[(0,b.jsx)("div",{children:(0,b.jsx)(h.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?td(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):td(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},tm.errorSavingDraft))}),null!=r&&(0,b.jsx)(eh.u,{label:r,children:(0,b.jsx)(m.szr,{className:"icon-sm"})})]})}function tp(e){let{isPublished:t,isSavingDraft:r,hasUnpublishedChanges:s,upsertDraftError:n,className:a}=e;return n instanceof _.Q0?(0,b.jsx)(tu,{upsertDraftError:n}):s?(0,b.jsxs)("div",{className:(0,W.default)("flex items-center gap-2",a),children:[(0,b.jsx)("span",{className:"text-token-text-secondary",children:t?(0,b.jsx)(h.Z,{id:"gizmoEditor.draftUnpublished",defaultMessage:"Unpublished changes"}):(0,b.jsx)(h.Z,{id:"gizmoEditor.draftPending",defaultMessage:"Updates pending"})}),(0,b.jsx)("div",{className:"w-4 text-token-text-tertiary",children:r&&(0,b.jsx)(o.Z,{})})]}):null}let tm=(0,et.vU)({errorSavingDraft:{id:"gizmo.errorSavingDraft",defaultMessage:"Error saving draft"}});var tg=r(90945),tf=r(19003),th=r(62166),tx=r(65418),tb=r(34455),tv=r(92054),tj=r(2319),ty=r(74301),tw=r(46900),tk=r(98541),tP=r(79857),tN=r(38924),tO=r(97834),tz=r(52978),tM=r(68039),tC=r.n(tM),tS=r(46667),tT=r.n(tS);function tZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function tE(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tZ(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tZ(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}async function t_(e){let t;for(let r of e)if("gizmo_editor.generate_profile_pic"===r.author.name){let e=tw.U.getImageAssetPointers(r);e.length>0&&(t=e.at(-1))}if(null!=t){let e=(0,eV.Iy)(t.asset_pointer),r=await e1.Z.getFileDownloadLink(e);if(r.status===a.KF.Success)return{id:e,permalink:r.download_url}}}async function tI(e,t,r){let s=function(e,t){let r=Z.tQ.getThreadCurrentLeafId(e),s=Z.tQ.getTree(e),n=[],a=s.getNodeByIdOrMessageId(r);for(;null!=a&&(null==t||a.id!==t);)n.unshift(a.message),a=""!==a.parentId?s.getNodeByIdOrMessageId(a.parentId):void 0;return n}(t,r),n=s.filter(e=>"gizmo_editor.update_behavior"===e.recipient).flatMap(e=>"text"===e.content.content_type?e.content.parts:"code"===e.content.content_type?[e.content.text]:[]).map(e=>JSON.parse(e)).reduce((e,t)=>tE(tE({},e),t),{}),i=await t_(s);if(tC()(n)&&null==i)return;let{name:o,context:l,description:c,profile_pic_file_id:d,prompt_starters:u}=n;if(null!=d)try{let t=await e1.Z.getFileDownloadLink(d,e.id);t.status===a.KF.Success&&(i={id:d,permalink:t.download_url})}catch(e){B.U.addError(Error("Error while retrieving profile pic in update",{cause:e})),M.m.warning("Something went wrong updating your GPT's profile picture.",{duration:3})}let p={name:"string"==typeof o?o:void 0,description:"string"==typeof c?c:void 0,instructions:"string"==typeof l?l:void 0,promptStarters:Array.isArray(u)?u:void 0,profilePictureId:i?.id,profilePictureUrl:i?.permalink};return tT()(p,e=>null!=e)}function tL(e,t,r,s){let n=r.current,a=s.current;if(Q()(n,a))return;let o={};n.name!==a?.name&&(o.name=n.name),(n.description??"")!==(a?.description??"")&&(o.description=n.description??""),n.instructions!==(a?.instructions??"")&&(o.context=n.instructions??"");let l=new Set(a?.files?.map(e=>e.file_id)??[]),c=new Set(n.files?.map(e=>e.file_id)??[]),d=(n.files??[]).filter(e=>!l.has(e.file_id)),u=(a?.files??[]).filter(e=>!c.has(e.file_id));if(tC()(o)&&0===d.length&&0===u.length)return;let p=[];if(!tC()(o)){let e=`Explicitly update the GPT's behavior to the following exact fields:

    ${JSON.stringify(o,null,2)}

    "Do not call update_behavior yet. Instead, use these updated fields as the GPT's current behavior, and in the next call to update_behavior, incorporate these changes."
    `;p.push(tk.Cv.getTextAsMessage(e,i.uU.System))}u.length>0&&p.push(tk.Cv.getTextAsMessage(`The user has removed the following files from the GPT. You can no longer reference these files: ${u.map(e=>e.file_id).join(", ")}`,i.uU.System)),d.length>0&&p.push(tk.Cv.getTextAsMessage(`The user is adding these files to the GPT. The GPT may reference these files. The file IDs are: ${d.map(e=>e.file_id).join(", ")}`,i.uU.System,{attachments:d.map(e=>({id:e.file_id,name:e.name,size:e.size}))})),p.length>0&&Z.tQ.updateTree(e,e=>{let r=e.getNodeByIdOrMessageId(t).parentId;for(let s of p){let n=(0,tv.Z)();e.insertNodeBefore(t,{id:n,children:[],parentId:r,message:s,metadata:{isClientCreatedSystemMessage:!0}}),r=n}})}function tA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function tD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tA(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tA(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let tG=f.memo(function(e){let{gizmoEditorData:t,updateGizmo:r,clientThreadId:s,completionCallbackResponse:n,gizmoEditorDataRef:a,magicMakerBehaviorOverrides:o,magicMakerConversationGizmoEditorDataRef:l,requireGizmoId:c}=e,d=(0,f.useMemo)(()=>({gizmoEditorData:t,gizmoId:t.id,mode:"magic",behaviorOverrides:o,getGizmoId:c}),[c,t,o]),u=(0,th.gF)(e=>e.files.filter(e=>e.status===eK.XX.Ready&&null!=e.gizmoId)),p=(0,f.useCallback)((e,t)=>{!function(e,t,r){if(0===r.length)return;let s=(0,tv.Z)(),n=`The user is uploading files in their next message. If you need to reference these in calls to update_behavior, you will use the following File ID(s), in order: ${r.map(e=>`"${e.fileId}"`).join(", ")}`;Z.tQ.updateTree(e,e=>{let r=e.getNodeByIdOrMessageId(t).parentId;e.insertNodeBefore(t,{id:s,children:[],parentId:r,message:tk.Cv.getTextAsMessage(n,i.uU.System),metadata:{isClientCreatedSystemMessage:!0}})})}(e,t,u),tL(e,t,a,l),function(e,t){let r="Remember, you should be calling either update_behavior or generate_profile_pic after most messages from the user. Your personality should be neutral and separate from the GPT you are creating.",s=Z.tQ.getThreadCurrentLeafId(e),n=Z.tQ.getTree(e),a=n.getNodeByIdOrMessageId(s);for(;null!=a&&a.message.author.role!==i.uU.User;){if("text"===a.message.content.content_type&&a.message.content.parts[0]===r)return;a=""!==a.parentId?n.getNodeByIdOrMessageId(a.parentId):void 0}Z.tQ.updateTree(e,e=>{let s=e.getNodeByIdOrMessageId(t).parentId;e.insertNodeBefore(t,{id:(0,tv.Z)(),children:[],parentId:s,message:tk.Cv.getTextAsMessage(r,i.uU.System,{exclude_after_next_user_message:!0}),metadata:{isClientCreatedSystemMessage:!0}})})}(e,t),r(e=>tD(tD({},e),{},{files:[...e.files??[],...eA()(u.map(e=>null!=e.fileId&&{file_id:e.fileId,name:e.file.name,size:e.file.size,type:e.file.type,last_modified:e.file.lastModified,file_size_tokens:e.fileSpec?.fileTokenSize}))]})),l.current=Y()(a.current)},[a,l,u,r]),m=(0,en.tN)(e=>e.activeSidebar);return(0,b.jsx)(tj.D.Provider,{value:d,children:(0,b.jsxs)("div",{className:"relative flex h-full grow overflow-auto",children:[(0,b.jsx)("div",{className:"grow",children:(0,b.jsx)(tf.Z,{clientThreadId:s,onCompletionFinished:n,preRequestCompletion:p,hideHeader:!0,prependThreadChildren:(0,b.jsx)("div",{className:"h-8"})})}),"debug"===m&&(0,b.jsx)(tx.DebugConversationSidebar,{clientThreadId:s,slideOver:!1,onClose:()=>en.vm.toggleActiveSidebar("debug"),isOpen:!0})]})})});var tR=r(45334);function tU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function tB(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tU(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tU(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let tF=J()(()=>Promise.all([r.e(1703),r.e(7147)]).then(r.bind(r,37147)).then(e=>e.GizmoActionsEditor),{loadableGenerated:{webpack:()=>[37147]}});var tW=((s=tW||{}).MAGIC_MAKER="magic",s.ADVANCED="advanced",s.PREVIEW="preview",s);function tK(e){let{value:t,label:r}=e;return(0,b.jsx)(D.ck,{value:t,className:"text-md w-1/3 flex-grow rounded-lg border-token-border-light p-1.5 font-semibold text-token-text-tertiary transition hover:text-token-text-primary radix-state-checked:border radix-state-checked:bg-token-main-surface-primary radix-state-checked:text-token-text-primary radix-state-checked:shadow-[0_0_2px_rgba(0,0,0,.03)] md:w-1/2",children:r})}function tY(e){let{className:t,editorTab:r,setEditorTab:s}=e,n=(0,ee.Z)();return(0,b.jsxs)(D.fC,{className:(0,W.default)("flex w-full overflow-hidden rounded-xl bg-token-main-surface-secondary p-1.5 md:w-1/2",t),value:r,onValueChange:e=>{s(e)},children:[(0,b.jsx)(tK,{value:tW.MAGIC_MAKER,label:n.formatMessage(t0.magicMakerLabel)}),(0,b.jsx)(tK,{value:tW.ADVANCED,label:n.formatMessage(t0.configureLabel)}),(0,b.jsx)("div",{className:"flex w-1/3 md:hidden",children:(0,b.jsx)(tK,{value:tW.PREVIEW,label:n.formatMessage(t0.previewLabel)})})]})}let tV={id:void 0,instructions:"",name:"",description:"",profilePictureId:void 0,profilePictureUrl:void 0,promptStarters:[],sharing:{recipient:z.Zz.Private,subjects:[]},tools:[{type:a.qK.DALLE}],files:[],trainingDisabled:!1,liveVersion:0},tq=tB(tB({},tV),{},{tools:[...tV.tools,{type:a.qK.BROWSER}]});function tX(e){return{id:e.gizmo.id,instructions:e.gizmo.instructions,name:e.gizmo.display.name,description:e.gizmo.display.description??"",profilePictureId:e.gizmo.display.profile_pic_id??void 0,profilePictureUrl:e.gizmo.display.profile_picture_url??void 0,promptStarters:e.gizmo.display.prompt_starters??[],tools:Y()(e.tools),files:Y()(e.files),sharing:e.gizmo.sharing?Y()(e.gizmo.sharing):{subjects:[],recipient:e.gizmo.share_recipient},trainingDisabled:e.gizmo.training_disabled??!1,sharingRecipient:e.gizmo.share_recipient,sharingTargets:Y()(e.gizmo.sharing_targets),liveVersion:e.gizmo.live_version??0}}let tQ=e=>{let{gizmo:t,onNewGizmoId:r}=e,s=(0,G.NL)(),n=(0,l.C)(T.L0.BrowsingAvailable),o=(0,ee.Z)(),d=(0,f.useRef)(null!=t?tX(t):n?tq:tV),u=(0,f.useRef)(t),p=(0,f.useRef)(d.current),{0:m,1:g}=(0,f.useState)(()=>d.current),{0:h,1:x}=(0,f.useState)(()=>(0,Z.OX)()),{0:v}=(0,f.useState)(()=>({context_message:function(e){let t=new Set;for(let r of e.tools)t.add(r.type);let r=e.name??"",s=e.description??"",n=e.instructions??"",a=Array.from(t).join(","),i=null!=e.profilePictureUrl;return""===r&&""===s&&""===n?`The GPT you are about to has the following abilities: ${a}.`:`This is the GPT's current set of fields:

name: ${r}

description: ${s}

context: ${n}

abilities: ${a}

${i?"The GPT has a profile picture.":"This GPT does not have a profile picture. You must generate a profile picture when you next update your behavior."}
`}(d.current),model_slug:"unused",enabled_tools:[{tool_id:null!=t?"gizmo_editor":"gizmo_creator"}]}));!function(e,t,r){(0,tb.a)(e,{kind:i.OL.GizmoMagicCreate,gizmo_id:t.id,behavior_overrides:r}),(0,f.useEffect)(()=>{Z.tQ.updateConversationMode(e,{kind:i.OL.GizmoMagicCreate,gizmo_id:t.id,behavior_overrides:r})},[e,t.id,r]);let{0:s}=(0,f.useState)(()=>{let e=null==t.id,r=null!=t.id&&""!==t.name&&null!=t.description&&""!==t.instructions&&null!=t.profilePictureUrl;return e?`Hi! I'll help you build a new GPT. You can say something like, "make a creative who helps generate visuals for new products" or "make a software engineer who helps format my code."

What would you like to make?`:r?`Welcome back! Is there anything ${t.name} should be doing better? Anything you'd like to change?`:"You're back! Let's continue where we left off..."});(0,f.useEffect)(()=>{let t=Z.tQ.getTree(e);if(t.findNode(e=>e.message.author.role===i.uU.User||e.metadata?.isClientCreatedSystemMessage===!0)||(Z.tQ.deleteNodesByFilter(e,e=>e.metadata?.isPlaceholderTemplateAssistantWelcomeMessage===!0),null==s||0===s.length))return;let r=Z.tQ.getThreadCurrentLeafId(e);if(!t.hasNodeOrMessageId(r))return;let n=(0,tv.Z)();Z.tQ.updateTree(e,e=>{e.addNode(n,s,r,i.uU.Assistant,{isPlaceholderTemplateAssistantWelcomeMessage:!0})}),Z.tQ.setThreadCurrentLeafId(e,n)},[e,s])}(h,p.current,v);let{data:j}=(0,C.Y7)(),y=j?.modelsList.find(e=>e.tags.includes(i.S.GPT_4))??j?.modelsList.find(e=>e.id===C.mx),{data:k}=(0,O.b9)(d.current.id),P=(0,O.N_)(),{isPending:N,error:S}=P,E=(0,O.ZJ)(),I=(0,f.useMemo)(()=>{var e,t;return null!=k&&(!(m.name===k.gizmo.display.name&&m.description===k.gizmo.display.description&&m.instructions===k.gizmo.instructions&&(e=m.tools,t=k.tools,e.length===t.length&&e.every(e=>t.some(t=>t.type===e.type)))&&Q()(m.files?.map(e=>e.file_id)??[],k.files?.map(e=>e.file_id)??[]))||m.profilePictureUrl!=k.gizmo.display.profile_picture_url||m.profilePictureId!=k.gizmo.display.profile_pic_id)},[m,k]),L=async()=>{let e=d.current;try{let t=await P.mutateAsync({editorData:e,gizmoId:e.id});if(u.current=t,null==d.current.id){let e=t.gizmo.id;d.current=tB(tB({},d.current),{},{id:e,sharingTargets:t.gizmo.sharing_targets}),g(d.current),r?.(e)}for(let e of t.tools.filter(e=>e.type===a.qK.JIT_PLUGIN)){let t=d.current.tools.find(t=>t.type===a.qK.JIT_PLUGIN&&t.metadata.domain===e.metadata.domain);t&&t.metadata.action_id!==e.metadata.action_id&&(t.metadata=tB(tB({},t.metadata),{},{action_id:e.metadata.action_id}),g(d.current))}return t}catch(t){let e=(0,_.Ot)(t)??o.formatMessage(tm.errorSavingDraft);throw M.m.warning(e,{duration:2}),t}},D=(0,f.useRef)(),K=async()=>null!=d.current.id?d.current.id:(null==D.current&&(D.current=L().then(e=>e.gizmo.id).catch(e=>{throw D.current=void 0,e})),D.current),{0:V}=(0,f.useState)(()=>q()(()=>L(),2e3,{trailing:!0}));function X(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r="function"==typeof e?e(d.current):(0,ed.x$)(d.current,e);!Q()(r,d.current)&&(d.current=r,g(d.current),t&&V())}let $=(0,f.useRef)(),J=async e=>{if(null==e){ep(!1);return}try{let t=await tI(d.current,e,$.current);null!=t&&(X(t),p.current=Y()(d.current))}catch(e){B.U.addError(e),M.m.warning("Something went wrong generating your GPT",{duration:3})}finally{$.current=Z.tQ.getThreadCurrentLeafId(e),ep(!1)}},H=function(e,t,r){Z.tQ.initThread(e,{kind:i.OL.GizmoMagicCreate,gizmo_id:void 0,behavior_overrides:r});let s=(0,C.j8)().id,n=(0,C.Bv)(e)??s,a=(0,ty.Z)(e,void 0,t);return async(t,s,o)=>{if(0===o.length)return;let l=Z.tQ.getThreadCurrentLeafId(e);for(let t of o){let r=(0,tv.Z)();Z.tQ.updateTree(e,e=>{e.addNodeToEnd(l,{id:r,children:[],parentId:l,message:tk.Cv.getTextAsMessage(t,i.uU.System),metadata:{isClientCreatedSystemMessage:!0}})}),Z.tQ.setThreadCurrentLeafId(e,r),l=r}let c=l;tL(e,c,t,s);let d={conversationMode:{kind:i.OL.GizmoMagicCreate,gizmo_id:t.current.id,behavior_overrides:r}},u=await (0,tO.rS)(),[p,m,g]=await Promise.all([tP.ZP.getEnforcementToken(u),tz.Z.getEnforcementToken(u),tN.Z.getEnforcementToken(u)]);a({model:n,completionType:i.Os.Next,parentNodeId:c,metadata:{},focusOnNewCompletion:!0,chatReq:u,arkoseToken:p,turnstileToken:m,proofToken:g,preflightTime:0,completionMetadata:d})}}(h,J,v),{0:et,1:er}=(0,f.useState)(void 0);(0,f.useEffect)(()=>{er((0,c.z$)(t))},[t?.gizmo.id]);let es=async(e,t)=>{let r=(0,ed.bw)(d.current,e.recipient,t);if(r.length>0){M.m.warning(`Could not save GPT:

${r.map(e=>`- ${(0,ed.sw)(e)}`).join("\n")}`,{duration:3});return}let n=await L(),a=n.gizmo.id;try{return R.A.logEvent(U.M.promoteGizmo,{gizmo_id:n.gizmo.id,sharing_recipient:e.recipient,editor_tab:ea}),await E.mutateAsync({gizmoId:n.gizmo.id,data:{sharingSubjects:e.subjects,sharingRecipient:e.recipient,categories:null==t?void 0:[t]}},{onSuccess(e){s.setQueryData((0,O.Vw)(s,a).queryKey,e),s.invalidateQueries({queryKey:["gizmos"]}),s.invalidateQueries({queryKey:["gizmo",{gizmoId:a}]}),s.invalidateQueries({queryKey:["gizmo","userActionSettings",{gizmoId:a}]})}})}catch(t){t instanceof z.DC?er({gizmoId:a,sharingRecipient:e.recipient,moderationType:c.Te.PublishBlocked,sharingTargets:t.response.sharing_targets,showModal:c.UJ.AppealAvailable}):(B.U.addError(t),M.m.warning("Error saving GPT",{duration:2}))}},en=P.isPending||E.isPending,{0:ea,1:ei}=(0,f.useState)(()=>{let e=F.m.getItem(F.F.GizmoEditorTab);return Object.values(tW).includes(e)?e:tW.MAGIC_MAKER}),eo=A.fY.useState(e=>{let{windowWidth:t}=e;return t});(0,f.useEffect)(()=>{null!=eo&&eo>=768&&ea===tW.PREVIEW&&ei(tW.MAGIC_MAKER)},[eo,ea]);let{0:el,1:ec}=(0,f.useState)(!1),{0:eu,1:ep}=(0,f.useState)(!1),{0:em,1:eg}=(0,f.useState)(void 0),{0:ef,1:eh}=(0,f.useState)(!1);return(0,b.jsxs)("div",{className:"flex h-screen w-full flex-col items-center",children:[(0,b.jsx)(e_,{gizmoEditorData:m,isLoading:en,hasUnpublishedChanges:I,isUploadingProfilePic:el,isGeneratingProfilePic:eu,publishedGizmo:k,updateGizmo:X,promoteGizmo:async(e,t)=>{let r=await es(e,t);return d.current=tB(tB({},d.current),{},{sharingRecipient:e.recipient}),g(d.current),F.m.setItem(F.F.GizmoEditorTab,ea),r},appealGizmo:async(e,t)=>{null!=et&&er(tB(tB({},et),{},{sharingRecipient:e,categories:null==t?void 0:[t],showModal:c.UJ.AppealAvailable}))},setAppealState:er,revertDraft:null!=k&&I?()=>{let e=s.getQueryData((0,O.Vw)(s,d.current.id).queryKey);if(null!=e){let t=tX(e);d.current=t,g(t),L()}}:void 0,draftMessage:(0,b.jsx)(tp,{isPublished:null!=k&&("marketplace"===k.gizmo.share_recipient||"workspace"===k.gizmo.share_recipient),hasUnpublishedChanges:I,isSavingDraft:N,upsertDraftError:S,className:"text-sm"}),showActionsModal:e=>{eg(e)},className:"flex-shrink-0"}),et&&(0,b.jsx)(c.MU,{appealState:et,onAppealClose:()=>er(tB(tB({},et),{},{showModal:c.UJ.None})),onAppealSubmitted:()=>er(tB(tB({},et),{},{showModal:c.UJ.AppealSent}))}),(0,b.jsxs)("div",{className:"relative flex w-full grow overflow-hidden",children:[(0,b.jsx)("div",{className:"flex w-full justify-center md:w-1/2",children:(0,b.jsx)("div",{className:"h-full grow overflow-hidden",children:void 0!==em?(0,b.jsx)(tF,{currentlyEditingActionDomain:em,gizmoEditorData:m,updateGizmo:X,onClose:()=>{eg(void 0)}}):ef?(0,b.jsx)(w,{gizmoEditorData:m,updateGizmo:X,onClose:()=>{eh(!1)}}):(0,b.jsxs)("div",{className:"flex h-full flex-col px-2 pt-2",children:[(0,b.jsx)("div",{className:"flex w-full flex-row justify-center",children:(0,b.jsx)(tY,{editorTab:ea,setEditorTab:ei,className:"mb-2 flex-shrink-0 self-center"})}),(0,b.jsx)("div",{className:"grow overflow-hidden",children:ea===tW.MAGIC_MAKER?(0,b.jsx)("div",{className:"h-full w-full pb-5",children:(0,b.jsx)(tG,{gizmoEditorData:m,updateGizmo:X,completionCallbackResponse:J,clientThreadId:h,gizmoEditorDataRef:d,magicMakerBehaviorOverrides:v,magicMakerConversationGizmoEditorDataRef:p,requireGizmoId:K},h)}):ea===tW.ADVANCED?(0,b.jsx)(to,{gizmoEditorData:m,updateGizmo:X,currentModelConfig:y,generateProfilePic:()=>{ep(!0),H(d,p,["Generate a new profile picture for this GPT using gizmo_editor generate_profile_pic. Do not prompt the user for any clarification. Do not send extra text outside of the tool function call. DO NOT CALL update_behavior or otherwise update GPT behavior in your response."])},setIsUploadingProfilePic:ec,isGeneratingProfilePic:eu,setIsGeneratingProfilePic:ep,requireGizmoId:K,onShowActionsEditor:e=>{eg(e)},onShowBlocksEditor:()=>{eh(!0)}}):(0,b.jsx)(tg.P,{gizmoEditorData:m,currentModelConfig:y,isSavingDraft:N,showTitle:!1})})]})})}),(0,b.jsx)("div",{className:(0,W.default)("hidden w-1/2 justify-center border-l border-token-border-medium bg-token-main-surface-secondary pt-4",ea!==tW.PREVIEW&&"md:flex"),children:(0,b.jsx)("div",{className:"flex-grow pb-5",children:(0,b.jsx)("div",{className:"h-full",children:(0,b.jsx)(tg.P,{gizmoEditorData:m,currentModelConfig:y,isSavingDraft:N})})})})]})]})};function t$(e){let{gizmoId:t,version:r}=e,{data:s}=(0,O.DC)({gizmoId:t,draft:!0,version:r}),n=(0,E.ec)(E.F_.accountUserId),a=(0,E.aF)(),i=a?.id,o=null!=s&&null!=n&&null!=i&&(0,tR.k1)(s);return null!=s&&o?(0,b.jsx)(tQ,{gizmo:s}):null}function tJ(e){let{onNewGizmoId:t}=e;return(0,b.jsx)(tQ,{gizmo:void 0,onNewGizmoId:t})}function tH(e){let{gizmoId:t,remixSourceId:r,version:s}=e,n=(0,H.useRouter)(),a=(0,S.t)(),i=(0,f.useRef)(void 0),l=t;return null!=t&&i.current===t&&(l=void 0),(0,I.yx)({resetThreadAction:()=>{n.push("/")}}),(0,b.jsx)("div",{children:a?.data?(0,b.jsx)("div",{children:void 0!=l?(0,b.jsx)(t$,{gizmoId:l,version:s},l):(0,b.jsx)(tJ,{remixSourceId:r,onNewGizmoId:e=>{i.current=e,window.history.replaceState(window.history.state,"",(0,L.AA)(e))}})}):(0,b.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,b.jsx)(o.Z,{})})})}let t0=(0,et.vU)({magicMakerLabel:{id:"gizmo.magicMakerLabel",defaultMessage:"Create"},configureLabel:{id:"gizmo.advancedLabel",defaultMessage:"Configure"},previewLabel:{id:"gizmo.previewLabel",defaultMessage:"Preview"}})},46702:function(e,t,r){"use strict";r.d(t,{b:function(){return d}});var s=r(59144),n=r(24434),a=r(39004),i=r(24740),o=r(49764),l=r(75325),c=r(651);function d(e){let{gizmoId:t,onSuccess:r,onClose:d}=e,u=(0,o.Z)(),p=(0,a.kb)(),m=async()=>{try{await p.mutateAsync({gizmoId:t}),r()}catch{i.m.danger("Failed to delete gizmo. Please try again.")}};return(0,c.jsx)(n.Z,{isOpen:!0,onClose:d,type:"danger",title:(0,c.jsx)(l.Z,{id:"shLmv5",defaultMessage:"Delete GPT"}),primaryButton:(0,c.jsx)(s.Z.Button,{title:u.formatMessage({id:"nlWRPu",defaultMessage:"Delete GPT"}),color:"danger",loading:p.isPending,onClick:()=>{m()}}),secondaryButton:(0,c.jsx)(s.Z.Button,{title:u.formatMessage({id:"D4IuIb",defaultMessage:"Cancel"}),color:"secondary",onClick:d}),children:(0,c.jsx)("div",{className:"text-sm",children:(0,c.jsx)(l.Z,{id:"zIR+cK",defaultMessage:"Are you sure you want to delete this GPT? This cannot be undone."})})})}},88301:function(e,t,r){"use strict";r.d(t,{B1:function(){return c},hj:function(){return d},lX:function(){return p},r:function(){return m},yt:function(){return u}});var s=r(40743),n=r(30853),a=r(19841),i=r(75325),o=r(15478),l=r(651);let c=o.Z.textarea`w-full text-sm overflow-y-auto rounded-lg border px-3 py-2 focus:ring-2 focus:ring-blue-400 border-token-border-medium bg-token-main-surface-primary h-32`,d=o.Z.div`mb-6`,u=o.Z.input`w-full resize-none overflow-y-auto rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 border focus:ring-blue-400 border-token-border-medium h-9 bg-token-main-surface-primary`;function p(e){let{label:t,description:r,collapsed:a,onClick:i}=e,o=(0,l.jsx)("label",{className:"block font-semibold text-token-text-primary",children:t});return(0,l.jsxs)("div",{className:"mb-1.5 flex items-center",onClick:i,children:[void 0!==a&&(a?(0,l.jsx)(s.r0F,{className:"icon-sm"}):(0,l.jsx)(s.Tg4,{className:"icon-sm"})),r?(0,l.jsx)(n.u,{label:r,sideOffset:4,side:"top",delayDuration:0,children:o}):(0,l.jsx)(l.Fragment,{children:o})]})}function m(e){let{actionTool:t,onShowActionsEditor:r,isDisabled:n}=e,o="metadata"in t?t.metadata?.domain:void 0;return(0,l.jsxs)("div",{className:(0,a.default)("flex rounded-lg border border-token-border-medium text-sm hover:cursor-pointer",n?"bg-token-main-surface-secondary":""),onClick:r,children:[(0,l.jsx)("div",{className:"h-9 grow px-3 py-2",children:o??(0,l.jsx)("span",{className:"text-red-500",children:(0,l.jsx)(i.Z,{id:"TJYXrY",defaultMessage:"Invalid action"})})}),(0,l.jsx)("div",{className:"w-px bg-token-border-medium"}),(0,l.jsx)("button",{disabled:n,className:"flex h-9 w-9 items-center justify-center rounded-lg rounded-l-none",children:(0,l.jsx)(s.SWE,{className:"icon-sm"})})]})}},17711:function(e,t,r){"use strict";r.d(t,{W:function(){return x}});var s=r(98601),n=r(99333),a=r(98303),i=r(30853),o=r(71090),l=r(41987);r(92379);var c=r(49764),d=r(75325),u=r(47584),p=r(651);function m(){return(0,p.jsx)("div",{className:"ml-2 flex h-3.5 w-3.5 cursor-default items-center justify-center rounded-full border border-token-border-medium text-[0.5rem] font-semibold leading-none text-token-text-tertiary",children:"?"})}function g(e){let{description:t}=e;return(0,p.jsx)(i.u,{wide:!0,label:t,delayDuration:0,children:(0,p.jsx)(m,{})})}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function h(e){let{label:t,toolType:r,enabledTools:s,onEnabledToolsChange:n,disabled:a,disabledTooltip:l}=e,c=e=>s.some(t=>t.type===e),d=(0,p.jsx)(o.f8,{labelClassName:"w-full cursor-pointer",id:r,label:t,checked:!a&&c(r),disabled:a,onChange:()=>{c(r)?n(s.filter(e=>e.type!==r)):n([...s,{type:r}])}});return null!=l?(0,p.jsx)("div",{className:"opacity-70",children:(0,p.jsx)(i.u,{side:"top",label:l,children:d})}):d}function x(e){let{enabledTools:t,onEnabledToolsChange:r}=e,i=(0,a.C)(l.L0.BrowsingAvailable),o=(0,c.Z)();return(0,p.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,p.jsx)(h,{label:(0,p.jsx)(d.Z,{id:"tNlef1",defaultMessage:"Web Browsing"}),toolType:n.qK.BROWSER,enabledTools:t,onEnabledToolsChange:r,disabled:!i,disabledTooltip:i?void 0:(0,p.jsx)(d.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach(function(t){(0,s.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},b.disabledBrowsingToolTip))}),(0,p.jsx)(h,{label:(0,p.jsx)(d.Z,{id:"uSmS/p",defaultMessage:"DALL\xb7E Image Generation"}),toolType:n.qK.DALLE,enabledTools:t,onEnabledToolsChange:r}),(0,p.jsx)(h,{label:(0,p.jsxs)("div",{className:"flex items-center",children:[(0,p.jsx)(d.Z,{id:"8Lv1lK",defaultMessage:"Code Interpreter & Data Analysis"}),(0,p.jsx)(g,{description:o.formatMessage(b.codeInterpreterTooltip)})]}),toolType:n.qK.PYTHON,enabledTools:t,onEnabledToolsChange:r})]})}let b=(0,u.vU)({disabledBrowsingToolTip:{defaultMessage:"Web browsing is disabled for your workspace. Contact your admin to enable it.",id:"GizmoEditorModelPicker.disabledBrowsingToolTip"},codeInterpreterTooltip:{id:"GizmoEditorModelPicker.codeInterpreterTooltip",defaultMessage:"Allow this GPT to run code. When enabled, this GPT can analyze data, work with files you’ve uploaded, do math, and more."},memoryTooltip:{id:"GizmoEditorModelPicker.memoryTooltip",defaultMessage:"Allow this GPT to pick up on users details and preferences to tailor its responses to them. When enabled, users will need to have memory on to use this GPT."}})},90945:function(e,t,r){"use strict";r.d(t,{P:function(){return D},gP:function(){return A},f7:function(){return L}});var s,n=r(16757),a=r(92745),i=r(58015),o=r(91530),l=r.n(o),c=r(16083),d=r(67437),u=r(651);function p(e){let{clientThreadId:t}=e,r=(0,a.oq)(t),s=(0,d.Bv)(t),n=(0,a.U0)(t,r),o=[...Array(n).keys()].map(e=>(0,u.jsx)(c.h,{isFinalTurn:e===n-1,turnIndex:e,clientThreadId:t,conversationLeafId:r,onChangeItemInView:l(),onChangeRating:l(),onRequestMoreCompletions:l(),onRequestCompletion:i.C,currentModelId:s??""},e));return(0,u.jsx)(u.Fragment,{children:o})}function m(e){let{clientThreadIds:t}=e;return(0,u.jsx)(u.Fragment,{children:t.map(e=>(0,u.jsx)(p,{clientThreadId:e},e))})}var g=r(19003),f=r(44039),h=r(45334),x=r(65418),b=r(34455),v=r(31438),j=r(43703),y=r(49763),w=r(79857),k=r(38924),P=r(97834),N=r(52978),O=r(19841),z=r(88600),M=r(92379),C=r(75325),S=r(92054),T=r(40743),Z=r(74301),E=r(2319),_=r(10083);function I(){return(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("div",{className:"border-token-border-secondary flex-grow border-b"}),(0,u.jsxs)("div",{className:"flex flex-shrink-0 items-center gap-2 px-2 py-6 text-sm text-token-text-tertiary",children:[(0,u.jsx)(T.vHI,{className:"icon-sm"}),(0,u.jsx)(C.Z,{id:"qtaMEG",defaultMessage:"GPT updated"})]}),(0,u.jsx)("div",{className:"border-token-border-secondary flex-grow border-b"})]})}let L=((s={}).TestGizmoAction="test_gizmo_action",s),A=new y.V,D=M.memo(function(e){let{gizmoEditorData:t,isSavingDraft:r,currentModelConfig:s,showTitle:i=!0}=e,{0:o,1:c}=(0,M.useState)(()=>(0,a.OX)()),{0:d,1:p}=(0,M.useState)([]);(0,M.useEffect)(()=>{p(e=>e[e.length-1]===o?e:[...e,o])},[o]);let y=d.slice(0,-1);(0,b.a)(o,{kind:n.OL.GizmoTest,gizmo_id:t.id}),(0,M.useEffect)(()=>{a.tQ.updateConversationMode(o,{kind:n.OL.GizmoTest,gizmo_id:t.id})},[o,t.id]);let L=t.files?.map(e=>e.file_id).join();(0,M.useEffect)(()=>{null!=a.tQ.getServerThreadId(o)&&c((0,a.OX)())},[t.id,t.instructions,t.tools,L,o]);let D=(0,v.tN)(e=>e.activeSidebar),G=(0,M.useMemo)(()=>({gizmoEditorData:t,mode:"test"}),[t]),{0:R,1:U}=(0,M.useState)(0),B=()=>{U(e=>e-360)},F=t.id,W=function(e,t){let r=(0,Z.Z)(e,void 0,l());return(0,M.useCallback)(async(s,i,o)=>{if(!t)return;let l=a.tQ.getThreadCurrentLeafId(e),c=(0,S.Z)(),d=(0,h.VN)(i);a.tQ.updateTree(e,e=>{e.addNodeToEnd(l,{id:c,children:[],parentId:l,message:{id:c,author:{role:n.uU.User},content:{content_type:n.PX.Text,parts:[`Call the ${i} API with the ${o} operation`]},recipient:"all",metadata:{jit_plugin_data:{from_client:{type:"test",operation:o,tool_name:d}}}}})});let u={conversationMode:{kind:n.OL.GizmoTest,gizmo_id:s}},p=await (0,P.rS)(),[m,g,f]=await Promise.all([w.ZP.getEnforcementToken(p),N.Z.getEnforcementToken(p),k.Z.getEnforcementToken(p)]);r({model:t.id,completionType:n.Os.Next,parentNodeId:c,metadata:{},focusOnNewCompletion:!0,chatReq:p,arkoseToken:m,turnstileToken:g,proofToken:f,preflightTime:0,completionMetadata:u})},[e,r,t])}(o,s);return(0,M.useEffect)(()=>(0,j.LW)(A,{test_gizmo_action:e=>{let{rootDomain:t,operationName:r}=e;F&&W(F,t,r)}}),[W,F]),(0,u.jsx)(E.D.Provider,{value:G,children:(0,u.jsxs)("div",{className:(0,O.default)("flex h-full w-full",r&&"cursor-wait opacity-80 transition"),children:[(0,u.jsxs)("div",{className:"flex grow flex-col",children:[(0,u.jsx)("div",{className:"relative mb-2 flex-shrink-0",children:(0,u.jsx)("div",{className:"flex justify-center py-1",children:i&&(0,u.jsxs)("div",{className:"group flex items-center gap-2 text-lg font-semibold",children:[(0,u.jsx)("div",{className:"icon-md"}),(0,u.jsxs)("button",{onClick:()=>{B(),p([]),c((0,a.OX)())},className:"flex items-center gap-2",children:[(0,u.jsx)(C.Z,{id:"2u/6Ja",defaultMessage:"Preview"}),(0,u.jsx)(z.E.div,{className:"text-token-text-primary",animate:{rotate:R},transition:{duration:.3},children:(0,u.jsx)(T.eF8,{className:"icon-md invisible group-hover:visible"})})]})]})})}),(0,u.jsx)("div",{className:(0,O.default)("relative grow overflow-auto px-2",r&&"pointer-events-none"),children:(0,u.jsx)(g.Z,{clientThreadId:o,hideHeader:!0,renderEmptyState:(0,u.jsxs)("div",{className:"relative h-full w-full",children:[null!=y&&y.length>0&&(0,u.jsx)("div",{className:"h-full w-full opacity-20",children:(0,u.jsxs)(f.I,{children:[(0,u.jsx)(m,{clientThreadIds:y}),(0,u.jsx)(I,{})]})}),(0,u.jsx)("div",{className:"absolute left-0 top-0 h-full w-full",children:(0,u.jsx)(_.r,{gizmo:t,hideOwner:!0,showStarterPrompts:!0})})]}),prependThreadChildren:y.length>0&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"opacity-50",children:(0,u.jsx)(m,{clientThreadIds:y})}),(0,u.jsx)(I,{})]})})})]}),"debug"===D&&(0,u.jsx)(x.DebugConversationSidebar,{clientThreadId:o,slideOver:!1,onClose:()=>v.vm.toggleActiveSidebar("debug"),isOpen:!0})]})})})},76665:function(e,t,r){"use strict";r.d(t,{bw:function(){return m},hs:function(){return u},sw:function(){return p},x$:function(){return d}});var s,n=r(98601),a=r(99333),i=r(10080),o=r(25899);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e,t){return null==t?e:(t=function e(t){return"object"==typeof t&&null!=t?Array.isArray(t)?t.map(e):Object.fromEntries(Object.entries(t).map(t=>{let[r,s]=t;return[r,e(s)]})):null===t?void 0:t}(t),c(c({},e),t))}let u=((s={})[s.Loading=0]="Loading",s[s.UploadingProfilePic=1]="UploadingProfilePic",s[s.GeneratingProfilePic=2]="GeneratingProfilePic",s[s.GizmoNameTooLong=3]="GizmoNameTooLong",s[s.GizmoDescriptionTooLong=4]="GizmoDescriptionTooLong",s[s.GizmoInstructionsTooLong=5]="GizmoInstructionsTooLong",s[s.NameEmpty=6]="NameEmpty",s[s.MissingPublicActionPrivacyPolicyURL=7]="MissingPublicActionPrivacyPolicyURL",s[s.MissingCategory=8]="MissingCategory",s);function p(e){switch(e){case u.Loading:return"Loading";case u.UploadingProfilePic:return"Uploading profile picture";case u.GeneratingProfilePic:return"Generating profile picture";case u.GizmoNameTooLong:return"GPT name too long";case u.GizmoDescriptionTooLong:return"GPT description too long";case u.GizmoInstructionsTooLong:return"GPT instructions too long";case u.NameEmpty:return"GPT name cannot be empty";case u.MissingPublicActionPrivacyPolicyURL:return"Public actions require valid privacy policy URLs";case u.MissingCategory:return"Public GPTs must have a category"}}function m(e,t,r){let s=e.name.length>o.aI,n=(e.description?.length??0)>o.P_,l=(e.instructions?.length??0)>o.vi,c=[];if(e?.name===""&&c.push(u.NameEmpty),s&&c.push(u.GizmoNameTooLong),n&&c.push(u.GizmoDescriptionTooLong),l&&c.push(u.GizmoInstructionsTooLong),null!=t&&("link"===t||"marketplace"===t))for(let t of e.tools?.filter(e=>e.type===a.qK.JIT_PLUGIN)){let e=t.metadata?.privacy_policy_url;if(null==e||!function(e){try{return new URL(e),!0}catch(e){return!1}}(e)){c.push(u.MissingPublicActionPrivacyPolicyURL);break}}return t===i.Zz.Marketplace&&null==r&&c.push(u.MissingCategory),c}},41177:function(e,t,r){"use strict";r.d(t,{C6:function(){return et},O2:function(){return es},P6:function(){return ee},hD:function(){return X},uj:function(){return er},xH:function(){return q}});var s=r(98601),n=r(99333),a=r(2721),i=r(93951),o=r(31498),l=r(49764),c=r(75325),d=r(47584),u=r(11550),p=r(98095),m=r(24434),g=r(76638),f=r(89039),h=r(42420),x=r(84760),b=r(19841),v=r(65925),j=r.n(v),y=r(92379),w=r(15478),k=r(59725),P=r(18898),N=r(40743),O=r(27160),z=r(57849),M=r(98682),C=r(73062),S=r(30853),T=r(6440),Z=r(15122),E=r(24740),_=r(21025),I=r(51307),L=r(83036),A=r(12128),D=r(39004),G=r(76665),R=r(99555),U=r(10080),B=r(81107),F=r(651);function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach(function(t){(0,s.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let Y=[U.EL,U.fV],V={[U.LA.USER]:U.Zz.User,[U.LA.GROUP]:U.Zz.Group,[U.LA.WORKSPACE]:U.Zz.Workspace,[U.LA.ALL]:U.Zz.Marketplace};function q(e){let t=V[e.type];if(!t)throw Error("Unknown sharing subject type: "+e.type);return K(K({},e),{},{type:t})}function X(e){var t,r;let{gizmo:s,publishedGizmo:d,updateGizmo:f,promoteGizmo:x,appealGizmo:v,setAppealState:w,showActionsModal:P,shareOnly:O,onClose:z,workspaceOwner:M=!1}=e,T=(0,l.Z)(),Z=(0,i.t)(),L=Z?.data?.name??"your workspace",A=(0,o.aF)(),W=(0,D.Z1)(),{0:V,1:X}=(0,y.useState)(void 0);(0,y.useEffect)(()=>{if(void 0==V){if(d?.gizmo.display.categories&&d?.gizmo.display.categories.length>0){let e=W.data?.categories.find(e=>e.id===d?.gizmo.display.categories[0]);e&&X(e)}else void 0!=W.data&&X(W.data.categories[W.data.categories.length-1])}},[W.data,V,d]);let{0:Q,1:$}=(0,y.useState)(s.sharingRecipient??U.Zz.Private),{0:ee,1:en}=(0,y.useState)(s.sharing?.subjects??[]),{0:ei,1:eo}=(0,y.useState)(null),{0:el,1:ec}=(0,y.useState)(!1),ed=(0,y.useCallback)(()=>!j()(s.sharing?.subjects,ee)||s.sharingRecipient!==Q,[s.sharing,s.sharingRecipient,Q,ee]),eu=(0,h.NL)(),ep=(0,G.bw)(s,Q,V?.id??void 0),em=ep.includes(G.hs.MissingPublicActionPrivacyPolicyURL),eg=s.tools.find(e=>e.type===n.qK.JIT_PLUGIN&&!e.metadata.privacy_policy_url);if(ei)return(0,F.jsx)(er,{publishedGizmo:ei,sharing:{recipient:Q,subjects:ee},workspaceName:L,onClose:z});let ef=(0,U.H$)(ee);function eh(e){let t=ee.filter(e=>-1===[U.LA.WORKSPACE,U.LA.ALL].indexOf(e.type));null!=e&&t.push(e),en(t)}function ex(e){null!=ef&&en(ee.map(t=>t===ef?K(K({},t),{},{capabilities:e}):t))}function eb(e,t,r){return e.type===U.LA.USER&&-1===e.user_id.indexOf("__")?K(K({},e),{},{user_id:e.user_id+"__"+Z?.getWorkspaceId()}):e}async function ev(e,t){if(el)return;if(e&&!t)throw Error("Cannot share a gizmo that hasn't been promoted before");if(!V)return;ec(!0);let r=ee.map(eb).map(q);if(r=(0,U.Mj)(Q,r,ef?.capabilities??U.EL),M)return Z&&t?(await a.Z.updateWorkspaceGPTSharing(Z.id,t,r),E.m.success(T.formatMessage({id:"SWSzcY",defaultMessage:"Sharing settings updated"})),eu.invalidateQueries({queryKey:["workspace"]})):E.m.warning("Unable to change sharing settings"),z();if(e){if(!t||!d)throw Error("No gizmo ID to share");try{let e={sharing:r};V&&(e.categories=[V.id]);let s=await R.U.shareGizmo(t,e);s.error?(0,_.nJ)(Q,s.sharing_targets)?(w({gizmoId:d.gizmo.id,sharingRecipient:Q,categories:d.gizmo.display.categories,moderationType:I.Te.PublishBlocked,sharingTargets:s.sharing_targets,showModal:I.UJ.AppealAvailable}),z()):E.m.warning(T.formatMessage({id:"tmIKmp",defaultMessage:"Unable to share GPT"})):(eu.setQueryData(["gizmo",{gizmoId:d.gizmo.id},{draft:!1}],e=>s.resource),f(e=>K(K({},e),{},{sharingRecipient:Q})),E.m.success(T.formatMessage({id:"SWSzcY",defaultMessage:"Sharing settings updated"})),z())}catch(e){return E.m.warning(T.formatMessage({id:"dKC65l",defaultMessage:"Failed to update sharing settings"})),z()}}else{let e=await x({subjects:r,recipient:Q},V.id);t||(t=e?.gizmo.id),eo(e??null),f({liveVersion:e?.gizmo.live_version??void 0}),eu.invalidateQueries({queryKey:["gizmo",{gizmoId:t}]})}ec(!1),eu.invalidateQueries({queryKey:["gizmos"]}),eu.invalidateQueries({queryKey:["gizmo","userActionSettings",{gizmoId:t}]}),eu.invalidateQueries({queryKey:["workspace"]}),f({sharing:{recipient:Q,subjects:ee},sharingRecipient:Q},!1)}return(0,F.jsx)(m.Z,{type:"success",className:"max-w-[555px]",size:"custom",isOpen:!0,onClose:z,primaryButton:(0,_.nJ)(Q,s.sharingTargets)?(0,F.jsx)(u.z,{onClick:()=>v(Q,V?.id),children:(0,F.jsx)(c.Z,{id:"HRzqKK",defaultMessage:"Appeal"})}):(0,F.jsx)(u.z,{onClick:()=>ev(O,d?.gizmo.id),loading:el,disabled:ep.length>0||!(0,_.YK)(Q,s.sharingTargets),children:O?(0,F.jsx)(c.Z,{id:"BEKjVh",defaultMessage:"Save"}):(0,F.jsx)(c.Z,{id:"24j5ts",defaultMessage:"Update"})}),secondaryButton:(0,F.jsxs)(F.Fragment,{children:[ed()&&(0,F.jsx)("div",{className:"absolute bottom-8 left-6 text-sm text-token-text-secondary",children:(0,F.jsx)(c.Z,{id:"9CkgC4",defaultMessage:"Unsaved changes"})}),d&&(0,F.jsx)(u.z,{color:"secondary",onClick:()=>(0,B.A4)(d,T.formatMessage({id:"KdDqMm",defaultMessage:"Copied link to clipboard"})),children:(0,F.jsx)(c.Z,{id:"wvL15a",defaultMessage:"Copy link"})})]}),title:T.formatMessage({id:"7JggXH",defaultMessage:"Share GPT"}),showCloseButton:!0,children:(0,F.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,F.jsx)(ea,{onAdd:e=>{ee.find(t=>t.type===U.LA.USER?t.user_id===e.user_id:t.type===U.LA.GROUP?t.group_id===e.group_id:t.type===e.type)||en([...ee,e])},publishedGizmo:d}),(0,F.jsx)("h3",{className:"text-base font-semibold",children:(0,F.jsx)(c.Z,{id:"bNQXcV",defaultMessage:"Share with..."})}),(0,F.jsxs)("div",{className:"max-h-[200px] space-y-2 overflow-y-auto",children:[(0,F.jsxs)("div",{className:"mb-4 flex flex-row items-center justify-between space-x-3",children:[(0,F.jsx)("div",{className:"shrink-0 grow-0 self-start",children:(0,F.jsx)(k.Yt,{user:A,size:"gizmoConversation",roundedStyle:"rounded-full"})}),(0,F.jsx)("div",{className:"grow",children:d&&(t=d?.gizmo.author.user_id.split("__")[0],r=A?.id,void 0===t||void 0===r||t.split("__")[0]!==r.split("__")[0])?(0,F.jsx)("span",{className:"text-base font-semibold",children:(0,F.jsx)(c.Z,{id:"scRZqV",defaultMessage:"{userName} (builder)",values:{userName:d?.gizmo.author.display_name}})}):(0,F.jsxs)("div",{className:"flex flex-col",children:[(0,F.jsx)("span",{className:"text-base font-semibold",children:(0,F.jsx)(c.Z,{id:"U7tzof",defaultMessage:"{userName} (you)",values:{userName:A?.name}})}),(0,F.jsx)("span",{className:"-mt-1 text-sm text-token-text-secondary",children:A?.email})]})})]}),ee.map((e,t)=>(0,U.h)(e)&&(0,F.jsxs)("div",{className:"mb-4 flex flex-row items-center justify-between space-x-3",children:[(0,F.jsx)(k.m0,{name:e.type===U.LA.GROUP?e.group_name:`${e.user_name} ${e.user_email}`,initialsCount:e.type===U.LA.USER?2:1,size:"gizmoConversation",className:(0,b.default)("shrink-0 grow-0",e.type===U.LA.USER&&"self-start")}),(0,F.jsxs)("div",{className:"flex grow flex-col",children:[(0,F.jsxs)("span",{className:"flex flex-row",children:[(0,F.jsx)("span",{className:"mr-2 text-base font-semibold",children:e.type===U.LA.GROUP?e.group_name:e.user_name}),e.type===U.LA.GROUP&&e.is_scim_managed&&(0,F.jsx)(g.DirectorySyncResourceManagedIndication,{})]}),e.type===U.LA.USER&&(0,F.jsx)("span",{className:"-mt-1 text-sm text-token-text-secondary",children:e.user_email})]}),(0,F.jsxs)(p.Z.Root,{children:[(0,F.jsxs)(p.Z.Trigger,{className:"whitespace-nowrap text-base text-token-text-secondary",children:[(0,F.jsx)(c.Z,K({},J(e.capabilities))),(0,F.jsx)(N.T2M,{className:"icon-md"})]}),(0,F.jsx)(p.Z.Portal,{children:(0,F.jsxs)(p.Z.Content,{className:"max-w-[280px]",children:[Y.map((t,r)=>(0,F.jsx)(H,{caps:t,selected:j()(t,e.capabilities),onClick:()=>{en(ee.map(r=>r===e?K(K({},r),{},{capabilities:t}):r))}},r)),(0,F.jsx)(p.Z.Separator,{}),(0,F.jsx)(p.Z.Item,{onClick:()=>en(ee.filter(t=>t!==e)),color:"danger",icon:N.XHJ,children:(0,F.jsx)(c.Z,{id:"NU0BOB",defaultMessage:"Remove"})})]})})]})]},t))]}),(0,F.jsx)("hr",{className:"border-token-border-medium"}),(0,F.jsx)("h3",{className:"text-base font-semibold",children:(0,F.jsx)(c.Z,{id:"uqD7Y8",defaultMessage:"Access"})}),(0,F.jsxs)("div",{className:"-ms-3.5 flex flex-row items-center justify-between space-x-3",children:[(0,F.jsxs)(C.Z.Root,{value:Q,onValueChange:e=>(function(e){switch($(e),e){case U.Zz.Marketplace:case U.Zz.Link:eh({type:U.LA.ALL,capabilities:U.EL});break;case U.Zz.Workspace:case U.Zz.WorkspaceLink:eh({type:U.LA.WORKSPACE,capabilities:U.EL});break;default:eh(null)}})(e),children:[(0,F.jsxs)(C.Z.Trigger,{children:[(0,F.jsx)(C.Z.Value,{}),(0,F.jsx)(C.Z.Icon,{})]}),(0,F.jsx)(C.Z.Portal,{children:(0,F.jsxs)(C.Z.Content,{children:[(0,F.jsxs)(C.Z.Group,{children:[(0,F.jsx)(C.Z.Label,{children:(0,F.jsx)(c.Z,{id:"YIQwaP",defaultMessage:"Private"})}),(0,F.jsx)(C.Z.Item,{value:U.Zz.Private,children:(0,F.jsx)(et,{shareLevel:U.Zz.Private,workspaceName:L})})]}),(0,F.jsx)(C.Z.Separator,{}),(0,F.jsx)(S.E,{label:T.formatMessage({id:"n0m61x",defaultMessage:"Your workspace has disabled sharing with the workspace."}),side:"bottom",disabled:(0,_.YK)("workspace",s.sharingTargets),children:(0,F.jsxs)(C.Z.Group,{children:[(0,F.jsx)(C.Z.Label,{children:L}),(0,F.jsx)(C.Z.Item,{value:U.Zz.WorkspaceLink,disabled:!(0,_.YK)(U.Zz.WorkspaceLink,s.sharingTargets)&&!(0,_.YK)(U.Zz.Workspace,s.sharingTargets),children:(0,F.jsx)(et,{shareLevel:U.Zz.WorkspaceLink,workspaceName:L})}),(0,F.jsx)(C.Z.Item,{value:U.Zz.Workspace,disabled:!(0,_.YK)("workspace",s.sharingTargets),children:(0,F.jsx)(et,{shareLevel:U.Zz.Workspace,workspaceName:L})})]})}),(0,F.jsx)(C.Z.Separator,{}),(0,F.jsx)(S.E,{label:T.formatMessage({id:"IHnort",defaultMessage:"Your workspace has disabled public sharing."}),side:"bottom",disabled:(0,_.YK)("marketplace",s.sharingTargets),children:(0,F.jsxs)(C.Z.Group,{children:[(0,F.jsx)(C.Z.Label,{children:(0,F.jsx)(c.Z,{id:"PjY9bi",defaultMessage:"Public"})}),(0,F.jsx)(C.Z.Item,{value:U.Zz.Link,disabled:!(0,_.YK)("link",s.sharingTargets),children:(0,F.jsx)(et,{shareLevel:U.Zz.Link,workspaceName:L})}),(0,F.jsx)(C.Z.Item,{disabled:!(0,_.YK)("marketplace",s.sharingTargets),value:U.Zz.Marketplace,children:(0,F.jsx)(et,{shareLevel:U.Zz.Marketplace,workspaceName:L})})]})})]})})]}),Q!==U.Zz.Private&&Q!==U.Zz.User&&(0,F.jsxs)(p.Z.Root,{children:[(0,F.jsxs)(p.Z.Trigger,{className:"whitespace-nowrap text-base text-token-text-secondary",children:[null==ef?(0,F.jsx)(c.Z,K({},J(U.EL))):(0,F.jsx)(c.Z,K({},J(ef.capabilities))),(0,F.jsx)(N.T2M,{className:"icon-md"})]}),(0,F.jsx)(p.Z.Portal,{children:(0,F.jsxs)(p.Z.Content,{className:"max-w-[280px]",children:[(0,F.jsx)(H,{onClick:()=>ex(U.EL),caps:U.EL,selected:j()(ef?.capabilities,U.EL)}),Q!==U.Zz.Marketplace&&Q!==U.Zz.Link&&(0,F.jsx)(H,{onClick:()=>ex(U.fV),caps:U.fV,selected:j()(ef?.capabilities,U.fV)})]})})]})]}),em&&(0,F.jsx)("div",{className:"text-xs text-red-500",children:(0,F.jsx)(c.Z,{id:"/iw1Iv",defaultMessage:"Public actions require valid privacy policy URLs. Click <fixlink>here</fixlink> to update.",values:{fixlink:e=>(0,F.jsx)("button",{onClick:()=>{P(eg?.metadata.action_id),z()},className:"underline",children:e})}})}),(Q===U.Zz.Marketplace||Q===U.Zz.Workspace)&&((0,_.YK)(Q,s.sharingTargets)?(0,F.jsx)(es,{gizmo:s,category:V?.id,categories:W.data?.categories,onCategoryChange:e=>X(e)}):(0,_.nJ)(Q,s.sharingTargets)?(0,F.jsx)("div",{className:"pb-2 text-xs text-red-500",children:(0,F.jsx)(I.JE,{sharingRecipient:Q,moderatedFields:(0,_.ai)(Q,s.sharingTargets)??[],appealAvailable:!0})}):(0,F.jsx)("div",{className:"pb-2 text-xs text-red-500",children:(0,F.jsx)(c.Z,{id:"BzqqKH",defaultMessage:"Your workspace's settings don't allow this level of access. An owner of the workspace can change this setting in the workspace's GPTs settings."})}))]})})}let Q=(0,d.vU)({private:{id:"pSXBWQ",defaultMessage:"Invite-only"},user:{id:"pSXBWQ",defaultMessage:"Invite-only"},group:{id:"pSXBWQ",defaultMessage:"Invite-only"},workspace_link:{id:"Giaxt1",defaultMessage:"Anyone at {workspaceName} with the link"},workspace:{id:"XLHaTU",defaultMessage:"{workspaceName}"},link:{id:"uP1+Ri",defaultMessage:"Anyone with the link"},marketplace:{id:"82Ilac",defaultMessage:"GPT Store"}}),$=(0,d.vU)({workspace:{id:"1kpopF",defaultMessage:"Published to {workspaceName}"},marketplace:{id:"hdTRpJ",defaultMessage:"Published to GPT Store"}});function J(e){return e.can_write?(0,d.Em)({id:"SubCqD",defaultMessage:"Can edit"}):e.can_view_config?(0,d.Em)({id:"ud3lp4",defaultMessage:"Can view configuration"}):e.can_read?(0,d.Em)({id:"/0j34W",defaultMessage:"Can chat"}):(0,d.Em)({id:"x2E8ET",defaultMessage:"Unknown"})}function H(e){let{caps:t,selected:r,onClick:s}=e,n=N.vdY;return t.can_view_config?n=N.KAl:t.can_read&&(n=N.kBi),(0,F.jsx)(p.Z.Item,{className:"flex h-auto flex-row items-start space-x-3 px-3 py-3",onClick:s,icon:n,children:t.can_write?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("div",{className:"flex grow flex-col",children:(0,F.jsx)("span",{className:"text-base font-semibold leading-tight",children:(0,F.jsx)(c.Z,K({},J(t)))})}),(0,F.jsx)(N.kvR,{className:(0,b.default)("icon-lg shrink-0",!r&&"invisible")})]}):t.can_view_config?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{className:"flex grow flex-col",children:[(0,F.jsx)("span",{className:"align-baseline text-base font-semibold leading-tight",children:(0,F.jsx)(c.Z,K({},J(t)))}),(0,F.jsx)("span",{className:"text-xs text-token-text-secondary",children:(0,F.jsx)(c.Z,{id:"fL1rWw",defaultMessage:"View configuration settings, duplicate, and chat"})})]}),(0,F.jsx)(N.kvR,{className:(0,b.default)("icon-lg shrink-0",!r&&"invisible")})]}):t.can_read?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{className:"flex grow flex-col",children:[(0,F.jsx)("span",{className:"text-base font-semibold leading-tight",children:(0,F.jsx)(c.Z,K({},J(t)))}),(0,F.jsx)("span",{className:"text-xs text-token-text-secondary",children:(0,F.jsx)(c.Z,{id:"tx5q1o",defaultMessage:"Users can only chat with this GPT"})})]}),(0,F.jsx)(N.kvR,{className:(0,b.default)("icon-lg shrink-0",!r&&"invisible")})]}):null})}let ee={private:M.Z,user:M.Z,group:M.Z,workspace_link:z.Z,workspace:O.Z,link:z.Z,marketplace:N.frp};function et(e){let{shareLevel:t,workspaceName:r,hasInviteSharing:s=!0}=e;(t===U.Zz.User||t===U.Zz.Group)&&(t=U.Zz.Private);let n=ee[t];return(0,F.jsxs)("div",{className:"flex flex-row items-center gap-3 text-base",children:[(0,F.jsx)(n,{className:"icon-lg"}),(0,F.jsx)("div",{className:"line-clamp-1 pt-px text-start font-semibold",children:s||t!==U.Zz.Private?(0,F.jsx)(c.Z,K(K({},Q[t]),{},{values:{workspaceName:r}})):(0,F.jsx)(c.Z,{id:"vVJhYB",defaultMessage:"Only me"})})]})}function er(e){let{publishedGizmo:t,sharing:r,workspaceName:s,onClose:n}=e,a=r.recipient,i=ee[a],o=(0,l.Z)();return(0,F.jsxs)(m.Z,{isOpen:!0,onClose:n,showCloseButton:!0,className:"w-[304px]",title:(0,F.jsx)(c.Z,{id:"5CEceY",defaultMessage:"GPT Updated"}),primaryButton:(0,F.jsx)(u.z,{onClick:()=>{window.location.href=`/g/${t.gizmo.id}`},children:(0,F.jsx)(c.Z,{id:"RF75o5",defaultMessage:"View GPT"})}),secondaryButton:(0,F.jsx)(u.z,{color:"secondary",onClick:()=>(0,B.A4)(t,o.formatMessage({id:"KdDqMm",defaultMessage:"Copied link to clipboard"})),children:(0,F.jsx)(c.Z,{id:"9hLOl9",defaultMessage:"Copy link"})}),type:"success",children:[(0,F.jsx)(es,{gizmo:{profilePictureUrl:t.gizmo.display.profile_picture_url??void 0,name:t.gizmo.display.name}}),r.subjects.filter(e=>(0,U.h)(e)).length>0&&(0,F.jsxs)("div",{className:"my-4",children:[(0,F.jsx)("h4",{className:"text-xs font-semibold text-token-text-secondary",children:(0,F.jsx)(c.Z,{id:"/paYH9",defaultMessage:"Shared with"})}),r.subjects&&r.subjects.map((e,t)=>(0,U.h)(e)&&(0,F.jsxs)("div",{className:"flex flex-row items-center justify-between space-x-3 py-2",children:[(0,F.jsxs)("div",{children:[(0,F.jsx)("span",{className:"text-base font-semibold",children:e.type===U.LA.GROUP?e.group_name:e.user_name}),e.type===U.LA.USER&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("br",{}),(0,F.jsx)("span",{className:"text-sm text-token-text-secondary",children:e.user_email})]})]}),(0,F.jsx)("span",{className:"text-token-text-secondary",children:(0,F.jsx)(c.Z,K({},J(e.capabilities)))})]},t))]}),(0,F.jsxs)("div",{className:"my-4",children:[(0,F.jsx)("h4",{className:"text-xs font-semibold text-token-text-secondary",children:(0,F.jsx)(c.Z,{id:"q9XNZ7",defaultMessage:"Access"})}),(0,F.jsxs)("div",{className:"ml-[3px] flex flex-row items-center py-3 text-left text-base font-semibold",children:[(0,F.jsx)(i,{className:"md:icon-lg mr-3 h-6 w-6 shrink-0"}),(0,F.jsxs)("div",{className:"flex flex-col",children:[(0,F.jsx)("span",{className:"font-semibold",children:(0,F.jsx)(c.Z,K(K({},$[a]??Q[a]),{},{values:{workspaceName:s}}))}),(a===U.Zz.Workspace||a===U.Zz.Marketplace)&&(0,F.jsx)("span",{className:"text-xs text-token-text-secondary"})]})]})]})]})}function es(e){let{gizmo:t,category:r,categories:s,onCategoryChange:n}=e,{data:a,isLoading:i}=(0,D.WL)(),o=s?.find(e=>e.id===r);return(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{className:(0,b.default)("mb-[1px] flex flex-row items-center space-x-2 bg-token-main-surface-secondary p-4",i&&"invisible",s?"rounded-t-lg":"rounded-lg"),children:[(0,F.jsx)(A.Z,{isFirstParty:!1,className:"h-11 w-11",src:t.profilePictureUrl}),(0,F.jsxs)("div",{className:"flex grow flex-col space-y-0",children:[(0,F.jsx)("span",{className:"text-base font-semibold",children:t.name}),(0,F.jsx)(L.Z,{builderName:a?.display_name,builderUrl:a?.website_url,socials:[a?.socials.linkedin,a?.socials.github,a?.socials.twitter].filter(e=>null!=e),className:"text-xs text-token-text-secondary"})]})]}),s&&(0,F.jsxs)("div",{className:"flex min-h-[56px] flex-row items-center justify-between space-x-2 rounded-b-lg bg-token-main-surface-secondary px-4 text-base",children:[(0,F.jsx)("span",{className:"font-semibold",children:(0,F.jsx)(c.Z,{id:"JcA4/t",defaultMessage:"Category"})}),(0,F.jsx)("div",{className:"text-token-text-secondary",children:n?(0,F.jsx)(p.d,{size:"small",triggerButton:(0,F.jsxs)("button",{className:"flex items-center gap-1",children:[o?.title,(0,F.jsx)(N.T2M,{className:"icon-md"})]}),children:s.map((e,t)=>(0,F.jsx)(p.Z.Item,{onClick:()=>n(e),children:e.title},t))}):(0,F.jsx)("span",{className:"text-token-text-secondary",children:o?.title})})]})]})}let en=w.Z.li`flex flex-col rounded-sm p-1 hover:bg-token-main-surface-secondary`;function ea(e){let{onAdd:t,publishedGizmo:r}=e,s=(0,l.Z)(),n=(0,i.t)(),{0:o,1:d}=(0,y.useState)(""),u=(0,P.Z)(n?.id,0,o,5),p=u.data?.items.filter(e=>e.id!==r?.gizmo.author.user_id.split("__")[0]),{data:m}=(0,x.a)({queryKey:[n?.id,"groups","filtered",o],queryFn:()=>a.Z.getWorkspaceGroups(n.id,{query:o,orderby:"@score"}),enabled:""!==o.trim()&&null!=n&&!!n.getWorkspaceId()}),h=(p?.length??0)>0||(m?.items.length??0)>0,{0:b,1:v}=(0,y.useState)(!1);return(0,F.jsx)(F.Fragment,{children:(0,F.jsx)("div",{className:"flex w-full flex-row space-x-3",children:(0,F.jsxs)(f.J,{as:"div",className:"group relative z-10 grow",children:[(0,F.jsx)(T.Z,{list:"suggested-choices",name:"share-with-input",placeholder:n?.isEnterprisey()?s.formatMessage({id:"xy/AMO",defaultMessage:"Add people and groups from your workspace"}):s.formatMessage({id:"Lh9njB",defaultMessage:"Add people from your workspace"}),value:o,onChange:e=>d(e.target.value),onFocus:()=>v(!0),onBlur:()=>v(!1)}),(0,F.jsx)(Z.m,{show:""!==o.trim()&&h&&b,children:(0,F.jsx)(f.J.Panel,{static:!0,className:"absolute top-8 ml-0 w-full cursor-pointer overflow-y-auto rounded-lg rounded-t-none border border-t-0 border-token-border-light bg-token-main-surface-primary px-1 py-1 group-has-[:focus]:border-token-border-xheavy",children:""!==o.trim()&&(0,F.jsxs)("ul",{id:"suggested-choices",children:[p&&p.map(e=>(0,F.jsxs)(en,{tabIndex:0,className:"rounded-sm p-1 text-sm hover:bg-token-main-surface-secondary",onClick:()=>{var r,s,a;return r=e.id,s=e.name,a=e.email??"",void(n&&(t({type:U.LA.USER,user_id:r+"__"+n.getWorkspaceId(),user_name:s,user_email:a,capabilities:K({},U.EL)}),d("")))},children:[(0,F.jsx)("span",{className:"w-full font-semibold",children:e.name}),(0,F.jsx)("span",{className:"text-sm text-token-text-secondary",children:e.email})]},e.id)),m?.items&&m.items.slice(0,5).map(e=>(0,F.jsx)(en,{tabIndex:0,onClick:()=>{var r,s,n;return r=e.id,s=e.name,n=e.is_scim_managed??!1,void(t({type:U.LA.GROUP,group_id:r,group_name:s,capabilities:K({},U.EL),is_scim_managed:n}),d(""))},children:(0,F.jsxs)("span",{className:"flex flex-col",children:[(0,F.jsxs)("span",{className:"flex flex-row",children:[(0,F.jsx)("span",{className:"mr-2 font-semibold",children:e.name}),e.is_scim_managed&&(0,F.jsx)(g.DirectorySyncResourceManagedIndication,{})]}),(0,F.jsx)("span",{className:"text-sm text-token-text-secondary",children:(0,F.jsx)(c.Z,{id:"r3Rx6X",defaultMessage:"{numMembers, plural, one {1 member} other {# members}}",values:{numMembers:e.num_members}})})]})},e.id))]})})})]})})})}U.H$,U.EL,U.fV},65418:function(e,t,r){"use strict";r.r(t),r.d(t,{DebugConversation:function(){return ed},DebugConversationSidebar:function(){return ec},OpenDebugSidebarButton:function(){return es},default:function(){return en},downloadMessages:function(){return eu}});var s=r(98601),n=r(16757),a=(r(34095),r(55963)),i=r(88301),o=(r(2721),r(93951)),l=r(92745),c=r(31438),d=r(22433),u=r(93180),p=r(46900),m=(r(66290),r(30757)),g=(r(56032),r(42420)),f=r(79746),h=r(88667),x=r(2423),b=r.n(x),v=r(38482),j=r.n(v),y=r(92379),w=r(49764),k=r(75325),P=r(47584),N=r(67526),O=r(75592),z=r(75853),M=r(15478),C=r(11550),S=r(39358),T=r(94273),Z=r(75130),E=r(651);function _(e){let{children:t,sidebarOpen:r,onClose:s}=e;return(0,E.jsx)(T.u.Root,{show:r,as:y.Fragment,children:(0,E.jsxs)(Z.V,{as:"div",className:"relative z-10",onClose:s,children:[(0,E.jsx)("div",{className:"fixed inset-0"}),(0,E.jsx)("div",{className:"fixed inset-0 overflow-hidden",children:(0,E.jsx)("div",{className:"absolute inset-0 overflow-hidden",children:(0,E.jsx)("div",{className:"pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10",children:(0,E.jsx)(T.u.Child,{as:y.Fragment,enter:"transform transition ease-in-out duration-100 sm:duration-300",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-300 sm:duration-500",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:(0,E.jsx)(Z.V.Panel,{className:"pointer-events-auto w-screen max-w-md border-l border-gray-100 dark:border-gray-700",children:(0,E.jsx)("div",{className:"h-full overflow-y-auto bg-token-main-surface-primary shadow-xl",children:t})})})})})})]})})}var I=r(30853),L=r(30115),A=r(40743),D=r(24434),G=r(73468),R=r(89678),U=r.n(R),B=r(13859),F=r.n(B),W=r(24740),K=r(88815);function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach(function(t){(0,s.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function q(e){let{clientThreadId:t}=e,{rebaseSystemMessageContent:r,showDebugConversationTurns:s}=(0,K.N)(),{0:i,1:o}=(0,y.useState)(()=>r?JSON.stringify(r,null,2):void 0),{0:c,1:d}=(0,y.useState)(!!r),u=(0,l.u9)(t,l.tQ.getThreadCurrentLeafId(t)),p=F()(u,e=>e.content.content_type===n.PX.SystemContent),m=p?.content??null,g=(0,y.useMemo)(()=>U()(e=>{try{e?K.N.setState({rebaseSystemMessageContent:V(V({},JSON.parse(e)),{},{content_type:n.PX.SystemContent})}):K.N.setState({rebaseSystemMessageContent:null}),W.m.closeAll()}catch(e){W.m.danger("The System Message is not valid JSON")}},500),[]);return(0,y.useEffect)(()=>{c?g(i):(g.cancel(),K.N.setState({rebaseSystemMessageContent:null}))},[g,c,i]),(0,E.jsxs)("div",{className:"flex flex-col gap-3 px-4",children:[(0,E.jsxs)("div",{children:[(0,E.jsxs)("div",{className:"flex justify-between",children:[(0,E.jsx)(I.u,{label:"Enable to apply this system message to the current conversation.",children:(0,E.jsx)(a.Z,{id:"enabled",label:"Enabled",checked:c,onChange:e=>d(e.currentTarget.checked)})}),(0,E.jsx)(a.Z,{id:"show-internal-conversation-turns",label:"Conversation debug mode",checked:s,onChange:()=>{K.N.setState({showDebugConversationTurns:!s})}})]}),(0,E.jsx)(C.z,{disabled:!m,className:"mt-2",onClick:()=>{o(m?JSON.stringify(m,null,2):"")},size:"small",children:"Load active system message"})]}),(0,E.jsxs)("div",{children:[(0,E.jsx)("label",{className:"text-sm",children:"System Message"}),(0,E.jsx)(X,{disabled:!c,placeholder:m?"Press `Load active system message` to pre-populate this":"Start a conversation and then press `Load active system message` to pre-populate this",className:"min-h-[75vh] rounded-md border border-gray-400 p-1 font-mono",value:i,onChange:e=>o(e.target.value)})]})]})}let X=M.Z.textarea`w-full rounded-lg border border-token-border-light bg-token-main-surface-primary text-sm text-token-text-primary focus:border-token-text-primary focus:shadow-none focus:outline-none focus:ring-token-text-primary disabled:bg-token-main-surface-tertiary`;var Q=r(19841);function $(e){let{clientThreadId:t}=e,{0:r,1:s}=(0,y.useState)([]),a=l.tQ.getThreadCurrentLeafId(t),i=l.tQ.getThreadConversationTurns(t,a),o=e=>{let r=l.tQ.getTree(t).getLeafFromNode(e);l.tQ.setThreadCurrentLeafId(t,r.id)},c=e=>{s(e=>[...e,a]),o(e)};return(0,E.jsxs)(E.Fragment,{children:[r.length>0&&(0,E.jsxs)(C.z,{className:"absolute left-2 top-2",color:"secondary",onClick:()=>{o(r[r.length-1]),s(e=>e.slice(0,-1))},children:[(0,E.jsx)(A.eF8,{className:"icon-sm"}),"Go back to ",r[r.length-1]]}),(0,E.jsx)("div",{className:"flex flex-col items-center gap-4 overflow-auto p-4 text-xs",children:i.map((e,r)=>{let s;let a=e.messages[0].nodeId,i=l.tQ.getTree(t),o=0!==r?i.getParent(a):null,u=null!=o?o.children.findIndex(e=>a===e):0,p=null!=o?o.children:[],m=p.slice(0,u),g=p.slice(u+1);switch(e.role){case n.uU.User:s="bg-blue-500";break;case n.uU.Assistant:s="bg-gray-600";break;default:s="bg-gray-400"}return(0,E.jsxs)("div",{className:(0,Q.default)("relative p-2",s),children:[(0,E.jsx)("div",{className:"absolute bottom-0 left-0 -ml-2 flex -translate-x-full gap-2 pl-2",children:m.map(e=>(0,E.jsx)(J,{variantId:e,onChangeItemInView:c},e))}),(0,E.jsx)("div",{className:"absolute left-full top-0 ml-2 flex gap-2 pr-2",children:g.map(e=>(0,E.jsx)(J,{variantId:e,onChangeItemInView:c},e))}),(0,E.jsx)("div",{className:"flex flex-col gap-2",children:e.messages.map(e=>(0,E.jsxs)("div",{className:"h-14 w-32 truncate bg-gray-200 p-1 text-black",children:[(0,E.jsx)("div",{className:"font-semibold",children:e.nodeId}),(0,E.jsx)("div",{className:"italic text-token-text-tertiary",children:e.message.author.role}),(0,E.jsx)("div",{children:(0,d.RR)(e.message)})]},e.nodeId))})]},r)})})]})}function J(e){let{variantId:t,onChangeItemInView:r}=e;return(0,E.jsx)("button",{className:"w-32 truncate bg-gray-400 p-2 text-black opacity-50 hover:opacity-100",onClick:()=>{r(t)},children:(0,E.jsx)("span",{className:"bg-gray-200 p-2",children:t})},t)}function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach(function(t){(0,s.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let et=j()(()=>Promise.all([r.e(6923),r.e(1981),r.e(6925),r.e(1502)]).then(r.bind(r,19042)).then(e=>e.DebugModalContents),{ssr:!1,loadableGenerated:{webpack:()=>[19042]}}),er=j()(()=>r.e(1583).then(r.bind(r,51583)).then(e=>e.FramesViewer),{ssr:!1,loadableGenerated:{webpack:()=>[51583]}});function es(){return(0,E.jsx)("button",{className:"flex h-6 w-6 items-center justify-center rounded-full border border-token-border-light text-xs text-token-text-secondary",onClick:()=>{c.vm.setActiveSidebar("debug")},children:(0,E.jsx)(A.reV,{className:"icon-xs"})})}function en(e){let{children:t,title:r,icon:s,isOpen:n,slideOver:a,onClose:i}=e,o=(0,E.jsxs)(ef,{children:[(0,E.jsxs)("div",{className:"flex items-start justify-between",children:[(0,E.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 text-lg font-semibold text-gray-900 dark:text-white",children:[(0,E.jsx)(s,{className:"icon-sm"}),r]}),(0,E.jsx)("div",{className:"mr-2 mt-2 flex h-7 items-center",children:(0,E.jsx)(L.P,{onClick:i})})]}),t]});return a?(0,E.jsx)(_,{sidebarOpen:n,onClose:i,children:o}):n?o:null}function ea(e){let{nodes:t,setDebugNodeIndex:r,setFrameSrc:s}=e,a=t.map((e,t)=>{let a=e.message,{role:i,name:o}=a.author,l=b()(a,"metadata.__internal.model_id"),c=b()(a,"metadata.__internal.agent.settings.completion_api.engine"),u=b()(a,"metadata.__internal.model_experiment_name"),m=b()(a,"metadata.__internal.model_experiment_treatment"),g=b()(a,"metadata.__internal.normalized_model_side"),f=b()(a,"metadata.__internal.model_experiment_group_name"),h=b()(a,"metadata.__internal.model_experiment_group_params"),x=b()(a,"metadata.__internal.model_experiment_override"),v=b()(a,"metadata.__internal.model_experiment_eval_seq"),j=b()(a,"metadata.__internal.raw_tokens")?.length,y=b()(a,"metadata.request_id"),w=p.U.getAudio(a),k=p.U.getAudioAssetPointers(a),P=p.U.getFrameAssetPointers(a);return(0,E.jsxs)(ex,{role:"button",onClick:()=>r(t),children:[(0,E.jsxs)("div",{className:"text-xs font-semibold uppercase text-token-text-tertiary",children:[i,o&&o!==i&&` (${o})`,a.recipient&&" -> ",(0,d.Ej)(a)]}),(a.author.role!==n.uU.System||y)&&(0,E.jsxs)("div",{className:"text-xs text-token-text-tertiary",children:[(0,E.jsxs)("div",{children:["ID: ",a.id]}),e.id!==a.id&&(0,E.jsxs)("div",{children:["UI Node ID: ",e.id]}),(0,E.jsxs)("div",{children:["Req ID: ",y||"Reload page to see ID"]})]}),(0,E.jsx)("div",{className:"line-clamp-6",children:(0,d.RR)(a)}),(j||l||c||u||m||g||f||h||x||v)&&(0,E.jsxs)("div",{className:"mt-4 w-full self-start rounded-xl bg-blue-200 px-3 py-0.5 text-xs text-black",children:[void 0!==j&&(0,E.jsxs)("div",{children:[(0,E.jsx)("b",{children:"Tokens Count:"})," ",j]}),l&&(0,E.jsxs)("div",{children:[(0,E.jsx)("b",{children:"Model ID:"})," ",l]}),c&&(0,E.jsxs)("div",{children:[(0,E.jsx)("b",{children:"Engine:"})," ",c]}),u&&(0,E.jsxs)("div",{children:[(0,E.jsx)("b",{children:"Experiment:"})," ",u]}),m&&(0,E.jsxs)("div",{children:[(0,E.jsx)("b",{children:"Treatment:"})," ",m]}),g&&(0,E.jsxs)("div",{children:[(0,E.jsx)("b",{children:"Normalized Side:"})," ",g]}),f&&(0,E.jsxs)("div",{children:[(0,E.jsx)("b",{children:"Group Name:"})," ",f]}),h&&(0,E.jsxs)("div",{children:[(0,E.jsx)("b",{children:"Group Params:"}),(0,E.jsx)("div",{children:JSON.stringify(h,null,2)})]}),x&&(0,E.jsxs)("div",{children:[(0,E.jsx)("b",{children:"Above Params are Overridden By:"})," ",x]}),v&&(0,E.jsxs)("div",{children:[(0,E.jsx)("b",{children:"Experiment Eval Seq:"})," click to see"]})]}),w.length||k.length?(0,E.jsxs)("div",{className:"mt-4 flex flex-col flex-nowrap gap-2",children:[(0,E.jsx)(em,{frameAssets:P,setFrameSrc:s},t),w.map((e,t)=>(0,E.jsx)(eg,{audio:e},t)),k.map((e,t)=>(0,E.jsx)(eg,{assetPointer:e},t))]}):null]},a.id)});return(0,E.jsx)(eh,{children:a})}let ei=e=>(0,E.jsx)(N.c.Input,ee(ee({},e),{},{inputClassName:"focus:ring-0"}));function eo(){let e=(0,K.N)(),t=(0,G.ZP)().map(e=>({label:e.name,options:e.options.map(e=>({label:`${e.value} (${e.name})`,value:e.value}))}));return(0,E.jsxs)("div",{className:"mt-2 flex flex-col justify-around gap-3 px-4 py-1 text-xs font-semibold",children:[(0,E.jsx)(a.Z,{id:"force-paragen",label:"Force Parallel Gen",checked:e.forceParagen,onChange:()=>{K.N.setState({forceParagen:!e.forceParagen})}}),(0,E.jsx)(z.Z,{options:t,name:"force-paragen-model",className:"shadow-none dark:text-gray-800",isDisabled:!e.forceParagen,isLoading:0===t.length,value:e.forceParagenModel,isClearable:!0,isMulti:!1,components:{Input:ei},onChange:e=>{K.N.setState({forceParagenModel:e??K.J})}}),(0,E.jsx)(a.Z,{id:"force-paragen",label:"Force Nulligen",checked:e.forceNulligen,onChange:()=>{K.N.setState({forceNulligen:!e.forceNulligen})}}),(0,E.jsx)("div",{id:"force-use-search-label",children:"Force Use Search:"}),(0,E.jsx)(O.ZP,{id:"force-use-search",options:[{label:"Default",value:"default"},{label:"Force",value:"true"},{label:"Disable",value:"false"}],name:"force-use-search",className:"shadow-none dark:text-gray-800",value:null==e.forceUseSearch?{value:"default",label:"Default"}:e.forceUseSearch?{value:"true",label:"Force"}:{value:"false",label:"Disable"},isMulti:!1,components:{Input:ei},onChange:e=>{K.N.setState({forceUseSearch:(e?.value??"default")==="default"?null:e?.value==="true"})}}),(0,E.jsx)(a.Z,{id:"force-indepth-feedback",label:"Force Indepth Feedback with prompt:",checked:e.forceIndepthFeedback,onChange:()=>{K.N.setState({forceIndepthFeedback:!e.forceIndepthFeedback})}}),(0,E.jsx)(i.B1,{id:"force-indepth-feedback-prompt",value:e.forceIndepthFeedbackPrompt,disabled:!e.forceIndepthFeedback,className:"font-weight-normal font-mono text-xs",onChange:e=>{K.N.setState({forceIndepthFeedbackPrompt:e.target.value})}}),(0,E.jsx)(a.Z,{id:"force-rate-limit",label:"Force Rate Limit",checked:e.forceRateLimit,onChange:()=>{K.N.setState({forceRateLimit:!e.forceRateLimit})}}),(0,E.jsx)(a.Z,{id:"reset-rate-limit",label:"Reset Rate Limits",checked:e.resetRateLimits,onChange:()=>{K.N.setState({resetRateLimits:!e.resetRateLimits})}}),(0,E.jsx)(I.u,{label:"Enabling this will show debug conversation messages in the chat",children:(0,E.jsx)(a.Z,{id:"show-internal-conversation-turns",label:"Conversation debug mode",checked:e.showDebugConversationTurns,onChange:()=>{K.N.setState({showDebugConversationTurns:!e.showDebugConversationTurns})}})})]})}let el=M.Z.div`px-3 pb-2 text-xs font-semibold uppercase border-b-2 ${e=>{let{$isSelected:t}=e;return t?"border-black dark:border-white":"border-transparent"}}`;function ec(e){let{clientThreadId:t,isOpen:r,slideOver:s,onClose:n}=e,a=(0,w.Z)(),i=(0,o.hz)(),{0:l,1:c}=(0,y.useState)("conversation");return i?.includes("debug")?(0,E.jsx)(en,{icon:A.reV,title:a.formatMessage(eb.debugTitle),isOpen:r,slideOver:s,onClose:n,children:(0,E.jsxs)(m.fC,{orientation:"vertical",defaultValue:l,onValueChange:e=>c(e),children:[(0,E.jsxs)(m.aV,{className:"flex items-center justify-center gap-2 px-4 py-1 text-xs font-semibold",children:[(0,E.jsx)(m.xz,{value:"conversation",children:(0,E.jsx)(el,{$isSelected:"conversation"===l,children:"Conversation"})}),(0,E.jsx)(m.xz,{value:"system-message-editor",className:"p-4",children:(0,E.jsx)(el,{$isSelected:"system-message-editor"===l,children:"System Message Editor"})})]}),(0,E.jsx)(m.VY,{value:"conversation",children:(0,E.jsx)(ed,{clientThreadId:t})}),(0,E.jsx)(m.VY,{value:"system-message-editor",children:(0,E.jsx)(q,{clientThreadId:t})})]})}):null}function ed(e){let{clientThreadId:t}=e,r=(0,w.Z)(),s=l.tQ.getThreadCurrentLeafId(t),n=(0,l.Fe)(t,s),{0:a,1:i}=(0,y.useState)(),c=(0,o.hz)(),d=(0,y.useCallback)(()=>{i(void 0)},[]),u=(0,y.useCallback)(()=>{let e=l.tQ.getTree(t);(0,f.v)(e.getTextFromThread(s))},[s,t]),{0:p,1:m}=(0,y.useState)(!1),{0:g,1:h}=(0,y.useState)(void 0);return c?.includes("debug")?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{className:"mb-2 flex items-center justify-around px-4 py-1 text-xs font-semibold uppercase",children:(0,E.jsx)(ep,{clientThreadId:t,messages:n.map(e=>e.message)})}),!1,(0,E.jsxs)("div",{className:"flex items-center justify-around gap-2 px-4 py-1 text-xs font-semibold uppercase",children:[(0,E.jsx)("div",{children:(0,E.jsx)(S.Z,{onCopy:u,buttonText:r.formatMessage(eb.copyText)})}),(0,E.jsxs)("button",{className:"flex items-center justify-center gap-2",onClick:()=>m(!0),children:[(0,E.jsx)(A.aAc,{className:"icon-sm rotate-90"}),"View tree"]})]}),(0,E.jsx)(eo,{}),(0,E.jsx)(ea,{nodes:n,setDebugNodeIndex:i,setFrameSrc:h}),void 0!==a&&(0,E.jsx)(D.Z,{type:"success",size:"fullscreen",noPadding:!0,isOpen:!0,onClose:d,children:(0,E.jsx)(et,{threadId:n[a].message.metadata?.__internal?.sonic_thread_id,threadUserId:n[a].message.metadata?.__internal?.sonic_user_id,onClose:d,message:n[a].message})},`DebugMessageModal-${a}`),p&&(0,E.jsx)(D.Z,{isOpen:!0,onClose:()=>m(!1),type:"success",size:"custom",noPadding:!0,children:(0,E.jsx)($,{clientThreadId:t})},"DebugTreeViewer"),g&&(0,E.jsx)(D.Z,{size:"normal",isOpen:!0,onClose:()=>h(void 0),type:"success",children:(0,E.jsx)("img",{src:g,alt:"debug image"})},"DebugFrameViewer")]}):null}function eu(e,t){let r=new Blob([JSON.stringify({conversation_id:l.tQ.getServerThreadId(e),messages:t},null,2)],{type:"application/json"}),s=URL.createObjectURL(r),n=document.createElement("a");n.href=s,n.download=`messages-${l.tQ.getServerThreadId(e)}.json`,n.click(),URL.revokeObjectURL(s)}function ep(e){let{clientThreadId:t,messages:r}=e,s=(0,y.useCallback)(()=>{eu(t,r)},[t,r]);return(0,E.jsx)(C.z,{onClick:s,color:"primary",size:"small",icon:A._8t,children:(0,E.jsx)(k.Z,ee({},eb.downloadRawConversation))})}function em(e){let{0:t,1:r}=(0,y.useState)([]),s=(0,g.NL)(),{frameAssets:n}=e;return(0,y.useEffect)(()=>{async function e(){return Promise.all(n.map(async e=>{let{image_asset_pointer:t,timestamp:r}=e;return{src:(await u.j.fetch(s,{asset:t})).url,timestamp:r}}))}n.length>0&&e().then(r)},[n,s]),(0,E.jsx)(er,{frames:t,setFrameSrc:e.setFrameSrc})}function eg(e){let t=eg.useAssetPointerSource(e.assetPointer),r=eg.useAudioSource(e.audio),s=t??r,n=(0,h.xb)("3230069703").config.value.expirySeconds,{0:a,1:i}=(0,y.useState)(Date.now()),o=(0,y.useRef)(null);return((0,y.useEffect)(()=>{let e=setInterval(()=>{o.current&&o.current.currentTime>0&&!o.current.paused&&!o.current.ended&&o.current.readyState>2||i(Date.now())},1e3*n);return()=>clearInterval(e)},[n]),s)?(0,E.jsx)("audio",{ref:o,controls:!0,src:s,className:"w-full"},a):null}eg.useAssetPointerSource=e=>{let{0:t,1:r}=(0,y.useState)(null),s=(0,g.NL)();return(0,y.useEffect)(()=>{e&&u.j.fetch(s,{asset:e}).then(e=>{r(e.url)})},[s,e]),t},eg.useAudioSource=e=>{let{0:t,1:r}=(0,y.useState)(null);return(0,y.useEffect)(()=>{if(e){let t=atob(e.payload),s=new Uint8Array(t.length);for(let e=0;e<t.length;e++)s[e]=t.charCodeAt(e);let n=new Blob([s],{type:`audio/${e.format}`}),a=URL.createObjectURL(n);return r(a),()=>{URL.revokeObjectURL(a)}}},[e]),t};let ef=M.Z.div`overflow-y-auto h-full md:w-[250px] lg:w-[300px] xl:w-[350px] 2xl:w-[400px] md:border-l md:border-gray-100 md:dark:border-gray-700 popover bg-token-main-surface-primary`,eh=M.Z.pre`whitespace-pre-wrap text-sm`,ex=M.Z.div`px-6 py-4 flex flex-col gap-1 hover:bg-gray-50 dark:hover:bg-gray-500/10 cursor-pointer border-b dark:border-white/10 border-gray-200`,eb=(0,P.vU)({debugTitle:{id:"DebugSidebar.debugTitle",defaultMessage:"Debug"},copyText:{id:"DebugSidebar.copyText",defaultMessage:"Copy text"},downloadRawConversation:{id:"DebugSidebar.downloadRawConversation",defaultMessage:"Download raw conversation"},uploadRawConversation:{id:"DebugSidebar.uploadRawConversation",defaultMessage:"Upload conversation dump"},closeSidebar:{id:"DebugSidebar.closeSidebar",defaultMessage:"Close sidebar"}})},79946:function(e,t,r){"use strict";r.d(t,{e_:function(){return H},ey:function(){return ee}});var s,n,a,i,o,l,c,d,u,p,m,g,f,h,x,b,v,j,y,w,k,P,N,O,z,M,C,S=r(40743),T=r(92379);function Z(){return(Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(null,arguments)}var E=e=>T.createElement("svg",Z({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),s||(s=T.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m9.65 13.026-3.287 1.19A2 2 0 0 1 3.8 13.027l-.342-.934.597-1.275L1.75 7.419l2.348-.85 2.564 1.484a2 2 0 0 0 1.689.15l8.512-3.083c.291-.106.603-.142.912-.107l2.833.325a1.842 1.842 0 0 1 .422 3.565l-5.276 1.911m.598-1.275L13 14.5l-2.817 1.02-.343-3.622"})),n||(n=T.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:2,d:"M3 19h18"})));function _(){return(_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(null,arguments)}var I=e=>T.createElement("svg",_({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),a||(a=T.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M13.997 3.39A2.5 2.5 0 0 1 17.2 2.103l2.203.882a2.5 2.5 0 0 1 1.342 3.369L19.063 10H20a1 1 0 0 1 1 1v8a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3v-8a1 1 0 0 1 .992-1l-.149-.101-.03-.022c-1.254-.924-1.016-2.864.425-3.458l2.12-.874.724-2.176c.492-1.479 2.41-1.851 3.42-.665L11.99 4.45l1.521.01zm1.513 1.506a2 2 0 0 1 .461 2.618l-1.144 1.861v.045a1.3 1.3 0 0 0 .044.278 1 1 0 0 1 .047.302h1.942l2.07-4.485a.5.5 0 0 0-.268-.673l-2.203-.882a.5.5 0 0 0-.641.258zM12.889 10a3.3 3.3 0 0 1-.06-.499c-.01-.236-.004-.69.237-1.081l1.202-1.954-2.293-.016a2 2 0 0 1-1.51-.704L8.98 4l-.725 2.176A2 2 0 0 1 7.12 7.394L5 8.267l2.063 1.407c.129.087.23.2.303.326zM5 12v7a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-7zm4.5 2.5a1 1 0 0 1 1-1h3a1 1 0 1 1 0 2h-3a1 1 0 0 1-1-1",clipRule:"evenodd"})));function L(){return(L=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(null,arguments)}var A=e=>T.createElement("svg",L({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),i||(i=T.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 16.584a5.001 5.001 0 0 1 1.326-9.539A6 6 0 0 1 18 9a4 4 0 0 1 2.5 7.123M9.25 16l-2.5 5M13.25 16l-2.5 5M17.25 16l-2.5 5"})));function D(){return(D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(null,arguments)}var G=e=>T.createElement("svg",D({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),o||(o=T.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m4.5 17.5 3.069-3.118a2 2 0 0 1 2.783-.066L16.5 20"})),l||(l=T.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 12h-.62a3 3 0 0 1-2.278-1.048l-4.204-4.904A3 3 0 0 0 9.62 5H6a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-1"})),c||(c=T.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 5h-.62a3 3 0 0 0-2.278 1.048L14 8.5"})),d||(d=T.createElement("circle",{cx:8.5,cy:9.5,r:1.5,fill:"currentColor"})),u||(u=T.createElement("path",{fill:"currentColor",d:"M18 14v-4a.5.5 0 0 1 .8-.4l2.667 2a.5.5 0 0 1 0 .8l-2.667 2a.5.5 0 0 1-.8-.4M18 7V3a.5.5 0 0 1 .8-.4l2.667 2a.5.5 0 0 1 0 .8l-2.667 2A.5.5 0 0 1 18 7"})));function R(){return(R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(null,arguments)}var U=e=>T.createElement("svg",R({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),p||(p=T.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.5 14v3"})),m||(m=T.createElement("rect",{width:14,height:18,x:5,y:3,stroke:"currentColor",strokeWidth:2,rx:2})),g||(g=T.createElement("circle",{cx:8.5,cy:14,r:1,fill:"currentColor"})),f||(f=T.createElement("circle",{cx:8.5,cy:17,r:1,fill:"currentColor"})),h||(h=T.createElement("circle",{cx:12,cy:17,r:1,fill:"currentColor"})),x||(x=T.createElement("circle",{cx:12,cy:14,r:1,fill:"currentColor"})),b||(b=T.createElement("circle",{cx:8.5,cy:11,r:1,fill:"currentColor"})),v||(v=T.createElement("circle",{cx:12,cy:11,r:1,fill:"currentColor"})),j||(j=T.createElement("circle",{cx:15.5,cy:11,r:1,fill:"currentColor"})));function B(){return(B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(null,arguments)}var F=e=>T.createElement("svg",B({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),y||(y=T.createElement("circle",{cx:12,cy:10.5,r:7.5,stroke:"currentColor",strokeWidth:2})),w||(w=T.createElement("path",{stroke:"currentColor",strokeLinejoin:"round",strokeWidth:2,d:"M8 17v5l4-1 4 1v-5"})));function W(){return(W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(null,arguments)}var K=e=>T.createElement("svg",W({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),k||(k=T.createElement("path",{stroke:"currentColor",strokeWidth:2,d:"M17 8h2a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2m0 0H5a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v10a2 2 0 0 0 2 2Z"})),P||(P=T.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 10h6M7 13h3"})));function Y(){return(Y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(null,arguments)}var V=e=>T.createElement("svg",Y({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),N||(N=T.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:2,d:"M6 5H5a2 2 0 0 0-2 2v1m15-3h1a2 2 0 0 1 2 2v1m0 8v1a2 2 0 0 1-2 2h-1M6 19H5a2 2 0 0 1-2-2v-1M8 10h8M8 14h6"})));function q(){return(q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(null,arguments)}var X=e=>T.createElement("svg",q({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),O||(O=T.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 18V7h16v11a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2"})),z||(z=T.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 10V6a3 3 0 0 1 3-3v0a3 3 0 0 1 3 3v4"})));function Q(){return(Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(null,arguments)}var $=e=>T.createElement("svg",Q({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),M||(M=T.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:2,d:"M3 6h7M3 10h4"})),C||(C=T.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.428 17.572 20.5 10.5a2.828 2.828 0 1 0-4-4l-7.072 7.072a2 2 0 0 0-.547 1.022L8 19l4.406-.881a2 2 0 0 0 1.022-.547"}))),J=r(651);let H=["#cb8bd0","#e2c541","#ed6262","#76d0eb"];function ee(e){let{starterPrompt:t,useV2Colors:r}=e;if(null==t.category)return null;let s=function(e){switch(e){case"genius":return S.cvK;case"idea":default:return S.WGR;case"data-vis":return S.eJP;case"code":return S.FxN;case"dalle":return G;case"local":return S.tEx;case"math":return U;case"misc":return I;case"news":return K;case"teach-or-explain":return S.bsk;case"read-or-analyze":return V;case"rank-or-rate":return F;case"current-event":case"browse":return S.W1M;case"shop":return X;case"travel":return E;case"weather":return A;case"write":return $;case"vision":return S.tEF;case"file-upload-document":return S.h3O}}(t.category);return(0,J.jsx)(s,{className:"icon-md",style:{color:r?function(e){switch(e){case"write":case"shop":return"#cb8bd0";case"idea":case"travel":return"#e2c541";case"code":case"vision":return"#6C71FF";case"file-upload-document":return"#EA8444";case"dalle":return"#35AE47";default:return"#76d0eb"}}(t.category):function(e){switch(e){case"write":case"shop":return H[0];case"idea":case"travel":return H[1];case"code":case"vision":return H[2];default:return H[3]}}(t.category)}})}},13391:function(e,t,r){"use strict";r.d(t,{n:function(){return S},A3:function(){return M},yx:function(){return _},JS:function(){return E}});var s,n=r(98601),a=r(15858),i=r(70879),o=r(99976),l=r(61619),c=r(79746),d=r(82363),u=r(91530),p=r.n(u),m=r(92379),g=r(47584),f=r(16757),h=r(24740),x=r(92745),b=r(31438),v=r(49763),j=r(22433),y=r(45248);let w=m.useLayoutEffect;function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}let P=/```.*?\n([\s\S]+?)\n?```[^`]*$/gms;var N=((s=N||{}).Core="Core",s.Chat="Chat",s.Settings="Settings",s);let O=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({Mod:"mod",Comma:","},a.s),z={[O.Mod]:/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)?"⌘":"Ctrl",[O.Comma]:",",[O.Enter]:"⏎",[O.Escape]:"Esc",[O.ArrowUp]:"↑",[O.ArrowDown]:"↓",[O.ArrowLeft]:"←",[O.ArrowRight]:"→",[O.Backspace]:"⌫",[O.Delete]:"⌦",[O.Tab]:"⇥",[O.Control]:"Ctrl",[O.Shift]:"Shift"},M=e=>e.map(e=>z[e]??e),C=(0,g.vU)({newChat:{id:"keyboardActions.newChat",defaultMessage:"Open new chat"},focusPromptTextarea:{id:"keyboardActions.focusPromptTextarea",defaultMessage:"Focus chat input"},copyLastCodeBlock:{id:"keyboardActions.copyLastCodeBlock",defaultMessage:"Copy last code block"},copyLastResponse:{id:"keyboardActions.copyLastResponse",defaultMessage:"Copy last response"},toggleCustomInstructions:{id:"keyboardActions.toggleCustomInstructions",defaultMessage:"Set custom instructions"},navigationToggle:{id:"keyboardActions.navigationToggle",defaultMessage:"Toggle sidebar"},deleteChat:{id:"keyboardActions.deleteChat",defaultMessage:"Delete chat"},archiveChat:{id:"keyboardActions.archiveChat",defaultMessage:"Archive chat"},toggleKeyboardActions:{id:"keyboardActions.toggleKeyboardActions",defaultMessage:"Show shortcuts"}}),S=new v.V,T=e=>{let{resetThreadAction:t,clientThreadId:r}=e;return[{key:"newChat",action:t||p(),actionMessageDescriptor:C.newChat,group:N.Core,keyboardBinding:[O.Mod,O.Shift,"o"],altKeyboardBindings:[[O.Mod,"k"]]},{key:"focusPromptTextarea",action:i.go,actionMessageDescriptor:C.focusPromptTextarea,group:N.Chat,keyboardBinding:[O.Shift,O.Escape]},{key:"copyLastCodeBlock",action:()=>{if(null!=r){let e=x.tQ.getThreadCurrentLeafId(r),t=x.tQ.getThreadConversationTurns(r,e);for(let e=t.length-1;e>=0;e--){let{messages:r}=t[e],s=[...r.reduce((e,t)=>null==t.err&&t.message.author.role===f.uU.Assistant&&"all"===t.message.recipient?e+(e?"\n\n":"")+(0,j.RR)(t.message):e,"").matchAll(P)],n=s.length?s[s.length-1][1]:null;if(null!=n){(0,c.v)(n).then(()=>{h.m.success("Copied code block to clipboard")});break}}}},actionMessageDescriptor:C.copyLastCodeBlock,group:N.Chat,keyboardBinding:[O.Mod,O.Shift,";"],altKeyboardBindings:[[O.Mod,O.Shift,":"]]},{key:"copyLastResponse",action:()=>{null!=r&&x.tQ.copyLastMessageToClipboard(r,"keyboard").then(()=>{h.m.success("Last response copied to clipboard")})},actionMessageDescriptor:C.copyLastResponse,group:N.Chat,keyboardBinding:[O.Mod,O.Shift,"c"]},{key:"toggleCustomInstructions",action:()=>b.vm.toggleModal(b.B.UserContext),actionMessageDescriptor:C.toggleCustomInstructions,group:N.Settings,keyboardBinding:[O.Mod,O.Shift,"i"]},{key:"navigationToggle",action:()=>b.vm.toggleNavSidebar(),actionMessageDescriptor:C.navigationToggle,group:N.Core,keyboardBinding:[O.Mod,O.Shift,"s"]},{key:"deleteChat",action:()=>{if(r){let e=x.tQ.getServerThreadId(r);e&&S.publish({kind:"deleteChat",serverThreadId:e})}},actionMessageDescriptor:C.deleteChat,group:N.Chat,keyboardBinding:[O.Mod,O.Shift,O.Backspace],altKeyboardBindings:[[O.Mod,O.Shift,O.Delete]]},{key:"toggleKeyboardActions",action:()=>b.vm.toggleModal(b.B.KeyboardActions),actionMessageDescriptor:C.toggleKeyboardActions,group:N.Settings,keyboardBinding:[O.Mod,"/"]}]},Z=e=>(function(e,t,r){let s=e.map(e=>{let{keyboardBinding:t}=e,r=t.join("+");if(e.altKeyboardBindings){r=[r];let t=e.altKeyboardBindings.map(e=>e.join("+"));r=r.concat(t)}return(0,y.ZP)(r,{byKey:!0})});w(()=>{if(r?.enabled===!1)return;let n=r=>{if(!r.repeat)for(let n=0;n<s.length;n++)s[n](r)&&(void 0===e[n].enabled||e[n].enabled)&&(r.preventDefault(),t(e[n]),e[n].action())},a=e=>{void 0!==e.key&&n(e)},i=document;return i.addEventListener("keydown",a),()=>{i.removeEventListener("keydown",a)}},[e,r])})(e,e=>{o.A.logEvent(l.M.keyboardShortcut,{keyboardActionKey:e.key}),d.U.addAction("chatgpt_keyboard_shortcut",{keyboardActionKey:e.key})},{enabled:!0}),E=function(){let{resetThreadAction:e,clientThreadId:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,m.useMemo)(()=>T({resetThreadAction:e,clientThreadId:t}).filter(e=>{let{enabled:t=!0}=e;return t}),[t,e])},_=e=>{let{resetThreadAction:t,clientThreadId:r}=e;Z(E({resetThreadAction:t,clientThreadId:r}))}},58015:function(e,t,r){"use strict";async function s(){}r.d(t,{C:function(){return s}})},89039:function(e,t,r){"use strict";let s,n;r.d(t,{J:function(){return D}});var a=r(92379),i=r(782),o=r(78789),l=r(91157),c=r(86060),d=r(76227),u=r(88554),p=r(98397),m=r(57084),g=r(60839),f=r(67607),h=r(87054),x=r(25825),b=r(39231),v=r(37927),j=r(11943),y=r(51973),w=((s=w||{})[s.Open=0]="Open",s[s.Closed=1]="Closed",s),k=((n=k||{})[n.TogglePopover=0]="TogglePopover",n[n.ClosePopover=1]="ClosePopover",n[n.SetButton=2]="SetButton",n[n.SetButtonId=3]="SetButtonId",n[n.SetPanel=4]="SetPanel",n[n.SetPanelId=5]="SetPanelId",n);let P={0:e=>({...e,popoverState:(0,i.E)(e.popoverState,{0:1,1:0})}),1:e=>1===e.popoverState?e:{...e,popoverState:1},2:(e,t)=>e.button===t.button?e:{...e,button:t.button},3:(e,t)=>e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId},4:(e,t)=>e.panel===t.panel?e:{...e,panel:t.panel},5:(e,t)=>e.panelId===t.panelId?e:{...e,panelId:t.panelId}},N=(0,a.createContext)(null);function O(e){let t=(0,a.useContext)(N);if(null===t){let t=Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,O),t}return t}N.displayName="PopoverContext";let z=(0,a.createContext)(null);function M(e){let t=(0,a.useContext)(z);if(null===t){let t=Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,M),t}return t}z.displayName="PopoverAPIContext";let C=(0,a.createContext)(null);function S(){return(0,a.useContext)(C)}C.displayName="PopoverGroupContext";let T=(0,a.createContext)(null);function Z(e,t){return(0,i.E)(t.type,P,e,t)}T.displayName="PopoverPanelContext";let E=(0,o.yV)(function(e,t){var r;let s=`headlessui-popover-button-${(0,c.M)()}`,n=`headlessui-popover-panel-${(0,c.M)()}`,d=(0,a.useRef)(null),u=(0,l.T)(t,(0,l.h)(e=>{d.current=e})),g=(0,a.useReducer)(Z,{popoverState:1,button:null,buttonId:s,panel:null,panelId:n,beforePanelSentinel:(0,a.createRef)(),afterPanelSentinel:(0,a.createRef)()}),[{popoverState:h,button:v,panel:y,beforePanelSentinel:w,afterPanelSentinel:k},P]=g,O=(0,x.i)(null!=(r=d.current)?r:v);(0,a.useEffect)(()=>P({type:3,buttonId:s}),[s,P]),(0,a.useEffect)(()=>P({type:5,panelId:n}),[n,P]);let M=(0,a.useMemo)(()=>{if(!v||!y)return!1;for(let e of document.querySelectorAll("body > *"))if(Number(null==e?void 0:e.contains(v))^Number(null==e?void 0:e.contains(y)))return!0;return!1},[v,y]),C=(0,a.useMemo)(()=>({buttonId:s,panelId:n,close:()=>P({type:1})}),[s,n,P]),T=S(),E=null==T?void 0:T.registerPopover,_=(0,j.z)(()=>{var e;return null!=(e=null==T?void 0:T.isFocusWithinPopoverGroup())?e:(null==O?void 0:O.activeElement)&&((null==v?void 0:v.contains(O.activeElement))||(null==y?void 0:y.contains(O.activeElement)))});(0,a.useEffect)(()=>null==E?void 0:E(C),[E,C]),(0,b.O)(null==O?void 0:O.defaultView,"focus",e=>{var t,r,s,n;0===h&&(_()||!v||!y||null!=(r=null==(t=w.current)?void 0:t.contains)&&r.call(t,e.target)||null!=(n=null==(s=k.current)?void 0:s.contains)&&n.call(s,e.target)||P({type:1}))},!0),(0,f.O)([v,y],(e,t)=>{P({type:1}),(0,p.sP)(t,p.tJ.Loose)||(e.preventDefault(),null==v||v.focus())},0===h);let I=(0,j.z)(e=>{P({type:1});let t=e?e instanceof HTMLElement?e:"current"in e&&e.current instanceof HTMLElement?e.current:v:v;null==t||t.focus()}),L=(0,a.useMemo)(()=>({close:I,isPortalled:M}),[I,M]),A=(0,a.useMemo)(()=>({open:0===h,close:I}),[h,I]);return a.createElement(N.Provider,{value:g},a.createElement(z.Provider,{value:L},a.createElement(m.up,{value:(0,i.E)(h,{0:m.ZM.Open,1:m.ZM.Closed})},(0,o.sY)({ourProps:{ref:u},theirProps:e,slot:A,defaultTag:"div",name:"Popover"}))))}),_=(0,o.yV)(function(e,t){let[r,s]=O("Popover.Button"),{isPortalled:n}=M("Popover.Button"),m=(0,a.useRef)(null),f=`headlessui-focus-sentinel-${(0,c.M)()}`,h=S(),b=null==h?void 0:h.closeOthers,w=(0,a.useContext)(T),k=null!==w&&w===r.panelId,P=(0,l.T)(m,t,k?null:e=>s({type:2,button:e})),N=(0,l.T)(m,t),z=(0,x.i)(m),C=(0,j.z)(e=>{var t,n,a;if(k){if(1===r.popoverState)return;switch(e.key){case d.R.Space:case d.R.Enter:e.preventDefault(),null==(n=(t=e.target).click)||n.call(t),s({type:1}),null==(a=r.button)||a.focus()}}else switch(e.key){case d.R.Space:case d.R.Enter:e.preventDefault(),e.stopPropagation(),1===r.popoverState&&(null==b||b(r.buttonId)),s({type:0});break;case d.R.Escape:if(0!==r.popoverState)return null==b?void 0:b(r.buttonId);if(!m.current||(null==z?void 0:z.activeElement)&&!m.current.contains(z.activeElement))return;e.preventDefault(),e.stopPropagation(),s({type:1})}}),Z=(0,j.z)(e=>{k||e.key===d.R.Space&&e.preventDefault()}),E=(0,j.z)(t=>{var n,a;(0,u.P)(t.currentTarget)||e.disabled||(k?(s({type:1}),null==(n=r.button)||n.focus()):(t.preventDefault(),t.stopPropagation(),1===r.popoverState&&(null==b||b(r.buttonId)),s({type:0}),null==(a=r.button)||a.focus()))}),_=(0,j.z)(e=>{e.preventDefault(),e.stopPropagation()}),I=0===r.popoverState,L=(0,a.useMemo)(()=>({open:I}),[I]),A=(0,g.f)(e,m),D=k?{ref:N,type:A,onKeyDown:C,onClick:E}:{ref:P,id:r.buttonId,type:A,"aria-expanded":e.disabled?void 0:0===r.popoverState,"aria-controls":r.panel?r.panelId:void 0,onKeyDown:C,onKeyUp:Z,onClick:E,onMouseDown:_},G=(0,y.l)(),R=(0,j.z)(()=>{let e=r.panel;e&&(0,i.E)(G.current,{[y.N.Forwards]:()=>(0,p.jA)(e,p.TO.First),[y.N.Backwards]:()=>(0,p.jA)(e,p.TO.Last)})});return a.createElement(a.Fragment,null,(0,o.sY)({ourProps:D,theirProps:e,slot:L,defaultTag:"button",name:"Popover.Button"}),I&&!k&&n&&a.createElement(v._,{id:f,features:v.A.Focusable,as:"button",type:"button",onFocus:R}))}),I=o.AN.RenderStrategy|o.AN.Static,L=(0,o.yV)(function(e,t){let[{popoverState:r},s]=O("Popover.Overlay"),n=(0,l.T)(t),i=`headlessui-popover-overlay-${(0,c.M)()}`,d=(0,m.oJ)(),p=null!==d?d===m.ZM.Open:0===r,g=(0,j.z)(e=>{if((0,u.P)(e.currentTarget))return e.preventDefault();s({type:1})}),f=(0,a.useMemo)(()=>({open:0===r}),[r]);return(0,o.sY)({ourProps:{ref:n,id:i,"aria-hidden":!0,onClick:g},theirProps:e,slot:f,defaultTag:"div",features:I,visible:p,name:"Popover.Overlay"})}),A=o.AN.RenderStrategy|o.AN.Static,D=Object.assign(E,{Button:_,Overlay:L,Panel:(0,o.yV)(function(e,t){let{focus:r=!1,...s}=e,[n,u]=O("Popover.Panel"),{close:g,isPortalled:f}=M("Popover.Panel"),h=`headlessui-focus-sentinel-before-${(0,c.M)()}`,b=`headlessui-focus-sentinel-after-${(0,c.M)()}`,w=(0,a.useRef)(null),k=(0,l.T)(w,t,e=>{u({type:4,panel:e})}),P=(0,x.i)(w),N=(0,m.oJ)(),z=null!==N?N===m.ZM.Open:0===n.popoverState,C=(0,j.z)(e=>{var t;if(e.key===d.R.Escape){if(0!==n.popoverState||!w.current||(null==P?void 0:P.activeElement)&&!w.current.contains(P.activeElement))return;e.preventDefault(),e.stopPropagation(),u({type:1}),null==(t=n.button)||t.focus()}});(0,a.useEffect)(()=>{var t;e.static||1===n.popoverState&&(null==(t=e.unmount)||t)&&u({type:4,panel:null})},[n.popoverState,e.unmount,e.static,u]),(0,a.useEffect)(()=>{if(!r||0!==n.popoverState||!w.current)return;let e=null==P?void 0:P.activeElement;w.current.contains(e)||(0,p.jA)(w.current,p.TO.First)},[r,w,n.popoverState]);let S=(0,a.useMemo)(()=>({open:0===n.popoverState,close:g}),[n,g]),Z={ref:k,id:n.panelId,onKeyDown:C,onBlur:r&&0===n.popoverState?e=>{var t,r,s,a,i;let o=e.relatedTarget;!o||!w.current||null!=(t=w.current)&&t.contains(o)||(u({type:1}),((null==(s=null==(r=n.beforePanelSentinel.current)?void 0:r.contains)?void 0:s.call(r,o))||(null==(i=null==(a=n.afterPanelSentinel.current)?void 0:a.contains)?void 0:i.call(a,o)))&&o.focus({preventScroll:!0}))}:void 0,tabIndex:-1},E=(0,y.l)(),_=(0,j.z)(()=>{let e=w.current;e&&(0,i.E)(E.current,{[y.N.Forwards]:()=>{(0,p.jA)(e,p.TO.First)},[y.N.Backwards]:()=>{var e;null==(e=n.button)||e.focus({preventScroll:!0})}})}),I=(0,j.z)(()=>{let e=w.current;e&&(0,i.E)(E.current,{[y.N.Forwards]:()=>{var e,t,r;if(!n.button)return;let s=(0,p.GO)(),a=s.indexOf(n.button),i=s.slice(0,a+1),o=[...s.slice(a+1),...i];for(let s of o.slice())if((null==(t=null==(e=null==s?void 0:s.id)?void 0:e.startsWith)?void 0:t.call(e,"headlessui-focus-sentinel-"))||(null==(r=n.panel)?void 0:r.contains(s))){let e=o.indexOf(s);-1!==e&&o.splice(e,1)}(0,p.jA)(o,p.TO.First,!1)},[y.N.Backwards]:()=>(0,p.jA)(e,p.TO.Last)})});return a.createElement(T.Provider,{value:n.panelId},z&&f&&a.createElement(v._,{id:h,ref:n.beforePanelSentinel,features:v.A.Focusable,as:"button",type:"button",onFocus:_}),(0,o.sY)({ourProps:Z,theirProps:s,slot:S,defaultTag:"div",features:A,visible:z,name:"Popover.Panel"}),z&&f&&a.createElement(v._,{id:b,ref:n.afterPanelSentinel,features:v.A.Focusable,as:"button",type:"button",onFocus:I}))}),Group:(0,o.yV)(function(e,t){let r=(0,a.useRef)(null),s=(0,l.T)(r,t),[n,i]=(0,a.useState)([]),c=(0,j.z)(e=>{i(t=>{let r=t.indexOf(e);if(-1!==r){let e=t.slice();return e.splice(r,1),e}return t})}),d=(0,j.z)(e=>(i(t=>[...t,e]),()=>c(e))),u=(0,j.z)(()=>{var e;let t=(0,h.r)(r);if(!t)return!1;let s=t.activeElement;return!!(null!=(e=r.current)&&e.contains(s))||n.some(e=>{var r,n;return(null==(r=t.getElementById(e.buttonId))?void 0:r.contains(s))||(null==(n=t.getElementById(e.panelId))?void 0:n.contains(s))})}),p=(0,j.z)(e=>{for(let t of n)t.buttonId!==e&&t.close()}),m=(0,a.useMemo)(()=>({registerPopover:d,unregisterPopover:c,isFocusWithinPopoverGroup:u,closeOthers:p}),[d,c,u,p]),g=(0,a.useMemo)(()=>({}),[]);return a.createElement(C.Provider,{value:m},(0,o.sY)({ourProps:{ref:s},theirProps:e,slot:g,defaultTag:"div",name:"Popover.Group"}))})})}}]);
//# sourceMappingURL=2674-eac19c29960e7e2d.js.map