"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6451],{6440:function(e,t,n){var r,s=n(2346),a=n(98601),l=n(19841),i=n(92379),o=n(15478),c=n(651);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}t.Z=i.forwardRef(function(e,t){let{name:n,placeholder:r,type:s,list:a,displayName:o,onChange:u,onFocus:m,onBlur:f,value:p,saveOnBlur:x,icon:g,onInputIconClick:v,className:b,autoComplete:y,autoFocus:j,onPressEnter:w,disabled:k,maxLength:N,color:O="tertiary"}=e,{0:C,1:_}=(0,i.useState)(p),M=(0,i.useCallback)(e=>{null==f||f(e),x&&_(e.target.value)},[f,x]),P=(0,i.useCallback)(e=>{null==u||u(e),x&&_(e.target.value)},[u,x]),E=(0,i.useCallback)(e=>{"Enter"===e.key&&w&&(e.preventDefault(),w(C))},[w,C]);(0,i.useEffect)(()=>{_(p)},[p]);let S=d(d({},x?{}:{value:p}),x?{value:C}:{});return(0,c.jsxs)("div",{className:(0,l.default)("rounded-md border shadow-none","neutral"===O&&"border-transparent px-3 py-2 focus-within:border-green-500 focus-within:bg-token-main-surface-tertiary focus-within:ring-1 focus-within:ring-transparent hover:bg-token-main-surface-tertiary","tertiary"===O&&"border-token-border-medium px-3 py-2 focus-within:border-token-border-xheavy focus-within:ring-1 focus-within:ring-token-text-secondary","search"===O&&"rounded-xl border-token-border-medium bg-token-main-surface-primary p-4 focus-within:border-token-border-xheavy focus-within:ring-0 dark:border-token-border-medium dark:focus-within:border-token-border-xheavy dark:focus-within:ring-0",b),children:[(0,c.jsx)("label",{htmlFor:n,className:"block text-xs font-semibold text-token-text-primary",children:o}),(0,c.jsxs)("div",{className:(0,l.default)(o&&"mt-1","relative"),children:[(0,c.jsx)("input",d({ref:t,type:s,name:n,id:n,list:a,className:(0,l.default)("block w-full border-0 p-0 placeholder-gray-500 shadow-none outline-none focus-within:shadow-none focus-within:outline-none focus-within:ring-0 focus:border-none focus:ring-0 sm:text-sm",null!=g&&"pr-6","neutral"===O||"search"===O?"bg-transparent":"bg-token-main-surface-primary text-token-text-primary"),placeholder:r,onBlur:M,onFocus:m,onChange:P,onKeyDown:E,autoComplete:y,autoFocus:j,disabled:k,maxLength:N},S)),null!=g&&(0,c.jsx)(h,{onClick:v,children:(0,c.jsx)(g,{className:"icon-sm"})})]})]})});let h=o.Z.button(r||(r=(0,s.Z)(["absolute right-0 top-1/2 -translate-y-1/2"])))},22594:function(e,t,n){n.d(t,{D:function(){return b},Z:function(){return v}});var r,s=n(2346),a=n(21389),l=n(88600),i=n(89678),o=n.n(i),c=n(92379),u=n(75172),d=n(62984),h=n(15478),m=n(11550),f=n(6440),p=n(41619),x=n(24434),g=n(651);function v(e){let{tagOptions:t,onSubmit:n,onMoreClicked:r,onCancel:s,maxInlineTags:i=5,modalOnly:h=!1,modalTitle:v,multiple:y,children:j,allowEmptySubmit:w=!1}=e,k=(0,u.Z)(),{0:N,1:O}=(0,c.useState)(h?"modal":"inline"),{0:C,1:_}=(0,c.useState)([]),{0:M,1:P}=(0,c.useState)(void 0),E=(0,c.useCallback)(e=>{n(e),O("submitted"),setTimeout(()=>{O("closed")},1500)},[n]),S=(0,c.useMemo)(()=>o()(E,500),[E]),T=e=>{let t=[];return _(t=y?C.includes(e)?C.filter(t=>t!==e):[...C,e]:[e]),t},L=()=>{E({tags:C,textFeedback:M,tagChoices:A,source:"modal"})},A=t.map(e=>e.value),I=function(e){let t={};return e.forEach(e=>{var n;let r=null!==(n=e.group)&&void 0!==n?n:"Default";t[r]||(t[r]=[]),t[r].push(e)}),t}(t),D=Object.keys(I);return(0,g.jsxs)(g.Fragment,{children:[!h&&(0,g.jsx)(a.M,{children:"closed"!==N&&(0,g.jsxs)(l.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"min-h-[96px] w-full",children:["submitted"===N&&(0,g.jsx)(l.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"text-center",children:(0,g.jsx)("div",{className:"inline-flex rounded-lg border border-token-border-light p-4",children:(0,g.jsx)("div",{className:"text-sm",children:(0,g.jsx)(d.Z,{id:"ConversationTurnInlineMessageFeedback.submitted",defaultMessage:"Thanks for your feedback!"})})})}),["inline","modal"].includes(N)&&(0,g.jsxs)("div",{className:"relative mt-2 flex w-full flex-col gap-3 rounded-lg border border-token-border-light p-4",children:[(0,g.jsx)("button",{className:"absolute right-4 top-4 text-sm font-bold",onClick:()=>{O("closed"),S.cancel(),null==s||s()},children:(0,g.jsx)(p.tPq,{className:"icon-md text-token-text-secondary hover:text-token-text-primary"})}),(0,g.jsx)("div",{className:"text-sm text-token-text-secondary",children:(0,g.jsx)(d.Z,{id:"ConversationTurnInlineMessageFeedback.inlineTitle",defaultMessage:"Tell us more:"})}),(0,g.jsxs)("div",{className:"flex flex-wrap gap-3",children:[t.slice(0,i).map(e=>(0,g.jsx)(b,{$selected:C.includes(e.value),onClick:()=>{S({tags:T(e.value),tagChoices:A,source:"inline"})},children:e.label},e.value)),(0,g.jsx)(b,{onClick:()=>{null==r||r(),S.cancel(),O("modal")},children:(0,g.jsx)(d.Z,{id:"ConversationTurnInlineMessageFeedback.moreOptions.1",defaultMessage:"More..."})})]})]})]},"main")}),"modal"===N&&(0,g.jsxs)(x.Z,{type:"success",isOpen:!0,className:"max-w-xl",size:"custom",title:null!=v?v:(0,g.jsx)(d.Z,{id:"ConversationTurnInlineMessageFeedback.modalTitle",defaultMessage:"Provide additional feedback"}),onClose:()=>{_([]),O(h?"closed":"inline"),h&&(null==s||s())},showCloseButton:!0,primaryButton:(0,g.jsx)(m.z,{color:"primary",disabled:0===C.length&&!M&&!w,onClick:L,children:(0,g.jsx)(d.Z,{id:"ConversationTurnInlineMessageFeedback.submit",defaultMessage:"Submit"})}),rootClassName:"z-50",children:[(0,g.jsx)("div",{className:"flex flex-col gap-6",children:D.map(e=>(0,g.jsxs)("div",{children:[D.length>1&&(0,g.jsx)("div",{className:"mb-3 text-sm font-semibold",children:e}),(0,g.jsx)("div",{className:"flex flex-wrap gap-3",children:I[e].map(e=>(0,g.jsx)(b,{$selected:C.includes(e.value),onClick:()=>T(e.value),children:e.label},e.value))},e)]},e))}),(0,g.jsx)(f.Z,{name:"feedback",type:"text",className:"mt-6",placeholder:k.formatMessage({id:"ConversationTurnInlineMessageFeedback.feedbackPlaceholder.1",defaultMessage:"(Optional) Feel free to add specific details"}),value:null!=M?M:"",onChange:e=>P(e.target.value),onPressEnter:L}),j]})]})}let b=h.Z.button(r||(r=(0,s.Z)(["\n  rounded-lg border border-token-border-light px-3 py-1 text-sm text-token-text-secondary hover:text-token-text-primary hover:bg-token-main-surface-secondary\n  ","\n"])),e=>{let{$selected:t}=e;return t&&"!bg-token-text-primary !text-token-main-surface-primary"})},76482:function(e,t,n){n.d(t,{lx:function(){return l}});var r=n(38482),s=n.n(r);let a=s()(()=>Promise.all([n.e(6835),n.e(6617),n.e(893),n.e(7398),n.e(1981),n.e(4197),n.e(9027),n.e(8946),n.e(3347)]).then(n.bind(n,22912)).then(e=>e.FormattedText),{loadableGenerated:{webpack:()=>[22912]}});t.ZP=a;let l=s()(()=>Promise.all([n.e(6835),n.e(6617),n.e(893),n.e(7398),n.e(1981),n.e(4197),n.e(9027),n.e(8946),n.e(3347)]).then(n.bind(n,22912)).then(e=>e.UserFormattedText),{loadableGenerated:{webpack:()=>[22912]}})},44885:function(e,t,n){n.d(t,{R3:function(){return u},Zl:function(){return m},fL:function(){return d}});var r=n(98601),s=n(23763),a=n.n(s),l=n(56290);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}class o{constructor(e,t){(0,r.Z)(this,"requestUpdateRaf",null),(0,r.Z)(this,"_requestUpdate",()=>{this.requestUpdateRaf||(this.requestUpdateRaf=window.requestAnimationFrame(()=>{this._update(),this.requestUpdateRaf=null}))}),this.updateReactComponentDisplay=t}destroy(){this.requestUpdateRaf&&(window.cancelAnimationFrame(this.requestUpdateRaf),this.requestUpdateRaf=null)}}class c extends o{constructor(e,t){super(e,t),(0,r.Z)(this,"_update",()=>{this.updateReactComponentDisplay((0,l.$w)(this.textMessageParts,this.displayedTextLength))}),this.updateReactComponentDisplay=t,this.textMessageParts=e,this.textMessagePartsTextLength=(0,l.Vh)(this.textMessageParts).length,this.displayedTextLength=this.textMessagePartsTextLength,this.displayNextCharDelayMs=c.MAX_BUFFERING_MS_PER_CHAR}displayNextChar(){this.displayNextCharTimeout=void 0,this.isBuffering()&&(this.displayedTextLength++,this._requestUpdate(),this.displayNextCharTimeout=window.setTimeout(()=>this.displayNextChar(),this.displayNextCharDelayMs))}isBuffering(){return this.displayedTextLength<this.textMessagePartsTextLength}onMessagePartsUpdated(e){this.textMessageParts=e,this.textMessagePartsTextLength=(0,l.Vh)(this.textMessageParts).length;let t=this.textMessagePartsTextLength-this.displayedTextLength;if(t>0){let e=c.MAX_BUFFERING_LAG_MS/t;this.displayNextCharDelayMs=Math.min(e,c.MAX_BUFFERING_MS_PER_CHAR)}null==this.displayNextCharTimeout&&this.displayNextChar()}destroy(){super.destroy(),window.clearTimeout(this.displayNextCharTimeout)}}(0,r.Z)(c,"MAX_BUFFERING_LAG_MS",500),(0,r.Z)(c,"MAX_BUFFERING_MS_PER_CHAR",30);class u extends o{constructor(e,t){super(e,t),(0,r.Z)(this,"_update",()=>{this.updateReactComponentDisplay((0,l.$w)(this.textMessageParts,this.displayedTextLength))}),this.updateReactComponentDisplay=t,this.textMessageParts=e,this.textMessagePartsTextLength=(0,l.Vh)(this.textMessageParts).length,this.displayedTextLength=this.textMessagePartsTextLength,this.chunkLength=0}displayNextChunk(){this.displayNextChunkTimeout=void 0,this.isBuffering()&&(this.displayedTextLength=Math.min(this.displayedTextLength+this.chunkLength,this.textMessagePartsTextLength),this._requestUpdate(),this.displayNextChunkTimeout=window.setTimeout(()=>this.displayNextChunk(),u.UPDATE_FREQUENCY_MS))}isBuffering(){return this.displayedTextLength<this.textMessagePartsTextLength}onMessagePartsUpdated(e){this.textMessageParts=e,this.textMessagePartsTextLength=(0,l.Vh)(this.textMessageParts).length;let t=this.textMessagePartsTextLength-this.displayedTextLength;t>=u.MIN_CHARS_BEHIND_TO_CATCHUP?(this.chunkLength=Math.ceil(t*u.UPDATE_FREQUENCY_MS/u.CATCHUP_TIME_MS),null==this.displayNextChunkTimeout&&this.displayNextChunk()):(this.displayNextChunkTimeout=void 0,window.clearTimeout(this.displayNextChunkTimeout),this.displayedTextLength=this.textMessagePartsTextLength,this.updateReactComponentDisplay((0,l.$w)(this.textMessageParts,this.displayedTextLength)))}destroy(){super.destroy(),window.clearTimeout(this.displayNextChunkTimeout)}}(0,r.Z)(u,"MIN_CHARS_BEHIND_TO_CATCHUP",20),(0,r.Z)(u,"CATCHUP_TIME_MS",300),(0,r.Z)(u,"UPDATE_FREQUENCY_MS",30);class d extends o{constructor(e,t,n){var s;super(e,t),(0,r.Z)(this,"LAG_FACTORS",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({".":15,"!":15,"?":15,"\n":15,",":8,":":8,";":8,DEFAULT_LAG_FACTOR:.9,BUFFER_FACTOR:.08},window.__PUNCTUATION_BUFFER_LAG_FACTORS)),(0,r.Z)(this,"_update",()=>{let e=(0,l.$w)(this.textMessageParts,this.displayedTextLength);this.updateReactComponentDisplay(e)}),(0,r.Z)(this,"_throttledDebugLog",a()(e=>{this.debug&&console.debug(e)},500,{leading:!0,trailing:!0})),this.updateReactComponentDisplay=t,this.textMessageParts=e,this.textMessagePartsTextLength=(0,l.Vh)(this.textMessageParts).length,this.displayedTextLength=this.textMessagePartsTextLength,this.concatenatedText=(0,l.Vh)(this.textMessageParts),this.isActivelyStreaming=!1,this.debug=null!==(s=null==n?void 0:n.debug)&&void 0!==s&&s,this.streamStartMs=0,this.averageMsPerChar=0,this.debug&&console.debug(["PunctuationBuffer:","[lagFactors: ".concat(JSON.stringify(this.LAG_FACTORS,null,2),"]")].join("\n"))}displayNextChar(){this.displayNextCharTimeout=void 0,this.isBuffering()&&(this.displayedTextLength++,this._requestUpdate(),this.displayNextCharTimeout=window.setTimeout(()=>this.displayNextChar(),this._getNextCharDelayMs()))}isBuffering(){return this.displayedTextLength<this.textMessagePartsTextLength}onMessagePartsUpdated(e,t){this.textMessageParts=e,this.isActivelyStreaming=t;let n=(0,l.Vh)(this.textMessageParts);this.concatenatedText=n,this.textMessagePartsTextLength=n.length,0===this.streamStartMs?this.streamStartMs=Date.now():this.averageMsPerChar=(Date.now()-this.streamStartMs)/this.textMessagePartsTextLength,this.displayNextCharTimeout||this.displayNextChar()}destroy(){super.destroy(),window.clearTimeout(this.displayNextCharTimeout)}_getNextCharDelayMs(){var e;let t=this.concatenatedText[this.displayedTextLength-1],n=this.textMessagePartsTextLength-this.displayedTextLength,r=1/Math.max(n*this.LAG_FACTORS.BUFFER_FACTOR,1),s=(null!==(e=this.LAG_FACTORS[t])&&void 0!==e?e:this.LAG_FACTORS.DEFAULT_LAG_FACTOR)*r,a=this.averageMsPerChar*s;return this._throttledDebugLog(["PunctuationBuffer:","[lagMs: ".concat(a,"]"),'[lastChar: "'.concat(t,'"]'),"[averageMsPerChar: ".concat(this.averageMsPerChar,"]"),"[lagFactor: ".concat(s,"]"),"[bufferLagFactor: ".concat(r,"]"),"[numBufferedChars: ".concat(n,"]"),"==="].join("\n")),a}}function h(e){return"text"===e.type}class m{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";(0,r.Z)(this,"updateReactComponentDisplay",e=>{let t=e.filter(h).map(e=>e.text).join("");this.onFlush(t)}),this.buffer=new e([n],this.updateReactComponentDisplay),this.onFlush=t,this.text=n}appendText(e){this.text+=e,this.buffer.onMessagePartsUpdated([this.text],!0)}setText(e){this.text=e,this.buffer.onMessagePartsUpdated([this.text],!0)}isBuffering(){return this.buffer.isBuffering()}}},41871:function(e,t,n){n.d(t,{O1:function(){return j},XX:function(){return f},Xt:function(){return x},cm:function(){return m},i$:function(){return b},xB:function(){return p}});var r=n(16757),s=n(66114),a=n(76482),l=n(82363),i=n(19841),o=n(99661),c=n(92379),u=n(75172),d=n(59122),h=n(651);let m=(0,c.createContext)({isWithinDataAnalysisToolMessage:!1});function f(e){let{message:t}=e,{resolvedTheme:n}=(0,o.F)();return(0,h.jsx)(m.Provider,{value:{isWithinDataAnalysisToolMessage:!0},children:(0,h.jsx)(a.ZP,{className:(0,i.default)("markdown prose w-full break-words dark:prose-invert","dark"===n?"dark":"light"),children:p(t)})})}function p(e){function t(e,t){return"```".concat(t,"\n").concat(e,"\n```")}if("code"===e.content.content_type)return t(e.content.text,"python");if("python"===e.recipient){if("text"!==e.content.content_type)throw Error("Unexpected content type for code message");let n=e.content.parts;if(1!==n.length||"string"!=typeof n[0])throw Error("Unexpected parts for code message");return t(n[0],"python")}throw Error("Unexpected code message format")}function x(e){var t;let{message:n}=e,s=(0,u.Z)();if(n.content.content_type!==r.PX.ExecutionOutput)return null;let a=null===(t=n.metadata)||void 0===t?void 0:t.aggregate_result;if(!a)return l.U.addError("Corrupt code execution result message"),null;let i=a.messages.filter(y),o=i.length>0,c=null!=a.final_expression_output,d=null!=a.in_kernel_exception;return(0,h.jsxs)(h.Fragment,{children:[o&&(0,h.jsx)(g,{label:"STDOUT/STDERR",output:i.map((e,t)=>(0,h.jsx)("span",{className:"stderr"===e.stream_name?"text-red-500":"",children:e.text},"".concat(t)))}),c&&(0,h.jsx)(g,{label:s.formatMessage({id:"codeInterpreterMessage.resultLabel",defaultMessage:"Result"}),output:a.final_expression_output}),d&&(0,h.jsx)(v,{traceback:a.in_kernel_exception.traceback.join("")})]})}function g(e){let{label:t,output:n}=e;return(0,h.jsxs)("div",{className:"bg-gray-700 p-4 text-xs",children:[(0,h.jsx)("div",{className:"mb-1 text-gray-400",children:t}),(0,h.jsx)("div",{className:"prose flex flex-col-reverse text-white",children:(0,h.jsx)("pre",{className:"shrink-0",children:n})})]})}function v(e){let{traceback:t}=e;return(0,h.jsx)("div",{className:"overflow-auto border-t border-gray-500 text-white",children:(0,h.jsx)("div",{className:"border-l-4 border-red-500 p-2 text-xs",children:(0,h.jsx)("div",{className:"scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-700 flex max-h-64 flex-col-reverse",children:(0,h.jsx)("pre",{className:"shrink-0",children:t})})})})}function b(e){var t;let{message:n}=e;if(n.content.content_type!==r.PX.ExecutionOutput)return null;let s=null===(t=n.metadata)||void 0===t?void 0:t.aggregate_result;return s?(0,h.jsx)(h.Fragment,{children:s.messages.filter(j).map((e,t)=>(0,h.jsx)(d.Z,{jupyterMessage:e},t))}):(l.U.addError("Corrupt code execution result message"),null)}function y(e){return"stream"===e.message_type}function j(e){return"image"===e.message_type||"image_url"in e&&(0,s.$H)(e.image_url+"")}},59122:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(98601),s=n(99333),a=n(41619),l=n(66114),i=n(2721),o=n(92745),c=n(84760),u=n(92379),d=n(75172),h=n(62984),m=n(68306),f=n(651);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){let{jupyterMessage:t}=e,n=(0,o.h9)(),s=(0,d.Z)();if(n)return(0,f.jsxs)("div",{className:"my-1 flex h-52 w-full max-w-xs flex-col items-center justify-center gap-2 rounded-md border-black/5 bg-gray-100 p-7 text-center text-token-text-tertiary dark:border-white/10",children:[(0,f.jsx)(a.zS0,{className:"icon-lg"}),(0,f.jsx)(h.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},b.imageNotSupported))]});if(null!=t.image_payload)return(0,f.jsx)("img",{className:"my-1",src:"data:image/png;base64,".concat(t.image_payload),alt:s.formatMessage(b.altText)});if(null!=t.image_url){let e=(0,l.Iy)(t.image_url);return(0,f.jsx)(v,{fileId:e})}return null}let g=Math.log(151)/Math.log(1.5);function v(e){let{fileId:t}=e,n=(0,d.Z)(),{data:r,isLoading:a,refetch:l}=(0,c.a)({queryKey:["getFileDownloadLink",t],queryFn:()=>i.Z.getFileDownloadLink(t),refetchInterval:e=>{var t;let n=e.state.dataUpdateCount;return(null===(t=e.state.data)||void 0===t?void 0:t.status)!==s.KF.Success&&!(n>g)&&e.state.status!==s.KF.Error&&100*Math.pow(1.5,n)}});return((0,u.useEffect)(()=>{if((null==r?void 0:r.status)===s.KF.Success){let e=new URL(r.download_url,location.toString()).searchParams.get("se");null!=e&&!a&&new Date>new Date(e)&&l()}},[r,a,l]),(null==r?void 0:r.status)!==s.KF.Success)?null:(0,f.jsx)("img",{src:r.download_url,className:"my-1 max-h-full max-w-full",alt:n.formatMessage(b.altText)})}let b=(0,m.vU)({imageNotSupported:{id:"CodeExecutionOutputImage.imageNotSupported",defaultMessage:"Image output is not supported in a shared chat"},altText:{id:"CodeExecutionOutputImage.altText",defaultMessage:"Output image"}})},56290:function(e,t,n){n.d(t,{$w:function(){return l},Lm:function(){return i},Qq:function(){return a},Vh:function(){return s}});var r=n(16757);function s(e){return e.map(e=>"string"==typeof e?e:"").join("")}function a(e){return e.map(e=>"text"===e.type?e.text:"").join("\n")}function l(e,t){let n=[],s=0;for(let a=0;a<e.length;a++){let l=e[a];if("string"==typeof l){if(null!=t&&t<s+l.length){n.push({type:"text",text:l.slice(0,t-s)});break}n.push({type:"text",text:l}),s+=l.length}else if(l.content_type===r.wW.ImageAssetPointer){let e=a>0?n[a-1]:null;(null==e?void 0:e.type)==="images"?e.imageAssets.push(l):n.push({type:"images",imageAssets:[l]})}else l.content_type===r.wW.AudioTranscription&&n.push({type:"transcription",text:l.text})}return n}function i(e){let{isUserTurn:t,parts:n}=e;if(!t)return l(n);let s={text:[],images:[]};for(let e=0;e<n.length;e++){let t=n[e];"string"==typeof t?t.trim().length>0&&s.text.push({type:"text",text:t}):t.content_type===r.wW.AudioTranscription?s.text.push({type:"transcription",text:t.text}):t.content_type===r.wW.ImageAssetPointer&&s.images.push(t)}let a=[];return s.images.length>0&&a.unshift({type:"images",imageAssets:s.images}),a.push(...s.text.map(e=>({type:e.type,text:e.text}))),a}},40833:function(e,t,n){n.d(t,{v:function(){return m}});var r=n(98601),s=n(10449),a=n(19841),l=n(92379),i=n(62984),o=n(68306),c=n(41619),u=n(651);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function m(e){let{align:t,arrowPadding:n,alignOffset:r,show:o,onDismiss:d,children:m,title:p,side:x,sideOffset:g,theme:v="default",badge:b="new",description:y,dismissOnOutsideClick:j=!1}=e,w=(0,l.useRef)(null);return(0,u.jsxs)(s.fC,{open:o,onOpenChange:e=>{e||d()},children:[(0,u.jsx)(s.xz,{asChild:!0,onClick:()=>{d()},ref:w,children:m}),(0,u.jsx)(s.h_,{children:(0,u.jsxs)(s.VY,{arrowPadding:n,alignOffset:r,align:t,side:x,sideOffset:g,onOpenAutoFocus:e=>{e.preventDefault()},onCloseAutoFocus:e=>{e.preventDefault()},onInteractOutside:e=>{var t;e.target instanceof Element&&(null===(t=w.current)||void 0===t?void 0:t.contains(e.target))?e.preventDefault():j?d():e.preventDefault()},updatePositionStrategy:"always",className:(0,a.default)("relative z-10 animate-slideLeftAndFade select-none rounded-xl p-4 text-sm shadow-sm","default"===v?"bg-gray-900 text-white dark:bg-gray-50 dark:text-gray-700":"bg-blue-400 text-white"),children:[(0,u.jsxs)("div",{className:"flex max-w-xs flex-col gap-1",children:[(0,u.jsxs)("div",{className:"mb-0.5 flex gap-2",children:["new"===b?(0,u.jsx)("span",{className:(0,a.default)("rounded px-1.5 py-0.5 text-[10px] font-semibold uppercase leading-normal","default"===v?"bg-green-500 text-white":"bg-white text-blue-selection"),children:(0,u.jsx)(i.Z,h({},f.new))}):"beta"===b&&(0,u.jsx)("span",{className:"rounded-full bg-blue-100 px-1.5 text-[10px] font-semibold text-blue-600",children:(0,u.jsx)(i.Z,h({},f.beta))}),(0,u.jsx)("div",{className:"grow font-semibold",children:p}),(0,u.jsx)(s.x8,{className:"-my-1 -mr-1 p-1 opacity-70 transition hover:opacity-100",children:(0,u.jsx)(c.tPq,{className:"icon-sm"})})]}),void 0!==y&&(0,u.jsx)("div",{className:"",children:y})]}),(0,u.jsx)(s.Eh,{asChild:!0,children:(0,u.jsx)("div",{className:(0,a.default)("relative top-[-6px] h-3 w-3 rotate-45 transform rounded-br-sm","default"===v?"bg-gray-900 dark:bg-gray-50":"bg-blue-400")})})]})})]})}let f=(0,o.vU)({new:{id:"announcementTooltip.new",defaultMessage:"New"},beta:{id:"announcementTooltip.beta",defaultMessage:"Beta"}})},9033:function(e,t,n){n.d(t,{Kd:function(){return v},v_:function(){return b}});var r=n(59725),s=n(98095),a=n(41619),l=n(15913),i=n(38482),o=n.n(i),c=n(34977),u=n(44425),d=n(26925),h=n(97193),m=n(51837),f=n(651);let p=o()(()=>n.e(8682).then(n.bind(n,9760)).then(e=>e.AvatarButtons),{ssr:!1,loadableGenerated:{webpack:()=>[9760]}}),x=s.Z.Item;function g(){let e=d.ne.useStore();return(0,l.e2)()?(0,f.jsx)(x,{onClick:()=>{e.setState({shouldShowAddToHomePopover:!0})},icon:(0,f.jsx)(a.IAe,{className:"icon-md-heavy text-token-text-primary"}),children:"Add to home screen"}):null}function v(e){let{className:t,iconSize:n,children:r}=e,l=(0,m.L)(),i=(0,c.useRouter)();return(0,f.jsxs)(s.Z.Root,{modal:!1,children:[(0,f.jsx)(y,{className:t,iconSize:n,children:r}),(0,f.jsx)(s.Z.Portal,{children:(0,f.jsxs)(s.Z.Content,{collisionPadding:10,children:[(0,f.jsx)(x,{onClick:()=>h.vm.toggleSettingsModalOpen(),icon:(0,f.jsx)(a.SWE,{className:"icon-md-heavy text-token-text-primary"}),children:"Settings"}),(0,f.jsx)(x,{onClick:()=>window.open(u._A,"_blank"),icon:(0,f.jsx)(a.Jmo,{className:"icon-md-heavy text-token-text-primary"}),children:"About SearchGPT"}),(0,f.jsx)(x,{onClick:()=>window.open("https://chatgpt.com","_blank"),icon:(0,f.jsx)(a.Pfi,{className:"icon-md-heavy text-token-text-primary"}),children:"Open ChatGPT"}),(0,f.jsx)(g,{}),(0,f.jsx)(s.Z.Separator,{}),(0,f.jsx)(x,{onClick:()=>i.push("/auth/logout",void 0,{shallow:!0}),icon:(0,f.jsx)(a.iz5,{className:"icon-md-heavy text-token-text-primary"}),children:"Log out"}),l&&(0,f.jsx)(p,{})]})})]})}function b(e){let{className:t,iconSize:n}=e,r=(0,c.useRouter)();return(0,f.jsxs)(s.Z.Root,{modal:!1,children:[(0,f.jsx)(y,{className:t,iconSize:n}),(0,f.jsx)(s.Z.Portal,{children:(0,f.jsx)(s.Z.Content,{collisionPadding:10,children:(0,f.jsx)(x,{onClick:()=>r.push("/auth/logout",void 0,{shallow:!0}),icon:(0,f.jsx)(a.iz5,{className:"icon-md-heavy text-token-text-primary"}),children:"Log out"})})})]})}function y(e){let{className:t,iconSize:n,children:a}=e;return(0,f.jsx)(s.Z.Trigger,{className:"group border-0 !bg-transparent p-0",children:(0,f.jsx)("div",{className:"rounded-full",children:null!=a?a:(0,f.jsx)(r.zf,{iconSize:n,className:t})})})}},65787:function(e,t,n){n.d(t,{F:function(){return m}});var r=n(11550),s=n(41619),a=n(15913),l=n(30474),i=n(21389),o=n(88600),c=n(92379),u=n(62984),d=n(26925),h=n(651);function m(){let e=(0,l.L)(()=>"1"===document.documentElement.dataset.searchExtension),t=d.ne.useStore(),{0:n,1:m}=(0,c.useState)(()=>t.getState().hasSearched&&!t.getState().hasDismissedExtensionUpsell),f=()=>{window.open("https://chromewebstore.google.com/detail/searchgpt/ejcfepkfckglbgocfkanmcdngdijcgld")},p=!1===e&&(0,a.h6)()&&n;return(0,h.jsx)(i.M,{children:p&&(0,h.jsx)(o.E.div,{exit:{width:0,opacity:0},className:"overflow-hidden",children:(0,h.jsxs)(r.z,{size:"small",color:"secondary",onClick:()=>{f()},className:"w-full overflow-hidden whitespace-nowrap",children:[(0,h.jsx)(u.Z,{id:"OcC3ls",defaultMessage:"Set as search engine"}),(0,h.jsx)("button",{onClick:e=>{e.stopPropagation(),m(!1),t.dismissExtensionUpsell()},className:"-mr-1.5 ml-1 flex p-0.5 text-token-text-tertiary transition hover:text-token-text-primary",children:(0,h.jsx)(s.tPq,{className:"icon-xs"})})]})})})}},67330:function(e,t,n){n.d(t,{aE:function(){return u},bW:function(){return c},jj:function(){return o}});var r=n(82363),s=n(92379),a=n(64925),l=n(95204),i=n(651);function o(e){let{children:t}=e;return(0,i.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,i.jsxs)("div",{className:"flex flex-col items-center gap-1 text-sm font-semibold text-token-text-tertiary",children:[(0,i.jsx)(l.Z,{className:"icon-2xl"}),t]})})}function c(e){let{onClickRetry:t,children:n}=e;return(0,i.jsxs)(o,{children:[(0,i.jsxs)("div",{children:["Error."," ",(0,i.jsx)("button",{onClick:t,className:"inline font-semibold text-token-text-primary hover:opacity-70",children:"Try again?"})]}),n]})}function u(e){let{resetError:t,componentStack:n,error:l}=e;return(0,s.useEffect)(()=>{r.U.addError(l)},[l]),(0,i.jsxs)(c,{onClickRetry:t,children:[(0,i.jsx)("div",{className:"fixed left-2 top-2",children:(0,i.jsx)(a.WU,{})}),(0,i.jsx)("div",{className:"fixed right-2 top-2",children:(0,i.jsx)(a.z0,{})}),!1]})}},64925:function(e,t,n){n.d(t,{Au:function(){return D},rm:function(){return R},WU:function(){return A},z0:function(){return I}});var r,s=n(2346),a=n(25162),l=n(19841),i=n(24098),o=n.n(i),c=n(92379),u=n(15478),d=n(9033),h=n(30853),m=n(91981),f=n(651);let p={[m.kQ.CONNECTING]:"Connecting",[m.kQ.OPEN]:"Open",[m.kQ.CLOSING]:"Closing",[m.kQ.CLOSED]:"Closed",[m.kQ.UNINSTANTIATED]:"Uninstantiated"};function x(e){let{readyState:t,className:n}=e,{0:r,1:s}=(0,c.useState)(!0);return((0,c.useEffect)(()=>{setTimeout(()=>{s(!0)},1e3)},[]),t!==m.kQ.OPEN&&r)?(0,f.jsx)("div",{className:(0,l.default)("flex items-center gap-2 p-3 text-sm",n),children:(0,f.jsx)(h.u,{label:p[t],sideOffset:0,side:"right",children:(0,f.jsx)("div",{className:(0,l.default)("h-2 w-2 rounded-full",(t===m.kQ.CLOSING||t===m.kQ.CONNECTING)&&"bg-yellow-500",(t===m.kQ.CLOSED||t===m.kQ.UNINSTANTIATED)&&"bg-red-500",r?"block":"hidden")})})}):null}var g=n(98601),v=n(71522),b=n(41619),y=n(87387);function j(e){let{label:t,labelSide:n="right",className:r,onClick:s,children:a}=e;return(0,f.jsx)(h.E,{label:t,sideOffset:0,side:n,disabled:!t,children:(0,f.jsx)("button",{onClick:s,className:(0,l.default)("flex items-center justify-center p-1.5 text-token-text-tertiary hover:text-token-text-primary",r),children:a})})}var w=n(26925),k=n(97193),N=n(10798),O=n(65925),C=n.n(O),_=n(99661);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach(function(t){(0,g.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function E(e,t){return Object.keys(e).reduce((n,r)=>(C()(e[r],t[r])||(n[r]=t[r]),n),{})}function S(){let{setTheme:e,resolvedTheme:t}=(0,_.F)(),n=w.ne.useState(w.ne.selectAgentSettingsOverrides),[r]=(0,N.OR)(),s=E(y.sH,n),a=E(N.Ws,r),i=P(P({},s),a),o=Object.keys(i).length>0;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(j,{label:"Debug (Internal)",onClick:()=>k.vm.toggleDebugModalOpen(),children:(0,f.jsx)(b.reV,{className:"icon-sm-heavy"})}),(0,f.jsx)(j,{label:"Theme (Internal)",onClick:()=>{e("dark"===t?"light":"dark")},children:(0,f.jsxs)(v.ZP,{children:["dark"===t&&(0,f.jsx)(b.NWY,{className:"icon-md-heavy"}),"light"===t&&(0,f.jsx)(b.kLh,{className:"icon-md-heavy"})]})}),(0,f.jsx)(j,{label:o?["Config (Internal) - Changes:",Object.keys(i).join(", ")].join("\n"):"Config (Internal)",onClick:()=>k.vm.toggleInternalSettingsModalOpen(),children:(0,f.jsx)(b.KAl,{className:(0,l.default)(o?"icon-lg-heavy":"icon-md-heavy",{"text-red-500":o})})})]})}var T=n(91111),L=n(51837);function A(e){let{hideReadyState:t=!1,onResultsPage:n=!1,children:r}=e,{readyState:s,resetSearch:i}=(0,T.A)(),c=(0,L.L)();return(0,f.jsxs)("div",{className:(0,l.default)("hidden w-20 shrink-0 flex-col items-center justify-between border-r py-6 sm:flex",n?"relative border-token-border-light":"absolute bottom-0 left-0 top-0 border-transparent"),children:[(0,f.jsxs)(o(),{onClick:()=>i(),href:"/search",className:"text-token-text-primary hover:text-token-text-secondary",title:"Go to SearchGPT",children:[(0,f.jsx)(a.nI,{className:"h-8 w-8"}),c&&!t&&(0,f.jsx)(x,{readyState:s})]}),c&&(0,f.jsx)("div",{className:"flex flex-col items-center gap-2",children:(0,f.jsx)(S,{})}),(0,f.jsx)("div",{className:"absolute top-1/2 -translate-y-1/2",children:r})]})}function I(){return(0,f.jsx)("div",{className:"absolute right-5 top-5 hidden sm:block",children:(0,f.jsx)(d.Kd,{className:"h-8 w-8"})})}function D(){return(0,f.jsx)(z,{$side:"left",children:(0,f.jsx)(a.nI,{className:"h-8 w-8"})})}function R(e){let{className:t}=e;return(0,f.jsx)(z,{$side:"right",className:"".concat(t),children:(0,f.jsx)(d.v_,{className:"h-8 w-8"})})}let z=u.Z.div(r||(r=(0,s.Z)(["absolute "," bottom-5 top-5 z-10 w-10 flex-col justify-between items-center hidden sm:flex"])),e=>"left"===e.$side?"left-5":"right-5")},44425:function(e,t,n){n.d(t,{_A:function(){return r}});let r="https://openai.com/index/searchgpt-prototype/"},40374:function(e,t,n){n.d(t,{$:function(){return p},Z:function(){return f}});var r=n(41619),s=n(15913),a=n(92379),l=n(91981),i=n(91111),o=n(26925),c=n(12381),u=n(69767),d=n(21338),h=n(651);let m=(0,a.createRef)();function f(){if(!(0,s.b4)()){var e;null===(e=m.current)||void 0===e||e.focus()}}function p(){let e=o.ne.useState(o.ne.selectFollowupQueryInput),t=o.ne.useStore(),{submitFollowup:n,readyState:a,waitingForNewTurn:f}=(0,i.A)(),p=(0,c.nn)(c.LW.firstTurn),x=null!=p&&(0,u.jo)(p),g=(0,c.nn)(c.LW.isLastTurnStreaming),v=!x&&null!=p&&a===l.kQ.OPEN;return(0,h.jsx)(d.I,{value:e,inputType:"text",placeholder:"Ask a follow-up...",variant:"mobile_bottom",submitButtonIcon:(0,h.jsx)(r.WmV,{className:"icon-lg-heavy"}),loading:g||f,className:"border-t-[0.5px] border-token-border-medium transition duration-500 dark:border-token-border-xheavy sm:mb-6 sm:border-none",onChange:e=>t.setFollowupQueryInput(e),onSubmit:e=>{v&&n(e)},shouldFocusOnKeyEvent:e=>"u"===e.key&&e.metaKey,autoFocus:!(0,s.s2)(),ref:m})}},21338:function(e,t,n){n.d(t,{I:function(){return f}});var r,s=n(2346),a=n(97537),l=n(11365),i=n(43703),o=n(15913),c=n(37671),u=n(19841),d=n(92379),h=n(15478),m=n(651);let f=(0,d.forwardRef)(function(e,t){let n;let{value:r,placeholder:s,variant:h="default",leftIcon:f,submitButtonIcon:x,loading:g,disabled:v,withInlineTypeahead:b,className:y,onChange:j,onKeyDown:w,onSubmit:k,shouldFocusOnKeyEvent:N,autoFocus:O,onFocus:C,inputType:_="search",style:M}=e,P=(0,d.useRef)(null),E=(0,d.useRef)(null);(0,d.useImperativeHandle)(t,()=>(0,c.S)(P.current));let{0:S,1:T}=(0,d.useState)(!1),L=null==b?void 0:b.currentSuggestion,A=0===r.trim().length,I=!A&&!v&&!g,D=e=>{if(null==w||w(e),"Enter"===e.key&&I){var t;e.preventDefault(),k(r),null===(t=P.current)||void 0===t||t.blur()}("Tab"===e.key||"ArrowUp"===e.key)&&L&&(e.preventDefault(),j(L))},R=e=>{let t="focus"===e.type;if(T(t),null==C||C(t),t&&(0,o.b4)()){var n;null===(n=P.current)||void 0===n||n.select()}};(0,d.useEffect)(()=>{if(null!=N)return(0,i.eR)(document,{keydown:e=>{if(null!=N&&N(e)){var t,n;e.preventDefault(),null===(t=P.current)||void 0===t||t.focus(),null===(n=P.current)||void 0===n||n.select()}}})},[N]),(0,d.useEffect)(()=>{if(O){var e;(0,o.e2)()||null===(e=P.current)||void 0===e||e.focus()}},[O]);let z=b?(0,m.jsxs)("form",{action:"",onSubmit:e=>e.preventDefault(),children:[(0,m.jsx)(p,{$as:"div",$hasLeftIcon:null!=f,$variant:h,className:"flex items-center text-token-text-tertiary",children:S&&L?(0,m.jsx)("div",{className:"truncate",children:L}):null}),(0,m.jsx)(p,{ref:P,type:_,$transparentBg:!0,$hasLeftIcon:null!=f,$variant:h,name:"query",className:"absolute inset-0",value:r,disabled:v,autoComplete:"off",spellCheck:!1,placeholder:s,onKeyDown:D,onChange:e=>j(e.target.value),onFocus:R,onBlur:R})]}):(0,m.jsx)("form",{action:"",onSubmit:e=>e.preventDefault(),children:(0,m.jsx)(p,{ref:P,type:_,className:"w-full",$hasLeftIcon:null!=f,$variant:h,value:r,disabled:v,autoComplete:"off",spellCheck:!1,placeholder:s,onKeyDown:D,onChange:e=>j(e.target.value),onFocus:R,onBlur:R})}),F="hover:bg-black hover:text-token-main-surface-tertiary hover:dark:bg-white hover:dark:text-token-main-surface-tertiary",Z="hover:cursor-default";n=g?(0,u.default)("bg-transparent text-token-text-tertiary",Z):I&&S?"bg-black text-white dark:bg-white dark:text-token-main-surface-tertiary":I?(0,u.default)("bg-gray-300/60 text-token-text-secondary dark:bg-gray-600 dark:text-white",F):(0,u.default)("bg-gray-300/60 text-token-main-surface-tertiary dark:bg-gray-600",Z);let U=(0,m.jsxs)("div",{className:(0,u.default)("absolute right-3 top-1/2 flex -translate-y-1/2 items-center justify-end",!S&&"sm:hidden"),children:[(0,m.jsx)("button",{onMouseDown:e=>e.preventDefault(),onClick:()=>{var e;j(""),null===(e=P.current)||void 0===e||e.focus()},className:(0,u.default)("mr-1 flex h-5 w-5 items-center justify-center rounded-full transition-colors sm:hidden","bg-gray-300/60 dark:bg-gray-600","mobile_bottom"===h?"text-token-main-surface-primary sm:text-token-main-surface-tertiary":"text-token-main-surface-tertiary",F,(A||!S)&&"hidden"),children:(0,m.jsx)(l.Z,{className:"h-5 w-5"})}),(0,m.jsx)("button",{onMouseDown:e=>e.preventDefault(),onClick:()=>{I&&k(r)},className:(0,u.default)("hidden h-7 w-7 items-center justify-center rounded-full transition-colors sm:flex",n),children:g?(0,m.jsx)(a.Z,{className:"h-5 w-5"}):x})]});return(0,m.jsxs)("div",{ref:E,className:(0,u.default)("relative sm:rounded-full",y),style:M,children:[z,null!=f&&(0,m.jsx)("div",{className:(0,u.default)("absolute top-1/2 -translate-y-1/2","result_top"===h?"left-4 sm:left-6":"left-5",A||v?"text-token-text-tertiary":"text-token-text-primary"),children:f}),"result_top"!==h&&U]})}),p=h.Z.input(r||(r=(0,s.Z)(["text-ellipsis pr-14 placeholder-gray-500 outline-none focus:ring-0 border-0 [&::-webkit-search-cancel-button]:hidden\n","\n","\n","\n",""])),e=>{let{$hasLeftIcon:t,$variant:n}=e;return t?"result_top"===n?"pl-12 sm:pl-[3.25rem]":"pl-[3.25rem]":"pl-4 sm:pl-5"},e=>{let{$transparentBg:t,$variant:n}=e;return t||"result_top"===n?"bg-transparent":"mobile_bottom"===n?"bg-token-main-surface-primary sm:bg-token-main-surface-tertiary":"bg-token-main-surface-tertiary"},e=>{let{$variant:t}=e;return"result_top"===t?"py-4 sm:py-6":""},e=>{let{$variant:t,$transparentBg:n}=e;return"result_top"===t?n?"":"border-b border-token-border-light":"mobile_bottom"===t?"rounded-none sm:rounded-full h-[50px] sm:h-snc-input-height":"rounded-full h-snc-input-height"})},41567:function(e,t,n){n.d(t,{u:function(){return np}});var r,s,a,l,i,o,c,u,d,h,m,f,p,x,g,v,b,y,j,w,k,N,O,C,_,M,P,E,S,T,L,A,I,D,R,z,F,Z,U,H=n(43703),W=n(15913),V=n(38724),B=n(82363),q=n(19841),Y=n(88600),G=n(21389),K=n(34977),$=n(92379),Q=n(34818),X=n(9033),J=n(65787),ee=n(67330),et=n(2346),en=n(57098),er=n(59144),es=n(41619),ea=n(48175),el=n(87230),ei=n(66583),eo=n(65925),ec=n.n(eo),eu=n(15478),ed=n(95204),eh=n(97193),em=n(71868),ef=n(651);function ep(){let e=(0,eh.W6)(eh.bM.getFocusedImage);if(!e)return null;let{image:t,source:n}=e;if(null==n)return(0,ef.jsx)(ew,{image:t});switch(n){case eh.y6.ImagesTab:return(0,ef.jsx)(ex,{image:t});case eh.y6.Turn:return(0,ef.jsx)(eg,{image:t})}}function ex(e){let{image:t}=e,{imageResults:n}=(0,em.i)();return(0,ef.jsx)(ew,{image:t,group:n,groupSource:eh.y6.ImagesTab})}function eg(e){let{image:t}=e,{imageResults:n}=(0,em.HQ)();return(0,ef.jsx)(ew,{image:t,group:n,groupSource:eh.y6.Turn})}let ev=eu.Z.div(r||(r=(0,et.Z)(["grow flex items-start p-8"])));function eb(e){let{title:t,urls:n}=e,r=n[0],{data:s,isError:a}=(0,em.Fw)(r);if(0===n.length)return;if(a)return n.length>1?(0,ef.jsx)(eb,{title:t,urls:n.slice(1)}):(0,ef.jsx)("div",{className:"flex h-full grow items-center justify-center",children:(0,ef.jsx)("div",{className:"flex h-96 w-96 items-center justify-center bg-white/10",children:(0,ef.jsx)(ed.Z,{className:"h-12 w-12 text-token-text-tertiary"})})});let l="max-w-[100vw] sm:max-w-[calc(100vw-10rem)] object-scale-down h-full";return null!=s?(0,ef.jsx)(Y.E.img,{src:r,alt:t,initial:{opacity:0},animate:{opacity:1},className:l}):(0,ef.jsx)("div",{className:(0,q.default)("w-full animate-pulse bg-white/10",l)})}let ey={enter:e=>({x:e>0?1e3:-1e3,opacity:0}),center:{zIndex:1,x:0,opacity:1},exit:e=>({zIndex:0,x:e<0?1e3:-1e3,opacity:0})},ej=(e,t)=>Math.abs(e)*t;function ew(e){var t,n,r;let{image:s,group:a,groupSource:l}=e,i=(0,el.d)(null!==(t=null==s?void 0:s.url)&&void 0!==t?t:""),o=(0,eh.W6)(e=>{var t;return null===(t=eh.bM.getFocusedImage(e))||void 0===t?void 0:t.mountDirection});(0,$.useEffect)(()=>{window.history.state.imageModalOpen||window.history.pushState({imageModalOpen:!0},"",window.location.href);let e=()=>{window.history.state.imageModalOpen||eh.vm.setFocusedImage(void 0)};return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)},[]);let c=()=>{window.history.go(-1),eh.vm.setFocusedImage(void 0)},u=null==a?void 0:a.findIndex(e=>ec()(s,e)),d=null!==(n=null==a?void 0:a.length)&&void 0!==n?n:1,h=null!=u&&d>1,m=(0,$.useCallback)(()=>{h&&null!=a&&eh.vm.setFocusedImage({image:a[(u+1)%a.length],source:l,mountDirection:eh.KP.FromRight})},[a,h,u,l]),f=(0,$.useCallback)(()=>{h&&null!=a&&eh.vm.setFocusedImage({image:a[(u-1+a.length)%a.length],source:l,mountDirection:eh.KP.FromLeft})},[a,h,u,l]);return(0,$.useEffect)(()=>(0,H.eR)(document,{keydown:e=>{"ArrowRight"===e.key?m():"ArrowLeft"===e.key&&f()}}),[m,f]),(0,ef.jsx)(G.M,{children:s&&(0,ef.jsx)(er.Z.Root,{isOpen:!0,onClose:c,children:(0,ef.jsxs)(ei.VY,{className:"flex h-full w-full flex-col bg-black",onClick:c,children:[(0,ef.jsxs)("div",{className:"relative flex w-full grow justify-center overflow-hidden",children:[(0,ef.jsx)("button",{onClick:e=>{e.stopPropagation(),c()},className:"absolute left-4 top-4 flex h-9 w-9 items-center justify-center text-white outline-none hover:opacity-70 sm:left-6 sm:top-6",children:(0,ef.jsx)(es.tPq,{className:"h-7 w-7"})}),h&&(0,ef.jsxs)("div",{className:"absolute right-6 top-6 w-fit shrink-0 cursor-default rounded-full bg-white/20 px-4 py-2 font-mono text-sm text-token-text-tertiary sm:right-8 sm:top-8",children:[u+1," / ",d]}),(0,ef.jsx)(ev,{className:"cursor-w-resize",onClick:e=>{e.stopPropagation(),f()}}),(0,ef.jsx)(G.M,{initial:!1,custom:o,children:(0,ef.jsx)(Y.E.div,{variants:ey,custom:null!=o?o:0,className:"absolute bottom-4 top-24",initial:"enter",animate:"center",exit:"exit",transition:{x:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2}},drag:d>1&&"x",dragConstraints:{left:0,right:0},dragElastic:1,onDragEnd:(e,t)=>{let{offset:n,velocity:r}=t,s=ej(n.x,r.x);s<-1e4?m():s>1e4&&f()},children:(0,ef.jsx)(eb,{title:s.title,urls:[s.content_url.replace(/^http:\/\//,"https://"),s.thumbnail_url]})},u)}),(0,ef.jsx)(ev,{className:"cursor-e-resize",onClick:e=>{e.stopPropagation(),m()}})]}),(0,ef.jsxs)("a",{href:s.url,target:"_blank",rel:"noopener",className:"flex min-h-20 w-full shrink-0 items-center gap-8 px-6 pb-3 pt-8 text-sm hover:opacity-70 sm:px-8 sm:pb-8",children:[(0,ef.jsx)("div",{className:"flex shrink-0 items-center",children:(0,ef.jsx)(es.xPt,{className:"icon-lg text-white"})}),(0,ef.jsxs)("div",{className:"flex grow flex-col gap-0.5 overflow-hidden pr-2",children:[(0,ef.jsx)("div",{className:"truncate text-token-text-tertiary",children:null!==(r=i.data)&&void 0!==r?r:(0,ea.p)(s.url)}),(0,ef.jsx)("div",{className:"truncate font-semibold text-white",children:s.title})]}),(0,ef.jsx)("div",{className:"shrink-0",children:(0,ef.jsx)(en.Z,{url:s.content_url,className:"rounded",size:24})})]})]})})})}var ek=n(64925),eN=n(91111),eO=n(40374);function eC(e){let{side:t,className:n}=e;return(0,ef.jsx)("div",{className:(0,q.default)("absolute inset-x-px h-[calc(100%+var(--snc-1))]","from-token-main-surface-primary from-60% to-100%","top"===t?"top-0 bg-gradient-to-b":"bottom-0 bg-gradient-to-t",n)})}var e_=n(26925),eM=n(712),eP=n(21338);function eE(){let e=(0,$.useRef)(null),{submitSearch:t}=(0,eN.A)(),n=e_.ne.useState(e_.ne.selectQueryInput),r=e_.ne.useStore(),s=(0,eM.o)({query:n,enabled:"undefined"!=typeof document&&e.current===document.activeElement}),a=n.length>0?s.find(e=>e.length>n.length&&e.startsWith(n)):void 0;return(0,ef.jsx)(eP.I,{ref:e,className:"w-full",variant:"default",value:n,placeholder:"Search",leftIcon:(0,ef.jsx)(ef.Fragment,{children:(0,ef.jsx)(es.W1M,{className:"icon-md-heavy"})}),submitButtonIcon:(0,ef.jsx)(es.WmV,{className:"icon-lg-heavy rotate-180"}),withInlineTypeahead:{currentSuggestion:a},onChange:e=>r.setQueryInput(e),onSubmit:t,shouldFocusOnKeyEvent:e=>"k"===e.key&&e.metaKey})}var eS=n(12381),eT=n(7243),eL=n(98601),eA=n(16757),eI=n(94668),eD=n(76482),eR=n(22912),ez=n(47313),eF=n(44885),eZ=n(66234),eU=n(38482),eH=n.n(eU),eW=n(31353),eV=n(30853),eB=n(22594),eq=n(24740),eY=n(31498),eG=n(58695),eK=n(88667),e$=n(19323),eQ=n.n(e$),eX=n(79930),eJ=n(81014);function e0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function e1(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?e0(Object(n),!0).forEach(function(t){(0,eL.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e0(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let e2=eH()(()=>n.e(8682).then(n.bind(n,3636)).then(e=>e.FeedbackModelInstructions),{ssr:!1,loadableGenerated:{webpack:()=>[3636]}}),e4={forecast:"Weather widget",stock:"Stock widget",calculator:"Calculator widget",news:"News widget",time:"Time widget"},e5="Content quality",e3="Visual issues",e6="Other",e8="[Internal]",e9={turn:{thumbsDown:[{label:"Too long",group:e5},{label:"Too short",group:e5},{label:"Inaccurate",group:e5},{label:"Out-of-date",group:e5},{label:"Did not understand query",group:e5},{label:"Poor sources/citations",group:e5},{label:"No images",group:e3},{label:"Poor images",group:e3},{label:"Broken UI format",group:e3},{label:"Location issue",group:e6},{label:"Safety",group:e6},...Object.keys(e4).map(function(e){return{label:"".concat(e4[e]," missing"),group:e8,match:t=>{let{contentReferenceType:n,user:r}=t;return n!==e&&(0,eG.yl)(r)}}}),{label:e=>{let{contentReferenceType:t}=e;return"Should NOT show ".concat(e4[t])},group:e8,match:e=>{let{contentReferenceType:t,user:n}=e;return!!t&&(0,eG.yl)(n)}},{label:e=>{let{contentReferenceType:t}=e;return"Issue with ".concat(e4[t])},group:e8,match:e=>{let{contentReferenceType:t,user:n}=e;return!!t&&(0,eG.yl)(n)}}],thumbsUp:[{label:"Accurate answer"},{label:"Up-to-date"},{label:"Good sources/links"},{label:"Image quality"},{label:e=>{let{contentReferenceType:t}=e;return"Like the ".concat(e4[t])},match:e=>{let{contentReferenceType:t,user:n}=e;return!!t&&(0,eG.yl)(n)}}]},link:{thumbsDown:[{label:"Not relevant"},{label:"Out-of-date"},{label:"Ranked too high"},{label:"Ranked too low"},{label:"Bad source"}],thumbsUp:[{label:"Relevant"},{label:"Up-to-date"},{label:"Ranked appropriately"},{label:"Good source"}]}};async function e7(e){var t,n;let r=null!==(t=null!==(n=e.element)&&void 0!==n?n:document.getElementById("__next"))&&void 0!==t?t:document.querySelector("div[data-search-root]"),s=await eQ()(r,{backgroundColor:e.isDarkMode?null:"#ffffff"}),a=document.createElement("canvas"),l=a.getContext("2d"),i=s.height/s.width*1440;return a.width=1440,a.height=i,null==l||l.drawImage(s,0,0,1440,i),new Promise(e=>{a.toBlob(t=>{e(t)},"image/jpeg",.8)})}function te(e){let{onSubmit:t,turn:n,thumbsUpTooltip:r,thumbsDownTooltip:s,screenshotElement:a,type:l}=e,{0:i,1:o}=(0,$.useState)(null),{0:c,1:u}=(0,$.useState)(null),d=(0,W.Gv)(),h=(0,eY.aF)(),m=!!h&&(0,eG.yl)(h),{0:f,1:p}=(0,$.useState)(void 0),{value:x}=(0,eK.sB)("3838495619");return(0,ef.jsxs)("div",{onClick:e=>{e.preventDefault(),e.stopPropagation()},children:[(0,ef.jsx)("div",{className:"flex items-center gap-2",children:[{tooltip:null!=r?r:"Good",rating:"thumbsUp",Icon:es.Z7j,FilledIcon:es.szs},{tooltip:null!=s?s:"Bad",rating:"thumbsDown",Icon:es.C_W,FilledIcon:es.eW_}].map(e=>{let{tooltip:t,rating:n,Icon:r,FilledIcon:s}=e;return(0,ef.jsx)(eV.u,{label:t,sideOffset:0,className:"flex",children:(0,ef.jsx)("button",{className:"block text-token-text-tertiary hover:text-token-text-primary",onClick:async()=>{m&&e7({element:a,isDarkMode:d}).then(e=>{o(e)}),u(n)},disabled:c===n,children:c===n?(0,ef.jsx)(s,{className:"h-4 w-4"}):(0,ef.jsx)(r,{className:"h-4 w-4"})})},n)})}),c&&(0,ef.jsx)(eB.Z,{multiple:!0,onSubmit:e=>t(e1(e1({},e),{},{screenshot:i,currentRating:c,modelInstructions:f})),onCancel:()=>{o(null),u(null)},tagOptions:function(e){var t,n;let{type:r,turn:s,rating:a,user:l}=e,i=null,o=null==s||null===(t=s.model_response)||void 0===t?void 0:t.text,c=null==s||null===(n=s.model_response)||void 0===n?void 0:n.citations;return o&&c&&(i=function(e){for(let t of e.displayedContentReferences){if(t.type&&["calculator","time","forecast","stock"].includes(t.type))return t.type;if("nav_list"===t.type)return"news"}return null}((0,eW.Cp)(o,c))),e9[r][a].filter(e=>!e.match||!s||e.match({turn:s,contentReferenceType:i,user:l})).map(e=>{var t;let n=e.label;if("function"==typeof n){if(!s)return null;n=n({turn:s,contentReferenceType:i})}return e1(e1({},e),{},{label:n,value:null!==(t=e.value)&&void 0!==t?t:n})}).filter(e=>null!=e)}({type:l,rating:c,turn:n,user:h}),modalOnly:!0,modalTitle:(0,ef.jsxs)("div",{className:"flex items-center gap-2",children:["thumbsUp"===c?(0,ef.jsx)(es.szs,{className:"mt-[-4px]"}):(0,ef.jsx)(es.eW_,{className:"mb-[-6px]"})," ","Provide feedback"]}),children:x&&(0,ef.jsx)(e2,{modelInstructions:f,setModelInstructions:p})},c)]})}function tt(e){let{turn:t}=e,n=(0,eS.nn)(eS.LW.threadId),{sessionUser:r}=(0,eN.A)();(0,$.useEffect)(()=>{if(n){if(null==t.index)throw Error();eX.Y.logEvent(eX.M.searchTurnFeedbackButtonShown,{turn_index:t.index,thread_id:n})}},[]);let s=async e=>{if(n&&e.currentRating){if(null==t.index)throw Error();eX.Y.logEvent(eX.M.searchTurnFeedbackSubmitted,{turn_index:t.index,thread_id:n,rating:e.currentRating,tags:e.tags,text:e.textFeedback,model_instructions:e.modelInstructions}),B.U.addAction("sonic.web.turn_feedback_submitted",{thread_id:n,rating:e.currentRating,tags:e.tags}),eq.m.successNeutral("Thanks for your feedback!",{duration:2}),await (0,eJ.k4)({turnIndex:t.index,threadId:n,rating:e.currentRating,searchQuery:t.user_query,tags:e.tags,text:e.textFeedback,modelInstructions:e.modelInstructions,screenshot:e.screenshot,userEmail:null==r?void 0:r.email})}};return(0,ef.jsx)(te,{onSubmit:s,type:"turn",turn:t,thumbsUpTooltip:"Good response",thumbsDownTooltip:"Bad response"})}function tn(e){let{url:t,title:n,snippet:r,turnIndex:s}=e,a=(0,eS.nn)(eS.LW.threadId),l=e_.ne.useStore(),{sessionUser:i}=(0,eN.A)(),o=async e=>{a&&e.currentRating&&i&&(eX.Y.logEvent(eX.M.searchLinkFeedbackSubmitted,{thread_id:a,rating:e.currentRating,url:t,tags:e.tags,text:e.textFeedback,turn_index:s}),B.U.addAction("sonic.web.link_feedback_submitted",{thread_id:a,rating:e.currentRating,tags:e.tags}),eq.m.successNeutral("Thanks for your feedback!",{duration:2}),await (0,eJ.NK)({url:t,title:n,snippet:r,threadId:a,rating:e.currentRating,searchQuery:e_.ne.selectQueryInput(l.getState()),tags:e.tags,text:e.textFeedback,screenshot:e.screenshot,userEmail:null==i?void 0:i.email}))};return(0,ef.jsx)(te,{onSubmit:o,type:"link",thumbsUpTooltip:"Good link",thumbsDownTooltip:"Bad link"})}var tr=n(51837),ts=n(66290),ta=n(52538),tl=n.n(ta),ti=n(48772);let to=eu.Z.a(s||(s=(0,et.Z)(["flex flex-col rounded-xl bg-gray-50 dark:bg-gray-800 p-4 dark:hover:bg-gray-700 hover:bg-gray-100 text-sm text-left gap-1 h-22 ",""])),e=>{let{$isHighlighted:t}=e;return t&&"bg-gray-100 dark:bg-gray-700"});function tc(e){var t;let{card:n,isHighlighted:r}=e,s=(0,$.useContext)(ez.G),a=null!==(t=(0,el.d)(n.url).data)&&void 0!==t?t:(0,ea.p)(n.url),l=(0,eS.nn)(eS.LW.threadId),i=(0,$.useCallback)(e=>{l&&eX.Y.logEvent(e,{thread_id:l,index:n.index,url:n.url,title:n.title})},[n.index,n.title,n.url,l]);return(0,$.useEffect)(()=>{i(eX.M.searchCitationCardShown)},[i]),(0,ef.jsxs)(to,{className:"w-3/4 shrink-0 sm:w-[45%] sm:shrink",$isHighlighted:r,href:n.url,onClick:()=>{if(null!=n){var e;null==s||null===(e=s.onCitationClicked)||void 0===e||e.call(s,n,n.index),i(eX.M.searchCitationCardClicked)}},target:"_blank",rel:"noopener",children:[(0,ef.jsxs)("div",{className:"flex gap-2",children:[(0,ef.jsx)(en.Z,{url:null==n?void 0:n.url,size:32,className:"h-5 w-5 shrink-0 rounded"}),(0,ef.jsx)("div",{className:"line-clamp-1 text-xs text-token-text-secondary",children:a})]}),(0,ef.jsx)("div",{className:"line-clamp-2 text-xs",children:n.title})]})}function tu(e){let{isHighlighted:t,onClick:n}=e;return(0,ef.jsx)(to,{className:"max-w-1/10 min-w-[4rem] cursor-pointer items-center justify-center text-xs text-token-text-secondary",$isHighlighted:t,onClick:n,children:(0,ef.jsx)(es.xPt,{className:"h-5 w-5 shrink-0"})})}function td(e){var t;let{highlightedCitationIndices:n,turnIndex:r}=e,s=(0,K.useRouter)(),a=(0,ts.Z)(),l=(0,$.useContext)(ez.G),i=(0,W.BL)();if(null==l)return null;let{displayedContentReferences:o}=l,c=tl()(null==o?void 0:o.flatMap(e=>"grouped_webpages"===e.type?e.items:[]),e=>e.index);if(0===c.length)return null;let u=i?c:c.slice(0,2),d=null===(t=u[u.length-1])||void 0===t?void 0:t.index;return(0,ef.jsxs)(Y.E.div,{className:"no-scrollbar mt-6 flex flex-nowrap gap-2 overflow-auto px-snc-results-padding",initial:{opacity:0},animate:{opacity:1},children:[u.map((e,t)=>{var r;return(0,ef.jsx)(tc,{card:e,isHighlighted:null!=e.index&&n.has(e.index)},null!==(r=e.index)&&void 0!==r?r:"i".concat(t))}),c.length>u.length&&(0,ef.jsx)(tu,{isHighlighted:null==d||Array.from(n.values()).some(e=>e>d),onClick:()=>{(0,ti.NM)(s)===ti.iY.Sources&&(0,ti.U8)(s)===r?(0,ti._d)(s,ti.iY.Answer):(0,ti.po)(a,r)}})]})}var th=n(69767);function tm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tm(Object(n),!0).forEach(function(t){(0,eL.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tm(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let tp=eH()(()=>Promise.all([n.e(8682),n.e(9788),n.e(8541)]).then(n.bind(n,44621)).then(e=>e.SportsWidget),{loadableGenerated:{webpack:()=>[44621]}}),tx=(0,$.memo)((0,$.forwardRef)(function(e,t){let{turn:n,isHighlighted:r}=e,{retrySearch:s}=(0,eN.A)();if(null==n.index)throw Error();let a=n.index>0;return(0,ef.jsxs)(Y.E.div,tf(tf({ref:t,className:"flex flex-col gap-snc-results-padding"},a?{initial:{opacity:0},animate:{opacity:1},transition:{duration:.33,ease:"easeInOut"}}:{}),{},{children:[a&&(0,ef.jsx)(tg,{text:n.user_query}),(0,th.jo)(n)?(0,ef.jsx)(tv,{text:"Something went wrong. Please try again.",canRetry:!0,onRetry:()=>s(n.user_query)}):(0,ef.jsx)(tb,{turn:n,isHighlighted:r})]}))}));function tg(e){let{text:t}=e;return(0,ef.jsx)("div",{className:"user-query inline-flex justify-end px-snc-results-padding",children:(0,ef.jsx)("div",{className:"max-w-[90%] rounded-3xl bg-token-main-surface-tertiary px-5 py-2.5",children:(0,ef.jsx)(eD.lx,{text:t})})})}function tv(e){let{text:t,onRetry:n,canRetry:r}=e;return(0,ef.jsx)("div",{className:"mx-snc-results-padding",children:(0,ef.jsx)(eI.Z,{type:"danger",className:"my-0 border border-token-border-light bg-transparent text-token-text-secondary",iconClassName:"text-red-500",children:(0,ef.jsxs)("div",{className:"flex w-full items-center justify-between text-red-500",children:[t,r&&(0,ef.jsx)("button",{onClick:()=>n(),className:"font-semibold text-token-text-primary",children:"Retry"})]})})})}function tb(e){var t,n,r,s;let{turn:a,isHighlighted:l}=e,i=(0,$.useRef)(null),o=null!==(t=null===(n=a.model_response)||void 0===n?void 0:n.text)&&void 0!==t?t:"",{0:c,1:u}=(0,$.useState)(o),{0:d}=(0,$.useState)(()=>new eF.Zl(eF.R3,e=>{u(e)},c));if((0,$.useEffect)(()=>{l&&i.current&&i.current.scrollIntoView({behavior:"smooth",block:"start"})},[l]),(0,$.useEffect)(()=>{d.setText(o)},[o,d]),null==a.index)throw Error();let h=d.isBuffering()||(0,th.A7)(a);return(0,ef.jsxs)(ty,{ref:i,$isHighlighted:l,children:[(0,ef.jsx)(tj,{turnIndex:a.index,responseText:c,showOlympicsCitation:(null===(r=a.olympics_widget)||void 0===r?void 0:r.status)==="done",citations:null===(s=a.model_response)||void 0===s?void 0:s.citations,isResponseStreaming:h}),!h&&(0,ef.jsx)("div",{className:"mt-6 px-snc-results-padding",children:(0,ef.jsx)(tt,{turn:a})})]})}let ty=eu.Z.div(a||(a=(0,et.Z)(["group flex flex-col\n  ",""])),e=>{let{$isHighlighted:t}=e;return t&&"-mx-2 rounded-md bg-yellow-100 px-2 py-4 dark:bg-yellow-900"}),tj=(0,$.memo)(function(e){let{turnIndex:t,responseText:n,citations:r,isResponseStreaming:s,showOlympicsCitation:a}=e,l=(0,eS.nn)(eS.LW.threadId),i=e_.ne.useState(e_.ne.selectAgentSettingsOverrides),{processedText:o,displayedContentReferences:c}=(0,eW.Cp)(n,r,[],i.debug_mode,!0),u=s?(0,eW.AW)(o):a?"".concat(o,"\n\nMore information on [olympics.com](https://olympics.com/en/paris-2024/schedule?utm_campaign=dp_openai)."):o,d=(0,el.u)([]),h=(0,eS.nn)(eS.LW.__deprecated_sportsWidget),{0:m,1:f}=(0,$.useState)(new Set),p=(0,tr.L)();return(0,ef.jsxs)(ef.Fragment,{children:[p&&h&&0===t&&(0,ef.jsx)(tp,{sportsWidget:h}),(0,ef.jsxs)(ez.G.Provider,{value:{clientThreadId:eA.Zq,displayType:eZ.Je.expandAll,displayedContentReferences:c,isActivelyStreaming:s,attributions:d,onCitationShown:e=>{l&&(null==e?void 0:e.type)==="webpage"&&eX.Y.logEvent(eX.M.searchCitationShown,{thread_id:l,url:e.url,title:e.title,pub_date:e.pub_date,turn_index:t})},onCitationClicked:e=>{l&&"webpage"===e.type&&eX.Y.logEvent(eX.M.searchCitationClicked,{thread_id:l,url:e.url,title:e.title,pub_date:e.pub_date,turn_index:t})},onCitationHovered:(e,n)=>{null!=n&&f(e=>{let t=new Set(e);return t.add(n),t}),l&&(null==e?void 0:e.type)==="webpage"&&eX.Y.logEvent(eX.M.searchCitationHovered,{thread_id:l,url:e.url,title:e.title,pub_date:e.pub_date,turn_index:t})},onCitationUnhovered:e=>{null!=e&&f(t=>{let n=new Set(t);return n.delete(e),n})},turnIndex:t,message:{id:"",author:{role:eA.uU.Assistant,name:"Search"},content:{content_type:eA.PX.Text,parts:[n]}},useSafeUrls:!1},children:[(0,ef.jsx)("div",{className:"relative z-0 px-snc-results-padding",children:(0,ef.jsx)(eR.FormattedText,{className:(0,q.default)("relative text-token-text-primary",""===u&&s&&"result-thinking",s&&"result-streaming"),children:""===u?"&#8203;":u})}),!s&&(0,ef.jsx)(td,{highlightedCitationIndices:m,turnIndex:t})]})]})});function tw(e){let{highlightTurnIndex:t}=e,n=(0,eS.nn)(eS.LW.turns),r=(0,eS.nn)(eS.LW.hasResponse),s=(0,eS.nn)(eS.LW.numTurns),a=(0,Q.useScrollToBottom)();return(0,$.useEffect)(()=>{s>1&&a({behavior:"smooth"})},[s,a]),(0,ef.jsx)("div",{className:"flex w-full flex-col gap-snc-results-padding",children:r?n.map((e,n)=>(0,ef.jsx)(tx,{turn:e,isHighlighted:e.index===t},n)):(0,ef.jsx)(tk,{})})}function tk(){return(0,ef.jsxs)("div",{className:"space-y-6 px-snc-results-padding",children:[(0,ef.jsx)(eT.HK,{lines:2,scaleUpAnimation:{initialScaleX:.6,duration:1.6}}),(0,ef.jsx)(eT.HK,{lines:8,indexOffset:2,scaleUpAnimation:{initialScaleX:.6,duration:1.6}}),(0,ef.jsx)(eT.HK,{lines:5,indexOffset:10,scaleUpAnimation:{initialScaleX:.6,duration:1.6},className:"max-sm:hidden"})]})}function tN(e){let{highlightTurnIndex:t}=e;return(0,ef.jsxs)("div",{className:"flex grow flex-col pt-6 lg:pt-8 xl:pt-10 2xl:pt-12",children:[(0,ef.jsx)(tw,{highlightTurnIndex:t}),(0,ef.jsx)("div",{className:"h-24 sm:h-32"})]})}var tO=n(19464);function tC(){return(tC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var t_=e=>$.createElement("svg",tC({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),l||(l=$.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:2,d:"M5 11V6a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v5"})),i||(i=$.createElement("path",{fill:"currentColor",d:"M5.344 18.769c0 1.107.549 1.809 1.332 1.809.594 0 1.017-.396 1.134-1.035l1.656.549c-.396 1.215-1.332 2.016-2.781 2.016-1.818 0-3.105-1.395-3.105-3.339s1.287-3.339 3.105-3.339c1.449 0 2.385.801 2.78 2.016l-1.655.549c-.117-.639-.54-1.035-1.134-1.035-.783 0-1.332.702-1.332 1.809m4.082 2.259.963-1.278c.549.621 1.278.909 1.935.909.54 0 .9-.198.9-.567 0-.414-.46-.468-1.45-.666-.944-.189-1.98-.54-1.98-1.854 0-1.323 1.144-2.142 2.575-2.142 1.134 0 2.025.441 2.538.999l-.954 1.188a2.17 2.17 0 0 0-1.63-.738c-.476 0-.8.18-.8.513 0 .369.396.432 1.179.594 1.008.207 2.268.486 2.268 1.926 0 1.395-1.224 2.196-2.718 2.196-1.053 0-2.286-.414-2.826-1.08m5.52 0 .962-1.278c.55.621 1.278.909 1.935.909.54 0 .9-.198.9-.567 0-.414-.459-.468-1.449-.666-.945-.189-1.98-.54-1.98-1.854 0-1.323 1.143-2.142 2.574-2.142 1.134 0 2.025.441 2.538.999l-.954 1.188a2.17 2.17 0 0 0-1.629-.738c-.477 0-.8.18-.8.513 0 .369.395.432 1.178.594 1.008.207 2.268.486 2.268 1.926 0 1.395-1.224 2.196-2.718 2.196-1.053 0-2.286-.414-2.826-1.08"})),o||(o=$.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:2,d:"M9 8v2"})));function tM(){return(tM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var tP=e=>$.createElement("svg",tM({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),c||(c=$.createElement("path",{fill:"currentColor",d:"M9.199 22v-.576c-.252.387-.846.675-1.63.675-1.7 0-2.951-1.35-2.951-3.294 0-1.953 1.278-3.366 3.078-3.366 1.413 0 2.34.747 2.736 1.935L9 17.833c-.144-.693-.612-1.089-1.296-1.089-.936 0-1.584.81-1.584 2.043s.648 2.043 1.61 2.043c.739 0 1.234-.495 1.315-1.161H7.615v-1.233h2.916V22zm4.228-6.462V22h-1.503v-6.462zM16.331 22h-1.476v-6.462h4.527v1.287h-3.05v1.467h2.537v1.26h-2.538z"})),u||(u=$.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 11V6a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v5"})),d||(d=$.createElement("path",{fill:"currentColor",d:"M6 5h2l-.862 1.724A.5.5 0 0 1 6.691 7H6zM9 5h3l-.862 1.724a.5.5 0 0 1-.447.276H8.566a.35.35 0 0 1-.313-.507zM13 5h3l-.862 1.724a.5.5 0 0 1-.447.276h-2.125a.35.35 0 0 1-.313-.507zM17 5h1v2h-1.434a.35.35 0 0 1-.313-.507z"})));function tE(){return(tE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var tS=e=>$.createElement("svg",tE({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),h||(h=$.createElement("path",{fill:"currentColor",d:"M4.108 21.991v-1.296c.252.036.414.054.648.054.63 0 .918-.225.918-.873v-4.338h1.503v4.563c0 1.359-.864 1.953-2.232 1.953a5 5 0 0 1-.837-.063m5.51-2.241V22H8.113v-6.462h2.727c1.521 0 2.466.72 2.466 2.106 0 1.377-.945 2.106-2.466 2.106zm0-1.26h1.142c.711 0 1.071-.315 1.071-.846s-.36-.837-1.07-.837H9.616zm8.66 3.51v-.576c-.252.387-.846.675-1.629.675-1.701 0-2.952-1.35-2.952-3.294 0-1.953 1.278-3.366 3.078-3.366 1.413 0 2.34.747 2.736 1.935l-1.431.459c-.144-.693-.612-1.089-1.296-1.089-.936 0-1.584.81-1.584 2.043s.648 2.043 1.611 2.043c.738 0 1.233-.495 1.314-1.161h-1.431v-1.233h2.916V22z"})),m||(m=$.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 11V6a2 2 0 0 1 2-2h7.172a2 2 0 0 1 1.414.586l2.828 2.828A2 2 0 0 1 19 8.828V11m-4-6v2.5a.5.5 0 0 0 .5.5H18m-2-1 .5-.5"})));function tT(){return(tT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var tL=e=>$.createElement("svg",tT({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),f||(f=$.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:2,d:"M19 11a7 7 0 1 0-14 0"})),p||(p=$.createElement("path",{fill:"currentColor",d:"M6.889 22H5.71l-1.224-4.086V22H2.794v-6.462h2.475l1.053 3.708 1.053-3.708h2.448V22h-1.71v-4.086zm8.027 0H13.26v-1.467h-2.907v-1.296l2.358-3.699h2.205v3.6h.891v1.395h-.89zm-2.997-2.862h1.296V17.05zm6.336-3.6h2.034L22.62 22h-1.791l-.414-1.17h-2.34L17.67 22h-1.746zm.99 1.953-.675 1.926h1.35z"})),x||(x=$.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:2,d:"M14.5 11a2.5 2.5 0 0 0-5 0"})));function tA(){return(tA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var tI=e=>$.createElement("svg",tA({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),g||(g=$.createElement("path",{fill:"currentColor",d:"M6.246 22h-1.08l-1.422-4.473V22h-1.43v-6.462H4.41l1.314 4.239 1.314-4.239H9.1V22H7.67v-4.473zm3.584-3.231c0-1.953 1.287-3.33 3.096-3.33 1.818 0 3.096 1.377 3.096 3.33s-1.278 3.33-3.096 3.33c-1.81 0-3.096-1.377-3.096-3.33m4.689 0c0-1.242-.657-2.025-1.593-2.025s-1.584.783-1.584 2.025.648 2.025 1.584 2.025 1.593-.783 1.593-2.025M19.789 22H18.23l-2.367-6.462h1.602l1.566 4.527 1.566-4.527h1.548z"})),v||(v=$.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 11V6a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v5"})),b||(b=$.createElement("path",{fill:"currentColor",d:"M6 5h2l-.862 1.724A.5.5 0 0 1 6.691 7H6zM9 5h3l-.862 1.724a.5.5 0 0 1-.447.276H8.566a.35.35 0 0 1-.313-.507zM13 5h3l-.862 1.724a.5.5 0 0 1-.447.276h-2.125a.35.35 0 0 1-.313-.507zM17 5h1v2h-1.434a.35.35 0 0 1-.313-.507z"})));function tD(){return(tD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var tR=e=>$.createElement("svg",tD({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),y||(y=$.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:2,d:"M19 11a7 7 0 1 0-14 0"})),j||(j=$.createElement("path",{fill:"currentColor",d:"M6.952 22h-1.18L4.55 17.914V22H2.857v-6.462h2.475l1.053 3.708 1.053-3.708h2.448V22h-1.71v-4.086zm5.579-2.061V22h-1.764v-6.462h2.826c1.593 0 2.574.756 2.574 2.205 0 1.44-.981 2.196-2.574 2.196zm0-1.467h.972c.62 0 .918-.279.918-.729 0-.459-.297-.729-.918-.729h-.972zm6.437 3.636c-1.413 0-2.475-.711-2.646-2.034l1.737-.252c.054.522.414.819.882.819.414 0 .765-.198.765-.648 0-.441-.37-.594-.882-.594h-.567V18.04h.549c.477 0 .8-.162.8-.567 0-.36-.242-.576-.665-.576-.477 0-.765.342-.828.783l-1.638-.153c.144-1.143 1.044-2.097 2.547-2.097 1.43 0 2.322.819 2.322 1.917 0 .648-.396 1.152-.846 1.341.549.252.936.702.936 1.467 0 1.08-.963 1.953-2.466 1.953"})),w||(w=$.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:2,d:"M14.5 11a2.5 2.5 0 0 0-5 0"})));function tz(){return(tz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var tF=e=>$.createElement("svg",tz({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),k||(k=$.createElement("path",{fill:"currentColor",d:"M6.844 22h-1.08l-1.422-4.473V22H2.91v-6.462h2.097l1.314 4.239 1.314-4.239h2.06V22h-1.43v-4.473zm5.383-2.25V22h-1.503v-6.462h2.727c1.521 0 2.466.72 2.466 2.106 0 1.377-.945 2.106-2.466 2.106zm0-1.26h1.143c.711 0 1.071-.315 1.071-.846s-.36-.837-1.07-.837h-1.144zM20.485 22H19.09v-1.512h-2.97v-1.125l2.493-3.825h1.88v3.744h1.018v1.206h-1.026zm-2.98-2.718h1.549v-2.403z"})),N||(N=$.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 11V6a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v5"})),O||(O=$.createElement("path",{fill:"currentColor",d:"M6 5h2l-.862 1.724A.5.5 0 0 1 6.691 7H6zM9 5h3l-.862 1.724a.5.5 0 0 1-.447.276H8.566a.35.35 0 0 1-.313-.507zM13 5h3l-.862 1.724a.5.5 0 0 1-.447.276h-2.125a.35.35 0 0 1-.313-.507zM17 5h1v2h-1.434a.35.35 0 0 1-.313-.507z"})));function tZ(){return(tZ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var tU=e=>$.createElement("svg",tZ({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),C||(C=$.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:2,d:"M19 11a7 7 0 1 0-14 0"})),_||(_=$.createElement("path",{fill:"currentColor",d:"M2.647 18.769c0-1.944 1.296-3.339 3.16-3.339 1.871 0 3.167 1.395 3.167 3.339s-1.296 3.339-3.168 3.339c-1.863 0-3.159-1.395-3.159-3.339m4.554 0c0-1.125-.567-1.809-1.395-1.809-.819 0-1.386.684-1.386 1.809s.567 1.809 1.386 1.809c.828 0 1.395-.684 1.395-1.809M13.924 22v-.513c-.26.351-.828.621-1.557.621-1.728 0-2.979-1.35-2.979-3.294s1.287-3.384 3.141-3.384c1.485 0 2.44.774 2.835 1.998l-1.683.54c-.117-.648-.522-1.008-1.143-1.008-.819 0-1.386.72-1.386 1.827 0 1.116.567 1.836 1.413 1.836.594 0 1.008-.369 1.125-.855h-1.242v-1.395h3.006V22zm6.654 0v-.513c-.261.351-.828.621-1.557.621-1.728 0-2.98-1.35-2.98-3.294s1.288-3.384 3.142-3.384c1.485 0 2.439.774 2.835 1.998l-1.683.54c-.117-.648-.522-1.008-1.143-1.008-.82 0-1.386.72-1.386 1.827 0 1.116.567 1.836 1.413 1.836.594 0 1.008-.369 1.125-.855h-1.242v-1.395h3.006V22z"})),M||(M=$.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:2,d:"M14.5 11a2.5 2.5 0 0 0-5 0"})));function tH(){return(tH=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var tW=e=>$.createElement("svg",tH({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),P||(P=$.createElement("path",{fill:"currentColor",d:"M5.315 19.75V22H3.812v-6.462h2.727c1.52 0 2.466.72 2.466 2.106 0 1.377-.945 2.106-2.466 2.106zm0-1.26h1.143c.71 0 1.07-.315 1.07-.846s-.36-.837-1.07-.837H5.315zM9.63 22v-6.462h2.295c2.052 0 3.303 1.26 3.303 3.231S13.978 22 11.925 22zm1.467-1.269h.828c1.161 0 1.818-.774 1.818-1.962s-.657-1.962-1.827-1.962h-.819zM17.434 22h-1.476v-6.462h4.527v1.287h-3.05v1.467h2.537v1.26h-2.538z"})),E||(E=$.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 11V6a2 2 0 0 1 2-2h7.172a2 2 0 0 1 1.414.586l2.828 2.828A2 2 0 0 1 19 8.828V11m-4-6v2.5a.5.5 0 0 0 .5.5H18m-2-1 .5-.5"})));function tV(){return(tV=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var tB=e=>$.createElement("svg",tV({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),S||(S=$.createElement("path",{fill:"currentColor",d:"M4.493 19.75V22H2.99v-6.462h2.727c1.521 0 2.466.72 2.466 2.106 0 1.377-.945 2.106-2.466 2.106zm0-1.26h1.143c.711 0 1.071-.315 1.071-.846s-.36-.837-1.07-.837H4.492zm9.904-2.952V22h-1.305l-2.844-4.167V22h-1.44v-6.462h1.503l2.646 3.951v-3.951zM19.711 22v-.576c-.252.387-.846.675-1.63.675-1.7 0-2.951-1.35-2.951-3.294 0-1.953 1.278-3.366 3.078-3.366 1.413 0 2.34.747 2.736 1.935l-1.431.459c-.144-.693-.612-1.089-1.296-1.089-.936 0-1.584.81-1.584 2.043s.648 2.043 1.61 2.043c.739 0 1.234-.495 1.315-1.161h-1.431v-1.233h2.916V22z"})),T||(T=$.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 11V6a2 2 0 0 1 2-2h7.172a2 2 0 0 1 1.414.586l2.828 2.828A2 2 0 0 1 19 8.828V11m-4-6v2.5a.5.5 0 0 0 .5.5H18m-2-1 .5-.5"})));function tq(){return(tq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var tY=e=>$.createElement("svg",tq({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),L||(L=$.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:2,d:"M5 11V6a2 2 0 0 1 2-2h8.172a2 2 0 0 1 1.414.586l1.828 1.828A2 2 0 0 1 19 7.828V11"})),A||(A=$.createElement("path",{fill:"currentColor",d:"M4.757 19.858V22H2.993v-6.462h2.826c1.593 0 2.574.774 2.574 2.16 0 .918-.468 1.602-1.287 1.935L8.59 22H6.575l-1.27-2.142zm0-1.395h.972c.62 0 .918-.288.918-.72 0-.459-.297-.729-.918-.729h-.972zm6.217-2.925h2.034L15.34 22h-1.79l-.415-1.17h-2.34L10.39 22H8.643zm.99 1.953-.675 1.926h1.35zm5.607 2.367V22h-1.764v-6.462h2.826c1.593 0 2.574.774 2.574 2.16 0 .918-.468 1.602-1.287 1.935L21.405 22H19.39l-1.269-2.142zm0-1.395h.972c.621 0 .918-.288.918-.72 0-.459-.297-.729-.918-.729h-.972zM12 5h-2v2h1.5a.5.5 0 0 0 .5-.5zM10 7H8.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5H10zM12 9.5a.5.5 0 0 0-.5-.5H10v1.5a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5z"})));function tG(){return(tG=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var tK=e=>$.createElement("svg",tG({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),I||(I=$.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:2,d:"M19 11a7 7 0 1 0-14 0"})),D||(D=$.createElement("path",{fill:"currentColor",d:"M5.915 15.538h1.45l.908 3.834.9-3.834h1.791L9.264 22H7.57l-.954-3.816L5.663 22H3.971l-1.7-6.462h1.835l.91 3.834zm6.807 0h2.034L17.087 22h-1.79l-.415-1.17h-2.34L12.137 22h-1.746zm.99 1.953-.675 1.926h1.35zM20.394 22h-1.81l-2.34-6.462h1.882l1.395 4.158 1.404-4.158h1.809z"})),R||(R=$.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:2,d:"M14.5 11a2.5 2.5 0 0 0-5 0"})));function t$(){return(t$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var tQ=e=>$.createElement("svg",t$({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),z||(z=$.createElement("path",{fill:"currentColor",d:"M3.472 15.538h1.142l.932 4.221.931-4.221h1.369L6.299 22H4.995l-.972-4.131L3.067 22H1.763L.208 15.538h1.401l.94 4.221zm4.885 0h4.107v1.287H9.685v1.242h2.317v1.269H9.685v1.377h2.779V22H8.357zM13.206 22v-6.462h2.503c1.271 0 1.952.612 1.952 1.737 0 .747-.405 1.188-.786 1.368.551.225.956.765.956 1.539 0 1.143-.729 1.818-1.976 1.818zm1.296-3.87h1.07c.526 0 .817-.234.817-.684s-.291-.675-.818-.675h-1.07zm0 1.17v1.458h1.231c.518 0 .802-.297.802-.729s-.284-.729-.802-.729zm5.317.45V22h-1.353v-6.462h2.454c1.37 0 2.22.72 2.22 2.106 0 1.377-.85 2.106-2.22 2.106zm0-1.26h1.029c.64 0 .963-.315.963-.846s-.324-.837-.963-.837h-1.03zM4 11a1 1 0 1 0 2 0zm11.586-6.414.707-.707zm2.828 2.828.707-.707zM18 11a1 1 0 1 0 2 0zm-2-6a1 1 0 1 0-2 0zm2 4a1 1 0 1 0 0-2zm-2.707-2.707a1 1 0 0 0 1.414 1.414zm1.914.914a1 1 0 0 0-1.414-1.414zM6 11V6H4v5zm1-6h7.172V3H7zm7.879.293 2.828 2.828 1.414-1.414-2.828-2.828zM18 8.828V11h2V8.828zm-.293-.707a1 1 0 0 1 .293.707h2a3 3 0 0 0-.879-2.12zM14.172 5a1 1 0 0 1 .707.293l1.414-1.414A3 3 0 0 0 14.172 3zM6 6a1 1 0 0 1 1-1V3a3 3 0 0 0-3 3zm8-1v2.5h2V5zm1.5 4H18V7h-2.5zm1.207-1.293.5-.5-1.414-1.414-.5.5zM14 7.5A1.5 1.5 0 0 0 15.5 9V7a.5.5 0 0 1 .5.5z"})));function tX(){return(tX=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var tJ=e=>$.createElement("svg",tX({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),F||(F=$.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:2,d:"M5 11V6a2 2 0 0 1 2-2h8.172a2 2 0 0 1 1.414.586l1.828 1.828A2 2 0 0 1 19 7.828V11"})),Z||(Z=$.createElement("path",{fill:"currentColor",d:"M9.882 20.506V22H4.59v-1.314l3.006-3.654h-2.97v-1.494h5.22v1.305l-2.961 3.663zm2.96-4.968V22H11.08v-6.462zm3.146 4.401V22h-1.764v-6.462h2.826c1.593 0 2.574.756 2.574 2.205 0 1.44-.98 2.196-2.574 2.196zm0-1.467h.972c.621 0 .918-.279.918-.729 0-.459-.297-.729-.918-.729h-.972zM12 5h-2v2h1.5a.5.5 0 0 0 .5-.5zM10 7H8.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5H10zM12 9.5a.5.5 0 0 0-.5-.5H10v1.5a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5z"})));function t0(e){let{url:t,className:n}=e;switch(new URL(t).pathname.split(".").pop()){case"pdf":return(0,ef.jsx)(tW,{className:n});case"gif":return(0,ef.jsx)(tP,{className:n});case"jpg":case"jpeg":return(0,ef.jsx)(tS,{className:n});case"png":return(0,ef.jsx)(tB,{className:n});case"webp":return(0,ef.jsx)(tQ,{className:n});case"mp3":return(0,ef.jsx)(tR,{className:n});case"m4a":return(0,ef.jsx)(tL,{className:n});case"ogg":return(0,ef.jsx)(tU,{className:n});case"wav":return(0,ef.jsx)(tK,{className:n});case"mp4":return(0,ef.jsx)(tF,{className:n});case"mov":return(0,ef.jsx)(tI,{className:n});case"zip":return(0,ef.jsx)(tJ,{className:n});case"rar":return(0,ef.jsx)(tY,{className:n});case"css":return(0,ef.jsx)(t_,{className:n});default:return null}}function t1(e){let{searchResult:t,className:n}=e;switch(t.content_type){case"application/pdf":return(0,ef.jsx)(tW,{className:n});case"image/gif":return(0,ef.jsx)(tP,{className:n});case"image/jpeg":return(0,ef.jsx)(tS,{className:n});case"image/png":return(0,ef.jsx)(tB,{className:n});case"image/webp":return(0,ef.jsx)(tQ,{className:n});case"audio/mpeg":return(0,ef.jsx)(tR,{className:n});case"audio/m4a":return(0,ef.jsx)(tL,{className:n});case"audio/ogg":return(0,ef.jsx)(tU,{className:n});case"audio/wav":return(0,ef.jsx)(tK,{className:n});case"video/mp4":return(0,ef.jsx)(tF,{className:n});case"video/quicktime":return(0,ef.jsx)(tI,{className:n});case"application/zip":return(0,ef.jsx)(tJ,{className:n});case"application/x-rar-compressed":return(0,ef.jsx)(tY,{className:n});case"text/css":return(0,ef.jsx)(t_,{className:n})}return(0,ef.jsx)(t0,{url:t.url,className:n})}function t2(e){let{image:t,index:n,isInDrawer:r}=e,s=(0,eS.nn)(eS.LW.threadId),a=(0,$.useCallback)(e=>{t&&null!=n&&null!=s&&eX.Y.logEvent(e,{url:t.url,title:t.title,index:n,thread_id:s})},[t,n,s]);return(0,$.useEffect)(()=>{a(eX.M.searchSidebarImageShown)},[a]),(0,ef.jsxs)("button",{className:"group flex h-full w-full flex-col gap-2",onClick:()=>{eh.vm.setFocusedImage(t?{image:t,source:eh.y6.ImagesTab}:void 0),a(eX.M.searchSidebarImageClicked)},children:[(0,ef.jsx)(t5,{className:r?"rounded-xl":(0,q.default)(null!=n&&n%4==0&&"sm:rounded-bl-xl sm:rounded-tl-xl",null!=n&&n%4==3&&"sm:rounded-br-xl sm:rounded-tr-xl"),imgClassName:"group-hover:opacity-90 hover:opacity-100",image:t}),(0,ef.jsx)("div",{className:"-ml-1.5 hidden w-full justify-center gap-2 text-xs text-token-text-tertiary group-hover:text-token-text-primary sm:flex",children:t&&(0,ef.jsxs)(ef.Fragment,{children:[(0,ef.jsx)(t0,{url:t.content_url,className:"icon-md"}),t.content_size.width," x ",t.content_size.height]})})]})}function t4(e){let t,{isInDrawer:n=!1}=e,{imageResults:r,isLoading:s,isErrored:a}=(0,em.i)(!0),{retrySearch:l}=(0,eN.A)(),i=r.map(e=>e.thumbnail_url),o=(0,tO.h)({queries:i.map(e=>(0,em.wU)(e)),combine:e=>{let t=new Set;return e.forEach((e,n)=>{e.isError&&t.add(i[n])}),t}}),c=r.length;return c>8?c=4*Math.floor(c/4):c>4&&(c=2*Math.floor(c/2)),t=a?(0,ef.jsx)(ee.bW,{onClickRetry:()=>l()}):0!==c||s?(0,ef.jsx)("div",{className:(0,q.default)("grid items-center justify-center",n?"grid-cols-2 gap-4":"grid-cols-3 gap-1 sm:grid-cols-4 sm:gap-x-2.5 sm:gap-y-5"),children:s?Array.from({length:24}).map((e,t)=>(0,ef.jsx)(t2,{index:t,isInDrawer:n},t)):r.slice(0,c).map((e,t)=>!o.has(e.thumbnail_url)&&(0,ef.jsx)(t2,{image:e,index:t,isInDrawer:n},t))}):(0,ef.jsx)(ee.jj,{children:"No results"}),(0,ef.jsx)("div",{className:"sm:px-snc-results-padding",children:t})}function t5(e){let{image:t,imageSource:n,className:r,imgClassName:s}=e,{isSuccess:a}=(0,em.Fw)(null==t?void 0:t.thumbnail_url),l=t&&.125>=Math.abs(t.content_size.width/t.content_size.height-1);return(0,ef.jsx)("button",{className:(0,q.default)("relative aspect-square h-full w-full overflow-hidden border-[0.5px] border-token-border-light",r),onClick:()=>{eh.vm.setFocusedImage(t?{image:t,source:n}:void 0)},children:t?(0,ef.jsx)("div",{className:"relative aspect-square overflow-hidden",children:a?(0,ef.jsx)("div",{className:"h-full w-full bg-black",children:(0,ef.jsx)("img",{src:t.thumbnail_url,alt:t.content_url,className:(0,q.default)("h-full w-full object-contain hover:opacity-90",l?"object-cover":"object-contain",s)})}):(0,ef.jsx)("div",{className:"h-full w-full animate-pulse bg-token-main-surface-tertiary"})}):(0,ef.jsx)("div",{className:"aspect-square h-full w-full animate-pulse bg-token-main-surface-tertiary"})})}var t3=n(61097),t6=n(52088);function t8(){return(t8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var t9=e=>$.createElement("svg",t8({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 18 18"},e),U||(U=$.createElement("g",{id:"browser"},$.createElement("rect",{width:18,height:18,fill:"currentColor",rx:9}),$.createElement("path",{id:"vector",fill:"#fff",fillRule:"evenodd",d:"m11.524 10.435 1.548-4.363a.895.895 0 0 0-1.143-1.144L7.565 6.477a1.79 1.79 0 0 0-1.088 1.088L4.928 11.93a.895.895 0 0 0 1.144 1.143l4.363-1.548a1.79 1.79 0 0 0 1.088-1.09M9 10.119a1.12 1.12 0 1 0 0-2.238 1.12 1.12 0 0 0 0 2.238",clipRule:"evenodd"})))),t7=n(53102);let ne=["turnIndex","groupPosition","rawPosition"];function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach(function(t){(0,eL.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function nr(e){let{searchResult:t}=e;return t.pub_date?(0,ef.jsxs)("span",{className:"text-token-text-tertiary",children:[new Date(1e3*t.pub_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})," — "]}):null}function ns(e){let{secondaryResults:t,highlightUrl:n,children:r}=e;return(0,ef.jsxs)("div",{className:"ml-10 mt-snc-1 flex flex-col gap-5",children:[t.map((e,t)=>(0,ef.jsx)("div",{className:"group relative",children:(0,ef.jsx)(ni,{href:e.url,turnIndex:e.turn_index,groupPosition:[e.group_index,e.group_child_index],rawPosition:e.raw_index,target:"_blank",rel:"noopener",className:"block",children:(0,ef.jsx)(nl,{result:e,isHighlighted:n===e.url,isSecondaryResult:!0})})},t)),r]})}function na(e){var t;let{group:n,highlightUrl:r}=e,s=n.entries,[a,l]=[s[0],s.slice(1)],i=(0,$.useRef)(null),o=null!==(t=(0,el.d)(a.url).data)&&void 0!==t?t:(0,ea.p)(a.url,"short"),c=r===a.url;return(0,$.useEffect)(()=>{c&&i.current&&i.current.scrollIntoView({behavior:"smooth",block:"center"})},[c]),(0,ef.jsxs)("div",{ref:i,className:"flex w-full min-w-0 flex-col px-snc-results-padding pb-snc-2",children:[(0,ef.jsxs)(ni,{turnIndex:n.turn_index,href:a.url,groupPosition:[n.group_index,0],rawPosition:n.raw_index,target:"_blank",rel:"noopener",className:"group flex gap-6",children:[(0,ef.jsx)(en.Z,{url:a.url,className:"icon-sm mt-0.5 rounded bg-token-main-surface-primary object-cover",size:32,minSize:20,fallback:(0,ef.jsx)(t9,{className:"icon-sm text-token-text-quaternary"})}),(0,ef.jsxs)("div",{className:"grow",children:[(0,ef.jsx)("div",{className:"line-clamp-1 h-5 text-sm text-token-text-tertiary",children:o}),(0,ef.jsx)(nl,{result:a,isHighlighted:c})]})]}),l&&l.length>0&&(0,ef.jsx)(ns,{secondaryResults:l,highlightUrl:r})]})}function nl(e){let{result:t,isHighlighted:n,isSecondaryResult:r}=e;return(0,ef.jsxs)(ef.Fragment,{children:[(0,ef.jsxs)("div",{className:"relative flex justify-between gap-1",children:[(0,ef.jsx)("div",{className:(0,q.default)("line-clamp-2 text-base font-semibold group-hover:text-token-link",n&&"bg-yellow-100 dark:bg-yellow-900"),children:t.title}),(0,ef.jsx)("div",{className:"invisible py-0.5 group-hover:visible",children:(0,ef.jsx)(tn,{url:t.url,title:t.title,snippet:t.snippet,turnIndex:t.turn_index})})]}),(0,ef.jsxs)("div",{className:(0,q.default)("mt-1 text-sm font-normal text-token-text-tertiary",r?"line-clamp-1":"line-clamp-2"),children:[(0,ef.jsx)(t1,{searchResult:t,className:"mr-1 mt-1 inline h-5 w-5 -translate-y-1"}),(0,ef.jsx)(nr,{searchResult:t}),t.snippet]})]})}let ni=(0,$.forwardRef)(function(e,t){let n=(0,eS.nn)(eS.LW.threadId),{turnIndex:r,groupPosition:s,rawPosition:a}=e,l=(0,t6.Z)(e,ne);function i(t){e.href&&n&&eX.Y.logEvent(t,{url:e.href,thread_id:n,turn_index:r,group_position:s,raw_position:a})}return(0,$.useEffect)(()=>{i(eX.M.searchLinkShown)},[]),(0,ef.jsx)("a",nn(nn({ref:t},l),{},{onClick:t=>{var n;null===(n=e.onClick)||void 0===n||n.call(e,t),t.stopPropagation(),i(eX.M.searchLinkClicked)}}))}),no=(0,$.forwardRef)(function(e,t){let{searchResults:n,query:r,highlightUrl:s}=e;return(0,ef.jsxs)("div",{className:"flex w-full flex-col overflow-hidden",ref:t,children:[null!=r&&(0,ef.jsxs)("div",{className:"line-clamp-1 border-t-[0.5px] border-token-border-medium px-snc-results-padding pb-snc-2 pt-5 text-sm text-token-text-tertiary dark:border-x-token-border-xheavy",children:['Search: "',r,'"']}),n.map((e,t)=>(0,ef.jsx)(na,{group:e,highlightUrl:s},t))]})});function nc(e){let{highlightUrl:t}=e,n=(0,t7.L)(),r=(0,$.useRef)(new Map),s=(0,K.useRouter)(),a=(0,ti.U8)(s);return(0,$.useEffect)(()=>{if(null!=a){let e=r.current.get(a);e&&e.scrollIntoView({behavior:"smooth",block:"start"})}},[a]),(0,ef.jsx)("div",{className:"flex w-full flex-col",children:n.length>0?n.map((e,n)=>{let{query:s,results:a}=e;if(0===a.length)return null;let l=a[0].turn_index;return(0,ef.jsx)(no,{searchResults:a,highlightUrl:t,query:0!==n&&null!=s?s:void 0,ref:e=>{e&&r.current.set(l,e)}},l)}):(0,ef.jsx)("div",{className:"px-snc-results-padding",children:(0,ef.jsx)(eT.HK,{lines:8,gapFrequency:2,width:55,widthVariance:30})})})}function nu(e){let{highlightUrl:t}=e;return(0,ef.jsx)("div",{className:"flex flex-col gap-snc-1 pb-snc-1",children:(0,ef.jsx)(nc,{highlightUrl:t})})}function nd(){var e;let t=e_.ne.useStore(),n=e_.ne.useState(e=>{var t;return null===(t=e.currentSearch)||void 0===t?void 0:t.config.query}),r=null===(e=(0,eS.nn)(eS.LW.firstTurn))||void 0===e?void 0:e.user_query,s=null!=r?r:n;return(0,ef.jsxs)("div",{className:(0,q.default)("relative hidden h-20 shrink-0 border-b border-token-border-light bg-token-main-surface-primary sm:block"),children:[(0,ef.jsx)("button",{onClick:()=>{t.setState({queryInput:s,shouldShowComposer:!0})},className:"block h-full w-full cursor-pointer pl-7 pr-5 text-left text-base text-token-text-tertiary transition hover:text-token-text-primary",children:null!=s?(0,ef.jsxs)(ef.Fragment,{children:["“",null==s?void 0:s.substring(0,60),(null==s?void 0:s.length)>60?"...":"","”"]}):null}),(0,ef.jsxs)("div",{className:"absolute right-5 top-1/2 flex h-8 -translate-y-1/2 items-center gap-4",children:[(0,ef.jsx)(J.F,{}),(0,ef.jsx)(X.Kd,{className:"h-8 w-8"})]})]})}function nh(e){let{currentTab:t}=e;return(0,ef.jsxs)("div",{className:"block sm:hidden",children:[(0,ef.jsx)("div",{className:"px-4 pt-2",children:(0,ef.jsx)(eE,{})}),(0,ef.jsx)(t3.Vv,{selectedTab:t})]})}function nm(){return(0,ef.jsx)("div",{className:"absolute inset-x-0 bottom-0 sm:inset-x-4",children:(0,ef.jsxs)("div",{className:(0,q.default)("absolute bottom-0 left-0 w-full sm:left-1/2 sm:-translate-x-1/2",nx),children:[(0,ef.jsx)(eC,{side:"bottom",className:"hidden sm:block"}),(0,ef.jsx)(eO.$,{})]})})}function nf(e){let{currentTab:t}=e,n=V.fY.useState(e=>e.windowWidth>1400)?440:384;return(0,ef.jsxs)(Y.E.div,{initial:{marginLeft:-n},animate:{marginLeft:0},exit:{marginLeft:-n},style:{width:"".concat(n,"px")},className:"relative shrink-0",children:[(0,ef.jsx)("div",{className:"no-scrollbar h-full overflow-auto py-6",children:t===ti.iY.Images?(0,ef.jsx)(t4,{isInDrawer:!0}):t===ti.iY.Sources?(0,ef.jsx)(nu,{}):null},t),(0,ef.jsx)(Y.E.div,{initial:{opacity:1},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-y-0 right-0 w-px bg-token-border-light"})]})}let np=(0,$.memo)(function(e){var t;let{highlightTurnIndex:n}=e,{0:r,1:s}=(0,$.useState)(!1),a=(0,eS.nn)(eS.LW.hasFirstTurnError),l=(0,eS.nn)(eS.LW.threadError),i=(0,eS.nn)(eS.LW.threadId),o=(0,eS.nn)(eS.LW.hasResponse),c=(0,$.useRef)(i);c.current=i;let u=(0,$.useRef)(o);u.current=o;let{retrySearch:d}=(0,eN.A)(),{0:h,1:m}=(0,$.useState)(ti.iY.Answer),f=(0,V.pY)(e=>(0,ti.Y)(e.windowWidth),ti.AE.Mobile),p=(0,K.useRouter)(),x=(0,ti.NM)(p);(0,em.o)(),(0,$.useEffect)(()=>{if(o)s(!1);else{let e=setTimeout(()=>{s(!0),B.U.addAction("sonic.web.query_not_responding",{timeoutMs:8e3,threadId:c.current})},8e3);return()=>{clearTimeout(e)}}},[o]),(0,$.useEffect)(()=>{let e=()=>{u.current||B.U.addAction("sonic.web.query_not_responding_on_unload",{threadId:c.current})};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[]),(0,$.useEffect)(()=>{let e=(0,ti.Ld)();f===ti.AE.DesktopWithDrawer&&(h===ti.iY.Answer&&null!=e&&h!==e?(window.location.hash=e,m(e)):x!==e&&h!==ti.iY.Answer&&(0,ti.GV)(h))},[f,m,ti.GV]),(0,$.useEffect)(()=>{x!==h&&m(x)},[x,p]);let g=e_.ne.useStore();(0,$.useEffect)(()=>(0,H.eR)(document,{keydown:e=>{"k"===e.key&&((0,W.kK)()?e.metaKey:e.ctrlKey)&&(g.setState(e=>e.shouldShowComposer?{shouldShowComposer:!1}:{shouldShowComposer:!0}),e.preventDefault()),!g.getState().shouldShowComposer&&"alt"===t3.JW&&e.altKey&&("Backquote"===e.code&&((0,ti._d)(p,ti.iY.Answer),e.preventDefault()),"Digit1"===e.code&&((0,ti._d)(p,ti.iY.Sources),e.preventDefault()),"Digit2"===e.code&&((0,ti._d)(p,ti.iY.Images),e.preventDefault()))}}),[p,g]);let v=(0,eS.nn)(eS.LW.numTurns),b=a||r||null!=l;return(0,ef.jsxs)("div",{className:"h-full w-full overflow-y-hidden bg-token-main-surface-primary",children:[(0,ef.jsxs)("div",{id:"__feather_screenshot",className:"flex h-full",children:[(0,ef.jsx)(ek.WU,{onResultsPage:!0,children:(0,ef.jsx)(t3.Fi,{sizeVariant:f,selectedTab:h})}),(0,ef.jsxs)("div",{className:"flex grow flex-col overflow-hidden",children:[(0,ef.jsx)(nd,{}),(0,ef.jsx)("div",{className:"relative flex h-full grow overflow-hidden",children:(0,ef.jsxs)(G.M,{initial:!1,children:[f===ti.AE.DesktopWithDrawer&&h!==ti.iY.Answer&&(0,ef.jsx)(nf,{currentTab:h},"drawer"),(0,ef.jsxs)("div",{className:"relative grow",children:[(t=(0,ef.jsxs)("div",{className:(0,q.default)("mx-auto flex min-h-full max-w-[100vw] flex-col",nx),children:[(0,ef.jsx)(nh,{currentTab:h}),b?(0,ef.jsx)("div",{className:"flex grow items-center justify-center",children:(0,ef.jsx)(ee.bW,{onClickRetry:()=>d(),children:l})}):f===ti.AE.DesktopWithDrawer?(0,ef.jsx)(tN,{highlightTurnIndex:n}):h===ti.iY.Images?(0,ef.jsx)("div",{className:"sm:pt-8",children:(0,ef.jsx)(t4,{})}):h===ti.iY.Sources?(0,ef.jsx)("div",{className:"pt-8",children:(0,ef.jsx)(nu,{})}):(0,ef.jsx)(tN,{highlightTurnIndex:n})]}),f===ti.AE.DesktopWithDrawer||h===ti.iY.Answer?(0,ef.jsx)(Q.default,{className:"h-full",initialScrollBehavior:"auto",scrollViewClassName:"h-full !overflow-y-scroll sm:px-2",followButtonClassName:"hidden",scroller:()=>v>1?1/0:0,children:t}):(0,ef.jsx)("div",{className:"h-full overflow-y-scroll sm:px-2",children:t},h)),f===ti.AE.DesktopWithDrawer||h===ti.iY.Answer?(0,ef.jsx)(nm,{}):null]})]})})]})]}),(0,ef.jsx)(ep,{})]})}),nx="lg:max-w-[800px]"},61097:function(e,t,n){n.d(t,{Fi:function(){return M},JW:function(){return C},M2:function(){return _},Vv:function(){return P}});var r,s=n(2346),a=n(98601),l=n(52088),i=n(30853),o=n(41619),c=n(40833),u=n(60682),d=n(15913),h=n(19841),m=n(34977),f=n(92379),p=n(15478),x=n(53102),g=n(26925),v=n(97193),b=n(12381),y=n(48772),j=n(651);let w=["selected","tooltipLabel","children","className"],k=["selected","tooltipLabel","children","className"];function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let C="alt";function _(e){switch(e){case"alt":return(0,d.kK)()?"⌥":"Alt+";case"ctrl":return"Ctrl+";case"meta":return"⌘"}}function M(e){let{sizeVariant:t,selectedTab:n}=e,r=g.ne.useStore(),s=_(C),a=(0,m.useRouter)();return(0,j.jsxs)("div",{className:"hidden flex-col justify-center gap-3 sm:flex",children:[(0,j.jsx)(E,{selected:!1,onClick:()=>{r.setState({shouldShowComposer:!0})},tooltipLabel:(0,j.jsxs)("span",{children:["Search ",_((0,d.kK)()?"meta":"ctrl"),"K"]}),children:(0,j.jsx)(o.W1M,{className:"icon-lg"})}),(0,j.jsx)(E,{selected:n===y.iY.Answer,disabled:n===y.iY.Answer,onClick:()=>(0,y._d)(a,y.iY.Answer),tooltipLabel:(0,j.jsxs)("span",{children:["Answer ",s,"~"]}),className:"min-[1200px]:hidden",children:(0,j.jsx)(o.qtd,{className:"icon-lg"})}),(0,j.jsx)(T,{selected:n===y.iY.Sources,disabled:t!==y.AE.DesktopWithDrawer&&n===y.iY.Sources,tooltipLabel:(0,j.jsxs)("span",{children:["Sources ",s,"1"]}),onClick:()=>(0,y._d)(a,n===y.iY.Sources?y.iY.Answer:y.iY.Sources),children:(0,j.jsx)(o.xPt,{className:"icon-lg"})}),(0,j.jsx)(E,{selected:n===y.iY.Images,disabled:t!==y.AE.DesktopWithDrawer&&n===y.iY.Images,tooltipLabel:(0,j.jsxs)("span",{children:["Media ",s,"2"]}),onClick:()=>(0,y._d)(a,n===y.iY.Images?y.iY.Answer:y.iY.Images),children:(0,j.jsx)(o.Ka2,{className:"icon-lg"})})]})}function P(e){let{selectedTab:t}=e,n=(0,m.useRouter)();return(0,j.jsxs)("div",{className:"flex justify-between gap-3 border-b border-token-border-light",children:[(0,j.jsx)(I,{$selected:t===y.iY.Answer,disabled:t===y.iY.Answer,onClick:()=>(0,y._d)(n,y.iY.Answer),children:(0,j.jsx)(o.qtd,{className:"icon-lg"})}),(0,j.jsx)(L,{children:(0,j.jsx)(I,{$selected:t===y.iY.Sources,disabled:t===y.iY.Sources,onClick:()=>(0,y._d)(n,y.iY.Sources),children:(0,j.jsx)(o.xPt,{className:"icon-lg"})})}),(0,j.jsx)(I,{$selected:t===y.iY.Images,disabled:t===y.iY.Images,onClick:()=>(0,y._d)(n,y.iY.Images),children:(0,j.jsx)(o.Ka2,{className:"icon-lg"})})]})}function E(e){let{selected:t,tooltipLabel:n,children:r,className:s}=e,a=(0,l.Z)(e,w),o=(0,j.jsx)("button",O(O({},a),{},{className:(0,h.default)("rounded-lg p-1.5 transition",t?"bg-token-main-surface-tertiary text-token-text-primary":"text-token-text-tertiary hover:bg-token-main-surface-tertiary hover:text-token-text-primary"),children:r}));return n?(0,j.jsx)(i.u,{label:n,side:"right",sideOffset:4,className:s,children:o}):o}function S(){let e=(0,b.nn)(e=>{var t,n;return(null!==(t=null===(n=e.thread)||void 0===n||null===(n=n.turns)||void 0===n?void 0:n.length)&&void 0!==t?t:0)>1||!b.LW.isLastTurnStreaming(e)}),t=(0,u.qg)(u.pm.hasSeenSncSourcesTooltip),n=(0,x.d)();return!(0,v.W6)(v.bM.isModalOpen)&&n&&!t.isLoading&&t.eligible&&e}function T(e){let{selected:t,tooltipLabel:n,children:r,className:s}=e,a=(0,l.Z)(e,k),i=S(),o=(0,d.oc)();return i&&o&&!t?(0,j.jsx)(A,{side:"right",sideOffset:8,children:(0,j.jsx)(E,O(O({selected:t,className:s},a),{},{children:r}))}):(0,j.jsx)(E,O(O({selected:t,tooltipLabel:n,className:s},a),{},{children:r}))}function L(e){let{children:t}=e,n=(0,d.oc)(),r=S();return n||!r?(0,j.jsx)(j.Fragment,{children:t}):(0,j.jsx)(A,{side:"bottom",sideOffset:-8,children:t})}function A(e){let{children:t,side:n,sideOffset:r}=e,s=(0,u.qg)(u.pm.hasSeenSncSourcesTooltip),a=(0,m.useRouter)(),l=()=>{(0,y._d)(a,y.iY.Sources),s.markAsViewed()},{0:i,1:o}=(0,f.useState)(!1);return(0,f.useEffect)(()=>{let e=setTimeout(()=>{o(!0)},3e3);return()=>clearTimeout(e)},[]),(0,j.jsx)(c.v,{side:n,show:i,theme:"bright",title:(0,j.jsx)("button",{onClick:l,className:"w-full text-left",children:"All your sources, right here"}),description:(0,j.jsx)("button",{onClick:l,className:"text-left",children:"Every link included in your search results can be found here."}),onDismiss:s.markAsViewed,sideOffset:r,badge:"none",children:(0,j.jsx)("div",{className:"w-full",children:t})})}let I=p.Z.button(r||(r=(0,s.Z)(["w-full -mb-0.5 py-3 flex justify-center transition\n",""])),e=>{let{$selected:t}=e;return t?"text-token-text-primary":"text-token-text-tertiary hover:text-token-text-primary"})},53102:function(e,t,n){n.d(t,{L:function(){return o},d:function(){return i}});var r=n(98601),s=n(12381);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function i(){return(0,s.m0)(["search_results"]).some(e=>{var t,n;return null!==(t=null===(n=e.search_results)||void 0===n||null===(n=n.entries)||void 0===n?void 0:n.length)&&void 0!==t&&t})}function o(){let e=(0,s.m0)(["index","search_results","user_query"]),t=[];for(let r of e){var n;(null===(n=r.search_results)||void 0===n?void 0:n.entries)!=null&&t.push({query:r.user_query,results:r.search_results.entries.map(e=>{var t;return l(l({},e),{},{turnIndex:null!==(t=r.index)&&void 0!==t?t:0})})})}let r=t.toReversed(),a=[],i=0,o=0;return r.forEach(e=>{let t=e.results.map(e=>{let t=0,n=o,r=e.entries.map(n=>l(l({},n),{},{group_index:i,raw_index:o++,turn_index:e.turnIndex,group_child_index:t++})),s=l(l({},e),{},{entries:r,group_index:i,raw_index:n,turn_index:e.turnIndex});return i++,s});a.push({query:e.query,results:t})}),a}},51837:function(e,t,n){n.d(t,{L:function(){return s}});var r=n(45120);function s(){var e;return null===(e=(0,r.fW)("2000076788"))||void 0===e?void 0:e.value}},712:function(e,t,n){n.d(t,{o:function(){return d}});var r=n(84760),s=n(92379),a=n(92054),l=n(91111),i=n(81014),o=n(26925),c=n(10798);function u(e,t,n,r,s,a,l){if(0===t.length)return[n,a];let o=t[0],c=n.findIndex(t=>t.id===e&&!t.topHit);return -1===c||(n[c].topHit=o,a!==o&&n.length>=3&&n.every(e=>e.topHit===o)&&((0,i.Y5)({query:o,metadata:s,agentSettingsOverrides:r}),l(o),a=o)),[n,a]}function d(e){let{query:t,enabled:n=!0}=e,{prefetch:d}=(0,l.A)(),h=(0,s.useRef)([]),m=(0,s.useRef)(null),f=(0,s.useRef)([]),p=(0,s.useRef)((0,a.Z)()),x=o.ne.useStore(),{userMetadata:g}=(0,l.A)(),[v]=(0,c.OR)(),b=!v.suggestions||!n||!t;b||0!==h.current.length&&h.current[h.current.length-1].query===t||(p.current=(0,a.Z)(),h.current=h.current.slice(-2),h.current.push({id:p.current,query:t,topHit:null}));let y=p.current,j=(0,s.useCallback)(async e=>{let t=await (0,i.mO)(e);return[h.current,m.current]=u(y,t,h.current,o.ne.selectAgentSettingsOverrides(x.getState()),g,m.current,d),t},[y,x,g,d]),{data:w=[],isFetched:k}=(0,r.a)({queryKey:["typeahead",t],queryFn:j,enabled:!b,networkMode:"offlineFirst"});return!b&&k&&(f.current=w,[h.current,m.current]=u(y,w,h.current,o.ne.selectAgentSettingsOverrides(x.getState()),g,m.current,d),f.current=w),n?w:f.current}},3551:function(e,t,n){n.d(t,{AA:function(){return i},FH:function(){return u},J8:function(){return c},L7:function(){return l},SX:function(){return d},ZV:function(){return s},cy:function(){return a},xj:function(){return o}});var r=n(39004);function s(e,t){return t?"/g/".concat((0,r.kX)(t),"/c/").concat(e):"/c/".concat(e)}function a(){return"/gpts"}function l(){return"/gpts/mine"}function i(e){return e?"/gpts/editor/".concat(e):"/gpts/editor"}function o(e){let t=i(void 0);return null==e?t:i(e)}function c(e){return i(e)}function u(e){try{let t=new URL(e);return t.hostname=t.hostname.replace(/^(www\.|web\.|mbasic\.|mobile\.)(secure\.)?/,""),t.pathname="",[...t.searchParams.keys()].forEach(e=>t.searchParams.delete(e)),t.toString()}catch(t){return e}}function d(e){let t=function(e){if(!e)return null;try{return new URL(e).hostname}catch(e){return null}}(e);return t?t.replace(/^www\./,""):e}},87230:function(e,t,n){n.d(t,{d:function(){return p},u:function(){return x}});var r=n(72409),s=n(3551),a=n(42420),l=n(84760),i=n(19464),o=n(79208),c=n(18939),u=n.n(c),d=n(74153),h=n.n(d),m=n(28438);let f=h()(e=>o.Ue({fetcher:async t=>{let n=new Map;for await(let s of r.c.streamedJsonPost("".concat(m.B,"/attributions"),{urls:t}))s.attribution&&n.set(s.url,s.attribution),e.setQueryData(["attribution",{url:s.url}],s.attribution);return u()(t.map(e=>{let t=n.get(e);return t&&{url:e,attribution:t}}))},resolver:o.rp("url"),scheduler:o.ck(100)}));function p(e){let{useBaseUrl:t=!0,enabled:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t?(0,s.FH)(e):e,i=f((0,a.NL)());return(0,l.a)({queryKey:["attribution",{url:r}],queryFn:async()=>(await i.fetch(r)).attribution,enabled:n&&!!e})}function x(e){let{useBaseUrl:t=!0,enabled:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t?e.map(s.FH):e,l=f((0,a.NL)());return(0,i.h)({queries:r.map(e=>({queryKey:["attribution",{url:e}],queryFn:async()=>(await l.fetch(e)).attribution,enabled:r.length>0&&n})),combine:t=>{let n=new Map;for(let r=0;r<t.length;r++){let s=t[r].data;s&&n.set(e[r],s)}return n}})}},39696:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(92379);function s(e,t){let n=(0,r.useRef)(e);(0,r.useEffect)(()=>{n.current=e},[e]),(0,r.useEffect)(()=>{if(null!=t){let e=window.setInterval(function(){n.current()},t);return()=>clearInterval(e)}},[t])}},15174:function(e,t,n){var r=n(92379);t.Z=function(){let e=(0,r.useRef)(!1);return(0,r.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),(0,r.useCallback)(()=>e.current,[])}},66290:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(34977),s=n.n(r),a=n(92379);function l(){return(0,a.useCallback)(e=>{-1===e?s().back():s().push(e,void 0,{shallow:!0})},[])}}}]);
//# sourceMappingURL=6451.cc631b2010f94687.js.map