"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5879],{45879:function(e,r,t){t.r(r),t.d(r,{FormattedText:function(){return Z},UserFormattedText:function(){return F}});var n=t(94521),l=t(17379),i=t(86021),s=t(6860),o=t(93747),a=t(15236),c=t(19841),u=t(64331),d=t(92379),f=t(55434),h=t(10852),p=t(89360),m=t(14816),g=t(89678),j=t.n(g),v=t(80179);async function x(e){let r=await t.e(7635).then(t.t.bind(t,47635,19));if(null!=p.B&&null!=e&&e.startsWith(p.B))return!0;try{let t=r.get(new URL(null!=e?e:"").hostname);if("openai.com"===t)return!0;return!1}catch{return!1}}var b=t(87420),y=t(90594),w=t(651);let O=["node","onClick","clientThreadId","messageId","href"],k=["src","clientThreadId"],S=["node"],P=["node"];function T(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function W(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?T(Object(t),!0).forEach(function(r){(0,n.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}let I={},_={};function C(e,r){return function(e,r){var t;let n=(0,i.qN)(t=>null!=e&&null!=r&&i.iN.isThreadUrlSafe(e,r,t)),{data:{safe:l}={}}=(t=n?void 0:r,(0,m.a)({queryKey:["safe-url",{serverThreadId:e,url:t}],queryFn:async()=>{var r;return await x(t)||null!==(r=i.tQ.getThreadSafeUrls(e))&&void 0!==r&&r.includes(t)?{safe:!0}:h.Z.getConversationSafeUrls(e,t,(0,v.YK)())},enabled:null!=e&&null!=t}));return n||l?r:void 0}(e,function(e,r){let{0:t,1:n}=(0,d.useState)(void 0),{0:l}=(0,d.useState)(()=>j()(e=>{n(e)},500));return(0,d.useEffect)(()=>{l(e)},[l,e]),t===e?e:void 0}(r,0))}function E(e){var r;let{node:t,onClick:n,clientThreadId:s,messageId:c,href:u}=e,d=(0,l.Z)(e,O),f=n,h=null==t||null===(r=t.properties)||void 0===r?void 0:r.href,p=C((0,i.XK)(s),u);return null!=c&&"string"==typeof h&&h.includes("/bing/redirect")&&(I[c]||(o.A.logEvent(a.M.browsingShowBingLink,{id:c,content:h}),I[c]=!0),f=e=>{_[c]||(o.A.logEvent(a.M.browsingClickBingLink,{id:c,content:h}),_[c]=!0),null==n||n(e)}),(0,w.jsx)("a",W(W({onClick:f},d),{},{href:p,rel:"noreferrer"}))}function N(e){let{src:r,clientThreadId:t}=e,n=(0,l.Z)(e,k),s=C((0,i.XK)(t),r);return null==s?(0,w.jsx)("div",{}):(0,w.jsx)("img",W(W({},n),{},{src:s}))}function Z(e){let{size:r="medium",children:t,className:n,clientThreadId:o,messageId:a,interpolateCitations:f=!1,componentOverrides:h}=e,{resolvedTheme:p}=(0,u.F)(),m=(0,i.h9)(),g=(0,d.useMemo)(()=>W(W({},y.ff),{},{a:e=>{var r;let{node:t}=e,n=(0,l.Z)(e,S),i=null==t||null===(r=t.properties)||void 0===r?void 0:r.href;return"string"==typeof i&&i.startsWith(b.O6)?m?(0,w.jsx)(b.c7,W({},n)):null!=o&&null!=a?(0,w.jsx)(b.ZP,W(W({},n),{},{clientThreadId:o,messageId:a,href:i})):null:(0,w.jsx)(E,W(W({},e),{},{clientThreadId:o,messageId:a,interpolateCitations:f}))},img:e=>{var r;let{node:t}=e,n=(0,l.Z)(e,P),i=null==t||null===(r=t.properties)||void 0===r?void 0:r.src;return"string"==typeof i&&(i.startsWith(b.O6)||i.startsWith("attachment:"))?null:(0,w.jsx)(N,W(W({},n),{},{clientThreadId:o}))}},h),[o,f,m,a,h]);return(0,w.jsx)(s.S,{name:"formatted_text_error",fallback:()=>(0,w.jsx)(w.Fragment,{children:t}),children:(0,w.jsx)(B,{rehypePlugins:y.Yu,remarkPlugins:y.Hf,className:(0,c.default)(n,"markdown prose w-full break-words dark:prose-invert","dark"===p?"dark":"light","small"===r&&"prose-xs"),urlTransform:y.SQ,components:g,children:t})})}function F(e){let{text:r}=e;return(0,w.jsx)(s.S,{name:"formatted_text_error",fallback:()=>(0,w.jsx)(w.Fragment,{children:r}),children:(0,w.jsx)(U,{text:r})})}let U=e=>{let{text:r}=e,t=r.split(/(```[\s\S]*?```|`[^`\n]+`|```[\s\S]*|`[^`\n]*\n|`[^`\n]*$)/g).map((e,r)=>e.startsWith("```")&&e.endsWith("```")?(0,w.jsx)("pre",{className:"overflow-x-auto",children:(0,w.jsx)("code",{children:e.slice(3,-3).trim()})},r):e.startsWith("```")?(0,w.jsx)("pre",{className:"overflow-x-auto",children:(0,w.jsx)("code",{children:e.slice(3).trim()})},r):e.startsWith("`")&&e.endsWith("`")?(0,w.jsx)("code",{children:e.slice(1,-1)},r):e.startsWith("`")?(0,w.jsx)("code",{children:e.slice(1)},r):e);return(0,w.jsx)("div",{children:t})},B=(0,d.memo)(f.U)}}]);
//# sourceMappingURL=5879.05efc992afe57a9d.js.map