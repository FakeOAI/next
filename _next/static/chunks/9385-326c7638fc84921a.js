"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9385],{39385:function(e,t,r){r.d(t,{$:function(){return y},m:function(){return x}});var i=r(93951),n=r(92745),s=r(86025),a=r(31438),o=r(15913),l=r(19841),c=r(75172),d=r(30478),u=r(4160),m=r(30853),f=r(47563),h=r(95033),p=r(96062),g=r(2118),v=r(651);function x(e){let{clientThreadId:t}=e,r=(0,n.XK)(t),a=(0,i.t)(),{isUnauthenticated:o}=(0,s.u)(),l=(0,n.eV)(t),c=(0,d.V_)();return o?null:(0,v.jsxs)(v.Fragment,{children:[null!=a&&a.canInteractWithGizmos()?(0,v.jsx)(h.Dy,{currentGizmoId:l}):(0,v.jsx)(p.Z,{}),!o&&(0,v.jsx)(u.Z,{activeId:c?void 0:r,isInPopover:!1})]})}function y(e){let{className:t,onNewThread:r,historyDisabled:i}=e,n=(0,c.Z)(),s=(0,o.w$)();return(0,v.jsxs)("div",{className:(0,l.default)("flex justify-between",t),children:[(0,v.jsx)(m.u,{sideOffset:4,label:n.formatMessage({id:"e7SzX9",defaultMessage:"Close sidebar"}),className:"flex",children:(0,v.jsx)(g.W,{onClick:()=>{s?a.vm.toggleDesktopNavCollapsed():a.vm.toggleActiveSidebar("mobile-nav")},icon:s?f.BSo:f.Oqj,surfaceContext:"secondary"})}),(0,v.jsx)(m.u,{sideOffset:4,label:n.formatMessage({id:"OFyxqj",defaultMessage:"New chat"}),className:"flex",children:(0,v.jsx)(g.W,{onClick:()=>{s||a.vm.toggleActiveSidebar("mobile-nav"),r()},icon:i?f.Ezi:f.bl$,surfaceContext:"secondary"})})]})}},4160:function(e,t,r){r.d(t,{V:function(){return ep},Z:function(){return ef}});var i,n,s=r(2346),a=r(98601),o=r(83963),l=r(42420),c=r(27393),d=r(19841),u=r(95638),m=r(26430),f=r(12654),h=r(44043),p=r(82187),g=r(69262),v=r(157),x=r(21389),y=r(88600),b=r(24098),j=r.n(b),k=r(92379),w=r(68306),M=r(75172),N=r(62984),O=r(15478),C=r(17096),Z=r(11550),E=r(39004),P=r(2721),z=r(53132),S=r(92745),T=r(86025),D=r(43703),G=r(13391),I=r(15913),L=r(3551),B=r(99976),_=r(61619),A=r(88667),R=r(38482),F=r.n(R),K=r(34977),W=r.n(K),q=r(15174),Y=r(651);function U(e){let{text:t}=e,r=(0,q.Z)(),{0:i,1:n}=(0,k.useState)(!0),{0:s,1:a}=(0,k.useState)(0),o=(0,k.useMemo)(()=>Array.from(t),[t]),l=(0,k.useMemo)(()=>new V().humanTypingDelaysQuertyDistance(o),[o]);return(0,k.useEffect)(()=>{t&&i&&(n(!0),l.forEach((e,t)=>{setTimeout(()=>{r()&&(a(t),t===l.length-1&&n(!1))},e)}))},[l,r,i,t]),(0,Y.jsx)(Y.Fragment,{children:o.slice(0,s+1).join("")})}class V{qwertyDistance(e,t){var r,i;let n={q:[0,0],w:[1,0],e:[2,0],r:[3,0],t:[4,0],y:[5,0],u:[6,0],i:[7,0],o:[8,0],p:[9,0],a:[0,1],s:[1,1],d:[2,1],f:[3,1],g:[4,1],h:[5,1],j:[6,1],k:[7,1],l:[8,1],z:[0,2],x:[1,2],c:[2,2],v:[3,2],b:[4,2],n:[5,2],m:[6,2]},[s,a]=null!==(r=n[e.toLowerCase()])&&void 0!==r?r:[0,0],[o,l]=null!==(i=n[t.toLowerCase()])&&void 0!==i?i:[0,0];return Math.abs(s-o)+Math.abs(a-l)}humanTypingDelaysQuertyDistance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,i=0,n=[];for(let s=0;s<e.length;++s){let a;if(s>0){let i=this.qwertyDistance(e[s-1],e[s]);a=0===i?this.getRandomInt(t,Math.floor(r/2)):1===i?this.getRandomInt(t,Math.floor(2*r/3)):this.getRandomInt(t,r)}else a=this.getRandomInt(t,r);n.push(a+i),i+=a}return n}getRandomInt(e,t){return Math.floor(Math.random()*(t-e+1))+e}}var H=r(44395),$=r(81522),X=r(30853),J=r(47563),Q=r(24740),ee=r(60682),et=r(24241);let er=F()(()=>Promise.all([r.e(1612),r.e(211),r.e(6746),r.e(9536),r.e(7574)]).then(r.bind(r,52245)).then(e=>e.GizmoConversationOptionsDropdown),{loadableGenerated:{webpack:()=>[52245]}});function ei(e){let{conversation:t,conversationTitle:r,onOpenChange:i}=e,n=(0,M.Z)(),{isUnauthenticated:s}=(0,T.u)(),{eligible:a,markAsViewed:o}=(0,ee.qg)(ee.pm.ArchiveConversationOnboarding),c=(0,S.ff)(t.id),{0:d,1:u}=(0,k.useState)(!1),m=(0,l.NL)();return((0,k.useEffect)(()=>(0,D.LW)(G.n,{deleteChat:e=>{let{serverThreadId:r}=e;r===t.id&&u(!0)},archiveChat:async e=>{let{serverThreadId:r}=e;r===t.id&&(await P.Z.patchConversation(t.id,{is_archived:!0}),(0,et.aM)(m),A.m9.logEvent("chatgpt_conversation_archived"),B.A.logEvent(_.M.conversationArchived),a&&(Q.m.info(n.formatMessage({defaultMessage:"You can view archived chats in Settings",id:"HistoryGizmoItem.archiveChatOnboarding"}),{duration:10,hasCloseButton:!0}),o()),c&&W().push("/",void 0,{shallow:!0}))}}),[m,a,t.id,n,c,o]),s)?null:(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(X.u,{label:n.formatMessage({id:"tJPHEQ",defaultMessage:"Options"}),sideOffset:4,side:"top",children:(0,Y.jsx)(er,{clientThreadId:t.id,onOpenChange:i,children:(0,Y.jsx)("button",{className:"flex items-center justify-center text-token-text-secondary transition hover:text-token-text-primary radix-state-open:text-token-text-secondary",children:(0,Y.jsx)(J.nWS,{className:"icon-md"})})})}),d&&(0,Y.jsx)(ep,{title:r,handleDelete:()=>{P.Z.patchConversation(t.id,{is_visible:!1}).then(()=>{(0,et.aM)(m),A.m9.logEvent("chatgpt_conversation_deleted"),B.A.logEvent(_.M.conversationDeleted)}),c&&W().push("/",void 0,{shallow:!0})},onClose:()=>{u(!1)}})]})}function en(e){let{conversation:t,onClose:r}=e,{0:i,1:n}=(0,k.useState)(t.title),s=(0,l.NL)();function a(){i!==t.title&&(S.tQ.setTitle(t.id,i,S._L.User),B.A.logEvent(_.M.renameThread,{threadId:t.id,content:i}),P.Z.patchConversation(t.id,{title:i}).then(()=>{(0,et.aM)(s)}))}return(0,Y.jsx)("input",{type:"text",value:i,onChange:e=>{n(e.target.value)},onKeyDown:e=>{switch(e.key){case"Escape":r();break;case"Enter":a(),r()}},onBlur:()=>{a(),r()},autoFocus:!0,className:"w-full border border-token-border-light bg-transparent p-0 text-sm"})}function es(e){var t;let{conversation:r,isActive:i,elementRef:n,isPrimaryBackgroundColor:s}=e,a=(0,M.Z)(),{0:o,1:l}=(0,k.useState)(!1),{0:c,1:u}=(0,k.useState)(!1),m=z.p.useState(z.p.selectConversationStatus)(r.id),f=z.p.useStore();(0,k.useEffect)(()=>{if(2===m&&i){let e=setTimeout(()=>{f.setConversationStatus(r.id,null),P.Z.clearConversationStatus(r.id)},500);return()=>clearTimeout(e)}},[m,i,r.id,f]),(0,k.useEffect)(()=>(0,D.LW)(G.n,{editTitle:e=>{let{serverThreadId:t}=e;(t?t===r.id:i)&&l(!0)}}),[r.id,i]);let h=a.formatMessage({id:"mpXAeu",defaultMessage:"New chat"}),{resolvedTitle:p,isTypingEffect:g}=function(e,t,r){let{title:i,titleSource:n}=(0,S.XL)(e),{0:s,1:a}=(0,k.useState)(!1),o=null!=i?i:t,l=(0,k.useRef)(o);return(0,k.useEffect)(()=>(r&&n===S._L.Generated&&o!==l.current&&a(!0),()=>{l.current=o}),[r,o,n]),{isTypingEffect:s,resolvedTitle:o}}(r.id,r.title,i),v=(0,I.w$)(),x=g&&i&&v,{data:y}=(0,E.b9)(null!==(t=r.conversation_template_id)&&void 0!==t?t:void 0);return(0,Y.jsxs)("div",{className:(0,d.default)("group relative rounded-lg active:opacity-90",i?"bg-token-sidebar-surface-secondary":"hover:bg-token-sidebar-surface-secondary",c&&!i&&"bg-token-sidebar-surface-secondary"),children:[(0,Y.jsx)(j(),{href:(0,L.ZV)(r.id,y),onClick:e=>{if(!e.metaKey&&!e.ctrlKey&&(e.preventDefault(),!i)){var t;t=r.id,$.hx.abortAllRequests(),B.A.logEvent(_.M.loadThread,{threadId:t}),W().push((0,L.ZV)(t,y),void 0,{shallow:!0})}},onDoubleClick:()=>{l(!0)},ref:n,className:"flex items-center gap-2 p-2",children:(0,Y.jsxs)("div",{className:"relative grow overflow-hidden whitespace-nowrap",dir:"auto",children:[x?(0,Y.jsx)(U,{text:p||h}):p||h,(0,Y.jsx)("div",{className:(0,d.default)("absolute bottom-0 top-0 to-transparent ltr:right-0 ltr:bg-gradient-to-l rtl:left-0 rtl:bg-gradient-to-r",!!s&&(i?"from-token-sidebar-surface-secondary":!i&&c?"from-token-sidebar-surface-secondary":"from-token-main-surface-primary"),!s&&(i?"from-token-sidebar-surface-secondary":!i&&c?"from-token-sidebar-surface-secondary":"from-token-sidebar-surface-primary"),{"from-token-main-surface-primary can-hover:group-hover:from-token-sidebar-surface-secondary":s&&!i&&!c,"from-token-sidebar-surface-primary can-hover:group-hover:from-token-sidebar-surface-secondary":!s&&!i&&!c,"w-10 from-60%":i||c,"w-8 from-0% can-hover:group-hover:w-10 can-hover:group-hover:from-60%":!i&&!c})})]})}),o?(0,Y.jsx)("div",{className:"absolute bottom-0 left-[7px] right-2 top-0 flex items-center bg-token-sidebar-surface-secondary",children:(0,Y.jsx)(en,{conversation:r,onClose:()=>{l(!1)}})}):i||1!==m?i||2!==m?(0,Y.jsx)("div",{className:(0,d.default)("absolute bottom-0 top-0 items-center gap-1.5 pr-2 ltr:right-0 rtl:left-0",i||c?"flex":"hidden can-hover:group-hover:flex"),children:(0,Y.jsx)(ei,{conversation:r,conversationTitle:null!=p?p:r.title,onOpenChange:e=>{u(e),e&&B.A.logEvent(_.M.conversationHistoryItemOpenMenu,{conversationId:r.id})}})}):(0,Y.jsx)("div",{className:"absolute bottom-0 top-0 flex items-center gap-1.5 pr-2 ltr:right-0 rtl:left-0",children:(0,Y.jsx)("div",{className:"h-2 w-2 rounded-full bg-blue-selection"})}):(0,Y.jsx)("div",{className:"absolute bottom-0 top-0 flex items-center gap-1.5 pr-2 ltr:right-0 rtl:left-0",children:(0,Y.jsx)(H.O,{size:18})})]})}var ea=r(97537),eo=r(59144),el=r(24434);function ec(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function ed(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ec(Object(r),!0).forEach(function(t){(0,a.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ec(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let eu=(0,w.vU)({historyBucketToday:{id:"history.bucket.today",defaultMessage:"Today"},historyBucketYesterday:{id:"history.bucket.yesterday",defaultMessage:"Yesterday"},historyBucketLastSeven:{id:"history.bucket.lastSeven",defaultMessage:"Previous 7 Days"},historyBucketLastThirty:{id:"history.bucket.lastThirty",defaultMessage:"Previous 30 Days"},unableToLoadHistory:{id:"history.unableToLoad",defaultMessage:"Unable to load history"},retryButton:{id:"history.retryButton",defaultMessage:"Retry"},showMoreButton:{id:"history.showMoreButton",defaultMessage:"Show more"},deleteModalTitle:{id:"history.deleteModalTitle",defaultMessage:"Delete chat?"},deleteModalBody:{id:"history.deleteModalBody",defaultMessage:"This will delete {title}."},deleteModalConfirm:{id:"history.deleteModalConfirm",defaultMessage:"Delete"},deleteModalCancel:{id:"history.deleteModalCancel",defaultMessage:"Cancel"}}),em={initial:e=>{let{isNew:t}=e;return t?{opacity:0,height:0,overflow:"hidden"}:{}},animate:()=>({opacity:1,height:"auto"}),exit:()=>({opacity:0,height:0})};var ef=k.memo(function(e){let{activeId:t,isPrimaryBackgroundColor:r,isInPopover:i}=e,n=(0,l.NL)(),s=(0,M.Z)(),{0:a,1:o}=(0,k.useState)(!1),{0:b,1:j}=(0,k.useState)(0),w=(0,C.Z)(),{conversations:O,hasNextPage:E,fetchNextPage:P,isLoading:z,isFetchingNextPage:S,isError:T}=(0,et.MO)(),D=(0,k.useRef)(null),G=(0,k.useCallback)(e=>{var t;z||null==e||(null===(t=D.current)||void 0===t||t.disconnect(),D.current=new IntersectionObserver(e=>{e[0].isIntersecting&&E&&P()}),D.current.observe(e))},[z,E,P]);(0,k.useEffect)(()=>()=>{var e;null===(e=D.current)||void 0===e||e.disconnect()},[]);let I=function(e){let t=(0,k.useRef)(),r=(0,k.useRef)();return((0,k.useEffect)(()=>{t.current=r.current,r.current=e},[e]),e===r.current)?t.current:r.current}(O);(0,k.useEffect)(()=>{w(()=>{j(b+1)},(0,m.Z)((0,f.Z)(),Date.now())+1e3)},[b,w]);let L=0===O.length;(0,k.useEffect)(()=>{if(!L){var e;null===(e=(0,c.Ef)({namespace:c.dG.ChatPageLoad}))||void 0===e||e.logTiming("render_history_items")}},[L]);let B=(0,k.useMemo)(()=>O.reduce((e,t)=>{var r,i;let n=new Date(null!==(r=null!==(i=t.update_time)&&void 0!==i?i:t.create_time)&&void 0!==r?r:0),a=(0,u.Z)(new Date,n);if(0===a)e.recent.today.items.push(t);else if(a<=1)e.recent.yesterday.items.push(t);else if(a<=7)e.recent.lastSeven.items.push(t);else if(a<=30)e.recent.lastThirty.items.push(t);else if((0,g.Z)(n)){let r=(0,p.Z)(n),i=(0,h.Z)(n),a="".concat(r,"-").concat(i);e.dynamicMonths[a]?e.dynamicMonths[a].items.push(t):e.dynamicMonths[a]={label:s.formatDate(n,{month:"long"}),items:[t]}}else{let r=(0,p.Z)(n),i="".concat(r,"-");e.dynamicYears[i]?e.dynamicYears[i].items.push(t):e.dynamicYears[i]={label:s.formatDate(n,{year:"numeric"}),items:[t]}}return e},{recent:{today:{label:(0,Y.jsx)(N.Z,ed({},eu.historyBucketToday)),items:[]},yesterday:{label:(0,Y.jsx)(N.Z,ed({},eu.historyBucketYesterday)),items:[]},lastSeven:{label:(0,Y.jsx)(N.Z,ed({},eu.historyBucketLastSeven)),items:[]},lastThirty:{label:(0,Y.jsx)(N.Z,ed({},eu.historyBucketLastThirty)),items:[]}},dynamicMonths:{},dynamicYears:{}}),[b,O]);return(0,Y.jsxs)(eh,{$centered:z||T||L,children:[L&&z&&(0,Y.jsx)(ea.Z,{className:"m-auto"}),L&&T&&(0,Y.jsxs)("div",{className:"p-3 text-center italic text-token-text-tertiary",children:[(0,Y.jsx)(N.Z,ed({},eu.unableToLoadHistory)),!a&&(0,Y.jsx)("div",{className:"mt-1",children:(0,Y.jsx)(Z.z,{as:"button",color:"primary",size:"small",className:"m-auto mt-2",onClick:()=>{o(!0),(0,et.aM)(n)},children:(0,Y.jsx)(N.Z,ed({},eu.retryButton))})})]}),!z&&!L&&(0,Y.jsx)("div",{children:(0,Y.jsx)(v.S,{id:i?"history-popover":"history-sidebar",children:(0,Y.jsx)(x.M,{initial:!1,children:[B.recent,B.dynamicMonths,B.dynamicYears].flatMap((e,i)=>(0,Y.jsx)(k.Fragment,{children:Object.entries(e).map((e,n)=>{let[s,{items:a,label:o}]=e;if("today"!==s&&!a.length)return null;let l=!!a.find(e=>{var t;return O.length>0&&e.id===(null===(t=O[0])||void 0===t?void 0:t.id)});return a.length>0&&(0,Y.jsxs)(y.E.div,{className:(0,d.default)(r&&"first:mt-0","relative mt-5 first:mt-0 last:mb-5 empty:mt-0 empty:hidden"),layout:"position",initial:{height:0,opacity:1,position:"relative"},animate:{height:"auto",opacity:1,transition:{duration:.2,ease:"easeIn"}},children:[(0,Y.jsx)(y.E.div,{className:"sticky top-0 z-20 bg-token-sidebar-surface-primary",layout:"position",children:(0,Y.jsx)("span",{className:"flex h-9 items-center",children:(0,Y.jsx)(eg,{children:o})})},"title-".concat(s)),(0,Y.jsx)("ol",{children:a.map((e,i)=>{var n;let a=t===e.id,o=null==I?void 0:I.find(t=>{let{id:r}=t;return r===e.id}),c=E&&(null===(n=O[O.length-5-1])||void 0===n?void 0:n.id)===e.id?G:void 0;return(0,Y.jsx)(y.E.li,{className:(0,d.default)("relative",l&&0===i?"z-[15]":""),layout:"position",custom:{isNew:!o},variants:em,initial:"initial",animate:"animate",exit:"exit",children:(0,Y.jsx)(es,{isPrimaryBackgroundColor:r,conversation:e,isActive:a,elementRef:c})},"history-item-".concat(e.id,"-").concat(s))})})]},"".concat(s,"-").concat(i,"-").concat(n))})},"category-".concat(i)))})})}),S&&(0,Y.jsx)("div",{className:"m-4 mb-5 flex justify-center",children:(0,Y.jsx)(ea.Z,{})})]})});let eh=O.Z.div(i||(i=(0,s.Z)(["flex flex-col gap-2 pb-2 text-token-text-primary text-sm mt-5\n",""])),e=>{let{$centered:t}=e;return t&&"h-full justify-center items-center empty:hidden"});function ep(e){let{title:t,handleDelete:r,onClose:i}=e,n=(0,M.Z)(),s=(0,o.ll)();return(0,Y.jsxs)(el.Z,{isOpen:!0,onClose:i,type:"success",title:n.formatMessage(eu.deleteModalTitle),primaryButton:(0,Y.jsx)(eo.Z.Button,{title:n.formatMessage(eu.deleteModalConfirm),color:"danger",onClick:()=>{r(),i()}}),secondaryButton:(0,Y.jsx)(eo.Z.Button,{title:n.formatMessage(eu.deleteModalCancel),color:"secondary",onClick:i}),children:[(0,Y.jsx)(N.Z,ed(ed({},eu.deleteModalBody),{},{values:{title:(0,Y.jsx)("strong",{children:t})}})),s&&(0,Y.jsx)("div",{className:"mt-2 text-sm text-token-text-tertiary",children:(0,Y.jsx)(N.Z,{id:"history.deleteModalMemoryDisclaimer",defaultMessage:"To clear any memories from this chat, visit your <link>settings</link>.",values:{link:e=>(0,Y.jsx)(j(),{href:"#settings/Personalization",shallow:!0,className:"underline",children:e})}})})]})}let eg=O.Z.h3(n||(n=(0,s.Z)(["pb-2 pt-3 px-2 text-xs font-semibold text-ellipsis overflow-hidden break-all text-token-text-secondary"])))},95033:function(e,t,r){r.d(t,{Dy:function(){return Y},eY:function(){return K},xL:function(){return H}});var i,n=r(98601),s=r(30853),a=r(12128),o=r(25899),l=r(39004),c=r(99555),d=r(10080),u=r(93951),m=r(86025),f=r(31438),h=r(3551),p=r(42420),g=r(58695),v=r(47563),x=r(99976),y=r(61619),b=r(27393),j=r(19841),k=r(88600),w=r(14015),M=r.n(w),N=r(38482),O=r.n(N),C=r(24098),Z=r.n(C),E=r(92379),P=r(62984),z=r(75172),S=r(68306),T=r(98095),D=r(34643),G=r(75372),I=r(15972),L=r(96062),B=r(651);function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let R=O()(()=>Promise.all([r.e(6746),r.e(9536),r.e(9294)]).then(r.bind(r,52245)).then(e=>e.GizmoKeepInSidebarMenuItem),{loadableGenerated:{webpack:()=>[52245]}}),F=((i={})[i.Keep=0]="Keep",i[i.Recents=1]="Recents",i);function K(e){let{data:{gizmos:t}={}}=(0,l.Wz)();return!!t&&t.some(t=>t.resource.gizmo.id===e)}function W(e){let{isActive:t,isNewConversation:r}=e,i=(0,p.NL)();return(0,B.jsx)("div",{className:"bg-token-sidebar-surface-primary pt-0",children:(0,B.jsx)(V,{gizmo:void 0,isActive:t,onClick:e=>{(0,m.P)((0,g.y_)(i))&&!r&&(e.preventDefault(),(0,I.Xl)())}})})}function q(e){let{gizmo:t,currentGizmoId:r}=e,i=(0,E.useRef)(!1),n=(0,f.tN)(),{0:s,1:a}=(0,E.useState)(!1),{itemsLeft:o,listItems:l,needsToCollapseItems:c}=function(e,t){var r,i,n,s,a,o;let l=M()(e,e=>e.flair.kind),c=[...null!==(r=null===(i=l[d.JK.FirstParty])||void 0===i?void 0:i.map(e=>{let{resource:t}=e;return{gizmo:t,section:F.Keep}}))&&void 0!==r?r:[],...null!==(n=null===(s=l[d.JK.SidebarKeep])||void 0===s?void 0:s.map(e=>{let{resource:t}=e;return{gizmo:t,section:F.Keep}}))&&void 0!==n?n:[],...null!==(a=null===(o=l[d.JK.Recent])||void 0===o?void 0:o.slice(0,2).map(e=>{let{resource:t}=e;return{gizmo:t,section:F.Recents}}))&&void 0!==a?a:[]],u=c.length>5,m=u&&!t&&c.length>4?c.slice(0,4):c;return{listItems:[...m.filter(e=>{let{section:t}=e;return t===F.Keep}),...m.filter(e=>{let{section:t}=e;return t===F.Recents})],itemsLeft:c.length-m.length,needsToCollapseItems:u}}(t,s);return(0,E.useEffect)(()=>{if(l.length>0&&!i.current){var e;null===(e=(0,b.Ef)({namespace:b.dG.ChatPageLoad}))||void 0===e||e.logTiming("render_gizmo_sidebar"),i.current=!0}},[l]),(0,B.jsxs)("div",{children:[l.map((e,t)=>{let{gizmo:i,section:n}=e;return(0,B.jsxs)(E.Fragment,{children:[t>1&&n!==l[t-1].section&&(0,B.jsx)("div",{className:"my-2 ml-2 h-px w-7 bg-token-sidebar-surface-tertiary"}),(0,B.jsx)(V,{gizmo:i,isActive:i.gizmo.id===r,section:n},i.gizmo.id)]},t)}),c?(0,B.jsxs)("button",{onClick:()=>{a(!s)},className:"flex h-10 w-full items-center gap-2 rounded-lg px-2 text-sm text-token-text-primary hover:bg-token-sidebar-surface-secondary",children:[(0,B.jsx)("div",{className:"flex h-6 w-6 flex-shrink-0 items-center justify-center",children:(0,B.jsx)(v.nWS,{className:"icon-md text-token-text-primary"})}),(0,B.jsx)("div",{className:"flex grow items-center gap-1",children:s?(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(P.Z,{id:"GizmoSidebarList.showLess",defaultMessage:"See less"}),(0,B.jsx)(v.r0F,{className:"icon-xs"})]}):(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(P.Z,{id:"GizmoSidebarList.showMoreItems",defaultMessage:"{numMore} more",values:{numMore:o}}),(0,B.jsx)(v.Tg4,{className:"icon-xs"})]})})]}):null,(0,B.jsx)(D.Z,{children:(0,B.jsx)(k.E.div,{whileTap:{scale:.98},children:(0,B.jsx)(Z(),{href:(0,h.cy)(),onClick:()=>{"mobile-nav"===n.activeSidebar&&f.vm.toggleActiveSidebar("mobile-nav")},children:(0,B.jsx)(G.f,{icon:v.frp,children:(0,B.jsx)(P.Z,A({},$.exploreStoreEnabled))})},"explore")})})]})}function Y(e){let{currentGizmoId:t}=e,{data:{gizmos:r}={}}=(0,l.Wz)();return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(W,{isActive:void 0===t,isNewConversation:!0}),(0,B.jsx)(L.Z,{}),null!=r?(0,B.jsx)(q,{gizmo:r,currentGizmoId:t}):null]})}function U(e){let{gizmo:t,isOpen:r,setIsOpen:i,section:n}=e,s=(0,p.NL)();return(0,B.jsxs)(T.d,{open:r,onOpenChange:i,triggerButton:(0,B.jsx)("button",{className:(0,j.default)("flex text-token-text-secondary hover:text-token-text-primary",r?"":"invisible group-hover:visible"),children:(0,B.jsx)(v.nWS,{className:"icon-md"})}),contentAlign:"start",sideOffset:4,alignOffset:-4,size:"auto",children:[n===F.Recents&&(0,B.jsx)(T.Z.Item,{onClick:async()=>{await c.U.updateGizmoSidebar(s,t.gizmo.id,"keep")},children:(0,B.jsx)(P.Z,A({},$.keepInSidebar))}),(0,B.jsx)(R,{gizmoResource:t})]})}function V(e){var t,r;let i;let{gizmo:n,historyDisabled:c,section:m,onClick:f}=e,h=(0,z.Z)(),{0:p,1:g}=(0,E.useState)(!1),{0:x,1:y}=(0,E.useState)(!1),b=(0,u.t)(),j=!!(null==n||null===(t=n.gizmo.tags)||void 0===t?void 0:t.includes(d.U9.FirstParty));if(null!=n)i=n.gizmo.display.name||o.zf;else{if(null==b)return null;i=c?h.formatMessage($.clearChat):b.canInteractWithGizmos()?o.Dd:h.formatMessage({id:"GizmoSidebarListItem.newChat",defaultMessage:"New chat"})}return(0,B.jsx)(k.E.div,{whileTap:{scale:.98},onMouseEnter:()=>{y(!0)},onMouseLeave:()=>{y(!1)},children:(0,B.jsx)(H,{loggingGizmoId:null!==(r=null==n?void 0:n.gizmo.id)&&void 0!==r?r:"primary",href:null!=n?(0,l.m_)(n):"/",onClick:f,icon:(0,B.jsx)(a.Z,{isFirstParty:null==n||j,src:null==n?void 0:n.gizmo.display.profile_picture_url,className:"h-6 w-6 flex-shrink-0"}),isMenuOpen:p,label:i,hoverRightIcon:(0,B.jsxs)("div",{className:"flex gap-2",children:[(x||p)&&null!=n&&(0,B.jsx)("div",{className:"text-token-text-tertiary",onClick:e=>{e.preventDefault()},children:(0,B.jsx)(U,{gizmo:n,isOpen:p,setIsOpen:g,section:m})}),(0,B.jsx)(s.u,{side:"right",label:h.formatMessage(c?$.clearChat:$.newChat),className:"flex items-center",children:(0,B.jsx)("button",{className:p?"text-token-text-tertiary":"invisible text-token-text-secondary hover:text-token-text-primary group-hover:visible",children:c?(0,B.jsx)(v.Ezi,{className:"icon-md"}):(0,B.jsx)(v.bl$,{className:"icon-md"})})})]})})})}function H(e){let{href:t,icon:r,label:i,hoverRightIcon:n,isMenuOpen:s,loggingGizmoId:a,onClick:o,target:l}=e;return(0,B.jsxs)(Z(),{href:t,target:l,shallow:!0,className:(0,j.default)("group flex h-10 items-center gap-2.5 rounded-lg bg-token-sidebar-surface-primary px-2 font-normal",s?"bg-token-main-surface-primary":"hover:bg-token-sidebar-surface-secondary"),onClick:e=>{x.A.logNewChatButtonClicked({location:"Sidebar gizmo list",gizmo_id:a}),x.A.logEvent(y.M.sidebarClickGizmo,{gizmo_id:a}),null==o||o(e)},children:[r,(0,B.jsx)("div",{className:"grow overflow-hidden text-ellipsis whitespace-nowrap text-sm text-token-text-primary",children:i}),n]})}let $=(0,S.vU)({exploreStoreEnabled:{id:"gizmo.exploreStoreEnabled",defaultMessage:"Explore GPTs"},keepInSidebar:{id:"gizmo.keepInSidebar",defaultMessage:"Keep in sidebar"},newChat:{id:"gizmo.newChat",defaultMessage:"New chat"},clearChat:{id:"gizmo.clearChat",defaultMessage:"Clear chat"}})},96062:function(e,t,r){r.d(t,{Z:function(){return l}});var i=r(88667),n=r(38482),s=r.n(n),a=r(651);let o=s()(()=>r.e(8682).then(r.bind(r,20488)),{ssr:!1,loadableGenerated:{webpack:()=>[20488]}});function l(){return(0,i.sB)("114024").value?(0,a.jsx)(o,{}):null}},34643:function(e,t,r){r.d(t,{Z:function(){return v},c:function(){return g}});var i=r(98601),n=r(93951),s=r(31438),a=r(99976),o=r(61619),l=r(92379),c=r(75172),d=r(62984),u=r(68306),m=r(60682),f=r(40833),h=r(651);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function g(){let{activeModals:e}=(0,s.tN)(),t=(0,n.t)(),r=(0,m.qg)(m.pm.ExploreGPTs),i=(0,m.qg)(m.pm.ExploreGPTsNewNux),c=(0,s.xH)(),d=r.eligible&&!r.isLoading&&!c,u=i.eligible&&!i.isLoading&&!c;return e.size>0&&(u=!1),!d&&null!=t&&t.hasPlusFeatures()&&(u=!1),(0,l.useEffect)(()=>{u&&a.A.logEvent(o.M.storeDisplayNewNux)},[u]),u}function v(e){let{children:t}=e,r=g(),n=(0,c.Z)(),s=(0,m.qg)(m.pm.ExploreGPTsNewNux);return r?(0,h.jsx)(f.v,{side:"right",show:!0,title:n.formatMessage(x.exploreGPTsTitle),onDismiss:s.markAsViewed,sideOffset:20,theme:"bright",description:(0,h.jsx)(d.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach(function(t){(0,i.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},x.exploreGPTsDescriptionNewNux)),children:t}):(0,h.jsx)(h.Fragment,{children:t})}let x=(0,u.vU)({exploreGPTsTitle:{id:"gptExploreGPTs.title",defaultMessage:"Explore GPTs"},exploreGPTsDescription:{id:"gptExploreGPTs.description",defaultMessage:"Now you can discover GPTs created by the community"},exploreGPTsDescriptionNewNux:{id:"gptExploreGPTs.descriptionNewNux",defaultMessage:"Discover custom versions of ChatGPT created for specific use cases like writing, research, and coding."}})},17096:function(e,t,r){r.d(t,{Z:function(){return n}});var i=r(92379);function n(){let e=(0,i.useRef)([]),t=(0,i.useRef)((t,r)=>{let i=setTimeout(t,r);return e.current.push(i),i});return(0,i.useEffect)(()=>{let t=e.current;return()=>{t.forEach(e=>{clearTimeout(e)})}},[]),t.current}}}]);
//# sourceMappingURL=9385-326c7638fc84921a.js.map