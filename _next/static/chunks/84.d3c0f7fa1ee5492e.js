"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[84],{20084:function(e,t,n){n.r(t),n.d(t,{ImageLightbox:function(){return b},ImageLightboxSearchGPT:function(){return N},ImageResultModal:function(){return M}});var r=n(57098),i=n(59144),s=n(11433),l=n(95204),a=n(92745),o=n(43703),c=n(48175),u=n(87230),x=n(66583),m=n(19841),d=n(88600),g=n(21389),h=n(65925),p=n.n(h),f=n(92379),w=n(15478),j=n(71868),v=n(62789),y=n(651);function b(e){let{clientThreadId:t}=e,n=(0,v.Kp)();if(!n)return null;let{image:r,source:i,turnIndex:s}=n;return null==i||null==t||null==s?(0,y.jsx)(M,{image:r}):i===v.zo.Turn?(0,y.jsx)(C,{image:r,clientThreadId:t,turnIndex:s}):void 0}function N(){let e=(0,v.Kp)();if(!e)return null;let{image:t,source:n}=e;if(null==n)return(0,y.jsx)(M,{image:t});switch(n){case v.zo.ImagesTab:return(0,y.jsx)(k,{image:t});case v.zo.Turn:return(0,y.jsx)(I,{image:t})}}function k(e){let{image:t}=e,{imageResults:n}=(0,j.i)();return(0,y.jsx)(M,{image:t,group:n,groupSource:v.zo.ImagesTab})}function I(e){let{image:t}=e,{imageResults:n}=(0,j.HQ)();return(0,y.jsx)(M,{image:t,group:n,groupSource:v.zo.Turn})}function C(e){let{image:t,clientThreadId:n,turnIndex:r}=e,i=(0,a.xC)(n,r);return(0,y.jsx)(M,{image:t,group:i,turnIndex:r,groupSource:v.zo.Turn})}let E=w.Z.div`grow flex items-start p-8`;function T(e){let{title:t,urls:n}=e,r=n[0],{data:i,isError:s}=(0,j.Fw)(r);if(0===n.length)return;if(s)return n.length>1?(0,y.jsx)(T,{title:t,urls:n.slice(1)}):(0,y.jsx)("div",{className:"flex h-full grow items-center justify-center",children:(0,y.jsx)("div",{className:"flex h-96 w-96 items-center justify-center bg-white/10",children:(0,y.jsx)(l.Z,{className:"h-12 w-12 text-token-text-tertiary"})})});let a="max-w-[100vw] sm:max-w-[calc(100vw-10rem)] object-scale-down h-full";return null!=i?(0,y.jsx)(d.E.img,{src:r,alt:t,initial:{opacity:0},animate:{opacity:1},className:a}):(0,y.jsx)("div",{className:(0,m.default)("w-full animate-pulse bg-white/10",a)})}let z={enter:e=>({x:e>0?1e3:-1e3,opacity:0}),center:{zIndex:1,x:0,opacity:1},exit:e=>({zIndex:0,x:e<0?1e3:-1e3,opacity:0})},_=(e,t)=>Math.abs(e)*t;function M(e){let{image:t,group:n,groupSource:l,turnIndex:a}=e,m=(0,u.d)(t?.url??""),h=(0,v.Kp)(),w=h?.mountDirection;(0,f.useEffect)(()=>{window?.history?.state?.imageModalOpen||window.history.pushState({imageModalOpen:!0},"",window.location.href);let e=()=>{window?.history?.state?.imageModalOpen||v.Tn.setCurrentImage(void 0)};return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)},[]);let j=()=>{window.history.go(-1),v.Tn.setCurrentImage(void 0)},b=n?.findIndex(e=>p()(t,e)),N=n?.length??1,k=null!=b&&N>1,I=(0,f.useCallback)(()=>{k&&null!=n&&v.Tn.setCurrentImage({image:n[(b+1)%n.length],source:l,mountDirection:v.E3.FromRight,turnIndex:a})},[n,k,b,l,a]),C=(0,f.useCallback)(()=>{k&&null!=n&&v.Tn.setCurrentImage({image:n[(b-1+n.length)%n.length],source:l,mountDirection:v.E3.FromLeft,turnIndex:a})},[n,k,b,l,a]);return(0,f.useEffect)(()=>(0,o.eR)(document,{keydown:e=>{"ArrowRight"===e.key?I():"ArrowLeft"===e.key&&C()}}),[I,C]),(0,y.jsx)(g.M,{children:t&&(0,y.jsx)(i.Z.Root,{isOpen:!0,onClose:j,children:(0,y.jsxs)(x.VY,{className:"flex h-full w-full flex-col bg-black/95",children:[(0,y.jsxs)("div",{className:"relative flex w-full grow justify-center overflow-hidden",children:[(0,y.jsxs)("div",{className:"absolute right-4 top-4 flex items-center sm:right-6 sm:top-6",children:[k&&(0,y.jsxs)("div",{className:"shrink-0 px-4 py-2 text-token-text-tertiary",children:[b+1," / ",N]}),(0,y.jsx)("button",{onClick:e=>{e.stopPropagation(),j()},className:"flex h-9 w-9 items-center justify-center outline-none hover:opacity-70",children:(0,y.jsx)(s.tPq,{className:"h-6 w-6 text-gray-400"})})]}),N>1&&(0,y.jsx)(E,{className:"cursor-w-resize",onClick:e=>{e.stopPropagation(),C()}}),(0,y.jsx)(g.M,{initial:!1,custom:w,children:(0,y.jsx)(d.E.div,{variants:z,custom:w??0,className:"absolute bottom-4 top-24",initial:"enter",animate:"center",exit:"exit",transition:{x:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2}},drag:N>1&&"x",dragConstraints:{left:0,right:0},dragElastic:1,onDragEnd:(e,t)=>{let{offset:n,velocity:r}=t,i=_(n.x,r.x);i<-1e4?I():i>1e4&&C()},children:(0,y.jsx)(T,{title:t.title,urls:[t.content_url.replace(/^http:\/\//,"https://"),t.thumbnail_url]})},b)}),N>1&&(0,y.jsx)(E,{className:"cursor-e-resize",onClick:e=>{e.stopPropagation(),I()}})]}),(0,y.jsx)("a",{href:t.url,target:"_blank",rel:"noopener",className:"flex min-h-20 w-full shrink-0 items-center gap-8 px-6 pb-3 pt-8 text-sm hover:opacity-70 sm:px-8 sm:pb-8",children:(0,y.jsxs)("div",{className:"flex grow flex-col gap-0.5 overflow-hidden pr-2",children:[(0,y.jsxs)("div",{className:"flex items-center gap-2 truncate text-token-text-tertiary",children:[(0,y.jsx)(r.Z,{url:t.content_url,className:"rounded",size:16}),m.data??(0,c.p)(t.url)]}),(0,y.jsx)("div",{className:"truncate font-semibold text-white",children:t.title})]})})]})})})}}}]);
//# sourceMappingURL=84.d3c0f7fa1ee5492e.js.map