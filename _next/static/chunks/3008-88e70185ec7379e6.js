"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3008],{64216:function(e,t,n){var o=n(79746),r=n(11550),i=n(47563),s=n(651);t.Z=e=>{let{label:t,value:n,onCopied:a}=e,c=()=>{(0,o.v)(n),a()};return(0,s.jsxs)("div",{className:"flex flex-col space-y-2",children:[void 0!==t&&(0,s.jsx)("label",{className:"font-semibold",children:t}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{onClick:c,className:"w-full cursor-pointer break-all rounded-lg bg-token-main-surface-tertiary px-4 py-2 font-mono text-sm text-token-text-primary",children:n}),(0,s.jsx)(r.z,{color:"ghost",onClick:c,icon:i.TIy})]})]})}},88491:function(e,t,n){n.d(t,{Z:function(){return P}});var o,r=n(98601),i=n(99333),s=n(11550),a=n(64216),c=n(6440),l=n(59144),d=n(36792),u=n(47563),f=n(24434),m=n(24740),p=n(2721),g=n(42420),h=n(56032),y=n(92379),b=n(75172),v=n(62984),x=n(68306),j=n(12310),k=n(651);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var M=((o=M||{})[o.INITIAL=0]="INITIAL",o[o.PENDING=1]="PENDING",o[o.FINAL=2]="FINAL",o);function P(e){let{workspaceId:t,isOpen:n,onClose:o,currentDomain:r,domains:s=[],showUnverifiedDomains:c=!1,onVerifyDomain:d}=e,u=(0,b.Z)(),{mutateAsync:x,isPending:j}=function(e){let t=(0,g.NL)();return(0,h.D)({mutationFn:t=>{let{hostname:n}=t;return p.Z.addDomainToWorkspace(e,n)},onSuccess:()=>{t.invalidateQueries({queryKey:["workspace/identity",e]}),t.invalidateQueries({queryKey:["builderProfile"]})},onError:e=>{m.m.danger(e.message)}})}(t),{mutateAsync:w,isPending:P}=function(e){let t=(0,g.NL)();return(0,h.D)({mutationFn:t=>{let{domainId:n}=t;return p.Z.checkDomainForWorkspace(e,n)},onSuccess:()=>{t.invalidateQueries({queryKey:["workspace/identity",e]}),t.invalidateQueries({queryKey:["builderProfile"]})},onError:e=>{m.m.danger(e.message)}})}(t),{0:N,1:D}=(0,y.useState)(null!=r?r:void 0),{0:S,1:Z}=(0,y.useState)(null==r?void 0:r.hostname),{0:I,1:A}=(0,y.useState)((null==r?void 0:r.status)===void 0?M.INITIAL:(null==r?void 0:r.status)===i.pT.PENDING?M.PENDING:M.FINAL),L=()=>{r||(D(void 0),A(M.INITIAL))},E=async()=>{if(void 0===S)return;let e=s.find(e=>e.hostname===S&&e.status===i.pT.PENDING);if(e)D(e),A(M.PENDING);else{let e=await x({hostname:S});"id"in e&&D(e),A(M.PENDING)}},B=(0,k.jsx)(l.Z.Button,{title:u.formatMessage(C.check),color:"primary",disabled:(null==N?void 0:N.id)===void 0||P,onClick:async()=>{if(null!=N&&N.id){let e=await w({domainId:N.id});"error"in e&&m.m.danger(u.formatMessage(C.domainCheckError,{message:e.error.message})),"id"in e&&(d&&d(e),e.status===i.pT.VERIFIED&&A(M.FINAL))}}}),R=(0,k.jsx)(l.Z.Button,{title:u.formatMessage(C.submit),color:"primary",disabled:void 0===S||j,onClick:E}),_=(0,k.jsx)(l.Z.Button,{title:u.formatMessage(C.done),color:"primary",onClick:()=>{L(),o()}});return(0,k.jsxs)(f.Z,{isOpen:n,onClose:()=>{L(),o()},type:"success",className:"text-token-text-secondary",title:u.formatMessage(I===M.INITIAL?C.newTitle:C.editTitle),primaryButton:I===M.INITIAL?R:I===M.PENDING?B:_,secondaryButton:(0,k.jsx)(l.Z.Button,{title:u.formatMessage(C.cancel),color:"secondary",onClick:()=>{L(),o()}}),children:[I===M.INITIAL&&(0,k.jsx)(T,{hostname:S,onSetHostname:Z,onSubmit:E,unverifiedDomains:c?s:[],onVerifyDomain:e=>{A(M.PENDING),D(e)},workspaceId:t}),I===M.PENDING&&(0,k.jsxs)("div",{className:"flex flex-col gap-3",children:[u.formatMessage(C.verificationTokenMessage,{hostname:null==N?void 0:N.hostname}),(null==N?void 0:N.dns_verification_token_string)&&(0,k.jsx)(a.Z,{value:N.dns_verification_token_string,onCopied:()=>{m.m.success(u.formatMessage(C.copiedTXTRecordToClipboard),{duration:3})}}),(0,k.jsx)(v.Z,O({},C.verificationTokenFooter))]}),I===M.FINAL&&(0,k.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,k.jsx)(v.Z,O(O({},C.successfulVerification),{},{values:{hostname:null==N?void 0:N.hostname}})),(null==N?void 0:N.dns_verification_token_string)&&(0,k.jsx)(a.Z,{value:N.dns_verification_token_string,onCopied:()=>{m.m.success(u.formatMessage(C.copiedTXTRecordToClipboard),{duration:3})}})]})]})}function N(e){let{unverifiedDomains:t,onVerifyDomain:n,workspaceId:o}=e,{mutateAsync:r}=(0,j.Bd)(o);return(0,k.jsxs)(d.Z.Root,{fixed:!0,size:"compact",className:"mb-6 border-b border-token-border-light",children:[(0,k.jsxs)(d.Z.Header,{children:[(0,k.jsx)(d.Z.HeaderCell,{children:(0,k.jsx)(v.Z,O({},C.unverifiedDomainsTableHeader))}),(0,k.jsx)(d.Z.HeaderCell,{textAlign:"right"})]}),t.map(e=>(0,k.jsxs)(d.Z.Row,{children:[(0,k.jsx)(d.Z.Cell,{children:e.hostname}),(0,k.jsx)(d.Z.Cell,{textAlign:"right",children:(0,k.jsxs)("div",{className:"flex gap-2",children:[(0,k.jsx)(s.z,{color:"secondary",size:"small",onClick:()=>n(e),children:(0,k.jsx)(v.Z,O({},C.verifyDomainButton))}),(0,k.jsx)(s.z,{color:"secondary",size:"small",onClick:()=>r({domainId:e.id}),icon:u.XHJ})]})})]},e.id))]})}function T(e){let{hostname:t,onSetHostname:n,onSubmit:o,unverifiedDomains:r,onVerifyDomain:i,workspaceId:s}=e,a=(0,b.Z)();return(0,k.jsxs)(k.Fragment,{children:[r&&r.length>0&&(0,k.jsx)(N,{workspaceId:s,unverifiedDomains:r,onVerifyDomain:i}),(0,k.jsx)("form",{onSubmit:e=>{e.preventDefault(),o()},children:(0,k.jsxs)("div",{className:"mb-4",children:[(0,k.jsx)("label",{className:"mb-2 flex items-center text-sm font-semibold",children:(0,k.jsx)(v.Z,O({},C.domainInput))}),(0,k.jsx)(c.Z,{name:"hostname",placeholder:a.formatMessage(C.placeholder),value:null!=t?t:"",onChange:e=>{n(e.target.value)}})]})})]})}let C=(0,x.vU)({newTitle:{id:"domainModal.newTitle.0",defaultMessage:"Verify a new domain"},editTitle:{id:"domainModal.editTitle",defaultMessage:"Manage Domain"},submit:{id:"domainModal.submit",defaultMessage:"Submit"},check:{id:"domainModal.check",defaultMessage:"Check"},done:{id:"domainModal.done",defaultMessage:"Done"},cancel:{id:"domainModal.cancel",defaultMessage:"Cancel"},domainInput:{id:"domainModal.domainInput.0",defaultMessage:"Add a new domain"},placeholder:{id:"domainModal.placeholder",defaultMessage:"openai.com"},domainCheckError:{id:"domainModal.domainCheckError",defaultMessage:"Your domain could not be verified: {message}"},verificationTokenMessage:{id:"domainModal.verificationTokenMessage",defaultMessage:"To verify ownership of {hostname}, navigate to your DNS provider and add a TXT record with this value:"},verificationTokenFooter:{id:"domainModal.verificationTokenFooter",defaultMessage:"Then, check the record to complete the verification."},successfulVerification:{id:"domainModal.successfulVerification.0",defaultMessage:'Your domain, "{hostname}" has been successfully verified'},copiedTXTRecordToClipboard:{id:"domainModal.copiedTXTRecordToClipboard",defaultMessage:"Copied DNS TXT record to clipboard"},verifyDomainButton:{id:"domainModal.verifyDomainButton",defaultMessage:"Verify"},unverifiedDomainsTableHeader:{id:"domainModal.unverifiedDomainsTableHeader",defaultMessage:"Your unverified domains"}})},81522:function(e,t,n){n.d(t,{B$:function(){return u},Yk:function(){return d},hx:function(){return f}});var o=n(98601),r=n(68029),i=n(68810);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let c=(0,r.M)(()=>({activeRequests:{}})),l=e=>(0,i.oR)(c,e);function d(e){return l(t=>null!=t.activeRequests[e])}function u(){return l(e=>Object.keys(e.activeRequests).length>0)}let f={addRequest(e,t){c.setState(n=>({activeRequests:a(a({},n.activeRequests),{},{[e]:{id:e,abortController:t}})}))},removeRequest(e){c.setState(t=>{let n=a({},t.activeRequests);return delete n[e],{activeRequests:n}})},clear(){c.setState({activeRequests:{}})},abortRequest(e){let{activeRequests:t}=c.getState();return null!=t[e]&&(t[e].abortController.abort(),f.removeRequest(e),!0)},abortRequests(e){let{activeRequests:t}=c.getState(),n=a({},t);for(let t of e)null!=n[t]&&(n[t].abortController.abort(),delete n[t]);c.setState({activeRequests:n})},abortAllRequests(){let{activeRequests:e}=c.getState();Object.values(e).forEach(e=>{e.abortController.abort()}),f.clear()}}},83036:function(e,t,n){n.d(t,{Z:function(){return p}});var o,r=n(2346),i=n(42110),s=n(10449);n(82363);var a=n(88667),c=n(92379),l=n(62984),d=n(15478),u=n(47563),f=n(651);let m=d.Z.div(o||(o=(0,r.Z)(["text-sm text-token-text-tertiary"])));function p(e){let t,n,{gizmo:o,builderName:r,builderUrl:s,className:c,socials:d,hideLink:p=!1}=e,{value:h}=(0,a.sB)("2256850471");o&&"gizmo"in o?(t=o.gizmo.author.display_name,n=o.gizmo.author.link_to):(t=r,n=s),(""===t||null==t)&&(t="community builder");let y=null==d?void 0:d.filter(e=>e.verified),b=(0,f.jsxs)("div",{className:"w-48 space-y-4 text-sm",children:[n&&(0,f.jsxs)("div",{className:"flex w-full flex-row items-center justify-between",children:[(0,f.jsxs)("div",{className:"flex flex-row items-center space-x-2 text-token-text-primary",children:[(0,f.jsx)(u.n9J,{className:"icon-md"}),(0,f.jsx)("span",{children:(0,f.jsx)(l.Z,{id:"gizmo.author.websiteLabel",defaultMessage:"Website"})})]}),(0,f.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:n,className:"text-token-text-tertiary  hover:cursor-pointer",children:(0,f.jsx)(u.Pfi,{className:"icon-sm"})})]}),h&&(null==y?void 0:y.map((e,t)=>e.verified?(0,f.jsx)(i.lD,{socialData:e},t):null)),(0,f.jsxs)("div",{className:"text-xs text-token-text-tertiary",children:[(n||y&&y.length>0)&&(0,f.jsx)("hr",{className:"my-2 border-token-border-light"}),(0,f.jsx)(l.Z,{id:"gizmo.author.cannotViewLabel",defaultMessage:"The builder of this GPT cannot view your conversations."})]})]});return(0,f.jsxs)("div",{className:"flex flex-row items-center space-x-1",children:[(0,f.jsx)(m,{className:c,children:(0,f.jsx)(l.Z,{id:"gizmo.author.byLabel",defaultMessage:"By {displayName}",values:{displayName:t}})}),!p&&(0,f.jsx)(g,{socials:d,website:n,children:b})]})}function g(e){let{website:t,socials:n,children:o}=e,{0:r,1:i}=(0,c.useState)(!1),a=[];t&&a.push((0,f.jsx)(u.n9J,{className:"icon-xs text-token-text-secondary"})),n&&n.forEach(e=>{e.verified&&("twitter"===e.type?a.push((0,f.jsx)(u.suT,{className:"icon-xs text-token-text-secondary"})):"linkedin"===e.type?a.push((0,f.jsx)(u.O9,{className:"icon-xs text-token-text-secondary"})):"github"===e.type&&a.push((0,f.jsx)(u.C2$,{className:"icon-xs text-token-text-secondary"})))});let l=a.length-2;return a=a.slice(0,2),l>0&&a.push((0,f.jsxs)("span",{className:"text-xs font-semibold text-token-text-secondary",children:["+",l]},"overflow")),(0,f.jsx)(s.fC,{open:r,onOpenChange:i,children:(0,f.jsxs)("div",{onPointerLeave:()=>i(!1),children:[(0,f.jsx)(s.xz,{asChild:!0,children:(0,f.jsx)("div",{onPointerEnter:()=>i(!0),children:a.length>0?(0,f.jsx)("div",{className:"flex items-center gap-1 rounded-xl bg-token-main-surface-secondary px-2 py-1",children:a}):(0,f.jsx)(u.tBG,{className:"icon-xs text-token-text-secondary"})})}),(0,f.jsx)(s.VY,{side:"top",sideOffset:8,align:"center",className:"z-10 rounded-lg bg-token-main-surface-primary p-4 drop-shadow-md",children:o})]})})}},12128:function(e,t,n){n.d(t,{M:function(){return l},Z:function(){return c}});var o=n(25162),r=n(47563),i=n(39004),s=n(10080),a=n(651);function c(e){let{isFirstParty:t,src:n,alt:i,className:s}=e;return(0,a.jsx)("div",{className:s,children:null!=n?(0,a.jsx)("div",{className:"gizmo-shadow-stroke overflow-hidden rounded-full",children:(0,a.jsx)("img",{src:n,className:"h-full w-full bg-token-main-surface-secondary",alt:null!=i?i:"GPT",width:80,height:80})}):(0,a.jsx)("div",{className:"gizmo-shadow-stroke relative flex h-full items-center justify-center rounded-full bg-token-main-surface-primary text-token-text-primary",children:t?(0,a.jsx)(o.nI,{className:"h-2/3 w-2/3"}):(0,a.jsx)(r.uy2,{className:"h-2/3 w-2/3 text-gray-400"})})})}function l(e){var t,n;let{gizmoId:o,className:r}=e,{data:l}=(0,i.b9)(o);return(0,a.jsx)(c,{src:null==l?void 0:l.gizmo.display.profile_picture_url,isFirstParty:null!==(t=null==l||null===(n=l.gizmo.tags)||void 0===n?void 0:n.includes(s.U9.FirstParty))&&void 0!==t&&t,className:r})}},42110:function(e,t,n){n.d(t,{lD:function(){return O},s6:function(){return M},tw:function(){return w}});var o=n(98601),r=n(88491),i=n(12310),s=n(11550),a=n(98095),c=n(47563),l=n(99555),d=n(81690),u=n(97537),f=n(93951),m=n(54089),p=n(42420),g=n(56032),h=n(19841),y=n(92379),b=n(62984),v=n(68306),x=n(651);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function w(e){var t,n;let{selectedDomain:o,verifiedDomains:s,domains:l,onChangeDomain:d}=e,{0:u,1:p}=(0,y.useState)(!1),g=s.length>0,h=null===(t=(0,f.t)())||void 0===t?void 0:t.id,v=null===(n=(0,f.t)())||void 0===n?void 0:n.isEnterprisey(),{mutateAsync:j}=(0,i.Bd)(h);return(0,x.jsxs)("div",{className:"font-normal",children:[(0,x.jsxs)(a.Z.Root,{children:[(0,x.jsx)(m.xz,{children:(0,x.jsxs)("span",{className:"flex items-center gap-2 py-2",children:[null!=o?o:(0,x.jsx)(b.Z,k({},P.selectADomain)),(0,x.jsx)(c.T2M,{className:"icon-md"})]})}),(0,x.jsx)(a.Z.Portal,{children:(0,x.jsxs)(a.Z.Content,{children:[(0,x.jsx)(a.Z.RadioGroup,{value:o,onValueChange:e=>{e!==o&&d(e)},children:s.map(e=>{let{id:t,hostname:n}=e;return(0,x.jsx)(a.Z.RadioItem,{value:n,children:(0,x.jsxs)("div",{className:"flex flex-row",children:[(0,x.jsx)("span",{children:n}),(0,x.jsx)("span",{onClick:()=>{j({domainId:t}),d("")},children:(0,x.jsx)(c.XHJ,{className:"icon-sm fixed right-4"})})]})},t)})}),g&&(0,x.jsx)(a.Z.Separator,{}),(0,x.jsx)(a.Z.Item,{onClick:()=>{p(!0)},icon:c.Vz5,children:(0,x.jsx)(b.Z,k({},P.addDomain))})]})})]}),h&&!v&&(0,x.jsx)(r.Z,{domains:l,isOpen:u,onClose:()=>p(!1),workspaceId:h,showUnverifiedDomains:!0,onVerifyDomain:e=>{d(e.hostname)}})]})}function O(e){let{socialData:t}=e,{type:n,display_name:o,verified_data:r}=t,i="twitter"===n?c.suT:"linkedin"===n?c.O9:"github"===n?c.C2$:null;return i?(0,x.jsxs)("div",{className:"flex w-full flex-row items-center justify-between",children:[(0,x.jsxs)("div",{className:"flex flex-row items-center space-x-2 text-token-text-primary",children:[i({className:"icon-md"}),(0,x.jsx)("span",{children:o})]}),(null==r?void 0:r.link_to)&&(0,x.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:r.link_to,className:"text-sm text-token-text-tertiary  hover:cursor-pointer",children:(0,x.jsx)(c.Pfi,{className:"icon-sm"})})]}):null}function M(e){let{socialData:t,icon:n}=e,{id:o,type:r,display_name:i,verified:a,verified_data:f}=t,{0:m,1:v}=(0,y.useState)(!1),j=function(){let e=(0,p.NL)();return(0,g.D)({mutationFn:e=>{let{verifierType:t}=e;return l.U.unverifySocialAuth(t)},onSuccess:()=>{e.refetchQueries({queryKey:["builderProfile"]})}})}();return(0,x.jsxs)("div",{className:"flex flex-row items-center justify-between space-y-1",children:[(0,x.jsxs)("div",{className:(0,h.default)("flex items-center space-x-2"),children:[(0,x.jsx)(n,{className:"icon-sm"}),(0,x.jsx)("span",{children:i}),a&&(null==f?void 0:f.username)&&(0,x.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:f.link_to,className:"text-sm text-token-text-tertiary hover:cursor-pointer",children:null==f?void 0:f.username})]}),a?(0,x.jsx)("div",{className:"py-1 font-semibold hover:cursor-pointer",onClick:()=>{j.mutate({verifierType:r})},children:j.isPending?(0,x.jsx)(u.Z,{}):(0,x.jsx)(c.tPq,{className:"icon-sm text-token-text-tertiary"})}):(0,x.jsx)(s.z,{size:"small",color:"secondary",loading:m,onClick:async()=>{v(!0),await (0,d.Up)({id:o},"#settings/BuilderProfile"),v(!1)},children:(0,x.jsx)(b.Z,k({},P.verify))})]})}let P=(0,v.vU)({verify:{defaultMessage:"Add",id:"GizmoSocialRow.add"},addDomain:{id:"GizmoSocialRow.addDomain",defaultMessage:"Verify new domain"},selectADomain:{id:"GizmoSocialRow.selectADomain",defaultMessage:"Select a domain"}})},81690:function(e,t,n){n.d(t,{Up:function(){return i},doConnectorOauthRedirect:function(){return s},wP:function(){return c},wW:function(){return a}});var o=n(16757),r=n(2721);async function i(e,t){let n="".concat("https://chat.openai.com","/aip/").concat(e.id,"/oauth/callback"),o=await r.Z.pluginOauthRedirect(e.id,n,t);window.location.href=o.redirect_uri}async function s(e,t,n,o){let i=await r.Z.connectorOauthRedirect(e.id,n,t,o);window.location.href=i.redirect_uri}function a(e){switch(e){case o.NA.Link:return"link_paste_popover";case o.NA.Picker:return"file_upload_menu"}}async function c(e){await r.Z.deleteUserConnectedApp(e),window.location.reload()}},24241:function(e,t,n){n.d(t,{MO:function(){return m},aM:function(){return p},wT:function(){return f}});var o=n(98601),r=n(93951),i=n(53132),s=n(19856),a=n(92379),c=n(2721),l=n(41987);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let f="conversationHistory";function m(){var e;let t=(0,r.hz)(),n=null!==(e=null==t?void 0:t.includes(l.Ud))&&void 0!==e&&e,o=(0,r.t)(),d=!n&&!!(null!=o&&o.data),{data:m,fetchNextPage:p,hasNextPage:g,isInitialLoading:h,isFetchingNextPage:y,isError:b}=(0,s.N)({queryKey:[f],queryFn:e=>{let{pageParam:t}=e;return c.Z.getConversations({offset:t,limit:28})},initialPageParam:0,getNextPageParam:e=>{let t=e.offset+e.limit;return t<e.total?t:void 0},enabled:d}),v=(0,a.useMemo)(()=>{var e;return null!==(e=null==m?void 0:m.pages.flatMap(e=>e.items))&&void 0!==e?e:[]},[m]),{setStatusMap:x,getState:j}=i.p.useStore();return(0,a.useEffect)(()=>{if(v.length){let{statusMap:e}=j();x(u(u({},v.reduce((e,t)=>(e[t.id]=t.async_status,e),{})),e))}},[v,x,j]),{data:m,conversations:v,fetchNextPage:p,hasNextPage:g,isLoading:h,isFetchingNextPage:y,isError:d&&b}}function p(e){e.invalidateQueries({queryKey:[f]})}},53132:function(e,t,n){n.d(t,{p:function(){return c}});var o=n(98601),r=n(99333),i=n(25579);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}class c extends(0,i.R)()(()=>({statusMap:{}})){constructor(){super(...arguments),(0,o.Z)(this,"setStatusMap",e=>{this.setState({statusMap:e})}),(0,o.Z)(this,"setConversationStatus",(e,t)=>{this.setState(n=>({statusMap:a(a({},n.statusMap),{},{[e]:t})}))})}}(0,o.Z)(c,"selectStatusMap",e=>e),(0,o.Z)(c,"selectConversationStatus",e=>t=>e.statusMap[t]),(0,o.Z)(c,"hasUnreadConversations",e=>Object.values(e.statusMap).some(e=>e===r.w2.FINISHED))},49763:function(e,t,n){n.d(t,{V:function(){return s}});var o=n(98601),r=n(36560),i=n.n(r);class s{constructor(){(0,o.Z)(this,"emitter",new(i())),this.emitter.setMaxListeners(1e3)}on(e,t){this.emitter.on(e,t)}off(e,t){this.emitter.off(e,t)}publish(e){this.emitter.emit(e.kind,e),this.emitter.emit("anyEvent",e)}}},13391:function(e,t,n){n.d(t,{n:function(){return D},A3:function(){return T},yx:function(){return A},JS:function(){return I}});var o,r=n(98601),i=n(15858),s=n(70879),a=n(99976),c=n(61619),l=n(79746),d=n(82363),u=n(91530),f=n.n(u),m=n(92379),p=n(68306),g=n(16757),h=n(24740),y=n(92745),b=n(31438),v=n(49763),x=n(22433),j=n(45248);let k=m.useLayoutEffect;function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}let O=/```.*?\n([\s\S]+?)\n?```[^`]*$/gms;var M=((o=M||{}).Core="Core",o.Chat="Chat",o.Settings="Settings",o);let P=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({Mod:"mod",Comma:","},i.s),N={[P.Mod]:/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)?"⌘":"Ctrl",[P.Comma]:",",[P.Enter]:"⏎",[P.Escape]:"Esc",[P.ArrowUp]:"↑",[P.ArrowDown]:"↓",[P.ArrowLeft]:"←",[P.ArrowRight]:"→",[P.Backspace]:"⌫",[P.Delete]:"⌦",[P.Tab]:"⇥",[P.Control]:"Ctrl",[P.Shift]:"Shift"},T=e=>e.map(e=>{var t;return null!==(t=N[e])&&void 0!==t?t:e}),C=(0,p.vU)({newChat:{id:"keyboardActions.newChat",defaultMessage:"Open new chat"},focusPromptTextarea:{id:"keyboardActions.focusPromptTextarea",defaultMessage:"Focus chat input"},copyLastCodeBlock:{id:"keyboardActions.copyLastCodeBlock",defaultMessage:"Copy last code block"},copyLastResponse:{id:"keyboardActions.copyLastResponse",defaultMessage:"Copy last response"},toggleCustomInstructions:{id:"keyboardActions.toggleCustomInstructions",defaultMessage:"Set custom instructions"},navigationToggle:{id:"keyboardActions.navigationToggle",defaultMessage:"Toggle sidebar"},deleteChat:{id:"keyboardActions.deleteChat",defaultMessage:"Delete chat"},archiveChat:{id:"keyboardActions.archiveChat",defaultMessage:"Archive chat"},toggleKeyboardActions:{id:"keyboardActions.toggleKeyboardActions",defaultMessage:"Show shortcuts"}}),D=new v.V,S=e=>{let{resetThreadAction:t,clientThreadId:n}=e;return[{key:"newChat",action:t||f(),actionMessageDescriptor:C.newChat,group:M.Core,keyboardBinding:[P.Mod,P.Shift,"o"],altKeyboardBindings:[[P.Mod,"k"]]},{key:"focusPromptTextarea",action:s.go,actionMessageDescriptor:C.focusPromptTextarea,group:M.Chat,keyboardBinding:[P.Shift,P.Escape]},{key:"copyLastCodeBlock",action:()=>{if(null!=n){let e=y.tQ.getThreadCurrentLeafId(n),t=y.tQ.getThreadConversationTurns(n,e);for(let e=t.length-1;e>=0;e--){let{messages:n}=t[e],o=[...n.reduce((e,t)=>null==t.err&&t.message.author.role===g.uU.Assistant&&"all"===t.message.recipient?e+(e?"\n\n":"")+(0,x.RR)(t.message):e,"").matchAll(O)],r=o.length?o[o.length-1][1]:null;if(null!=r){(0,l.v)(r).then(()=>{h.m.success("Copied code block to clipboard")});break}}}},actionMessageDescriptor:C.copyLastCodeBlock,group:M.Chat,keyboardBinding:[P.Mod,P.Shift,";"],altKeyboardBindings:[[P.Mod,P.Shift,":"]]},{key:"copyLastResponse",action:()=>{null!=n&&y.tQ.copyLastMessageToClipboard(n,"keyboard").then(()=>{h.m.success("Last response copied to clipboard")})},actionMessageDescriptor:C.copyLastResponse,group:M.Chat,keyboardBinding:[P.Mod,P.Shift,"c"]},{key:"toggleCustomInstructions",action:()=>b.vm.toggleModal(b.B.UserContext),actionMessageDescriptor:C.toggleCustomInstructions,group:M.Settings,keyboardBinding:[P.Mod,P.Shift,"i"]},{key:"navigationToggle",action:()=>b.vm.toggleDesktopNavCollapsed(),actionMessageDescriptor:C.navigationToggle,group:M.Core,keyboardBinding:[P.Mod,P.Shift,"s"]},{key:"deleteChat",action:()=>{if(n){let e=y.tQ.getServerThreadId(n);e&&D.publish({kind:"deleteChat",serverThreadId:e})}},actionMessageDescriptor:C.deleteChat,group:M.Chat,keyboardBinding:[P.Mod,P.Shift,P.Backspace],altKeyboardBindings:[[P.Mod,P.Shift,P.Delete]]},{key:"toggleKeyboardActions",action:()=>b.vm.toggleModal(b.B.KeyboardActions),actionMessageDescriptor:C.toggleKeyboardActions,group:M.Settings,keyboardBinding:[P.Mod,"/"]}]},Z=e=>(function(e,t,n){let o=e.map(e=>{let{keyboardBinding:t}=e,n=t.join("+");if(e.altKeyboardBindings){n=[n];let t=e.altKeyboardBindings.map(e=>e.join("+"));n=n.concat(t)}return(0,j.ZP)(n,{byKey:!0})});k(()=>{if((null==n?void 0:n.enabled)===!1)return;let r=n=>{if(!n.repeat)for(let r=0;r<o.length;r++)o[r](n)&&(void 0===e[r].enabled||e[r].enabled)&&(n.preventDefault(),t(e[r]),e[r].action())},i=e=>{void 0!==e.key&&r(e)},s=document;return s.addEventListener("keydown",i),()=>{s.removeEventListener("keydown",i)}},[e,n])})(e,e=>{a.A.logEvent(c.M.keyboardShortcut,{keyboardActionKey:e.key}),d.U.addAction("chatgpt_keyboard_shortcut",{keyboardActionKey:e.key})},{enabled:!0}),I=function(){let{resetThreadAction:e,clientThreadId:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,m.useMemo)(()=>S({resetThreadAction:e,clientThreadId:t}).filter(e=>{let{enabled:t=!0}=e;return t}),[t,e])},A=e=>{let{resetThreadAction:t,clientThreadId:n}=e;Z(I({resetThreadAction:t,clientThreadId:n}))}},27393:function(e,t,n){n.d(t,{Ef:function(){return p},UG:function(){return g},dG:function(){return l},gb:function(){return h},mK:function(){return m}});var o,r=n(98601),i=n(37671),s=n(82363),a=n(92379);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}let l=((o={}).SonicHome="sonic.web.home",o.SonicServer="sonic.ssr.search",o.ChatPageLoad="chatgpt.web.pageLoad",o.CompletionRequest="chatgpt.web.completionRequest",o.ProofOfWork="chatgpt.web.proofOfWork",o);class d{constructor(e,t){var n,o;(0,r.Z)(this,"expectedTimingLogTimeouts",{}),(0,r.Z)(this,"startMs",-1),(0,r.Z)(this,"lastLogMs",-1),(0,r.Z)(this,"loggedTimings",new Set),(0,r.Z)(this,"timingBlocks",{}),(0,r.Z)(this,"debug",!1),this.namespace=e,this.expectedTimingLogs=null!==(n=null==t?void 0:t.expectedTimingLogs)&&void 0!==n?n:[],this.debug=null!==(o=null==t?void 0:t.debug)&&void 0!==o&&o,this.reset()}reset(){for(let e of(this.startMs=this.lastLogMs=performance.now(),this.timingBlocks={},this.loggedTimings=new Set,Object.values(this.expectedTimingLogTimeouts)))clearTimeout(e);for(let e of(this.expectedTimingLogTimeouts={},this.expectedTimingLogs)){let t=setTimeout(()=>{var t;s.U.addAction("".concat(this.namespace,".").concat(e.name,".timed_out"),null!==(t=e.initializationInfo)&&void 0!==t?t:{})},e.expectedInMs);this.expectedTimingLogTimeouts[e.name]=t,this.debug&&console.debug("[DatadogProfiler] Expecting ".concat(this.namespace,".").concat(e.name," to be logged within ").concat(e.expectedInMs,"ms"))}}logTiming(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fromLastLog:!1};if(this.loggedTimings.has(e)){console.warn("[DatadogProfiler] Timing ".concat(this.namespace,".").concat(e," already logged"));return}let n=performance.now()-(t.fromLastLog?this.lastLogMs:this.startMs);s.U.addAction("".concat(this.namespace,".").concat(e),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({durationMs:n},t.context)),this.lastLogMs=performance.now(),this.loggedTimings.add(e),e in this.expectedTimingLogTimeouts&&(clearTimeout(this.expectedTimingLogTimeouts[e]),delete this.expectedTimingLogTimeouts[e]),this.debug&&console.debug("[DatadogProfiler] ".concat(this.namespace,".").concat(e,": ").concat(n,"ms"))}startBlock(e){this.timingBlocks[e]=performance.now()}endBlock(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{throwError:!0},n=this.timingBlocks[e];if(void 0===n&&t.throwError)throw Error("Block ".concat(e," not started"));let o=performance.now()-n;s.U.addAction("".concat(this.namespace,".").concat(e),{durationMs:o}),delete this.timingBlocks[e]}}let u={},f="__global__";function m(e){let{namespace:t,key:n=f,opts:o}=e;void 0===u[t]&&(u[t]={});let r=(0,i.S)(u[t]);return void 0!==r[n]&&s.U.addError("Profiler already exists for namespace ".concat(t," and key ").concat(n)),r[n]=new d(t,o),r[n]}function p(e){let{namespace:t,key:n=f}=e;if(void 0!==u[t])return(0,i.S)(u[t])[n]}function g(e){let{namespace:t,key:n=f}=e;if(void 0!==u[t]){let e=(0,i.S)(u[t]);delete e[n]}}function h(e){let{namespace:t,key:n=f,opts:o}=e,{0:r}=(0,a.useState)(()=>m({namespace:t,key:n,opts:o}));return r}}}]);
//# sourceMappingURL=3008-88e70185ec7379e6.js.map