"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5815],{96243:function(e,t,n){function r(e){return null!=e}n.d(t,{l:function(){return r},r:function(){return a}});let a=(e,t)=>e.includes(t)},38417:function(e,t,n){var r=n(48538),a=n(5443),i=n(92426),o=n(651);t.Z=e=>{let{label:t,value:n,onCopied:l}=e,s=()=>{(0,r.v)(n),l()};return(0,o.jsxs)("div",{className:"flex flex-col space-y-2",children:[void 0!==t&&(0,o.jsx)("label",{className:"font-semibold",children:t}),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("div",{onClick:s,className:"w-full cursor-pointer break-all rounded-lg bg-token-main-surface-tertiary px-4 py-2 font-mono text-sm text-token-text-primary",children:n}),(0,o.jsx)(a.z,{color:"ghost",onClick:s,icon:i.TIy})]})]})}},14910:function(e,t,n){n.d(t,{Dz:function(){return l},Rp:function(){return s},Yf:function(){return o}});var r=n(19841),a=n(92426),i=n(651);function o(e){let{className:t}=e;return(0,i.jsx)(a.ob9,{className:(0,r.default)(t,"rtl:-scale-x-100")})}function l(e){let{className:t}=e;return(0,i.jsx)(a.Y1T,{className:(0,r.default)(t,"rtl:-scale-x-100")})}function s(e){let{className:t}=e;return(0,i.jsx)(a.Y4O,{className:(0,r.default)(t,"rtl:-scale-x-100")})}},84281:function(e,t,n){n.d(t,{b:function(){return a}});var r=n(651);function a(){return(0,r.jsx)("hr",{className:"w-full border-token-border-xheavy"})}},41854:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(94521),a=n(17379),i=n(19841),o=n(651);let l=["className"];function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){let{className:t}=e,n=(0,a.Z)(e,l);return(0,o.jsx)("textarea",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({className:(0,i.default)("form-textarea w-full rounded-lg border border-token-border-light bg-token-main-surface-secondary text-sm text-token-text-primary focus:border-token-text-primary focus:shadow-none focus:outline-none focus:ring-token-text-primary",t)},n))}},18102:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(8359),a=n(19841),i=n(92379),o=n(92426),l=n(651);function s(e){let{onChange:t,enabled:n,label:s,disabled:c,withLockIcon:u=!1,lockIconOverride:d=null,size:f="normal",id:p}=e,m=(0,i.useCallback)(()=>{t(!n)},[n,t]);return(0,l.jsx)(r.fC,{id:p,checked:n,disabled:c,onCheckedChange:m,"aria-label":s,className:(0,a.default)("focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-token-text-secondary focus-visible:ring-offset-2 focus-visible:radix-state-checked:ring-black focus-visible:dark:ring-token-main-surface-primary focus-visible:dark:radix-state-checked:ring-green-600",c?"cursor-not-allowed opacity-50":"cursor-pointer","bg-gray-200 radix-state-checked:bg-black dark:border dark:border-token-border-medium dark:bg-transparent","relative shrink-0 rounded-full dark:radix-state-checked:border-green-600 dark:radix-state-checked:bg-green-600","normal"===f?"h-[20px] w-[32px]":"h-[19px] w-[30px]"),children:(0,l.jsx)(r.bU,{className:(0,a.default)("flex items-center justify-center rounded-full","transition-transform duration-100 will-change-transform ltr:translate-x-0.5 rtl:-translate-x-0.5","bg-white","normal"===f?"h-[16px] w-[16px] ltr:radix-state-checked:translate-x-[14px] rtl:radix-state-checked:translate-x-[-14px]":"h-[15px] w-[15px] ltr:radix-state-checked:translate-x-[13px] rtl:radix-state-checked:translate-x-[-13px]"),children:u?d||(0,l.jsx)(o.oVl,{className:"icon-xs dark:text-black"}):null})})}},21515:function(e,t,n){n.d(t,{wm:function(){return K},Xu:function(){return V}});var r=n(94521),a=n(71840),i=n(4702),o=n(27603),l=n(4408),s=n(92524),c=n(3028),u=n(35226),d=n(96053),f=n(14816),p=n(93747),m=n(15236),g=n(48580),h=n(19841),v=n(7290),x=n(556),b=n(65925),y=n.n(b),j=n(92379),w=n(75172),O=n(62984),k=n(68306),P=n(93223),M=n(55371),C=n(98506),T=n(50684),_=n(18102),S=n(54591),E=n(91530),N=n.n(E),D=n(8649),L=n(49217),I=n(651);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let U=S.pm.FirstTimeUsingUserContext;var Z=e=>{let{onClose:t}=e,n=(0,w.Z)(),{markAsViewed:r}=(0,S.qg)(U),a=(0,j.useCallback)(()=>{r(),t()},[r,t]);return(0,I.jsxs)(L.Z,{isOpen:!0,onClose:N(),size:"custom",className:"max-w-xl",type:"success",title:n.formatMessage(z.title),primaryButton:(0,I.jsx)(D.Z.Button,{onClick:a,title:n.formatMessage(z.ok),color:"primary"}),children:[(0,I.jsxs)("div",{className:"mb-6 flex flex-col gap-3",children:[(0,I.jsx)("p",{children:(0,I.jsx)(O.Z,F({},z.body1))}),(0,I.jsx)("p",{children:(0,I.jsx)(O.Z,F({},z.body2))})]}),(0,I.jsx)("div",{className:"flex flex-col gap-3 text-sm text-token-text-tertiary",children:(0,I.jsx)("p",{children:(0,I.jsx)(O.Z,F(F({},z.legal1),{},{values:{article:e=>(0,I.jsx)("a",{href:l.i,target:"_blank",className:"underline",rel:"noopener noreferrer",children:e})}}))})})]})};let z=(0,k.vU)({title:{id:"UserContextFirstTimeModal.title",defaultMessage:"Introducing Custom Instructions"},body1:{id:"UserContextFirstTimeModal.body1",defaultMessage:"Customize your interactions with ChatGPT by providing specific details and guidelines for your chats."},body2:{id:"UserContextFirstTimeModal.body2",defaultMessage:"Whenever you edit your custom instructions, they'll take effect in all new chats you create. Existing chats won't be updated."},legal1:{id:"UserContextFirstTimeModal.legal1",defaultMessage:"Your instructions will be used to make our models better unless you've opted out and may be shared with any plugins you've enabled. Visit our <article>Help Center</article> to learn more."},ok:{id:"UserContextFirstTimeModal.ok",defaultMessage:"OK"}});var R=n(62484),B=n(92426),G=n(94982);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function V(e){let t=(0,w.Z)();return(0,f.a)({queryKey:["userContext"],queryFn:()=>P.Z.getUserSystemMessage().catch(e=>{throw G.m.danger(t.formatMessage({id:"userContextModal.getCustomInstructionsError",defaultMessage:"Failed to get your settings"})),e}),enabled:e,select:e=>{var t,n,r,a;return{aboutUserMessage:null!==(t=null==e?void 0:e.about_user_message)&&void 0!==t?t:"",aboutModelMessage:null!==(n=null==e?void 0:e.about_model_message)&&void 0!==n?n:"",disabledTools:null!==(r=null==e?void 0:e.disabled_tools)&&void 0!==r?r:[],enabled:null===(a=null==e?void 0:e.enabled)||void 0===a||a}}})}let H={aboutUserMessage:void 0,aboutModelMessage:void 0,disabledTools:void 0,enabled:void 0};function K(e){var t,n,r;let{isModalOpen:a}=e,o=(0,w.Z)(),s=function(){let{eligible:e}=(0,S.qg)(U);return e}(),{0:c,1:f}=(0,j.useState)(!1),{isLoading:h,data:v}=V(a),{aboutUserMessage:x="",aboutModelMessage:b="",disabledTools:k=[],enabled:C}=null!=v?v:{},{0:E,1:N}=(0,j.useState)(H),{aboutUserMessage:A,aboutModelMessage:F,disabledTools:z,enabled:R}=E,B=null!=R?R:!!C,{0:W,1:K}=(0,j.useState)(null),et=(0,j.useCallback)(()=>{M.vm.closeModal(M.B.UserContext),N(H),K(null)},[]),{isPending:er,mutate:ea}=function(e){let{onSuccess:t,onError:n}=e,r=(0,u.NL)();return(0,d.D)({mutationFn:e=>{let{userContext:t}=e;return P.Z.createOrUpdateUserSystemMessage(t)},onSettled:(e,t)=>{let n=["userContext"];null===e||t?r.invalidateQueries({queryKey:n}):r.setQueryData(n,e)},onSuccess:t,onError:n})}({onSuccess:()=>{et()},onError:e=>{var t,n,r;return(null===(t=e.response)||void 0===t?void 0:t.reason)==="content_policy"&&null!==(n=e.response)&&void 0!==n&&n.field?K(null===(r=e.response)||void 0===r?void 0:r.field):G.m.danger(o.formatMessage({id:"userContextModal.saveError",defaultMessage:"Failed to update settings"})),e}}),{0:ei,1:eo}=(0,j.useState)(!1),el=(0,i.t)(),es=null===(t=null==el?void 0:el.isFree())||void 0===t||t,ec=Y(null!=A?A:"")||Y(null!=F?F:""),eu=void 0!==F&&F!==b||void 0!==A&&A!==x||void 0!==z&&!y()(z,k)||void 0!==R&&R!==C,ed=(0,j.useCallback)(()=>{eu?eo(!0):et()},[et,eu]),ef=(0,j.useCallback)(async()=>{er||(K(null),ea({userContext:{aboutUserMessage:null!=A?A:"",aboutModelMessage:null!=F?F:"",disabledTools:null!=z?z:[],enabled:!!R}}))},[er,F,A,z,R,ea]),ep=(0,j.useCallback)(()=>{if(ec){var e,t,n,r;let a=Y(null!=A?A:""),i=Y(null!=F?F:"");a&&(g.m9.logEvent("chatgpt_user_context_modal__message_past_limit",void 0,{type:"about_user_message",limit:X.toString(),character_length:null!==(e=null==A?void 0:A.length.toString())&&void 0!==e?e:""}),p.A.logEvent(m.M.userContextModelMessagePastLimit,{type:"about_user_message",limit:X.toString(),character_length:null!==(t=null==A?void 0:A.length.toString())&&void 0!==t?t:""})),i&&(g.m9.logEvent("chatgpt_user_context_modal__message_past_limit",void 0,{type:"about_model_message",limit:X.toString(),character_length:null!==(n=null==F?void 0:F.length.toString())&&void 0!==n?n:""}),p.A.logEvent(m.M.userContextModelMessagePastLimit,{type:"about_model_message",limit:X.toString(),character_length:null!==(r=null==F?void 0:F.length.toString())&&void 0!==r?r:""})),G.m.danger(o.formatMessage(en.messageLimitError,{limit:X}),{duration:4,hasCloseButton:!0});return}ef()},[o,ec,F,A,ef]);if(a&&s&&!c)return(0,I.jsx)(Z,{onClose:()=>{f(!0)}});if(a&&ei){let e=()=>{eo(!1)};return(0,I.jsx)(L.Z,{isOpen:!0,onClose:e,type:"success",title:o.formatMessage(en.confirmCloseTitle),primaryButton:(0,I.jsx)(D.Z.Button,{title:o.formatMessage(en.confirmCloseOk),color:"danger",onClick:()=>{et(),e()}}),secondaryButton:(0,I.jsx)(D.Z.Button,{title:o.formatMessage(en.confirmCloseCancel),color:"secondary",onClick:e}),children:(0,I.jsx)("div",{className:"text-sm",children:(0,I.jsx)(O.Z,q({},en.confirmCloseBody))})},"confirm-close")}return(0,I.jsxs)(L.Z,{isOpen:a,onClose:ed,type:"success",size:"custom",className:"max-w-lg xl:max-w-xl",title:(0,I.jsx)(O.Z,q({},en.profileTitle)),children:[h?(0,I.jsx)("div",{className:"flex h-14 items-center justify-center",children:(0,I.jsx)(T.Z,{})}):(0,I.jsxs)("div",{className:"max-h-[60vh] overflow-y-auto md:max-h-[calc(100vh-300px)]",children:[(0,I.jsxs)("div",{className:"flex items-center gap-1",children:[(0,I.jsx)("div",{className:"text-sm font-semibold",children:(0,I.jsx)(O.Z,q({},en.customInstructionsTitle))}),(0,I.jsx)($,{label:(0,I.jsx)(O.Z,q(q({},en.customInstructionsTooltip),{},{values:{article:e=>(0,I.jsx)("a",{href:l.i,target:"_blank",className:"underline",rel:"noreferrer",children:e})}}))})]}),(0,I.jsx)("p",{className:"text-muted pb-3 pt-2 text-sm text-token-text-primary",children:(0,I.jsx)(O.Z,q({},en.aboutYouHelpText))}),(0,I.jsx)(J,{className:"mb-3",onSubmit:ep,disabled:!B,tip:(0,I.jsx)(Q,{children:(0,I.jsxs)("ul",{className:"list-disc pl-5",children:[(0,I.jsx)("li",{children:(0,I.jsx)(O.Z,q({},en.aboutUserTip1))}),(0,I.jsx)("li",{children:(0,I.jsx)(O.Z,q({},en.aboutUserTip2))}),(0,I.jsx)("li",{children:(0,I.jsx)(O.Z,q({},en.aboutUserTip3))}),(0,I.jsx)("li",{children:(0,I.jsx)(O.Z,q({},en.aboutUserTip4))}),(0,I.jsx)("li",{children:(0,I.jsx)(O.Z,q({},en.aboutUserTip5))})]})}),hasModError:"about_user_message"===W,value:null!=A?A:x,onChange:e=>N(t=>{var n,r,a;return{aboutModelMessage:null!==(n=t.aboutModelMessage)&&void 0!==n?n:b,aboutUserMessage:e.target.value,enabled:null!==(r=t.enabled)&&void 0!==r?r:B,disabledTools:null!==(a=t.disabledTools)&&void 0!==a?a:k}})}),(0,I.jsx)("p",{className:"text-muted py-3 text-sm text-token-text-primary",children:(0,I.jsx)(O.Z,q({},en.modelHelpText))}),(0,I.jsx)(J,{onSubmit:ep,disabled:!B,tip:(0,I.jsx)(Q,{children:(0,I.jsxs)("ul",{className:"list-disc pl-5",children:[(0,I.jsx)("li",{children:(0,I.jsx)(O.Z,q({},en.modelTip1))}),(0,I.jsx)("li",{children:(0,I.jsx)(O.Z,q({},en.modelTip2))}),(0,I.jsx)("li",{children:(0,I.jsx)(O.Z,q({},en.modelTip3))}),(0,I.jsx)("li",{children:(0,I.jsx)(O.Z,q({},en.modelTip4))})]})}),hasModError:"about_model_message"===W,value:null!=F?F:b,onChange:e=>N(t=>{var n,r,a;return{aboutUserMessage:null!==(n=t.aboutUserMessage)&&void 0!==n?n:x,aboutModelMessage:e.target.value,enabled:null!==(r=t.enabled)&&void 0!==r?r:B,disabledTools:null!==(a=t.disabledTools)&&void 0!==a?a:k}})}),!es&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("div",{className:"my-6 h-px bg-token-border-light"}),(0,I.jsx)(ee,{disabledTools:null!==(n=null!==(r=E.disabledTools)&&void 0!==r?r:k)&&void 0!==n?n:[],onDisabledToolsChanged:e=>N(t=>{var n,r,a;return{aboutUserMessage:null!==(n=t.aboutUserMessage)&&void 0!==n?n:x,aboutModelMessage:null!==(r=t.aboutModelMessage)&&void 0!==r?r:b,enabled:null!==(a=t.enabled)&&void 0!==a?a:B,disabledTools:e}})})]})]}),(0,I.jsx)("div",{className:"mt-4 md:mt-5",children:(0,I.jsxs)("div",{className:"flex flex-grow flex-col items-stretch justify-between gap-0 sm:flex-row sm:items-center sm:gap-3",children:[(0,I.jsxs)("label",{className:"mt-5 flex cursor-pointer flex-row justify-between gap-2 sm:mt-4",children:[(0,I.jsx)("div",{className:"self-center text-sm text-token-text-primary",children:(0,I.jsx)(O.Z,q({},en.chatPreferencesEnable))}),(0,I.jsx)(_.Z,{enabled:B,onChange:e=>{N(t=>{var n,r,a;return{aboutUserMessage:null!==(n=t.aboutUserMessage)&&void 0!==n?n:x,aboutModelMessage:null!==(r=t.aboutModelMessage)&&void 0!==r?r:b,enabled:e,disabledTools:null!==(a=t.disabledTools)&&void 0!==a?a:k}})},label:B?o.formatMessage(en.disableToggleLabel):o.formatMessage(en.enableToggleLabel)})]}),(0,I.jsx)(D.Z.Actions,{secondaryButton:(0,I.jsx)(D.Z.Button,{onClick:ed,children:(0,I.jsx)(O.Z,q({},en.cancel))}),primaryButton:(0,I.jsx)(D.Z.Button,{loading:er,onClick:ep,color:"primary",visuallyDisabled:ec,disabled:!eu,children:(0,I.jsx)(O.Z,q({},en.save))})})]})})]},"user-context")}let Q=e=>{let{children:t}=e;return(0,I.jsx)("div",{className:"whitespace-pre-line",children:t})},X=1500,Y=e=>e.length>X,J=e=>{let{disabled:t,onChange:n,onSubmit:r,placeholder:a,value:i,tip:o,hasModError:l,className:s}=e,u=(0,w.Z)(),d=(0,j.useRef)(null),f=(0,C.x_)(),p=(0,C.aj)(),m=!f,{0:g,1:b}=(0,j.useState)(!1),{0:y,1:k}=(0,j.useState)(m),P=!m&&g&&!y,M=m&&!y,T=Y(i);return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(L.Z,{isOpen:M,type:"success",size:"custom",className:"max-w-lg",title:u.formatMessage(en.tipsHeader),showCloseButton:!0,onClose:()=>{k(!0)},children:o}),(0,I.jsxs)(c.fC,{open:P,children:[(0,I.jsxs)("div",{className:s,children:[(0,I.jsx)(c.xz,{asChild:!0,children:(0,I.jsx)("textarea",{ref:d,className:(0,h.default)("w-full resize-none rounded bg-token-main-surface-primary p-4 placeholder:text-gray-300",{"border-orange-400 focus:border-orange-400":l,"border-red-500 focus:border-red-500":T&&!l,"focus-token-border-heavy border-token-border-light":!T&&!l,"opacity-30":t}),disabled:t,placeholder:a,onKeyDown:e=>{t||"Enter"!==e.key||!e.metaKey||e.shiftKey||e.nativeEvent.isComposing||(e.preventDefault(),r())},rows:f&&!p?6:5,value:i,onChange:n,onBlur:()=>{b(!1)},onFocus:()=>{b(!0)}})}),(0,I.jsx)("div",{className:(0,h.default)("flex items-center justify-between px-1 text-xs tabular-nums",T?"text-red-600":"text-token-text-tertiary"),children:l?(0,I.jsx)("div",{className:"visible mt-2 text-left text-xs text-orange-400",children:(0,I.jsx)(O.Z,q(q({},en.modApiVoilation),{},{values:{policyLink:e=>(0,I.jsx)("a",{href:"https://platform.openai.com/docs/usage-policies/content-policy",className:"underline",target:"_blank",rel:"noreferrer",children:e}),feedbackLink:e=>(0,I.jsx)("a",{href:"https://forms.gle/3gyAMj5r5rTEcgbs5",className:"underline",target:"_blank",rel:"noreferrer",children:e})}}))}):(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("div",{children:"".concat(i.length,"/").concat(X)}),(0,I.jsx)("button",{className:"flex items-center gap-1",onClick:()=>{var e;null===(e=d.current)||void 0===e||e.focus(),k(!y)},tabIndex:-1,children:(0,I.jsx)(v.M,{initial:!1,children:g&&(0,I.jsx)(x.E.div,{className:"flex items-center gap-1",initial:{opacity:0},animate:{opacity:1,transition:{duration:.2,ease:"easeIn"}},exit:{opacity:0,transition:{duration:.2,ease:"easeIn"}},children:y?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(O.Z,q({},en.showTips)),(0,I.jsx)(B.tEF,{className:"icon-xs"})]}):(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(O.Z,q({},en.hideTips)),(0,I.jsx)(B.Xl7,{className:"icon-xs"})]})},"show-hide")})})]})})]}),(0,I.jsx)(c.h_,{children:(0,I.jsx)(c.VY,{side:"right",align:"start",sideOffset:12,className:"popover relative max-w-[220px] animate-slideLeftAndFade select-none rounded-xl border border-token-border-light bg-token-main-surface-primary p-4 text-sm text-token-text-primary shadow-[0px_4px_14px_rgba(0,0,0,0.06)] xl:max-w-xs",onOpenAutoFocus:e=>{e.preventDefault()},onCloseAutoFocus:e=>{e.preventDefault()},children:(0,I.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,I.jsx)("strong",{children:(0,I.jsx)(O.Z,q({},en.tipsHeader))}),o]})})})]})]})};function $(e){let{label:t,side:n="bottom"}=e;return(0,I.jsx)(R.u,{sideOffset:4,interactive:!0,label:(0,I.jsx)("div",{children:t}),side:n,children:(0,I.jsx)(B.szr,{className:"h-4 w-4 text-token-text-tertiary"})})}function ee(e){var t;let{disabledTools:n,onDisabledToolsChanged:r}=e;(0,j.useEffect)(()=>{p.A.logEvent(m.M.userContextGpt4CapabilitiesShown)},[]);let a=(0,i.t)(),l=null!==(t=null==a?void 0:a.isEnterpriseOrEdu())&&void 0!==t&&t,c=!(0,i.FJ)(o.L0.BrowsingAvailable)&&l,u=e=>{r(n.includes(e)?n.filter(t=>t!==e):[...n,e])};return(0,I.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,I.jsxs)("div",{className:"flex items-center gap-1",children:[(0,I.jsx)("div",{className:"text-sm font-semibold",children:(0,I.jsx)(O.Z,{id:"userContextModal.gpt4CapabilitiesTitle",defaultMessage:"GPT-4 Capabilities"})}),(0,I.jsx)($,{label:(0,I.jsx)(O.Z,{id:"userContextModal.tools.capabilitiesInfo.1",defaultMessage:"Choose which tools can be used with GPT-4"}),side:"top"})]}),(0,I.jsxs)("div",{className:"mt-2 flex flex-col gap-3 md:flex-row",children:[(0,I.jsx)(et,{title:(0,I.jsx)(O.Z,{id:"userContextModal.tools.browse",defaultMessage:"Browsing"}),tooltipLabel:c?(0,I.jsx)(O.Z,{id:"5SuA2c",defaultMessage:"Browsing is disabled by your organization"}):(0,I.jsx)(O.Z,{id:"userContexModal.tools.browserTooltip",defaultMessage:"Browse the internet to find answers"}),tool:s.X.BROWSER,onClick:u,Icon:B.n9J,checked:!n.includes(s.X.BROWSER)&&!c,disabled:c}),(0,I.jsx)(et,{title:(0,I.jsx)(O.Z,{id:"userContextModal.tools.dalle",defaultMessage:"DALL\xb7E"}),tooltipLabel:(0,I.jsx)(O.Z,{id:"userContextModal.tools.dalleTooltip",defaultMessage:"Generate images using DALL\xb7E"}),tool:s.X.DALLE,onClick:u,Icon:B.q$4,checked:!n.includes(s.X.DALLE)}),(0,I.jsx)(et,{title:(0,I.jsx)(O.Z,{id:"userContextModal.tools.codeInterpreter.1",defaultMessage:"Code"}),tooltipLabel:(0,I.jsx)(O.Z,{id:"userContextModal.tools.codeInterpreterTooltip",defaultMessage:"Execute code using Code Interpreter"}),tool:s.X.PYTHON,onClick:u,Icon:B.FxN,checked:!n.includes(s.X.PYTHON)})]})]})}function et(e){let{tool:t,title:n,tooltipLabel:r,Icon:i,onClick:o,checked:l,disabled:s}=e;return(0,I.jsx)(R.u,{className:"block flex-1",label:r,side:"top",sideOffset:4,children:(0,I.jsxs)("button",{className:(0,h.default)("flex w-full items-center justify-between rounded border border-token-border-medium p-2",{"cursor-not-allowed text-token-text-quaternary":s}),onClick:()=>o(t),disabled:s,children:[(0,I.jsxs)("div",{className:"flex items-center gap-2",children:[(0,I.jsx)(i,{className:"h-4 w-4 text-token-text-tertiary"}),(0,I.jsx)("div",{className:"text-sm font-semibold",children:n})]}),(0,I.jsx)(a.Z,{id:t,checked:l&&!s,disabled:s})]})})}let en=(0,k.vU)({tipsHeader:{id:"userContextModal.tipsHeader",defaultMessage:"Thought starters"},aboutUserTip1:{id:"userContextModal.aboutUserTip1",defaultMessage:"Where are you based?"},aboutUserTip2:{id:"userContextModal.aboutUserTip2",defaultMessage:"What do you do for work?"},aboutUserTip3:{id:"userContextModal.aboutUserTip3",defaultMessage:"What are your hobbies and interests?"},aboutUserTip4:{id:"userContextModal.aboutUserTip4",defaultMessage:"What subjects can you talk about for hours?"},aboutUserTip5:{id:"userContextModal.aboutUserTip5",defaultMessage:"What are some goals you have?"},modelTip1:{id:"userContextModal.modelTip1",defaultMessage:"How formal or casual should ChatGPT be?"},modelTip2:{id:"userContextModal.modelTip2",defaultMessage:"How long or short should responses generally be?"},modelTip3:{id:"userContextModal.modelTip3",defaultMessage:"How do you want to be addressed?"},modelTip4:{id:"userContextModal.modelTip4",defaultMessage:"Should ChatGPT have opinions on topics or remain neutral?"},save:{id:"userContextModal.save",defaultMessage:"Save"},chatPreferencesEnable:{id:"userContextModal.chatPreferencesEnable",defaultMessage:"Enable for new chats"},enableToggleLabel:{id:"userContextModal.enableToggleLabel",defaultMessage:"Enable chat preferences"},disableToggleLabel:{id:"userContextModal.disableToggleLabel",defaultMessage:"Disable chat preferences"},cancel:{id:"userContextModal.cancel",defaultMessage:"Cancel"},aboutYouHelpText:{id:"userContextModal.aboutYouHelpText",defaultMessage:"What would you like ChatGPT to know about you to provide better responses?"},modelHelpText:{id:"userContextModal.modelHelpText",defaultMessage:"How would you like ChatGPT to respond?"},profileTitle:{id:"userContextModal.title.1",defaultMessage:"Customize ChatGPT"},customInstructionsTitle:{id:"userContextModal.customInstructionsTitle",defaultMessage:"Custom Instructions"},customInstructionsTooltip:{id:"userContextModal.customInstructionsTooltip",defaultMessage:"<article>Learn more</article> about Custom instructions and how they’re used to help ChatGPT provide better responses."},messageLimitError:{id:"userContextModal.messageLimitError",defaultMessage:"Please limit your responses to {limit} characters or less."},showTips:{id:"userContextModal.showTips",defaultMessage:"Show tips"},hideTips:{id:"userContextModal.hideTips",defaultMessage:"Hide tips"},confirmCloseTitle:{id:"userContextModal.confirmCloseTitle",defaultMessage:"You have unsaved changes."},confirmCloseBody:{id:"userContextModal.confirmCloseBody",defaultMessage:"Are you sure you want to exit? Any changes you made will be permanently lost."},confirmCloseCancel:{id:"userContextModal.confirmCloseCancel",defaultMessage:"Back"},confirmCloseOk:{id:"userContextModal.confirmCloseOk",defaultMessage:"Exit"},modApiVoilation:{id:"userContextModal.modApiVoilation",defaultMessage:"This content may violate our <policyLink>content policy</policyLink>. If you believe this to be in error, please <feedbackLink>submit your feedback</feedbackLink> — your input will aid our research in this area."},browser:{id:"userContexModal.tools.browserTooltip",defaultMessage:"Browse the internet to find answers"},dalle:{id:"userContexModal.tools.dalleTooltip",defaultMessage:"Generate images using DALL\xb7E"},python:{id:"userContexModal.tools.codeInterpreterTooltip",defaultMessage:"Execute code using Code Interpreter"}})},81816:function(e,t,n){n.d(t,{C:function(){return a}});var r=n(4702);function a(e){var t,n;let a=(0,r.hz)();return!(null===(t=(0,r.t)())||void 0===t?void 0:t.isWorkspaceAccount())||null!==(n=null==a?void 0:a.includes(e))&&void 0!==n&&n}},35746:function(e,t,n){n.d(t,{St:function(){return f},ZP:function(){return d},wK:function(){return p}});var r=n(93223),a=n(4702),i=n(14816),o=n(35226),l=n(96053),s=n(75172),c=n(68306),u=n(94982);function d(){var e;let t=(0,a.t)(),n=null==t?void 0:t.id,o=null!==(e=null==t?void 0:t.data.organizationId)&&void 0!==e?e:void 0;return function(e){let t=(0,s.Z)();return(0,i.a)({queryKey:["organization-subscription",e],queryFn:async()=>await r.Z.getSubscription(e).catch(e=>{u.m.danger(t.formatMessage(m.subscriptionLoadError,{error:e.message}))}),enabled:null!=e.account_id||null!=e.organization_id})}((null==t?void 0:t.isEnterpriseOrEdu())?{organization_id:o}:{account_id:n})}function f(e){let t=(0,o.NL)();return(0,l.D)({mutationFn:async e=>r.Z.cancelSubscription(e),onSuccess:()=>{t.invalidateQueries({queryKey:["organization-subscription",{account_id:e}]}),t.invalidateQueries({queryKey:["account-status"]})}})}function p(e){let t=(0,o.NL)();return(0,l.D)({mutationFn:async e=>r.Z.renewSubscription(e),onSuccess:()=>{t.invalidateQueries({queryKey:["organization-subscription",{account_id:e}]})}})}let m=(0,c.vU)({subscriptionLoadError:{id:"useSubscriptionData.subscriptionLoadError",defaultMessage:"Failed to load subscription: {error}. Contact support@openai.com if error persists."}})},61802:function(e,t,n){n.d(t,{U:function(){return l}});var r=n(94521),a=n(93747),i=n(15236);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}let l={filePickerStarted:e=>{a.A.logEvent(i.M.contextConnectorsPickerStarted,{contextConnector:e})},filePickerLoaded:e=>{a.A.logEvent(i.M.contextConnectorsPickerLoaded,{contextConnector:e})},filePickerPicked:(e,t)=>{a.A.logEvent(i.M.contextConnectorsPickerPicked,{contextConnector:e,numFiles:t})},filePickerCancelled:e=>{a.A.logEvent(i.M.contextConnectorsPickerCancelled,{contextConnector:e})},linkPasted:e=>{a.A.logEvent(i.M.contextConnectorsLinkPasted,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e))},linkMetadataFetchStarted:e=>{a.A.logEvent(i.M.contextConnectorsLinkMetadataFetchStarted,{contextConnector:e})},linkMetadataFetchSucceeded:(e,t)=>{a.A.logEvent(i.M.contextConnectorsLinkMetadataFetchSucceeded,{contextConnector:e,mimeType:t})},linkMetadataFetchFailed:(e,t)=>{a.A.logEvent(i.M.contextConnectorsLinkMetadataFetchFailed,{contextConnector:e,reason:String(t)})},oauthUpsellButtonClick:(e,t)=>{a.A.logEvent(i.M.contextConnectorsOAuthUpsellButtonClick,{contextConnector:e,choice:t})},expiredAccessTokenUsed:(e,t)=>{a.A.logEvent(i.M.contextConnectorsExpiredAccessTokenUsed,{contextConnector:e,useCase:t})}}},65938:function(e,t,n){n.d(t,{AJ:function(){return o},JQ:function(){return c},Ul:function(){return s},e6:function(){return l},i5:function(){return u}});var r=n(21904),a=n(82920),i=n(651);let o={defaultMessage:"Microsoft OneDrive (personal)",description:"Name of a service, Microsoft OneDrive, with a short, non-branded descriptor indicating that this is the consumer version of the service instead of the business one",id:"ContextConnector.OneDrivePersonal.name"},l={defaultMessage:"Microsoft OneDrive (work/school)",description:"Name of a service, Microsoft OneDrive, with a short, non-branded descriptor indicating that this is the business version of the service instead of the personal one",id:"ContextConnector.OneDriveBusiness.name"};function s(e,t){var n,a;switch(e){case r.PO.GDRIVE_SYNC_CONNECTOR:case r.PO.GDRIVE:return"Google Drive";case r.PO.O365:return"Microsoft OneDrive";case r.PO.O365_PERSONAL:return null!==(n=null==t?void 0:t.formatMessage(o))&&void 0!==n?n:"Microsoft OneDrive (personal)";case r.PO.O365_BUSINESS:return null!==(a=null==t?void 0:t.formatMessage(l))&&void 0!==a?a:"Microsoft OneDrive (work/school)"}}function c(e,t){switch(e){case r.PO.GDRIVE_SYNC_CONNECTOR:case r.PO.GDRIVE:switch(t){case"doc":case"docx":return"Google Docs";case"xls":case"xlsx":return"Google Sheets";case"ppt":case"pptx":return"Google Slides";default:return"Google Drive"}case r.PO.O365:case r.PO.O365_PERSONAL:case r.PO.O365_BUSINESS:switch(t){case"doc":case"docx":return"Microsoft Word";case"xls":case"xlsx":return"Microsoft Excel";case"ppt":case"pptx":return"Microsoft PowerPoint";default:return"Microsoft OneDrive"}}(0,a.ZP)(e)}function u(e){let{contextConnector:t,extension:n}=e;return(0,i.jsx)(i.Fragment,{children:c(t,n)})}},14426:function(e,t,n){var r;n.d(t,{D6:function(){return o},JO:function(){return i},XS:function(){return s},dQ:function(){return a},eA:function(){return l}});let a="77377267392",i="AIzaSyAOHzpLbFWAcLwrOn1IvQeVd0jHRntTlPk",o="203712390664",l="AIzaSyCECDrDXDU460DD1WTHtz8jSkyuGjgsI8w",s=((r={}).OneDrive_BUSINESS_DRIVE_ITEMS="https://graph.microsoft.com/v1.0/me/drive/items",r.OneDrive_BUSINESS_DRIVE_ROOT="https://graph.microsoft.com/v1.0/me/drive/root",r.OneDrive_BUSINESS_SHARES="https://graph.microsoft.com/v1.0/shares",r.OneDrive_PERSONAL_DRIVE_ITEMS="https://api.onedrive.com/v1.0/drives",r.OneDrive_PERSONAL_SHARES="https://api.onedrive.com/v1.0/shares",r)},65961:function(e,t,n){n.d(t,{X:function(){return i}});var r=n(14426);let a=null;function i(e){return null==a&&(a=new Promise((e,t)=>{let n=document.createElement("script");n.src="https://apis.google.com/js/api.js",n.onload=e,n.onerror=t,document.documentElement.appendChild(n)}).then(()=>Promise.all([new Promise(e=>gapi.load("client",e)),new Promise(e=>gapi.load("client:picker",e))])).then(()=>(gapi.client.setToken({access_token:e}),gapi.client.init({apiKey:r.JO,scope:"https://www.googleapis.com/auth/drive.file",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"]})))),a}},56489:function(e,t,n){n.d(t,{j:function(){return s}});var r=n(21904),a=n(61802),i=n(20055),o=n(14426),l=n(65961);async function s(e,t,n,s){async function u(e){switch(e.action){case google.picker.Action.PICKED:a.U.filePickerPicked(r.PO.GDRIVE,e.docs.length),s(e.docs.map(e=>({connector:t,id:e.id,title:e.name,mimeType:e.mimeType,url:e.url,syntheticExtension:"document"===e.type?(0,i.I)(e.mimeType):null})));break;case google.picker.Action.CANCEL:a.U.filePickerCancelled(r.PO.GDRIVE);return;case"loaded":a.U.filePickerLoaded(r.PO.GDRIVE);return}}await (0,l.X)(n);let d=new google.picker.DocsView(google.picker.ViewId.DOCS).setIncludeFolders(!0).setSelectFolderEnabled(t===r.PO.GDRIVE_SYNC_CONNECTOR).setMode(google.picker.DocsViewMode.LIST);t===r.PO.GDRIVE_SYNC_CONNECTOR&&d.setMimeTypes("application/vnd.google-apps.folder");let f="en";c.includes(e)?f=e:c.includes(e.split("-")[0])&&(f=e.split("-")[0]);let p=new google.picker.PickerBuilder().enableFeature(google.picker.Feature.MULTISELECT_ENABLED).enableFeature(google.picker.Feature.SUPPORT_DRIVES).setDeveloperKey(t===r.PO.GDRIVE_SYNC_CONNECTOR?o.eA:o.JO).setAppId(t===r.PO.GDRIVE_SYNC_CONNECTOR?o.D6:o.dQ).setOAuthToken(n).addView(d).setCallback(u).setLocale(f).build();a.U.filePickerStarted(r.PO.GDRIVE),p.setVisible(!0);let m=function(){var e;let t=null!==(e=window.document.body.querySelector("div.picker-dialog-bg"))&&void 0!==e?e:window.document.body.querySelector("div.oai-picker-dialog-bg");return null==t||t.classList.add("oai-picker-dialog-bg","bg-black/50","dark:bg-black/80","absolute","inset-0","z-[1000]"),null==t||t.classList.remove("picker-dialog-bg"),t}(),g=()=>{a.U.filePickerCancelled(r.PO.GDRIVE),p.setVisible(!1),null==m||m.removeEventListener("click",g)};null==m||m.addEventListener("click",g)}let c=["af","am","ar","bg","bn","ca","cs","da","de","el","en","en-GB","es","es-419","et","eu","fa","fi","fil","fr","fr-CA","gl","gu","hi","hr","hu","id","is","it","iw","ja","kn","ko","lt","lv","ml","mr","ms","nl","no","pl","pt-BR","pt-PT","ro","ru","sk","sl","sr","sv","sw","ta","te","th","tr","uk","ur","vi","zh-CN","zh-HK","zh-TW","zu"]},72693:function(e,t,n){n.d(t,{O:function(){return o},Z:function(){return i}});var r=n(19841),a=n(651);function i(e){let{percentage:t,thickness:n=1/12,className:i,sizeOverride:o,backgroundStrokeClassName:l="stroke-gray-400",transitionDuration:s,transitionTimingFunction:c,onTransitionEnd:u}=e,d=null!=o?o:120,f=d*n,p=(d-f)/2,m=2*Math.PI*p;return(0,a.jsxs)("svg",{width:d,height:d,viewBox:"0 0 ".concat(d," ").concat(d),className:i,children:[(0,a.jsx)("circle",{className:(0,r.default)("origin-[50%_50%] -rotate-90",l),strokeWidth:f,fill:"transparent",r:p,cx:d/2,cy:d/2}),(0,a.jsx)("circle",{className:"origin-[50%_50%] -rotate-90 transition-[stroke-dashoffset]",stroke:"currentColor",strokeWidth:f,strokeDashoffset:m-t/100*m,strokeDasharray:"".concat(m," ").concat(m),fill:"transparent",r:p,cx:d/2,cy:d/2,style:{transitionDuration:s,transitionTimingFunction:c},onTransitionEnd:u})]})}let o=e=>{let{size:t=40,className:n="text-blue-selection"}=e;return(0,a.jsx)("div",{className:(0,r.default)("relative",n),style:{width:t,height:t},children:(0,a.jsxs)("svg",{className:"absolute h-full w-full animate-spin",viewBox:"0 0 50 50",children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"spinner-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,a.jsx)("stop",{offset:"0%",style:{stopColor:"currentColor",stopOpacity:1}}),(0,a.jsx)("stop",{offset:"100%",style:{stopColor:"currentColor",stopOpacity:0}})]})}),(0,a.jsx)("circle",{cx:"25",cy:"25",r:"20",stroke:"url(#spinner-gradient)",strokeWidth:"8",strokeLinecap:"round",fill:"none",strokeDasharray:"75,150",strokeDashoffset:"0"})]})})}},67165:function(e,t,n){n.d(t,{d:function(){return w}});var r=n(94521),a=n(17379),i=n(96271),o=n(19841),l=n(92379),s=n(14910),c=n(73746),u=n(92426),d=n(73965),f=n(651);let p=["className","size","align"],m=["onSelect","icon","className","color","size"],g=["className"],h=["onSelect","children"],v=["className"],x=["icon","children"];function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let j=l.forwardRef(function(e,t){let{className:n,size:r="default",align:l}=e,s=(0,a.Z)(e,p);return(0,f.jsx)(d.w5,y({ref:t,$as:i.VY,sideOffset:4,align:null!=l?l:"start",collisionPadding:10,className:(0,o.default)({"min-w-[280px]":"default"===r,"min-w-[340px]":"large"===r,"min-w-[125px]":"small"===r,"overflow-hidden":!0},n)},s))});function w(e){let{triggerButton:t,children:n,size:r="default",open:a,onOpenChange:o,contentAlign:l,side:s,sideOffset:c=0,alignOffset:u=0,contentClassName:d}=e;return(0,f.jsxs)(i.fC,{modal:!1,open:a,onOpenChange:o,children:[(0,f.jsx)(i.xz,{asChild:!0,children:t}),(0,f.jsx)(i.Uv,{children:(0,f.jsx)(j,{size:r,align:l,alignOffset:u,side:s,sideOffset:c,className:d,children:n})})]})}let O={Root:i.fC,Trigger:function(e){return(0,f.jsx)(d.J7,y(y({$as:i.xz},e),{},{onFocusCapture:t=>{var n;t.stopPropagation(),null===(n=e.onFocusCapture)||void 0===n||n.call(e,t)}}))},Portal:i.Uv,Content:j,Item:l.forwardRef(function(e,t){let{onSelect:n,icon:r,className:s,color:u,size:p="default"}=e,g=(0,a.Z)(e,m),h=(0,c.Q)(),v=h?d.yy:d.aF;return r?(0,f.jsxs)(v,y(y({$as:i.ck,ref:t,onSelect:n,className:(0,o.default)("danger"===u&&"text-token-text-error",h&&"large"===p&&"gap-3",s)},g),{},{children:[(0,f.jsx)("div",{className:(0,o.default)(h&&"flex items-center justify-center",h&&"danger"===u&&"text-token-text-error",h&&"danger"!==u&&"text-token-text-secondary",h&&"default"===p&&"h-5 w-5",h&&"large"===p&&"h-5 w-7"),children:(0,l.isValidElement)(r)?r:(0,f.jsx)(r,{className:"h-5 w-5 shrink-0"})}),g.children]})):(0,f.jsx)(v,y({$as:i.ck,ref:t,onSelect:n,className:(0,o.default)("danger"===u&&"text-token-text-error",s)},g))}),Separator:function(e){let{className:t}=e,n=(0,a.Z)(e,g);return(0,f.jsx)(i.Z0,y({className:(0,o.default)("my-1.5 h-[1px] bg-token-border-light juice:mx-5 juice:my-1",t)},n))},RadioGroup:i.Ee,RadioItem:function(e){let{onSelect:t,children:n}=e,r=(0,a.Z)(e,h);return(0,f.jsxs)(d.aF,y(y({$as:i.Rk,onSelect:t},r),{},{children:[(0,f.jsx)(i.wU,{className:"absolute",children:(0,f.jsx)(u.$As,{className:"icon-sm"})}),(0,f.jsx)("span",{className:"ml-6",children:n})]}))},Sub:i.Tr,SubContent:function(e){let{className:t}=e,n=(0,a.Z)(e,v),r=(0,c.Q)();return(0,f.jsx)(d.w5,y({$as:i.tu,className:(0,o.default)("mt-2 max-h-[calc(100vh-300px)] min-w-[100px] overflow-auto",t),sideOffset:r?8:-10,alignOffset:r?-16:-14,collisionPadding:20},n))},SubMenuTrigger:function(e){let{icon:t,children:n}=e,r=(0,a.Z)(e,x),l=(0,c.Q)(),u=l?d.yy:d.aF;return(0,f.jsxs)(u,y(y({$as:i.fF},r),{},{children:[t&&(0,f.jsx)("div",{className:(0,o.default)(l&&"text-token-text-secondary",l&&"flex h-5 w-5 items-center justify-center"),children:(0,f.jsx)(t,{className:"h-5 w-5 flex-shrink-0"})}),n,(0,f.jsx)("div",{className:"ml-auto flex items-center text-token-text-tertiary group-data-[disabled]:opacity-50",children:(0,f.jsx)(s.Yf,{className:"icon-md "})})]}))},Label:function(e){let{children:t}=e;return(0,f.jsx)(i.__,{className:"m-1.5 p-2.5 text-xs font-semibold text-token-text-secondary juice:mx-2 juice:my-0 juice:px-2",children:t})}};t.Z=O},1985:function(e,t,n){n.d(t,{l:function(){return p}});var r=n(17379),a=n(62484),i=n(79931);n(59031);var o=n(19841),l=n(92379),s=n(75172),c=n(68306),u=n(92426),d=n(651);let f=["contextConnectorSourceUrl"];function p(e){let{contextConnectorSourceUrl:t}=e,n=(0,r.Z)(e,f),c=(0,s.Z)(),{0:p,1:g}=(0,l.useState)({width:0,height:0}),h=p.width/p.height,v=p.width>0&&p.height>0,x=(0,l.useMemo)(()=>{if(void 0!==t){var e;let n=new URL(t);return"https:"!==n.protocol&&(n=void 0),null===(e=n)||void 0===e?void 0:e.toString()}},[t]);return(0,l.useEffect)(()=>{if(!n.src)throw Error("ExpandableImage requires a src");let e=new Image;e.onload=()=>{g({width:e.naturalWidth,height:e.naturalHeight})},e.onerror=()=>{},e.src=n.src},[n.src]),(0,d.jsxs)(i.fC,{children:[(0,d.jsx)(i.xz,{className:n.className,disabled:!v,children:n.children}),(0,d.jsx)(i.h_,{children:(0,d.jsxs)(i.aV,{className:"fixed inset-0 flex items-center justify-center overflow-hidden bg-black/90 radix-state-open:animate-show dark:bg-black/80",children:[(0,d.jsx)(i.x8,{asChild:!0,children:(0,d.jsx)("button",{className:"absolute right-4 top-4",children:(0,d.jsx)(u.tPq,{className:"h-5 w-5 text-gray-100"})})}),(0,d.jsxs)(i.VY,{className:"shadow-xl focus:outline-none radix-state-open:animate-contentShow",children:[(0,d.jsx)("div",{className:(0,o.default)("relative max-h-[85vh] max-w-[90vw]"),style:{aspectRatio:h},children:(0,d.jsx)("img",{src:n.src,alt:n.alt,className:"h-full w-full object-contain"})}),x&&(0,d.jsx)("div",{className:"absolute right-14 top-4",children:(0,d.jsx)(a.u,{label:c.formatMessage(m.openOriginal),children:(0,d.jsx)("a",{href:x,target:"_blank",children:(0,d.jsx)(u.ReP,{className:"h-5 w-5 rotate-180 text-gray-100"})})})})]})]})})]})}let m=(0,c.vU)({openOriginal:{id:"ExpandableImage.openOriginal",defaultMessage:"Open original image"}})},33403:function(e,t,n){n.d(t,{Sv:function(){return E},UJ:function(){return S},ZP:function(){return _}});var r,a=n(41141),i=n(94521),o=n(12586),l=n(93747),s=n(15236),c=n(92379),u=n(72349),d=n(68306),f=n(75172),p=n(62984),m=n(74091),g=n(21629),h=n(94982),v=n(62004),x=n(67625),b=n(14019),y=n(18532),j=n(61457),w=n(37234),O=n(14161),k=n(58543),P=n(651);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let T=(0,d.vU)({dragInstructions:{id:"FileDropZone.dragInstructions",defaultMessage:"Add anything"},dragAllAccepted:{id:"FileDropZone.dragAllAccepted",defaultMessage:"Drop any file here to add it to the conversation"}});function _(e){var t;let{className:n,children:r,clientThreadId:a,currentModelConfig:i}=e,l=(0,f.Z)(),s=(0,v.W)(a),c=(0,k.YN)(i,s),d=c!==j.AJ.None,m=(0,O.gF)(e=>e.files),h=(c===j.AJ.Multimodal?y.Ql:y.dO)-m.length,{getGizmoId:b}=(0,g.Q)(),{handleFileAccepted:w}=E(l,(0,k.YN)(i,s),(0,k.p0)(i,s),"drag",b,null===(t=(0,k.ww)(i,s))||void 0===t?void 0:t.attachments),M=(0,o.TX)(),_=(0,k.Z8)((0,k.Zp)(i,s)),{getRootProps:D,isDragActive:L}=(0,u.uI)(C({maxFiles:h,disabled:!d||h<=0||null!=M,noClick:!0,onDropAccepted:w,onDropRejected:e=>S(e,l,c),multiple:!0,maxSize:y.xC},_)),I=function(){if(!_.accept||0===Object.keys(_.accept).length)return[];let e=[];return Object.values(_.accept).forEach(t=>e.push(...t)),e.sort()}();return(0,P.jsxs)("div",C(C({},D({className:n})),{},{children:[r,L&&(0,P.jsxs)(N,{children:[(0,P.jsx)(x.Fk,{}),(0,P.jsx)("h3",{children:(0,P.jsx)(p.Z,C({},T.dragInstructions))}),(0,P.jsx)("h4",{className:"w-2/3 text-center",children:I.length>0?I.join(", "):(0,P.jsx)(p.Z,C({},T.dragAllAccepted))})]})]}))}function S(e,t,n){let{errors:r}=e[0];r.forEach(e=>{let r=(0,b.s)(e);"string"==typeof r?h.m.danger(r,{hasCloseButton:!0}):h.m.danger(t.formatMessage(r,{size:y.EZ,maxNum:n===j.AJ.Multimodal?y.Ql:y.dO}),{hasCloseButton:!0})})}function E(e,t,n,r,a,i){return{handleFileAccepted:(0,c.useCallback)(async(o,c)=>{l.A.logEvent(s.M.uploadFile,{client:"web",eventSource:r,intent:t.toString()});let u=null!=a?await a():void 0;o.length>0&&o.forEach(r=>{O.Dw.uploadFile((0,w.W7)(r),r,t,n,e,{gizmoId:u},i)})},[r,t,a,n,e,i])}}let N=m.Z.div(r||(r=(0,a.Z)(["absolute inset-0 opacity-80 flex gap-2 flex-col justify-center items-center bg-token-main-surface-primary text-token-text-primary"])))},20055:function(e,t,n){n.d(t,{I:function(){return i},o:function(){return o}});let r=["xlsx","pptx","docx"],a={"application/vnd.google-apps.spreadsheet":"xlsx","application/vnd.google-apps.presentation":"pptx","application/vnd.google-apps.document":"docx"};function i(e){var t;return e&&null!==(t=a[e.split(";")[0]])&&void 0!==t?t:null}function o(e){return e&&r.includes(e)?e:null}},67625:function(e,t,n){n.d(t,{Fk:function(){return i},LO:function(){return c},N:function(){return s},OD:function(){return o},pC:function(){return u},tf:function(){return l},yc:function(){return d}});var r=n(55257),a=n(651);let i=e=>{let{className:t}=e;return(0,a.jsxs)(r.A0,{width:"132",height:"108",viewBox:"0 0 132 108",fill:"none",className:t,children:[(0,a.jsx)("g",{clipPath:"url(#clip0_3605_64419)",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.2025 29.3514C10.778 33.2165 8.51524 37.1357 11.8281 49.4995L13.4846 55.6814C16.7975 68.0453 20.7166 70.308 35.1411 66.443L43.3837 64.2344C57.8082 60.3694 60.0709 56.4502 56.758 44.0864L55.1016 37.9044C51.7887 25.5406 47.8695 23.2778 33.445 27.1428L29.3237 28.2471L25.2025 29.3514ZM18.1944 42.7244C18.8572 41.5764 20.325 41.1831 21.4729 41.8459L27.3517 45.24C28.4996 45.9027 28.8929 47.3706 28.2301 48.5185L24.836 54.3972C24.1733 55.5451 22.7054 55.9384 21.5575 55.2757C20.4096 54.613 20.0163 53.1451 20.6791 51.9972L22.8732 48.1969L19.0729 46.0028C17.925 45.3401 17.5317 43.8723 18.1944 42.7244ZM29.4091 56.3843C29.066 55.104 29.8258 53.7879 31.1062 53.4449L40.3791 50.9602C41.6594 50.6172 42.9754 51.377 43.3184 52.6573C43.6615 53.9376 42.9017 55.2536 41.6214 55.5967L32.3485 58.0813C31.0682 58.4244 29.7522 57.6646 29.4091 56.3843Z",fill:"#AFC1FF"})}),(0,a.jsx)("g",{clipPath:"url(#clip1_3605_64419)",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M86.8124 13.4036C81.0973 11.8722 78.5673 13.2649 77.0144 19.0603L68.7322 49.97C67.1793 55.7656 68.5935 58.2151 74.4696 59.7895L97.4908 65.958C103.367 67.5326 105.816 66.1184 107.406 60.1848L115.393 30.379C115.536 29.8456 115.217 29.2959 114.681 29.16C113.478 28.8544 112.435 28.6195 111.542 28.4183C106.243 27.2253 106.22 27.2201 109.449 20.7159C109.73 20.1507 109.426 19.4638 108.816 19.3004L86.8124 13.4036ZM87.2582 28.4311C86.234 28.1567 85.1812 28.7645 84.9067 29.7888C84.6323 30.813 85.2401 31.8658 86.2644 32.1403L101.101 36.1158C102.125 36.3902 103.178 35.7824 103.453 34.7581C103.727 33.7339 103.119 32.681 102.095 32.4066L87.2582 28.4311ZM82.9189 37.2074C83.1934 36.1831 84.2462 35.5753 85.2704 35.8497L100.107 39.8252C101.131 40.0996 101.739 41.1524 101.465 42.1767C101.19 43.201 100.137 43.8088 99.1132 43.5343L84.2766 39.5589C83.2523 39.2844 82.6445 38.2316 82.9189 37.2074ZM83.2826 43.2683C82.2584 42.9939 81.2056 43.6017 80.9311 44.626C80.6567 45.6502 81.2645 46.703 82.2888 46.9775L89.7071 48.9652C90.7313 49.2396 91.7841 48.6318 92.0586 47.6076C92.333 46.5833 91.7252 45.5305 90.7009 45.256L83.2826 43.2683Z",fill:"#7989FF"})}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M40.4004 71.8426C40.4004 57.2141 44.0575 53.5569 61.1242 53.5569H66.0004H70.8766C87.9432 53.5569 91.6004 57.2141 91.6004 71.8426V79.1569C91.6004 93.7855 87.9432 97.4426 70.8766 97.4426H61.1242C44.0575 97.4426 40.4004 93.7855 40.4004 79.1569V71.8426ZM78.8002 67.4995C78.8002 70.1504 76.6512 72.2995 74.0002 72.2995C71.3492 72.2995 69.2002 70.1504 69.2002 67.4995C69.2002 64.8485 71.3492 62.6995 74.0002 62.6995C76.6512 62.6995 78.8002 64.8485 78.8002 67.4995ZM60.7204 70.8597C60.2672 70.2553 59.5559 69.8997 58.8004 69.8997C58.045 69.8997 57.3337 70.2553 56.8804 70.8597L47.2804 83.6597C46.4851 84.72 46.7 86.2244 47.7604 87.0197C48.8208 87.8149 50.3251 87.6 51.1204 86.5397L58.8004 76.2997L66.4804 86.5397C66.8979 87.0962 67.5363 87.4443 68.2303 87.4936C68.9243 87.5429 69.6055 87.2887 70.0975 86.7967L74.8004 82.0938L79.5034 86.7967C80.4406 87.734 81.9602 87.734 82.8975 86.7967C83.8347 85.8595 83.8347 84.3399 82.8975 83.4026L76.4975 77.0026C75.5602 76.0653 74.0406 76.0653 73.1034 77.0026L68.6601 81.4459L60.7204 70.8597Z",fill:"#3C46FF"}),(0,a.jsxs)("defs",{children:[(0,a.jsx)("clipPath",{id:"clip0_3605_64419",children:(0,a.jsx)("rect",{width:"56",height:"56",fill:"white",transform:"translate(0 26.9939) rotate(-15)"})}),(0,a.jsx)("clipPath",{id:"clip1_3605_64419",children:(0,a.jsx)("rect",{width:"64",height:"64",fill:"white",transform:"translate(69.5645 0.5) rotate(15)"})})]})]})},o=e=>{let{className:t}=e;return(0,a.jsxs)(r.A0,{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",className:t,children:[(0,a.jsx)("rect",{width:"36",height:"36",rx:"6",fill:"#10A37F"}),(0,a.jsx)("path",{d:"M15.5 10.5H12.1667C11.2462 10.5 10.5 11.2462 10.5 12.1667V13.5V18M15.5 10.5H23.8333C24.7538 10.5 25.5 11.2462 25.5 12.1667V13.5V18M15.5 10.5V25.5M15.5 25.5H18H23.8333C24.7538 25.5 25.5 24.7538 25.5 23.8333V18M15.5 25.5H12.1667C11.2462 25.5 10.5 24.7538 10.5 23.8333V18M10.5 18H25.5",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]})},l=e=>{let{className:t}=e;return(0,a.jsxs)(r.A0,{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",className:t,children:[(0,a.jsx)("rect",{width:"36",height:"36",rx:"6",fill:"#FF5588"}),(0,a.jsx)("path",{d:"M19.6663 9.66663H12.9997C12.5576 9.66663 12.1337 9.84222 11.8212 10.1548C11.5086 10.4673 11.333 10.8913 11.333 11.3333V24.6666C11.333 25.1087 11.5086 25.5326 11.8212 25.8451C12.1337 26.1577 12.5576 26.3333 12.9997 26.3333H22.9997C23.4417 26.3333 23.8656 26.1577 24.1782 25.8451C24.4907 25.5326 24.6663 25.1087 24.6663 24.6666V14.6666L19.6663 9.66663Z",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M19.667 9.66663V14.6666H24.667",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M21.3337 18.8334H14.667",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M21.3337 22.1666H14.667",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M16.3337 15.5H15.5003H14.667",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]})},s=e=>{let{className:t}=e;return(0,a.jsxs)(r.A0,{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",className:t,children:[(0,a.jsx)("rect",{width:"36",height:"36",rx:"6",fill:"#F8CA27"}),(0,a.jsx)("path",{d:"M10.5 14V13.5V12.1667C10.5 11.2462 11.2462 10.5 12.1667 10.5H15.5H23.8333C24.7538 10.5 25.5 11.2462 25.5 12.1667V13.5V14M10.5 14V23.8333C10.5 24.7538 11.2462 25.5 12.1667 25.5H15.5H18H23.8333C24.7538 25.5 25.5 24.7538 25.5 23.8333V14M10.5 14H25.5M14 21.5L16.5 19L19 20.5L22 17.5",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]})},c=e=>{let{className:t}=e;return(0,a.jsxs)(r.A0,{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",className:t,children:[(0,a.jsx)("rect",{width:"36",height:"36",rx:"6",fill:"#B161FD"}),(0,a.jsx)("path",{d:"M26.3337 23.8333C26.3337 24.2754 26.1581 24.6993 25.8455 25.0118C25.5329 25.3244 25.109 25.5 24.667 25.5H11.3337C10.8916 25.5 10.4677 25.3244 10.1551 25.0118C9.84259 24.6993 9.66699 24.2754 9.66699 23.8333V12.1667C9.66699 11.7246 9.84259 11.3007 10.1551 10.9882C10.4677 10.6756 10.8916 10.5 11.3337 10.5H15.5003L17.167 13H24.667C25.109 13 25.5329 13.1756 25.8455 13.4882C26.1581 13.8007 26.3337 14.2246 26.3337 14.6667V23.8333Z",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]})},u=e=>{let{className:t}=e;return(0,a.jsxs)(r.A0,{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",className:t,children:[(0,a.jsx)("rect",{width:"36",height:"36",rx:"6",fill:"#0000FF"}),(0,a.jsx)("path",{d:"M18.833 9.66663H12.9997C12.5576 9.66663 12.1337 9.84222 11.8212 10.1548C11.5086 10.4673 11.333 10.8913 11.333 11.3333V24.6666C11.333 25.1087 11.5086 25.5326 11.8212 25.8451C12.1337 26.1577 12.5576 26.3333 12.9997 26.3333H22.9997C23.4417 26.3333 23.8656 26.1577 24.1782 25.8451C24.4907 25.5326 24.6663 25.1087 24.6663 24.6666V15.5L18.833 9.66663Z",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M18.833 9.66663V15.5H24.6663",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]})},d=e=>{let{className:t}=e;return(0,a.jsxs)(r.A0,{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",className:t,children:[(0,a.jsx)("rect",{width:"36",height:"36",rx:"6",fill:"#FF6E3C"}),(0,a.jsx)("path",{d:"M21.333 23L26.333 18L21.333 13",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M14.667 13L9.66699 18L14.667 23",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]})}},63980:function(e,t,n){n.d(t,{Y:function(){return x}});var r=n(94521),a=n(85734),i=n(4702),o=n(14314),l=n(86021),s=n(63584),c=n(93747),u=n(62984),d=n(68306),f=n(5443),p=n(73965),m=n(32228),g=n(651);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let x=e=>{let{clientThreadId:t,serverDrivenRateLimitsEnabled:n,rateLimitPopup:r,fileUploadRateLimit:a,children:o}=e,u=(0,l.Ao)(t),d=(0,i.t)(),f=n&&!!r||!n&&!!a;return(0,g.jsx)(g.Fragment,{children:f?(0,g.jsxs)(s.fC,{delayDuration:150,onOpenChange:e=>{if(null!=a&&e){var t;c.A.logPopoverHover({type:"rate_limit",location:"file_upload",plan_type:null!==(t=null==d?void 0:d.planType)&&void 0!==t?t:"unknown"})}},children:[(0,g.jsx)(s.xz,{children:o}),(0,g.jsx)(s.h_,{children:(0,g.jsx)(p.M4,{$as:s.VY,side:"top",sideOffset:4,className:"max-w-[260px]",children:n?(0,g.jsx)(b,{isNewConversation:u,rateLimitPopup:r}):(0,g.jsx)(y,{isNewConversation:u,featureRateLimit:a})})})]}):o})},b=e=>{let{isNewConversation:t=!1,rateLimitPopup:n}=e,r=(0,i.t)();if(null==n)return null;let{call_to_action:o,description:l}=n,s=l||(0,g.jsx)(u.Z,v({},j.defaultDescription)),d=null==o?void 0:o.includes(a.Ev.GET_PLUS);return(0,g.jsxs)("div",{className:"p-2 text-sm text-token-text-primary",children:[(0,g.jsx)("div",{children:s}),d?(0,g.jsx)(f.z,{size:"small",color:"secondary",className:"mt-3",onClick:()=>{var e;(0,m.MG)("Rate limited file upload popover"),c.A.logRateLimitGetPlusButtonClicked({type:a.X5.FILE_UPLOAD,location:"popover",plan_type:null!==(e=null==r?void 0:r.planType)&&void 0!==e?e:"unknown",is_hard_block:!1,is_new_conversation:t,hard_block_reason:""})},children:(0,g.jsx)(u.Z,v({},j.getPlus))}):null]})},y=e=>{let{isNewConversation:t=!1,featureRateLimit:n}=e,r=(0,i.t)();if(null==n)return null;let{display_description:l}=n,s=(0,g.jsx)(u.Z,v({},j.defaultDescription)),d=!0,p="popover";return l&&(s=l.description||s,d=n.call_to_action===a.Pt.GET_PLUS,p=l.type),(0,g.jsxs)("div",{className:"p-2 text-sm text-token-text-primary",children:[(0,g.jsx)("div",{children:s}),d?(0,g.jsx)(f.z,{size:"small",color:"secondary",className:"mt-3",onClick:()=>{var e;(0,m.MG)("Rate limited file upload popover"),c.A.logRateLimitGetPlusButtonClicked({type:(0,o.EJ)(n),location:p,plan_type:null!==(e=null==r?void 0:r.planType)&&void 0!==e?e:"unknown",is_hard_block:!1,hard_block_reason:"",is_new_conversation:t})},children:(0,g.jsx)(u.Z,v({},j.getPlus))}):null]})},j=(0,d.vU)({defaultDescription:{id:"U5qAWP",defaultMessage:"You've reached your daily upload limit. Get ChatGPT Plus to unlock more."},getPlus:{id:"TeyLcp",defaultMessage:"Get Plus"}})},52868:function(e,t,n){n.d(t,{l:function(){return L},Z:function(){return E}});var r,a=n(41141),i=n(21904),o=n(93223),l=n(98506),s=n(59031),c=n(19841),u=n(92379),d=n(75172),f=n(68306),p=n(74091),m=n(72693),g=n(1985),h=n(62484),v=n(92426),x=n(50684),b=n(67625),y=n(651);let j=e=>{let{className:t,contextConnector:n,extension:r}=e,a=b.pC;switch(n){case i.PO.GDRIVE:case i.PO.GDRIVE_SYNC_CONNECTOR:switch(r){case"doc":case"docx":a=v.UkS;break;case"xls":case"xlsx":a=v.UWy;break;case"ppt":case"pptx":a=v.rJj;break;default:a=v.Gle}break;case i.PO.O365_BUSINESS:case i.PO.O365_PERSONAL:case i.PO.O365:switch(r){case"doc":case"docx":a=v.TLO;break;case"xls":case"xlsx":a=v.$7;break;case"ppt":case"pptx":a=v.Y5F;break;default:a=v.Vpj}}return(0,y.jsx)("div",{className:"".concat(t," flex items-center justify-center rounded-md border border-gray-100 bg-gray-50 dark:border-white/10 dark:bg-token-main-surface-secondary"),children:(0,y.jsx)(a,{className:"w-[20px]"})})};var w=n(65938),O=n(58543);function k(e){var t,n;let{fileName:r,icon:a,loadingPercentage:i,contextConnectorInfo:o}=e,l=(0,d.Z)(),s=void 0!==i&&i<100,u=(0,O.$p)(r),f=null!==(t=null==o?void 0:o.syntheticExtension)&&void 0!==t?t:null,p=null!=o&&o.contextConnector?(0,y.jsx)(w.i5,{contextConnector:o.contextConnector,extension:null!==(n=null!=f?f:u)&&void 0!==n?n:null}):function(e){if((0,O.CO)(e))return l.formatMessage(T.fileDescImage);switch(u){case"py":return"Python";case"js":case"jsx":return"JavaScript";case"ts":case"tsx":return"TypeScript";case"pdf":return"PDF";case"doc":case"docx":case"txt":return l.formatMessage(T.fileDescDocument);case"zip":return l.formatMessage(T.fileDescZip);case"xls":case"xlsx":case"csv":return l.formatMessage(T.fileDescSpreadsheet);case"ppt":case"pptx":case"key":return l.formatMessage(T.fileDescPresentation);default:return l.formatMessage(T.fileDescFile)}}(r);return(0,y.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[null!=a&&!1!==a?(0,y.jsxs)("div",{className:"relative h-10 w-10 overflow-hidden rounded-md border border-token-border-heavy",children:[a,s&&(0,y.jsx)(P,{percentage:i,blurBackground:!0})]}):(0,y.jsx)("div",{className:"relative h-10 w-10 shrink-0 overflow-hidden rounded-md",children:s?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:(0,c.default)("inset-0",M,function(e,t){if(t)return"bg-gray-50 dark:bg-token-main-surface-secondary border rounded-md border-gray-100 dark:border-white/10";switch((0,O.$p)(e)){case"py":case"js":case"jsx":case"ts":case"tsx":return"bg-[#FF6E3C]";case"doc":case"docx":case"txt":case"pdf":return"bg-[#FF5588]";case"zip":return"bg-[#B161FD]";case"ppt":case"pptx":case"key":return"bg-[#F8CA27]";case"xls":case"xlsx":case"csv":return"bg-[#10A37F]";default:return"bg-blue"}}(r,null==o?void 0:o.contextConnector))}),(0,y.jsx)(P,{percentage:o?null:i})]}):(0,y.jsx)(C,{filename:r,contextConnectorInfo:o})}),(0,y.jsxs)("div",{className:"overflow-hidden",children:[(0,y.jsx)("div",{className:"truncate font-semibold",children:(0,O.Ad)(r,f)}),(0,y.jsx)("div",{className:"truncate text-token-text-tertiary",children:p})]})]})}function P(e){let{percentage:t,blurBackground:n=!1}=e;return(0,y.jsx)("div",{className:(0,c.default)("absolute inset-0 flex items-center justify-center text-white",n&&"bg-black/5 backdrop-blur-sm"),children:t?(0,y.jsx)(m.Z,{percentage:t,className:"h-6 w-6"}):(0,y.jsx)(x.Z,{className:"h-6 w-6 text-token-text-secondary"})})}let M="h-10 w-10 flex-shrink-0";function C(e){let{filename:t,contextConnectorInfo:n}=e;if(n){var r,a;return(0,y.jsx)(j,{contextConnector:n.contextConnector,extension:null!==(r=null!==(a=n.syntheticExtension)&&void 0!==a?a:(0,O.$p)(t))&&void 0!==r?r:null,className:M})}switch((0,O.$p)(t)){case"py":case"js":case"jsx":case"ts":case"tsx":return(0,y.jsx)(b.yc,{className:M});case"doc":case"docx":case"txt":case"pdf":return(0,y.jsx)(b.tf,{className:M});case"zip":return(0,y.jsx)(b.LO,{className:M});case"ppt":case"pptx":case"key":return(0,y.jsx)(b.N,{className:M});case"xls":case"xlsx":case"csv":return(0,y.jsx)(b.OD,{className:M});default:return(0,y.jsx)(b.pC,{className:M})}}let T=(0,f.vU)({fileDescDocument:{id:"FileDataView.fileDescDocument",defaultMessage:"Document"},fileDescZip:{id:"FileDataView.fileDescZip",defaultMessage:"Zip Archive"},fileDescSpreadsheet:{id:"FileDataView.fileDescSpreadsheet",defaultMessage:"Spreadsheet"},fileDescPresentation:{id:"FileDataView.fileDescPresentation",defaultMessage:"Presentation"},fileDescImage:{id:"FileDataView.fileDescImage",defaultMessage:"Image"},fileDescFile:{id:"FileDataView.fileDescFile",defaultMessage:"File"}});function _(e){return e instanceof File}function S(e){let{downloadLink:t}=e,n=(0,u.useCallback)(()=>{var e;let n=document.createElement("a");n.href=t,n.setAttribute("download",null!==(e=t.split("/").pop())&&void 0!==e?e:"downloaded_file"),document.body.appendChild(n),n.click(),document.body.removeChild(n)},[t]);return(0,y.jsx)("button",{onClick:n,children:(0,y.jsx)(v._8t,{className:"icon-sm m-1.5"})})}function E(e){let{onRemoveFileClick:t,file:n,fileId:r,gizmoId:a,loadingPercentage:i,contextConnectorInfo:o,width:l="normal",alwaysShowData:s=!1,showDownloadButton:u=!1,downloadLink:f=""}=e,p=(0,d.Z)(),g=void 0!==i&&i<100,x=_(n)?n.name:n,b=_(n)&&(null==n?void 0:n.type.startsWith("image/"))||(0,O.CO)(x)&&null!=r,j=b&&(0,y.jsx)(L,{file:n,fileId:r,gizmoId:a,contextConnectorInfo:o}),w=b?void 0:null==o?void 0:o.sourceUrl;return(0,y.jsxs)("div",{className:"group relative inline-block text-sm text-token-text-primary",children:[(0,y.jsx)(A,{showTooltip:!t,sourceUrl:w,className:"relative overflow-hidden rounded-xl border border-token-border-light bg-token-main-surface-primary",children:b&&!s?(0,y.jsxs)("div",{className:"h-14 w-14",children:[j,g&&(0,y.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/5 text-white",children:(0,y.jsx)(m.Z,{percentage:i,className:"h-6 w-6"})})]}):(0,y.jsxs)("div",{className:(0,c.default)("p-2","wide"===l?"w-80":"w-60"),children:[(0,y.jsx)(k,{fileName:x,icon:j,loadingPercentage:i,contextConnectorInfo:o}),u&&""!==f&&(0,y.jsx)("div",{className:"absolute right-1 top-1",children:(0,y.jsx)(S,{downloadLink:f})})]})}),null!=t&&(0,y.jsx)("button",{onClick:t,className:"absolute right-1 top-1 -translate-y-1/2 translate-x-1/2 rounded-full border border-token-border-heavy bg-token-main-surface-secondary p-0.5 text-token-text-primary transition-colors hover:opacity-100 group-hover:opacity-100 md:opacity-0",children:(0,y.jsx)(h.u,{label:p.formatMessage(I.removeFile),side:"top",sideOffset:4,children:(0,y.jsx)(v.tPq,{className:"icon-sm"})})})]})}let N=p.Z.span(r||(r=(0,a.Z)(["flex items-center h-full w-full justify-center bg-gray-500 dark:bg-gray-700 bg-cover bg-center text-white"])));function D(){return(0,y.jsx)(N,{})}function L(e){let{file:t,fileId:n,gizmoId:r,contextConnectorInfo:a}=e,l=(0,d.Z)(),c=_(t)?t.name:t,f=function(e,t,n,r,a){let{0:l,1:c}=(0,u.useState)(void 0);return(0,u.useEffect)(()=>{async function l(e){try{let t=await o.Z.getFileDownloadLink(e,r);t.status===i.KF.Success?c(t.download_url):s.U.addError("Error fetching URL for file ".concat(e,": ").concat(t.status))}catch(t){s.U.addError(Error("Error fetching URL for file ".concat(e,")"),{cause:t}))}}if(a)n&&l(n);else if(null!=e&&e.type.startsWith("image/")&&!a){let t=new FileReader;t.addEventListener("load",()=>{let e=t.result;c("string"==typeof e?e:void 0)}),t.readAsDataURL(e)}else(0,O.CO)(t)&&null!=n?l(n):c(void 0)},[e,t,n,r,a]),l}(_(t)?t:null,c,n,r,a);return null==f?(0,y.jsx)(D,{}):(0,y.jsx)(g.l,{src:f,alt:l.formatMessage(I.userUploadedImage),contextConnectorSourceUrl:null==a?void 0:a.sourceUrl,className:"h-full w-full",children:(0,y.jsx)(N,{style:{backgroundImage:"url(".concat(f,")")}})})}let I=(0,f.vU)({removeFile:{id:"FileTile.removeFile",defaultMessage:"Remove file"},userUploadedImage:{id:"FileTile.userUploadedImage",defaultMessage:"User uploaded image"}});function A(e){let{showTooltip:t,sourceUrl:n,children:r,className:a}=e,i=(0,l.yA)();if(!n)return(0,y.jsx)("div",{className:a,children:r});let o=(0,y.jsx)("a",{href:n,target:"_blank",children:(0,y.jsx)("div",{className:a,children:r})});return t&&i?(0,y.jsx)(h.u,{wide:!0,interactive:!0,sideOffset:0,label:(0,y.jsxs)("a",{href:n,target:"_blank",className:"flex w-full items-center gap-2",children:[(0,y.jsx)("p",{className:"line-clamp-1 flex-1 text-ellipsis",children:n.split("").join("​")}),(0,y.jsx)(v.Pfi,{className:"icon-sm"})]}),side:"top",children:o}):o}},15026:function(e,t,n){n.d(t,{K:function(){return i}});var r,a=n(41141);let i=n(74091).Z.button(r||(r=(0,a.Z)(["flex items-center justify-center text-black text-token-text-primary juice:h-8 juice:w-8 dark:text-white juice:rounded-full focus-visible:outline-black dark:focus-visible:outline-white"])))},14019:function(e,t,n){n.d(t,{Z:function(){return m},s:function(){return g}});var r=n(94521),a=n(12586),i=n(93747),o=n(15236),l=n(17485),s=n(75172),c=n(68306),u=n(63980),d=n(15026),f=n(651);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){let{clientThreadId:t,getInputProps:n,openFileDialog:l,uploadType:c,icon:m}=e,g=(0,s.Z)(),{serverDrivenRateLimitsEnabled:h,isDisabled:v,fileUploadRateLimit:x,rateLimitPopup:b}=(0,a.hC)(),y=(0,f.jsx)(d.K,{className:"juice:mb-1 juice:ml-1.5",disabled:v,onClick:e=>{e.preventDefault(),i.A.logEvent(o.M.openFileViewer,{intent:c.toString()}),l()},"aria-label":g.formatMessage({id:"PromptFilePicker.attachFiles",defaultMessage:"Attach files"}),children:m}),j=(0,f.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({disabled:v},n({className:"hidden"}))),w=(0,f.jsxs)("div",{className:"flex",children:[y,j]});return(0,f.jsx)(u.Y,{clientThreadId:t,serverDrivenRateLimitsEnabled:h,fileUploadRateLimit:x,rateLimitPopup:b,children:w})}function g(e){let{code:t,message:n}=e;switch(t){case l.jK.FileTooLarge:return h.errorFileTooLarge;case l.jK.TooManyFiles:return i.A.logEvent(o.M.uploadedMaxFilesError),h.errorTooManyFiles;default:return n}}let h=(0,c.vU)({attachImages:{id:"PromptFilePicker.attachImages",defaultMessage:"Attach images"},attachFiles:{id:"PromptFilePicker.attachFiles",defaultMessage:"Attach files"},errorFileTooLarge:{id:"PromptFilePicker.errorFileTooLarge",defaultMessage:"Your file is too large. The maximum file size is {size}MB."},errorTooManyFiles:{id:"PromptFilePicker.errorTooManyFiles",defaultMessage:"You may only upload {maxNum} files at a time."},defaultFileUploadRateLimited:{id:"U5qAWP",defaultMessage:"You've reached your daily upload limit. Get ChatGPT Plus to unlock more."},getPlusButton:{id:"TeyLcp",defaultMessage:"Get Plus"}})},18532:function(e,t,n){n.d(t,{$e:function(){return i},EZ:function(){return o},Ql:function(){return a},dO:function(){return r},xC:function(){return l}});let r=10,a=4,i={duration:20,hasCloseButton:!0},o=512,l=536870912},61457:function(e,t,n){n.d(t,{AJ:function(){return o},XX:function(){return s},xA:function(){return l}});var r,a,i=n(20055);let o=((r={})[r.None=0]="None",r[r.Multimodal=1]="Multimodal",r[r.Interpreter=2]="Interpreter",r[r.Retrieval=3]="Retrieval",r[r.ContextConnector=4]="ContextConnector",r[r.ProfilePicture=5]="ProfilePicture",r);function l(e){if(e)return{contextConnector:e.context_connector,sourceUrl:e.source_url,syntheticExtension:(0,i.o)(e.synthetic_extension),type:e.type}}let s=((a={}).Uploading="uploading",a.Ready="ready",a)},37234:function(e,t,n){n.d(t,{R3:function(){return j},W7:function(){return x},cT:function(){return y},lU:function(){return w},po:function(){return b}});var r=n(94521),a=n(21904),i=n(93223),o=n(91208),l=n(93747),s=n(15236),c=n(59031),u=n(68306),d=n(34565),f=n(94982),p=n(14161),m=n(58543);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let v={duration:20,hasCloseButton:!0};function x(e){return JSON.stringify({file:e.name,modified:e.lastModified,currentTime:new Date().toString()})}function b(e){return new Promise((t,n)=>{let r=new FileReader,a=new Image;r.onload=()=>{a.onload=()=>t(a),a.onerror=e=>n(e),a.src=r.result},r.readAsDataURL(e)})}async function y(e,t,n,r,c,u){var p,m,g;let h=d.N.getState().resetRateLimits,x=a.EG.Initial;l.A.logEvent(s.M.uploadFileInitiated,{client:"web",useCase:r.kind,uploadEntry:"local"});let b=u.usesRetrievalIndex?performance.now():void 0;try{let{file_id:o,upload_url:l}=await i.Z.createFile(t.name,t.size,r,!!h);c.onFileCreated(e,o,l),x=a.EG.FileCreated;let s=r.kind===a.Ei.Gizmo?r.gizmoId:void 0,d=null!==(p=u.shouldUpdateProgress)&&void 0!==p&&p,g=null!==(m=u.usesRetrievalIndex)&&void 0!==m&&m,y=await i.Z.uploadFileToAzureStorage(t,l,t=>{d&&c.onFileUploadProgress(e,10+80*t)});if(c.onFileUploadProgress(e,90),201!==y.status&&k(y,o,g),x=a.EG.FileUploaded,await i.Z.processFileUpload(o,{gizmoId:s}),x=a.EG.FileProcessed,u.usesRetrievalIndex){let t=await O(o,s);(null==t?void 0:t.status)===a.Xf.Skipped&&f.m.danger(n.formatMessage(M.retrievalSkippedFile,{fileName:t.name}),v),c.onFileUploaded(e,o,void 0,{fileTokenSize:t.file_size_tokens}),x=a.EG.RetrievalIndexCreated}else c.onFileUploaded(e,o,u.imageDimensions);null!=b&&i.Z.postRetrievalTiming({e2eLatencyMs:performance.now()-b,type:"file"})}catch(i){P(n,t.name,i);let a="NotInstanceOfError";i instanceof o.gK?a=i.name:i instanceof o.Q0?a="FatalServerError_type_".concat(null!==(g=i.type)&&void 0!==g?g:"undefined"):i instanceof Error?a=i.name:i instanceof o.vq&&(a=i.name),c.onError(e,"error",a,r,x)}}async function j(e,t,n,r,u,d,g){let x=performance.now();l.A.logEvent(s.M.uploadFileInitiated,{client:"web",useCase:n.kind,contextConnector:u.contextConnector,fileSourceType:u.type});let b=a.EG.Initial;n.kind===a.Ei.Gizmo&&(n=h(h({},n),{},{kind:r.includes(t.type)?a.Ei.Multimodal:a.Ei.MyFiles}));try{let r=await i.Z.uploadConnectorAPI(e,u.contextConnector,n,t,d,u.o365DriveId);switch(r.type){case"error":throw function(e){let{status_code:t,error_code:n,error_message:r}=e;if(!t||!(t<500))return new o.Q0(r);{let e="internal_error";return n?e=n:404===t?e="file_not_found":403===t?e="permission_error":413===t&&(e="file_too_large"),new o.vq(r,e)}}(r.error);case"file":switch(p.MP.onFileCreated(e,r.file.id,"",u.contextConnector),b=a.EG.FileProcessed,n.kind){case a.Ei.MyFiles:{p.MP.onFileUploadProgress(e,90);let t=await O(r.file.file_id,d);(null==t?void 0:t.status)===a.Xf.Skipped&&f.m.danger(g.formatMessage(M.retrievalSkippedFile,{fileName:t.name}),v),p.MP.onFileUploaded(e,r.file.file_id,void 0,{fileTokenSize:t.file_size_tokens,mimeType:r.file.mime_type}),b=a.EG.RetrievalIndexCreated;break}case a.Ei.Multimodal:p.MP.onFileUploaded(e,r.file.file_id,{width:512,height:512},{mimeType:r.file.mime_type});break;case a.Ei.AceUpload:p.MP.onFileUploaded(e,r.file.file_id,void 0,{mimeType:r.file.mime_type});break;case a.Ei.DalleAgent:case a.Ei.Gizmo:case a.Ei.ProfilePicture:throw new o.vq("Use case not supported by cloud doc: ".concat(n.kind))}break;case"folder":throw new o.vq("Folder type not supported")}i.Z.postRetrievalTiming({e2eLatencyMs:performance.now()-x,type:u.contextConnector})}catch(r){c.U.addError(Error("Failed to upload connected file by ".concat(u.contextConnector),{cause:r})),P(g,(0,m.Ad)(t.name,null==u?void 0:u.syntheticExtension),r);let n="NotInstanceOfError";if(r instanceof o.Q0){var y;n="FatalServerError_type_".concat(null!==(y=r.type)&&void 0!==y?y:"undefined")}else(r instanceof o.gK||r instanceof Error||r instanceof o.vq)&&(n=r.name);p.MP.onError(e,"error",n,{kind:a.Ei.MyFiles},b)}}async function w(e,t,n,r,a){let{width:i,height:o}=await b(t);return y(e,t,n,{kind:r},a,{imageDimensions:{width:i,height:o}})}async function O(e,t){let n=Date.now()+6e4,r=e=>new Promise(t=>setTimeout(t,e)),l=0;for(;Date.now()<n;){let n=await i.Z.getRetrievalStatus(e,t);if(n.status===a.Xf.Success||n.status===a.Xf.Skipped)return n;if(n.status===a.Xf.Failed)throw new o.vq("Context extraction failed",n.error_code);l++,await r(Math.min(1e3,100*l))}throw new o.vq("Retrieval indexing timed out")}async function k(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r="Unknown error";try{r=await e.data}catch(e){}throw n&&i.Z.markFileUploadFailed(t,{error:r}),new o.vq("File upload to blobstore failed","failed_upload_to_blobstore")}function P(e,t,n){let r=(0,m.kr)(e,"default_upload_error",{fileName:t});n instanceof o.vq&&null!=n.code&&(r=(0,m.kr)(e,n.code)),f.m.danger(r,v)}let M=(0,u.vU)({retrievalSkippedFile:{id:"useFilePickerState.retrievalSkippedFile",defaultMessage:'Unable to extract text from "{fileName}"'}})},14161:function(e,t,n){n.d(t,{Dw:function(){return y},HR:function(){return b},MP:function(){return j},gF:function(){return x}});var r=n(94521),a=n(21904),i=n(93747),o=n(15236),l=n(59031),s=n(68306),c=n(68810),u=n(94982),d=n(18532),f=n(61457),p=n(37234),m=n(58543);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let v={files:[],connectorFileData:{}},x=(0,c.Ue)(()=>v),b={hasUploadInProgress:e=>{let{files:t}=e;return t.some(e=>e.status===f.XX.Uploading)},getReadyFiles:e=>{let{files:t}=e;return t.filter(e=>e.status===f.XX.Ready)}},y={reset:()=>{x.setState(v)},uploadFile:async function(e,t,n,r,s){let c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},g=arguments.length>6?arguments[6]:void 0,h=arguments.length>7?arguments[7]:void 0,{gizmoId:v}=c,b=x.getState().files,y=(0,m.xs)(n,t.name,t.type,null==h?void 0:h.contextConnector,g),O={tempId:e,gizmoId:c.gizmoId,status:f.XX.Uploading,file:t,progress:1,fileId:null,cdnUrl:null,contextConnectorInfo:h,contextConnector:null==h?void 0:h.contextConnector};if(b.length===d.dO)i.A.logEvent(o.M.uploadedMaxFilesError),u.m.danger(s.formatMessage(w.maxUploadsAtATime,{maxUploads:d.dO,fileName:t.name}),d.$e);else if(b.some(t=>t.tempId===e))i.A.logEvent(o.M.uploadedDuplicateFileError),u.m.danger(s.formatMessage(w.duplicateFileAttached,{fileName:t.name.length>20?t.name.slice(0,19)+"…":t.name}),d.$e);else{let n;x.setState(e=>{let{files:t}=e;return{files:[...t,O]}});let i={};if(r.includes(t.type)){if(n={kind:a.Ei.Multimodal},!h){let{width:e,height:n}=await (0,p.po)(t);if(e>2048||n>2048)try{let r=await (0,m.Tu)(t,2048),a=await (0,p.po)(r);e=a.width,n=a.height,t=r}catch(e){l.U.addError(Error("Error resizing image:",{cause:e}))}i.imageDimensions={width:e,height:n}}}else switch(y){case f.AJ.Multimodal:throw Error("Multimodal file upload not supported mime type, ".concat(t.type,"\nSupported mime types: ")+r.join(", "));case f.AJ.Interpreter:n={kind:a.Ei.AceUpload};break;case f.AJ.Retrieval:n={kind:a.Ei.MyFiles},i.usesRetrievalIndex=!0;break;case f.AJ.ProfilePicture:throw Error("cannot upload profile picture via uploadFile");case f.AJ.ContextConnector:case f.AJ.None:return}null!=v&&(n={kind:a.Ei.Gizmo,gizmoId:v}),c.skipUpload||(h?await (0,p.R3)(e,t,n,r,h,c.gizmoId,s):await (0,p.cT)(e,t,s,n,j,i))}},createFileCompleted:(e,t,n,r)=>{let a=x.getState().files,i=a.findIndex(t=>t.tempId===e),o=a[i];if(i>=0&&o.status===f.XX.Uploading){let e=[...a];e.splice(i,1,h(h({},o),{},{progress:10,fileId:t,cdnUrl:n,contextConnector:r})),x.setState({files:e})}},updateProgress:(e,t)=>{let n=x.getState().files,r=n.findIndex(t=>t.tempId===e),a=n[r];if(r>=0&&a.status===f.XX.Uploading){let e=[...n];e.splice(r,1,h(h({},a),{},{progress:t})),x.setState({files:e})}},uploadCompleted:(e,t,n,r,a)=>{let l=x.getState().files,s=l.findIndex(t=>t.tempId===e);if(s>=0&&l[s].status===f.XX.Uploading&&null!=l[s].fileId){var c,u,d;let t=l[s],p=[...l],g=h(h({},t),{},{tempId:e,status:f.XX.Ready,progress:100,fileSpec:h(h({name:t.file.name,id:t.fileId,size:t.file.size,contextConnectorInfo:t.contextConnectorInfo,mimeType:null!==(c=null!==(u=null==r?void 0:r.mimeType)&&void 0!==u?u:t.file.type)&&void 0!==c?c:(0,m.s1)(t.file.name)},n||{}),r||{})});p.splice(s,1,g);let v=h({},x.getState().connectorFileData);a&&(v[null==a?void 0:a.file_id]=a),x.setState({files:p,connectorFileData:v}),i.A.logEvent(o.M.uploadFileCompleted,{status:t.status,fileId:t.fileId,contextConnector:null!==(d=t.contextConnector)&&void 0!==d?d:"local"})}},remove:(e,t,n,r,a)=>{let l=x.getState().files,s=l.findIndex(t=>t.tempId===e);if(s>=0){let e=l[s];"error"===t?i.A.logEvent(o.M.uploadFileError,{status:e.status,fileId:e.fileId,client:"web",errorClassName:null!=n?n:"undefined",useCaseType:r,uploadStatus:null!=a?a:"undefined",contextConnector:e.contextConnector}):i.A.logEvent(o.M.removeFile,{status:e.status,fileId:e.fileId});let c=[...l];c.splice(s,1),x.setState({files:c})}}},j={onFileCreated:y.createFileCompleted,onFileUploadProgress:y.updateProgress,onFileUploaded:y.uploadCompleted,onError:y.remove},w=(0,s.vU)({maxUploadsAtATime:{id:"useFilePickerState.maxUploadsAtATime",defaultMessage:"Unable to upload {fileName}. Max {maxUploads} uploads at a time"},duplicateFileAttached:{id:"useFilePickerState.duplicateFileAttached",defaultMessage:"Unable to upload {fileName} because an identical file has already been attached to this message."}})},58543:function(e,t,n){n.d(t,{$H:function(){return g},$p:function(){return T},Ad:function(){return I},B:function(){return L},BV:function(){return E},CO:function(){return _},Iy:function(){return p},KL:function(){return M},L8:function(){return m},O6:function(){return x},Tu:function(){return N},VF:function(){return v},Vm:function(){return S},WI:function(){return D},YN:function(){return y},Z8:function(){return C},Zp:function(){return k},_0:function(){return O},kr:function(){return h},p0:function(){return P},s1:function(){return j},ww:function(){return b},xs:function(){return w}});var r=n(21904),a=n(85734),i=n(93223),o=n(50406),l=n(59031),s=n(92379),c=n(75172),u=n(68306),d=n(94982),f=n(61457);function p(e){return e.replace("file-service://","")}function m(e){return"file-service://"+e}function g(e){return e.startsWith("file-service://")}function h(e,t,n){switch(t){case"file_zero_bytes":return e.formatMessage(A.fileZeroBytes,n);case"file_too_large":return e.formatMessage(A.fileTooLarge,n);case"over_user_quota":return e.formatMessage(A.overUserQuota,n);case"file_not_found":case"file_expired":return e.formatMessage(A.fileNotFound,n);case"file_timed_out":return e.formatMessage(A.fileTimedOut,n);case"ace_pod_expired":return e.formatMessage(A.codeInterpreterSessionTimeout,n);case"permission_error":return e.formatMessage(A.permissionError,n);case"default_upload_error":case"file_rejected":return e.formatMessage(A.defaultCreateEntryError,n);case"default_download_link_error":return e.formatMessage(A.defaultDownloadLinkError,n);case"file_empty":return e.formatMessage(A.fileEmpty,n);case"too_many_tokens":return e.formatMessage(A.fileTooManyTokens,n);case"file_encrypted":return e.formatMessage(A.fileEncrypted,n);case"file_corrupted":return e.formatMessage(A.fileCorrupted,n);case"failed_upload_to_blobstore":return e.formatMessage(A.failedUploadToBlobStore,n);default:return e.formatMessage(A.unknownError)}}function v(){let e=(0,c.Z)();return(0,s.useCallback)((t,n)=>h(e,t,n),[e])}function x(){let{session:e}=(0,o.kP)(),t=(0,c.Z)();return async(n,a)=>{if(null==e)return d.m.danger(t.formatMessage(A.fileDownloadFailed)),!1;try{var o;let e=await i.Z.getFileDownloadLink(n);if(e.status!==r.KF.Success)throw Error("File is not ready to download: "+JSON.stringify(e));let t=null===(o=e.metadata)||void 0===o||null===(o=o.context_connector)||void 0===o?void 0:o.url;if(null!=t)window.open(t,"_blank");else{let t=e.download_url,n=document.createElement("a");n.href=t,n.download=a,n.click(),window.open(t,"_blank")}}catch(e){return d.m.danger(t.formatMessage(A.fileDownloadFailed)),!1}return!0}}function b(e,t){if((null==t?void 0:t.kind)===a.OL.GizmoInteraction||(null==t?void 0:t.kind)===a.OL.GizmoTest){var n;return null===(n=t.gizmo)||void 0===n?void 0:n.product_features}return null==e?void 0:e.product_features}function y(e,t){var n,a,i,o;let l=b(e,t);return(null==l||null===(n=l.attachments)||void 0===n?void 0:n.type)===r.Cd.CodeInterpreter?f.AJ.Interpreter:(null==l||null===(a=l.attachments)||void 0===a?void 0:a.type)===r.Cd.Multimodal?f.AJ.Multimodal:(null==l||null===(i=l.attachments)||void 0===i?void 0:i.type)===r.Cd.Retrieval?f.AJ.Retrieval:(null==l||null===(o=l.attachments)||void 0===o?void 0:o.type)===r.Cd.ContextConnector?f.AJ.ContextConnector:f.AJ.None}function j(e){var t;let n=null===(t=e.split(".").pop())||void 0===t?void 0:t.toLowerCase();return({md:"text/markdown",java:"text/x-java",py:"text/x-script.python",c:"text/x-c",cpp:"text/x-c++",h:"text/x-c++",php:"text/x-php",rb:"text/x-ruby",tex:"application/x-latext",ts:"text/x-typescript",cs:"text/x-csharp"})[null!=n?n:""]||""}function w(e,t,n,r,a){if(null==a)return e;let i=j(t);i&&(n=i),r&&(n=function(e){switch(e){case"application/vnd.google-apps.spreadsheet":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"application/vnd.google-apps.document":case"application/vnd.google-apps.presentation":return"text/plain";default:return e}}(n));let{accepted_mime_types:o,can_accept_all_mime_types:l}=a;return null!=o&&0!==o.length&&l?o.includes(n)?e:f.AJ.Interpreter:e}function O(e,t,n){var a,i,o;let l=""!==t?t:j(n),s=null==e||null===(a=e.product_features)||void 0===a?void 0:a.attachments;return null==s?void 0:null!==(i=s.accepted_mime_types)&&void 0!==i&&i.includes(l)?s.type:null!==(o=s.image_mime_types)&&void 0!==o&&o.includes(l)?r.Cd.Multimodal:r.Cd.CodeInterpreter}function k(e,t){var n,r;let a=b(e,t);return null!=a&&null!==(n=a.attachments)&&void 0!==n&&n.can_accept_all_mime_types?void 0:null==a||null===(r=a.attachments)||void 0===r?void 0:r.accepted_mime_types}function P(e,t){let n=b(e,t),{attachments:r}=null!=n?n:{};if(null!=r&&r.image_mime_types)return r.image_mime_types;if((null==r?void 0:r.type)==="multimodal"){var a;return null!==(a=r.accepted_mime_types)&&void 0!==a?a:M}return[]}let M=["image/png","image/jpeg","image/gif","image/webp"];function C(e){return(0,s.useMemo)(()=>{if(void 0===e)return{};let t={"image/jpeg":[".jpg",".jpeg"],"image/svg+xml":[".svg"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":[".pptx"]};return{accept:e.reduce((e,n)=>(n in t?e[n]=t[n]:n.includes("/")&&(e[n]=[".".concat(n.split("/")[1])]),e),{})}},[e])}function T(e){var t;return null===(t=e.split(".").pop())||void 0===t?void 0:t.toLowerCase()}function _(e){let t=T(e);return null!=t&&["jpg","jpeg","png","gif","webp"].includes(t)}function S(e){let t=T(e);return null!=t&&["xls","xlsx","csv"].includes(t)}function E(e){let t=T(e);return null!=t&&["xls","xlsx"].includes(t)}function N(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"fit";return new Promise((r,a)=>{let i=new FileReader;i.onerror=e=>{l.U.addError(Error("File reading has failed:",{cause:e})),a(Error("Failed to read the file."))},i.onload=i=>{let o=new Image;o.onerror=e=>{l.U.addError(Error("Image loading has failed:",{cause:e})),a(Error("Failed to load the image."))},o.onload=()=>{let i=document.createElement("canvas"),s,c=0,u=0;switch(n){case"fill":case"square":s=t/Math.min(o.width,o.height);break;case"fit":s=t/Math.max(o.width,o.height)}let d=o.width*s,f=o.height*s;"square"===n?(i.width=t,i.height=t,c=(t-d)/2,u=(t-f)/2):(i.width=d,i.height=f);let p=i.getContext("2d");if(null==p){l.U.addError("Canvas context creation failed. Your environment might not fully support HTML5 canvas."),a(Error("Failed to create canvas context."));return}p.drawImage(o,c,u,d,f);let m=e.type||"image/png";i.toBlob(t=>{t?r(new File([t],e.name,{type:m})):(l.U.addError("Blob creation failed. Blob is null."),a(Error("Failed to create blob from image data.")))},m)},null==i.target?(l.U.addError("Event target is null. Failed to load image."),a("Failed to load image.")):o.src=i.target.result},i.readAsDataURL(e)})}function D(e,t){return N(e,t,"square")}function L(e){var t,n;let r=null!==(t=e.name.split("/"))&&void 0!==t?t:[];return(null!==(n=r[r.length-1])&&void 0!==n?n:"").replace(/[-_]/g," ").split(".")[0]}function I(e,t){return t?e.slice(0,-t.length-1):e}let A=(0,u.vU)({defaultCreateEntryError:{id:"fileUpload.defaultCreateEntryError",defaultMessage:"Unable to upload {fileName}"},defaultDownloadLinkError:{id:"fileUpload.defaultDownloadLinkError",defaultMessage:"Failed to get upload status for {fileName}"},unknownError:{id:"fileUpload.unknownError",defaultMessage:"Unknown error occurred"},fileZeroBytes:{id:"fileUpload.fileZeroBytes",defaultMessage:"File is empty"},fileTooLarge:{id:"fileUpload.fileTooLarge",defaultMessage:"File is too large"},overUserQuota:{id:"fileUpload.overUserQuota",defaultMessage:"User quota exceeded"},fileNotFound:{id:"fileUpload.fileNotFound",defaultMessage:"File not found"},fileTimedOut:{id:"fileUpload.fileTimedOut",defaultMessage:"File upload timed out. Please try again."},fileEmpty:{id:"fileUpload.fileEmpty",defaultMessage:"No text could be extracted from this file."},fileTooManyTokens:{id:"fileUpload.fileTooManyTokens",defaultMessage:"This file contains too much text content. Please try again with a smaller file."},fileEncrypted:{id:"fileUpload.fileEncrypted",defaultMessage:"This file is encrypted/requires a password to access. Please try again with an unencrypted file."},fileCorrupted:{id:"fileUpload.fileCorrupted",defaultMessage:"This file is corrupted. Please ensure the file is not corrupted and try again."},codeInterpreterSessionTimeout:{id:"fileUpload.codeInterpreterSessionTimeout",defaultMessage:"Code interpreter session expired"},permissionError:{id:"fileUpload.permissionError",defaultMessage:"Missing permission to access file"},fileDownloadFailed:{id:"filesModal.fileDownloadFailed",defaultMessage:"File download failed. Please try again."},failedUploadToBlobStore:{id:"fileUpload.failedUploadToBlobStore",defaultMessage:"Failed upload to files.oaiusercontent.com. Please ensure your network settings allow access to this site or contact your network administrator."}})},83252:function(e,t,n){n.d(t,{M:function(){return c},Z:function(){return s}});var r=n(55257),a=n(92426),i=n(82823),o=n(16645),l=n(651);function s(e){let{isFirstParty:t,src:n,alt:i,className:o}=e;return(0,l.jsx)("div",{className:o,children:null!=n?(0,l.jsx)("div",{className:"gizmo-shadow-stroke overflow-hidden rounded-full",children:(0,l.jsx)("img",{src:n,className:"h-full w-full bg-token-main-surface-secondary",alt:null!=i?i:"GPT",width:80,height:80})}):(0,l.jsx)("div",{className:"gizmo-shadow-stroke relative flex h-full items-center justify-center rounded-full bg-token-main-surface-primary text-token-text-primary",children:t?(0,l.jsx)(r.nI,{className:"h-2/3 w-2/3"}):(0,l.jsx)(a.uy2,{className:"h-2/3 w-2/3 text-gray-400"})})})}function c(e){var t,n;let{gizmoId:r,className:a}=e,{data:c}=(0,i.b9)(r);return(0,l.jsx)(s,{src:null==c?void 0:c.gizmo.display.profile_picture_url,isFirstParty:null!==(t=null==c||null===(n=c.gizmo.tags)||void 0===n?void 0:n.includes(o.U9.FirstParty))&&void 0!==t&&t,className:a})}},5994:function(e,t,n){n.d(t,{Dd:function(){return r},L5:function(){return i},P_:function(){return l},aI:function(){return o},vi:function(){return s},zf:function(){return a}});let r="ChatGPT",a="Untitled",i=10,o=50,l=300,s=8e3},21629:function(e,t,n){n.d(t,{D:function(){return a},Q:function(){return i}});var r=n(92379);let a=r.createContext({mode:void 0,getGizmoId:void 0}),i=()=>(0,r.useContext)(a)},82823:function(e,t,n){n.d(t,{AG:function(){return P},Bw:function(){return y},CR:function(){return O},D2:function(){return A},DC:function(){return U},DS:function(){return W},Dq:function(){return N},EF:function(){return C},F0:function(){return R},Fi:function(){return E},HW:function(){return b},K7:function(){return ee},K9:function(){return B},M0:function(){return G},N_:function(){return q},Sg:function(){return _},UQ:function(){return $},Vw:function(){return z},WL:function(){return Q},Wd:function(){return Z},Wz:function(){return L},YR:function(){return X},Z1:function(){return Y},ZJ:function(){return V},b9:function(){return F},i6:function(){return T},kX:function(){return w},kb:function(){return H},m_:function(){return M},pJ:function(){return K},rm:function(){return J},un:function(){return k},uy:function(){return j},z5:function(){return S}});var r=n(94521),a=n(85734),i=n(16645),o=n(94982),l=n(14816),s=n(16100),c=n(14718),u=n(35226),d=n(96053),f=n(76754),p=n(43128),m=n(44104),g=n(56029),h=n(75438);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let b="GPT Builder";function y(e){let t=e.match(/(?:\/gizmo)?\/g\/([^/]+)/);if(t)return t[1]}function j(e){if(e)return"ChatGPT - ".concat(e)}function w(e){var t,n;return null!==(t=null!==(n=e.gizmo.short_url)&&void 0!==n?n:e.gizmo.id)&&void 0!==t?t:"-"}function O(e){let t=e.split("-");return t.length>1&&"g"===t[0]?"g-".concat(t[1]):t[0]}function k(e){return"/g/".concat(e)}function P(e){return"".concat("https://chatgpt.com").concat(k(e))}function M(e){return k(w(e))}function C(e,t){let n=new URLSearchParams;return null!=t&&n.set(m.l,t),(0,f.I)(new URL("".concat(M(e),"?").concat(n),"https://chatgpt.com"))}function T(e){return"/g/".concat(w(e))}function _(e){return(0,h.S9)(e)&&0===e.gizmo.live_version||(0,h.WQ)(e)&&0===e.liveVersion}function S(e,t){return(0,l.a)({queryKey:["gizmos","discovery",{locale:e,isAnon:t}],queryFn:async()=>g.U.getGizmoDiscovery(e,t)})}function E(e){let{cutId:t,locale:n,limit:r,cursor:a,enabled:i=!0}=e;return(0,s.N)({queryKey:["gizmos","discovery",{cutId:t,locale:n,limit:r}],queryFn:async e=>{let{pageParam:a}=e;return g.U.getGizmoDiscoveryCut(t,{locale:n,cursor:a,limit:r})},initialPageParam:a,getNextPageParam:e=>{var t;return null!==(t=e.list.cursor)&&void 0!==t?t:void 0},enabled:i})}function N(){return(0,l.a)({queryKey:["gizmos","pinned"],queryFn:async()=>g.U.getGizmoPinned()})}function D(){return(0,c.C)({queryKey:["gizmos","bootstrap"],queryFn:async()=>g.U.getGizmoBootstrap().then(e=>({gizmos:e.gizmos.map(e=>({resource:e.resource,flair:e.flair}))}))})}function L(){return(0,l.a)(D())}function I(e,t){let n=e.filter(e=>e.resource.gizmo.id!==t.resource.gizmo.id),r=n.findIndex(e=>e.flair.kind===i.JK.Recent);return -1===r&&(r=n.length),n.splice(r,0,t),n}let A={handleGizmoInteracted(e,t){let n=e.getQueryData(z(e,t).queryKey);null!=n&&e.setQueryData(D().queryKey,e=>{if(null==e)return e;let r=e.gizmos.find(e=>e.resource.gizmo.id===t);return(null==r?void 0:r.flair.kind)===i.JK.FirstParty||(null==r?void 0:r.flair.kind)===i.JK.SidebarKeep?e:{gizmos:I(e.gizmos,{resource:n,flair:{kind:i.JK.Recent}})}})},handleGizmoSidebarKeep(e,t){let n=e.getQueryData(z(e,t).queryKey);null!=n&&e.setQueryData(D().queryKey,e=>null==e?e:{gizmos:I(e.gizmos,{resource:n,flair:{kind:i.JK.SidebarKeep}})})},handleGizmoSidebarHide(e,t){e.setQueryData(D().queryKey,e=>null!=e&&e.gizmos.some(e=>e.resource.gizmo.id===t)?{gizmos:e.gizmos.filter(e=>e.resource.gizmo.id!==t)}:e)}};function F(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,u.NL)();return(0,l.a)(z(n,e,t))}function U(e){let{gizmoId:t,draft:n,version:r}=e,a=(0,u.NL)(),i=r?{queryKey:["gizmo","version",{gizmoId:t,version:r}],queryFn:async()=>g.U.getVersion({gizmoId:t,version:r}),enabled:null!=t}:z(a,t,n);return(0,l.a)(i)}function Z(e,t){return(0,l.a)({queryKey:["gizmo","userActionSettings",{gizmoId:e}],queryFn:async()=>g.U.getUserActionSettings(e),enabled:null!=e&&t})}function z(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,c.C)({queryKey:["gizmo",{gizmoId:t},{draft:n}],queryFn:async()=>g.U.getGizmo(t,n),enabled:null!=t,initialData:()=>{var r,a;if(!0===n)return;let i=e.getQueryData(D().queryKey);if(null!=i)return null===(r=i.gizmos.find(e=>e.resource.gizmo.id===t))||void 0===r?void 0:r.resource;let o=e.getQueryData(["gizmos","discovery"]);if(null!=o)for(let e of o.cuts){let n=null===(a=e.list.items.find(e=>e.resource.gizmo.id===t))||void 0===a?void 0:a.resource;if(null!=n)return n}}})}function R(e,t){return e.fetchQuery(z(e,t))}function B(e){return(0,l.a)({queryKey:["gizmo",{search:e}],queryFn:async()=>g.U.getGizmoSearch(e),enabled:e.length>0})}function G(e,t){return(0,l.a)({queryKey:["gizmo-search-workspace",{search:e}],queryFn:async()=>g.U.getGizmoSearchForWorkspace(e),enabled:e.length>0&&t})}function W(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return(0,s.N)({queryKey:[n?"gizmo-search-workspace":"gizmo",{query:e,cursor:r}],queryFn:async t=>{let{pageParam:a}=t;return n?g.U.getGizmoSearchForWorkspace(e,r=a):g.U.getGizmoSearch(e,r=a)},initialPageParam:r,getNextPageParam:e=>{var t;return null!==(t=e.cursor)&&void 0!==t?t:void 0},enabled:t})}function q(){let e=(0,u.NL)();return(0,d.D)({mutationFn:async e=>{let{gizmoId:t,editorData:n}=e,{instructions:r,name:a,description:o,profilePictureId:l,profilePictureUrl:s,promptStarters:c,tools:u,files:d,trainingDisabled:f,useGPT4ForEnterprise:p}=n;return g.U.upsertDraft({instructions:r,display:{name:a,description:o,profile_pic_id:l,profile_picture_url:s,prompt_starters:c},tools:u,files:d.map(e=>x(x({},e),{},{location:i.Nh.FILE_SERVICE})),training_disabled:f,model:p?"gpt-4":void 0},t)},onSettled:t=>{t&&(e.setQueryData(z(e,t.gizmo.id,!0).queryKey,t),e.invalidateQueries({queryKey:["gizmos","mine"],refetchType:"none"}))}})}function V(){let e=(0,u.NL)();return(0,d.D)({mutationFn:async e=>{let{gizmoId:t,data:n}=e,{sharingRecipient:r,categories:a}=n,o=await g.U.promoteDraft({sharing:n.sharingSubjects&&n.sharingSubjects.length>0?n.sharingSubjects:{recipient:r},categories:a},t);if(o.error)throw new i.DC(o);return o.resource},onSettled:t=>{e.invalidateQueries({queryKey:["gizmos"],refetchType:"all"}),e.invalidateQueries({queryKey:["gizmos","pinned"],refetchType:"none"}),t&&e.setQueryData(z(e,t.gizmo.id,!1).queryKey,t)}})}function H(){let e=(0,u.NL)();return(0,d.D)({mutationFn:async e=>{let{gizmoId:t}=e;return g.U.deleteGizmo(t)},onSettled:()=>{e.invalidateQueries({queryKey:["gizmos"],refetchType:"all"})}})}function K(){let e=(0,u.NL)();return(0,d.D)({mutationFn:async e=>{let{name:t,hideName:n,websiteUrl:r,willReceiveSupportEmails:a}=e;return g.U.updateBuilderProfile({name:t,hide_name:n,website_url:r,will_receive_support_emails:a})},onSuccess:t=>{e.setQueryData(["builderProfile"],t)},onError:e=>{o.m.warning(e.message)}})}function Q(){return(0,l.a)({queryKey:["builderProfile"],queryFn:async()=>g.U.getBuilderProfile()})}function X(){return(0,d.D)({mutationFn:async e=>{let{gizmoId:t}=e;return g.U.copyGizmo({gizmoId:t})}})}function Y(){return(0,l.a)({queryKey:["gizmoCategories"],queryFn:async()=>g.U.getCategories()})}function J(){return function(e){let t=y(e);if(t)return O(t)}((0,p.useRouter)().asPath)}function $(e,t){return!!(null!=t&&[a.OL.PrimaryAssistant,a.OL.GizmoInteraction].includes(t)&&(null==e?void 0:e.includes(a.S.GPT_4)))}function ee(e,t){let n=(0,u.NL)();return(0,d.D)({mutationFn:async t=>{let{rating:n,message:r,includeFrom:a}=t;await g.U.upsertUserReview(e,n,r,a)},onSuccess:async()=>{null==t||t(),n.invalidateQueries({queryKey:["gizmo","review",{gizmoId:e}]})},onError:e=>{o.m.danger(e.message)}})}},56029:function(e,t,n){n.d(t,{U:function(){return c}});var r=n(94521),a=n(89360),i=n(43021),o=n(82823);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}class c{static getMyGizmos(){return i.c.get("".concat(a.B,"/gizmos?mine=true"))}static getGizmosByUser(e){return i.c.get("".concat(a.B,"/gizmos/u/").concat(e))}static getGizmo(e,t){return i.c.get("".concat(a.B,"/gizmos/").concat(e).concat(t?"?draft=true":""))}static shareGizmo(e,t){return i.c.post("".concat(a.B,"/gizmos/").concat(e,"/share"),t)}static getGizmoDiscovery(e,t){let n=new URLSearchParams;return null!=e&&n.set("locale",e),i.c.get(t?"".concat(a.k5,"/gizmos/discovery_anon?").concat(n):"".concat(a.k5,"/gizmos/discovery?").concat(n),{authOption:a.FB.SendIfAvailable})}static async getGizmoDiscoveryCut(e,t){let n=n=>{let r={};null!=n&&(r.cursor=n),(null==t?void 0:t.limit)!=null&&(r.limit="".concat(t.limit)),(null==t?void 0:t.locale)!=null&&(r.locale=t.locale);let o="".concat(a.k5,"/gizmos/discovery/").concat(e);return i.c.get(o,{params:r,authOption:a.FB.SendIfAvailable})},r=await n(null==t?void 0:t.cursor);return 0===r.list.items.length&&null!=r.list.cursor?(await new Promise(e=>setTimeout(e,30*Math.random())),n(r.list.cursor)):r}static getGizmoBootstrap(){return i.c.get("".concat(a.B,"/gizmos/bootstrap?limit=2"))}static getGizmoPinned(){return i.c.get("".concat(a.B,"/gizmos/pinned"))}static getGizmoSearch(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?i.c.get("".concat(a.B,"/gizmos/search?q=").concat(e,"&cursor=").concat(t," ")):i.c.get("".concat(a.B,"/gizmos/search?q=").concat(e))}static getGizmoSearchForWorkspace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?i.c.get("".concat(a.B,"/gizmos/search?q=").concat(e,"&workspace_only=",!0,"&cursor=").concat(t)):i.c.get("".concat(a.B,"/gizmos/search?q=").concat(e,"&workspace_only=",!0))}static async postGizmoAppeal(e,t,n,r,o){await i.c.post("".concat(a.B,"/gizmos/").concat(t,"/appeal"),{reason:n,share_recipient:r,categories:o}),await e.invalidateQueries({queryKey:["gizmo",{gizmoId:t}]})}static async postGizmoCancelAppeal(e,t){await i.c.post("".concat(a.B,"/gizmos/").concat(t,"/cancel_appeal"),{}),await e.invalidateQueries({queryKey:["gizmo",{gizmoId:t}]})}static upsertDraft(e,t){return void 0!==t?i.c.post("".concat(a.B,"/gizmos?gizmo_id=").concat(t),e):i.c.post("".concat(a.B,"/gizmos"),e)}static promoteDraft(e,t){return i.c.post("".concat(a.B,"/gizmos/").concat(t,"/promote"),e)}static deleteGizmo(e){return i.c.delete("".concat(a.B,"/gizmos/").concat(e))}static getBuilderProfile(){return i.c.get("".concat(a.B,"/gizmo_creator_profile"))}static updateBuilderProfile(e){return i.c.post("".concat(a.B,"/gizmo_creator_profile"),e)}static unverifySocialAuth(e){return i.c.delete("".concat(a.B,"/gizmo_creator_profile/socials/").concat(e))}static async updateGizmoSidebar(e,t,n){let r=await i.c.post("".concat(a.B,"/gizmos/").concat(t,"/sidebar"),{action:n});switch(n){case"keep":o.D2.handleGizmoSidebarKeep(e,t);break;case"hide":o.D2.handleGizmoSidebarHide(e,t)}return r}static async removeFromRecent(e,t){let n=await i.c.post("".concat(a.B,"/gizmos/").concat(t,"/remove_recent"),{});return e.invalidateQueries({queryKey:["gizmos","bootstrap"]}),e.invalidateQueries({queryKey:["gizmos","discovery"]}),n}static fetchOpenAPISpec(e){return i.c.post("".concat(a.B,"/gizmos/fetch_openapi"),{url:e})}static validateOpenAPISpec(e){return i.c.post("".concat(a.B,"/gizmos/validate_openapi"),{raw_spec:e})}static transformToOpenAPISpec(e,t){return i.c.post("".concat(a.B,"/gizmos/transform_openapi"),s(s({},e),{},{auth:t}))}static async doOAuthRedirect(e,t,n,r,o){let l=await i.c.post("".concat(a.B,"/gizmos/oauth_redirect"),{gizmo_id:e,gizmo_action_id:t,domain:n,redirect_to:r,draft:o});window.location.href=l.redirect_uri}static async upsertUserActionSettings(e,t,n){return i.c.post("".concat(a.B,"/gizmos/action_settings"),{gizmo_action_id:e,domain:t,action_settings:n})}static async getUserActionSettings(e){return i.c.get("".concat(a.B,"/gizmos/user_action_settings?gizmo_id=").concat(e))}static async generateCategory(e,t){return i.c.post("".concat(a.B,"/gizmos/gen_category"),{name:e,instructions:t})}static async getCategories(){return i.c.get("".concat(a.B,"/gizmos/categories"))}static async getUserReview(e){return i.c.get("".concat(a.B,"/gizmo_reviews/").concat(e))}static async upsertUserReview(e,t,n,r){return i.c.post("".concat(a.B,"/gizmo_reviews/").concat(e),{rating:t,message:n,include_from:r})}static async sendFeedbackEmail(e,t,n){return i.c.post("".concat(a.B,"/gizmos/").concat(e,"/feedback"),{message:t,include_from:n})}static async getAbout(e){return i.c.get("".concat(a.B,"/gizmos/").concat(e,"/about"))}static async getCreatorSlice(e){let{creatorId:t}=e;return i.c.get("".concat(a.B,"/gizmo_creators/").concat(t,"/gizmos"))}static async getVersion(e){let{gizmoId:t,version:n}=e;return null==n?i.c.get("".concat(a.B,"/gizmos/").concat(t,"/version/latest")):i.c.get("".concat(a.B,"/gizmos/").concat(t,"/version/").concat(n))}static async listVersions(e){let{gizmoId:t,limit:n,cursor:r}=e,o={};return n&&(o.limit=n),r&&(o.cursor=r),i.c.get("".concat(a.B,"/gizmos/").concat(t,"/versions"),{params:o})}static async getRolodex(){return i.c.get("".concat(a.B,"/rolodex"))}static async upsertToRolodex(e,t){let{gizmoId:n,usageDescription:r,remove:o}=t,l=await i.c.post("".concat(a.B,"/rolodex"),{gizmo_id:n,usage_description:r,remove:o});return e.invalidateQueries({queryKey:["gizmoRolodex"],refetchType:"all"}),l}static async copyGizmo(e){let{gizmoId:t}=e;return await i.c.post("".concat(a.B,"/gizmos/").concat(t,"/copy"))}}},2933:function(e,t,n){n.d(t,{A7:function(){return x},QT:function(){return b},Xb:function(){return w},cY:function(){return j},f8:function(){return O},y4:function(){return y}});var r,a=n(17379),i=n(94521),o=n(41141),l=n(71840),s=n(98131),c=n(19841),u=n(92379),d=n(74091),f=n(5443),p=n(62484),m=n(651);let g=["tooltip","className"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let x=56,b=d.Z.div(r||(r=(0,o.Z)(["sticky top-0 juice:p-3 mb-1.5 flex items-center justify-between z-10 h-14 p-2 font-semibold bg-token-main-surface-primary"])));function y(e){let t=(0,m.jsx)(f.z,v(v({color:"secondary",size:"small"},e),{},{className:(0,c.default)("flex items-center justify-center whitespace-nowrap",e.className)}));return null!=e.label?(0,m.jsx)(p.u,{side:"left",label:e.label,className:"h-fit w-fit",children:t}):t}let j=(0,u.forwardRef)(function(e,t){var n;let{tooltip:r,className:i}=e,o=(0,a.Z)(e,g),l=(0,m.jsx)(f.z,v(v({color:null!==(n=e.color)&&void 0!==n?n:"secondary",size:"medium"},o),{},{className:i,ref:t}));return null!=r?(0,m.jsx)(p.u,{label:r,children:l}):l});function w(e){let{label:t,disabled:n=!1,tooltipText:r,value:a}=e,i=(0,u.useId)();return(0,m.jsx)("div",{className:(0,c.default)("flex items-center gap-2",n?"opacity-50":""),children:(0,m.jsx)(p.E,{disabled:null==r,label:r,side:"right",children:(0,m.jsxs)("label",{htmlFor:i,className:"flex cursor-pointer items-center gap-1",children:[(0,m.jsx)(s.ck,{id:i,value:a,disabled:n,className:"mr-1 flex h-5 w-5 shrink-0 items-center justify-center rounded-full border border-gray-500 bg-white dark:border-gray-600 dark:bg-gray-700",children:(0,m.jsx)(s.z$,{className:"h-2 w-2 rounded-full bg-gray-950 dark:bg-white"})}),t]})})})}function O(e){return(0,m.jsx)(l.Z,v(v({},e),{},{className:(0,c.default)("!rounded border-gray-950 checked:!bg-black dark:border-gray-600 dark:bg-gray-700",e.className)}))}},16645:function(e,t,n){var r,a,i,o,l;n.d(t,{AR:function(){return O},CS:function(){return s},DC:function(){return w},EL:function(){return d},H$:function(){return y},JK:function(){return k},LA:function(){return u},Mj:function(){return j},Nh:function(){return v},U9:function(){return m},Zz:function(){return p},fV:function(){return f},h:function(){return x},q0:function(){return h},qL:function(){return c},yS:function(){return g}});let s="g-YyyyMT9XH",c="g-2fkFE8rbu",u=((r={})[r.USER=1]="USER",r[r.GROUP=2]="GROUP",r[r.WORKSPACE=3]="WORKSPACE",r[r.ALL=4]="ALL",r[r.PROJECT=5]="PROJECT",r[r.ORGANIZATION=6]="ORGANIZATION",r[r.SYSTEM=7]="SYSTEM",r[r.AGENT=8]="AGENT",r),d={can_read:!0,can_view_config:!1,can_write:!1,can_delete:!1,can_export:!1,can_share:!1},f={can_read:!0,can_view_config:!0,can_write:!1,can_delete:!1,can_export:!1,can_share:!1},p={Private:"private",User:"user",Group:"group",WorkspaceLink:"workspace_link",Workspace:"workspace",Link:"link",Marketplace:"marketplace"},m=((a={}).FirstParty="first_party",a.UsesFunctionCalls="uses_function_calls",a.Reportable="reportable",a.Private="private",a.Workspace="workspace",a.Public="public",a.Beta="beta",a.Pinned="pinned",a.WorkspaceDisabled="workspace_disabled",a.Unreviewable="unreviewable",a),g=e=>{var t;return null===(t=e.gizmo.tags)||void 0===t?void 0:t.includes(m.FirstParty)},h=e=>{var t;return!(null!==(t=e.gizmo.tags)&&void 0!==t&&t.includes(m.Unreviewable))},v=((i={}).FILE_SERVICE="fs",i);function x(e){return e.type===u.USER||e.type===u.GROUP}let b=[u.USER,u.GROUP,u.WORKSPACE,u.ALL];function y(e){return 0===e.length?null:e.reduce((e,t)=>b.indexOf(t.type)<b.indexOf(e.type)?e:t,e[0])}function j(e,t,n){return(t=t.filter(e=>e.type===p.User||e.type===p.Group),e===p.Private||e===p.User||e===p.Group)?[{type:p.Private,capabilities:d},...t]:[...t,{type:e,capabilities:n}]}class w{constructor(e){this.response=e}}let O=((o={}).ENGLISH="en",o.GLOBAL="global",o),k=((l={}).FirstParty="first_party",l.SidebarKeep="sidebar_keep",l.Mine="mine",l.Recent="recent",l.Workspace="workspace",l)},75438:function(e,t,n){n.d(t,{R2:function(){return l},S9:function(){return c},VN:function(){return d},WQ:function(){return u},XA:function(){return s},k1:function(){return o}});var r=n(16645),a=n(24040),i=n(75172);function o(e){var t,n;return null!==(t=null===(n=e.gizmo.current_user_permission)||void 0===n?void 0:n.can_write)&&void 0!==t&&t}function l(e){var t,n;return null!==(t=null===(n=e.gizmo.current_user_permission)||void 0===n?void 0:n.can_view_config)&&void 0!==t&&t}function s(e){let t=(0,i.Z)();return function(e,t,n){let a=null==t?void 0:t.name;switch(e){case r.Zz.Link:return n.formatMessage(f.privacyAnyoneWithLink);case r.Zz.Private:return n.formatMessage(f.privacyOnlyMe);case r.Zz.Group:case r.Zz.User:return n.formatMessage({id:"B9pJ5o",defaultMessage:"Invite only"});case r.Zz.Marketplace:return n.formatMessage(f.privacyMarketplace);case r.Zz.Workspace:return n.formatMessage(f.privacyWorkspace,{workspaceName:a});case r.Zz.WorkspaceLink:return n.formatMessage({id:"T5Eek0",defaultMessage:"Anyone at {workspaceName} with the link"},{workspaceName:a})}}(e,(0,a.ec)(e=>e.currentWorkspace),t)}function c(e){return"gizmo"in e}function u(e){return"id"in e}function d(e){return"".concat(e.replaceAll(".","_").replaceAll("-","_"),"__jit_plugin")}let f=(0,n(68306).vU)({privacyOnlyMe:{id:"gizmo.privacyOnlyMe",defaultMessage:"Only me"},privacyAnyoneWithLink:{id:"gizmo.privacyAnyoneWithLink",defaultMessage:"Anyone with a link"},privacyWorkspace:{id:"gizmo.privacyWorkspace",defaultMessage:"Anyone at {workspaceName}"},privacyMarketplace:{id:"gizmo.privacyMarketplace",defaultMessage:"Everyone"}})},65032:function(e,t,n){n.d(t,{ZC:function(){return j},ZP:function(){return w},xz:function(){return O}});var r=n(94521),a=n(85734),i=n(55059),o=n(86021),l=n(91208),s=n(29333),c=n(92379),u=n(62984),d=n(68306),f=n(55434),p=n(70229),m=n(5443),g=n(73746),h=n(10830),v=n(53856),x=n(651);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function j(e){var t;if(void 0===e)return{flagSeverity:void 0,shouldHideContent:!1,errCode:void 0,errMessage:void 0};let{errType:n,errCode:r,err:a,disclaimers:i}=e;return(null===(t=e.message.metadata)||void 0===t||null===(t=t.finish_details)||void 0===t?void 0:t.type)==="content_filter"?{flagSeverity:"warning",shouldHideContent:!1,errCode:s.qS.ContentOrTos,errMessage:a}:{flagSeverity:n,shouldHideContent:"danger"===n&&r===s.qS.ContentPolicy,disclaimers:i,errCode:r,errMessage:a}}function w(e){let{message:t,onRequestMoreCompletions:n,clientThreadId:r,id:a,isFeedbackEnabled:i,isUserTurn:o,className:c}=e,{errCode:d,errMessage:m,flagSeverity:g}=j(t);switch(d){case s.qS.ContentPolicy:return(0,x.jsx)(v.q,{flag:g,isUserTurn:o,className:c,children:(0,x.jsx)(C,{isFeedbackEnabled:i})});case s.qS.ContentOrTos:return(0,x.jsx)(v.q,{flag:g,isUserTurn:o,className:c,children:(0,x.jsx)(M,{isFeedbackEnabled:i})});case h.uU:return(0,x.jsx)(k,{className:c,id:a,onRequestMoreCompletions:n,flag:g,clientThreadId:r,isUserTurn:o});case l.wp:return(0,x.jsx)(v.q,{flag:g,isUserTurn:o,className:c,children:(0,x.jsx)(u.Z,y({},S.historyDisabledConversationMissing))});default:return void 0!==m?(0,x.jsx)(v.q,{flag:g,isUserTurn:o,className:c,children:(0,x.jsx)(f.U,{rehypePlugins:[[p.Z,{target:"_new",rel:"noopener noreferrer"}]],className:"markdown prose w-full break-words dark:prose-invert",children:m})}):null}}function O(e){let t=e&&new Date(e),n=t&&new Date(t);return n?"after ".concat(n.getHours()%12||12,":").concat(10>n.getMinutes()?"0":"").concat(n.getMinutes()," ").concat(n.getHours()>=12?"PM":"AM"):"later"}function k(e){let t,{className:n,id:r,onRequestMoreCompletions:l,flag:s,clientThreadId:d,isUserTurn:f}=e,p=(0,h.Y8)(e=>e.isoDate),g=O(p),b=(0,o.WA)(null!=d?d:a.Zq),j=b&&b.kind!==a.OL.PrimaryAssistant,w=(0,i.fm)(),k=(0,i.j8)(),M=(0,c.useCallback)(()=>{l(r,{eventSource:"mouse"},!0,"none",!1)},[r,l]),C=(0,c.useCallback)(()=>{w({modelId:k.id,location:"Model switcher menu item"}),l(r,{eventSource:"mouse"},!0,"none",!0)},[l,r,k.id,w]);return t=j?null!=p?(0,x.jsx)("span",{children:(0,x.jsx)(u.Z,y(y({},S.gptUsageCapExceededCustomFeature),{},{values:{link:P,formattedTime:g}}))}):(0,x.jsx)(u.Z,y({},S.gptUsageCapExceededExpired)):null!=p?(0,x.jsx)("span",{children:(0,x.jsx)(u.Z,y(y({},S.gptUsageCapExceeded),{},{values:{link:P,formattedTime:g}}))}):(0,x.jsx)(u.Z,y({},S.gptUsageCapExceededExpired)),(0,x.jsx)(v.q,{flag:null!=p?s:void 0,isUserTurn:f,className:n,children:(0,x.jsxs)("div",{className:"flex items-center gap-6",children:[t,null==p&&(0,x.jsx)(m.z,{color:"secondary",className:"flex-shrink-0",onClick:M,children:(0,x.jsx)(u.Z,y({},S.buttonTryAgain))}),null!=p&&!j&&(0,x.jsx)(m.z,{color:"secondary",className:"flex-shrink-0",onClick:C,children:(0,x.jsx)(u.Z,y({},S.buttonUseDefaultModel))})]})})}let P=e=>(0,x.jsx)("a",{href:"https://share.hsforms.com/16d0ZZVM3QZirXnCD_q7u1Q4sk30",target:"_blank",rel:"noreferrer",className:"underline",children:e});function M(e){let{isFeedbackEnabled:t}=e;if((0,g.Q)())return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:t?"font-semibold":"",children:(0,x.jsx)(u.Z,y(y({},S.contentOrTosViolationNoFeedback),{},{values:{contentPolicyLink:T,termsLink:_}}))}),(0,x.jsx)("div",{children:t&&(0,x.jsx)(u.Z,y({},S.contentPolicyFeedback))})]});let n=t?S.contentOrTosViolation:S.contentOrTosViolationNoFeedback;return(0,x.jsx)(u.Z,y(y({},n),{},{values:{contentPolicyLink:T,termsLink:_}}))}function C(e){let{isFeedbackEnabled:t}=e;if((0,g.Q)())return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:t?"font-semibold":"",children:(0,x.jsx)(u.Z,y(y({},S.contentPolicyViolationNoFeedback),{},{values:{contentPolicyLink:T}}))}),(0,x.jsx)("div",{children:t&&(0,x.jsx)(u.Z,y({},S.contentPolicyFeedback))})]});let n=t?S.contentPolicyViolation:S.contentPolicyViolationNoFeedback;return(0,x.jsx)(u.Z,y(y({},n),{},{values:{contentPolicyLink:T}}))}let T=e=>(0,x.jsx)(v.L,{target:"_blank",href:"https://openai.com/policies/usage-policies",rel:"noreferrer",children:e}),_=e=>(0,x.jsx)(v.L,{target:"_blank",href:"https://openai.com/policies/terms-of-use",rel:"noreferrer",children:e}),S=(0,d.vU)({contentPolicyFeedback:{id:"TextMessageDisplay.contentPolicyFeedback",defaultMessage:"Did we get it wrong? Please tell us by giving this response a thumbs down."},contentPolicyViolation:{id:"TextMessageDisplay.contentPolicyViolation.2",defaultMessage:"This content may violate our <contentPolicyLink>usage policies</contentPolicyLink>. Did we get it wrong? Please tell us by giving this response a thumbs down."},contentPolicyViolationNoFeedback:{id:"TextMessageDisplay.contentPolicyViolationNoFeedback",defaultMessage:"This content may violate our <contentPolicyLink>usage policies</contentPolicyLink>."},contentOrTosViolation:{id:"TextMessageDisplay.contentOrTosViolation.2",defaultMessage:"This content may violate our <termsLink>Terms of Use</termsLink> or <contentPolicyLink>usage policies</contentPolicyLink>. Did we get it wrong? Please tell us by giving this response a thumbs down."},contentOrTosViolationNoFeedback:{id:"TextMessageDisplay.contentOrTosViolationNoFeedback",defaultMessage:"This content may violate our <termsLink>Terms of Use</termsLink> or <contentPolicyLink>usage policies</contentPolicyLink>."},historyDisabledConversationMissing:{id:"TextMessageDisplay.historyDisabledConversationMissing",defaultMessage:"Sorry, conversations created when Chat History is off expire after 6 hours of inactivity. Please start a new conversation to continue using ChatGPT."},gptUsageCapExceeded:{id:"TextMessageDisplay.gptUsageCapExceeded",defaultMessage:"You've reached the current usage cap for GPT-4. You can continue with the default model now, or try again {formattedTime}. <link>Learn more</link>"},gptUsageCapExceededCustomFeature:{id:"TextMessageDisplay.gptUsageCapExceededCustomFeature",defaultMessage:"You've reached the current usage cap for GPT-4, please try again {formattedTime}. <link>Learn more</link>"},gptUsageCapExceededExpired:{id:"TextMessageDisplay.gptUsageCapExceededExpired",defaultMessage:"You previously reached your usage cap for GPT-4, but you can now try sending your message again"},buttonUseDefaultModel:{id:"TextMessageDisplay.buttonUseDefaultModel",defaultMessage:"Use default model"},buttonTryAgain:{id:"TextMessageDisplay.buttonTryAgain",defaultMessage:"Try again"}})},53856:function(e,t,n){n.d(t,{L:function(){return f},q:function(){return p}});var r,a,i=n(41141),o=n(19841),l=n(74091),s=n(23041),c=n(92426),u=n(73746),d=n(651);let f=l.Z.a(r||(r=(0,i.Z)(["bold underline"]))),p=e=>{let{className:t,isUserTurn:n,flag:r,children:a}=e,i=(0,u.Q)();return"info"!==r&&(n||!i)?(0,d.jsx)(m,{className:(0,o.default)(i&&"w-full pr-5 text-right",t),$flag:r,$isFruitJuiceEnabled:i,children:a}):(i&&!n&&s.Z,(0,d.jsxs)(m,{$flag:r,$isFruitJuiceEnabled:i,className:(0,o.default)("flex w-full items-start gap-3 border",i&&"rounded-2xl p-4","warning"===r||"danger"===r?"bg-opacity-5":"bg-opacity-10",t),children:[(0,d.jsx)(c.szr,{className:"icon-lg"}),(0,d.jsx)("div",{className:"pt-px",children:a})]}))},m=l.Z.div(a||(a=(0,i.Z)(["\n","\n",""])),e=>{let{$isFruitJuiceEnabled:t}=e;return t?"text-sm":"mb-2 py-2 px-3 border rounded-md text-sm text-token-text-primary"},e=>{let{$flag:t,$isFruitJuiceEnabled:n}=e;switch(t){case"danger":return n?"text-token-text-error border-token-surface-error/15 bg-token-surface-error bg-opacity-0":"border-red-500 bg-red-500/10";case"warning":return n?"text-orange-600 border-token-border-light bg-orange-400 bg-opacity-0":"border-orange-500 bg-orange-500/10";case"info":return n?"text-token-text-primary border-token-border-light bg-token-main-surface-primary bg-opacity-0":"border-token-border-light bg-primary-surface";default:return n?"text-green-500 border-green-500 bg-green-500 bg-opacity-0":"border-green-500 bg-green-500/10"}})},83650:function(e,t,n){n.d(t,{Up:function(){return i},doConnectorOauthRedirect:function(){return o},wP:function(){return s},wW:function(){return l}});var r=n(85734),a=n(93223);async function i(e,t){let n="".concat("https://chat.openai.com","/aip/").concat(e.id,"/oauth/callback"),r=await a.Z.pluginOauthRedirect(e.id,n,t);window.location.href=r.redirect_uri}async function o(e,t,n){let r="".concat(window.location.origin,"/ccc/").concat(e.id,"/oauth/callback"),i=await a.Z.connectorOauthRedirect(e.id,r,t,n);window.location.href=i.redirect_uri}function l(e){switch(e){case r.NA.Link:return"link_paste_popover";case r.NA.Picker:return"file_upload_menu"}}async function s(e){await a.Z.deleteUserConnectedApp(e),window.location.reload()}},32228:function(e,t,n){let r;n.d(t,{Dq:function(){return e1},M4:function(){return e$},zu:function(){return e0},MG:function(){return eJ}});var a,i,o,l,s,c=n(94521),u=n(49217),d=n(16062),f=n(19841),p=n(556),m=n(75172),g=n(62984),h=n(651);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){(0,c.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function b(e){let{ariaLabel:t,className:n,leftItem:r,onChange:a,rightItem:i,value:o}=e,l=(0,m.Z)(),s=o===r.value;return(0,h.jsx)(d.fC,{type:"single","aria-label":l.formatMessage(t),onClick:()=>{a(s?i.value:r.value)},value:o,className:(0,f.default)("cursor-pointer select-none rounded-full border border-solid border-token-border-light p-0.5",n),children:(0,h.jsxs)("div",{className:"relative grid grid-cols-2",children:[(0,h.jsx)(y,x(x({},r),{},{isSelected:o===r.value})),(0,h.jsx)(y,x(x({},i),{},{isSelected:o===i.value}))]})})}function y(e){let{ariaLabel:t,isSelected:n,label:r,value:a}=e,i=(0,m.Z)();return(0,h.jsxs)("div",{className:"relative z-10 px-3 py-1.5 text-center text-sm font-semibold",children:[(0,h.jsx)(d.ck,{"aria-label":i.formatMessage(t),className:(0,f.default)({"text-token-main-surface-primary":n,"text-token-text-secondary":!n}),value:a,children:(0,h.jsx)(g.Z,x({},r))}),n?(0,h.jsx)(p.E.div,{transition:{duration:.05},layoutId:"SegmentedControlToggleItem-selectedBackground",className:"absolute inset-0 -z-10 rounded-full bg-token-text-primary"}):null]})}var j=n(68306);function w(e){let{value:t,onChange:n}=e;return(0,h.jsx)(b,{value:t,onChange:n,ariaLabel:O.toggleArialabel,leftItem:{ariaLabel:O.togglePersonalArialabel,label:O.togglePersonalLabel,value:"personal"},rightItem:{ariaLabel:O.toggleBusinessArialabel,label:O.toggleBusinessLabel,value:"business"}})}let O=(0,j.vU)({toggleArialabel:{id:"U4v2Gf",defaultMessage:"Toggle for switching between Personal and Business plans"},togglePersonalArialabel:{id:"6Wikht",defaultMessage:"Toggle for switching to Personal plans"},toggleBusinessArialabel:{id:"uzlEV0",defaultMessage:"Toggle for switching to Business plans"},togglePersonalLabel:{id:"cGDsaD",defaultMessage:"Personal"},toggleBusinessLabel:{id:"sgisa2",defaultMessage:"Business"}});var k=n(5443),P=n(55059),M=n(40319),C=n.n(M),T=n(38144),_=n(21885),S=n(17379),E=n(21904),N=n(93747),D=n(15236);let L=["isCurrentPlan","planType","disabled","onClick","children","testId"];function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach(function(t){(0,c.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let F=()=>{N.A.logEvent(D.M.clickAccountPaymentGetHelp)};function U(e){let{isCurrentPlan:t,planType:n,disabled:r,onClick:a,children:i,testId:o}=e,l=(0,S.Z)(e,L);return(0,h.jsx)(k.z,A(A({fullWidth:!0,size:"large",color:t?"disabled":function(e){switch(e){case E.D8.FREE:case E.D8.PLUS:return"green";case E.D8.TEAM:return"blue";case E.D8.ENTERPRISE:case E.D8.EDU:return"secondary"}}(n),disabled:r,onClick:a,"data-testid":o},l),{},{children:i}))}function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach(function(t){(0,c.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let R=()=>{let e=(0,P.Hb)();return(0,h.jsx)(eb,{planName:"free",pricingPlan:e?_.S.freeNeptune:_.S.free,showForLine:!e,callToActionButton:(0,h.jsx)(k.z,{color:"secondary",disabled:!0,size:"large",children:(0,h.jsx)(g.Z,z({},_.S.free.callToAction.inactive))}),additionalLinks:[(0,h.jsx)(g.Z,z(z({},B.haveExistingPlan),{},{values:{link:e=>(0,h.jsx)(C(),{target:"_blank",href:T.ti,onClick:F,passHref:!0,className:"font-semibold underline",children:e},"row-plus-plan-help-link")}}),"existing-plan-help")]})},B=(0,j.vU)({haveExistingPlan:{id:"FreeColumn.haveExistingPlan",defaultMessage:"Have an existing plan? See <link>billing help</link>"}});var G=n(62484),W=n(92426),q=n(94982),V=n(93223),H=n(48580),K=n(43128),Q=n.n(K),X=n(92379),Y=n(35746),J=n(50684),$=n(4702);function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach(function(t){(0,c.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let en=E.D8.PLUS;function er(e){let{isOpen:t,onClose:n,onCancelationComplete:r,analyticsParams:a}=e,i=(0,m.Z)(),o=(0,$.t)(),{data:l,isLoading:s}=(0,Y.ZP)(),c=(0,Y.St)(null==o?void 0:o.id),d=(0,X.useMemo)(()=>et(et({},a),{},{planType:en}),[a]),f=(0,X.useCallback)(()=>{n(),c.isSuccess||N.A.logEventWithStatsig(D.M.cancelPlusAbort,"cancel_plus_modal_abort",d)},[n,c.isSuccess,d]),p=async()=>{if(!o)throw Error("No account!");N.A.logEventWithStatsig(D.M.cancelPlusConfirm,"cancel_plus_modal_confirm",d),await c.mutateAsync(null==o?void 0:o.id,{onError:()=>{q.m.danger(i.formatMessage(eo.cancelFailure),{duration:2}),N.A.logEventWithStatsig(D.M.cancelPlusError,"cancel_plus_modal_error",d)},onSuccess:()=>{N.A.logEventWithStatsig(D.M.cancelPlusSuccess,"cancel_plus_modal_success",d),null==r||r(),q.m.info(i.formatMessage(eo.cancelSuccess),{duration:2}),n()}})};(0,X.useEffect)(()=>{if(!c.isSuccess)return},[c.isSuccess,n]);let v=null==l?void 0:l.active_until;return(0,h.jsx)(u.Z,{type:"success",onClose:f,isOpen:t,className:"",title:(0,h.jsx)(g.Z,et({},eo.cancelPlan)),children:s||!o?(0,h.jsx)(J.Z,{}):c.isSuccess?(0,h.jsx)(g.Z,et({},eo.cancelSuccess)):(0,h.jsxs)("div",{children:[(0,h.jsxs)("div",{className:"text-sm",children:[!!v&&(0,h.jsx)("p",{className:"mb-4",children:(0,h.jsx)(g.Z,et(et({},eo.planActiveUntil),{},{values:{expirationDate:new Date(v)}}))}),(0,h.jsx)("p",{className:"mb-2",children:(0,h.jsx)(g.Z,et({},eo.cancelListHeader))}),(0,h.jsx)("div",{children:el.map(e=>(0,h.jsxs)("div",{className:"text-l mb-2 flex justify-start gap-2",children:[(0,h.jsx)(W.tPq,{className:"h-5 w-5 flex-shrink-0 align-top text-gray-500"}),(0,h.jsx)("span",{children:(0,h.jsx)(g.Z,et(et({},e),{},{values:{learnMoreLink:ea,mainModel:ei}}))})]},e.id))})]}),(0,h.jsxs)("div",{className:"mt-8 flex justify-end gap-2",children:[(0,h.jsx)(k.z,{onClick:f,color:"secondary",children:(0,h.jsx)(g.Z,et({},eo.closeModal))}),(0,h.jsx)(k.z,{color:"danger",onClick:p,disabled:c.isPending||c.isSuccess,children:(0,h.jsx)(g.Z,et({},c.isPending?eo.cancellingInProgress:eo.cancelButton))})]})]})})}let ea=e=>(0,h.jsx)("a",{target:"_blank",href:"https://help.openai.com/en/articles/9280126-what-happens-to-my-gpts-if-i-cancel-my-subscription",rel:"noreferrer",className:"underline",children:e}),ei="GPT-4",eo=(0,j.vU)({cancelPlan:{id:"cancelPlusModal.cancelPlan",defaultMessage:"Cancel your Plus subscription?"},cancelListHeader:{id:"cancelPlusModal.cancelText",defaultMessage:"When your subscription ends, you'll no longer have:"},planActiveUntil:{id:"cancelPlusModal.planActiveUntil",defaultMessage:"If you cancel your subscription, you’ll be downgraded to the free plan on {expirationDate, date, long}."},cancelButton:{id:"cancelPlusModal.cancelButton",defaultMessage:"Cancel subscription"},cancellingInProgress:{id:"cancelPlusModal.cancellingInProgress",defaultMessage:"Cancelling..."},cancelSuccess:{id:"cancelPlusModal.cancelSuccess",defaultMessage:"Successfully cancelled your plan. Sorry to see you go!"},cancelFailure:{id:"cancelPlusModal.cancelFailure",defaultMessage:"Something went wrong while cancelling your plan. Please reach out to support"},lostFeatureGPTModels:{id:"0w7d5w",defaultMessage:"Access to {mainModel} and {liteModel}"},lostFeatureGPTModelSingular:{id:"cancelPlusModal.lostFeature.gptModelSingular",defaultMessage:"Access to {mainModel}"},lostFeatureNewModelUsageLimits:{id:"TjftEV",defaultMessage:"Higher usage limits for {limitedModel}"},lostFeatureDataAnalysisV2:{id:"cancelPlusModal.lostFeature.dataAnalysisV2",defaultMessage:"Access to advanced data analysis, file uploads, vision, and web browsing"},lostFeatureDataAnalysisLimits:{id:"dlGufV",defaultMessage:"Higher usage limits for advanced data analysis, file uploads, vision, and web browsing"},lostFeatureImageGeneration:{id:"cancelPlusModal.lostFeature.imageGeneration",defaultMessage:"DALL\xb7E image generation"},lostFeatureCustomGPTs:{id:"cancelPlusModal.lostFeature.customGPTs",defaultMessage:"Custom GPT creation"},lostFeaturePersonalGPTs:{id:"cancelPlusModal.lostFeature.personalGPTs",defaultMessage:"GPTs you’ve created (<learnMoreLink>learn more</learnMoreLink>)"},closeModal:{id:"cancelPlusModal.close",defaultMessage:"Close"}}),el=[eo.lostFeatureGPTModelSingular,eo.lostFeatureDataAnalysisV2,eo.lostFeatureImageGeneration,eo.lostFeatureCustomGPTs,eo.lostFeaturePersonalGPTs];var es=n(41141),ec=n(12214);function eu(){let e=(0,$.t)(),{layer:t}=(0,ec.AH)("chatgpt_subscriptions");return{isSplitBetweenPersonalAndBusinessEnabled:t.get("is_split_between_personal_and_business_enabled",!1),isModalFullscreen:t.get("is_modal_fullscreen",!1),isTeamEnabled:t.get("is_team_enabled",!0)||(null==e?void 0:e.isTeam())}}var ed=n(74091);function ef(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ep(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ef(Object(n),!0).forEach(function(t){(0,c.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ef(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let em=ed.Z.div(a||(a=(0,es.Z)(["text-sm relative flex-1 flex gap-5 flex-col  border-token-border-light ",""])),e=>e.isModalFullscreen?"border-t border-l border-r border-b rounded-xl md:min-h-[30rem] md:rounded-none md:border-r-0 md:last:border-r md:first:rounded-tl-xl md:first:rounded-bl-xl md:last:rounded-tr-xl md:last:rounded-br-xl md:max-w-96 justify-center px-6 pt-6 pb-10 md:pb-6":"md:border-r last:border-r-0 md:border-t-0 border-t py-4 px-6"),eg=ed.Z.div(i||(i=(0,es.Z)(["relative flex flex-col bg-token-main-surface-primary"]))),eh=ed.Z.div(o||(o=(0,es.Z)(["flex flex-col flex-grow gap-2"]))),ev=ed.Z.div(l||(l=(0,es.Z)(["relative bg-token-main-surface-primary"]))),ex=(0,ed.Z)(eg)(s||(s=(0,es.Z)(["text-xs text-token-text-secondary"]))),eb=e=>{var t;let{planName:n,pricingPlan:r,callToActionButton:a,className:i,showForLine:o=!0,icon:l,additionalLinks:s=[]}=e,{isModalFullscreen:c}=eu();return(0,h.jsxs)(em,{className:i,"data-testid":"".concat(n,"-pricing-modal-column"),isModalFullscreen:c,children:[(0,h.jsx)(eg,{children:(0,h.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,h.jsxs)("p",{className:"flex items-center gap-2 text-xl font-semibold",children:[null!=l?l:"",(0,h.jsx)(g.Z,ep({},r.name))]}),(0,h.jsxs)("div",{className:"flex items-baseline gap-1.5",children:[(0,h.jsx)("p",{className:"text-base text-token-text-tertiary","data-testid":"".concat(n,"-pricing-column-cost"),children:(0,h.jsx)(g.Z,ep({},r.costInDollars))}),r.costInDollarsSubtitle?(0,h.jsx)("p",{className:"text-xs text-token-text-tertiary","data-testid":"".concat(n,"-pricing-column-cost-subtitle"),children:(0,h.jsx)(g.Z,ep({},r.costInDollarsSubtitle))}):null]})]})}),(0,h.jsx)(eg,{children:a}),(0,h.jsxs)(eh,{children:[o&&(0,h.jsx)(eg,{children:(0,h.jsx)("p",{className:"text-l font-semibold",children:(0,h.jsx)(g.Z,ep({},r.forLine))})}),null===(t=r.advertisedFeatures)||void 0===t?void 0:t.map((e,t)=>(0,h.jsx)(ev,{children:(0,h.jsxs)("div",{className:"text-l flex justify-start gap-2",children:[(0,h.jsx)(W.$As,{className:"mt-0.5 h-4 w-4 shrink-0"}),(0,h.jsx)("span",{children:(0,h.jsx)(g.Z,ep(ep({},e),{},{values:{link:t=>{var n;return(0,h.jsx)(C(),{className:"underline",target:"_blank",rel:"noreferrer",href:null!==(n=e.link)&&void 0!==n?n:"",children:t})},article:t=>{var n;return(0,h.jsx)(C(),{className:"underline",target:"_blank",rel:"noreferrer",href:null!==(n=e.article)&&void 0!==n?n:"",children:t})},modelName:"GPT‑4o"}}))})]})},t))]}),s.length>0&&(0,h.jsx)(ex,{children:s.map((e,t)=>(0,h.jsx)("div",{children:e},t))}),r.disclaimer&&(0,h.jsx)(ex,{children:(0,h.jsx)(g.Z,ep({},r.disclaimer))})]})};var ey=n(68810),ej=n(54538),ew=n(14816),eO=n(17927);function ek(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}let eP=eO.F.HasDismissedUpgradeInviteModal,eM={hasDismissedUpgradeInviteModal:!!eO.m.getItem(eP)};(0,ey.Ue)()(()=>(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ek(Object(n),!0).forEach(function(t){(0,c.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ek(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e})({},eM));let eC=()=>{let{isUnauthenticated:e,isLoading:t}=(0,ej.u)();return(0,ew.a)({queryKey:["updateInvites",e],queryFn:async()=>e?{plus:null,team:null}:await V.Z.getUpgradeInvites(),enabled:!t})},eT=(0,j.vU)({plusWaitlistSignupSuccess:{id:"pricingPlanConstants.plusWaitlistSignupSuccess",defaultMessage:"You've been added to the waitlist to upgrade to Plus"},teamWaitlistSignupSuccess:{id:"pricingPlanConstants.teamWaitlistSignupSuccess",defaultMessage:"You've been added to the waitlist to upgrade to Team"}}),e_={[E.D8.PLUS]:{localStorageKeyByVersion:{V1:eO.F.HasSignedUpForPlusUpgradeWaitlistV1,V2:eO.F.HasSignedUpForPlusUpgradeWaitlistV2},onSuccessMessage:eT.plusWaitlistSignupSuccess},[E.D8.TEAM]:{localStorageKeyByVersion:{V1:eO.F.HasSignedUpForTeamUpgradeWaitlistV1,V2:eO.F.HasSignedUpForTeamUpgradeWaitlistV2},onSuccessMessage:eT.teamWaitlistSignupSuccess}},eS=e=>{let t=(0,m.Z)(),{localStorageKeyByVersion:n,onSuccessMessage:r}=e_[e],a=n.V1,i=n.V2,{0:o}=(0,X.useState)(!!eO.m.getItem(a)),{0:l,1:s}=(0,X.useState)(!!eO.m.getItem(i)),{data:c}=eC();return{hasSignedUpForWaitlist:o||l,isEligibleToUpgrade:!!(null==c?void 0:c.plus)||o,signUpForWaitlist:()=>{s(!0),eO.m.setItem(i,!0),q.m.success(t.formatMessage(r),{hasCloseButton:!0,duration:5}),N.A.logEvent(D.M.upgradePlanWaitlistSignup,{plan:e})}}};function eE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eE(Object(n),!0).forEach(function(t){(0,c.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eE(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let eD=e=>{let{currentAccount:t,isGPT4oAvailable:n}=e,{data:{subscriptionStatus:r}}=t;return r.hasPaidSubscription&&r.subscriptionPlan===E.Y5.PLUS?"yearly"===r.billingPeriod?_.S.plusYearly:n?_.S.plusNeptuneForPlusUsers:_.S.plus:n?_.S.plusNeptuneForFreeUsers:_.S.plus},eL=E.D8.PLUS,eI=e=>{let{analyticsParams:t,currentAccount:n,isPlanLoading:r,onSubmit:a,setIsPlanLoading:i,shouldShowAdditionalLinks:o=!0,upgradeButtonText:l=_.S.plus.callToAction.inactive}=e,s=n.features,c=(0,m.Z)(),u=(0,K.useRouter)(),{0:d,1:f}=(0,X.useState)(!1),{0:p,1:v}=(0,X.useState)(!1),x=[],b=n.isOrWasPaidCustomer(),y=n.hasPaidSubscription(),j=n.getLastActiveSubscription(),{hasSignedUpForWaitlist:w,signUpForWaitlist:O}=eS(eL),k=(0,P.Hb)(),M=s.includes("disable_plus_upgrade_ui")&&!b,S=s.includes("show_cancel_plus_ui"),E=eN(eN({},t),{},{planType:eL,isUpgradeUiDisabled:M}),L=async()=>{i(!0),N.A.logEvent(D.M.clickAccountPaymentCheckout,E),H.m9.logEvent("chatgpt_account_payment_modal_upgrade_button_click",eL);try{let e=await V.Z.getCheckoutLink(s);null==a||a(),N.A.logEvent(D.M.navigatingToAccountPaymentCheckout,eN(eN({},E),{},{url:e.url})),H.m9.logEvent("chatgpt_account_payment_modal_navigating_to_checkout",eL,{url:e.url}),u.push(e.url)}catch(e){q.m.warning(c.formatMessage(eA.paymentErrorWarning),{hasCloseButton:!0})}i(!1)},I=async()=>{i(!0),N.A.logEvent(D.M.clickAccountCustomerPortal,E);try{let e=await V.Z.fetchCustomerPortalUrl();N.A.logEvent(D.M.navigatingToAccountCustomerPortal,E),u.push(e.url)}catch(e){q.m.warning(c.formatMessage(eA.accountErrorWarning),{hasCloseButton:!0})}i(!1)},A=y&&j.purchase_origin_platform===T._4.MOBILE_IOS,Z=y&&j.purchase_origin_platform===T._4.MOBILE_ANDROID,z=(j.purchase_origin_platform===T._4.WEBAPP||j.purchase_origin_platform===T._4.GRANTED)&&(null==n?void 0:n.hasCustomerObject()),R=z&&!p&&n.hasPaidSubscription()&&n.willRenewSubscription();k&&!y&&x.push((0,h.jsx)(C(),{href:T.Ks,target:"_blank",className:"px-2 underline",children:(0,h.jsx)(g.Z,eN({},eA.limitsApply))},"row-plus-plan-usage-limits")),A&&x.push((0,h.jsx)(C(),{href:T.m1,target:"_blank",onClick:()=>{N.A.logEvent(D.M.clickAccountManageIos,E)},className:"px-2 underline",children:c.formatMessage(_.S.manageSubscriptionIos.callToAction)},"row-plus-plan-manage-ios")),Z&&x.push((0,h.jsx)(C(),{href:T.Zr,target:"_blank",onClick:()=>{N.A.logEvent(D.M.clickAccountManageAndroid,E)},children:c.formatMessage(_.S.manageSubscriptionAndroid.callToAction)},"row-plus-plan-manage-android")),z&&(x.push((0,h.jsx)(C(),{href:"#",onClick:I,className:"px-2 underline",children:(0,h.jsx)(g.Z,eN({},_.S.manageSubscriptionWeb.callToAction))},"row-manage-subscription-link")),R&&S&&x.push((0,h.jsxs)("button",{children:[(0,h.jsx)("span",{onClick:()=>{f(!0),N.A.logEventWithStatsig(D.M.cancelPlusStart,"cancel_plus_start",eN(eN({},E),{},{cancel_start_source:"manage plan"}))},className:"cursor-pointer px-2 underline",children:(0,h.jsx)(g.Z,eN({},_.S.cancelSubscriptionWeb.callToAction))}),(0,h.jsx)(er,{isOpen:d,onClose:()=>f(!1),onCancelationComplete:()=>v(!0),analyticsParams:E})]},"row-cancel-subscription-link"))),b&&x.push((0,h.jsx)(C(),{target:"_blank",href:T.ti,onClick:F,className:"px-2 underline",children:(0,h.jsx)(g.Z,eN({},eA.billingHelp))},"row-plus-plan-help-link"));let B=eD({currentAccount:n,isGPT4oAvailable:k});return(0,h.jsx)(eb,{planName:"plus",pricingPlan:B,icon:(0,h.jsx)(W.X72,{className:"icon-md text-green-600"}),showForLine:!y&&!k,callToActionButton:M?(0,h.jsx)("div",{className:"relative w-full",children:(0,h.jsx)(G.u,{side:"bottom",sideOffset:20,label:c.formatMessage(_.S.disabledHighDemand.hoverText),children:(0,h.jsx)(U,{planType:eL,disabled:w,onClick:O,isCurrentPlan:y,testId:"select-plan-button-plus-waitlist",children:(0,h.jsx)(g.Z,eN({},w?_.S.signUpForWaitlist.inactive:_.S.signUpForWaitlist.active))})})}):(0,h.jsx)(U,{planType:eL,isCurrentPlan:y,disabled:y||r,onClick:L,testId:"select-plan-button-plus-upgrade",children:y?c.formatMessage(_.S.plus.callToAction.active):c.formatMessage(l)}),additionalLinks:o?x:[]})},eA=(0,j.vU)({haveExistingPlan:{id:"AccountPaymentModal.haveExistingPlan",defaultMessage:"Have an existing plan?"},billingHelp:{id:"AccountPaymentModel.billingHelp",defaultMessage:"I need help with a billing issue"},paymentErrorWarning:{id:"AccountPaymentModal.paymentErrorWarning",defaultMessage:"The payments page encountered an error. Please try again. If the problem continues, please visit help.openai.com."},accountErrorWarning:{id:"AccountPaymentModal.accountErrorWarning",defaultMessage:"The account management page encountered an error. Please try again. If the problem continues, please visit help.openai.com."},limitsApply:{id:"xda4i3",defaultMessage:"Limits apply"}});var eF=n(58171),eU=n(55371);function eZ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ez(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eZ(Object(n),!0).forEach(function(t){(0,c.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eZ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let eR=E.D8.TEAM,eB=e=>{let{analyticsParams:t,isPlanLoading:n}=e,r=(0,$.hz)(),a=null==r?void 0:r.includes("disable_team_upgrade_ui"),i=(0,m.Z)(),o=(0,$.t)(),{hasSignedUpForWaitlist:l,signUpForWaitlist:s}=eS(eR),c=o&&o.isTeam(),u=o&&o.isPlus(),d=ez(ez({},t),{},{planType:eR,isUpgradeUiDisabled:a}),f=(0,P.Hb)(),p=()=>{N.A.logEvent(D.M.clickAccountPaymentCheckout,d),H.m9.logEvent("chatgpt_account_payment_modal_upgrade_button_click",eR),eU.vm.setPurchaseWorkspaceData({minimumSeats:eF.Y6}),e$()};return(0,h.jsx)(eb,{planName:"team",pricingPlan:f?_.S.teamsNeptune:_.S.teams,icon:(0,h.jsx)(W.PBQ,{className:"icon-md text-brand-blue-800"}),callToActionButton:(0,h.jsxs)("div",{className:"flex flex-col gap-2",children:[c&&(0,h.jsx)(U,{planType:eR,isCurrentPlan:!0,disabled:n,onClick:p,testId:"select-plan-button-teams-upgrade",children:i.formatMessage(_.S.teams.callToAction.active)}),a?(0,h.jsx)("div",{className:"relative w-full",children:(0,h.jsx)(G.u,{side:"bottom",sideOffset:20,label:i.formatMessage(_.S.disabledHighDemand.hoverText),children:(0,h.jsx)(U,{planType:eR,isCurrentPlan:!1,disabled:l,onClick:s,testId:"select-plan-button-teams-waitlist",children:(0,h.jsx)(g.Z,ez({},l?_.S.signUpForWaitlist.inactive:_.S.signUpForWaitlist.active))})})}):(0,h.jsx)("div",{className:"w-full",children:(0,h.jsx)(U,{planType:eR,isCurrentPlan:!1,disabled:n,onClick:p,testId:"select-plan-button-teams-create",children:c||u?i.formatMessage(_.S.teams.callToAction.create):i.formatMessage(_.S.teams.callToAction.inactive)})})]})})};function eG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}let eW=()=>(0,h.jsx)(eb,{icon:(0,h.jsx)(W.sYc,{className:"icon-md text-brand-purple"}),planName:"enterprise",pricingPlan:_.S.enterprise,showForLine:!1,callToActionButton:(0,h.jsx)(U,{as:"link",to:T.B2,openNewTab:!0,onClick:()=>{N.A.logEvent(D.M.clickEnterpriseContactSalesButton),H.m9.logEvent("chatgpt_account_payment_modal_enterprise_sales_button_clicked")},planType:E.D8.ENTERPRISE,isCurrentPlan:!1,testId:"select-plan-button-enterprise",children:(0,h.jsxs)("div",{className:"flex items-center gap-1",children:[(0,h.jsx)(g.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eG(Object(n),!0).forEach(function(t){(0,c.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eG(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},_.S.enterprise.callToAction.create)),(0,h.jsx)(W.Pfi,{className:"icon-md"})]})})});var eq=n(98506),eV=n(59031),eH=n(7290),eK=n(14975);function eQ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eQ(Object(n),!0).forEach(function(t){(0,c.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eQ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let eY="pricing";function eJ(e){r=e;let t=Q().asPath.split("#");Q().push(t[0]+"#".concat(eY))}function e$(){let e=Q().asPath.split("#");Q().push(e[0])}function e0(e){return e.split("#")[1]===eY}function e1(e){let{currentAccount:t}=e,{0:n,1:a}=(0,X.useState)(!1),i=(0,X.useMemo)(()=>t.subscriptionAnalyticsParams,[t]),o=()=>{N.A.logEvent(D.M.closeAccountPaymentModal,i),e$()};(0,X.useEffect)(()=>{var e;N.A.logEvent(D.M.accountPaymentModalShow,eX(eX({},i),{},{location:r})),H.m9.logEvent("chatgpt_account_payment_modal_show",null,{location:null!==(e=r)&&void 0!==e?e:""}),r=void 0},[i]);let l=t.isPersonalAccount()?"personal":"business",{isSplitBetweenPersonalAndBusinessEnabled:s,isModalFullscreen:c,isTeamEnabled:d}=eu(),{0:m,1:v}=(0,X.useState)(l),x=(0,eq.w$)(),b=s&&x,y=e=>{v(e),N.A.logEvent(D.M.accountPaymentModalToggleClicked,{selectedTab:e}),H.m9.logEvent("chatgpt_account_payment_modal_toggle_clicked",null,{selectedTab:e})},j=function(e){let{analyticsParams:t,currentAccount:n,isPlanLoading:r,isModalFullscreen:a,isTeamEnabled:i,selectedTab:o,setIsPlanLoading:l,shouldSplitBetweenPersonalAndBusiness:s}=e,c=[],u=n.hasPaidSubscription();return s?"personal"===o?(u||c.push("free"),c.push("plus")):(i&&c.push("team"),a||c.push("enterprise")):(u||c.push("free"),n.isTeam()||c.push("plus"),i&&c.push("team")),0===c.length&&eV.U.addError(Error("Account payment modal missing columns")),c.map(e=>{switch(e){case"free":return(0,h.jsx)(R,{},e);case"plus":return(0,h.jsx)(eI,{analyticsParams:t,currentAccount:n,setIsPlanLoading:l,isPlanLoading:r},e);case"team":return(0,h.jsx)(eB,{analyticsParams:t,isPlanLoading:r},e);case"enterprise":return(0,h.jsx)(eW,{},e)}})}({analyticsParams:i,currentAccount:t,isModalFullscreen:c,isPlanLoading:n,isTeamEnabled:d,selectedTab:m,setIsPlanLoading:a,shouldSplitBetweenPersonalAndBusiness:b});return c?(0,h.jsxs)(u.Z,{size:"fullscreen",isOpen:!0,onClose:o,type:"success",className:"flex flex-col",children:[(0,h.jsxs)("div",{className:"relative grid grid-cols-[1fr_auto_1fr] px-6 py-4 md:pb-10 md:pt-[4.5rem]",children:[(0,h.jsx)("div",{}),(0,h.jsx)("span",{className:"text-2xl font-semibold md:text-3xl",children:(0,h.jsx)(g.Z,eX({},e2.modalTitle))}),(0,h.jsx)("button",{className:"justify-self-end text-token-text-primary opacity-50 transition hover:opacity-75 md:absolute md:right-6 md:top-6 ",onClick:()=>{o()},children:(0,h.jsx)(W.tPq,{className:(0,f.default)({"h-5 w-5":!x,"icon-lg":x})})})]}),t.isPersonalAccount()&&b?(0,h.jsx)("div",{className:"mb-6 flex justify-center",children:(0,h.jsx)("div",{className:"w-[fit-content]",children:(0,h.jsx)(w,{value:m,onChange:y})})}):null,(0,h.jsx)("div",{className:"flex flex-col justify-center gap-4 px-3 py-3 md:min-h-[30rem] md:flex-row md:gap-0 md:py-0",children:j}),(0,h.jsxs)("div",{className:"mb-12 mt-8 flex flex-col items-center justify-center gap-2 text-sm text-token-text-secondary md:mb-8 md:mt-8",children:[(0,h.jsx)(W.sYc,{}),(0,h.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,h.jsx)(g.Z,eX({},e2.needMoreCapabilities)),(0,h.jsx)("div",{children:(0,h.jsx)(g.Z,eX(eX({},e2.seeChatGptEnterprise),{},{values:{link:e=>(0,h.jsx)(C(),{target:"_blank",href:T.B2,onClick:()=>{N.A.logEvent(D.M.clickSeeEnterpriseLink),H.m9.logEvent("chatgpt_account_payment_modal_enterprise_link_clicked")},className:"mx-1 underline",children:e})}}))})]})]})]}):(0,h.jsx)(u.Z,{size:"custom",noPadding:!0,isOpen:!0,onClose:o,type:"success",className:(0,f.default)("focus-none !bg-transparent !shadow-none outline-none transition-width duration-0",1===j.length&&"md:max-w-lg",2===j.length&&"md:max-w-3xl",3===j.length&&"md:max-w-5xl"),children:(0,h.jsxs)("div",{className:"popover relative flex grow flex-col items-start justify-center overflow-hidden rounded-md border border-token-border-light bg-token-main-surface-primary shadow-md",children:[(0,h.jsxs)("div",{className:"flex w-full flex-row items-center justify-between border-b border-token-border-light px-8 py-6",children:[(0,h.jsx)("span",{className:"text-xl font-semibold",children:(0,h.jsx)(g.Z,eX({},e2.modalTitle))}),(0,h.jsxs)("div",{className:"flex gap-4",children:[t.isPersonalAccount()&&b?(0,h.jsx)(w,{value:m,onChange:y}):null,(0,h.jsx)(eK.P,{onClick:()=>{o()}})]})]}),b?(0,h.jsx)(eH.M,{children:(0,h.jsx)("div",{className:"w-full",children:(0,h.jsx)(p.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},exit:{opacity:0},children:(0,h.jsx)("div",{className:"center flex flex-col md:min-h-[30rem] md:flex-row",children:j})},m)})}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"flex w-full flex-col md:flex-row",children:j}),(0,h.jsx)("div",{className:"flex w-full items-center justify-center border-t border-token-border-light px-8 py-6",children:(0,h.jsx)("div",{className:"text-sm text-token-text-primary sm:flex sm:items-center",children:(0,h.jsx)(g.Z,eX(eX({},e2.modalFooterCapabilities),{},{values:{link:e=>(0,h.jsx)(C(),{target:"_blank",href:T.B2,onClick:()=>{N.A.logEvent(D.M.clickSeeEnterpriseLink),H.m9.logEvent("chatgpt_account_payment_modal_enterprise_link_clicked")},className:"mx-1 underline",children:e})}}))})})]})]})})}let e2=(0,j.vU)({modalTitle:{id:"AccountPaymentModal.modalTitle",defaultMessage:"Upgrade your plan"},modalFooterCapabilities:{id:"AccountPaymentModal.modalFooterCapabilities",defaultMessage:"Need more capabilities? See <link> ChatGPT Enterprise </link>"},needMoreCapabilities:{id:"SdJWr7",defaultMessage:"Need more capabilities for your business?"},seeChatGptEnterprise:{id:"7C5fuF",defaultMessage:"See<link>ChatGPT Enterprise</link>"}})},38144:function(e,t,n){n.d(t,{B2:function(){return a},D7:function(){return c},Ks:function(){return l},Zr:function(){return o},_4:function(){return s},m1:function(){return i},ti:function(){return r}});let r="https://help.openai.com/en/collections/3943089-billing",a="https://openai.com/enterprise",i="https://help.openai.com/en/articles/7905690-how-do-i-cancel-my-apple-subscription-for-chatgpt-plus-in-the-chatgpt-ios-app",o="https://help.openai.com/en/articles/8258076-how-to-cancel-my-plus-subscription-in-the-chatgpt-android-app",l="https://help.openai.com/en/articles/7102672-how-can-i-access-gpt-4",s={WEBAPP:"chatgpt_web",MOBILE_IOS:"chatgpt_mobile_ios",MOBILE_ANDROID:"chatgpt_mobile_android",GRANTED:"chatgpt_gratis_recepient",NOT_PURCHASED:"chatgpt_not_purchased"},c={ALREADY_PAID:"User is already paid"}},58171:function(e,t,n){n.d(t,{Y6:function(){return q},ZP:function(){return en}});var r,a,i,o,l,s,c,u,d,f,p=n(41141),m=n(94521),g=n(55775),h=n(75172),v=n(62984),x=n(68306),b=n(65530),y=n(651);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach(function(t){(0,m.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function O(e){let{workspaceName:t,onChangeWorkspaceName:n}=e,r=(0,h.Z)();return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:"mb-4 flex-wrap",children:[(0,y.jsx)("label",{htmlFor:"workspace-name",className:"block pb-1 text-lg font-semibold text-token-text-primary",children:(0,y.jsx)(v.Z,w({},k.workspaceNameLabel))}),(0,y.jsx)("p",{className:"font-base text-sm text-token-text-secondary",children:(0,y.jsx)(v.Z,w({},k.workspaceNameDescription))})]}),(0,y.jsx)(b.Z,{type:"text",name:"workspace-name",placeholder:r.formatMessage(k.exampleTeamWorkspaceName),value:t,onChange:e=>n(e.target.value),maxLength:64})]})}let k=(0,x.vU)({workspaceNameLabel:{id:"createWorkspace.workspaceNameLabel",defaultMessage:"Workspace name"},workspaceNameDescription:{id:"createWorkspace.workspaceNameDescription",defaultMessage:"Set a workspace name for your team. The name can be changed at any time."},exampleTeamWorkspaceName:{id:"createWorkspace.exampleTeamWorkspaceName",defaultMessage:"Acme Inc."}});var P=n(92426),M=n(8649),C=n(49217),T=n(84281),_=n(74091);_.Z.ol(a||(a=(0,p.Z)(["ml-5 list-decimal"])));let S=_.Z.ul(i||(i=(0,p.Z)(["ml-3 list-disc"]))),E=_.Z.li(o||(o=(0,p.Z)(["marker:text-token-text-tertiary text-token-text-primary mb-2"])));var N=n(94982),D=n(93223),L=n(4702),I=n(98131),A=n(37031),F=n(95182),U=n.n(F),Z=n(43128),z=n.n(Z),R=n(92379);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach(function(t){(0,m.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let W=((r={}).FLEXIBLE="month",r.ANNUAL="year",r),q=2,V=(0,A.b)(W),H=e=>{let{isOpen:t,onClose:n,onSubmit:r}=e,{0:a,1:i}=(0,R.useState)(""),o=(0,h.Z)();return(0,y.jsxs)(C.Z,{type:"success",isOpen:t,onClose:n,className:"max-w-lg",showCloseButton:!0,title:(0,y.jsx)(v.Z,G({},er.createWorkspace)),children:[(0,y.jsx)("div",{className:"flex flex-col justify-center bg-token-main-surface-primary pb-2",children:(0,y.jsx)(O,{workspaceName:a,onChangeWorkspaceName:i})}),(0,y.jsxs)("div",{className:"mt-4 flex flex-row justify-end",children:[(0,y.jsx)(M.m,{title:o.formatMessage(er.cancel),onClick:n}),(0,y.jsx)(M.m,{title:o.formatMessage(er.selectBillingOption),onClick:()=>{r(a)},disabled:""==a,color:"primary",className:"ml-4"})]})]})},K=_.Z.div(l||(l=(0,p.Z)(["p-6"]))),Q=_.Z.label(s||(s=(0,p.Z)(["font-semibold text-base cursor-pointer"]))),X=_.Z.div(c||(c=(0,p.Z)(["flex flex-col gap-3 text-token-text-secondary text-sm mt-3"]))),Y=_.Z.s(u||(u=(0,p.Z)(["text-token-text-tertiary"]))),J=_.Z.p(d||(d=(0,p.Z)(["text-token-text-primary"]))),$=_.Z.p(f||(f=(0,p.Z)(["text-base font-semibold mb-3 mt-3"])));function ee(e){let{billingType:t,name:n,billingFeatures:r,cost:a,costStructure:i}=e;return(0,y.jsxs)(K,{children:[(0,y.jsxs)("div",{className:"flex items-center gap-4",children:[(0,y.jsx)(I.ck,{value:t,id:t,className:"h-5 w-5 cursor-pointer rounded-full border border-token-border-medium bg-token-main-surface-primary outline-none hover:bg-token-main-surface-secondary radix-state-checked:border-green-500 radix-state-checked:bg-green-500",children:(0,y.jsx)(I.z$,{className:"flex items-center justify-center",children:(0,y.jsx)(P.$As,{className:"mt-0.5 h-[14px] w-[14px] stroke-[3] text-white"})})}),(0,y.jsx)(Q,{htmlFor:t,children:(0,y.jsx)(v.Z,G({},n))})]}),(0,y.jsxs)(X,{children:[(0,y.jsxs)("div",{children:[(0,y.jsx)(J,{children:(0,y.jsx)(v.Z,G(G({},a),{},{values:{s:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,y.jsx)(Y,{children:t})}}}))}),(0,y.jsx)("p",{children:(0,y.jsx)(v.Z,G({},i))})]}),(0,y.jsx)(S,{children:r.map(e=>(0,y.jsx)(E,{children:(0,y.jsx)(v.Z,G({},e))},e.id))})]})]})}let et=e=>{let{isOpen:t,onClose:n,onSubmit:r,minimumSeats:a}=e,{0:i,1:o}=(0,R.useState)(W.ANNUAL),{0:l,1:s}=(0,R.useState)(!1),c=(0,h.Z)(),{0:u,1:d}=(0,R.useState)(a),{0:f}=(0,R.useState)(new Date),p=ea[i],m=a>q?a:q;return(0,y.jsx)(C.Z,{type:"success",isOpen:t,onClose:n,size:"custom",noPadding:!0,className:"max-w-3xl",showCloseButton:!0,title:c.formatMessage(er.selectTeamPlanModalTitle),children:(0,y.jsxs)("div",{className:"grid grid-flow-row grid-cols-3",children:[(0,y.jsxs)(I.fC,{className:"col-span-3 grid md:col-span-2 md:grid-cols-2",defaultValue:i,onValueChange:e=>{V(e)&&o(e)},children:[(0,y.jsx)(ee,G({billingType:W.FLEXIBLE},ei)),(0,y.jsx)(ee,G({billingType:W.ANNUAL},eo))]}),(0,y.jsxs)("div",{className:"col-span-3 overflow-hidden border-l border-token-main-surface-tertiary bg-token-main-surface-secondary p-6 md:col-span-1",children:[(0,y.jsx)("label",{className:"mb-3 block text-base font-semibold",htmlFor:"seats",children:(0,y.jsx)(v.Z,G({},er.seatsTitle))}),(0,y.jsxs)("div",{className:"mb-3 flex items-center",children:[(0,y.jsx)("button",{disabled:u<=m,onClick:e=>{let t=e.shiftKey;d(e=>U()(e-=t?10:1,q,999))},className:"px-4 py-2 disabled:cursor-not-allowed disabled:text-token-text-secondary",children:(0,y.jsx)(P.V_R,{className:"icon-sm"})}),(0,y.jsx)("input",{type:"number",min:q,max:999,name:"seats",value:u,onChange:e=>{d(parseInt(e.target.value))},onBlur:()=>{u<m&&d(m),u>999&&d(999),u||d(m)},className:"m-0 h-9 appearance-none rounded border border-gray-200 px-2 py-0 text-center text-sm text-gray-800 shadow-none outline-none ring-transparent focus:border-green-500 focus:ring-green-500 dark:border-gray-700"}),(0,y.jsx)("button",{disabled:u>=999,onClick:e=>{let t=e.shiftKey;d(e=>U()(e+=t?10:1,q,999))},className:"px-4 py-2 disabled:cursor-not-allowed disabled:text-token-text-secondary",children:(0,y.jsx)(P.Vz5,{className:"icon-sm"})})]}),(0,y.jsx)(T.b,{}),(0,y.jsx)($,{children:(0,y.jsx)(v.Z,G({},er.summaryTitle))}),(0,y.jsxs)("div",{className:"text-sm",children:[(0,y.jsx)("p",{className:"mb-2",children:(0,y.jsx)(v.Z,G({},p.name))}),(0,y.jsxs)(S,{children:[(0,y.jsx)(E,{children:(0,y.jsx)(v.Z,G(G({},p.billed),{},{values:{date:(0,y.jsx)(x.Ji,{value:f})}}))}),(0,y.jsx)(E,{children:(0,y.jsx)("b",{children:(0,y.jsx)(v.Z,G(G({},p.total),{},{values:{totalCost:(u||0)*(i===W.ANNUAL?300:30)}}))})})]})]}),(0,y.jsx)("div",{className:"mt-4 flex justify-end",children:(0,y.jsx)(M.m,{title:c.formatMessage(er.continueToBillingButton),onClick:()=>{s(!0),r(i,u)},disabled:!1,loading:l,color:"primary"})})]})]})})};function en(e){let{isOpen:t,onClose:n,minimumSeats:r,existingAccount:a}=e,i=(0,h.Z)(),{0:o,1:l}=(0,R.useState)(a?(0,g.CV)(i,a):""),s=(0,L.hz)(),c=async(e,t)=>{try{let n=await D.Z.getCheckoutLink(s,{plan_name:"chatgptteamplan",team_plan_data:{workspace_name:o,price_interval:e,seat_quantity:t,existing_workspace_id:null==a?void 0:a.id}});z().push(n.url)}catch(e){N.m.warning(i.formatMessage(er.paymentErrorWarning),{hasCloseButton:!0})}};return""==o?(0,y.jsx)(H,{isOpen:t,onClose:n,onSubmit:e=>{l(e)}}):(0,y.jsx)(et,{isOpen:t,onClose:n,onSubmit:(e,t)=>{c(e,t)},minimumSeats:r})}let er=(0,x.vU)({flexiblePlanName:{id:"teamBilling.flexiblePlan.name",defaultMessage:"Flexible plan"},flexiblePlanCost:{id:"teamBilling.flexiblePlan.cost",defaultMessage:"USD $30"},flexibleBilledMonthly:{id:"teamBilling.flexiblePlan.billedMonthly",defaultMessage:"Price billed monthly"},flexibleAddRemoveUsers:{id:"teamBilling.flexiblePlan.addRemoveUsers",defaultMessage:"Add or remove users as needed"},flexibleMinBill:{id:"teamBilling.flexiblePlan.minBill",defaultMessage:"The minimum monthly bill is for 2 users, USD $60/month"},seatsTitle:{id:"teamBilling.seatsTitle",defaultMessage:"Seats"},summaryTitle:{id:"teamBilling.summaryTitle",defaultMessage:"Summary"},annualPlanName:{id:"teamBilling.annualPlan.name",defaultMessage:"Annual plan"},annualPlanCost:{id:"teamBilling.annualPlan.cost",defaultMessage:"USD $25 <s>$30</s>"},annualBilledAnnually:{id:"teamBilling.annualPlan.billedAnnually",defaultMessage:"Annual price billed annually"},annualAddUsersWithRenewal:{id:"teamBilling.annualPlan.addUsersWithRenewal",defaultMessage:"Add users as needed, remove users only when you renew the contract"},annualMinBill:{id:"teamBilling.annualPlan.minBill",defaultMessage:"The minimum bill is for 2 users, USD $50/month billed annually"},teamsCostStructure:{id:"teamBilling.teamsCostStructure",defaultMessage:"per person/month"},annualSavingsPercentage:{id:"teamBilling.annualSavingsPercentage",defaultMessage:"16.7% off"},createWorkspace:{id:"createWorkspace.title",defaultMessage:"Create workspace"},cancel:{id:"createWorkspace.cancel",defaultMessage:"Cancel"},selectTeamPlan:{id:"createWorkspace.selectTeamPlan",defaultMessage:"Select Team Plan"},selectTeamPlanModalTitle:{id:"createWorkspace.selectTeamPlanModalTitle",defaultMessage:"Select your team plan"},continueToBillingButton:{id:"createWorkspace.continueToBillingButton",defaultMessage:"Continue to billing"},paymentErrorWarning:{id:"createWorkspace.paymentErrorWarning",defaultMessage:"The payments page encountered an error. Please try again. If the problem continues, please visit help.openai.com."},selectBillingOption:{id:"createWorkspace.selectBillingOption",defaultMessage:"Select billing options"},annualPlanSelected:{id:"teamBilling.annualPlanSelected",defaultMessage:"ChatGPT Team annual plan"},annualPlanBilled:{id:"teamBilling.annualPlanBilled",defaultMessage:"Price billed annually, starting {date}"},annualPlanTotal:{id:"teamBilling.annualPlanTotal",defaultMessage:"USD ${totalCost} per year total"},flexiblePlanSelected:{id:"teamBilling.flexiblePlanSelected",defaultMessage:"ChatGPT Team flexible plan"},flexiblePlanBilled:{id:"teamBilling.flexiblePlanBilled",defaultMessage:"Price billed monthly, starting {date}"},flexiblePlanTotal:{id:"teamBilling.flexiblePlanTotal",defaultMessage:"USD ${totalCost} per month total"}}),ea={[W.FLEXIBLE]:{name:er.flexiblePlanSelected,billed:er.flexiblePlanBilled,total:er.flexiblePlanTotal},[W.ANNUAL]:{name:er.annualPlanSelected,billed:er.annualPlanBilled,total:er.annualPlanTotal}},ei={type:W.FLEXIBLE,name:er.flexiblePlanName,cost:er.flexiblePlanCost,costStructure:er.teamsCostStructure,billingFeatures:[er.flexibleBilledMonthly,er.flexibleAddRemoveUsers,er.flexibleMinBill]},eo={type:W.ANNUAL,name:er.annualPlanName,cost:er.annualPlanCost,costStructure:er.teamsCostStructure,originalCost:er.flexiblePlanCost,savingsFromOriginal:er.annualSavingsPercentage,billingFeatures:[er.annualBilledAnnually,er.annualAddUsersWithRenewal,er.annualMinBill]}},34565:function(e,t,n){n.d(t,{J:function(){return a},N:function(){return i}});var r=n(68810);let a={label:"Auto",value:""},i=(0,r.Ue)(()=>({forceParagen:!1,forceNulligen:!1,forceParagenModel:a,forceRateLimit:!1,resetRateLimits:!1,showDebugConversationTurns:!1,rebaseSystemMessageContent:null}))},54591:function(e,t,n){n.d(t,{hO:function(){return p},pm:function(){return d},qg:function(){return f}});var r,a=n(94521),i=n(43852),o=n(93223),l=n(35226),s=n(96053);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let d=((r={}).LocaleBanner="oai/apps/hasSeenLocaleBanner",r.HasSeenPluginDisclaimer="oai/apps/hasSeenPluginsDisclaimer",r.FirstTimeUsingUserContext="oai/apps/hasUserContextFirstTime/2023-06-29",r.Onboarding="oai/apps/hasSeenOnboarding",r.TeamOwnerOnboarding="oai/apps/hasSeenTeamOwnerOnboarding",r.MemoryOnboarding="oai/apps/hasSeenMemoryOnboarding",r.TemporaryChatOnboarding="oai/apps/hasSeenTemporaryChatOnboarding",r.ArchiveConversationOnboarding="oai/apps/hasSeenArchiveConversationOnboarding",r.ExploreGPTs="oai/apps/hasSeenExploreGPTs2",r.ExploreGPTsNewNux="oai/apps/hasSeenExploreGPTsNewNux",r.MentionGPTs="oai/apps/hasSeenMentionGPTs",r.ModelTunerDisclaimer="oai/apps/hasSeenModelTunerDisclaimer",r.DalleEditingOnboarding="oai/apps/hasSeenDalleEditingOnboarding",r.ModelSwitcherAutoDowngrade="oai/apps/hasSeenModelSwitcherAutoDowngrade",r.SonicSidebar="oai/apps/hasDismissedSonicSidebar",r.ContextConnectors="oai/apps/hasSeenContextConnectorTooltip",r.AG8PqS2q="oai/apps/hasDismissedAG8PqS2q",r.SidekickLauncherOnboarding="oai/apps/hasSeenSidekickLauncherOnboarding",r.UseSidekick="oai/apps/hasDismissedUseSidekick",r.hasSeenSncWelcomeNux="oai/apps/hasSeenSncWelcomeNux",r);function f(e){let{data:t=[],isLoading:n}=(0,i.vl)(e=>e.eligible_announcements),r=p();return{eligible:t.includes(e),markAsViewed:()=>r.mutate({key:e}),isLoading:n}}function p(){let e=(0,l.NL)();return(0,s.D)({mutationFn:e=>{let{key:t}=e;return o.Z.announcementViewed(t)},onMutate:async t=>{let{key:n}=t;e.setQueryData(["userSettings"],e=>u(u({},e),{},{eligible_announcements:e.eligible_announcements.filter(e=>e!==n)}))},onSuccess:()=>{e.invalidateQueries({queryKey:["userSettings"]})}})}},80792:function(e,t,n){n.d(t,{N:function(){return l}});var r=n(92379),a=n(29855),i=n(73487),o=n(55059);let l=e=>{let{isLoading:t,categories:n}=(0,o.OX)(),l=(0,a.V)({clientThreadId:e});return(0,r.useMemo)(()=>{let e=[],r=[];if(t)return{isLoadingModels:!0,availableModels:e,deniedModels:r};for(let t of n){var a;if((0,i.q_)(t))continue;let{defaultModel:n}=t,o=null!==(a=l[n])&&void 0!==a?a:{},{conversation:s=[],regenerate:c=[]}=o;s.length||c.length?r.push({category:t,denials:o}):e.push(t)}return{availableModels:e,deniedModels:r}},[t,n,l])}},62004:function(e,t,n){n.d(t,{H:function(){return s},W:function(){return c}});var r=n(94521),a=n(85734),i=n(82823),o=n(86021);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){return null==e||[a.OL.PrimaryAssistant,a.OL.GizmoInteraction].includes(e.kind)}function c(e,t){let n=(0,o.WA)(e,t),{data:s}=(0,i.b9)(null!=n&&"gizmo_id"in n?n.gizmo_id:void 0,(null==n?void 0:n.kind)===a.OL.GizmoTest);if(null!=n)switch(n.kind){case a.OL.GizmoInteraction:case a.OL.GizmoMagicCreate:case a.OL.GizmoTest:return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({gizmo:s},n);case a.OL.PrimaryAssistant:return n}}},10830:function(e,t,n){n.d(t,{BT:function(){return s},Y8:function(){return c},Zp:function(){return d},c0:function(){return u},kc:function(){return l},uU:function(){return o}});var r=n(92379),a=n(68810),i=n(73177);let o="model_cap_exceeded",l=(0,a.Ue)(()=>({serverThreadIds:new Set}));function s(){let e=c(e=>e.isoDate),t=Date.now(),n=e&&new Date(e).getTime(),a=e&&n&&n<=t;return((0,r.useEffect)(()=>{a&&d()},[a]),a)?null:e?"gpt-4":null}let c=(0,a.Ue)()((0,i.tJ)(()=>({isoDate:""}),{name:"oai/apps/capExpiresAt"}));function u(e){c.setState({isoDate:e})}function d(){c.setState({isoDate:""})}},23956:function(e,t,n){n.d(t,{y:function(){return i}});var r=n(80792),a=n(55059);let i=e=>{let{isLoading:t}=(0,a.Y7)(),{availableModels:n}=(0,r.N)(e);return!t&&!n.length}},74759:function(e,t,n){n.d(t,{_C:function(){return o},xT:function(){return l}});var r=n(17927),a=n(92379),i=n(24040);function o(){let e=(0,i.aF)(),t=null==e?void 0:e.id,{currentWorkspace:n}=(0,i.ec)(e=>{let{currentWorkspace:t}=e;return{currentWorkspace:t}}),a=null==n?void 0:n.id;return r.m.getItem(r.F.LastUsedModel,{workspaceId:a,userId:t})}function l(){let e=(0,i.aF)(),t=null==e?void 0:e.id,{currentWorkspace:n}=(0,i.ec)(e=>{let{currentWorkspace:t}=e;return{currentWorkspace:t}}),o=null==n?void 0:n.id;return(0,a.useCallback)(e=>{if(!e)return null;let n=Date.now();r.m.setItem(r.F.LastUsedModel,{modelId:e,updatedAt:n},{workspaceId:o,userId:t})},[o,t])}},29855:function(e,t,n){n.d(t,{V:function(){return l}});var r=n(85734),a=n(25257),i=n(12586),o=n(86021);function l(e){var t,n;let{clientThreadId:l}=e,s=o.tQ.getThreadCurrentLeafId(l),c=null!==(t=null===(n=o.tQ.getTree(l).getMessage(s).metadata)||void 0===n?void 0:n.model_switcher_deny)&&void 0!==t?t:[],u={};c.forEach(e=>{var t,n;let{slug:r,context:a,reason:i,description:o}=e,l=null!==(t=u[r])&&void 0!==t?t:{},s=null!==(n=l[a])&&void 0!==n?n:[];s.push({reason:i,description:o}),l[a]=s,u[r]=l});let d=(0,i.dt)(),f=(0,a.Sj)();for(let e of(0,a.p7)()?f:d){let t="model_slug"in e?e.model_slug:e.limit_details.model_slug,n=e.resets_after;[r.UB.CONVERSATION,r.UB.REGENERATE].forEach(e=>{var a,i;let o=null!==(a=u[t])&&void 0!==a?a:{},l=null!==(i=o[e])&&void 0!==i?i:[],s={reason:r.Ls.RATE_LIMIT,resetsAfter:n};l.push(s),o[e]=l,u[t]=o})}return u}},73487:function(e,t,n){n.d(t,{dN:function(){return _},nP:function(){return S},ft:function(){return E},ZP:function(){return F},q_:function(){return N},f3:function(){return L},i0:function(){return I}});var r,a,i,o=n(94521),l=n(85734),s=n(96243),c=n(2377),u=n(4702),d=n(14015),f=n.n(d),p=n(92379),m=n(55257),g=n(10830),h=n(54538),v=n(24040),x=n(14816),b=n(75172),y=n(68306),j=n(93223),w=n(65032);let O={textarea:"","model-switcher":""},k=(0,y.vU)({shortLimitMinutes:{id:"modelCapMessaging.shortLimitMinutes",defaultMessage:"Limit {numerator, plural, =0 {# message} one {# message} other {# messages}} / {denominator, plural, =0 {# minute} one {# minute} other {# minutes}}"},shortLimitHours:{id:"modelCapMessaging.shortLimitHours",defaultMessage:"Limit {numerator, plural, =0 {# message} one {# message} other {# messages}} / {denominator, plural, =0 {# hour} one {# hour} other {# hours}}"},shortLimitDays:{id:"modelCapMessaging.shortLimitDays",defaultMessage:"Limit {numerator, plural, =0 {# message} one {# message} other {# messages}} / {denominator, plural, =0 {# day} one {# day} other {# days}}"}});var P=n(55059),M=n(651);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let _=((r={}).BROWSING="browsing_model",r.CODE_INTERPRETER="code_interpreter_model",r.DALLE="dalle_model",r),S=((a={}).ALPHA="alpha",a.EXPERIMENTS="experiments",a.MAINLINE="mainline",a),E=((i={}).GPT4o="AG8PqS2q",i.AUTO="auto",i),N=e=>{let{categoryId:t}=e;return t===E.AUTO},D={[_.BROWSING]:{name:(0,M.jsxs)("span",{children:["Browse with ",(0,M.jsx)(m.jE,{className:"icon-sm mt-[-3px] inline-block"})," Bing"]})},[_.CODE_INTERPRETER]:{name:"Advanced Data Analysis"},[_.DALLE]:{name:"DALL\xb7E 3"}};function L(e){let t=function(e){for(let t of F())if(t.options.length>0&&t.options.find(t=>t.value===e))return t.categoryId;return null}(null!=e?e:void 0);return(0,s.r)([S.ALPHA,S.EXPERIMENTS,S.MAINLINE],t)?"bg-orange-500 text-white":"bg-token-main-surface-primary text-token-text-primary"}function I(e,t){let{data:n}=(0,P.Y7)(),r=null==n?void 0:n.categories.some(n=>n[t]===e);return null!=r&&r}let A=e=>f()(e,e=>{let{id:t}=e;return t.split(":").slice(0,1).join(":")});function F(){var e;let{data:t}=(0,P.Y7)(),n=(0,g.BT)(),r=(0,u.t)(),a=(0,c.w)(null==r?void 0:r.getWorkspaceId()),i=null!==(e=null==r?void 0:r.isEnterprise())&&void 0!==e&&e,{modelSwitcherDisclaimer:o}=function(){let e=(0,g.Y8)(e=>e.isoDate),t=(0,w.xz)(e),n=(0,b.Z)(),r=(0,v.ec)(v.F_.isEnterprisePlan),{isUnauthenticated:a,isLoading:i}=(0,h.u)(),{data:o}=(0,x.a)({queryKey:["modelMessageCap",a],queryFn:()=>j.Z.getModelMessageCap(a),enabled:!i});return(0,p.useMemo)(()=>{var e,a,i;let l=null!==(e=null==o?void 0:o.message_cap)&&void 0!==e?e:0,s=null!==(a=null==o?void 0:o.message_cap_window)&&void 0!==a?a:1,{text:c,type:u,value:d}=function(e){if(e<60)return{type:"minute",value:e,text:e<2?"minute":"".concat(e," minutes")};let t=Math.floor(e/60);if(t<24)return{type:"hour",value:t,text:t<2?"hour":"".concat(t," hours")};let n=Math.floor(t/24);return n<7?{type:"day",value:n,text:n<2?"day":"".concat(n," days")}:{type:"minute",value:e,text:e<2?"minute":"".concat(e," minutes")}}(s),f=null!==(i=null==o?void 0:o.message_disclaimer)&&void 0!==i?i:O;if(!c||r)return{textareaDisclaimer:f.textarea,modelSwitcherDisclaimer:f["model-switcher"],modelSwitcherLimitShort:""};if(!o||!s||!l)return{textareaDisclaimer:O.textarea,modelSwitcherDisclaimer:O["model-switcher"],modelSwitcherLimitShort:""};let p=n.formatMessage(k.shortLimitMinutes,{numerator:l,denominator:d});switch(u){case"hour":p=n.formatMessage(k.shortLimitHours,{numerator:l,denominator:d});break;case"day":p=n.formatMessage(k.shortLimitDays,{numerator:l,denominator:d})}return{textareaDisclaimer:f.textarea.replaceAll("%FORMATTED_TIME%",t).replaceAll("%NUMERATOR%","".concat(l)).replaceAll("%DENOMINATOR%",c),modelSwitcherDisclaimer:f["model-switcher"].replaceAll("%FORMATTED_TIME%",t).replaceAll("%NUMERATOR%","".concat(l)).replaceAll("%DENOMINATOR%",c),modelSwitcherLimitShort:p}},[o,t,n,r])}(),s=(0,P.iu)();return(0,p.useMemo)(()=>{let e=[];if(!t)return e;let{categories:r,groups:c,modelsMap:u}=t;for(let l of r){let{defaultModel:r,categoryId:c,label:u}=l;if(s.has(r)){let d=n===r,f=t.modelsMap[r],p=d?[]:function(e,t,n,r,a){let i=[],o=null==e?void 0:e.browsing;if((a&&o||!a)&&null!=t[_.BROWSING]&&n.has(t[_.BROWSING])){let e=D[_.BROWSING];i.push(U(r[t[_.BROWSING]],{name:e.name}))}if(null!=t[_.CODE_INTERPRETER]&&n.has(t[_.CODE_INTERPRETER])){let e=D[_.CODE_INTERPRETER];i.push(U(r[t[_.CODE_INTERPRETER]],{name:e.name}))}if(null!=t[_.DALLE]&&n.has(t[_.DALLE])){let e=D[_.DALLE];i.push(U(r[t[_.DALLE]],{name:e.name}))}return i}(a.data,l,s,t.modelsMap,i);e.push({categoryId:c,value:r,name:u,description:d?o:f.description,options:[U(f,{name:"Default"}),...p]})}}for(let t of c){let{group:n,label:r,modelIds:a}=t,i=a[0],o=a.map(e=>u[e]).filter(e=>{let{tags:t}=e;return!t.includes(l.S.HIDDEN)});if(n===S.EXPERIMENTS){let t=Object.entries(A(o)).map(e=>{let[t,n]=e,r=t.split(":").slice(-1)[0];return{key:t,value:r,name:r,options:n.map(e=>{let{title:t}=e;return U(T(T({},e),{},{title:t.replace(r,"")}))})}});e.push({categoryId:n,value:i,name:r,options:t})}else e.push({categoryId:n,value:i,name:r,options:o.map(e=>U(e))})}return e},[t,s,n,a.data,i,o])}function U(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return T({value:e.id,name:e.title},t)}},55059:function(e,t,n){n.d(t,{B9:function(){return A},Bv:function(){return z},H6:function(){return B},Hb:function(){return D},OX:function(){return N},Tg:function(){return E},WK:function(){return G},Xy:function(){return R},Y7:function(){return S},fm:function(){return U},ge:function(){return O},iu:function(){return L},j8:function(){return W},kH:function(){return P},mx:function(){return k},vJ:function(){return Z}});var r=n(94521),a=n(17379),i=n(4702),o=n(25257),l=n(12586),s=n(14718),c=n(14816),u=n(93747),d=n(43128),f=n(92379),p=n(85734),m=n(93223),g=n(86021),h=n(80179),v=n(10830),x=n(74759),b=n(73487);let y=["default_model","tagline","color","human_category_name","category","human_category_short_name","subscription_level","short_explainer"];function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let O="text-davinci-002-render-sha",k="gpt-4",P="gpt-4o",M=B({slug:O,max_tokens:4097,title:"Default",description:"",tags:[p.S.GPT_3_5],product_features:{}}),C=e=>{let{default_model:t,tagline:n,color:r,human_category_name:i,category:o,human_category_short_name:l,subscription_level:s,short_explainer:c}=e;return w({color:r,tagline:n,defaultModel:t,label:i,shortLabel:l,description:c,subscriptionLevel:s,categoryId:o},(0,a.Z)(e,y))},T=e=>{let{icon:t,icon_filled_src:n,icon_outline_src:r}=e;return{iconName:t,iconFilledSrc:n,iconOutlineSrc:r}},_=e=>{let{group:t,human_group_name:n,human_group_short_name:r,model_ids:a}=e;return{group:t,label:n,shortLabel:r,modelIds:a}};function S(){let e=(0,h.V_)();return(0,c.a)((0,s.C)({retry:5,queryKey:["models",{isHistoryDisabled:e}],queryFn:async()=>await m.Z.getModels(e).then(e=>{var t;let{models:n,internal_groups:r,categories:a}=e,i=n.map(B);return{categories:a.concat().reverse().map(C),groups:null!==(t=null==r?void 0:r.map(_))&&void 0!==t?t:[],modelsList:i,modelsMap:Object.fromEntries(i.map(e=>[e.id,e]))}})}))}function E(){return(0,c.a)((0,s.C)({retry:5,queryKey:["modelIcons"],queryFn:async()=>await m.Z.getModelIcons().then(e=>Object.fromEntries(Object.entries(e).map(e=>{let[t,n]=e;return[t,T(n)]})))}))}function N(){let{isLoading:e,data:{categories:t=[],groups:n=[]}={}}=S();return{isLoading:e,categories:t,groups:null!=n?n:[]}}function D(){let{categories:e}=N();return!!e.find(e=>{let{categoryId:t}=e;return t===b.ft.GPT4o})}function L(){let{data:e}=S();return(0,f.useMemo)(()=>new Set(e?Object.keys(e.modelsMap):[O]),[e])}let I={[O]:M};function A(){var e;let{data:t}=S();return null!==(e=null==t?void 0:t.modelsMap)&&void 0!==e?e:I}function F(e,t,n){var r,a;let i=p.S.GPT_3_5;return n?i=p.S.GPT_4:t&&(i=p.S.GPT_4o),null!==(r=null!==(a=null==e?void 0:e.modelsList.find(e=>e.tags.includes(i)))&&void 0!==a?a:null==e?void 0:e.modelsList[0])&&void 0!==r?r:M}function U(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,d.useRouter)(),{query:n}=t;return(0,f.useCallback)(r=>{let{location:a,modelId:i}=r,o={model:encodeURIComponent(i)},l=t.route.includes("/g/");if(e||l)u.A.logNewChatButtonClicked({location:a}),t.push({pathname:"/",query:o},void 0,{shallow:!0});else{let e=w(w({},n),o);u.A.logNewChatButtonClicked({location:a}),t.replace({pathname:t.basePath,query:e},void 0,{shallow:!0})}},[e,n,t])}function Z(){var e;let{data:{categories:t=[]}={}}=S(),{doesUserHaveAnyAccountsWithPlusFeatures:n}=(0,i.al)();if(n)return null;let r=t.find(b.q_);return null!==(e=null==r?void 0:r.defaultModel)&&void 0!==e?e:null}function z(e){let{query:t}=(0,d.useRouter)(),{data:n}=S(),r=G(t),a=(0,g.XK)(e),{serverThreadIds:s}=(0,v.kc)(),c=L(),u=(0,g.GK)(e),p=(0,x._C)(),m=(0,g.Ao)(e),{doesUserHaveAnyAccountsWithPlusFeatures:h}=(0,i.al)(),b=(0,i.t)(),y=F(n,!!h,!!(null!=b&&b.isEnterprise())),j=Z(),w=(0,f.useMemo)(()=>{var e,t,n;if(0===c.size)return;if(j)return j;let i=void 0!==a&&s.has(a)?null==y?void 0:y.id:null,o=null!=u&&c.has(u)?u:null,l=r&&c.has(r)?r:null,d=p&&c.has(null==p?void 0:p.modelId)?p.modelId:null;return null!==(e=null!==(t=null!==(n=null!=i?i:l)&&void 0!==n?n:o)&&void 0!==t?t:d)&&void 0!==e?e:y.id},[c,j,a,s,y.id,u,r,p]),O=(0,l.hl)(null!=w?w:""),k=(0,o.p7)(),P=(0,g.y8)(e);if(P&&k)return P;if(!m||!w)return w;let M=O.find(e=>e.limit_details.using_default_model_slug===w);if(M){let e=M.limit_details.next_model_slug;return c.has(e)?e:w}return w}function R(e){let t=z(e),n=A();return(0,f.useMemo)(()=>{var e;return null==t?M:null!==(e=n[t])&&void 0!==e?e:M},[t,n])}function B(e){return{id:e.slug,maxTokens:e.max_tokens,title:e.title,description:e.description,tags:e.tags,enabledTools:e.enabled_tools,product_features:e.product_features}}function G(e){var t;return decodeURIComponent(null!==(t=e.model)&&void 0!==t?t:"")||null}function W(){let{data:e}=S(),{doesUserHaveAnyAccountsWithPlusFeatures:t}=(0,i.al)(),n=(0,i.t)();return F(e,!!t,!!(null!=n&&n.isEnterprise()))}},44104:function(e,t,n){n.d(t,{M:function(){return p},l:function(){return f}});var r=n(17379),a=n(85734),i=n(55059),o=n(86021),l=n(76754),s=n(43128),c=n(92379),u=n(8844);function d(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let f="q";function p(e){var t;let{clientThreadId:n,currentLeafId:p,handleRequestCompletion:g}=e,h=(0,c.useRef)(!1),{isLoading:v}=(0,i.Y7)(),x=(0,s.useRouter)(),b=(0,c.useCallback)((e,t,r,i)=>{o.tQ.updateTree(n,n=>{n.addNode(e,r,t,a.uU.User,void 0,i)})},[n]),y=(0,c.useCallback)(async(e,t,n,r)=>{let{content:i,attachments:o}=t;b(e,p,i,o.length>0?{attachments:o}:{}),g({type:a.Os.Next,promptId:e,eventMetadata:n,cancelActiveRequests:!0,completionMetadata:r})},[b,g,p]),j=x.isReady?window.location.pathname:null,w=!v&&null!=(t=j)&&("/"===t||m(t)),O=o.iN.getConversationMode(n),k=(0,l.f)();m(j)&&void 0===k&&(w=!1),(0,c.useEffect)(()=>{var e;if(!w||h.current)return;let t=x.query,{[f]:a,m:i}=t,l=(0,r.Z)(t,[f,"m"].map(d)),s=null!==(e="string"==typeof a?a:null)&&void 0!==e?e:"string"==typeof i?i:null;if(!s||null!=o.tQ.getServerThreadId(n)||null==O)return;let c=(0,u.Z)();h.current=!0,x.replace({query:l},void 0,{shallow:!0}),y(c,{content:s,attachments:[]},{eventSource:"url"},{conversationMode:O,source:"instant-query"})},[w,x,y,n,O])}function m(e){return null!=e&&/^\/g\/[\w-]+$/.test(e)}},12586:function(e,t,n){n.d(t,{Bl:function(){return g},DJ:function(){return v},DN:function(){return f},Ib:function(){return y},Li:function(){return h},TX:function(){return x},Yt:function(){return j},dt:function(){return p},hC:function(){return b},hl:function(){return u},p7:function(){return d}});var r=n(85734),a=n(96243),i=n(23956),o=n(55059),l=n(14314),s=n(25257),c=n(86021);function u(e){let t=(0,l.pm)(e=>e.modelRateLimitsByDefaultModelSlug)[e];return t?Object.values(t).filter(l.Ds):[]}function d(e){var t;let n=null!==(t=(0,o.Bv)(e))&&void 0!==t?t:"",r=(0,c.Kt)(e),a=u(n);return r?[]:a}function f(e){let t=d(e);return(0,l.Kr)(t)}function p(){return Object.values((0,l.pm)(e=>e.modelRateLimitsByDefaultModelSlug)).flatMap(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.values(e)}).filter(l.Ds)}function m(e){let t=(0,l.pm)(e=>e.featureRateLimitsByFeatureName)[e];return t&&(0,l.Ds)(t)?t:null}function g(e){var t;let n=(0,l.pm)(e=>e.featureRateLimitsByThreadId),i=(0,l.pm)(e=>e.featureRateLimitsByFeatureName),o=Object.values(null!==(t=n[e])&&void 0!==t?t:{}),s=!!(0,c.eV)(e);if(s){let e=i[r.X5.GIZMO];e&&o.push(e)}return o.filter(e=>{if(!(0,a.l)(e)||!(0,l.Ds)(e))return!1;let{limit_details:t}=e;return t.feature_limit_name!==r.X5.GIZMO||!!s})}function h(e){let t=(0,c.eV)(e),n=j(),r=(0,s.p7)(),a=!!(0,s.zd)(),o=f(e),l=(0,i.y)(e);return r?!!a:n&&!!t||l&&!!o}function v(e){var t;let{categories:n}=(0,o.OX)(),a=h(e),i=d(e);if(!a)return;let l=c.tQ.getThreadCurrentLeafId(e),s=null===(t=c.tQ.getTree(e).getMessage(l).metadata)||void 0===t?void 0:t.model_switcher_deny;if(!s)return;let u=s.filter(e=>e.context===r.UB.CONVERSATION);if(0===u.length)return;let f=u[0].reason;if(0===i.length)return;let p=i[0].limit_details.model_slug,m=n.find(e=>{let{defaultModel:t}=e;return t===p}),{label:g}=null!=m?m:{};if(g)return{reason:f,modelName:g}}function x(){return m(r.X5.FILE_UPLOAD)}function b(){let e=x(),t=(0,s.Fz)(),n=(0,s.p7)();return{fileUploadRateLimit:e,isDisabled:!n&&null!=e||n&&!!t,rateLimitPopup:t,serverDrivenRateLimitsEnabled:n}}function y(){return m(r.X5.GIZMO)}function j(){return!!y()}},86021:function(e,t,n){n.d(t,{Ao:function(){return eb},Fe:function(){return eu},GD:function(){return $},GK:function(){return ek},Hk:function(){return en},JI:function(){return J},Kt:function(){return Q},Lp:function(){return E},OX:function(){return _},Rz:function(){return ef},U0:function(){return Y},UL:function(){return q},Um:function(){return B},Uy:function(){return ei},WA:function(){return V},XK:function(){return W},XL:function(){return ea},Yk:function(){return et},Zz:function(){return N},_L:function(){return I},aS:function(){return ev},dz:function(){return ec},eV:function(){return H},eY:function(){return eh},ff:function(){return ey},h9:function(){return eO},iN:function(){return z},je:function(){return eo},lA:function(){return es},lz:function(){return ew},nh:function(){return el},o0:function(){return ej},oq:function(){return X},ot:function(){return K},qA:function(){return er},qN:function(){return F},r7:function(){return ex},tQ:function(){return R},u9:function(){return ed},uj:function(){return ee},xn:function(){return eP},y8:function(){return G},yt:function(){return ep}});var r,a=n(85734);n(21515);var i=n(82823),o=n(55059),l=n(93223),s=n(24358),c=n(92524),u=n(18850),d=n(9781),f=n(93747),p=n(15236),m=n(48538),g=n(59031),h=n(48580),v=n(13859),x=n.n(v),b=n(2428),y=n.n(b),j=n(65925),w=n.n(j),O=n(43128),k=n(92379),P=n(8844),M=n(68810),C=n(95267),T=n(1552);function _(){return"".concat(a.Uo).concat((0,P.Z)())}let S=0;function E(){return S++}function N(e){return e.startsWith(a.Uo)}let D=()=>new u.Cv,L=()=>Object.freeze({lastModelUsed:null,createTime:new Date}),I=((r={}).NewChat="NewChat",r.Server="Server",r.User="User",r.Generated="Generated",r.Unknown="Unknown",r),A={},F=(0,M.Ue)((0,C.n)(()=>({threads:{},clientNewThreadIdToServerIdMapping:{},threadRetainCounts:{}}))),U=F.getState,Z=F.setState,z={resolveThreadId:function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U();return null!==(t=n.clientNewThreadIdToServerIdMapping[e])&&void 0!==t?t:e},getThread:function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U(),r=z.resolveThreadId(e,n);return null!==(t=n.threads[r])&&void 0!==t?t:null},hasThread:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U(),n=z.resolveThreadId(e,t);return null!=t.threads[n]},isLoading:function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U(),r=z.resolveThreadId(e,n);return null===(t=n.threads[r])||void 0===t?void 0:t.isLoading},getConversationMode:function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U(),r=z.resolveThreadId(e,n);return null===(t=n.threads[r])||void 0===t?void 0:t.mode},getThreadModelId:function(e){var t,n;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U();return null!==(t=null===(n=z.getThread(e,r))||void 0===n?void 0:n.modelId)&&void 0!==t?t:null},getGizmoId(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U(),n=t.threads[z.resolveThreadId(e,t)];if((null==n?void 0:n.mode.kind)===a.OL.GizmoInteraction||(null==n?void 0:n.mode.kind)===a.OL.GizmoTest)return n.mode.gizmo_id},getThreadTitleSource(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U(),n=z.resolveThreadId(e,t),r=t.threads[n];return null!=r?r.titleSource:I.Unknown},getThreadCreateTime(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U(),r=z.resolveThreadId(e,n);return null===(t=n.threads[r])||void 0===t||null===(t=t.initialThreadData)||void 0===t?void 0:t.createTime},getCurrentNode(e){var t,n;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U(),a=z.resolveThreadId(e,r),i=null!==(t=null===(n=r.threads[a])||void 0===n?void 0:n.currentLeafId)&&void 0!==t?t:"root";return R.getTree(e).getNodeByIdOrMessageId(i)},isThreadUrlSafe(e,t){var n,r;let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:U(),i=z.resolveThreadId(e,a);return null!==(n=null===(r=a.threads[i])||void 0===r?void 0:r.safeUrls.includes(t))&&void 0!==n&&n},getRatingPrompt(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U(),r=z.resolveThreadId(e,n);return null===(t=n.threads[r])||void 0===t?void 0:t.promptGptRating}},R={initThread:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=R.resolveThreadId(e);if(null==U().threads[r]){let e=(0,d.PH)();Z(a=>{a.threads[r]={initialThreadData:e,mode:t,modelId:n,tree:new u.Cv(u.Cv.createTree()),title:null,titleSource:I.NewChat,currentLeafId:"root",conversationTurns:[],safeUrls:[],isLoading:!N(r),docsReferencedByURL:{}}})}},setThreadModelId:(e,t)=>{let n=R.resolveThreadId(e);Z(e=>{let r=e.threads[n];null!=r&&(r.modelId=t)})},updateConversationMode:(e,t)=>{let n=R.resolveThreadId(e);Z(e=>{let r=e.threads[n];null!=r&&(r.mode=t)})},getServerThreadId:e=>N(e)?U().clientNewThreadIdToServerIdMapping[e]:e,setServerIdForNewThread:(e,t)=>{void 0===U().clientNewThreadIdToServerIdMapping[e]&&Z(n=>{n.threads[t]=n.threads[e],delete n.threads[e],n.clientNewThreadIdToServerIdMapping[e]=t})},initThreadFromServerData:function(e,t){var n,r,i,l,s;let c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,p=arguments.length>4&&void 0!==arguments[4]&&arguments[4],m=R.resolveThreadId(e);if(!p&&(null==U().threads[m]&&!c||(null===(s=U().threads[m])||void 0===s?void 0:s.isLoading)===!1))return;let g=(0,d._J)(t),h=null!==(n=g.mapping)&&void 0!==n?n:u.Cv.createTree(),v={lastModelUsed:function e(t,n,r){var a;if(r)return r;let i=t[n];return null!=i&&null!==(a=i.message)&&void 0!==a&&null!==(a=a.metadata)&&void 0!==a&&a.model_slug?i.message.metadata.model_slug:null!=i&&i.parentId?e(t,i.parentId):null}(g.mapping,g.initialCurrentLeafId,t.default_model_slug),createTime:"create_time"in t?new Date(1e3*t.create_time):void 0,isArchived:null!==(r=t.is_archived)&&void 0!==r&&r},x=new u.Cv(h),b=null!==(i=null!==(l=g.initialCurrentLeafId)&&void 0!==l?l:g.rootId)&&void 0!==i?i:"root",y="has_user_editable_context"in t?{hasUserEditableContextFlag:t.has_user_editable_context,authorName:t.author_name,model:"model"in t&&null!=t.model?(0,o.H6)(t.model):void 0}:void 0;Z(e=>{var n,r,i;let o=e.threads[m];e.threads[m]={modelId:null!==(n=null==o?void 0:o.modelId)&&void 0!==n?n:null,initialThreadData:v,mode:null!=t.gizmo_id?{kind:a.OL.GizmoInteraction,gizmo_id:t.gizmo_id}:{kind:a.OL.PrimaryAssistant,plugin_ids:t.plugin_ids},sharedConversationMetadata:y,title:null!==(r=t.title)&&void 0!==r?r:null,titleSource:I.Server,tree:x,currentLeafId:b,isLoading:!1,continuingFromSharedConversationId:f,safeUrls:null!==(i=t.safe_urls)&&void 0!==i?i:[],conversationTurns:[],docsReferencedByURL:{}}}),R.recomputeConversationTurnsForCurrentLeafId(m,[])},updateInitialThreadDataForNewThread:(e,t)=>{let n=R.resolveThreadId(e);Z(e=>{let r=e.threads[n];null!=r&&(r.initialThreadData.lastModelUsed=t)})},getThreadCurrentLeafId:e=>{var t,n;let r=R.resolveThreadId(e);return null!==(t=null===(n=U().threads[r])||void 0===n?void 0:n.currentLeafId)&&void 0!==t?t:"root"},getThreadSafeUrls:e=>{var t;let n=R.resolveThreadId(e);return null===(t=U().threads[n])||void 0===t?void 0:t.safeUrls},addThreadSafeUrl:(e,t)=>{let n=R.resolveThreadId(e);n&&Z(e=>{let r=e.threads[n];null!=r&&r.safeUrls.push(t)})},setThreadCurrentLeafId:(e,t)=>{let n=R.resolveThreadId(e);null!=U().threads[n]&&Z(e=>{let r=e.threads[n];if(null==r)return;r.currentLeafId=t;let a=R.computeThreadConversationTurns(n,r.currentLeafId,r.conversationTurns);r.conversationTurns=a})},setTitle:(e,t,n)=>{let r=R.resolveThreadId(e);Z(e=>{let a=e.threads[r];a&&(a.title=t,a.titleSource=n)})},getTitle:e=>{var t,n;let r=z.resolveThreadId(e);return null!==(t=null===(n=U().threads[r])||void 0===n?void 0:n.title)&&void 0!==t?t:void 0},getTitleAndSource:e=>({title:R.getTitle(e),titleSource:z.getThreadTitleSource(e)}),deleteNodesByFilter:(e,t)=>{let n=R.getThreadCurrentLeafId(e);R.updateTree(e,r=>{r.deleteNodesByFilter(t).includes(n)&&R.setThreadCurrentLeafId(e,"root")})},updateTree:(e,t)=>{var n,r;let a=R.resolveThreadId(e);if(!(null!=U().threads[a])){console.warn("Thread does not exist, cannot update tree: ",a);return}t(R.getTree(e));let i=null!==(n=null===(r=U().threads[a])||void 0===r?void 0:r.conversationTurns)&&void 0!==n?n:[];R.recomputeConversationTurnsForCurrentLeafId(a,i)},getTree:e=>{var t,n;let r=R.resolveThreadId(e);return null!==(t=null===(n=U().threads[r])||void 0===n?void 0:n.tree)&&void 0!==t?t:D()},resolveThreadId:e=>z.resolveThreadId(e),recomputeConversationTurnsForCurrentLeafId:(e,t)=>{let n=R.resolveThreadId(e);Z(e=>{let r=e.threads[n];if(null==r)return;let a=R.computeThreadConversationTurns(n,r.currentLeafId,t);r.conversationTurns=a})},computeThreadConversationTurns:(e,t,n)=>{let r=R.resolveThreadId(e);return R.getTree(r).getConversationTurns(t).map((e,t)=>{let r=null==n?void 0:n[t];return w()(r,e)?r:e})},getThreadConversationTurns:(e,t,n)=>{var r,a,i;let o=R.resolveThreadId(e),l=U().threads[o];if(null==l)return[];let s=l.tree,c=s.messageIdToNodeId(null!==(r=null==l?void 0:l.currentLeafId)&&void 0!==r?r:"root"),u=null!=t?s.messageIdToNodeId(t):null;return null!=u&&u!==c?R.computeThreadConversationTurns(o,u,null!=n?n:[]):null!==(a=null===(i=U().threads[o])||void 0===i?void 0:i.conversationTurns)&&void 0!==a?a:[]},removeContinuingFromSharedConversationId:e=>{let t=R.resolveThreadId(e);Z(e=>{let n=e.threads[t];(null==n?void 0:n.continuingFromSharedConversationId)!=null&&delete n.continuingFromSharedConversationId})},updateReferencedDocState:(e,t,n)=>{let r=R.resolveThreadId(e);Z(e=>{let a=e.threads[r];a&&(a.docsReferencedByURL[t]=n)})},copyLastMessageToClipboard:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mouse",n=R.getThreadCurrentLeafId(e),r=R.getThreadConversationTurns(e,n);return R.copyMessageToClipboard(e,r.length-1,t)},copyMessageToClipboard:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mouse",r=R.getThreadCurrentLeafId(e),i=R.getThreadConversationTurns(e,r)[t];if(!i)return Promise.reject();let{messages:o}=i,l=o.reduce((e,t)=>t.err||t.message.author.role!==a.uU.Assistant||"all"!==t.message.recipient?e:e+(e?"\n\n":"")+(0,c.RR)(t.message),"");return(0,m.v)(l).then(()=>{f.A.logEvent(p.M.copyToClipboard,{threadId:R.getServerThreadId(e),id:o[0].message.id,eventSource:n}),h.m9.logEvent("chatgpt_copy_to_clipboard")})},deleteThread:e=>{Z(t=>{delete t.threads[e],delete t.clientNewThreadIdToServerIdMapping[e]})},retainThread:e=>{Z(t=>{var n;t.threadRetainCounts[e]=(null!==(n=t.threadRetainCounts[e])&&void 0!==n?n:0)+1}),clearTimeout(A[e])},releaseThread:e=>{null!=U().threads[e]&&(Z(t=>{var n;t.threadRetainCounts[e]=Math.max((null!==(n=t.threadRetainCounts[e])&&void 0!==n?n:0)-1,0)}),U().threadRetainCounts[e]>0||(clearTimeout(A[e]),A[e]=setTimeout(()=>{null==U().threads[e]||U().threadRetainCounts[e]>0||R.deleteThread(e)},3e4)))},setPromptGptRating:(e,t)=>{let n=R.resolveThreadId(e);Z(e=>{let r=e.threads[n];null!=r&&(null==t?r.promptGptRating=void 0:r.promptGptRating={gizmoId:t})})}};async function B(e,t){let n=await l.Z.getConversation(e);return g.U.addTiming("chatgpt.web.chatPage.loadExistingConversation"),R.initThreadFromServerData(e,n,t,void 0,t),n}let G=e=>{let t=F(t=>z.getThreadModelId(e,t));return null!=t?t:o.ge},W=e=>F(t=>null==e?void 0:N(e)?t.clientNewThreadIdToServerIdMapping[e]:e),q=e=>F(t=>{var n,r;let a=R.resolveThreadId(e);return null!==(n=null===(r=t.threads[a])||void 0===r?void 0:r.initialThreadData)&&void 0!==n?n:L()}),V=(e,t)=>F(n=>{let r=z.getConversationMode(e,n);return t&&((null==r?void 0:r.kind)===a.OL.GizmoInteraction||(null==r?void 0:r.kind)===a.OL.PrimaryAssistant)?{gizmo_id:t,kind:a.OL.GizmoInteraction}:r}),H=e=>{let t=(0,i.rm)();return F(n=>null==n.threads[z.resolveThreadId(e,n)]?t:z.getGizmoId(e,n))},K=e=>!!H(e),Q=e=>F(t=>{var n,r;let a=R.resolveThreadId(e);return null!==(n=null===(r=t.threads[a])||void 0===r?void 0:r.isLoading)&&void 0!==n&&n}),X=e=>F(()=>R.getThreadCurrentLeafId(e)),Y=(e,t)=>{let n=(0,k.useRef)([]);return F(()=>{var r;let a=R.getThreadConversationTurns(e,t,n.current);return n.current=a,null!==(r=null==a?void 0:a.length)&&void 0!==r?r:0})},J=(e,t)=>{let n=(0,k.useRef)([]);return F(()=>{let r=R.getThreadConversationTurns(e,t,n.current);return n.current=r,r})},$=(e,t,n)=>{let r=(0,k.useRef)([]);return F(()=>{let a=R.getThreadConversationTurns(e,n,r.current);return r.current=a,t>=0&&t<a.length?a[t]:null})},ee=(e,t)=>{let n=(0,k.useRef)([]);return F(()=>{let r=R.getThreadConversationTurns(e,t,n.current);return n.current=r,r.length>0?r[r.length-1]:null})},et=(e,t)=>F(()=>{let n=R.resolveThreadId(e);return R.getTree(n).getBranchFromLeaf(t).some(e=>e.message.author.role===a.uU.User)}),en=e=>{let t=X(e);return(0,k.useMemo)(()=>{var n,r;let a=R.getThreadConversationTurns(e,t,[]),i=null!==(n=null==a?void 0:a.length)&&void 0!==n?n:0,o=null!==(r=null==a?void 0:a[i-1])&&void 0!==r?r:null;return 0===i?t:u.Cv.getRequestIdFromConversationTurn(o)},[t,e])},er=e=>F(()=>R.getTitle(e)),ea=e=>(0,T.s)(F,()=>R.getTitleAndSource(e),w()),ei=e=>F(()=>{var t;let n=R.resolveThreadId(e);return null===(t=U().threads[n])||void 0===t?void 0:t.continuingFromSharedConversationId}),eo=e=>F(()=>{var t;let n=R.resolveThreadId(e);return null===(t=U().threads[n])||void 0===t||null===(t=t.sharedConversationMetadata)||void 0===t?void 0:t.authorName}),el=(e,t)=>F(()=>{let n=R.getTree(e).getNodeByIdOrMessageId(t);if(null==n)throw Error("useThreadTreeNode: cannot get tree node for ".concat(t," in thread ").concat(e));return n}),es=(e,t)=>F(()=>{var n,r;return null!==(n=null===(r=R.getTree(e))||void 0===r?void 0:r.getHasErrorFromNode(t))&&void 0!==n&&n}),ec=(e,t)=>F(()=>{var n,r;return null!==(n=null===(r=R.getTree(e))||void 0===r?void 0:r.isMessageIncomplete(t))&&void 0!==n&&n}),eu=(e,t)=>F(()=>{let n=R.getTree(e);return null==n?[]:n.getBranchFromLeaf(t).filter(e=>e.message.author.role!==a.uU.Root)}),ed=(e,t)=>eu(e,t).map(e=>e.message),ef=(e,t)=>F(()=>{let n=R.getTree(e);return null==n?null:n.getLeafFromNode(t)}),ep=(e,t)=>F(()=>{let n=R.getTree(e);return null!=n&&t.map(e=>n.getLeafFromNode(e)).some(e=>n.getHasErrorFromNode(e.id))}),em=e=>{var t,n,r,a,i;let o=R.getTree(e).getUserContext();if(null==o)return null;let{message:l}=o,s=null!==(t=null===(n=l.metadata)||void 0===n?void 0:n.shared_conversation_id)&&void 0!==t?t:null;if((null===(r=l.metadata)||void 0===r?void 0:r.user_context_message_data)!=null){let{about_user_message:e,about_model_message:t}=l.metadata.user_context_message_data;return{aboutUserMessage:null!==(a=null==e?void 0:e.trim())&&void 0!==a?a:"",aboutModelMessage:null!==(i=null==t?void 0:t.trim())&&void 0!==i?i:"",fallback:null,shareId:s}}return{aboutUserMessage:null,aboutModelMessage:null,fallback:(0,c.RR)(l),shareId:s}},eg=e=>F(t=>{var n;let r=R.resolveThreadId(e);return null===(n=t.threads[r])||void 0===n||null===(n=n.sharedConversationMetadata)||void 0===n?void 0:n.hasUserEditableContextFlag}),eh=e=>!!R.getTree(e).findNode(e=>"model_editable_context"===e.message.content.content_type),ev=e=>{let t=eg(e);return null!=em(e)||!!t},ex=e=>F(()=>{var t;let n=R.resolveThreadId(e);return(null===(t=U().threads[n])||void 0===t?void 0:t.continuingFromSharedConversationId)!=null}),eb=e=>F(()=>"root"===R.getThreadCurrentLeafId(e)),ey=e=>{let t=(0,O.useRouter)(),n=W(e);return!!n&&(!!t.query.convId&&t.query.convId===n||!!y()(t.query.default)&&"c"===t.query.default[0]&&t.query.default[1]===n)},ej=e=>F(()=>{var t;let n=R.resolveThreadId(e);return null===(t=U().threads[n])||void 0===t?void 0:t.promptGptRating}),ew=(e,t)=>F(()=>{let n=R.resolveThreadId(e),r=R.getTree(n).getBranchFromLeaf(t);return x()(r,e=>e.message.author.role===a.uU.System&&"system_content"===e.message.content.content_type)}),eO=()=>null!=(0,k.useContext)(s.gB);function ek(e){let t=R.getTree(e),n=R.getThreadCurrentLeafId(e),r=t.getNodeByIdOrMessageId(n);for(;r;){var a;let e=null===(a=r.message.metadata)||void 0===a?void 0:a.default_model_slug;if(e)return e;if(!r.parentId)return;r=t.getNodeByIdOrMessageId(r.parentId)}}function eP(e){let{clientThreadId:t,role:n}=e;return R.getTree(t).countMessagesByAuthor(n)}},4408:function(e,t,n){n.d(t,{i:function(){return r},l:function(){return a}});let r="https://help.openai.com/en/articles/8096356-custom-instructions-for-chatgpt",a="https://help.openai.com/en/articles/7967234-enabling-multi-factor-authentication-mfa-with-openai#h_488a963a1e"},27860:function(e,t,n){n.d(t,{AA:function(){return l},FH:function(){return u},J8:function(){return c},L7:function(){return o},SX:function(){return d},ZV:function(){return a},cy:function(){return i},xj:function(){return s}});var r=n(82823);function a(e,t){return t?"/g/".concat((0,r.kX)(t),"/c/").concat(e):"/c/".concat(e)}function i(){return"/gpts"}function o(){return"/gpts/mine"}function l(e){return e?"/gpts/editor/".concat(e):"/gpts/editor"}function s(e){let t=l(void 0);return null==e?t:l(e)}function c(e){return l(e)}function u(e){try{let t=new URL(e);return t.hostname=t.hostname.replace(/^(www\.|web\.|mbasic\.|mobile\.)(secure\.)?/,""),t.pathname="",[...t.searchParams.keys()].forEach(e=>t.searchParams.delete(e)),t.toString()}catch(t){return e}}function d(e){let t=function(e){if(!e)return null;try{return new URL(e).hostname}catch(e){return null}}(e);return t?t.replace(/^www\./,""):e}},48538:function(e,t,n){n.d(t,{v:function(){return i}});var r=n(94982);function a(){r.m.danger("Failed to copy to clipboard.",{duration:4,hasCloseButton:!0})}function i(e){return new Promise((t,n)=>{var r;if(!(null!==(r=navigator)&&void 0!==r&&r.clipboard)){a(),n();return}try{navigator.clipboard.writeText(e).then(()=>t("success"),()=>{a(),n()})}catch(e){a(),n()}})}},76754:function(e,t,n){n.d(t,{I:function(){return l},f:function(){return s}});var r=n(14816);let a="client-correlated-secret";function i(){let e=localStorage.getItem(a);return null==e?e:crypto.subtle.importKey("jwk",JSON.parse(e),{name:"HMAC",hash:{name:"SHA-512"}},!0,["sign","verify"])}async function o(){null==i()&&localStorage.setItem(a,JSON.stringify(await crypto.subtle.exportKey("jwk",await crypto.subtle.generateKey({name:"HMAC",hash:{name:"SHA-512"}},!0,["sign","verify"]))));let e=i();if(null==e)throw Error("Failed to get key from storage");return e}function l(e){let t=new URL(e),n=(0,r.a)({queryKey:[a,"generate-challenge",e.search],queryFn:async()=>[...new Uint8Array(await crypto.subtle.sign("HMAC",await o(),new TextEncoder().encode(e.search)))].map(e=>e.toString(16).padStart(2,"0")).join(""),staleTime:0});if(void 0!==n.data)return t.hash=n.data,t}function s(){var e,t;let n=null===(e=location)||void 0===e?void 0:e.search,i=null===(t=location)||void 0===t?void 0:t.hash;return(0,r.a)({queryKey:[a,"verify-challenge",n,i],queryFn:async()=>"string"==typeof n&&"string"==typeof i&&crypto.subtle.verify("HMAC",await o(),function(e){let t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++)t[n]=parseInt(e.substr(2*n,2),16);return t.buffer}(i.slice(1)),new TextEncoder().encode(n))}).data?new URLSearchParams(n):void 0}}}]);
//# sourceMappingURL=5815-dee4149ffed12c59.js.map