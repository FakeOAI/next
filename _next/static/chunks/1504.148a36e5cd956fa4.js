(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1504,7703],{26169:function(e,t,n){var a=n(57398),l=n(2428),s=n(89109);e.exports=function(e){return"string"==typeof e||!l(e)&&s(e)&&"[object String]"==a(e)}},49641:function(e,t,n){"use strict";var a=n(90323),l=n.n(a);n(70079);var s=n(35250);let r=e=>{let{children:t}=e;return(0,s.jsx)(s.Fragment,{children:t})};t.Z=l()(()=>Promise.resolve(r),{ssr:!1})},83143:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var a,l=n(25927),s=n(37609),r=n(83737),i=n(61888),o=n(70079),c=n(9063),u=n(84692),d=n(21389),m=n(63081),x=n(88436),f=n(3806),b=n(11397),h=n(35250);function p(e){let{tagOptions:t,onSubmit:n,onMoreClicked:a,onCancel:l,maxInlineTags:d=5,modalOnly:p=!1,modalTitle:g,multiple:k}=e,y=(0,c.Z)(),{0:j,1:N}=(0,o.useState)(p?"modal":"inline"),{0:C,1:M}=(0,o.useState)([]),{0:w,1:F}=(0,o.useState)(void 0),Z=(0,o.useCallback)(e=>{n(e),N("submitted"),setTimeout(()=>{N("closed")},1500)},[n]),T=(0,o.useMemo)(()=>(0,i.debounce)(Z,500),[Z]),E=e=>{let t=[];return M(t=k?C.includes(e)?C.filter(t=>t!==e):[...C,e]:[e]),t},I=()=>{Z({tags:C,textFeedback:w,tagChoices:q,source:"modal"})},q=t.map(e=>e.value),P=function(e){let t={};return e.forEach(e=>{var n;let a=null!==(n=e.group)&&void 0!==n?n:"Default";t[a]||(t[a]=[]),t[a].push(e)}),t}(t),S=Object.keys(P);return(0,h.jsxs)(h.Fragment,{children:[!p&&(0,h.jsx)(s.M,{children:"closed"!==j&&(0,h.jsxs)(r.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"min-h-[96px] w-full",children:["submitted"===j&&(0,h.jsx)(r.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"text-center",children:(0,h.jsx)("div",{className:"inline-flex rounded-lg border border-token-border-light p-4",children:(0,h.jsx)("div",{className:"text-sm",children:(0,h.jsx)(u.Z,{id:"ConversationTurnInlineMessageFeedback.submitted",defaultMessage:"Thanks for your feedback!"})})})}),["inline","modal"].includes(j)&&(0,h.jsxs)("div",{className:"relative mt-2 flex w-full flex-col gap-3 rounded-lg border border-token-border-light p-4",children:[(0,h.jsx)("button",{className:"absolute right-4 top-4 text-sm font-bold",onClick:()=>{N("closed"),T.cancel(),null==l||l()},children:(0,h.jsx)(b.v7,{className:"icon-md text-token-text-secondary hover:text-token-text-primary"})}),(0,h.jsx)("div",{className:"text-sm text-token-text-secondary",children:(0,h.jsx)(u.Z,{id:"ConversationTurnInlineMessageFeedback.inlineTitle",defaultMessage:"Tell us more:"})}),(0,h.jsxs)("div",{className:"flex flex-wrap gap-3",children:[t.slice(0,d).map(e=>(0,h.jsx)(v,{$selected:C.includes(e.value),onClick:()=>{T({tags:E(e.value),tagChoices:q,source:"inline"})},children:e.label},e.value)),(0,h.jsx)(v,{onClick:()=>{null==a||a(),T.cancel(),N("modal")},children:(0,h.jsx)(u.Z,{id:"ConversationTurnInlineMessageFeedback.moreOptions.1",defaultMessage:"More..."})})]})]})]},"main")}),"modal"===j&&(0,h.jsxs)(f.Z,{type:"success",isOpen:!0,className:"max-w-xl",size:"custom",title:null!=g?g:(0,h.jsx)(u.Z,{id:"ConversationTurnInlineMessageFeedback.modalTitle",defaultMessage:"Provide additional feedback"}),onClose:()=>{M([]),N(p?"closed":"inline"),p&&(null==l||l())},showCloseButton:!0,primaryButton:(0,h.jsx)(m.z,{color:"primary",disabled:0===C.length&&!w,onClick:I,children:(0,h.jsx)(u.Z,{id:"ConversationTurnInlineMessageFeedback.submit",defaultMessage:"Submit"})}),rootClassName:"z-50",children:[(0,h.jsx)("div",{className:"flex flex-col gap-5",children:S.map(e=>(0,h.jsxs)("div",{children:[S.length>1&&(0,h.jsx)("div",{className:"mb-1 text-sm font-medium",children:e}),(0,h.jsx)("div",{className:"flex flex-wrap gap-3",children:P[e].map(e=>(0,h.jsx)(v,{$selected:C.includes(e.value),onClick:()=>E(e.value),children:e.label},e.value))},e)]},e))}),(0,h.jsx)(x.Z,{name:"feedback",type:"text",className:"mt-6",placeholder:y.formatMessage({id:"ConversationTurnInlineMessageFeedback.feedbackPlaceholder.1",defaultMessage:"(Optional) Feel free to add specific details"}),value:null!=w?w:"",onChange:e=>F(e.target.value),onPressEnter:I})]})]})}let v=d.Z.button(a||(a=(0,l.Z)(["\n  rounded-lg border border-token-border-light px-3 py-1 text-sm text-token-text-secondary hover:text-token-text-primary hover:bg-token-main-surface-secondary\n  ","\n"])),e=>{let{$selected:t}=e;return t&&"!bg-token-text-primary !text-token-main-surface-primary"})},17165:function(e,t,n){"use strict";n.d(t,{d:function(){return m},u:function(){return x}});var a=n(15530),l=n(53050),s=n(82473),r=n(61236),i=n(98486),o=n(79208),c=n(61888),u=n(84989);let d=(0,c.memoize)(e=>o.Ue({fetcher:async t=>{let n=new Map;for await(let l of a.c.streamedJsonPost("".concat(u.B,"/attributions"),{urls:t}))l.attribution&&n.set(l.url,l.attribution),e.setQueryData(["attribution",{url:l.url}],l.attribution);return(0,c.compact)(t.map(e=>{let t=n.get(e);return t&&{url:e,attribution:t}}))},resolver:o.rp("url"),scheduler:o.ck(100)}));function m(e){let{useBaseUrl:t=!0,enabled:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t?(0,l.FH)(e):e,i=d((0,s.NL)());return(0,r.a)({queryKey:["attribution",{url:a}],queryFn:async()=>(await i.fetch(a)).attribution,enabled:n&&!!e})}function x(e){let{useBaseUrl:t=!0,enabled:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t?e.map(l.FH):e,r=d((0,s.NL)());return(0,i.h)({queries:a.map(e=>({queryKey:["attribution",{url:e}],queryFn:async()=>(await r.fetch(e)).attribution,enabled:a.length>0&&n})),combine:t=>{let n=new Map;for(let a=0;a<t.length;a++){let l=t[a].data;l&&n.set(e[a],l)}return n}})}}}]);
//# sourceMappingURL=1504.148a36e5cd956fa4.js.map