"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4381,6165],{83143:function(e,t,n){n.d(t,{Z:function(){return h}});var r,a=n(25927),l=n(37609),i=n(83737),s=n(61888),o=n(70079),c=n(9063),u=n(84692),d=n(21389),f=n(63081),m=n(88436),b=n(3806),p=n(11397),x=n(35250);function h(e){let{tagOptions:t,onSubmit:n,onMoreClicked:r,onCancel:a,maxInlineTags:d=5,modalOnly:h=!1,modalTitle:g,multiple:y}=e,j=(0,c.Z)(),{0:k,1:O}=(0,o.useState)(h?"modal":"inline"),{0:w,1:C}=(0,o.useState)([]),{0:N,1:M}=(0,o.useState)(void 0),Z=(0,o.useCallback)(e=>{n(e),O("submitted"),setTimeout(()=>{O("closed")},1500)},[n]),P=(0,o.useMemo)(()=>(0,s.debounce)(Z,500),[Z]),T=e=>{let t=[];return C(t=y?w.includes(e)?w.filter(t=>t!==e):[...w,e]:[e]),t},F=()=>{Z({tags:w,textFeedback:N,tagChoices:E,source:"modal"})},E=t.map(e=>e.value),I=function(e){let t={};return e.forEach(e=>{var n;let r=null!==(n=e.group)&&void 0!==n?n:"Default";t[r]||(t[r]=[]),t[r].push(e)}),t}(t),S=Object.keys(I);return(0,x.jsxs)(x.Fragment,{children:[!h&&(0,x.jsx)(l.M,{children:"closed"!==k&&(0,x.jsxs)(i.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"min-h-[96px] w-full",children:["submitted"===k&&(0,x.jsx)(i.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"text-center",children:(0,x.jsx)("div",{className:"inline-flex rounded-lg border border-token-border-light p-4",children:(0,x.jsx)("div",{className:"text-sm",children:(0,x.jsx)(u.Z,{id:"ConversationTurnInlineMessageFeedback.submitted",defaultMessage:"Thanks for your feedback!"})})})}),["inline","modal"].includes(k)&&(0,x.jsxs)("div",{className:"relative mt-2 flex w-full flex-col gap-3 rounded-lg border border-token-border-light p-4",children:[(0,x.jsx)("button",{className:"absolute right-4 top-4 text-sm font-bold",onClick:()=>{O("closed"),P.cancel(),null==a||a()},children:(0,x.jsx)(p.v7,{className:"icon-md text-token-text-secondary hover:text-token-text-primary"})}),(0,x.jsx)("div",{className:"text-sm text-token-text-secondary",children:(0,x.jsx)(u.Z,{id:"ConversationTurnInlineMessageFeedback.inlineTitle",defaultMessage:"Tell us more:"})}),(0,x.jsxs)("div",{className:"flex flex-wrap gap-3",children:[t.slice(0,d).map(e=>(0,x.jsx)(v,{$selected:w.includes(e.value),onClick:()=>{P({tags:T(e.value),tagChoices:E,source:"inline"})},children:e.label},e.value)),(0,x.jsx)(v,{onClick:()=>{null==r||r(),P.cancel(),O("modal")},children:(0,x.jsx)(u.Z,{id:"ConversationTurnInlineMessageFeedback.moreOptions.1",defaultMessage:"More..."})})]})]})]},"main")}),"modal"===k&&(0,x.jsxs)(b.Z,{type:"success",isOpen:!0,className:"max-w-xl",size:"custom",title:null!=g?g:(0,x.jsx)(u.Z,{id:"ConversationTurnInlineMessageFeedback.modalTitle",defaultMessage:"Provide additional feedback"}),onClose:()=>{C([]),O(h?"closed":"inline"),h&&(null==a||a())},showCloseButton:!0,primaryButton:(0,x.jsx)(f.z,{color:"primary",disabled:0===w.length&&!N,onClick:F,children:(0,x.jsx)(u.Z,{id:"ConversationTurnInlineMessageFeedback.submit",defaultMessage:"Submit"})}),rootClassName:"z-50",children:[(0,x.jsx)("div",{className:"flex flex-col gap-5",children:S.map(e=>(0,x.jsxs)("div",{children:[S.length>1&&(0,x.jsx)("div",{className:"mb-1 text-sm font-medium",children:e}),(0,x.jsx)("div",{className:"flex flex-wrap gap-3",children:I[e].map(e=>(0,x.jsx)(v,{$selected:w.includes(e.value),onClick:()=>T(e.value),children:e.label},e.value))},e)]},e))}),(0,x.jsx)(m.Z,{name:"feedback",type:"text",className:"mt-6",placeholder:j.formatMessage({id:"ConversationTurnInlineMessageFeedback.feedbackPlaceholder.1",defaultMessage:"(Optional) Feel free to add specific details"}),value:null!=N?N:"",onChange:e=>M(e.target.value),onPressEnter:F})]})]})}let v=d.Z.button(r||(r=(0,a.Z)(["\n  rounded-lg border border-token-border-light px-3 py-1 text-sm text-token-text-secondary hover:text-token-text-primary hover:bg-token-main-surface-secondary\n  ","\n"])),e=>{let{$selected:t}=e;return t&&"!bg-token-text-primary !text-token-main-surface-primary"})},36165:function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var r=n(72438),a=n(83924),l=n(76338),i=n(77757),s=n(35627),o=n(35250);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){let{json:t,jsonViewProps:n}=e,u=(0,a.Gv)();return(0,o.jsx)(l.ZP,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({enableClipboard:!0,displayDataTypes:!1,displayObjectSize:!1,value:t,style:u?i.$:s.W,shortenTextAfterLength:120},n))}},17165:function(e,t,n){n.d(t,{d:function(){return f},u:function(){return m}});var r=n(15530),a=n(53050),l=n(82473),i=n(61236),s=n(98486),o=n(79208),c=n(61888),u=n(84989);let d=(0,c.memoize)(e=>o.Ue({fetcher:async t=>{let n=new Map;for await(let a of r.c.streamedJsonPost("".concat(u.B,"/attributions"),{urls:t}))a.attribution&&n.set(a.url,a.attribution),e.setQueryData(["attribution",{url:a.url}],a.attribution);return(0,c.compact)(t.map(e=>{let t=n.get(e);return t&&{url:e,attribution:t}}))},resolver:o.rp("url"),scheduler:o.ck(100)}));function f(e){let{useBaseUrl:t=!0,enabled:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t?(0,a.FH)(e):e,s=d((0,l.NL)());return(0,i.a)({queryKey:["attribution",{url:r}],queryFn:async()=>(await s.fetch(r)).attribution,enabled:n&&!!e})}function m(e){let{useBaseUrl:t=!0,enabled:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t?e.map(a.FH):e,i=d((0,l.NL)());return(0,s.h)({queries:r.map(e=>({queryKey:["attribution",{url:e}],queryFn:async()=>(await i.fetch(e)).attribution,enabled:r.length>0&&n})),combine:t=>{let n=new Map;for(let r=0;r<t.length;r++){let a=t[r].data;a&&n.set(e[r],a)}return n}})}},75208:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(70079);function a(e,t){let n=(0,r.useRef)(e);(0,r.useEffect)(()=>{n.current=e},[e]),(0,r.useEffect)(()=>{if(null!=t){let e=window.setInterval(function(){n.current()},t);return()=>clearInterval(e)}},[t])}},79394:function(e,t,n){n.d(t,{f:function(){return l}});var r=n(61888),a=n(70079);function l(e){let{0:t,1:n}=(0,a.useState)(null);return"function"==typeof e?[t,e=>{e&&n(e)}]:[e.current,r.noop]}}}]);
//# sourceMappingURL=4381.e06ec58bd2a62238.js.map